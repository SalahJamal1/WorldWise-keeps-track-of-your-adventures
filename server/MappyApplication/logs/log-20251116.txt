2025-11-16 07:08:06.642 +03:00 [INF] User profile is available. Using '/Users/salah/.aspnet/DataProtection-Keys' as key repository; keys will not be encrypted at rest.
2025-11-16 07:08:06.693 +03:00 [INF] Now listening on: http://localhost:8080
2025-11-16 07:08:06.694 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2025-11-16 07:08:06.695 +03:00 [INF] Hosting environment: Development
2025-11-16 07:08:06.695 +03:00 [INF] Content root path: /Users/salah/Desktop/MappyApplication/MappyApplication
2025-11-16 07:12:00.178 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:8080/api/v1/Auth/login - application/json 61
2025-11-16 07:12:00.209 +03:00 [WRN] Failed to determine the https port for redirect.
2025-11-16 07:12:00.232 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.AuthController.Login (MappyApplication)'
2025-11-16 07:12:00.245 +03:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.user.AuthResponse] Login(MappyApplication.Models.user.AuthLogin) on controller MappyApplication.Controllers.AuthController (MappyApplication).
2025-11-16 07:12:00.897 +03:00 [INF] Executed DbCommand (53ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`FirstName`, `a`.`LastName`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`
FROM `AspNetUsers` AS `a`
WHERE `a`.`NormalizedEmail` = @__normalizedEmail_0
LIMIT 2
2025-11-16 07:12:00.973 +03:00 [INF] Executed DbCommand (12ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']

        UPDATE TOKENS
        SET Revoked = true, Expired = true
        WHERE UserId = @p0
          AND DeviceId = @p1
          AND Revoked = false
          AND Expired = false
2025-11-16 07:12:00.996 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a0`.`Name`
FROM `AspNetUserRoles` AS `a`
INNER JOIN `AspNetRoles` AS `a0` ON `a`.`RoleId` = `a0`.`Id`
WHERE `a`.`UserId` = @__userId_0
2025-11-16 07:12:01.002 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ClaimType`, `a`.`ClaimValue`, `a`.`UserId`
FROM `AspNetUserClaims` AS `a`
WHERE `a`.`UserId` = @__user_Id_0
2025-11-16 07:12:01.012 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a0`.`Name`
FROM `AspNetUserRoles` AS `a`
INNER JOIN `AspNetRoles` AS `a0` ON `a`.`RoleId` = `a0`.`Id`
WHERE `a`.`UserId` = @__userId_0
2025-11-16 07:12:01.013 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ClaimType`, `a`.`ClaimValue`, `a`.`UserId`
FROM `AspNetUserClaims` AS `a`
WHERE `a`.`UserId` = @__user_Id_0
2025-11-16 07:12:01.061 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (DbType = DateTime), @p2='?' (Size = 4000), @p3='?' (DbType = Boolean), @p4='?' (Size = 4000), @p5='?' (DbType = Boolean), @p6='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO `Tokens` (`AccessToken`, `CreatedAt`, `DeviceId`, `Expired`, `RefreshToken`, `Revoked`, `UserId`)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6);
SELECT `Id`
FROM `Tokens`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();
2025-11-16 07:12:01.130 +03:00 [INF] Added Token MappyApplication.Data.Token
2025-11-16 07:12:01.148 +03:00 [WRN] Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.
2025-11-16 07:12:01.159 +03:00 [INF] Executed DbCommand (7ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessFailedCount`, `t`.`ConcurrencyStamp`, `t`.`Email`, `t`.`EmailConfirmed`, `t`.`FirstName`, `t`.`LastName`, `t`.`LockoutEnabled`, `t`.`LockoutEnd`, `t`.`NormalizedEmail`, `t`.`NormalizedUserName`, `t`.`PasswordHash`, `t`.`PhoneNumber`, `t`.`PhoneNumberConfirmed`, `t`.`SecurityStamp`, `t`.`TwoFactorEnabled`, `t`.`UserName`, `w`.`Id`, `w`.`Cadence`, `w`.`CityName`, `w`.`Coords`, `w`.`Date`, `w`.`Distance`, `w`.`Duration`, `w`.`Emoji`, `w`.`Pace`, `w`.`Type`, `w`.`UserId`, `c`.`Id`, `c`.`CityName`, `c`.`Country`, `c`.`Date`, `c`.`Emoji`, `c`.`Lat`, `c`.`Lng`, `c`.`Notes`, `c`.`UserId`
FROM (
    SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`FirstName`, `a`.`LastName`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`
    FROM `AspNetUsers` AS `a`
    WHERE `a`.`Id` = @__user_Id_0
    LIMIT 2
) AS `t`
LEFT JOIN `Workouts` AS `w` ON `t`.`Id` = `w`.`UserId`
LEFT JOIN `Cities` AS `c` ON `t`.`Id` = `c`.`UserId`
ORDER BY `t`.`Id`, `w`.`Id`
2025-11-16 07:12:01.183 +03:00 [INF] Executing ObjectResult, writing value of type 'MappyApplication.Models.user.AuthResponse'.
2025-11-16 07:12:01.200 +03:00 [INF] Executed action MappyApplication.Controllers.AuthController.Login (MappyApplication) in 954.1235ms
2025-11-16 07:12:01.201 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.AuthController.Login (MappyApplication)'
2025-11-16 07:12:01.204 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:8080/api/v1/Auth/login - 200 null application/json; charset=utf-8 1026.9398ms
2025-11-16 07:12:17.551 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:8080/api/v1/Auth/login - application/json 61
2025-11-16 07:12:17.576 +03:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenMalformedException: IDX14100: JWT is not well formed, there are no dots (.).
The token needs to be in JWS or JWE Compact Serialization Format. (JWS): 'EncodedHeader.EndcodedPayload.EncodedSignature'. (JWE): 'EncodedProtectedHeader.EncodedEncryptedKey.EncodedInitializationVector.EncodedCiphertext.EncodedAuthenticationTag'.
 ---> Microsoft.IdentityModel.Tokens.SecurityTokenMalformedException: IDX14100: JWT is not well formed, there are no dots (.).
The token needs to be in JWS or JWE Compact Serialization Format. (JWS): 'EncodedHeader.EndcodedPayload.EncodedSignature'. (JWE): 'EncodedProtectedHeader.EncodedEncryptedKey.EncodedInitializationVector.EncodedCiphertext.EncodedAuthenticationTag'.
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebToken.ReadToken(String encodedJson)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebToken..ctor(String jwtEncodedString)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ReadToken(String token, TokenValidationParameters validationParameters)
   --- End of inner exception stack trace ---
2025-11-16 07:12:17.589 +03:00 [INF] Bearer was not authenticated. Failure message: IDX14100: JWT is not well formed, there are no dots (.).
The token needs to be in JWS or JWE Compact Serialization Format. (JWS): 'EncodedHeader.EndcodedPayload.EncodedSignature'. (JWE): 'EncodedProtectedHeader.EncodedEncryptedKey.EncodedInitializationVector.EncodedCiphertext.EncodedAuthenticationTag'.
2025-11-16 07:12:17.589 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.AuthController.Login (MappyApplication)'
2025-11-16 07:12:17.591 +03:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.user.AuthResponse] Login(MappyApplication.Models.user.AuthLogin) on controller MappyApplication.Controllers.AuthController (MappyApplication).
2025-11-16 07:12:17.633 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`FirstName`, `a`.`LastName`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`
FROM `AspNetUsers` AS `a`
WHERE `a`.`NormalizedEmail` = @__normalizedEmail_0
LIMIT 2
2025-11-16 07:12:17.671 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']

        UPDATE TOKENS
        SET Revoked = true, Expired = true
        WHERE UserId = @p0
          AND DeviceId = @p1
          AND Revoked = false
          AND Expired = false
2025-11-16 07:12:17.672 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a0`.`Name`
FROM `AspNetUserRoles` AS `a`
INNER JOIN `AspNetRoles` AS `a0` ON `a`.`RoleId` = `a0`.`Id`
WHERE `a`.`UserId` = @__userId_0
2025-11-16 07:12:17.673 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ClaimType`, `a`.`ClaimValue`, `a`.`UserId`
FROM `AspNetUserClaims` AS `a`
WHERE `a`.`UserId` = @__user_Id_0
2025-11-16 07:12:17.674 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a0`.`Name`
FROM `AspNetUserRoles` AS `a`
INNER JOIN `AspNetRoles` AS `a0` ON `a`.`RoleId` = `a0`.`Id`
WHERE `a`.`UserId` = @__userId_0
2025-11-16 07:12:17.675 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ClaimType`, `a`.`ClaimValue`, `a`.`UserId`
FROM `AspNetUserClaims` AS `a`
WHERE `a`.`UserId` = @__user_Id_0
2025-11-16 07:12:17.678 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (DbType = DateTime), @p2='?' (Size = 4000), @p3='?' (DbType = Boolean), @p4='?' (Size = 4000), @p5='?' (DbType = Boolean), @p6='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO `Tokens` (`AccessToken`, `CreatedAt`, `DeviceId`, `Expired`, `RefreshToken`, `Revoked`, `UserId`)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6);
SELECT `Id`
FROM `Tokens`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();
2025-11-16 07:12:17.679 +03:00 [INF] Added Token MappyApplication.Data.Token
2025-11-16 07:12:17.680 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessFailedCount`, `t`.`ConcurrencyStamp`, `t`.`Email`, `t`.`EmailConfirmed`, `t`.`FirstName`, `t`.`LastName`, `t`.`LockoutEnabled`, `t`.`LockoutEnd`, `t`.`NormalizedEmail`, `t`.`NormalizedUserName`, `t`.`PasswordHash`, `t`.`PhoneNumber`, `t`.`PhoneNumberConfirmed`, `t`.`SecurityStamp`, `t`.`TwoFactorEnabled`, `t`.`UserName`, `w`.`Id`, `w`.`Cadence`, `w`.`CityName`, `w`.`Coords`, `w`.`Date`, `w`.`Distance`, `w`.`Duration`, `w`.`Emoji`, `w`.`Pace`, `w`.`Type`, `w`.`UserId`, `c`.`Id`, `c`.`CityName`, `c`.`Country`, `c`.`Date`, `c`.`Emoji`, `c`.`Lat`, `c`.`Lng`, `c`.`Notes`, `c`.`UserId`
FROM (
    SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`FirstName`, `a`.`LastName`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`
    FROM `AspNetUsers` AS `a`
    WHERE `a`.`Id` = @__user_Id_0
    LIMIT 2
) AS `t`
LEFT JOIN `Workouts` AS `w` ON `t`.`Id` = `w`.`UserId`
LEFT JOIN `Cities` AS `c` ON `t`.`Id` = `c`.`UserId`
ORDER BY `t`.`Id`, `w`.`Id`
2025-11-16 07:12:17.682 +03:00 [INF] Executing ObjectResult, writing value of type 'MappyApplication.Models.user.AuthResponse'.
2025-11-16 07:12:17.682 +03:00 [INF] Executed action MappyApplication.Controllers.AuthController.Login (MappyApplication) in 91.4052ms
2025-11-16 07:12:17.682 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.AuthController.Login (MappyApplication)'
2025-11-16 07:12:17.683 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:8080/api/v1/Auth/login - 200 null application/json; charset=utf-8 131.8093ms
2025-11-16 07:12:31.743 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:8080/api/v1/Auth/refresh-token - null 0
2025-11-16 07:12:31.844 +03:00 [INF] Executed DbCommand (4ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 07:12:31.847 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication)'
2025-11-16 07:12:31.849 +03:00 [INF] Route matched with {action = "RefreshToken", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.user.AuthResponse] RefreshToken() on controller MappyApplication.Controllers.AuthController (MappyApplication).
2025-11-16 07:12:31.856 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__refreshToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`RefreshToken` = @__refreshToken_0
LIMIT 2
2025-11-16 07:12:31.865 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`FirstName`, `a`.`LastName`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`
FROM `AspNetUsers` AS `a`
WHERE `a`.`Id` = @__p_0
LIMIT 1
2025-11-16 07:12:31.877 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']

        UPDATE TOKENS
        SET Revoked = true, Expired = true
        WHERE UserId = @p0
          AND DeviceId = @p1
          AND Revoked = false
          AND Expired = false
2025-11-16 07:12:31.878 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a0`.`Name`
FROM `AspNetUserRoles` AS `a`
INNER JOIN `AspNetRoles` AS `a0` ON `a`.`RoleId` = `a0`.`Id`
WHERE `a`.`UserId` = @__userId_0
2025-11-16 07:12:31.879 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ClaimType`, `a`.`ClaimValue`, `a`.`UserId`
FROM `AspNetUserClaims` AS `a`
WHERE `a`.`UserId` = @__user_Id_0
2025-11-16 07:12:31.880 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a0`.`Name`
FROM `AspNetUserRoles` AS `a`
INNER JOIN `AspNetRoles` AS `a0` ON `a`.`RoleId` = `a0`.`Id`
WHERE `a`.`UserId` = @__userId_0
2025-11-16 07:12:31.881 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ClaimType`, `a`.`ClaimValue`, `a`.`UserId`
FROM `AspNetUserClaims` AS `a`
WHERE `a`.`UserId` = @__user_Id_0
2025-11-16 07:12:31.883 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (DbType = DateTime), @p2='?' (Size = 4000), @p3='?' (DbType = Boolean), @p4='?' (Size = 4000), @p5='?' (DbType = Boolean), @p6='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO `Tokens` (`AccessToken`, `CreatedAt`, `DeviceId`, `Expired`, `RefreshToken`, `Revoked`, `UserId`)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6);
SELECT `Id`
FROM `Tokens`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();
2025-11-16 07:12:31.884 +03:00 [INF] Added Token MappyApplication.Data.Token
2025-11-16 07:12:31.885 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessFailedCount`, `t`.`ConcurrencyStamp`, `t`.`Email`, `t`.`EmailConfirmed`, `t`.`FirstName`, `t`.`LastName`, `t`.`LockoutEnabled`, `t`.`LockoutEnd`, `t`.`NormalizedEmail`, `t`.`NormalizedUserName`, `t`.`PasswordHash`, `t`.`PhoneNumber`, `t`.`PhoneNumberConfirmed`, `t`.`SecurityStamp`, `t`.`TwoFactorEnabled`, `t`.`UserName`, `w`.`Id`, `w`.`Cadence`, `w`.`CityName`, `w`.`Coords`, `w`.`Date`, `w`.`Distance`, `w`.`Duration`, `w`.`Emoji`, `w`.`Pace`, `w`.`Type`, `w`.`UserId`, `c`.`Id`, `c`.`CityName`, `c`.`Country`, `c`.`Date`, `c`.`Emoji`, `c`.`Lat`, `c`.`Lng`, `c`.`Notes`, `c`.`UserId`
FROM (
    SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`FirstName`, `a`.`LastName`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`
    FROM `AspNetUsers` AS `a`
    WHERE `a`.`Id` = @__user_Id_0
    LIMIT 2
) AS `t`
LEFT JOIN `Workouts` AS `w` ON `t`.`Id` = `w`.`UserId`
LEFT JOIN `Cities` AS `c` ON `t`.`Id` = `c`.`UserId`
ORDER BY `t`.`Id`, `w`.`Id`
2025-11-16 07:12:31.887 +03:00 [INF] Executing ObjectResult, writing value of type 'MappyApplication.Models.user.AuthResponse'.
2025-11-16 07:12:31.887 +03:00 [INF] Executed action MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication) in 37.4707ms
2025-11-16 07:12:31.887 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication)'
2025-11-16 07:12:31.887 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:8080/api/v1/Auth/refresh-token - 200 null application/json; charset=utf-8 144.7513ms
2025-11-16 07:12:37.159 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:8080/api/v1/Auth/refresh-token - null 0
2025-11-16 07:12:37.191 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 07:12:37.192 +03:00 [INF] Bearer was not authenticated. Failure message: Invalid token
2025-11-16 07:12:37.193 +03:00 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2025-11-16 07:12:37.200 +03:00 [INF] AuthenticationScheme: Bearer was challenged.
2025-11-16 07:12:37.200 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:8080/api/v1/Auth/refresh-token - 401 null application/json; charset=utf-8 41.2678ms
2025-11-16 07:12:52.756 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:8080/api/v1/Auth/refresh-token - null 0
2025-11-16 07:12:52.797 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 07:12:52.797 +03:00 [INF] Bearer was not authenticated. Failure message: Invalid token
2025-11-16 07:12:52.798 +03:00 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2025-11-16 07:12:52.799 +03:00 [INF] AuthenticationScheme: Bearer was challenged.
2025-11-16 07:12:52.799 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:8080/api/v1/Auth/refresh-token - 401 null application/json; charset=utf-8 43.7765ms
2025-11-16 07:12:55.443 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:8080/api/v1/Auth/login - application/json 61
2025-11-16 07:12:55.446 +03:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenMalformedException: IDX14100: JWT is not well formed, there are no dots (.).
The token needs to be in JWS or JWE Compact Serialization Format. (JWS): 'EncodedHeader.EndcodedPayload.EncodedSignature'. (JWE): 'EncodedProtectedHeader.EncodedEncryptedKey.EncodedInitializationVector.EncodedCiphertext.EncodedAuthenticationTag'.
 ---> Microsoft.IdentityModel.Tokens.SecurityTokenMalformedException: IDX14100: JWT is not well formed, there are no dots (.).
The token needs to be in JWS or JWE Compact Serialization Format. (JWS): 'EncodedHeader.EndcodedPayload.EncodedSignature'. (JWE): 'EncodedProtectedHeader.EncodedEncryptedKey.EncodedInitializationVector.EncodedCiphertext.EncodedAuthenticationTag'.
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebToken.ReadToken(String encodedJson)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebToken..ctor(String jwtEncodedString)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ReadToken(String token, TokenValidationParameters validationParameters)
   --- End of inner exception stack trace ---
2025-11-16 07:12:55.448 +03:00 [INF] Bearer was not authenticated. Failure message: IDX14100: JWT is not well formed, there are no dots (.).
The token needs to be in JWS or JWE Compact Serialization Format. (JWS): 'EncodedHeader.EndcodedPayload.EncodedSignature'. (JWE): 'EncodedProtectedHeader.EncodedEncryptedKey.EncodedInitializationVector.EncodedCiphertext.EncodedAuthenticationTag'.
2025-11-16 07:12:55.448 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.AuthController.Login (MappyApplication)'
2025-11-16 07:12:55.450 +03:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.user.AuthResponse] Login(MappyApplication.Models.user.AuthLogin) on controller MappyApplication.Controllers.AuthController (MappyApplication).
2025-11-16 07:12:55.472 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`FirstName`, `a`.`LastName`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`
FROM `AspNetUsers` AS `a`
WHERE `a`.`NormalizedEmail` = @__normalizedEmail_0
LIMIT 2
2025-11-16 07:12:55.524 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']

        UPDATE TOKENS
        SET Revoked = true, Expired = true
        WHERE UserId = @p0
          AND DeviceId = @p1
          AND Revoked = false
          AND Expired = false
2025-11-16 07:12:55.525 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a0`.`Name`
FROM `AspNetUserRoles` AS `a`
INNER JOIN `AspNetRoles` AS `a0` ON `a`.`RoleId` = `a0`.`Id`
WHERE `a`.`UserId` = @__userId_0
2025-11-16 07:12:55.525 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ClaimType`, `a`.`ClaimValue`, `a`.`UserId`
FROM `AspNetUserClaims` AS `a`
WHERE `a`.`UserId` = @__user_Id_0
2025-11-16 07:12:55.526 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a0`.`Name`
FROM `AspNetUserRoles` AS `a`
INNER JOIN `AspNetRoles` AS `a0` ON `a`.`RoleId` = `a0`.`Id`
WHERE `a`.`UserId` = @__userId_0
2025-11-16 07:12:55.527 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ClaimType`, `a`.`ClaimValue`, `a`.`UserId`
FROM `AspNetUserClaims` AS `a`
WHERE `a`.`UserId` = @__user_Id_0
2025-11-16 07:12:55.528 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (DbType = DateTime), @p2='?' (Size = 4000), @p3='?' (DbType = Boolean), @p4='?' (Size = 4000), @p5='?' (DbType = Boolean), @p6='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO `Tokens` (`AccessToken`, `CreatedAt`, `DeviceId`, `Expired`, `RefreshToken`, `Revoked`, `UserId`)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6);
SELECT `Id`
FROM `Tokens`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();
2025-11-16 07:12:55.528 +03:00 [INF] Added Token MappyApplication.Data.Token
2025-11-16 07:12:55.529 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessFailedCount`, `t`.`ConcurrencyStamp`, `t`.`Email`, `t`.`EmailConfirmed`, `t`.`FirstName`, `t`.`LastName`, `t`.`LockoutEnabled`, `t`.`LockoutEnd`, `t`.`NormalizedEmail`, `t`.`NormalizedUserName`, `t`.`PasswordHash`, `t`.`PhoneNumber`, `t`.`PhoneNumberConfirmed`, `t`.`SecurityStamp`, `t`.`TwoFactorEnabled`, `t`.`UserName`, `w`.`Id`, `w`.`Cadence`, `w`.`CityName`, `w`.`Coords`, `w`.`Date`, `w`.`Distance`, `w`.`Duration`, `w`.`Emoji`, `w`.`Pace`, `w`.`Type`, `w`.`UserId`, `c`.`Id`, `c`.`CityName`, `c`.`Country`, `c`.`Date`, `c`.`Emoji`, `c`.`Lat`, `c`.`Lng`, `c`.`Notes`, `c`.`UserId`
FROM (
    SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`FirstName`, `a`.`LastName`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`
    FROM `AspNetUsers` AS `a`
    WHERE `a`.`Id` = @__user_Id_0
    LIMIT 2
) AS `t`
LEFT JOIN `Workouts` AS `w` ON `t`.`Id` = `w`.`UserId`
LEFT JOIN `Cities` AS `c` ON `t`.`Id` = `c`.`UserId`
ORDER BY `t`.`Id`, `w`.`Id`
2025-11-16 07:12:55.529 +03:00 [INF] Executing ObjectResult, writing value of type 'MappyApplication.Models.user.AuthResponse'.
2025-11-16 07:12:55.530 +03:00 [INF] Executed action MappyApplication.Controllers.AuthController.Login (MappyApplication) in 79.3878ms
2025-11-16 07:12:55.530 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.AuthController.Login (MappyApplication)'
2025-11-16 07:12:55.530 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:8080/api/v1/Auth/login - 200 null application/json; charset=utf-8 86.9666ms
2025-11-16 07:12:58.089 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:8080/api/v1/Auth/refresh-token - null 0
2025-11-16 07:12:58.112 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 07:12:58.113 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication)'
2025-11-16 07:12:58.113 +03:00 [INF] Route matched with {action = "RefreshToken", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.user.AuthResponse] RefreshToken() on controller MappyApplication.Controllers.AuthController (MappyApplication).
2025-11-16 07:12:58.115 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__refreshToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`RefreshToken` = @__refreshToken_0
LIMIT 2
2025-11-16 07:12:58.118 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`FirstName`, `a`.`LastName`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`
FROM `AspNetUsers` AS `a`
WHERE `a`.`Id` = @__p_0
LIMIT 1
2025-11-16 07:12:58.120 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']

        UPDATE TOKENS
        SET Revoked = true, Expired = true
        WHERE UserId = @p0
          AND DeviceId = @p1
          AND Revoked = false
          AND Expired = false
2025-11-16 07:12:58.122 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a0`.`Name`
FROM `AspNetUserRoles` AS `a`
INNER JOIN `AspNetRoles` AS `a0` ON `a`.`RoleId` = `a0`.`Id`
WHERE `a`.`UserId` = @__userId_0
2025-11-16 07:12:58.124 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ClaimType`, `a`.`ClaimValue`, `a`.`UserId`
FROM `AspNetUserClaims` AS `a`
WHERE `a`.`UserId` = @__user_Id_0
2025-11-16 07:12:58.125 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a0`.`Name`
FROM `AspNetUserRoles` AS `a`
INNER JOIN `AspNetRoles` AS `a0` ON `a`.`RoleId` = `a0`.`Id`
WHERE `a`.`UserId` = @__userId_0
2025-11-16 07:12:58.126 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ClaimType`, `a`.`ClaimValue`, `a`.`UserId`
FROM `AspNetUserClaims` AS `a`
WHERE `a`.`UserId` = @__user_Id_0
2025-11-16 07:12:58.128 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (DbType = DateTime), @p2='?' (Size = 4000), @p3='?' (DbType = Boolean), @p4='?' (Size = 4000), @p5='?' (DbType = Boolean), @p6='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO `Tokens` (`AccessToken`, `CreatedAt`, `DeviceId`, `Expired`, `RefreshToken`, `Revoked`, `UserId`)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6);
SELECT `Id`
FROM `Tokens`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();
2025-11-16 07:12:58.129 +03:00 [INF] Added Token MappyApplication.Data.Token
2025-11-16 07:12:58.130 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessFailedCount`, `t`.`ConcurrencyStamp`, `t`.`Email`, `t`.`EmailConfirmed`, `t`.`FirstName`, `t`.`LastName`, `t`.`LockoutEnabled`, `t`.`LockoutEnd`, `t`.`NormalizedEmail`, `t`.`NormalizedUserName`, `t`.`PasswordHash`, `t`.`PhoneNumber`, `t`.`PhoneNumberConfirmed`, `t`.`SecurityStamp`, `t`.`TwoFactorEnabled`, `t`.`UserName`, `w`.`Id`, `w`.`Cadence`, `w`.`CityName`, `w`.`Coords`, `w`.`Date`, `w`.`Distance`, `w`.`Duration`, `w`.`Emoji`, `w`.`Pace`, `w`.`Type`, `w`.`UserId`, `c`.`Id`, `c`.`CityName`, `c`.`Country`, `c`.`Date`, `c`.`Emoji`, `c`.`Lat`, `c`.`Lng`, `c`.`Notes`, `c`.`UserId`
FROM (
    SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`FirstName`, `a`.`LastName`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`
    FROM `AspNetUsers` AS `a`
    WHERE `a`.`Id` = @__user_Id_0
    LIMIT 2
) AS `t`
LEFT JOIN `Workouts` AS `w` ON `t`.`Id` = `w`.`UserId`
LEFT JOIN `Cities` AS `c` ON `t`.`Id` = `c`.`UserId`
ORDER BY `t`.`Id`, `w`.`Id`
2025-11-16 07:12:58.131 +03:00 [INF] Executing ObjectResult, writing value of type 'MappyApplication.Models.user.AuthResponse'.
2025-11-16 07:12:58.131 +03:00 [INF] Executed action MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication) in 17.7309ms
2025-11-16 07:12:58.131 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication)'
2025-11-16 07:12:58.131 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:8080/api/v1/Auth/refresh-token - 200 null application/json; charset=utf-8 42.4926ms
2025-11-16 07:12:58.822 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:8080/api/v1/Auth/refresh-token - null 0
2025-11-16 07:12:58.849 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 07:12:58.850 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication)'
2025-11-16 07:12:58.850 +03:00 [INF] Route matched with {action = "RefreshToken", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.user.AuthResponse] RefreshToken() on controller MappyApplication.Controllers.AuthController (MappyApplication).
2025-11-16 07:12:58.851 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__refreshToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`RefreshToken` = @__refreshToken_0
LIMIT 2
2025-11-16 07:12:58.852 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`FirstName`, `a`.`LastName`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`
FROM `AspNetUsers` AS `a`
WHERE `a`.`Id` = @__p_0
LIMIT 1
2025-11-16 07:12:58.854 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']

        UPDATE TOKENS
        SET Revoked = true, Expired = true
        WHERE UserId = @p0
          AND DeviceId = @p1
          AND Revoked = false
          AND Expired = false
2025-11-16 07:12:58.854 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a0`.`Name`
FROM `AspNetUserRoles` AS `a`
INNER JOIN `AspNetRoles` AS `a0` ON `a`.`RoleId` = `a0`.`Id`
WHERE `a`.`UserId` = @__userId_0
2025-11-16 07:12:58.855 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ClaimType`, `a`.`ClaimValue`, `a`.`UserId`
FROM `AspNetUserClaims` AS `a`
WHERE `a`.`UserId` = @__user_Id_0
2025-11-16 07:12:58.856 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a0`.`Name`
FROM `AspNetUserRoles` AS `a`
INNER JOIN `AspNetRoles` AS `a0` ON `a`.`RoleId` = `a0`.`Id`
WHERE `a`.`UserId` = @__userId_0
2025-11-16 07:12:58.856 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ClaimType`, `a`.`ClaimValue`, `a`.`UserId`
FROM `AspNetUserClaims` AS `a`
WHERE `a`.`UserId` = @__user_Id_0
2025-11-16 07:12:58.858 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (DbType = DateTime), @p2='?' (Size = 4000), @p3='?' (DbType = Boolean), @p4='?' (Size = 4000), @p5='?' (DbType = Boolean), @p6='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO `Tokens` (`AccessToken`, `CreatedAt`, `DeviceId`, `Expired`, `RefreshToken`, `Revoked`, `UserId`)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6);
SELECT `Id`
FROM `Tokens`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();
2025-11-16 07:12:58.859 +03:00 [INF] Added Token MappyApplication.Data.Token
2025-11-16 07:12:58.861 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessFailedCount`, `t`.`ConcurrencyStamp`, `t`.`Email`, `t`.`EmailConfirmed`, `t`.`FirstName`, `t`.`LastName`, `t`.`LockoutEnabled`, `t`.`LockoutEnd`, `t`.`NormalizedEmail`, `t`.`NormalizedUserName`, `t`.`PasswordHash`, `t`.`PhoneNumber`, `t`.`PhoneNumberConfirmed`, `t`.`SecurityStamp`, `t`.`TwoFactorEnabled`, `t`.`UserName`, `w`.`Id`, `w`.`Cadence`, `w`.`CityName`, `w`.`Coords`, `w`.`Date`, `w`.`Distance`, `w`.`Duration`, `w`.`Emoji`, `w`.`Pace`, `w`.`Type`, `w`.`UserId`, `c`.`Id`, `c`.`CityName`, `c`.`Country`, `c`.`Date`, `c`.`Emoji`, `c`.`Lat`, `c`.`Lng`, `c`.`Notes`, `c`.`UserId`
FROM (
    SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`FirstName`, `a`.`LastName`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`
    FROM `AspNetUsers` AS `a`
    WHERE `a`.`Id` = @__user_Id_0
    LIMIT 2
) AS `t`
LEFT JOIN `Workouts` AS `w` ON `t`.`Id` = `w`.`UserId`
LEFT JOIN `Cities` AS `c` ON `t`.`Id` = `c`.`UserId`
ORDER BY `t`.`Id`, `w`.`Id`
2025-11-16 07:12:58.861 +03:00 [INF] Executing ObjectResult, writing value of type 'MappyApplication.Models.user.AuthResponse'.
2025-11-16 07:12:58.861 +03:00 [INF] Executed action MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication) in 11.0868ms
2025-11-16 07:12:58.861 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication)'
2025-11-16 07:12:58.862 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:8080/api/v1/Auth/refresh-token - 200 null application/json; charset=utf-8 39.6112ms
2025-11-16 07:12:59.500 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:8080/api/v1/Auth/refresh-token - null 0
2025-11-16 07:12:59.525 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 07:12:59.526 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication)'
2025-11-16 07:12:59.526 +03:00 [INF] Route matched with {action = "RefreshToken", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.user.AuthResponse] RefreshToken() on controller MappyApplication.Controllers.AuthController (MappyApplication).
2025-11-16 07:12:59.527 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__refreshToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`RefreshToken` = @__refreshToken_0
LIMIT 2
2025-11-16 07:12:59.528 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`FirstName`, `a`.`LastName`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`
FROM `AspNetUsers` AS `a`
WHERE `a`.`Id` = @__p_0
LIMIT 1
2025-11-16 07:12:59.530 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']

        UPDATE TOKENS
        SET Revoked = true, Expired = true
        WHERE UserId = @p0
          AND DeviceId = @p1
          AND Revoked = false
          AND Expired = false
2025-11-16 07:12:59.531 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a0`.`Name`
FROM `AspNetUserRoles` AS `a`
INNER JOIN `AspNetRoles` AS `a0` ON `a`.`RoleId` = `a0`.`Id`
WHERE `a`.`UserId` = @__userId_0
2025-11-16 07:12:59.532 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ClaimType`, `a`.`ClaimValue`, `a`.`UserId`
FROM `AspNetUserClaims` AS `a`
WHERE `a`.`UserId` = @__user_Id_0
2025-11-16 07:12:59.533 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a0`.`Name`
FROM `AspNetUserRoles` AS `a`
INNER JOIN `AspNetRoles` AS `a0` ON `a`.`RoleId` = `a0`.`Id`
WHERE `a`.`UserId` = @__userId_0
2025-11-16 07:12:59.533 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ClaimType`, `a`.`ClaimValue`, `a`.`UserId`
FROM `AspNetUserClaims` AS `a`
WHERE `a`.`UserId` = @__user_Id_0
2025-11-16 07:12:59.535 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (DbType = DateTime), @p2='?' (Size = 4000), @p3='?' (DbType = Boolean), @p4='?' (Size = 4000), @p5='?' (DbType = Boolean), @p6='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO `Tokens` (`AccessToken`, `CreatedAt`, `DeviceId`, `Expired`, `RefreshToken`, `Revoked`, `UserId`)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6);
SELECT `Id`
FROM `Tokens`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();
2025-11-16 07:12:59.537 +03:00 [INF] Added Token MappyApplication.Data.Token
2025-11-16 07:12:59.539 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessFailedCount`, `t`.`ConcurrencyStamp`, `t`.`Email`, `t`.`EmailConfirmed`, `t`.`FirstName`, `t`.`LastName`, `t`.`LockoutEnabled`, `t`.`LockoutEnd`, `t`.`NormalizedEmail`, `t`.`NormalizedUserName`, `t`.`PasswordHash`, `t`.`PhoneNumber`, `t`.`PhoneNumberConfirmed`, `t`.`SecurityStamp`, `t`.`TwoFactorEnabled`, `t`.`UserName`, `w`.`Id`, `w`.`Cadence`, `w`.`CityName`, `w`.`Coords`, `w`.`Date`, `w`.`Distance`, `w`.`Duration`, `w`.`Emoji`, `w`.`Pace`, `w`.`Type`, `w`.`UserId`, `c`.`Id`, `c`.`CityName`, `c`.`Country`, `c`.`Date`, `c`.`Emoji`, `c`.`Lat`, `c`.`Lng`, `c`.`Notes`, `c`.`UserId`
FROM (
    SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`FirstName`, `a`.`LastName`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`
    FROM `AspNetUsers` AS `a`
    WHERE `a`.`Id` = @__user_Id_0
    LIMIT 2
) AS `t`
LEFT JOIN `Workouts` AS `w` ON `t`.`Id` = `w`.`UserId`
LEFT JOIN `Cities` AS `c` ON `t`.`Id` = `c`.`UserId`
ORDER BY `t`.`Id`, `w`.`Id`
2025-11-16 07:12:59.540 +03:00 [INF] Executing ObjectResult, writing value of type 'MappyApplication.Models.user.AuthResponse'.
2025-11-16 07:12:59.540 +03:00 [INF] Executed action MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication) in 14.1385ms
2025-11-16 07:12:59.540 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication)'
2025-11-16 07:12:59.540 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:8080/api/v1/Auth/refresh-token - 200 null application/json; charset=utf-8 40.8671ms
2025-11-16 07:13:00.142 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:8080/api/v1/Auth/refresh-token - null 0
2025-11-16 07:13:00.165 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 07:13:00.165 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication)'
2025-11-16 07:13:00.165 +03:00 [INF] Route matched with {action = "RefreshToken", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.user.AuthResponse] RefreshToken() on controller MappyApplication.Controllers.AuthController (MappyApplication).
2025-11-16 07:13:00.167 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__refreshToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`RefreshToken` = @__refreshToken_0
LIMIT 2
2025-11-16 07:13:00.168 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`FirstName`, `a`.`LastName`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`
FROM `AspNetUsers` AS `a`
WHERE `a`.`Id` = @__p_0
LIMIT 1
2025-11-16 07:13:00.170 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']

        UPDATE TOKENS
        SET Revoked = true, Expired = true
        WHERE UserId = @p0
          AND DeviceId = @p1
          AND Revoked = false
          AND Expired = false
2025-11-16 07:13:00.171 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a0`.`Name`
FROM `AspNetUserRoles` AS `a`
INNER JOIN `AspNetRoles` AS `a0` ON `a`.`RoleId` = `a0`.`Id`
WHERE `a`.`UserId` = @__userId_0
2025-11-16 07:13:00.171 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ClaimType`, `a`.`ClaimValue`, `a`.`UserId`
FROM `AspNetUserClaims` AS `a`
WHERE `a`.`UserId` = @__user_Id_0
2025-11-16 07:13:00.172 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a0`.`Name`
FROM `AspNetUserRoles` AS `a`
INNER JOIN `AspNetRoles` AS `a0` ON `a`.`RoleId` = `a0`.`Id`
WHERE `a`.`UserId` = @__userId_0
2025-11-16 07:13:00.172 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ClaimType`, `a`.`ClaimValue`, `a`.`UserId`
FROM `AspNetUserClaims` AS `a`
WHERE `a`.`UserId` = @__user_Id_0
2025-11-16 07:13:00.174 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (DbType = DateTime), @p2='?' (Size = 4000), @p3='?' (DbType = Boolean), @p4='?' (Size = 4000), @p5='?' (DbType = Boolean), @p6='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO `Tokens` (`AccessToken`, `CreatedAt`, `DeviceId`, `Expired`, `RefreshToken`, `Revoked`, `UserId`)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6);
SELECT `Id`
FROM `Tokens`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();
2025-11-16 07:13:00.175 +03:00 [INF] Added Token MappyApplication.Data.Token
2025-11-16 07:13:00.177 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessFailedCount`, `t`.`ConcurrencyStamp`, `t`.`Email`, `t`.`EmailConfirmed`, `t`.`FirstName`, `t`.`LastName`, `t`.`LockoutEnabled`, `t`.`LockoutEnd`, `t`.`NormalizedEmail`, `t`.`NormalizedUserName`, `t`.`PasswordHash`, `t`.`PhoneNumber`, `t`.`PhoneNumberConfirmed`, `t`.`SecurityStamp`, `t`.`TwoFactorEnabled`, `t`.`UserName`, `w`.`Id`, `w`.`Cadence`, `w`.`CityName`, `w`.`Coords`, `w`.`Date`, `w`.`Distance`, `w`.`Duration`, `w`.`Emoji`, `w`.`Pace`, `w`.`Type`, `w`.`UserId`, `c`.`Id`, `c`.`CityName`, `c`.`Country`, `c`.`Date`, `c`.`Emoji`, `c`.`Lat`, `c`.`Lng`, `c`.`Notes`, `c`.`UserId`
FROM (
    SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`FirstName`, `a`.`LastName`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`
    FROM `AspNetUsers` AS `a`
    WHERE `a`.`Id` = @__user_Id_0
    LIMIT 2
) AS `t`
LEFT JOIN `Workouts` AS `w` ON `t`.`Id` = `w`.`UserId`
LEFT JOIN `Cities` AS `c` ON `t`.`Id` = `c`.`UserId`
ORDER BY `t`.`Id`, `w`.`Id`
2025-11-16 07:13:00.177 +03:00 [INF] Executing ObjectResult, writing value of type 'MappyApplication.Models.user.AuthResponse'.
2025-11-16 07:13:00.178 +03:00 [INF] Executed action MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication) in 12.2715ms
2025-11-16 07:13:00.178 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication)'
2025-11-16 07:13:00.178 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:8080/api/v1/Auth/refresh-token - 200 null application/json; charset=utf-8 36.1992ms
2025-11-16 07:13:13.009 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:8080/api/v1/Auth/logout - null null
2025-11-16 07:13:13.055 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 07:13:13.057 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.AuthController.Logout (MappyApplication)'
2025-11-16 07:13:13.062 +03:00 [INF] Route matched with {action = "Logout", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Logout() on controller MappyApplication.Controllers.AuthController (MappyApplication).
2025-11-16 07:13:13.065 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__refreshToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`RefreshToken` = @__refreshToken_0
LIMIT 2
2025-11-16 07:13:13.068 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']

        UPDATE TOKENS
        SET Revoked = true, Expired = true
        WHERE UserId = @p0
          AND DeviceId = @p1
          AND Revoked = false
          AND Expired = false
2025-11-16 07:13:13.071 +03:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType0`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-11-16 07:13:13.079 +03:00 [INF] Executed action MappyApplication.Controllers.AuthController.Logout (MappyApplication) in 17.0998ms
2025-11-16 07:13:13.079 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.AuthController.Logout (MappyApplication)'
2025-11-16 07:13:13.079 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:8080/api/v1/Auth/logout - 200 null application/json; charset=utf-8 71.2474ms
2025-11-16 07:13:14.023 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:8080/api/v1/Auth/logout - null null
2025-11-16 07:13:14.051 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 07:13:14.051 +03:00 [INF] Bearer was not authenticated. Failure message: Invalid token
2025-11-16 07:13:14.052 +03:00 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2025-11-16 07:13:14.052 +03:00 [INF] AuthenticationScheme: Bearer was challenged.
2025-11-16 07:13:14.052 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:8080/api/v1/Auth/logout - 401 null application/json; charset=utf-8 28.888ms
2025-11-16 07:13:14.949 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:8080/api/v1/Auth/logout - null null
2025-11-16 07:13:14.976 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 07:13:14.977 +03:00 [INF] Bearer was not authenticated. Failure message: Invalid token
2025-11-16 07:13:14.977 +03:00 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2025-11-16 07:13:14.977 +03:00 [INF] AuthenticationScheme: Bearer was challenged.
2025-11-16 07:13:14.977 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:8080/api/v1/Auth/logout - 401 null application/json; charset=utf-8 28.6359ms
2025-11-16 07:13:18.174 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:8080/api/v1/Auth/refresh-token - null 0
2025-11-16 07:13:18.203 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 07:13:18.203 +03:00 [INF] Bearer was not authenticated. Failure message: Invalid token
2025-11-16 07:13:18.203 +03:00 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2025-11-16 07:13:18.203 +03:00 [INF] AuthenticationScheme: Bearer was challenged.
2025-11-16 07:13:18.203 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:8080/api/v1/Auth/refresh-token - 401 null application/json; charset=utf-8 29.0306ms
2025-11-16 07:13:29.850 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:8080/api/v1/Cities - null null
2025-11-16 07:13:29.851 +03:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenMalformedException: IDX14100: JWT is not well formed, there are no dots (.).
The token needs to be in JWS or JWE Compact Serialization Format. (JWS): 'EncodedHeader.EndcodedPayload.EncodedSignature'. (JWE): 'EncodedProtectedHeader.EncodedEncryptedKey.EncodedInitializationVector.EncodedCiphertext.EncodedAuthenticationTag'.
 ---> Microsoft.IdentityModel.Tokens.SecurityTokenMalformedException: IDX14100: JWT is not well formed, there are no dots (.).
The token needs to be in JWS or JWE Compact Serialization Format. (JWS): 'EncodedHeader.EndcodedPayload.EncodedSignature'. (JWE): 'EncodedProtectedHeader.EncodedEncryptedKey.EncodedInitializationVector.EncodedCiphertext.EncodedAuthenticationTag'.
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebToken.ReadToken(String encodedJson)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebToken..ctor(String jwtEncodedString)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ReadToken(String token, TokenValidationParameters validationParameters)
   --- End of inner exception stack trace ---
2025-11-16 07:13:29.852 +03:00 [INF] Bearer was not authenticated. Failure message: IDX14100: JWT is not well formed, there are no dots (.).
The token needs to be in JWS or JWE Compact Serialization Format. (JWS): 'EncodedHeader.EndcodedPayload.EncodedSignature'. (JWE): 'EncodedProtectedHeader.EncodedEncryptedKey.EncodedInitializationVector.EncodedCiphertext.EncodedAuthenticationTag'.
2025-11-16 07:13:29.852 +03:00 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2025-11-16 07:13:29.853 +03:00 [INF] AuthenticationScheme: Bearer was challenged.
2025-11-16 07:13:29.853 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:8080/api/v1/Cities - 401 null application/json; charset=utf-8 3.097ms
2025-11-16 07:13:30.681 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:8080/api/v1/Cities - null null
2025-11-16 07:13:30.682 +03:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenMalformedException: IDX14100: JWT is not well formed, there are no dots (.).
The token needs to be in JWS or JWE Compact Serialization Format. (JWS): 'EncodedHeader.EndcodedPayload.EncodedSignature'. (JWE): 'EncodedProtectedHeader.EncodedEncryptedKey.EncodedInitializationVector.EncodedCiphertext.EncodedAuthenticationTag'.
 ---> Microsoft.IdentityModel.Tokens.SecurityTokenMalformedException: IDX14100: JWT is not well formed, there are no dots (.).
The token needs to be in JWS or JWE Compact Serialization Format. (JWS): 'EncodedHeader.EndcodedPayload.EncodedSignature'. (JWE): 'EncodedProtectedHeader.EncodedEncryptedKey.EncodedInitializationVector.EncodedCiphertext.EncodedAuthenticationTag'.
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebToken.ReadToken(String encodedJson)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebToken..ctor(String jwtEncodedString)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ReadToken(String token, TokenValidationParameters validationParameters)
   --- End of inner exception stack trace ---
2025-11-16 07:13:30.683 +03:00 [INF] Bearer was not authenticated. Failure message: IDX14100: JWT is not well formed, there are no dots (.).
The token needs to be in JWS or JWE Compact Serialization Format. (JWS): 'EncodedHeader.EndcodedPayload.EncodedSignature'. (JWE): 'EncodedProtectedHeader.EncodedEncryptedKey.EncodedInitializationVector.EncodedCiphertext.EncodedAuthenticationTag'.
2025-11-16 07:13:30.683 +03:00 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2025-11-16 07:13:30.683 +03:00 [INF] AuthenticationScheme: Bearer was challenged.
2025-11-16 07:13:30.683 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:8080/api/v1/Cities - 401 null application/json; charset=utf-8 2.1275ms
2025-11-16 07:13:34.896 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:8080/api/v1/Auth/login - application/json 61
2025-11-16 07:13:34.897 +03:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenMalformedException: IDX14100: JWT is not well formed, there are no dots (.).
The token needs to be in JWS or JWE Compact Serialization Format. (JWS): 'EncodedHeader.EndcodedPayload.EncodedSignature'. (JWE): 'EncodedProtectedHeader.EncodedEncryptedKey.EncodedInitializationVector.EncodedCiphertext.EncodedAuthenticationTag'.
 ---> Microsoft.IdentityModel.Tokens.SecurityTokenMalformedException: IDX14100: JWT is not well formed, there are no dots (.).
The token needs to be in JWS or JWE Compact Serialization Format. (JWS): 'EncodedHeader.EndcodedPayload.EncodedSignature'. (JWE): 'EncodedProtectedHeader.EncodedEncryptedKey.EncodedInitializationVector.EncodedCiphertext.EncodedAuthenticationTag'.
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebToken.ReadToken(String encodedJson)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebToken..ctor(String jwtEncodedString)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ReadToken(String token, TokenValidationParameters validationParameters)
   --- End of inner exception stack trace ---
2025-11-16 07:13:34.898 +03:00 [INF] Bearer was not authenticated. Failure message: IDX14100: JWT is not well formed, there are no dots (.).
The token needs to be in JWS or JWE Compact Serialization Format. (JWS): 'EncodedHeader.EndcodedPayload.EncodedSignature'. (JWE): 'EncodedProtectedHeader.EncodedEncryptedKey.EncodedInitializationVector.EncodedCiphertext.EncodedAuthenticationTag'.
2025-11-16 07:13:34.899 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.AuthController.Login (MappyApplication)'
2025-11-16 07:13:34.899 +03:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.user.AuthResponse] Login(MappyApplication.Models.user.AuthLogin) on controller MappyApplication.Controllers.AuthController (MappyApplication).
2025-11-16 07:13:34.925 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`FirstName`, `a`.`LastName`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`
FROM `AspNetUsers` AS `a`
WHERE `a`.`NormalizedEmail` = @__normalizedEmail_0
LIMIT 2
2025-11-16 07:13:34.978 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']

        UPDATE TOKENS
        SET Revoked = true, Expired = true
        WHERE UserId = @p0
          AND DeviceId = @p1
          AND Revoked = false
          AND Expired = false
2025-11-16 07:13:34.979 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a0`.`Name`
FROM `AspNetUserRoles` AS `a`
INNER JOIN `AspNetRoles` AS `a0` ON `a`.`RoleId` = `a0`.`Id`
WHERE `a`.`UserId` = @__userId_0
2025-11-16 07:13:34.980 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ClaimType`, `a`.`ClaimValue`, `a`.`UserId`
FROM `AspNetUserClaims` AS `a`
WHERE `a`.`UserId` = @__user_Id_0
2025-11-16 07:13:34.981 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a0`.`Name`
FROM `AspNetUserRoles` AS `a`
INNER JOIN `AspNetRoles` AS `a0` ON `a`.`RoleId` = `a0`.`Id`
WHERE `a`.`UserId` = @__userId_0
2025-11-16 07:13:34.981 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ClaimType`, `a`.`ClaimValue`, `a`.`UserId`
FROM `AspNetUserClaims` AS `a`
WHERE `a`.`UserId` = @__user_Id_0
2025-11-16 07:13:34.984 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (DbType = DateTime), @p2='?' (Size = 4000), @p3='?' (DbType = Boolean), @p4='?' (Size = 4000), @p5='?' (DbType = Boolean), @p6='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO `Tokens` (`AccessToken`, `CreatedAt`, `DeviceId`, `Expired`, `RefreshToken`, `Revoked`, `UserId`)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6);
SELECT `Id`
FROM `Tokens`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();
2025-11-16 07:13:34.986 +03:00 [INF] Added Token MappyApplication.Data.Token
2025-11-16 07:13:34.987 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessFailedCount`, `t`.`ConcurrencyStamp`, `t`.`Email`, `t`.`EmailConfirmed`, `t`.`FirstName`, `t`.`LastName`, `t`.`LockoutEnabled`, `t`.`LockoutEnd`, `t`.`NormalizedEmail`, `t`.`NormalizedUserName`, `t`.`PasswordHash`, `t`.`PhoneNumber`, `t`.`PhoneNumberConfirmed`, `t`.`SecurityStamp`, `t`.`TwoFactorEnabled`, `t`.`UserName`, `w`.`Id`, `w`.`Cadence`, `w`.`CityName`, `w`.`Coords`, `w`.`Date`, `w`.`Distance`, `w`.`Duration`, `w`.`Emoji`, `w`.`Pace`, `w`.`Type`, `w`.`UserId`, `c`.`Id`, `c`.`CityName`, `c`.`Country`, `c`.`Date`, `c`.`Emoji`, `c`.`Lat`, `c`.`Lng`, `c`.`Notes`, `c`.`UserId`
FROM (
    SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`FirstName`, `a`.`LastName`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`
    FROM `AspNetUsers` AS `a`
    WHERE `a`.`Id` = @__user_Id_0
    LIMIT 2
) AS `t`
LEFT JOIN `Workouts` AS `w` ON `t`.`Id` = `w`.`UserId`
LEFT JOIN `Cities` AS `c` ON `t`.`Id` = `c`.`UserId`
ORDER BY `t`.`Id`, `w`.`Id`
2025-11-16 07:13:34.988 +03:00 [INF] Executing ObjectResult, writing value of type 'MappyApplication.Models.user.AuthResponse'.
2025-11-16 07:13:34.988 +03:00 [INF] Executed action MappyApplication.Controllers.AuthController.Login (MappyApplication) in 88.9454ms
2025-11-16 07:13:34.988 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.AuthController.Login (MappyApplication)'
2025-11-16 07:13:34.988 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:8080/api/v1/Auth/login - 200 null application/json; charset=utf-8 92.5763ms
2025-11-16 07:13:40.559 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:8080/api/v1/Auth/logout - null null
2025-11-16 07:13:40.589 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 07:13:40.590 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.AuthController.Logout (MappyApplication)'
2025-11-16 07:13:40.590 +03:00 [INF] Route matched with {action = "Logout", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Logout() on controller MappyApplication.Controllers.AuthController (MappyApplication).
2025-11-16 07:13:40.591 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__refreshToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`RefreshToken` = @__refreshToken_0
LIMIT 2
2025-11-16 07:13:40.592 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']

        UPDATE TOKENS
        SET Revoked = true, Expired = true
        WHERE UserId = @p0
          AND DeviceId = @p1
          AND Revoked = false
          AND Expired = false
2025-11-16 07:13:40.592 +03:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType0`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-11-16 07:13:40.592 +03:00 [INF] Executed action MappyApplication.Controllers.AuthController.Logout (MappyApplication) in 2.2397ms
2025-11-16 07:13:40.592 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.AuthController.Logout (MappyApplication)'
2025-11-16 07:13:40.593 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:8080/api/v1/Auth/logout - 200 null application/json; charset=utf-8 33.7326ms
2025-11-16 07:13:45.361 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:8080/api/v1/Cities - null null
2025-11-16 07:13:45.386 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 07:13:45.386 +03:00 [INF] Bearer was not authenticated. Failure message: Invalid token
2025-11-16 07:13:45.387 +03:00 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2025-11-16 07:13:45.388 +03:00 [INF] AuthenticationScheme: Bearer was challenged.
2025-11-16 07:13:45.389 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:8080/api/v1/Cities - 401 null application/json; charset=utf-8 27.5784ms
2025-11-16 07:13:46.101 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:8080/api/v1/Cities - null null
2025-11-16 07:13:46.122 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 07:13:46.123 +03:00 [INF] Bearer was not authenticated. Failure message: Invalid token
2025-11-16 07:13:46.123 +03:00 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2025-11-16 07:13:46.123 +03:00 [INF] AuthenticationScheme: Bearer was challenged.
2025-11-16 07:13:46.123 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:8080/api/v1/Cities - 401 null application/json; charset=utf-8 22.3357ms
2025-11-16 08:21:03.904 +03:00 [INF] User profile is available. Using '/Users/salah/.aspnet/DataProtection-Keys' as key repository; keys will not be encrypted at rest.
2025-11-16 08:21:03.955 +03:00 [INF] Now listening on: http://localhost:8080
2025-11-16 08:21:03.956 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2025-11-16 08:21:03.956 +03:00 [INF] Hosting environment: Development
2025-11-16 08:21:03.956 +03:00 [INF] Content root path: /Users/salah/Desktop/MappyApplication/MappyApplication
2025-11-16 08:21:17.651 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:8080/api/v1/Auth/login - application/json 61
2025-11-16 08:21:17.683 +03:00 [WRN] Failed to determine the https port for redirect.
2025-11-16 08:21:18.288 +03:00 [INF] Executed DbCommand (43ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 08:21:18.311 +03:00 [INF] Bearer was not authenticated. Failure message: Invalid token
2025-11-16 08:21:18.313 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.AuthController.Login (MappyApplication)'
2025-11-16 08:21:18.322 +03:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.user.AuthResponse] Login(MappyApplication.Models.user.AuthLogin) on controller MappyApplication.Controllers.AuthController (MappyApplication).
2025-11-16 08:21:18.401 +03:00 [INF] Executed DbCommand (7ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`FirstName`, `a`.`LastName`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`
FROM `AspNetUsers` AS `a`
WHERE `a`.`NormalizedEmail` = @__normalizedEmail_0
LIMIT 2
2025-11-16 08:21:18.465 +03:00 [INF] Executed DbCommand (5ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']

        UPDATE TOKENS
        SET Revoked = true, Expired = true
        WHERE UserId = @p0
          AND DeviceId = @p1
          AND Revoked = false
          AND Expired = false
2025-11-16 08:21:18.490 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a0`.`Name`
FROM `AspNetUserRoles` AS `a`
INNER JOIN `AspNetRoles` AS `a0` ON `a`.`RoleId` = `a0`.`Id`
WHERE `a`.`UserId` = @__userId_0
2025-11-16 08:21:18.496 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ClaimType`, `a`.`ClaimValue`, `a`.`UserId`
FROM `AspNetUserClaims` AS `a`
WHERE `a`.`UserId` = @__user_Id_0
2025-11-16 08:21:18.504 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a0`.`Name`
FROM `AspNetUserRoles` AS `a`
INNER JOIN `AspNetRoles` AS `a0` ON `a`.`RoleId` = `a0`.`Id`
WHERE `a`.`UserId` = @__userId_0
2025-11-16 08:21:18.506 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ClaimType`, `a`.`ClaimValue`, `a`.`UserId`
FROM `AspNetUserClaims` AS `a`
WHERE `a`.`UserId` = @__user_Id_0
2025-11-16 08:21:18.595 +03:00 [INF] Executed DbCommand (46ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (DbType = DateTime), @p2='?' (Size = 4000), @p3='?' (DbType = Boolean), @p4='?' (Size = 4000), @p5='?' (DbType = Boolean), @p6='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO `Tokens` (`AccessToken`, `CreatedAt`, `DeviceId`, `Expired`, `RefreshToken`, `Revoked`, `UserId`)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6);
SELECT `Id`
FROM `Tokens`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();
2025-11-16 08:21:18.617 +03:00 [INF] Added Token MappyApplication.Data.Token
2025-11-16 08:21:18.636 +03:00 [WRN] Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.
2025-11-16 08:21:18.646 +03:00 [INF] Executed DbCommand (7ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessFailedCount`, `t`.`ConcurrencyStamp`, `t`.`Email`, `t`.`EmailConfirmed`, `t`.`FirstName`, `t`.`LastName`, `t`.`LockoutEnabled`, `t`.`LockoutEnd`, `t`.`NormalizedEmail`, `t`.`NormalizedUserName`, `t`.`PasswordHash`, `t`.`PhoneNumber`, `t`.`PhoneNumberConfirmed`, `t`.`SecurityStamp`, `t`.`TwoFactorEnabled`, `t`.`UserName`, `w`.`Id`, `w`.`Cadence`, `w`.`CityName`, `w`.`Coords`, `w`.`Date`, `w`.`Distance`, `w`.`Duration`, `w`.`Emoji`, `w`.`Pace`, `w`.`Type`, `w`.`UserId`, `c`.`Id`, `c`.`CityName`, `c`.`Country`, `c`.`Date`, `c`.`Emoji`, `c`.`Lat`, `c`.`Lng`, `c`.`Notes`, `c`.`UserId`
FROM (
    SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`FirstName`, `a`.`LastName`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`
    FROM `AspNetUsers` AS `a`
    WHERE `a`.`Id` = @__user_Id_0
    LIMIT 2
) AS `t`
LEFT JOIN `Workouts` AS `w` ON `t`.`Id` = `w`.`UserId`
LEFT JOIN `Cities` AS `c` ON `t`.`Id` = `c`.`UserId`
ORDER BY `t`.`Id`, `w`.`Id`
2025-11-16 08:21:18.670 +03:00 [INF] Executing ObjectResult, writing value of type 'MappyApplication.Models.user.AuthResponse'.
2025-11-16 08:21:18.689 +03:00 [INF] Executed action MappyApplication.Controllers.AuthController.Login (MappyApplication) in 365.3725ms
2025-11-16 08:21:18.690 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.AuthController.Login (MappyApplication)'
2025-11-16 08:21:18.694 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:8080/api/v1/Auth/login - 200 null application/json; charset=utf-8 1044.3938ms
2025-11-16 08:21:40.983 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:8080/api/v1/cities - null null
2025-11-16 08:21:41.001 +03:00 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2025-11-16 08:21:41.010 +03:00 [INF] AuthenticationScheme: Bearer was challenged.
2025-11-16 08:21:41.010 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:8080/api/v1/cities - 401 null application/json; charset=utf-8 27.7937ms
2025-11-16 08:21:41.103 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:8080/favicon.ico - null null
2025-11-16 08:21:41.108 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:8080/favicon.ico - 404 null application/json; charset=utf-8 4.52ms
2025-11-16 08:21:41.108 +03:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:8080/favicon.ico, Response status code: 404
2025-11-16 08:21:44.329 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:8080/.well-known/appspecific/com.chrome.devtools.json - null null
2025-11-16 08:21:44.329 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:8080/.well-known/appspecific/com.chrome.devtools.json - 404 null application/json; charset=utf-8 0.6937ms
2025-11-16 08:21:44.330 +03:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:8080/.well-known/appspecific/com.chrome.devtools.json, Response status code: 404
2025-11-16 08:21:48.114 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:8080/api/v1/cities - null null
2025-11-16 08:21:48.120 +03:00 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2025-11-16 08:21:48.121 +03:00 [INF] AuthenticationScheme: Bearer was challenged.
2025-11-16 08:21:48.122 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:8080/api/v1/cities - 401 null application/json; charset=utf-8 7.3797ms
2025-11-16 08:21:48.147 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:8080/.well-known/appspecific/com.chrome.devtools.json - null null
2025-11-16 08:21:48.148 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:8080/.well-known/appspecific/com.chrome.devtools.json - 404 null application/json; charset=utf-8 0.5306ms
2025-11-16 08:21:48.148 +03:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:8080/.well-known/appspecific/com.chrome.devtools.json, Response status code: 404
2025-11-16 08:26:42.378 +03:00 [INF] User profile is available. Using '/Users/salah/.aspnet/DataProtection-Keys' as key repository; keys will not be encrypted at rest.
2025-11-16 08:26:42.458 +03:00 [INF] Now listening on: http://localhost:8080
2025-11-16 08:26:42.460 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2025-11-16 08:26:42.461 +03:00 [INF] Hosting environment: Development
2025-11-16 08:26:42.461 +03:00 [INF] Content root path: /Users/salah/Desktop/MappyApplication/MappyApplication
2025-11-16 15:31:27.396 +03:00 [INF] User profile is available. Using '/Users/salah/.aspnet/DataProtection-Keys' as key repository; keys will not be encrypted at rest.
2025-11-16 15:31:27.448 +03:00 [INF] Now listening on: http://localhost:8080
2025-11-16 15:31:27.449 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2025-11-16 15:31:27.449 +03:00 [INF] Hosting environment: Development
2025-11-16 15:31:27.449 +03:00 [INF] Content root path: /Users/salah/Desktop/MappyApplication/MappyApplication
2025-11-16 15:31:36.529 +03:00 [INF] Application is shutting down...
2025-11-16 15:31:50.162 +03:00 [INF] User profile is available. Using '/Users/salah/.aspnet/DataProtection-Keys' as key repository; keys will not be encrypted at rest.
2025-11-16 15:31:50.210 +03:00 [INF] Now listening on: http://localhost:8080
2025-11-16 15:31:50.211 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2025-11-16 15:31:50.211 +03:00 [INF] Hosting environment: Development
2025-11-16 15:31:50.211 +03:00 [INF] Content root path: /Users/salah/Desktop/MappyApplication/MappyApplication
2025-11-16 15:31:50.804 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:8080/swagger/index.html - null null
2025-11-16 15:31:50.876 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:8080/swagger/index.html - 200 null text/html;charset=utf-8 73.2156ms
2025-11-16 15:31:50.945 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:8080/_framework/aspnetcore-browser-refresh.js - null null
2025-11-16 15:31:50.950 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:8080/_framework/aspnetcore-browser-refresh.js - 200 13732 application/javascript; charset=utf-8 4.1333ms
2025-11-16 15:31:51.120 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:8080/swagger/v1/swagger.json - null null
2025-11-16 15:31:51.172 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:8080/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 51.9606ms
2025-11-16 15:35:08.843 +03:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:8080/api/v1/auth/login - null null
2025-11-16 15:35:08.870 +03:00 [WRN] Failed to determine the https port for redirect.
2025-11-16 15:35:08.874 +03:00 [INF] CORS policy execution successful.
2025-11-16 15:35:08.878 +03:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:8080/api/v1/auth/login - 204 null null 36.0995ms
2025-11-16 15:35:08.882 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:8080/api/v1/auth/login - application/json 63
2025-11-16 15:35:08.885 +03:00 [INF] CORS policy execution successful.
2025-11-16 15:35:08.922 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.AuthController.Login (MappyApplication)'
2025-11-16 15:35:08.947 +03:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.user.AuthResponse] Login(MappyApplication.Models.user.AuthLogin) on controller MappyApplication.Controllers.AuthController (MappyApplication).
2025-11-16 15:35:09.637 +03:00 [INF] Executed DbCommand (58ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`FirstName`, `a`.`LastName`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`
FROM `AspNetUsers` AS `a`
WHERE `a`.`NormalizedEmail` = @__normalizedEmail_0
LIMIT 2
2025-11-16 15:35:09.646 +03:00 [ERR] Incorrect username or password
MappyApplication.Exceptions.AppErrorResponse: Incorrect username or password
   at MappyApplication.Repository.AuthManager.Login(AuthLogin authLogin) in /Users/salah/Desktop/MappyApplication/MappyApplication/Repository/AuthManager.cs:line 68
2025-11-16 15:35:09.653 +03:00 [INF] Executed action MappyApplication.Controllers.AuthController.Login (MappyApplication) in 704.9415ms
2025-11-16 15:35:09.653 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.AuthController.Login (MappyApplication)'
2025-11-16 15:35:09.653 +03:00 [ERR] An error occured
MappyApplication.Exceptions.AppErrorResponse: Incorrect username or password
   at MappyApplication.Repository.AuthManager.Login(AuthLogin authLogin) in /Users/salah/Desktop/MappyApplication/MappyApplication/Repository/AuthManager.cs:line 75
   at MappyApplication.Controllers.AuthController.Login(AuthLogin authLogin) in /Users/salah/Desktop/MappyApplication/MappyApplication/Controllers/AuthController.cs:line 32
   at lambda_method6(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Program.<>c.<<<Main>$>b__0_6>d.MoveNext() in /Users/salah/Desktop/MappyApplication/MappyApplication/Program.cs:line 140
--- End of stack trace from previous location ---
   at MappyApplication.MiddleWare.ExceptionMiddleWare.InvokeAsync(HttpContext ctx) in /Users/salah/Desktop/MappyApplication/MappyApplication/MiddleWare/ExceptionMiddleWare.cs:line 21
2025-11-16 15:35:09.663 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:8080/api/v1/auth/login - 400 null application/json; charset=utf-8 780.7185ms
2025-11-16 15:35:52.714 +03:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:8080/api/v1/auth/login - null null
2025-11-16 15:35:52.726 +03:00 [INF] CORS policy execution successful.
2025-11-16 15:35:52.727 +03:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:8080/api/v1/auth/login - 204 null null 13.7986ms
2025-11-16 15:35:52.730 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:8080/api/v1/auth/login - application/json 63
2025-11-16 15:35:52.730 +03:00 [INF] CORS policy execution successful.
2025-11-16 15:35:52.734 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.AuthController.Login (MappyApplication)'
2025-11-16 15:35:52.735 +03:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.user.AuthResponse] Login(MappyApplication.Models.user.AuthLogin) on controller MappyApplication.Controllers.AuthController (MappyApplication).
2025-11-16 15:35:52.795 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`FirstName`, `a`.`LastName`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`
FROM `AspNetUsers` AS `a`
WHERE `a`.`NormalizedEmail` = @__normalizedEmail_0
LIMIT 2
2025-11-16 15:35:52.796 +03:00 [ERR] Incorrect username or password
MappyApplication.Exceptions.AppErrorResponse: Incorrect username or password
   at MappyApplication.Repository.AuthManager.Login(AuthLogin authLogin) in /Users/salah/Desktop/MappyApplication/MappyApplication/Repository/AuthManager.cs:line 68
2025-11-16 15:35:52.797 +03:00 [INF] Executed action MappyApplication.Controllers.AuthController.Login (MappyApplication) in 61.7037ms
2025-11-16 15:35:52.797 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.AuthController.Login (MappyApplication)'
2025-11-16 15:35:52.797 +03:00 [ERR] An error occured
MappyApplication.Exceptions.AppErrorResponse: Incorrect username or password
   at MappyApplication.Repository.AuthManager.Login(AuthLogin authLogin) in /Users/salah/Desktop/MappyApplication/MappyApplication/Repository/AuthManager.cs:line 75
   at MappyApplication.Controllers.AuthController.Login(AuthLogin authLogin) in /Users/salah/Desktop/MappyApplication/MappyApplication/Controllers/AuthController.cs:line 32
   at lambda_method6(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Program.<>c.<<<Main>$>b__0_6>d.MoveNext() in /Users/salah/Desktop/MappyApplication/MappyApplication/Program.cs:line 140
--- End of stack trace from previous location ---
   at MappyApplication.MiddleWare.ExceptionMiddleWare.InvokeAsync(HttpContext ctx) in /Users/salah/Desktop/MappyApplication/MappyApplication/MiddleWare/ExceptionMiddleWare.cs:line 21
2025-11-16 15:35:52.798 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:8080/api/v1/auth/login - 400 null application/json; charset=utf-8 67.9878ms
2025-11-16 15:36:23.617 +03:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:8080/api/v1/auth/login - null null
2025-11-16 15:36:23.621 +03:00 [INF] CORS policy execution successful.
2025-11-16 15:36:23.622 +03:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:8080/api/v1/auth/login - 204 null null 5.1995ms
2025-11-16 15:36:23.624 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:8080/api/v1/auth/login - application/json 63
2025-11-16 15:36:23.625 +03:00 [INF] CORS policy execution successful.
2025-11-16 15:36:23.628 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.AuthController.Login (MappyApplication)'
2025-11-16 15:36:23.628 +03:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.user.AuthResponse] Login(MappyApplication.Models.user.AuthLogin) on controller MappyApplication.Controllers.AuthController (MappyApplication).
2025-11-16 15:36:23.669 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`FirstName`, `a`.`LastName`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`
FROM `AspNetUsers` AS `a`
WHERE `a`.`NormalizedEmail` = @__normalizedEmail_0
LIMIT 2
2025-11-16 15:36:23.670 +03:00 [ERR] Incorrect username or password
MappyApplication.Exceptions.AppErrorResponse: Incorrect username or password
   at MappyApplication.Repository.AuthManager.Login(AuthLogin authLogin) in /Users/salah/Desktop/MappyApplication/MappyApplication/Repository/AuthManager.cs:line 68
2025-11-16 15:36:23.670 +03:00 [INF] Executed action MappyApplication.Controllers.AuthController.Login (MappyApplication) in 41.7612ms
2025-11-16 15:36:23.670 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.AuthController.Login (MappyApplication)'
2025-11-16 15:36:23.670 +03:00 [ERR] An error occured
MappyApplication.Exceptions.AppErrorResponse: Incorrect username or password
   at MappyApplication.Repository.AuthManager.Login(AuthLogin authLogin) in /Users/salah/Desktop/MappyApplication/MappyApplication/Repository/AuthManager.cs:line 75
   at MappyApplication.Controllers.AuthController.Login(AuthLogin authLogin) in /Users/salah/Desktop/MappyApplication/MappyApplication/Controllers/AuthController.cs:line 32
   at lambda_method6(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Program.<>c.<<<Main>$>b__0_6>d.MoveNext() in /Users/salah/Desktop/MappyApplication/MappyApplication/Program.cs:line 140
--- End of stack trace from previous location ---
   at MappyApplication.MiddleWare.ExceptionMiddleWare.InvokeAsync(HttpContext ctx) in /Users/salah/Desktop/MappyApplication/MappyApplication/MiddleWare/ExceptionMiddleWare.cs:line 21
2025-11-16 15:36:23.671 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:8080/api/v1/auth/login - 400 null application/json; charset=utf-8 46.8157ms
2025-11-16 15:38:15.957 +03:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:8080/api/v1/auth/login - null null
2025-11-16 15:38:15.962 +03:00 [INF] CORS policy execution successful.
2025-11-16 15:38:15.963 +03:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:8080/api/v1/auth/login - 204 null null 6.0704ms
2025-11-16 15:38:15.968 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:8080/api/v1/auth/login - application/json 63
2025-11-16 15:38:15.969 +03:00 [INF] CORS policy execution successful.
2025-11-16 15:38:15.970 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.AuthController.Login (MappyApplication)'
2025-11-16 15:38:15.971 +03:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.user.AuthResponse] Login(MappyApplication.Models.user.AuthLogin) on controller MappyApplication.Controllers.AuthController (MappyApplication).
2025-11-16 15:38:16.034 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`FirstName`, `a`.`LastName`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`
FROM `AspNetUsers` AS `a`
WHERE `a`.`NormalizedEmail` = @__normalizedEmail_0
LIMIT 2
2025-11-16 15:38:16.034 +03:00 [ERR] Incorrect username or password
MappyApplication.Exceptions.AppErrorResponse: Incorrect username or password
   at MappyApplication.Repository.AuthManager.Login(AuthLogin authLogin) in /Users/salah/Desktop/MappyApplication/MappyApplication/Repository/AuthManager.cs:line 68
2025-11-16 15:38:16.034 +03:00 [INF] Executed action MappyApplication.Controllers.AuthController.Login (MappyApplication) in 63.178ms
2025-11-16 15:38:16.035 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.AuthController.Login (MappyApplication)'
2025-11-16 15:38:16.035 +03:00 [ERR] An error occured
MappyApplication.Exceptions.AppErrorResponse: Incorrect username or password
   at MappyApplication.Repository.AuthManager.Login(AuthLogin authLogin) in /Users/salah/Desktop/MappyApplication/MappyApplication/Repository/AuthManager.cs:line 75
   at MappyApplication.Controllers.AuthController.Login(AuthLogin authLogin) in /Users/salah/Desktop/MappyApplication/MappyApplication/Controllers/AuthController.cs:line 32
   at lambda_method6(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Program.<>c.<<<Main>$>b__0_6>d.MoveNext() in /Users/salah/Desktop/MappyApplication/MappyApplication/Program.cs:line 140
--- End of stack trace from previous location ---
   at MappyApplication.MiddleWare.ExceptionMiddleWare.InvokeAsync(HttpContext ctx) in /Users/salah/Desktop/MappyApplication/MappyApplication/MiddleWare/ExceptionMiddleWare.cs:line 21
2025-11-16 15:38:16.035 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:8080/api/v1/auth/login - 400 null application/json; charset=utf-8 67.1092ms
2025-11-16 15:38:24.802 +03:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:8080/api/v1/auth/login - null null
2025-11-16 15:38:24.803 +03:00 [INF] CORS policy execution successful.
2025-11-16 15:38:24.803 +03:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:8080/api/v1/auth/login - 204 null null 1.4123ms
2025-11-16 15:38:24.806 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:8080/api/v1/auth/login - application/json 63
2025-11-16 15:38:24.806 +03:00 [INF] CORS policy execution successful.
2025-11-16 15:38:24.806 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.AuthController.Login (MappyApplication)'
2025-11-16 15:38:24.807 +03:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.user.AuthResponse] Login(MappyApplication.Models.user.AuthLogin) on controller MappyApplication.Controllers.AuthController (MappyApplication).
2025-11-16 15:38:24.835 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`FirstName`, `a`.`LastName`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`
FROM `AspNetUsers` AS `a`
WHERE `a`.`NormalizedEmail` = @__normalizedEmail_0
LIMIT 2
2025-11-16 15:38:24.835 +03:00 [ERR] Incorrect username or password
MappyApplication.Exceptions.AppErrorResponse: Incorrect username or password
   at MappyApplication.Repository.AuthManager.Login(AuthLogin authLogin) in /Users/salah/Desktop/MappyApplication/MappyApplication/Repository/AuthManager.cs:line 68
2025-11-16 15:38:24.836 +03:00 [INF] Executed action MappyApplication.Controllers.AuthController.Login (MappyApplication) in 29.3844ms
2025-11-16 15:38:24.836 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.AuthController.Login (MappyApplication)'
2025-11-16 15:38:24.836 +03:00 [ERR] An error occured
MappyApplication.Exceptions.AppErrorResponse: Incorrect username or password
   at MappyApplication.Repository.AuthManager.Login(AuthLogin authLogin) in /Users/salah/Desktop/MappyApplication/MappyApplication/Repository/AuthManager.cs:line 75
   at MappyApplication.Controllers.AuthController.Login(AuthLogin authLogin) in /Users/salah/Desktop/MappyApplication/MappyApplication/Controllers/AuthController.cs:line 32
   at lambda_method6(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Program.<>c.<<<Main>$>b__0_6>d.MoveNext() in /Users/salah/Desktop/MappyApplication/MappyApplication/Program.cs:line 140
--- End of stack trace from previous location ---
   at MappyApplication.MiddleWare.ExceptionMiddleWare.InvokeAsync(HttpContext ctx) in /Users/salah/Desktop/MappyApplication/MappyApplication/MiddleWare/ExceptionMiddleWare.cs:line 21
2025-11-16 15:38:24.837 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:8080/api/v1/auth/login - 400 null application/json; charset=utf-8 31.7532ms
2025-11-16 15:38:42.697 +03:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:8080/api/v1/auth/login - null null
2025-11-16 15:38:42.701 +03:00 [INF] CORS policy execution successful.
2025-11-16 15:38:42.703 +03:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:8080/api/v1/auth/login - 204 null null 6.7831ms
2025-11-16 15:38:42.705 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:8080/api/v1/auth/login - application/json 63
2025-11-16 15:38:42.706 +03:00 [INF] CORS policy execution successful.
2025-11-16 15:38:42.708 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.AuthController.Login (MappyApplication)'
2025-11-16 15:38:42.709 +03:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.user.AuthResponse] Login(MappyApplication.Models.user.AuthLogin) on controller MappyApplication.Controllers.AuthController (MappyApplication).
2025-11-16 15:38:42.748 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`FirstName`, `a`.`LastName`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`
FROM `AspNetUsers` AS `a`
WHERE `a`.`NormalizedEmail` = @__normalizedEmail_0
LIMIT 2
2025-11-16 15:38:42.748 +03:00 [ERR] Incorrect username or password
MappyApplication.Exceptions.AppErrorResponse: Incorrect username or password
   at MappyApplication.Repository.AuthManager.Login(AuthLogin authLogin) in /Users/salah/Desktop/MappyApplication/MappyApplication/Repository/AuthManager.cs:line 68
2025-11-16 15:38:42.749 +03:00 [INF] Executed action MappyApplication.Controllers.AuthController.Login (MappyApplication) in 39.975ms
2025-11-16 15:38:42.749 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.AuthController.Login (MappyApplication)'
2025-11-16 15:38:42.749 +03:00 [ERR] An error occured
MappyApplication.Exceptions.AppErrorResponse: Incorrect username or password
   at MappyApplication.Repository.AuthManager.Login(AuthLogin authLogin) in /Users/salah/Desktop/MappyApplication/MappyApplication/Repository/AuthManager.cs:line 75
   at MappyApplication.Controllers.AuthController.Login(AuthLogin authLogin) in /Users/salah/Desktop/MappyApplication/MappyApplication/Controllers/AuthController.cs:line 32
   at lambda_method6(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Program.<>c.<<<Main>$>b__0_6>d.MoveNext() in /Users/salah/Desktop/MappyApplication/MappyApplication/Program.cs:line 140
--- End of stack trace from previous location ---
   at MappyApplication.MiddleWare.ExceptionMiddleWare.InvokeAsync(HttpContext ctx) in /Users/salah/Desktop/MappyApplication/MappyApplication/MiddleWare/ExceptionMiddleWare.cs:line 21
2025-11-16 15:38:42.750 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:8080/api/v1/auth/login - 400 null application/json; charset=utf-8 45.3495ms
2025-11-16 15:39:22.337 +03:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:8080/api/v1/auth/login - null null
2025-11-16 15:39:22.341 +03:00 [INF] CORS policy execution successful.
2025-11-16 15:39:22.343 +03:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:8080/api/v1/auth/login - 204 null null 6.4992ms
2025-11-16 15:39:22.349 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:8080/api/v1/auth/login - application/json 51
2025-11-16 15:39:22.349 +03:00 [INF] CORS policy execution successful.
2025-11-16 15:39:22.351 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.AuthController.Login (MappyApplication)'
2025-11-16 15:39:22.352 +03:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.user.AuthResponse] Login(MappyApplication.Models.user.AuthLogin) on controller MappyApplication.Controllers.AuthController (MappyApplication).
2025-11-16 15:39:22.436 +03:00 [INF] Executed DbCommand (4ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`FirstName`, `a`.`LastName`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`
FROM `AspNetUsers` AS `a`
WHERE `a`.`NormalizedEmail` = @__normalizedEmail_0
LIMIT 2
2025-11-16 15:39:22.553 +03:00 [INF] Executed DbCommand (17ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']

        UPDATE TOKENS
        SET Revoked = true, Expired = true
        WHERE UserId = @p0
          AND DeviceId = @p1
          AND Revoked = false
          AND Expired = false
2025-11-16 15:39:22.595 +03:00 [INF] Executed DbCommand (13ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a0`.`Name`
FROM `AspNetUserRoles` AS `a`
INNER JOIN `AspNetRoles` AS `a0` ON `a`.`RoleId` = `a0`.`Id`
WHERE `a`.`UserId` = @__userId_0
2025-11-16 15:39:22.603 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ClaimType`, `a`.`ClaimValue`, `a`.`UserId`
FROM `AspNetUserClaims` AS `a`
WHERE `a`.`UserId` = @__user_Id_0
2025-11-16 15:39:22.619 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a0`.`Name`
FROM `AspNetUserRoles` AS `a`
INNER JOIN `AspNetRoles` AS `a0` ON `a`.`RoleId` = `a0`.`Id`
WHERE `a`.`UserId` = @__userId_0
2025-11-16 15:39:22.619 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ClaimType`, `a`.`ClaimValue`, `a`.`UserId`
FROM `AspNetUserClaims` AS `a`
WHERE `a`.`UserId` = @__user_Id_0
2025-11-16 15:39:22.681 +03:00 [INF] Executed DbCommand (11ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (DbType = DateTime), @p2='?' (Size = 4000), @p3='?' (DbType = Boolean), @p4='?' (Size = 4000), @p5='?' (DbType = Boolean), @p6='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO `Tokens` (`AccessToken`, `CreatedAt`, `DeviceId`, `Expired`, `RefreshToken`, `Revoked`, `UserId`)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6);
SELECT `Id`
FROM `Tokens`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();
2025-11-16 15:39:22.695 +03:00 [INF] Added Token MappyApplication.Data.Token
2025-11-16 15:39:22.713 +03:00 [WRN] Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.
2025-11-16 15:39:22.726 +03:00 [INF] Executed DbCommand (9ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessFailedCount`, `t`.`ConcurrencyStamp`, `t`.`Email`, `t`.`EmailConfirmed`, `t`.`FirstName`, `t`.`LastName`, `t`.`LockoutEnabled`, `t`.`LockoutEnd`, `t`.`NormalizedEmail`, `t`.`NormalizedUserName`, `t`.`PasswordHash`, `t`.`PhoneNumber`, `t`.`PhoneNumberConfirmed`, `t`.`SecurityStamp`, `t`.`TwoFactorEnabled`, `t`.`UserName`, `w`.`Id`, `w`.`Cadence`, `w`.`CityName`, `w`.`Coords`, `w`.`Date`, `w`.`Distance`, `w`.`Duration`, `w`.`Emoji`, `w`.`Pace`, `w`.`Type`, `w`.`UserId`, `c`.`Id`, `c`.`CityName`, `c`.`Country`, `c`.`Date`, `c`.`Emoji`, `c`.`Lat`, `c`.`Lng`, `c`.`Notes`, `c`.`UserId`
FROM (
    SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`FirstName`, `a`.`LastName`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`
    FROM `AspNetUsers` AS `a`
    WHERE `a`.`Id` = @__user_Id_0
    LIMIT 2
) AS `t`
LEFT JOIN `Workouts` AS `w` ON `t`.`Id` = `w`.`UserId`
LEFT JOIN `Cities` AS `c` ON `t`.`Id` = `c`.`UserId`
ORDER BY `t`.`Id`, `w`.`Id`
2025-11-16 15:39:22.738 +03:00 [INF] Executing ObjectResult, writing value of type 'MappyApplication.Models.user.AuthResponse'.
2025-11-16 15:39:22.744 +03:00 [INF] Executed action MappyApplication.Controllers.AuthController.Login (MappyApplication) in 392.2562ms
2025-11-16 15:39:22.744 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.AuthController.Login (MappyApplication)'
2025-11-16 15:39:22.744 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:8080/api/v1/auth/login - 200 null application/json; charset=utf-8 395.9336ms
2025-11-16 15:40:33.181 +03:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:8080/api/v1/auth/login - null null
2025-11-16 15:40:33.185 +03:00 [INF] CORS policy execution successful.
2025-11-16 15:40:33.186 +03:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:8080/api/v1/auth/login - 204 null null 6.0821ms
2025-11-16 15:40:33.188 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:8080/api/v1/auth/login - application/json 51
2025-11-16 15:40:33.188 +03:00 [INF] CORS policy execution successful.
2025-11-16 15:40:33.190 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.AuthController.Login (MappyApplication)'
2025-11-16 15:40:33.192 +03:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.user.AuthResponse] Login(MappyApplication.Models.user.AuthLogin) on controller MappyApplication.Controllers.AuthController (MappyApplication).
2025-11-16 15:40:33.330 +03:00 [INF] Executed DbCommand (20ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`FirstName`, `a`.`LastName`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`
FROM `AspNetUsers` AS `a`
WHERE `a`.`NormalizedEmail` = @__normalizedEmail_0
LIMIT 2
2025-11-16 15:40:33.387 +03:00 [INF] Executed DbCommand (9ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']

        UPDATE TOKENS
        SET Revoked = true, Expired = true
        WHERE UserId = @p0
          AND DeviceId = @p1
          AND Revoked = false
          AND Expired = false
2025-11-16 15:40:33.389 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a0`.`Name`
FROM `AspNetUserRoles` AS `a`
INNER JOIN `AspNetRoles` AS `a0` ON `a`.`RoleId` = `a0`.`Id`
WHERE `a`.`UserId` = @__userId_0
2025-11-16 15:40:33.390 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ClaimType`, `a`.`ClaimValue`, `a`.`UserId`
FROM `AspNetUserClaims` AS `a`
WHERE `a`.`UserId` = @__user_Id_0
2025-11-16 15:40:33.391 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a0`.`Name`
FROM `AspNetUserRoles` AS `a`
INNER JOIN `AspNetRoles` AS `a0` ON `a`.`RoleId` = `a0`.`Id`
WHERE `a`.`UserId` = @__userId_0
2025-11-16 15:40:33.392 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ClaimType`, `a`.`ClaimValue`, `a`.`UserId`
FROM `AspNetUserClaims` AS `a`
WHERE `a`.`UserId` = @__user_Id_0
2025-11-16 15:40:33.401 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (DbType = DateTime), @p2='?' (Size = 4000), @p3='?' (DbType = Boolean), @p4='?' (Size = 4000), @p5='?' (DbType = Boolean), @p6='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO `Tokens` (`AccessToken`, `CreatedAt`, `DeviceId`, `Expired`, `RefreshToken`, `Revoked`, `UserId`)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6);
SELECT `Id`
FROM `Tokens`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();
2025-11-16 15:40:33.402 +03:00 [INF] Added Token MappyApplication.Data.Token
2025-11-16 15:40:33.404 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessFailedCount`, `t`.`ConcurrencyStamp`, `t`.`Email`, `t`.`EmailConfirmed`, `t`.`FirstName`, `t`.`LastName`, `t`.`LockoutEnabled`, `t`.`LockoutEnd`, `t`.`NormalizedEmail`, `t`.`NormalizedUserName`, `t`.`PasswordHash`, `t`.`PhoneNumber`, `t`.`PhoneNumberConfirmed`, `t`.`SecurityStamp`, `t`.`TwoFactorEnabled`, `t`.`UserName`, `w`.`Id`, `w`.`Cadence`, `w`.`CityName`, `w`.`Coords`, `w`.`Date`, `w`.`Distance`, `w`.`Duration`, `w`.`Emoji`, `w`.`Pace`, `w`.`Type`, `w`.`UserId`, `c`.`Id`, `c`.`CityName`, `c`.`Country`, `c`.`Date`, `c`.`Emoji`, `c`.`Lat`, `c`.`Lng`, `c`.`Notes`, `c`.`UserId`
FROM (
    SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`FirstName`, `a`.`LastName`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`
    FROM `AspNetUsers` AS `a`
    WHERE `a`.`Id` = @__user_Id_0
    LIMIT 2
) AS `t`
LEFT JOIN `Workouts` AS `w` ON `t`.`Id` = `w`.`UserId`
LEFT JOIN `Cities` AS `c` ON `t`.`Id` = `c`.`UserId`
ORDER BY `t`.`Id`, `w`.`Id`
2025-11-16 15:40:33.407 +03:00 [INF] Executing ObjectResult, writing value of type 'MappyApplication.Models.user.AuthResponse'.
2025-11-16 15:40:33.407 +03:00 [INF] Executed action MappyApplication.Controllers.AuthController.Login (MappyApplication) in 215.0854ms
2025-11-16 15:40:33.407 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.AuthController.Login (MappyApplication)'
2025-11-16 15:40:33.407 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:8080/api/v1/auth/login - 200 null application/json; charset=utf-8 219.547ms
2025-11-16 15:40:39.658 +03:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:8080/api/v1/auth/login - null null
2025-11-16 15:40:39.658 +03:00 [INF] CORS policy execution successful.
2025-11-16 15:40:39.660 +03:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:8080/api/v1/auth/login - 204 null null 1.9852ms
2025-11-16 15:40:39.663 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:8080/api/v1/auth/login - application/json 51
2025-11-16 15:40:39.663 +03:00 [INF] CORS policy execution successful.
2025-11-16 15:40:39.664 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.AuthController.Login (MappyApplication)'
2025-11-16 15:40:39.664 +03:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.user.AuthResponse] Login(MappyApplication.Models.user.AuthLogin) on controller MappyApplication.Controllers.AuthController (MappyApplication).
2025-11-16 15:40:39.697 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`FirstName`, `a`.`LastName`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`
FROM `AspNetUsers` AS `a`
WHERE `a`.`NormalizedEmail` = @__normalizedEmail_0
LIMIT 2
2025-11-16 15:40:39.746 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']

        UPDATE TOKENS
        SET Revoked = true, Expired = true
        WHERE UserId = @p0
          AND DeviceId = @p1
          AND Revoked = false
          AND Expired = false
2025-11-16 15:40:39.746 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a0`.`Name`
FROM `AspNetUserRoles` AS `a`
INNER JOIN `AspNetRoles` AS `a0` ON `a`.`RoleId` = `a0`.`Id`
WHERE `a`.`UserId` = @__userId_0
2025-11-16 15:40:39.747 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ClaimType`, `a`.`ClaimValue`, `a`.`UserId`
FROM `AspNetUserClaims` AS `a`
WHERE `a`.`UserId` = @__user_Id_0
2025-11-16 15:40:39.748 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a0`.`Name`
FROM `AspNetUserRoles` AS `a`
INNER JOIN `AspNetRoles` AS `a0` ON `a`.`RoleId` = `a0`.`Id`
WHERE `a`.`UserId` = @__userId_0
2025-11-16 15:40:39.748 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ClaimType`, `a`.`ClaimValue`, `a`.`UserId`
FROM `AspNetUserClaims` AS `a`
WHERE `a`.`UserId` = @__user_Id_0
2025-11-16 15:40:39.750 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (DbType = DateTime), @p2='?' (Size = 4000), @p3='?' (DbType = Boolean), @p4='?' (Size = 4000), @p5='?' (DbType = Boolean), @p6='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO `Tokens` (`AccessToken`, `CreatedAt`, `DeviceId`, `Expired`, `RefreshToken`, `Revoked`, `UserId`)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6);
SELECT `Id`
FROM `Tokens`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();
2025-11-16 15:40:39.750 +03:00 [INF] Added Token MappyApplication.Data.Token
2025-11-16 15:40:39.751 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessFailedCount`, `t`.`ConcurrencyStamp`, `t`.`Email`, `t`.`EmailConfirmed`, `t`.`FirstName`, `t`.`LastName`, `t`.`LockoutEnabled`, `t`.`LockoutEnd`, `t`.`NormalizedEmail`, `t`.`NormalizedUserName`, `t`.`PasswordHash`, `t`.`PhoneNumber`, `t`.`PhoneNumberConfirmed`, `t`.`SecurityStamp`, `t`.`TwoFactorEnabled`, `t`.`UserName`, `w`.`Id`, `w`.`Cadence`, `w`.`CityName`, `w`.`Coords`, `w`.`Date`, `w`.`Distance`, `w`.`Duration`, `w`.`Emoji`, `w`.`Pace`, `w`.`Type`, `w`.`UserId`, `c`.`Id`, `c`.`CityName`, `c`.`Country`, `c`.`Date`, `c`.`Emoji`, `c`.`Lat`, `c`.`Lng`, `c`.`Notes`, `c`.`UserId`
FROM (
    SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`FirstName`, `a`.`LastName`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`
    FROM `AspNetUsers` AS `a`
    WHERE `a`.`Id` = @__user_Id_0
    LIMIT 2
) AS `t`
LEFT JOIN `Workouts` AS `w` ON `t`.`Id` = `w`.`UserId`
LEFT JOIN `Cities` AS `c` ON `t`.`Id` = `c`.`UserId`
ORDER BY `t`.`Id`, `w`.`Id`
2025-11-16 15:40:39.751 +03:00 [INF] Executing ObjectResult, writing value of type 'MappyApplication.Models.user.AuthResponse'.
2025-11-16 15:40:39.752 +03:00 [INF] Executed action MappyApplication.Controllers.AuthController.Login (MappyApplication) in 87.4527ms
2025-11-16 15:40:39.752 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.AuthController.Login (MappyApplication)'
2025-11-16 15:40:39.752 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:8080/api/v1/auth/login - 200 null application/json; charset=utf-8 88.6422ms
2025-11-16 15:40:41.308 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:8080/api/v1/auth/login - application/json 51
2025-11-16 15:40:41.308 +03:00 [INF] CORS policy execution successful.
2025-11-16 15:40:41.309 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.AuthController.Login (MappyApplication)'
2025-11-16 15:40:41.309 +03:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.user.AuthResponse] Login(MappyApplication.Models.user.AuthLogin) on controller MappyApplication.Controllers.AuthController (MappyApplication).
2025-11-16 15:40:41.331 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`FirstName`, `a`.`LastName`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`
FROM `AspNetUsers` AS `a`
WHERE `a`.`NormalizedEmail` = @__normalizedEmail_0
LIMIT 2
2025-11-16 15:40:41.388 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']

        UPDATE TOKENS
        SET Revoked = true, Expired = true
        WHERE UserId = @p0
          AND DeviceId = @p1
          AND Revoked = false
          AND Expired = false
2025-11-16 15:40:41.389 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a0`.`Name`
FROM `AspNetUserRoles` AS `a`
INNER JOIN `AspNetRoles` AS `a0` ON `a`.`RoleId` = `a0`.`Id`
WHERE `a`.`UserId` = @__userId_0
2025-11-16 15:40:41.390 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ClaimType`, `a`.`ClaimValue`, `a`.`UserId`
FROM `AspNetUserClaims` AS `a`
WHERE `a`.`UserId` = @__user_Id_0
2025-11-16 15:40:41.391 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a0`.`Name`
FROM `AspNetUserRoles` AS `a`
INNER JOIN `AspNetRoles` AS `a0` ON `a`.`RoleId` = `a0`.`Id`
WHERE `a`.`UserId` = @__userId_0
2025-11-16 15:40:41.391 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ClaimType`, `a`.`ClaimValue`, `a`.`UserId`
FROM `AspNetUserClaims` AS `a`
WHERE `a`.`UserId` = @__user_Id_0
2025-11-16 15:40:41.392 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (DbType = DateTime), @p2='?' (Size = 4000), @p3='?' (DbType = Boolean), @p4='?' (Size = 4000), @p5='?' (DbType = Boolean), @p6='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO `Tokens` (`AccessToken`, `CreatedAt`, `DeviceId`, `Expired`, `RefreshToken`, `Revoked`, `UserId`)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6);
SELECT `Id`
FROM `Tokens`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();
2025-11-16 15:40:41.393 +03:00 [INF] Added Token MappyApplication.Data.Token
2025-11-16 15:40:41.395 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessFailedCount`, `t`.`ConcurrencyStamp`, `t`.`Email`, `t`.`EmailConfirmed`, `t`.`FirstName`, `t`.`LastName`, `t`.`LockoutEnabled`, `t`.`LockoutEnd`, `t`.`NormalizedEmail`, `t`.`NormalizedUserName`, `t`.`PasswordHash`, `t`.`PhoneNumber`, `t`.`PhoneNumberConfirmed`, `t`.`SecurityStamp`, `t`.`TwoFactorEnabled`, `t`.`UserName`, `w`.`Id`, `w`.`Cadence`, `w`.`CityName`, `w`.`Coords`, `w`.`Date`, `w`.`Distance`, `w`.`Duration`, `w`.`Emoji`, `w`.`Pace`, `w`.`Type`, `w`.`UserId`, `c`.`Id`, `c`.`CityName`, `c`.`Country`, `c`.`Date`, `c`.`Emoji`, `c`.`Lat`, `c`.`Lng`, `c`.`Notes`, `c`.`UserId`
FROM (
    SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`FirstName`, `a`.`LastName`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`
    FROM `AspNetUsers` AS `a`
    WHERE `a`.`Id` = @__user_Id_0
    LIMIT 2
) AS `t`
LEFT JOIN `Workouts` AS `w` ON `t`.`Id` = `w`.`UserId`
LEFT JOIN `Cities` AS `c` ON `t`.`Id` = `c`.`UserId`
ORDER BY `t`.`Id`, `w`.`Id`
2025-11-16 15:40:41.396 +03:00 [INF] Executing ObjectResult, writing value of type 'MappyApplication.Models.user.AuthResponse'.
2025-11-16 15:40:41.396 +03:00 [INF] Executed action MappyApplication.Controllers.AuthController.Login (MappyApplication) in 86.7079ms
2025-11-16 15:40:41.396 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.AuthController.Login (MappyApplication)'
2025-11-16 15:40:41.396 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:8080/api/v1/auth/login - 200 null application/json; charset=utf-8 87.979ms
2025-11-16 15:41:16.282 +03:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:8080/api/v1/auth/login - null null
2025-11-16 15:41:16.284 +03:00 [INF] CORS policy execution successful.
2025-11-16 15:41:16.286 +03:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:8080/api/v1/auth/login - 204 null null 4.04ms
2025-11-16 15:41:16.287 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:8080/api/v1/auth/login - application/json 51
2025-11-16 15:41:16.288 +03:00 [INF] CORS policy execution successful.
2025-11-16 15:41:16.289 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.AuthController.Login (MappyApplication)'
2025-11-16 15:41:16.294 +03:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.user.AuthResponse] Login(MappyApplication.Models.user.AuthLogin) on controller MappyApplication.Controllers.AuthController (MappyApplication).
2025-11-16 15:41:16.341 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`FirstName`, `a`.`LastName`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`
FROM `AspNetUsers` AS `a`
WHERE `a`.`NormalizedEmail` = @__normalizedEmail_0
LIMIT 2
2025-11-16 15:41:16.341 +03:00 [ERR] Incorrect username or password
MappyApplication.Exceptions.AppErrorResponse: Incorrect username or password
   at MappyApplication.Repository.AuthManager.Login(AuthLogin authLogin) in /Users/salah/Desktop/MappyApplication/MappyApplication/Repository/AuthManager.cs:line 68
2025-11-16 15:41:16.342 +03:00 [INF] Executed action MappyApplication.Controllers.AuthController.Login (MappyApplication) in 46.8843ms
2025-11-16 15:41:16.342 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.AuthController.Login (MappyApplication)'
2025-11-16 15:41:16.342 +03:00 [ERR] An error occured
MappyApplication.Exceptions.AppErrorResponse: Incorrect username or password
   at MappyApplication.Repository.AuthManager.Login(AuthLogin authLogin) in /Users/salah/Desktop/MappyApplication/MappyApplication/Repository/AuthManager.cs:line 75
   at MappyApplication.Controllers.AuthController.Login(AuthLogin authLogin) in /Users/salah/Desktop/MappyApplication/MappyApplication/Controllers/AuthController.cs:line 32
   at lambda_method6(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Program.<>c.<<<Main>$>b__0_6>d.MoveNext() in /Users/salah/Desktop/MappyApplication/MappyApplication/Program.cs:line 140
--- End of stack trace from previous location ---
   at MappyApplication.MiddleWare.ExceptionMiddleWare.InvokeAsync(HttpContext ctx) in /Users/salah/Desktop/MappyApplication/MappyApplication/MiddleWare/ExceptionMiddleWare.cs:line 21
2025-11-16 15:41:16.343 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:8080/api/v1/auth/login - 400 null application/json; charset=utf-8 55.8346ms
2025-11-16 15:41:20.974 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:8080/api/v1/auth/login - application/json 51
2025-11-16 15:41:20.974 +03:00 [INF] CORS policy execution successful.
2025-11-16 15:41:20.975 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.AuthController.Login (MappyApplication)'
2025-11-16 15:41:20.975 +03:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.user.AuthResponse] Login(MappyApplication.Models.user.AuthLogin) on controller MappyApplication.Controllers.AuthController (MappyApplication).
2025-11-16 15:41:20.993 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`FirstName`, `a`.`LastName`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`
FROM `AspNetUsers` AS `a`
WHERE `a`.`NormalizedEmail` = @__normalizedEmail_0
LIMIT 2
2025-11-16 15:41:21.055 +03:00 [INF] Executed DbCommand (7ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']

        UPDATE TOKENS
        SET Revoked = true, Expired = true
        WHERE UserId = @p0
          AND DeviceId = @p1
          AND Revoked = false
          AND Expired = false
2025-11-16 15:41:21.057 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a0`.`Name`
FROM `AspNetUserRoles` AS `a`
INNER JOIN `AspNetRoles` AS `a0` ON `a`.`RoleId` = `a0`.`Id`
WHERE `a`.`UserId` = @__userId_0
2025-11-16 15:41:21.058 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ClaimType`, `a`.`ClaimValue`, `a`.`UserId`
FROM `AspNetUserClaims` AS `a`
WHERE `a`.`UserId` = @__user_Id_0
2025-11-16 15:41:21.059 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a0`.`Name`
FROM `AspNetUserRoles` AS `a`
INNER JOIN `AspNetRoles` AS `a0` ON `a`.`RoleId` = `a0`.`Id`
WHERE `a`.`UserId` = @__userId_0
2025-11-16 15:41:21.059 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ClaimType`, `a`.`ClaimValue`, `a`.`UserId`
FROM `AspNetUserClaims` AS `a`
WHERE `a`.`UserId` = @__user_Id_0
2025-11-16 15:41:21.062 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (DbType = DateTime), @p2='?' (Size = 4000), @p3='?' (DbType = Boolean), @p4='?' (Size = 4000), @p5='?' (DbType = Boolean), @p6='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO `Tokens` (`AccessToken`, `CreatedAt`, `DeviceId`, `Expired`, `RefreshToken`, `Revoked`, `UserId`)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6);
SELECT `Id`
FROM `Tokens`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();
2025-11-16 15:41:21.063 +03:00 [INF] Added Token MappyApplication.Data.Token
2025-11-16 15:41:21.064 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessFailedCount`, `t`.`ConcurrencyStamp`, `t`.`Email`, `t`.`EmailConfirmed`, `t`.`FirstName`, `t`.`LastName`, `t`.`LockoutEnabled`, `t`.`LockoutEnd`, `t`.`NormalizedEmail`, `t`.`NormalizedUserName`, `t`.`PasswordHash`, `t`.`PhoneNumber`, `t`.`PhoneNumberConfirmed`, `t`.`SecurityStamp`, `t`.`TwoFactorEnabled`, `t`.`UserName`, `w`.`Id`, `w`.`Cadence`, `w`.`CityName`, `w`.`Coords`, `w`.`Date`, `w`.`Distance`, `w`.`Duration`, `w`.`Emoji`, `w`.`Pace`, `w`.`Type`, `w`.`UserId`, `c`.`Id`, `c`.`CityName`, `c`.`Country`, `c`.`Date`, `c`.`Emoji`, `c`.`Lat`, `c`.`Lng`, `c`.`Notes`, `c`.`UserId`
FROM (
    SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`FirstName`, `a`.`LastName`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`
    FROM `AspNetUsers` AS `a`
    WHERE `a`.`Id` = @__user_Id_0
    LIMIT 2
) AS `t`
LEFT JOIN `Workouts` AS `w` ON `t`.`Id` = `w`.`UserId`
LEFT JOIN `Cities` AS `c` ON `t`.`Id` = `c`.`UserId`
ORDER BY `t`.`Id`, `w`.`Id`
2025-11-16 15:41:21.065 +03:00 [INF] Executing ObjectResult, writing value of type 'MappyApplication.Models.user.AuthResponse'.
2025-11-16 15:41:21.065 +03:00 [INF] Executed action MappyApplication.Controllers.AuthController.Login (MappyApplication) in 89.8602ms
2025-11-16 15:41:21.065 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.AuthController.Login (MappyApplication)'
2025-11-16 15:41:21.065 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:8080/api/v1/auth/login - 200 null application/json; charset=utf-8 90.6332ms
2025-11-16 16:50:48.913 +03:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:8080/api/v1/auth/login - null null
2025-11-16 16:50:48.926 +03:00 [INF] CORS policy execution successful.
2025-11-16 16:50:48.931 +03:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:8080/api/v1/auth/login - 204 null null 19.623ms
2025-11-16 16:50:48.933 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:8080/api/v1/auth/login - application/json 51
2025-11-16 16:50:48.936 +03:00 [INF] CORS policy execution successful.
2025-11-16 16:50:49.229 +03:00 [INF] Executed DbCommand (28ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 16:50:49.243 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.AuthController.Login (MappyApplication)'
2025-11-16 16:50:49.243 +03:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.user.AuthResponse] Login(MappyApplication.Models.user.AuthLogin) on controller MappyApplication.Controllers.AuthController (MappyApplication).
2025-11-16 16:50:49.252 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`FirstName`, `a`.`LastName`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`
FROM `AspNetUsers` AS `a`
WHERE `a`.`NormalizedEmail` = @__normalizedEmail_0
LIMIT 2
2025-11-16 16:50:49.306 +03:00 [INF] Executed DbCommand (16ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']

        UPDATE TOKENS
        SET Revoked = true, Expired = true
        WHERE UserId = @p0
          AND DeviceId = @p1
          AND Revoked = false
          AND Expired = false
2025-11-16 16:50:49.309 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a0`.`Name`
FROM `AspNetUserRoles` AS `a`
INNER JOIN `AspNetRoles` AS `a0` ON `a`.`RoleId` = `a0`.`Id`
WHERE `a`.`UserId` = @__userId_0
2025-11-16 16:50:49.310 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ClaimType`, `a`.`ClaimValue`, `a`.`UserId`
FROM `AspNetUserClaims` AS `a`
WHERE `a`.`UserId` = @__user_Id_0
2025-11-16 16:50:49.312 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a0`.`Name`
FROM `AspNetUserRoles` AS `a`
INNER JOIN `AspNetRoles` AS `a0` ON `a`.`RoleId` = `a0`.`Id`
WHERE `a`.`UserId` = @__userId_0
2025-11-16 16:50:49.312 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ClaimType`, `a`.`ClaimValue`, `a`.`UserId`
FROM `AspNetUserClaims` AS `a`
WHERE `a`.`UserId` = @__user_Id_0
2025-11-16 16:50:49.321 +03:00 [INF] Executed DbCommand (4ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (DbType = DateTime), @p2='?' (Size = 4000), @p3='?' (DbType = Boolean), @p4='?' (Size = 4000), @p5='?' (DbType = Boolean), @p6='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO `Tokens` (`AccessToken`, `CreatedAt`, `DeviceId`, `Expired`, `RefreshToken`, `Revoked`, `UserId`)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6);
SELECT `Id`
FROM `Tokens`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();
2025-11-16 16:50:49.321 +03:00 [INF] Added Token MappyApplication.Data.Token
2025-11-16 16:50:49.326 +03:00 [INF] Executed DbCommand (5ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessFailedCount`, `t`.`ConcurrencyStamp`, `t`.`Email`, `t`.`EmailConfirmed`, `t`.`FirstName`, `t`.`LastName`, `t`.`LockoutEnabled`, `t`.`LockoutEnd`, `t`.`NormalizedEmail`, `t`.`NormalizedUserName`, `t`.`PasswordHash`, `t`.`PhoneNumber`, `t`.`PhoneNumberConfirmed`, `t`.`SecurityStamp`, `t`.`TwoFactorEnabled`, `t`.`UserName`, `w`.`Id`, `w`.`Cadence`, `w`.`CityName`, `w`.`Coords`, `w`.`Date`, `w`.`Distance`, `w`.`Duration`, `w`.`Emoji`, `w`.`Pace`, `w`.`Type`, `w`.`UserId`, `c`.`Id`, `c`.`CityName`, `c`.`Country`, `c`.`Date`, `c`.`Emoji`, `c`.`Lat`, `c`.`Lng`, `c`.`Notes`, `c`.`UserId`
FROM (
    SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`FirstName`, `a`.`LastName`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`
    FROM `AspNetUsers` AS `a`
    WHERE `a`.`Id` = @__user_Id_0
    LIMIT 2
) AS `t`
LEFT JOIN `Workouts` AS `w` ON `t`.`Id` = `w`.`UserId`
LEFT JOIN `Cities` AS `c` ON `t`.`Id` = `c`.`UserId`
ORDER BY `t`.`Id`, `w`.`Id`
2025-11-16 16:50:49.328 +03:00 [INF] Executing ObjectResult, writing value of type 'MappyApplication.Models.user.AuthResponse'.
2025-11-16 16:50:49.329 +03:00 [INF] Executed action MappyApplication.Controllers.AuthController.Login (MappyApplication) in 85.866ms
2025-11-16 16:50:49.329 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.AuthController.Login (MappyApplication)'
2025-11-16 16:50:49.329 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:8080/api/v1/auth/login - 200 null application/json; charset=utf-8 396.0012ms
2025-11-16 16:51:10.555 +03:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:8080/api/v1/auth/login - null null
2025-11-16 16:51:10.558 +03:00 [INF] CORS policy execution successful.
2025-11-16 16:51:10.560 +03:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:8080/api/v1/auth/login - 204 null null 4.0814ms
2025-11-16 16:51:10.561 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:8080/api/v1/auth/login - application/json 51
2025-11-16 16:51:10.561 +03:00 [INF] CORS policy execution successful.
2025-11-16 16:51:10.607 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 16:51:10.608 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.AuthController.Login (MappyApplication)'
2025-11-16 16:51:10.609 +03:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.user.AuthResponse] Login(MappyApplication.Models.user.AuthLogin) on controller MappyApplication.Controllers.AuthController (MappyApplication).
2025-11-16 16:51:10.613 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`FirstName`, `a`.`LastName`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`
FROM `AspNetUsers` AS `a`
WHERE `a`.`NormalizedEmail` = @__normalizedEmail_0
LIMIT 2
2025-11-16 16:51:10.659 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']

        UPDATE TOKENS
        SET Revoked = true, Expired = true
        WHERE UserId = @p0
          AND DeviceId = @p1
          AND Revoked = false
          AND Expired = false
2025-11-16 16:51:10.660 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a0`.`Name`
FROM `AspNetUserRoles` AS `a`
INNER JOIN `AspNetRoles` AS `a0` ON `a`.`RoleId` = `a0`.`Id`
WHERE `a`.`UserId` = @__userId_0
2025-11-16 16:51:10.661 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ClaimType`, `a`.`ClaimValue`, `a`.`UserId`
FROM `AspNetUserClaims` AS `a`
WHERE `a`.`UserId` = @__user_Id_0
2025-11-16 16:51:10.662 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a0`.`Name`
FROM `AspNetUserRoles` AS `a`
INNER JOIN `AspNetRoles` AS `a0` ON `a`.`RoleId` = `a0`.`Id`
WHERE `a`.`UserId` = @__userId_0
2025-11-16 16:51:10.662 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ClaimType`, `a`.`ClaimValue`, `a`.`UserId`
FROM `AspNetUserClaims` AS `a`
WHERE `a`.`UserId` = @__user_Id_0
2025-11-16 16:51:10.665 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (DbType = DateTime), @p2='?' (Size = 4000), @p3='?' (DbType = Boolean), @p4='?' (Size = 4000), @p5='?' (DbType = Boolean), @p6='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO `Tokens` (`AccessToken`, `CreatedAt`, `DeviceId`, `Expired`, `RefreshToken`, `Revoked`, `UserId`)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6);
SELECT `Id`
FROM `Tokens`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();
2025-11-16 16:51:10.666 +03:00 [INF] Added Token MappyApplication.Data.Token
2025-11-16 16:51:10.668 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessFailedCount`, `t`.`ConcurrencyStamp`, `t`.`Email`, `t`.`EmailConfirmed`, `t`.`FirstName`, `t`.`LastName`, `t`.`LockoutEnabled`, `t`.`LockoutEnd`, `t`.`NormalizedEmail`, `t`.`NormalizedUserName`, `t`.`PasswordHash`, `t`.`PhoneNumber`, `t`.`PhoneNumberConfirmed`, `t`.`SecurityStamp`, `t`.`TwoFactorEnabled`, `t`.`UserName`, `w`.`Id`, `w`.`Cadence`, `w`.`CityName`, `w`.`Coords`, `w`.`Date`, `w`.`Distance`, `w`.`Duration`, `w`.`Emoji`, `w`.`Pace`, `w`.`Type`, `w`.`UserId`, `c`.`Id`, `c`.`CityName`, `c`.`Country`, `c`.`Date`, `c`.`Emoji`, `c`.`Lat`, `c`.`Lng`, `c`.`Notes`, `c`.`UserId`
FROM (
    SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`FirstName`, `a`.`LastName`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`
    FROM `AspNetUsers` AS `a`
    WHERE `a`.`Id` = @__user_Id_0
    LIMIT 2
) AS `t`
LEFT JOIN `Workouts` AS `w` ON `t`.`Id` = `w`.`UserId`
LEFT JOIN `Cities` AS `c` ON `t`.`Id` = `c`.`UserId`
ORDER BY `t`.`Id`, `w`.`Id`
2025-11-16 16:51:10.668 +03:00 [INF] Executing ObjectResult, writing value of type 'MappyApplication.Models.user.AuthResponse'.
2025-11-16 16:51:10.668 +03:00 [INF] Executed action MappyApplication.Controllers.AuthController.Login (MappyApplication) in 59.1595ms
2025-11-16 16:51:10.668 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.AuthController.Login (MappyApplication)'
2025-11-16 16:51:10.669 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:8080/api/v1/auth/login - 200 null application/json; charset=utf-8 107.7797ms
2025-11-16 16:51:51.576 +03:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:8080/api/v1/auth/login - null null
2025-11-16 16:51:51.578 +03:00 [INF] CORS policy execution successful.
2025-11-16 16:51:51.579 +03:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:8080/api/v1/auth/login - 204 null null 4.0726ms
2025-11-16 16:51:51.581 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:8080/api/v1/auth/login - application/json 51
2025-11-16 16:51:51.581 +03:00 [INF] CORS policy execution successful.
2025-11-16 16:51:51.622 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 16:51:51.623 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.AuthController.Login (MappyApplication)'
2025-11-16 16:51:51.623 +03:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.user.AuthResponse] Login(MappyApplication.Models.user.AuthLogin) on controller MappyApplication.Controllers.AuthController (MappyApplication).
2025-11-16 16:51:51.627 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`FirstName`, `a`.`LastName`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`
FROM `AspNetUsers` AS `a`
WHERE `a`.`NormalizedEmail` = @__normalizedEmail_0
LIMIT 2
2025-11-16 16:51:51.673 +03:00 [INF] Executed DbCommand (5ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']

        UPDATE TOKENS
        SET Revoked = true, Expired = true
        WHERE UserId = @p0
          AND DeviceId = @p1
          AND Revoked = false
          AND Expired = false
2025-11-16 16:51:51.675 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a0`.`Name`
FROM `AspNetUserRoles` AS `a`
INNER JOIN `AspNetRoles` AS `a0` ON `a`.`RoleId` = `a0`.`Id`
WHERE `a`.`UserId` = @__userId_0
2025-11-16 16:51:51.676 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ClaimType`, `a`.`ClaimValue`, `a`.`UserId`
FROM `AspNetUserClaims` AS `a`
WHERE `a`.`UserId` = @__user_Id_0
2025-11-16 16:51:51.678 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a0`.`Name`
FROM `AspNetUserRoles` AS `a`
INNER JOIN `AspNetRoles` AS `a0` ON `a`.`RoleId` = `a0`.`Id`
WHERE `a`.`UserId` = @__userId_0
2025-11-16 16:51:51.679 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ClaimType`, `a`.`ClaimValue`, `a`.`UserId`
FROM `AspNetUserClaims` AS `a`
WHERE `a`.`UserId` = @__user_Id_0
2025-11-16 16:51:51.683 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (DbType = DateTime), @p2='?' (Size = 4000), @p3='?' (DbType = Boolean), @p4='?' (Size = 4000), @p5='?' (DbType = Boolean), @p6='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO `Tokens` (`AccessToken`, `CreatedAt`, `DeviceId`, `Expired`, `RefreshToken`, `Revoked`, `UserId`)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6);
SELECT `Id`
FROM `Tokens`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();
2025-11-16 16:51:51.684 +03:00 [INF] Added Token MappyApplication.Data.Token
2025-11-16 16:51:51.686 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessFailedCount`, `t`.`ConcurrencyStamp`, `t`.`Email`, `t`.`EmailConfirmed`, `t`.`FirstName`, `t`.`LastName`, `t`.`LockoutEnabled`, `t`.`LockoutEnd`, `t`.`NormalizedEmail`, `t`.`NormalizedUserName`, `t`.`PasswordHash`, `t`.`PhoneNumber`, `t`.`PhoneNumberConfirmed`, `t`.`SecurityStamp`, `t`.`TwoFactorEnabled`, `t`.`UserName`, `w`.`Id`, `w`.`Cadence`, `w`.`CityName`, `w`.`Coords`, `w`.`Date`, `w`.`Distance`, `w`.`Duration`, `w`.`Emoji`, `w`.`Pace`, `w`.`Type`, `w`.`UserId`, `c`.`Id`, `c`.`CityName`, `c`.`Country`, `c`.`Date`, `c`.`Emoji`, `c`.`Lat`, `c`.`Lng`, `c`.`Notes`, `c`.`UserId`
FROM (
    SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`FirstName`, `a`.`LastName`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`
    FROM `AspNetUsers` AS `a`
    WHERE `a`.`Id` = @__user_Id_0
    LIMIT 2
) AS `t`
LEFT JOIN `Workouts` AS `w` ON `t`.`Id` = `w`.`UserId`
LEFT JOIN `Cities` AS `c` ON `t`.`Id` = `c`.`UserId`
ORDER BY `t`.`Id`, `w`.`Id`
2025-11-16 16:51:51.687 +03:00 [INF] Executing ObjectResult, writing value of type 'MappyApplication.Models.user.AuthResponse'.
2025-11-16 16:51:51.687 +03:00 [INF] Executed action MappyApplication.Controllers.AuthController.Login (MappyApplication) in 63.8235ms
2025-11-16 16:51:51.687 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.AuthController.Login (MappyApplication)'
2025-11-16 16:51:51.687 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:8080/api/v1/auth/login - 200 null application/json; charset=utf-8 105.8492ms
2025-11-16 16:53:20.444 +03:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:8080/api/v1/auth/refresh-token - null null
2025-11-16 16:53:20.480 +03:00 [INF] CORS policy execution successful.
2025-11-16 16:53:20.487 +03:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:8080/api/v1/auth/refresh-token - 204 null null 44.2462ms
2025-11-16 16:53:20.494 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:8080/api/v1/auth/refresh-token - null 0
2025-11-16 16:53:20.495 +03:00 [INF] CORS policy execution successful.
2025-11-16 16:53:20.660 +03:00 [INF] Executed DbCommand (11ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 16:53:20.696 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication)'
2025-11-16 16:53:20.716 +03:00 [INF] Route matched with {action = "RefreshToken", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.user.AuthResponse] RefreshToken() on controller MappyApplication.Controllers.AuthController (MappyApplication).
2025-11-16 16:53:20.735 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__refreshToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`RefreshToken` = @__refreshToken_0
LIMIT 2
2025-11-16 16:53:20.786 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__p_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`FirstName`, `a`.`LastName`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`
FROM `AspNetUsers` AS `a`
WHERE `a`.`Id` = @__p_0
LIMIT 1
2025-11-16 16:53:20.807 +03:00 [INF] Executed DbCommand (5ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']

        UPDATE TOKENS
        SET Revoked = true, Expired = true
        WHERE UserId = @p0
          AND DeviceId = @p1
          AND Revoked = false
          AND Expired = false
2025-11-16 16:53:20.809 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a0`.`Name`
FROM `AspNetUserRoles` AS `a`
INNER JOIN `AspNetRoles` AS `a0` ON `a`.`RoleId` = `a0`.`Id`
WHERE `a`.`UserId` = @__userId_0
2025-11-16 16:53:20.809 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ClaimType`, `a`.`ClaimValue`, `a`.`UserId`
FROM `AspNetUserClaims` AS `a`
WHERE `a`.`UserId` = @__user_Id_0
2025-11-16 16:53:20.811 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a0`.`Name`
FROM `AspNetUserRoles` AS `a`
INNER JOIN `AspNetRoles` AS `a0` ON `a`.`RoleId` = `a0`.`Id`
WHERE `a`.`UserId` = @__userId_0
2025-11-16 16:53:20.811 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ClaimType`, `a`.`ClaimValue`, `a`.`UserId`
FROM `AspNetUserClaims` AS `a`
WHERE `a`.`UserId` = @__user_Id_0
2025-11-16 16:53:20.814 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (DbType = DateTime), @p2='?' (Size = 4000), @p3='?' (DbType = Boolean), @p4='?' (Size = 4000), @p5='?' (DbType = Boolean), @p6='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO `Tokens` (`AccessToken`, `CreatedAt`, `DeviceId`, `Expired`, `RefreshToken`, `Revoked`, `UserId`)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6);
SELECT `Id`
FROM `Tokens`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();
2025-11-16 16:53:20.814 +03:00 [INF] Added Token MappyApplication.Data.Token
2025-11-16 16:53:20.821 +03:00 [INF] Executed DbCommand (5ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessFailedCount`, `t`.`ConcurrencyStamp`, `t`.`Email`, `t`.`EmailConfirmed`, `t`.`FirstName`, `t`.`LastName`, `t`.`LockoutEnabled`, `t`.`LockoutEnd`, `t`.`NormalizedEmail`, `t`.`NormalizedUserName`, `t`.`PasswordHash`, `t`.`PhoneNumber`, `t`.`PhoneNumberConfirmed`, `t`.`SecurityStamp`, `t`.`TwoFactorEnabled`, `t`.`UserName`, `w`.`Id`, `w`.`Cadence`, `w`.`CityName`, `w`.`Coords`, `w`.`Date`, `w`.`Distance`, `w`.`Duration`, `w`.`Emoji`, `w`.`Pace`, `w`.`Type`, `w`.`UserId`, `c`.`Id`, `c`.`CityName`, `c`.`Country`, `c`.`Date`, `c`.`Emoji`, `c`.`Lat`, `c`.`Lng`, `c`.`Notes`, `c`.`UserId`
FROM (
    SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`FirstName`, `a`.`LastName`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`
    FROM `AspNetUsers` AS `a`
    WHERE `a`.`Id` = @__user_Id_0
    LIMIT 2
) AS `t`
LEFT JOIN `Workouts` AS `w` ON `t`.`Id` = `w`.`UserId`
LEFT JOIN `Cities` AS `c` ON `t`.`Id` = `c`.`UserId`
ORDER BY `t`.`Id`, `w`.`Id`
2025-11-16 16:53:20.823 +03:00 [INF] Executing ObjectResult, writing value of type 'MappyApplication.Models.user.AuthResponse'.
2025-11-16 16:53:20.823 +03:00 [INF] Executed action MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication) in 106.7475ms
2025-11-16 16:53:20.823 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication)'
2025-11-16 16:53:20.823 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:8080/api/v1/auth/refresh-token - 200 null application/json; charset=utf-8 329.2334ms
2025-11-16 16:53:23.079 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:8080/api/v1/auth/refresh-token - null 0
2025-11-16 16:53:23.085 +03:00 [INF] CORS policy execution successful.
2025-11-16 16:53:23.152 +03:00 [INF] Executed DbCommand (4ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 16:53:23.158 +03:00 [INF] Bearer was not authenticated. Failure message: Invalid token
2025-11-16 16:53:23.168 +03:00 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2025-11-16 16:53:23.180 +03:00 [INF] AuthenticationScheme: Bearer was challenged.
2025-11-16 16:53:23.180 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:8080/api/v1/auth/refresh-token - 401 null application/json; charset=utf-8 101.3091ms
2025-11-16 16:53:25.082 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:8080/api/v1/auth/refresh-token - null 0
2025-11-16 16:53:25.083 +03:00 [INF] CORS policy execution successful.
2025-11-16 16:53:25.141 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 16:53:25.142 +03:00 [INF] Bearer was not authenticated. Failure message: Invalid token
2025-11-16 16:53:25.143 +03:00 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2025-11-16 16:53:25.144 +03:00 [INF] AuthenticationScheme: Bearer was challenged.
2025-11-16 16:53:25.144 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:8080/api/v1/auth/refresh-token - 401 null application/json; charset=utf-8 63.0468ms
2025-11-16 16:53:30.253 +03:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:8080/api/v1/auth/refresh-token - null null
2025-11-16 16:53:30.265 +03:00 [INF] CORS policy execution successful.
2025-11-16 16:53:30.274 +03:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:8080/api/v1/auth/refresh-token - 204 null null 20.4336ms
2025-11-16 16:53:30.278 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:8080/api/v1/auth/refresh-token - null 0
2025-11-16 16:53:30.280 +03:00 [INF] CORS policy execution successful.
2025-11-16 16:53:30.353 +03:00 [INF] Executed DbCommand (6ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 16:53:30.354 +03:00 [INF] Bearer was not authenticated. Failure message: Invalid token
2025-11-16 16:53:30.354 +03:00 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2025-11-16 16:53:30.354 +03:00 [INF] AuthenticationScheme: Bearer was challenged.
2025-11-16 16:53:30.354 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:8080/api/v1/auth/refresh-token - 401 null application/json; charset=utf-8 77.038ms
2025-11-16 16:53:32.234 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:8080/api/v1/auth/refresh-token - null 0
2025-11-16 16:53:32.238 +03:00 [INF] CORS policy execution successful.
2025-11-16 16:53:32.375 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 16:53:32.376 +03:00 [INF] Bearer was not authenticated. Failure message: Invalid token
2025-11-16 16:53:32.377 +03:00 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2025-11-16 16:53:32.377 +03:00 [INF] AuthenticationScheme: Bearer was challenged.
2025-11-16 16:53:32.377 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:8080/api/v1/auth/refresh-token - 401 null application/json; charset=utf-8 143.0833ms
2025-11-16 16:53:42.281 +03:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:8080/api/v1/auth/refresh-token - null null
2025-11-16 16:53:42.286 +03:00 [INF] CORS policy execution successful.
2025-11-16 16:53:42.286 +03:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:8080/api/v1/auth/refresh-token - 204 null null 5.8602ms
2025-11-16 16:53:42.289 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:8080/api/v1/auth/refresh-token - null 0
2025-11-16 16:53:42.289 +03:00 [INF] CORS policy execution successful.
2025-11-16 16:53:42.383 +03:00 [INF] Executed DbCommand (9ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 16:53:42.385 +03:00 [INF] Bearer was not authenticated. Failure message: Invalid token
2025-11-16 16:53:42.387 +03:00 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2025-11-16 16:53:42.388 +03:00 [INF] AuthenticationScheme: Bearer was challenged.
2025-11-16 16:53:42.388 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:8080/api/v1/auth/refresh-token - 401 null application/json; charset=utf-8 99.1987ms
2025-11-16 16:53:45.323 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:8080/api/v1/auth/refresh-token - null 0
2025-11-16 16:53:45.330 +03:00 [INF] CORS policy execution successful.
2025-11-16 16:53:45.409 +03:00 [INF] Executed DbCommand (5ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 16:53:45.410 +03:00 [INF] Bearer was not authenticated. Failure message: Invalid token
2025-11-16 16:53:45.412 +03:00 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2025-11-16 16:53:45.416 +03:00 [INF] AuthenticationScheme: Bearer was challenged.
2025-11-16 16:53:45.417 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:8080/api/v1/auth/refresh-token - 401 null application/json; charset=utf-8 94.1928ms
2025-11-16 16:53:46.184 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:8080/api/v1/auth/refresh-token - null 0
2025-11-16 16:53:46.195 +03:00 [INF] CORS policy execution successful.
2025-11-16 16:53:46.262 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 16:53:46.264 +03:00 [INF] Bearer was not authenticated. Failure message: Invalid token
2025-11-16 16:53:46.265 +03:00 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2025-11-16 16:53:46.265 +03:00 [INF] AuthenticationScheme: Bearer was challenged.
2025-11-16 16:53:46.265 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:8080/api/v1/auth/refresh-token - 401 null application/json; charset=utf-8 81.8705ms
2025-11-16 16:53:52.301 +03:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:8080/api/v1/auth/refresh-token - null null
2025-11-16 16:53:52.306 +03:00 [INF] CORS policy execution successful.
2025-11-16 16:53:52.307 +03:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:8080/api/v1/auth/refresh-token - 204 null null 10.2414ms
2025-11-16 16:53:52.311 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:8080/api/v1/auth/refresh-token - null 0
2025-11-16 16:53:52.311 +03:00 [INF] CORS policy execution successful.
2025-11-16 16:53:52.406 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 16:53:52.407 +03:00 [INF] Bearer was not authenticated. Failure message: Invalid token
2025-11-16 16:53:52.410 +03:00 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2025-11-16 16:53:52.417 +03:00 [INF] AuthenticationScheme: Bearer was challenged.
2025-11-16 16:53:52.417 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:8080/api/v1/auth/refresh-token - 401 null application/json; charset=utf-8 106.6468ms
2025-11-16 16:54:00.259 +03:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:8080/api/v1/auth/refresh-token - null null
2025-11-16 16:54:00.263 +03:00 [INF] CORS policy execution successful.
2025-11-16 16:54:00.264 +03:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:8080/api/v1/auth/refresh-token - 204 null null 5.2348ms
2025-11-16 16:54:00.266 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:8080/api/v1/auth/refresh-token - null 0
2025-11-16 16:54:00.266 +03:00 [INF] CORS policy execution successful.
2025-11-16 16:54:00.316 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 16:54:00.319 +03:00 [INF] Bearer was not authenticated. Failure message: Invalid token
2025-11-16 16:54:00.319 +03:00 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2025-11-16 16:54:00.351 +03:00 [INF] AuthenticationScheme: Bearer was challenged.
2025-11-16 16:54:00.351 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:8080/api/v1/auth/refresh-token - 401 null application/json; charset=utf-8 84.8753ms
2025-11-16 16:54:26.659 +03:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:8080/api/v1/auth/refresh-token - null null
2025-11-16 16:54:26.662 +03:00 [INF] CORS policy execution successful.
2025-11-16 16:54:26.664 +03:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:8080/api/v1/auth/refresh-token - 204 null null 6.4762ms
2025-11-16 16:54:26.668 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:8080/api/v1/auth/refresh-token - null 0
2025-11-16 16:54:26.668 +03:00 [INF] CORS policy execution successful.
2025-11-16 16:54:26.728 +03:00 [INF] Executed DbCommand (4ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 16:54:26.729 +03:00 [INF] Bearer was not authenticated. Failure message: Invalid token
2025-11-16 16:54:26.729 +03:00 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2025-11-16 16:54:26.730 +03:00 [INF] AuthenticationScheme: Bearer was challenged.
2025-11-16 16:54:26.732 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:8080/api/v1/auth/refresh-token - 401 null application/json; charset=utf-8 64.7875ms
2025-11-16 16:54:28.893 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:8080/api/v1/auth/refresh-token - null 0
2025-11-16 16:54:28.897 +03:00 [INF] CORS policy execution successful.
2025-11-16 16:54:28.957 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 16:54:28.959 +03:00 [INF] Bearer was not authenticated. Failure message: Invalid token
2025-11-16 16:54:28.961 +03:00 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2025-11-16 16:54:28.969 +03:00 [INF] AuthenticationScheme: Bearer was challenged.
2025-11-16 16:54:28.970 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:8080/api/v1/auth/refresh-token - 401 null application/json; charset=utf-8 77.2049ms
2025-11-16 16:54:31.756 +03:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:8080/api/v1/auth/refresh-token - null null
2025-11-16 16:54:31.757 +03:00 [INF] CORS policy execution successful.
2025-11-16 16:54:31.758 +03:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:8080/api/v1/auth/refresh-token - 204 null null 1.6225ms
2025-11-16 16:54:31.761 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:8080/api/v1/auth/refresh-token - null 0
2025-11-16 16:54:31.761 +03:00 [INF] CORS policy execution successful.
2025-11-16 16:54:31.799 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 16:54:31.800 +03:00 [INF] Bearer was not authenticated. Failure message: Invalid token
2025-11-16 16:54:31.800 +03:00 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2025-11-16 16:54:31.801 +03:00 [INF] AuthenticationScheme: Bearer was challenged.
2025-11-16 16:54:31.801 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:8080/api/v1/auth/refresh-token - 401 null application/json; charset=utf-8 40.1741ms
2025-11-16 16:54:55.163 +03:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:8080/api/v1/auth/login - null null
2025-11-16 16:54:55.164 +03:00 [INF] CORS policy execution successful.
2025-11-16 16:54:55.165 +03:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:8080/api/v1/auth/login - 204 null null 2.0588ms
2025-11-16 16:54:55.168 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:8080/api/v1/auth/login - application/json 51
2025-11-16 16:54:55.168 +03:00 [INF] CORS policy execution successful.
2025-11-16 16:54:55.202 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 16:54:55.204 +03:00 [INF] Bearer was not authenticated. Failure message: Invalid token
2025-11-16 16:54:55.204 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.AuthController.Login (MappyApplication)'
2025-11-16 16:54:55.204 +03:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.user.AuthResponse] Login(MappyApplication.Models.user.AuthLogin) on controller MappyApplication.Controllers.AuthController (MappyApplication).
2025-11-16 16:54:55.208 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`FirstName`, `a`.`LastName`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`
FROM `AspNetUsers` AS `a`
WHERE `a`.`NormalizedEmail` = @__normalizedEmail_0
LIMIT 2
2025-11-16 16:54:55.266 +03:00 [INF] Executed DbCommand (4ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']

        UPDATE TOKENS
        SET Revoked = true, Expired = true
        WHERE UserId = @p0
          AND DeviceId = @p1
          AND Revoked = false
          AND Expired = false
2025-11-16 16:54:55.268 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a0`.`Name`
FROM `AspNetUserRoles` AS `a`
INNER JOIN `AspNetRoles` AS `a0` ON `a`.`RoleId` = `a0`.`Id`
WHERE `a`.`UserId` = @__userId_0
2025-11-16 16:54:55.269 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ClaimType`, `a`.`ClaimValue`, `a`.`UserId`
FROM `AspNetUserClaims` AS `a`
WHERE `a`.`UserId` = @__user_Id_0
2025-11-16 16:54:55.270 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a0`.`Name`
FROM `AspNetUserRoles` AS `a`
INNER JOIN `AspNetRoles` AS `a0` ON `a`.`RoleId` = `a0`.`Id`
WHERE `a`.`UserId` = @__userId_0
2025-11-16 16:54:55.270 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ClaimType`, `a`.`ClaimValue`, `a`.`UserId`
FROM `AspNetUserClaims` AS `a`
WHERE `a`.`UserId` = @__user_Id_0
2025-11-16 16:54:55.274 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (DbType = DateTime), @p2='?' (Size = 4000), @p3='?' (DbType = Boolean), @p4='?' (Size = 4000), @p5='?' (DbType = Boolean), @p6='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO `Tokens` (`AccessToken`, `CreatedAt`, `DeviceId`, `Expired`, `RefreshToken`, `Revoked`, `UserId`)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6);
SELECT `Id`
FROM `Tokens`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();
2025-11-16 16:54:55.275 +03:00 [INF] Added Token MappyApplication.Data.Token
2025-11-16 16:54:55.278 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessFailedCount`, `t`.`ConcurrencyStamp`, `t`.`Email`, `t`.`EmailConfirmed`, `t`.`FirstName`, `t`.`LastName`, `t`.`LockoutEnabled`, `t`.`LockoutEnd`, `t`.`NormalizedEmail`, `t`.`NormalizedUserName`, `t`.`PasswordHash`, `t`.`PhoneNumber`, `t`.`PhoneNumberConfirmed`, `t`.`SecurityStamp`, `t`.`TwoFactorEnabled`, `t`.`UserName`, `w`.`Id`, `w`.`Cadence`, `w`.`CityName`, `w`.`Coords`, `w`.`Date`, `w`.`Distance`, `w`.`Duration`, `w`.`Emoji`, `w`.`Pace`, `w`.`Type`, `w`.`UserId`, `c`.`Id`, `c`.`CityName`, `c`.`Country`, `c`.`Date`, `c`.`Emoji`, `c`.`Lat`, `c`.`Lng`, `c`.`Notes`, `c`.`UserId`
FROM (
    SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`FirstName`, `a`.`LastName`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`
    FROM `AspNetUsers` AS `a`
    WHERE `a`.`Id` = @__user_Id_0
    LIMIT 2
) AS `t`
LEFT JOIN `Workouts` AS `w` ON `t`.`Id` = `w`.`UserId`
LEFT JOIN `Cities` AS `c` ON `t`.`Id` = `c`.`UserId`
ORDER BY `t`.`Id`, `w`.`Id`
2025-11-16 16:54:55.278 +03:00 [INF] Executing ObjectResult, writing value of type 'MappyApplication.Models.user.AuthResponse'.
2025-11-16 16:54:55.278 +03:00 [INF] Executed action MappyApplication.Controllers.AuthController.Login (MappyApplication) in 74.0652ms
2025-11-16 16:54:55.279 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.AuthController.Login (MappyApplication)'
2025-11-16 16:54:55.279 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:8080/api/v1/auth/login - 200 null application/json; charset=utf-8 110.6963ms
2025-11-16 16:55:01.634 +03:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:8080/api/v1/auth/refresh-token - null null
2025-11-16 16:55:01.638 +03:00 [INF] CORS policy execution successful.
2025-11-16 16:55:01.640 +03:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:8080/api/v1/auth/refresh-token - 204 null null 8.1631ms
2025-11-16 16:55:01.647 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:8080/api/v1/auth/refresh-token - null 0
2025-11-16 16:55:01.647 +03:00 [INF] CORS policy execution successful.
2025-11-16 16:55:01.732 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 16:55:01.738 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication)'
2025-11-16 16:55:01.742 +03:00 [INF] Route matched with {action = "RefreshToken", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.user.AuthResponse] RefreshToken() on controller MappyApplication.Controllers.AuthController (MappyApplication).
2025-11-16 16:55:01.748 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__refreshToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`RefreshToken` = @__refreshToken_0
LIMIT 2
2025-11-16 16:55:01.761 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`FirstName`, `a`.`LastName`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`
FROM `AspNetUsers` AS `a`
WHERE `a`.`Id` = @__p_0
LIMIT 1
2025-11-16 16:55:01.772 +03:00 [INF] Executed DbCommand (4ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']

        UPDATE TOKENS
        SET Revoked = true, Expired = true
        WHERE UserId = @p0
          AND DeviceId = @p1
          AND Revoked = false
          AND Expired = false
2025-11-16 16:55:01.778 +03:00 [INF] Executed DbCommand (4ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a0`.`Name`
FROM `AspNetUserRoles` AS `a`
INNER JOIN `AspNetRoles` AS `a0` ON `a`.`RoleId` = `a0`.`Id`
WHERE `a`.`UserId` = @__userId_0
2025-11-16 16:55:01.785 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ClaimType`, `a`.`ClaimValue`, `a`.`UserId`
FROM `AspNetUserClaims` AS `a`
WHERE `a`.`UserId` = @__user_Id_0
2025-11-16 16:55:01.789 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a0`.`Name`
FROM `AspNetUserRoles` AS `a`
INNER JOIN `AspNetRoles` AS `a0` ON `a`.`RoleId` = `a0`.`Id`
WHERE `a`.`UserId` = @__userId_0
2025-11-16 16:55:01.797 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ClaimType`, `a`.`ClaimValue`, `a`.`UserId`
FROM `AspNetUserClaims` AS `a`
WHERE `a`.`UserId` = @__user_Id_0
2025-11-16 16:55:01.860 +03:00 [INF] Executed DbCommand (18ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (DbType = DateTime), @p2='?' (Size = 4000), @p3='?' (DbType = Boolean), @p4='?' (Size = 4000), @p5='?' (DbType = Boolean), @p6='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO `Tokens` (`AccessToken`, `CreatedAt`, `DeviceId`, `Expired`, `RefreshToken`, `Revoked`, `UserId`)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6);
SELECT `Id`
FROM `Tokens`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();
2025-11-16 16:55:01.865 +03:00 [INF] Added Token MappyApplication.Data.Token
2025-11-16 16:55:01.875 +03:00 [INF] Executed DbCommand (4ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessFailedCount`, `t`.`ConcurrencyStamp`, `t`.`Email`, `t`.`EmailConfirmed`, `t`.`FirstName`, `t`.`LastName`, `t`.`LockoutEnabled`, `t`.`LockoutEnd`, `t`.`NormalizedEmail`, `t`.`NormalizedUserName`, `t`.`PasswordHash`, `t`.`PhoneNumber`, `t`.`PhoneNumberConfirmed`, `t`.`SecurityStamp`, `t`.`TwoFactorEnabled`, `t`.`UserName`, `w`.`Id`, `w`.`Cadence`, `w`.`CityName`, `w`.`Coords`, `w`.`Date`, `w`.`Distance`, `w`.`Duration`, `w`.`Emoji`, `w`.`Pace`, `w`.`Type`, `w`.`UserId`, `c`.`Id`, `c`.`CityName`, `c`.`Country`, `c`.`Date`, `c`.`Emoji`, `c`.`Lat`, `c`.`Lng`, `c`.`Notes`, `c`.`UserId`
FROM (
    SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`FirstName`, `a`.`LastName`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`
    FROM `AspNetUsers` AS `a`
    WHERE `a`.`Id` = @__user_Id_0
    LIMIT 2
) AS `t`
LEFT JOIN `Workouts` AS `w` ON `t`.`Id` = `w`.`UserId`
LEFT JOIN `Cities` AS `c` ON `t`.`Id` = `c`.`UserId`
ORDER BY `t`.`Id`, `w`.`Id`
2025-11-16 16:55:01.877 +03:00 [INF] Executing ObjectResult, writing value of type 'MappyApplication.Models.user.AuthResponse'.
2025-11-16 16:55:01.878 +03:00 [INF] Executed action MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication) in 135.5246ms
2025-11-16 16:55:01.878 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication)'
2025-11-16 16:55:01.879 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:8080/api/v1/auth/refresh-token - 200 null application/json; charset=utf-8 231.7971ms
2025-11-16 16:55:05.793 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:8080/api/v1/auth/refresh-token - null 0
2025-11-16 16:55:05.807 +03:00 [INF] CORS policy execution successful.
2025-11-16 16:55:05.883 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 16:55:05.883 +03:00 [INF] Bearer was not authenticated. Failure message: Invalid token
2025-11-16 16:55:05.884 +03:00 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2025-11-16 16:55:05.898 +03:00 [INF] AuthenticationScheme: Bearer was challenged.
2025-11-16 16:55:05.899 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:8080/api/v1/auth/refresh-token - 401 null application/json; charset=utf-8 105.9885ms
2025-11-16 16:55:06.717 +03:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:8080/api/v1/auth/refresh-token - null null
2025-11-16 16:55:06.721 +03:00 [INF] CORS policy execution successful.
2025-11-16 16:55:06.721 +03:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:8080/api/v1/auth/refresh-token - 204 null null 3.9621ms
2025-11-16 16:55:06.723 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:8080/api/v1/auth/refresh-token - null 0
2025-11-16 16:55:06.725 +03:00 [INF] CORS policy execution successful.
2025-11-16 16:55:06.759 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 16:55:06.759 +03:00 [INF] Bearer was not authenticated. Failure message: Invalid token
2025-11-16 16:55:06.759 +03:00 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2025-11-16 16:55:06.760 +03:00 [INF] AuthenticationScheme: Bearer was challenged.
2025-11-16 16:55:06.760 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:8080/api/v1/auth/refresh-token - 401 null application/json; charset=utf-8 37.3715ms
2025-11-16 16:55:30.357 +03:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:8080/api/v1/auth/refresh-token - null null
2025-11-16 16:55:30.366 +03:00 [INF] CORS policy execution successful.
2025-11-16 16:55:30.368 +03:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:8080/api/v1/auth/refresh-token - 204 null null 11.9655ms
2025-11-16 16:55:30.373 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:8080/api/v1/auth/refresh-token - null 0
2025-11-16 16:55:30.374 +03:00 [INF] CORS policy execution successful.
2025-11-16 16:55:30.530 +03:00 [INF] Executed DbCommand (25ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 16:55:30.537 +03:00 [INF] Bearer was not authenticated. Failure message: Invalid token
2025-11-16 16:55:30.550 +03:00 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2025-11-16 16:55:30.571 +03:00 [INF] AuthenticationScheme: Bearer was challenged.
2025-11-16 16:55:30.571 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:8080/api/v1/auth/refresh-token - 401 null application/json; charset=utf-8 198.563ms
2025-11-16 16:55:35.271 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:8080/api/v1/auth/refresh-token - null 0
2025-11-16 16:55:35.275 +03:00 [INF] CORS policy execution successful.
2025-11-16 16:55:35.345 +03:00 [INF] Executed DbCommand (9ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 16:55:35.354 +03:00 [INF] Bearer was not authenticated. Failure message: Invalid token
2025-11-16 16:55:35.357 +03:00 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2025-11-16 16:55:35.366 +03:00 [INF] AuthenticationScheme: Bearer was challenged.
2025-11-16 16:55:35.366 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:8080/api/v1/auth/refresh-token - 401 null application/json; charset=utf-8 95.7932ms
2025-11-16 16:55:43.433 +03:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:8080/api/v1/auth/login - null null
2025-11-16 16:55:43.435 +03:00 [INF] CORS policy execution successful.
2025-11-16 16:55:43.436 +03:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:8080/api/v1/auth/login - 204 null null 3.4148ms
2025-11-16 16:55:43.440 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:8080/api/v1/auth/login - application/json 51
2025-11-16 16:55:43.440 +03:00 [INF] CORS policy execution successful.
2025-11-16 16:55:43.467 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 16:55:43.469 +03:00 [INF] Bearer was not authenticated. Failure message: Invalid token
2025-11-16 16:55:43.469 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.AuthController.Login (MappyApplication)'
2025-11-16 16:55:43.470 +03:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.user.AuthResponse] Login(MappyApplication.Models.user.AuthLogin) on controller MappyApplication.Controllers.AuthController (MappyApplication).
2025-11-16 16:55:43.476 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`FirstName`, `a`.`LastName`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`
FROM `AspNetUsers` AS `a`
WHERE `a`.`NormalizedEmail` = @__normalizedEmail_0
LIMIT 2
2025-11-16 16:55:43.527 +03:00 [INF] Executed DbCommand (7ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']

        UPDATE TOKENS
        SET Revoked = true, Expired = true
        WHERE UserId = @p0
          AND DeviceId = @p1
          AND Revoked = false
          AND Expired = false
2025-11-16 16:55:43.529 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a0`.`Name`
FROM `AspNetUserRoles` AS `a`
INNER JOIN `AspNetRoles` AS `a0` ON `a`.`RoleId` = `a0`.`Id`
WHERE `a`.`UserId` = @__userId_0
2025-11-16 16:55:43.530 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ClaimType`, `a`.`ClaimValue`, `a`.`UserId`
FROM `AspNetUserClaims` AS `a`
WHERE `a`.`UserId` = @__user_Id_0
2025-11-16 16:55:43.530 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a0`.`Name`
FROM `AspNetUserRoles` AS `a`
INNER JOIN `AspNetRoles` AS `a0` ON `a`.`RoleId` = `a0`.`Id`
WHERE `a`.`UserId` = @__userId_0
2025-11-16 16:55:43.531 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ClaimType`, `a`.`ClaimValue`, `a`.`UserId`
FROM `AspNetUserClaims` AS `a`
WHERE `a`.`UserId` = @__user_Id_0
2025-11-16 16:55:43.534 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (DbType = DateTime), @p2='?' (Size = 4000), @p3='?' (DbType = Boolean), @p4='?' (Size = 4000), @p5='?' (DbType = Boolean), @p6='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO `Tokens` (`AccessToken`, `CreatedAt`, `DeviceId`, `Expired`, `RefreshToken`, `Revoked`, `UserId`)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6);
SELECT `Id`
FROM `Tokens`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();
2025-11-16 16:55:43.535 +03:00 [INF] Added Token MappyApplication.Data.Token
2025-11-16 16:55:43.538 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessFailedCount`, `t`.`ConcurrencyStamp`, `t`.`Email`, `t`.`EmailConfirmed`, `t`.`FirstName`, `t`.`LastName`, `t`.`LockoutEnabled`, `t`.`LockoutEnd`, `t`.`NormalizedEmail`, `t`.`NormalizedUserName`, `t`.`PasswordHash`, `t`.`PhoneNumber`, `t`.`PhoneNumberConfirmed`, `t`.`SecurityStamp`, `t`.`TwoFactorEnabled`, `t`.`UserName`, `w`.`Id`, `w`.`Cadence`, `w`.`CityName`, `w`.`Coords`, `w`.`Date`, `w`.`Distance`, `w`.`Duration`, `w`.`Emoji`, `w`.`Pace`, `w`.`Type`, `w`.`UserId`, `c`.`Id`, `c`.`CityName`, `c`.`Country`, `c`.`Date`, `c`.`Emoji`, `c`.`Lat`, `c`.`Lng`, `c`.`Notes`, `c`.`UserId`
FROM (
    SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`FirstName`, `a`.`LastName`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`
    FROM `AspNetUsers` AS `a`
    WHERE `a`.`Id` = @__user_Id_0
    LIMIT 2
) AS `t`
LEFT JOIN `Workouts` AS `w` ON `t`.`Id` = `w`.`UserId`
LEFT JOIN `Cities` AS `c` ON `t`.`Id` = `c`.`UserId`
ORDER BY `t`.`Id`, `w`.`Id`
2025-11-16 16:55:43.540 +03:00 [INF] Executing ObjectResult, writing value of type 'MappyApplication.Models.user.AuthResponse'.
2025-11-16 16:55:43.541 +03:00 [INF] Executed action MappyApplication.Controllers.AuthController.Login (MappyApplication) in 71.4793ms
2025-11-16 16:55:43.541 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.AuthController.Login (MappyApplication)'
2025-11-16 16:55:43.541 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:8080/api/v1/auth/login - 200 null application/json; charset=utf-8 101.2824ms
2025-11-16 16:55:46.768 +03:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:8080/api/v1/auth/refresh-token - null null
2025-11-16 16:55:46.769 +03:00 [INF] CORS policy execution successful.
2025-11-16 16:55:46.769 +03:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:8080/api/v1/auth/refresh-token - 204 null null 1.1424ms
2025-11-16 16:55:46.779 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:8080/api/v1/auth/refresh-token - null 0
2025-11-16 16:55:46.779 +03:00 [INF] CORS policy execution successful.
2025-11-16 16:55:46.821 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 16:55:46.822 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication)'
2025-11-16 16:55:46.823 +03:00 [INF] Route matched with {action = "RefreshToken", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.user.AuthResponse] RefreshToken() on controller MappyApplication.Controllers.AuthController (MappyApplication).
2025-11-16 16:55:46.827 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__refreshToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`RefreshToken` = @__refreshToken_0
LIMIT 2
2025-11-16 16:55:46.835 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`FirstName`, `a`.`LastName`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`
FROM `AspNetUsers` AS `a`
WHERE `a`.`Id` = @__p_0
LIMIT 1
2025-11-16 16:55:46.842 +03:00 [INF] Executed DbCommand (5ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']

        UPDATE TOKENS
        SET Revoked = true, Expired = true
        WHERE UserId = @p0
          AND DeviceId = @p1
          AND Revoked = false
          AND Expired = false
2025-11-16 16:55:46.844 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a0`.`Name`
FROM `AspNetUserRoles` AS `a`
INNER JOIN `AspNetRoles` AS `a0` ON `a`.`RoleId` = `a0`.`Id`
WHERE `a`.`UserId` = @__userId_0
2025-11-16 16:55:46.847 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ClaimType`, `a`.`ClaimValue`, `a`.`UserId`
FROM `AspNetUserClaims` AS `a`
WHERE `a`.`UserId` = @__user_Id_0
2025-11-16 16:55:46.851 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a0`.`Name`
FROM `AspNetUserRoles` AS `a`
INNER JOIN `AspNetRoles` AS `a0` ON `a`.`RoleId` = `a0`.`Id`
WHERE `a`.`UserId` = @__userId_0
2025-11-16 16:55:46.886 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ClaimType`, `a`.`ClaimValue`, `a`.`UserId`
FROM `AspNetUserClaims` AS `a`
WHERE `a`.`UserId` = @__user_Id_0
2025-11-16 16:55:46.894 +03:00 [INF] Executed DbCommand (4ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (DbType = DateTime), @p2='?' (Size = 4000), @p3='?' (DbType = Boolean), @p4='?' (Size = 4000), @p5='?' (DbType = Boolean), @p6='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO `Tokens` (`AccessToken`, `CreatedAt`, `DeviceId`, `Expired`, `RefreshToken`, `Revoked`, `UserId`)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6);
SELECT `Id`
FROM `Tokens`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();
2025-11-16 16:55:46.895 +03:00 [INF] Added Token MappyApplication.Data.Token
2025-11-16 16:55:46.899 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessFailedCount`, `t`.`ConcurrencyStamp`, `t`.`Email`, `t`.`EmailConfirmed`, `t`.`FirstName`, `t`.`LastName`, `t`.`LockoutEnabled`, `t`.`LockoutEnd`, `t`.`NormalizedEmail`, `t`.`NormalizedUserName`, `t`.`PasswordHash`, `t`.`PhoneNumber`, `t`.`PhoneNumberConfirmed`, `t`.`SecurityStamp`, `t`.`TwoFactorEnabled`, `t`.`UserName`, `w`.`Id`, `w`.`Cadence`, `w`.`CityName`, `w`.`Coords`, `w`.`Date`, `w`.`Distance`, `w`.`Duration`, `w`.`Emoji`, `w`.`Pace`, `w`.`Type`, `w`.`UserId`, `c`.`Id`, `c`.`CityName`, `c`.`Country`, `c`.`Date`, `c`.`Emoji`, `c`.`Lat`, `c`.`Lng`, `c`.`Notes`, `c`.`UserId`
FROM (
    SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`FirstName`, `a`.`LastName`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`
    FROM `AspNetUsers` AS `a`
    WHERE `a`.`Id` = @__user_Id_0
    LIMIT 2
) AS `t`
LEFT JOIN `Workouts` AS `w` ON `t`.`Id` = `w`.`UserId`
LEFT JOIN `Cities` AS `c` ON `t`.`Id` = `c`.`UserId`
ORDER BY `t`.`Id`, `w`.`Id`
2025-11-16 16:55:46.900 +03:00 [INF] Executing ObjectResult, writing value of type 'MappyApplication.Models.user.AuthResponse'.
2025-11-16 16:55:46.901 +03:00 [INF] Executed action MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication) in 78.5993ms
2025-11-16 16:55:46.901 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication)'
2025-11-16 16:55:46.901 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:8080/api/v1/auth/refresh-token - 200 null application/json; charset=utf-8 122.7242ms
2025-11-16 16:55:47.605 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:8080/api/v1/auth/refresh-token - null 0
2025-11-16 16:55:47.606 +03:00 [INF] CORS policy execution successful.
2025-11-16 16:55:47.616 +03:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenMalformedException: IDX14100: JWT is not well formed, there are no dots (.).
The token needs to be in JWS or JWE Compact Serialization Format. (JWS): 'EncodedHeader.EndcodedPayload.EncodedSignature'. (JWE): 'EncodedProtectedHeader.EncodedEncryptedKey.EncodedInitializationVector.EncodedCiphertext.EncodedAuthenticationTag'.
 ---> Microsoft.IdentityModel.Tokens.SecurityTokenMalformedException: IDX14100: JWT is not well formed, there are no dots (.).
The token needs to be in JWS or JWE Compact Serialization Format. (JWS): 'EncodedHeader.EndcodedPayload.EncodedSignature'. (JWE): 'EncodedProtectedHeader.EncodedEncryptedKey.EncodedInitializationVector.EncodedCiphertext.EncodedAuthenticationTag'.
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebToken.ReadToken(String encodedJson)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebToken..ctor(String jwtEncodedString)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ReadToken(String token, TokenValidationParameters validationParameters)
   --- End of inner exception stack trace ---
2025-11-16 16:55:47.627 +03:00 [INF] Bearer was not authenticated. Failure message: IDX14100: JWT is not well formed, there are no dots (.).
The token needs to be in JWS or JWE Compact Serialization Format. (JWS): 'EncodedHeader.EndcodedPayload.EncodedSignature'. (JWE): 'EncodedProtectedHeader.EncodedEncryptedKey.EncodedInitializationVector.EncodedCiphertext.EncodedAuthenticationTag'.
2025-11-16 16:55:47.627 +03:00 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2025-11-16 16:55:47.627 +03:00 [INF] AuthenticationScheme: Bearer was challenged.
2025-11-16 16:55:47.627 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:8080/api/v1/auth/refresh-token - 401 null application/json; charset=utf-8 22.132ms
2025-11-16 16:55:48.310 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:8080/api/v1/auth/refresh-token - null 0
2025-11-16 16:55:48.310 +03:00 [INF] CORS policy execution successful.
2025-11-16 16:55:48.312 +03:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenMalformedException: IDX14100: JWT is not well formed, there are no dots (.).
The token needs to be in JWS or JWE Compact Serialization Format. (JWS): 'EncodedHeader.EndcodedPayload.EncodedSignature'. (JWE): 'EncodedProtectedHeader.EncodedEncryptedKey.EncodedInitializationVector.EncodedCiphertext.EncodedAuthenticationTag'.
 ---> Microsoft.IdentityModel.Tokens.SecurityTokenMalformedException: IDX14100: JWT is not well formed, there are no dots (.).
The token needs to be in JWS or JWE Compact Serialization Format. (JWS): 'EncodedHeader.EndcodedPayload.EncodedSignature'. (JWE): 'EncodedProtectedHeader.EncodedEncryptedKey.EncodedInitializationVector.EncodedCiphertext.EncodedAuthenticationTag'.
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebToken.ReadToken(String encodedJson)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebToken..ctor(String jwtEncodedString)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ReadToken(String token, TokenValidationParameters validationParameters)
   --- End of inner exception stack trace ---
2025-11-16 16:55:48.312 +03:00 [INF] Bearer was not authenticated. Failure message: IDX14100: JWT is not well formed, there are no dots (.).
The token needs to be in JWS or JWE Compact Serialization Format. (JWS): 'EncodedHeader.EndcodedPayload.EncodedSignature'. (JWE): 'EncodedProtectedHeader.EncodedEncryptedKey.EncodedInitializationVector.EncodedCiphertext.EncodedAuthenticationTag'.
2025-11-16 16:55:48.312 +03:00 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2025-11-16 16:55:48.315 +03:00 [INF] AuthenticationScheme: Bearer was challenged.
2025-11-16 16:55:48.315 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:8080/api/v1/auth/refresh-token - 401 null application/json; charset=utf-8 5.2041ms
2025-11-16 16:56:02.044 +03:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:8080/api/v1/auth/refresh-token - null null
2025-11-16 16:56:02.046 +03:00 [INF] CORS policy execution successful.
2025-11-16 16:56:02.050 +03:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:8080/api/v1/auth/refresh-token - 204 null null 5.6964ms
2025-11-16 16:56:02.055 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:8080/api/v1/auth/refresh-token - null 0
2025-11-16 16:56:02.056 +03:00 [INF] CORS policy execution successful.
2025-11-16 16:56:02.062 +03:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenMalformedException: IDX14100: JWT is not well formed, there are no dots (.).
The token needs to be in JWS or JWE Compact Serialization Format. (JWS): 'EncodedHeader.EndcodedPayload.EncodedSignature'. (JWE): 'EncodedProtectedHeader.EncodedEncryptedKey.EncodedInitializationVector.EncodedCiphertext.EncodedAuthenticationTag'.
 ---> Microsoft.IdentityModel.Tokens.SecurityTokenMalformedException: IDX14100: JWT is not well formed, there are no dots (.).
The token needs to be in JWS or JWE Compact Serialization Format. (JWS): 'EncodedHeader.EndcodedPayload.EncodedSignature'. (JWE): 'EncodedProtectedHeader.EncodedEncryptedKey.EncodedInitializationVector.EncodedCiphertext.EncodedAuthenticationTag'.
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebToken.ReadToken(String encodedJson)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebToken..ctor(String jwtEncodedString)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ReadToken(String token, TokenValidationParameters validationParameters)
   --- End of inner exception stack trace ---
2025-11-16 16:56:02.065 +03:00 [INF] Bearer was not authenticated. Failure message: IDX14100: JWT is not well formed, there are no dots (.).
The token needs to be in JWS or JWE Compact Serialization Format. (JWS): 'EncodedHeader.EndcodedPayload.EncodedSignature'. (JWE): 'EncodedProtectedHeader.EncodedEncryptedKey.EncodedInitializationVector.EncodedCiphertext.EncodedAuthenticationTag'.
2025-11-16 16:56:02.069 +03:00 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2025-11-16 16:56:02.070 +03:00 [INF] AuthenticationScheme: Bearer was challenged.
2025-11-16 16:56:02.070 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:8080/api/v1/auth/refresh-token - 401 null application/json; charset=utf-8 16.2887ms
2025-11-16 16:56:02.946 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:8080/api/v1/auth/refresh-token - null 0
2025-11-16 16:56:02.948 +03:00 [INF] CORS policy execution successful.
2025-11-16 16:56:02.959 +03:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenMalformedException: IDX14100: JWT is not well formed, there are no dots (.).
The token needs to be in JWS or JWE Compact Serialization Format. (JWS): 'EncodedHeader.EndcodedPayload.EncodedSignature'. (JWE): 'EncodedProtectedHeader.EncodedEncryptedKey.EncodedInitializationVector.EncodedCiphertext.EncodedAuthenticationTag'.
 ---> Microsoft.IdentityModel.Tokens.SecurityTokenMalformedException: IDX14100: JWT is not well formed, there are no dots (.).
The token needs to be in JWS or JWE Compact Serialization Format. (JWS): 'EncodedHeader.EndcodedPayload.EncodedSignature'. (JWE): 'EncodedProtectedHeader.EncodedEncryptedKey.EncodedInitializationVector.EncodedCiphertext.EncodedAuthenticationTag'.
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebToken.ReadToken(String encodedJson)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebToken..ctor(String jwtEncodedString)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ReadToken(String token, TokenValidationParameters validationParameters)
   --- End of inner exception stack trace ---
2025-11-16 16:56:02.960 +03:00 [INF] Bearer was not authenticated. Failure message: IDX14100: JWT is not well formed, there are no dots (.).
The token needs to be in JWS or JWE Compact Serialization Format. (JWS): 'EncodedHeader.EndcodedPayload.EncodedSignature'. (JWE): 'EncodedProtectedHeader.EncodedEncryptedKey.EncodedInitializationVector.EncodedCiphertext.EncodedAuthenticationTag'.
2025-11-16 16:56:02.962 +03:00 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2025-11-16 16:56:02.964 +03:00 [INF] AuthenticationScheme: Bearer was challenged.
2025-11-16 16:56:02.964 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:8080/api/v1/auth/refresh-token - 401 null application/json; charset=utf-8 18.4664ms
2025-11-16 16:56:09.941 +03:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:8080/api/v1/auth/login - null null
2025-11-16 16:56:09.943 +03:00 [INF] CORS policy execution successful.
2025-11-16 16:56:09.944 +03:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:8080/api/v1/auth/login - 204 null null 3.1583ms
2025-11-16 16:56:09.954 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:8080/api/v1/auth/login - application/json 51
2025-11-16 16:56:09.955 +03:00 [INF] CORS policy execution successful.
2025-11-16 16:56:09.960 +03:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenMalformedException: IDX14100: JWT is not well formed, there are no dots (.).
The token needs to be in JWS or JWE Compact Serialization Format. (JWS): 'EncodedHeader.EndcodedPayload.EncodedSignature'. (JWE): 'EncodedProtectedHeader.EncodedEncryptedKey.EncodedInitializationVector.EncodedCiphertext.EncodedAuthenticationTag'.
 ---> Microsoft.IdentityModel.Tokens.SecurityTokenMalformedException: IDX14100: JWT is not well formed, there are no dots (.).
The token needs to be in JWS or JWE Compact Serialization Format. (JWS): 'EncodedHeader.EndcodedPayload.EncodedSignature'. (JWE): 'EncodedProtectedHeader.EncodedEncryptedKey.EncodedInitializationVector.EncodedCiphertext.EncodedAuthenticationTag'.
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebToken.ReadToken(String encodedJson)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebToken..ctor(String jwtEncodedString)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ReadToken(String token, TokenValidationParameters validationParameters)
   --- End of inner exception stack trace ---
2025-11-16 16:56:09.964 +03:00 [INF] Bearer was not authenticated. Failure message: IDX14100: JWT is not well formed, there are no dots (.).
The token needs to be in JWS or JWE Compact Serialization Format. (JWS): 'EncodedHeader.EndcodedPayload.EncodedSignature'. (JWE): 'EncodedProtectedHeader.EncodedEncryptedKey.EncodedInitializationVector.EncodedCiphertext.EncodedAuthenticationTag'.
2025-11-16 16:56:09.966 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.AuthController.Login (MappyApplication)'
2025-11-16 16:56:09.969 +03:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.user.AuthResponse] Login(MappyApplication.Models.user.AuthLogin) on controller MappyApplication.Controllers.AuthController (MappyApplication).
2025-11-16 16:56:10.020 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`FirstName`, `a`.`LastName`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`
FROM `AspNetUsers` AS `a`
WHERE `a`.`NormalizedEmail` = @__normalizedEmail_0
LIMIT 2
2025-11-16 16:56:10.067 +03:00 [INF] Executed DbCommand (4ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']

        UPDATE TOKENS
        SET Revoked = true, Expired = true
        WHERE UserId = @p0
          AND DeviceId = @p1
          AND Revoked = false
          AND Expired = false
2025-11-16 16:56:10.071 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a0`.`Name`
FROM `AspNetUserRoles` AS `a`
INNER JOIN `AspNetRoles` AS `a0` ON `a`.`RoleId` = `a0`.`Id`
WHERE `a`.`UserId` = @__userId_0
2025-11-16 16:56:10.073 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ClaimType`, `a`.`ClaimValue`, `a`.`UserId`
FROM `AspNetUserClaims` AS `a`
WHERE `a`.`UserId` = @__user_Id_0
2025-11-16 16:56:10.075 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a0`.`Name`
FROM `AspNetUserRoles` AS `a`
INNER JOIN `AspNetRoles` AS `a0` ON `a`.`RoleId` = `a0`.`Id`
WHERE `a`.`UserId` = @__userId_0
2025-11-16 16:56:10.076 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ClaimType`, `a`.`ClaimValue`, `a`.`UserId`
FROM `AspNetUserClaims` AS `a`
WHERE `a`.`UserId` = @__user_Id_0
2025-11-16 16:56:10.088 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (DbType = DateTime), @p2='?' (Size = 4000), @p3='?' (DbType = Boolean), @p4='?' (Size = 4000), @p5='?' (DbType = Boolean), @p6='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO `Tokens` (`AccessToken`, `CreatedAt`, `DeviceId`, `Expired`, `RefreshToken`, `Revoked`, `UserId`)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6);
SELECT `Id`
FROM `Tokens`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();
2025-11-16 16:56:10.090 +03:00 [INF] Added Token MappyApplication.Data.Token
2025-11-16 16:56:10.093 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessFailedCount`, `t`.`ConcurrencyStamp`, `t`.`Email`, `t`.`EmailConfirmed`, `t`.`FirstName`, `t`.`LastName`, `t`.`LockoutEnabled`, `t`.`LockoutEnd`, `t`.`NormalizedEmail`, `t`.`NormalizedUserName`, `t`.`PasswordHash`, `t`.`PhoneNumber`, `t`.`PhoneNumberConfirmed`, `t`.`SecurityStamp`, `t`.`TwoFactorEnabled`, `t`.`UserName`, `w`.`Id`, `w`.`Cadence`, `w`.`CityName`, `w`.`Coords`, `w`.`Date`, `w`.`Distance`, `w`.`Duration`, `w`.`Emoji`, `w`.`Pace`, `w`.`Type`, `w`.`UserId`, `c`.`Id`, `c`.`CityName`, `c`.`Country`, `c`.`Date`, `c`.`Emoji`, `c`.`Lat`, `c`.`Lng`, `c`.`Notes`, `c`.`UserId`
FROM (
    SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`FirstName`, `a`.`LastName`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`
    FROM `AspNetUsers` AS `a`
    WHERE `a`.`Id` = @__user_Id_0
    LIMIT 2
) AS `t`
LEFT JOIN `Workouts` AS `w` ON `t`.`Id` = `w`.`UserId`
LEFT JOIN `Cities` AS `c` ON `t`.`Id` = `c`.`UserId`
ORDER BY `t`.`Id`, `w`.`Id`
2025-11-16 16:56:10.094 +03:00 [INF] Executing ObjectResult, writing value of type 'MappyApplication.Models.user.AuthResponse'.
2025-11-16 16:56:10.094 +03:00 [INF] Executed action MappyApplication.Controllers.AuthController.Login (MappyApplication) in 125.265ms
2025-11-16 16:56:10.094 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.AuthController.Login (MappyApplication)'
2025-11-16 16:56:10.094 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:8080/api/v1/auth/login - 200 null application/json; charset=utf-8 140.1685ms
2025-11-16 16:56:14.258 +03:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:8080/api/v1/auth/refresh-token - null null
2025-11-16 16:56:14.259 +03:00 [INF] CORS policy execution successful.
2025-11-16 16:56:14.259 +03:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:8080/api/v1/auth/refresh-token - 204 null null 1.5785ms
2025-11-16 16:56:14.262 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:8080/api/v1/auth/refresh-token - null 0
2025-11-16 16:56:14.262 +03:00 [INF] CORS policy execution successful.
2025-11-16 16:56:14.300 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 16:56:14.300 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication)'
2025-11-16 16:56:14.301 +03:00 [INF] Route matched with {action = "RefreshToken", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.user.AuthResponse] RefreshToken() on controller MappyApplication.Controllers.AuthController (MappyApplication).
2025-11-16 16:56:14.304 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__refreshToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`RefreshToken` = @__refreshToken_0
LIMIT 2
2025-11-16 16:56:14.307 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`FirstName`, `a`.`LastName`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`
FROM `AspNetUsers` AS `a`
WHERE `a`.`Id` = @__p_0
LIMIT 1
2025-11-16 16:56:14.311 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']

        UPDATE TOKENS
        SET Revoked = true, Expired = true
        WHERE UserId = @p0
          AND DeviceId = @p1
          AND Revoked = false
          AND Expired = false
2025-11-16 16:56:14.352 +03:00 [INF] Executed DbCommand (5ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a0`.`Name`
FROM `AspNetUserRoles` AS `a`
INNER JOIN `AspNetRoles` AS `a0` ON `a`.`RoleId` = `a0`.`Id`
WHERE `a`.`UserId` = @__userId_0
2025-11-16 16:56:14.357 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ClaimType`, `a`.`ClaimValue`, `a`.`UserId`
FROM `AspNetUserClaims` AS `a`
WHERE `a`.`UserId` = @__user_Id_0
2025-11-16 16:56:14.362 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a0`.`Name`
FROM `AspNetUserRoles` AS `a`
INNER JOIN `AspNetRoles` AS `a0` ON `a`.`RoleId` = `a0`.`Id`
WHERE `a`.`UserId` = @__userId_0
2025-11-16 16:56:14.364 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ClaimType`, `a`.`ClaimValue`, `a`.`UserId`
FROM `AspNetUserClaims` AS `a`
WHERE `a`.`UserId` = @__user_Id_0
2025-11-16 16:56:14.369 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (DbType = DateTime), @p2='?' (Size = 4000), @p3='?' (DbType = Boolean), @p4='?' (Size = 4000), @p5='?' (DbType = Boolean), @p6='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO `Tokens` (`AccessToken`, `CreatedAt`, `DeviceId`, `Expired`, `RefreshToken`, `Revoked`, `UserId`)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6);
SELECT `Id`
FROM `Tokens`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();
2025-11-16 16:56:14.370 +03:00 [INF] Added Token MappyApplication.Data.Token
2025-11-16 16:56:14.373 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessFailedCount`, `t`.`ConcurrencyStamp`, `t`.`Email`, `t`.`EmailConfirmed`, `t`.`FirstName`, `t`.`LastName`, `t`.`LockoutEnabled`, `t`.`LockoutEnd`, `t`.`NormalizedEmail`, `t`.`NormalizedUserName`, `t`.`PasswordHash`, `t`.`PhoneNumber`, `t`.`PhoneNumberConfirmed`, `t`.`SecurityStamp`, `t`.`TwoFactorEnabled`, `t`.`UserName`, `w`.`Id`, `w`.`Cadence`, `w`.`CityName`, `w`.`Coords`, `w`.`Date`, `w`.`Distance`, `w`.`Duration`, `w`.`Emoji`, `w`.`Pace`, `w`.`Type`, `w`.`UserId`, `c`.`Id`, `c`.`CityName`, `c`.`Country`, `c`.`Date`, `c`.`Emoji`, `c`.`Lat`, `c`.`Lng`, `c`.`Notes`, `c`.`UserId`
FROM (
    SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`FirstName`, `a`.`LastName`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`
    FROM `AspNetUsers` AS `a`
    WHERE `a`.`Id` = @__user_Id_0
    LIMIT 2
) AS `t`
LEFT JOIN `Workouts` AS `w` ON `t`.`Id` = `w`.`UserId`
LEFT JOIN `Cities` AS `c` ON `t`.`Id` = `c`.`UserId`
ORDER BY `t`.`Id`, `w`.`Id`
2025-11-16 16:56:14.374 +03:00 [INF] Executing ObjectResult, writing value of type 'MappyApplication.Models.user.AuthResponse'.
2025-11-16 16:56:14.374 +03:00 [INF] Executed action MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication) in 73.1324ms
2025-11-16 16:56:14.374 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication)'
2025-11-16 16:56:14.374 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:8080/api/v1/auth/refresh-token - 200 null application/json; charset=utf-8 111.8667ms
2025-11-16 16:56:27.491 +03:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:8080/api/v1/auth/refresh-token - null null
2025-11-16 16:56:27.495 +03:00 [INF] CORS policy execution successful.
2025-11-16 16:56:27.499 +03:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:8080/api/v1/auth/refresh-token - 204 null null 11.0674ms
2025-11-16 16:56:27.501 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:8080/api/v1/auth/refresh-token - null 0
2025-11-16 16:56:27.502 +03:00 [INF] CORS policy execution successful.
2025-11-16 16:56:27.505 +03:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenMalformedException: IDX14100: JWT is not well formed, there are no dots (.).
The token needs to be in JWS or JWE Compact Serialization Format. (JWS): 'EncodedHeader.EndcodedPayload.EncodedSignature'. (JWE): 'EncodedProtectedHeader.EncodedEncryptedKey.EncodedInitializationVector.EncodedCiphertext.EncodedAuthenticationTag'.
 ---> Microsoft.IdentityModel.Tokens.SecurityTokenMalformedException: IDX14100: JWT is not well formed, there are no dots (.).
The token needs to be in JWS or JWE Compact Serialization Format. (JWS): 'EncodedHeader.EndcodedPayload.EncodedSignature'. (JWE): 'EncodedProtectedHeader.EncodedEncryptedKey.EncodedInitializationVector.EncodedCiphertext.EncodedAuthenticationTag'.
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebToken.ReadToken(String encodedJson)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebToken..ctor(String jwtEncodedString)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ReadToken(String token, TokenValidationParameters validationParameters)
   --- End of inner exception stack trace ---
2025-11-16 16:56:27.507 +03:00 [INF] Bearer was not authenticated. Failure message: IDX14100: JWT is not well formed, there are no dots (.).
The token needs to be in JWS or JWE Compact Serialization Format. (JWS): 'EncodedHeader.EndcodedPayload.EncodedSignature'. (JWE): 'EncodedProtectedHeader.EncodedEncryptedKey.EncodedInitializationVector.EncodedCiphertext.EncodedAuthenticationTag'.
2025-11-16 16:56:27.510 +03:00 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2025-11-16 16:56:27.511 +03:00 [INF] AuthenticationScheme: Bearer was challenged.
2025-11-16 16:56:27.511 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:8080/api/v1/auth/refresh-token - 401 null application/json; charset=utf-8 9.8609ms
2025-11-16 16:56:29.167 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:8080/api/v1/auth/refresh-token - null 0
2025-11-16 16:56:29.170 +03:00 [INF] CORS policy execution successful.
2025-11-16 16:56:29.171 +03:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenMalformedException: IDX14100: JWT is not well formed, there are no dots (.).
The token needs to be in JWS or JWE Compact Serialization Format. (JWS): 'EncodedHeader.EndcodedPayload.EncodedSignature'. (JWE): 'EncodedProtectedHeader.EncodedEncryptedKey.EncodedInitializationVector.EncodedCiphertext.EncodedAuthenticationTag'.
 ---> Microsoft.IdentityModel.Tokens.SecurityTokenMalformedException: IDX14100: JWT is not well formed, there are no dots (.).
The token needs to be in JWS or JWE Compact Serialization Format. (JWS): 'EncodedHeader.EndcodedPayload.EncodedSignature'. (JWE): 'EncodedProtectedHeader.EncodedEncryptedKey.EncodedInitializationVector.EncodedCiphertext.EncodedAuthenticationTag'.
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebToken.ReadToken(String encodedJson)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebToken..ctor(String jwtEncodedString)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ReadToken(String token, TokenValidationParameters validationParameters)
   --- End of inner exception stack trace ---
2025-11-16 16:56:29.173 +03:00 [INF] Bearer was not authenticated. Failure message: IDX14100: JWT is not well formed, there are no dots (.).
The token needs to be in JWS or JWE Compact Serialization Format. (JWS): 'EncodedHeader.EndcodedPayload.EncodedSignature'. (JWE): 'EncodedProtectedHeader.EncodedEncryptedKey.EncodedInitializationVector.EncodedCiphertext.EncodedAuthenticationTag'.
2025-11-16 16:56:29.177 +03:00 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2025-11-16 16:56:29.181 +03:00 [INF] AuthenticationScheme: Bearer was challenged.
2025-11-16 16:56:29.181 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:8080/api/v1/auth/refresh-token - 401 null application/json; charset=utf-8 14.0017ms
2025-11-16 16:56:32.674 +03:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:8080/api/v1/auth/refresh-token - null null
2025-11-16 16:56:32.678 +03:00 [INF] CORS policy execution successful.
2025-11-16 16:56:32.680 +03:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:8080/api/v1/auth/refresh-token - 204 null null 6.8882ms
2025-11-16 16:56:32.687 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:8080/api/v1/auth/refresh-token - null 0
2025-11-16 16:56:32.688 +03:00 [INF] CORS policy execution successful.
2025-11-16 16:56:32.689 +03:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenMalformedException: IDX14100: JWT is not well formed, there are no dots (.).
The token needs to be in JWS or JWE Compact Serialization Format. (JWS): 'EncodedHeader.EndcodedPayload.EncodedSignature'. (JWE): 'EncodedProtectedHeader.EncodedEncryptedKey.EncodedInitializationVector.EncodedCiphertext.EncodedAuthenticationTag'.
 ---> Microsoft.IdentityModel.Tokens.SecurityTokenMalformedException: IDX14100: JWT is not well formed, there are no dots (.).
The token needs to be in JWS or JWE Compact Serialization Format. (JWS): 'EncodedHeader.EndcodedPayload.EncodedSignature'. (JWE): 'EncodedProtectedHeader.EncodedEncryptedKey.EncodedInitializationVector.EncodedCiphertext.EncodedAuthenticationTag'.
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebToken.ReadToken(String encodedJson)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebToken..ctor(String jwtEncodedString)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ReadToken(String token, TokenValidationParameters validationParameters)
   --- End of inner exception stack trace ---
2025-11-16 16:56:32.691 +03:00 [INF] Bearer was not authenticated. Failure message: IDX14100: JWT is not well formed, there are no dots (.).
The token needs to be in JWS or JWE Compact Serialization Format. (JWS): 'EncodedHeader.EndcodedPayload.EncodedSignature'. (JWE): 'EncodedProtectedHeader.EncodedEncryptedKey.EncodedInitializationVector.EncodedCiphertext.EncodedAuthenticationTag'.
2025-11-16 16:56:32.692 +03:00 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2025-11-16 16:56:32.695 +03:00 [INF] AuthenticationScheme: Bearer was challenged.
2025-11-16 16:56:32.695 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:8080/api/v1/auth/refresh-token - 401 null application/json; charset=utf-8 11.9359ms
2025-11-16 16:56:40.531 +03:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:8080/api/v1/auth/refresh-token - null null
2025-11-16 16:56:40.536 +03:00 [INF] CORS policy execution successful.
2025-11-16 16:56:40.536 +03:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:8080/api/v1/auth/refresh-token - 204 null null 5.6173ms
2025-11-16 16:56:40.539 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:8080/api/v1/auth/refresh-token - null 0
2025-11-16 16:56:40.539 +03:00 [INF] CORS policy execution successful.
2025-11-16 16:56:40.547 +03:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenMalformedException: IDX14100: JWT is not well formed, there are no dots (.).
The token needs to be in JWS or JWE Compact Serialization Format. (JWS): 'EncodedHeader.EndcodedPayload.EncodedSignature'. (JWE): 'EncodedProtectedHeader.EncodedEncryptedKey.EncodedInitializationVector.EncodedCiphertext.EncodedAuthenticationTag'.
 ---> Microsoft.IdentityModel.Tokens.SecurityTokenMalformedException: IDX14100: JWT is not well formed, there are no dots (.).
The token needs to be in JWS or JWE Compact Serialization Format. (JWS): 'EncodedHeader.EndcodedPayload.EncodedSignature'. (JWE): 'EncodedProtectedHeader.EncodedEncryptedKey.EncodedInitializationVector.EncodedCiphertext.EncodedAuthenticationTag'.
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebToken.ReadToken(String encodedJson)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebToken..ctor(String jwtEncodedString)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ReadToken(String token, TokenValidationParameters validationParameters)
   --- End of inner exception stack trace ---
2025-11-16 16:56:40.548 +03:00 [INF] Bearer was not authenticated. Failure message: IDX14100: JWT is not well formed, there are no dots (.).
The token needs to be in JWS or JWE Compact Serialization Format. (JWS): 'EncodedHeader.EndcodedPayload.EncodedSignature'. (JWE): 'EncodedProtectedHeader.EncodedEncryptedKey.EncodedInitializationVector.EncodedCiphertext.EncodedAuthenticationTag'.
2025-11-16 16:56:40.549 +03:00 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2025-11-16 16:56:40.550 +03:00 [INF] AuthenticationScheme: Bearer was challenged.
2025-11-16 16:56:40.550 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:8080/api/v1/auth/refresh-token - 401 null application/json; charset=utf-8 11.0663ms
2025-11-16 16:56:45.830 +03:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:8080/api/v1/auth/login - null null
2025-11-16 16:56:45.830 +03:00 [INF] CORS policy execution successful.
2025-11-16 16:56:45.831 +03:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:8080/api/v1/auth/login - 204 null null 0.5385ms
2025-11-16 16:56:45.832 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:8080/api/v1/auth/login - application/json 51
2025-11-16 16:56:45.833 +03:00 [INF] CORS policy execution successful.
2025-11-16 16:56:45.834 +03:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenMalformedException: IDX14100: JWT is not well formed, there are no dots (.).
The token needs to be in JWS or JWE Compact Serialization Format. (JWS): 'EncodedHeader.EndcodedPayload.EncodedSignature'. (JWE): 'EncodedProtectedHeader.EncodedEncryptedKey.EncodedInitializationVector.EncodedCiphertext.EncodedAuthenticationTag'.
 ---> Microsoft.IdentityModel.Tokens.SecurityTokenMalformedException: IDX14100: JWT is not well formed, there are no dots (.).
The token needs to be in JWS or JWE Compact Serialization Format. (JWS): 'EncodedHeader.EndcodedPayload.EncodedSignature'. (JWE): 'EncodedProtectedHeader.EncodedEncryptedKey.EncodedInitializationVector.EncodedCiphertext.EncodedAuthenticationTag'.
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebToken.ReadToken(String encodedJson)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebToken..ctor(String jwtEncodedString)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ReadToken(String token, TokenValidationParameters validationParameters)
   --- End of inner exception stack trace ---
2025-11-16 16:56:45.834 +03:00 [INF] Bearer was not authenticated. Failure message: IDX14100: JWT is not well formed, there are no dots (.).
The token needs to be in JWS or JWE Compact Serialization Format. (JWS): 'EncodedHeader.EndcodedPayload.EncodedSignature'. (JWE): 'EncodedProtectedHeader.EncodedEncryptedKey.EncodedInitializationVector.EncodedCiphertext.EncodedAuthenticationTag'.
2025-11-16 16:56:45.835 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.AuthController.Login (MappyApplication)'
2025-11-16 16:56:45.836 +03:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.user.AuthResponse] Login(MappyApplication.Models.user.AuthLogin) on controller MappyApplication.Controllers.AuthController (MappyApplication).
2025-11-16 16:56:45.865 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`FirstName`, `a`.`LastName`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`
FROM `AspNetUsers` AS `a`
WHERE `a`.`NormalizedEmail` = @__normalizedEmail_0
LIMIT 2
2025-11-16 16:56:45.919 +03:00 [INF] Executed DbCommand (5ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']

        UPDATE TOKENS
        SET Revoked = true, Expired = true
        WHERE UserId = @p0
          AND DeviceId = @p1
          AND Revoked = false
          AND Expired = false
2025-11-16 16:56:45.921 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a0`.`Name`
FROM `AspNetUserRoles` AS `a`
INNER JOIN `AspNetRoles` AS `a0` ON `a`.`RoleId` = `a0`.`Id`
WHERE `a`.`UserId` = @__userId_0
2025-11-16 16:56:45.922 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ClaimType`, `a`.`ClaimValue`, `a`.`UserId`
FROM `AspNetUserClaims` AS `a`
WHERE `a`.`UserId` = @__user_Id_0
2025-11-16 16:56:45.923 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a0`.`Name`
FROM `AspNetUserRoles` AS `a`
INNER JOIN `AspNetRoles` AS `a0` ON `a`.`RoleId` = `a0`.`Id`
WHERE `a`.`UserId` = @__userId_0
2025-11-16 16:56:45.924 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ClaimType`, `a`.`ClaimValue`, `a`.`UserId`
FROM `AspNetUserClaims` AS `a`
WHERE `a`.`UserId` = @__user_Id_0
2025-11-16 16:56:45.929 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (DbType = DateTime), @p2='?' (Size = 4000), @p3='?' (DbType = Boolean), @p4='?' (Size = 4000), @p5='?' (DbType = Boolean), @p6='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO `Tokens` (`AccessToken`, `CreatedAt`, `DeviceId`, `Expired`, `RefreshToken`, `Revoked`, `UserId`)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6);
SELECT `Id`
FROM `Tokens`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();
2025-11-16 16:56:45.930 +03:00 [INF] Added Token MappyApplication.Data.Token
2025-11-16 16:56:45.933 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessFailedCount`, `t`.`ConcurrencyStamp`, `t`.`Email`, `t`.`EmailConfirmed`, `t`.`FirstName`, `t`.`LastName`, `t`.`LockoutEnabled`, `t`.`LockoutEnd`, `t`.`NormalizedEmail`, `t`.`NormalizedUserName`, `t`.`PasswordHash`, `t`.`PhoneNumber`, `t`.`PhoneNumberConfirmed`, `t`.`SecurityStamp`, `t`.`TwoFactorEnabled`, `t`.`UserName`, `w`.`Id`, `w`.`Cadence`, `w`.`CityName`, `w`.`Coords`, `w`.`Date`, `w`.`Distance`, `w`.`Duration`, `w`.`Emoji`, `w`.`Pace`, `w`.`Type`, `w`.`UserId`, `c`.`Id`, `c`.`CityName`, `c`.`Country`, `c`.`Date`, `c`.`Emoji`, `c`.`Lat`, `c`.`Lng`, `c`.`Notes`, `c`.`UserId`
FROM (
    SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`FirstName`, `a`.`LastName`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`
    FROM `AspNetUsers` AS `a`
    WHERE `a`.`Id` = @__user_Id_0
    LIMIT 2
) AS `t`
LEFT JOIN `Workouts` AS `w` ON `t`.`Id` = `w`.`UserId`
LEFT JOIN `Cities` AS `c` ON `t`.`Id` = `c`.`UserId`
ORDER BY `t`.`Id`, `w`.`Id`
2025-11-16 16:56:45.933 +03:00 [INF] Executing ObjectResult, writing value of type 'MappyApplication.Models.user.AuthResponse'.
2025-11-16 16:56:45.933 +03:00 [INF] Executed action MappyApplication.Controllers.AuthController.Login (MappyApplication) in 97.6035ms
2025-11-16 16:56:45.933 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.AuthController.Login (MappyApplication)'
2025-11-16 16:56:45.933 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:8080/api/v1/auth/login - 200 null application/json; charset=utf-8 101.0378ms
2025-11-16 16:56:47.905 +03:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:8080/api/v1/auth/refresh-token - null null
2025-11-16 16:56:47.909 +03:00 [INF] CORS policy execution successful.
2025-11-16 16:56:47.909 +03:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:8080/api/v1/auth/refresh-token - 204 null null 4.2332ms
2025-11-16 16:56:47.911 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:8080/api/v1/auth/refresh-token - null 0
2025-11-16 16:56:47.912 +03:00 [INF] CORS policy execution successful.
2025-11-16 16:56:47.941 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 16:56:47.943 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication)'
2025-11-16 16:56:47.943 +03:00 [INF] Route matched with {action = "RefreshToken", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.user.AuthResponse] RefreshToken() on controller MappyApplication.Controllers.AuthController (MappyApplication).
2025-11-16 16:56:47.946 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__refreshToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`RefreshToken` = @__refreshToken_0
LIMIT 2
2025-11-16 16:56:47.956 +03:00 [INF] Executed DbCommand (6ms) [Parameters=[@__p_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`FirstName`, `a`.`LastName`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`
FROM `AspNetUsers` AS `a`
WHERE `a`.`Id` = @__p_0
LIMIT 1
2025-11-16 16:56:47.961 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']

        UPDATE TOKENS
        SET Revoked = true, Expired = true
        WHERE UserId = @p0
          AND DeviceId = @p1
          AND Revoked = false
          AND Expired = false
2025-11-16 16:56:48.018 +03:00 [INF] Executed DbCommand (4ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a0`.`Name`
FROM `AspNetUserRoles` AS `a`
INNER JOIN `AspNetRoles` AS `a0` ON `a`.`RoleId` = `a0`.`Id`
WHERE `a`.`UserId` = @__userId_0
2025-11-16 16:56:48.021 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ClaimType`, `a`.`ClaimValue`, `a`.`UserId`
FROM `AspNetUserClaims` AS `a`
WHERE `a`.`UserId` = @__user_Id_0
2025-11-16 16:56:48.031 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a0`.`Name`
FROM `AspNetUserRoles` AS `a`
INNER JOIN `AspNetRoles` AS `a0` ON `a`.`RoleId` = `a0`.`Id`
WHERE `a`.`UserId` = @__userId_0
2025-11-16 16:56:48.032 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ClaimType`, `a`.`ClaimValue`, `a`.`UserId`
FROM `AspNetUserClaims` AS `a`
WHERE `a`.`UserId` = @__user_Id_0
2025-11-16 16:56:48.037 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (DbType = DateTime), @p2='?' (Size = 4000), @p3='?' (DbType = Boolean), @p4='?' (Size = 4000), @p5='?' (DbType = Boolean), @p6='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO `Tokens` (`AccessToken`, `CreatedAt`, `DeviceId`, `Expired`, `RefreshToken`, `Revoked`, `UserId`)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6);
SELECT `Id`
FROM `Tokens`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();
2025-11-16 16:56:48.037 +03:00 [INF] Added Token MappyApplication.Data.Token
2025-11-16 16:56:48.041 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessFailedCount`, `t`.`ConcurrencyStamp`, `t`.`Email`, `t`.`EmailConfirmed`, `t`.`FirstName`, `t`.`LastName`, `t`.`LockoutEnabled`, `t`.`LockoutEnd`, `t`.`NormalizedEmail`, `t`.`NormalizedUserName`, `t`.`PasswordHash`, `t`.`PhoneNumber`, `t`.`PhoneNumberConfirmed`, `t`.`SecurityStamp`, `t`.`TwoFactorEnabled`, `t`.`UserName`, `w`.`Id`, `w`.`Cadence`, `w`.`CityName`, `w`.`Coords`, `w`.`Date`, `w`.`Distance`, `w`.`Duration`, `w`.`Emoji`, `w`.`Pace`, `w`.`Type`, `w`.`UserId`, `c`.`Id`, `c`.`CityName`, `c`.`Country`, `c`.`Date`, `c`.`Emoji`, `c`.`Lat`, `c`.`Lng`, `c`.`Notes`, `c`.`UserId`
FROM (
    SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`FirstName`, `a`.`LastName`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`
    FROM `AspNetUsers` AS `a`
    WHERE `a`.`Id` = @__user_Id_0
    LIMIT 2
) AS `t`
LEFT JOIN `Workouts` AS `w` ON `t`.`Id` = `w`.`UserId`
LEFT JOIN `Cities` AS `c` ON `t`.`Id` = `c`.`UserId`
ORDER BY `t`.`Id`, `w`.`Id`
2025-11-16 16:56:48.042 +03:00 [INF] Executing ObjectResult, writing value of type 'MappyApplication.Models.user.AuthResponse'.
2025-11-16 16:56:48.043 +03:00 [INF] Executed action MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication) in 99.018ms
2025-11-16 16:56:48.043 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication)'
2025-11-16 16:56:48.043 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:8080/api/v1/auth/refresh-token - 200 null application/json; charset=utf-8 131.3206ms
2025-11-16 16:57:04.792 +03:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:8080/api/v1/auth/refresh-token - null null
2025-11-16 16:57:04.802 +03:00 [INF] CORS policy execution successful.
2025-11-16 16:57:04.803 +03:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:8080/api/v1/auth/refresh-token - 204 null null 13.7122ms
2025-11-16 16:57:04.805 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:8080/api/v1/auth/refresh-token - null 0
2025-11-16 16:57:04.805 +03:00 [INF] CORS policy execution successful.
2025-11-16 16:57:04.806 +03:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenMalformedException: IDX14100: JWT is not well formed, there are no dots (.).
The token needs to be in JWS or JWE Compact Serialization Format. (JWS): 'EncodedHeader.EndcodedPayload.EncodedSignature'. (JWE): 'EncodedProtectedHeader.EncodedEncryptedKey.EncodedInitializationVector.EncodedCiphertext.EncodedAuthenticationTag'.
 ---> Microsoft.IdentityModel.Tokens.SecurityTokenMalformedException: IDX14100: JWT is not well formed, there are no dots (.).
The token needs to be in JWS or JWE Compact Serialization Format. (JWS): 'EncodedHeader.EndcodedPayload.EncodedSignature'. (JWE): 'EncodedProtectedHeader.EncodedEncryptedKey.EncodedInitializationVector.EncodedCiphertext.EncodedAuthenticationTag'.
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebToken.ReadToken(String encodedJson)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebToken..ctor(String jwtEncodedString)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ReadToken(String token, TokenValidationParameters validationParameters)
   --- End of inner exception stack trace ---
2025-11-16 16:57:04.809 +03:00 [INF] Bearer was not authenticated. Failure message: IDX14100: JWT is not well formed, there are no dots (.).
The token needs to be in JWS or JWE Compact Serialization Format. (JWS): 'EncodedHeader.EndcodedPayload.EncodedSignature'. (JWE): 'EncodedProtectedHeader.EncodedEncryptedKey.EncodedInitializationVector.EncodedCiphertext.EncodedAuthenticationTag'.
2025-11-16 16:57:04.812 +03:00 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2025-11-16 16:57:04.816 +03:00 [INF] AuthenticationScheme: Bearer was challenged.
2025-11-16 16:57:04.816 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:8080/api/v1/auth/refresh-token - 401 null application/json; charset=utf-8 10.744ms
2025-11-16 16:57:06.828 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:8080/api/v1/auth/refresh-token - null 0
2025-11-16 16:57:06.830 +03:00 [INF] CORS policy execution successful.
2025-11-16 16:57:06.833 +03:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenMalformedException: IDX14100: JWT is not well formed, there are no dots (.).
The token needs to be in JWS or JWE Compact Serialization Format. (JWS): 'EncodedHeader.EndcodedPayload.EncodedSignature'. (JWE): 'EncodedProtectedHeader.EncodedEncryptedKey.EncodedInitializationVector.EncodedCiphertext.EncodedAuthenticationTag'.
 ---> Microsoft.IdentityModel.Tokens.SecurityTokenMalformedException: IDX14100: JWT is not well formed, there are no dots (.).
The token needs to be in JWS or JWE Compact Serialization Format. (JWS): 'EncodedHeader.EndcodedPayload.EncodedSignature'. (JWE): 'EncodedProtectedHeader.EncodedEncryptedKey.EncodedInitializationVector.EncodedCiphertext.EncodedAuthenticationTag'.
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebToken.ReadToken(String encodedJson)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebToken..ctor(String jwtEncodedString)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ReadToken(String token, TokenValidationParameters validationParameters)
   --- End of inner exception stack trace ---
2025-11-16 16:57:06.833 +03:00 [INF] Bearer was not authenticated. Failure message: IDX14100: JWT is not well formed, there are no dots (.).
The token needs to be in JWS or JWE Compact Serialization Format. (JWS): 'EncodedHeader.EndcodedPayload.EncodedSignature'. (JWE): 'EncodedProtectedHeader.EncodedEncryptedKey.EncodedInitializationVector.EncodedCiphertext.EncodedAuthenticationTag'.
2025-11-16 16:57:06.840 +03:00 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2025-11-16 16:57:06.842 +03:00 [INF] AuthenticationScheme: Bearer was challenged.
2025-11-16 16:57:06.842 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:8080/api/v1/auth/refresh-token - 401 null application/json; charset=utf-8 13.7894ms
2025-11-16 16:57:10.999 +03:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:8080/api/v1/auth/refresh-token - null null
2025-11-16 16:57:11.001 +03:00 [INF] CORS policy execution successful.
2025-11-16 16:57:11.005 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:8080/api/v1/auth/refresh-token - null 0
2025-11-16 16:57:11.005 +03:00 [INF] CORS policy execution successful.
2025-11-16 16:57:11.001 +03:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:8080/api/v1/auth/refresh-token - 204 null null 2.7695ms
2025-11-16 16:57:11.008 +03:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenMalformedException: IDX14100: JWT is not well formed, there are no dots (.).
The token needs to be in JWS or JWE Compact Serialization Format. (JWS): 'EncodedHeader.EndcodedPayload.EncodedSignature'. (JWE): 'EncodedProtectedHeader.EncodedEncryptedKey.EncodedInitializationVector.EncodedCiphertext.EncodedAuthenticationTag'.
 ---> Microsoft.IdentityModel.Tokens.SecurityTokenMalformedException: IDX14100: JWT is not well formed, there are no dots (.).
The token needs to be in JWS or JWE Compact Serialization Format. (JWS): 'EncodedHeader.EndcodedPayload.EncodedSignature'. (JWE): 'EncodedProtectedHeader.EncodedEncryptedKey.EncodedInitializationVector.EncodedCiphertext.EncodedAuthenticationTag'.
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebToken.ReadToken(String encodedJson)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebToken..ctor(String jwtEncodedString)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ReadToken(String token, TokenValidationParameters validationParameters)
   --- End of inner exception stack trace ---
2025-11-16 16:57:11.010 +03:00 [INF] Bearer was not authenticated. Failure message: IDX14100: JWT is not well formed, there are no dots (.).
The token needs to be in JWS or JWE Compact Serialization Format. (JWS): 'EncodedHeader.EndcodedPayload.EncodedSignature'. (JWE): 'EncodedProtectedHeader.EncodedEncryptedKey.EncodedInitializationVector.EncodedCiphertext.EncodedAuthenticationTag'.
2025-11-16 16:57:11.024 +03:00 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2025-11-16 16:57:11.028 +03:00 [INF] AuthenticationScheme: Bearer was challenged.
2025-11-16 16:57:11.028 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:8080/api/v1/auth/refresh-token - 401 null application/json; charset=utf-8 23.3514ms
2025-11-16 16:57:20.144 +03:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:8080/api/v1/auth/refresh-token - null null
2025-11-16 16:57:20.148 +03:00 [INF] CORS policy execution successful.
2025-11-16 16:57:20.150 +03:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:8080/api/v1/auth/refresh-token - 204 null null 7.0712ms
2025-11-16 16:57:20.151 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:8080/api/v1/auth/refresh-token - null 0
2025-11-16 16:57:20.153 +03:00 [INF] CORS policy execution successful.
2025-11-16 16:57:20.155 +03:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenMalformedException: IDX14100: JWT is not well formed, there are no dots (.).
The token needs to be in JWS or JWE Compact Serialization Format. (JWS): 'EncodedHeader.EndcodedPayload.EncodedSignature'. (JWE): 'EncodedProtectedHeader.EncodedEncryptedKey.EncodedInitializationVector.EncodedCiphertext.EncodedAuthenticationTag'.
 ---> Microsoft.IdentityModel.Tokens.SecurityTokenMalformedException: IDX14100: JWT is not well formed, there are no dots (.).
The token needs to be in JWS or JWE Compact Serialization Format. (JWS): 'EncodedHeader.EndcodedPayload.EncodedSignature'. (JWE): 'EncodedProtectedHeader.EncodedEncryptedKey.EncodedInitializationVector.EncodedCiphertext.EncodedAuthenticationTag'.
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebToken.ReadToken(String encodedJson)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebToken..ctor(String jwtEncodedString)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ReadToken(String token, TokenValidationParameters validationParameters)
   --- End of inner exception stack trace ---
2025-11-16 16:57:20.156 +03:00 [INF] Bearer was not authenticated. Failure message: IDX14100: JWT is not well formed, there are no dots (.).
The token needs to be in JWS or JWE Compact Serialization Format. (JWS): 'EncodedHeader.EndcodedPayload.EncodedSignature'. (JWE): 'EncodedProtectedHeader.EncodedEncryptedKey.EncodedInitializationVector.EncodedCiphertext.EncodedAuthenticationTag'.
2025-11-16 16:57:20.162 +03:00 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2025-11-16 16:57:20.163 +03:00 [INF] AuthenticationScheme: Bearer was challenged.
2025-11-16 16:57:20.163 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:8080/api/v1/auth/refresh-token - 401 null application/json; charset=utf-8 11.9917ms
2025-11-16 16:57:23.842 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:8080/api/v1/auth/refresh-token - null 0
2025-11-16 16:57:23.846 +03:00 [INF] CORS policy execution successful.
2025-11-16 16:57:23.870 +03:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenMalformedException: IDX14100: JWT is not well formed, there are no dots (.).
The token needs to be in JWS or JWE Compact Serialization Format. (JWS): 'EncodedHeader.EndcodedPayload.EncodedSignature'. (JWE): 'EncodedProtectedHeader.EncodedEncryptedKey.EncodedInitializationVector.EncodedCiphertext.EncodedAuthenticationTag'.
 ---> Microsoft.IdentityModel.Tokens.SecurityTokenMalformedException: IDX14100: JWT is not well formed, there are no dots (.).
The token needs to be in JWS or JWE Compact Serialization Format. (JWS): 'EncodedHeader.EndcodedPayload.EncodedSignature'. (JWE): 'EncodedProtectedHeader.EncodedEncryptedKey.EncodedInitializationVector.EncodedCiphertext.EncodedAuthenticationTag'.
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebToken.ReadToken(String encodedJson)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebToken..ctor(String jwtEncodedString)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ReadToken(String token, TokenValidationParameters validationParameters)
   --- End of inner exception stack trace ---
2025-11-16 16:57:23.876 +03:00 [INF] Bearer was not authenticated. Failure message: IDX14100: JWT is not well formed, there are no dots (.).
The token needs to be in JWS or JWE Compact Serialization Format. (JWS): 'EncodedHeader.EndcodedPayload.EncodedSignature'. (JWE): 'EncodedProtectedHeader.EncodedEncryptedKey.EncodedInitializationVector.EncodedCiphertext.EncodedAuthenticationTag'.
2025-11-16 16:57:23.880 +03:00 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2025-11-16 16:57:23.884 +03:00 [INF] AuthenticationScheme: Bearer was challenged.
2025-11-16 16:57:23.884 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:8080/api/v1/auth/refresh-token - 401 null application/json; charset=utf-8 43.2085ms
2025-11-16 16:57:37.015 +03:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:8080/api/v1/auth/login - null null
2025-11-16 16:57:37.016 +03:00 [INF] CORS policy execution successful.
2025-11-16 16:57:37.017 +03:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:8080/api/v1/auth/login - 204 null null 1.8498ms
2025-11-16 16:57:37.019 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:8080/api/v1/auth/login - application/json 51
2025-11-16 16:57:37.019 +03:00 [INF] CORS policy execution successful.
2025-11-16 16:57:37.020 +03:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenMalformedException: IDX14100: JWT is not well formed, there are no dots (.).
The token needs to be in JWS or JWE Compact Serialization Format. (JWS): 'EncodedHeader.EndcodedPayload.EncodedSignature'. (JWE): 'EncodedProtectedHeader.EncodedEncryptedKey.EncodedInitializationVector.EncodedCiphertext.EncodedAuthenticationTag'.
 ---> Microsoft.IdentityModel.Tokens.SecurityTokenMalformedException: IDX14100: JWT is not well formed, there are no dots (.).
The token needs to be in JWS or JWE Compact Serialization Format. (JWS): 'EncodedHeader.EndcodedPayload.EncodedSignature'. (JWE): 'EncodedProtectedHeader.EncodedEncryptedKey.EncodedInitializationVector.EncodedCiphertext.EncodedAuthenticationTag'.
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebToken.ReadToken(String encodedJson)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebToken..ctor(String jwtEncodedString)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ReadToken(String token, TokenValidationParameters validationParameters)
   --- End of inner exception stack trace ---
2025-11-16 16:57:37.020 +03:00 [INF] Bearer was not authenticated. Failure message: IDX14100: JWT is not well formed, there are no dots (.).
The token needs to be in JWS or JWE Compact Serialization Format. (JWS): 'EncodedHeader.EndcodedPayload.EncodedSignature'. (JWE): 'EncodedProtectedHeader.EncodedEncryptedKey.EncodedInitializationVector.EncodedCiphertext.EncodedAuthenticationTag'.
2025-11-16 16:57:37.021 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.AuthController.Login (MappyApplication)'
2025-11-16 16:57:37.022 +03:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.user.AuthResponse] Login(MappyApplication.Models.user.AuthLogin) on controller MappyApplication.Controllers.AuthController (MappyApplication).
2025-11-16 16:57:37.056 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`FirstName`, `a`.`LastName`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`
FROM `AspNetUsers` AS `a`
WHERE `a`.`NormalizedEmail` = @__normalizedEmail_0
LIMIT 2
2025-11-16 16:57:37.112 +03:00 [INF] Executed DbCommand (5ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']

        UPDATE TOKENS
        SET Revoked = true, Expired = true
        WHERE UserId = @p0
          AND DeviceId = @p1
          AND Revoked = false
          AND Expired = false
2025-11-16 16:57:37.113 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a0`.`Name`
FROM `AspNetUserRoles` AS `a`
INNER JOIN `AspNetRoles` AS `a0` ON `a`.`RoleId` = `a0`.`Id`
WHERE `a`.`UserId` = @__userId_0
2025-11-16 16:57:37.115 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ClaimType`, `a`.`ClaimValue`, `a`.`UserId`
FROM `AspNetUserClaims` AS `a`
WHERE `a`.`UserId` = @__user_Id_0
2025-11-16 16:57:37.116 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a0`.`Name`
FROM `AspNetUserRoles` AS `a`
INNER JOIN `AspNetRoles` AS `a0` ON `a`.`RoleId` = `a0`.`Id`
WHERE `a`.`UserId` = @__userId_0
2025-11-16 16:57:37.116 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ClaimType`, `a`.`ClaimValue`, `a`.`UserId`
FROM `AspNetUserClaims` AS `a`
WHERE `a`.`UserId` = @__user_Id_0
2025-11-16 16:57:37.120 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (DbType = DateTime), @p2='?' (Size = 4000), @p3='?' (DbType = Boolean), @p4='?' (Size = 4000), @p5='?' (DbType = Boolean), @p6='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO `Tokens` (`AccessToken`, `CreatedAt`, `DeviceId`, `Expired`, `RefreshToken`, `Revoked`, `UserId`)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6);
SELECT `Id`
FROM `Tokens`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();
2025-11-16 16:57:37.122 +03:00 [INF] Added Token MappyApplication.Data.Token
2025-11-16 16:57:37.124 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessFailedCount`, `t`.`ConcurrencyStamp`, `t`.`Email`, `t`.`EmailConfirmed`, `t`.`FirstName`, `t`.`LastName`, `t`.`LockoutEnabled`, `t`.`LockoutEnd`, `t`.`NormalizedEmail`, `t`.`NormalizedUserName`, `t`.`PasswordHash`, `t`.`PhoneNumber`, `t`.`PhoneNumberConfirmed`, `t`.`SecurityStamp`, `t`.`TwoFactorEnabled`, `t`.`UserName`, `w`.`Id`, `w`.`Cadence`, `w`.`CityName`, `w`.`Coords`, `w`.`Date`, `w`.`Distance`, `w`.`Duration`, `w`.`Emoji`, `w`.`Pace`, `w`.`Type`, `w`.`UserId`, `c`.`Id`, `c`.`CityName`, `c`.`Country`, `c`.`Date`, `c`.`Emoji`, `c`.`Lat`, `c`.`Lng`, `c`.`Notes`, `c`.`UserId`
FROM (
    SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`FirstName`, `a`.`LastName`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`
    FROM `AspNetUsers` AS `a`
    WHERE `a`.`Id` = @__user_Id_0
    LIMIT 2
) AS `t`
LEFT JOIN `Workouts` AS `w` ON `t`.`Id` = `w`.`UserId`
LEFT JOIN `Cities` AS `c` ON `t`.`Id` = `c`.`UserId`
ORDER BY `t`.`Id`, `w`.`Id`
2025-11-16 16:57:37.125 +03:00 [INF] Executing ObjectResult, writing value of type 'MappyApplication.Models.user.AuthResponse'.
2025-11-16 16:57:37.125 +03:00 [INF] Executed action MappyApplication.Controllers.AuthController.Login (MappyApplication) in 103.5973ms
2025-11-16 16:57:37.125 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.AuthController.Login (MappyApplication)'
2025-11-16 16:57:37.125 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:8080/api/v1/auth/login - 200 null application/json; charset=utf-8 106.7915ms
2025-11-16 16:57:44.169 +03:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:8080/api/v1/auth/refresh-token - null null
2025-11-16 16:57:44.173 +03:00 [INF] CORS policy execution successful.
2025-11-16 16:57:44.173 +03:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:8080/api/v1/auth/refresh-token - 204 null null 5.0559ms
2025-11-16 16:57:44.175 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:8080/api/v1/auth/refresh-token - null 0
2025-11-16 16:57:44.177 +03:00 [INF] CORS policy execution successful.
2025-11-16 16:57:44.227 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 16:57:44.235 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication)'
2025-11-16 16:57:44.236 +03:00 [INF] Route matched with {action = "RefreshToken", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.user.AuthResponse] RefreshToken() on controller MappyApplication.Controllers.AuthController (MappyApplication).
2025-11-16 16:57:44.239 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__refreshToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`RefreshToken` = @__refreshToken_0
LIMIT 2
2025-11-16 16:57:44.257 +03:00 [INF] Executed DbCommand (13ms) [Parameters=[@__p_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`FirstName`, `a`.`LastName`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`
FROM `AspNetUsers` AS `a`
WHERE `a`.`Id` = @__p_0
LIMIT 1
2025-11-16 16:57:44.266 +03:00 [INF] Executed DbCommand (4ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']

        UPDATE TOKENS
        SET Revoked = true, Expired = true
        WHERE UserId = @p0
          AND DeviceId = @p1
          AND Revoked = false
          AND Expired = false
2025-11-16 16:57:44.278 +03:00 [INF] Executed DbCommand (4ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a0`.`Name`
FROM `AspNetUserRoles` AS `a`
INNER JOIN `AspNetRoles` AS `a0` ON `a`.`RoleId` = `a0`.`Id`
WHERE `a`.`UserId` = @__userId_0
2025-11-16 16:57:44.281 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ClaimType`, `a`.`ClaimValue`, `a`.`UserId`
FROM `AspNetUserClaims` AS `a`
WHERE `a`.`UserId` = @__user_Id_0
2025-11-16 16:57:44.283 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a0`.`Name`
FROM `AspNetUserRoles` AS `a`
INNER JOIN `AspNetRoles` AS `a0` ON `a`.`RoleId` = `a0`.`Id`
WHERE `a`.`UserId` = @__userId_0
2025-11-16 16:57:44.283 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ClaimType`, `a`.`ClaimValue`, `a`.`UserId`
FROM `AspNetUserClaims` AS `a`
WHERE `a`.`UserId` = @__user_Id_0
2025-11-16 16:57:44.291 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (DbType = DateTime), @p2='?' (Size = 4000), @p3='?' (DbType = Boolean), @p4='?' (Size = 4000), @p5='?' (DbType = Boolean), @p6='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO `Tokens` (`AccessToken`, `CreatedAt`, `DeviceId`, `Expired`, `RefreshToken`, `Revoked`, `UserId`)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6);
SELECT `Id`
FROM `Tokens`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();
2025-11-16 16:57:44.292 +03:00 [INF] Added Token MappyApplication.Data.Token
2025-11-16 16:57:44.294 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessFailedCount`, `t`.`ConcurrencyStamp`, `t`.`Email`, `t`.`EmailConfirmed`, `t`.`FirstName`, `t`.`LastName`, `t`.`LockoutEnabled`, `t`.`LockoutEnd`, `t`.`NormalizedEmail`, `t`.`NormalizedUserName`, `t`.`PasswordHash`, `t`.`PhoneNumber`, `t`.`PhoneNumberConfirmed`, `t`.`SecurityStamp`, `t`.`TwoFactorEnabled`, `t`.`UserName`, `w`.`Id`, `w`.`Cadence`, `w`.`CityName`, `w`.`Coords`, `w`.`Date`, `w`.`Distance`, `w`.`Duration`, `w`.`Emoji`, `w`.`Pace`, `w`.`Type`, `w`.`UserId`, `c`.`Id`, `c`.`CityName`, `c`.`Country`, `c`.`Date`, `c`.`Emoji`, `c`.`Lat`, `c`.`Lng`, `c`.`Notes`, `c`.`UserId`
FROM (
    SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`FirstName`, `a`.`LastName`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`
    FROM `AspNetUsers` AS `a`
    WHERE `a`.`Id` = @__user_Id_0
    LIMIT 2
) AS `t`
LEFT JOIN `Workouts` AS `w` ON `t`.`Id` = `w`.`UserId`
LEFT JOIN `Cities` AS `c` ON `t`.`Id` = `c`.`UserId`
ORDER BY `t`.`Id`, `w`.`Id`
2025-11-16 16:57:44.294 +03:00 [INF] Executing ObjectResult, writing value of type 'MappyApplication.Models.user.AuthResponse'.
2025-11-16 16:57:44.296 +03:00 [INF] Executed action MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication) in 60.3215ms
2025-11-16 16:57:44.296 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication)'
2025-11-16 16:57:44.297 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:8080/api/v1/auth/refresh-token - 200 null application/json; charset=utf-8 122.2497ms
2025-11-16 16:57:52.642 +03:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:8080/api/v1/auth/refresh-token - null null
2025-11-16 16:57:52.653 +03:00 [INF] CORS policy execution successful.
2025-11-16 16:57:52.654 +03:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:8080/api/v1/auth/refresh-token - 204 null null 11.6018ms
2025-11-16 16:57:52.656 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:8080/api/v1/auth/refresh-token - null 0
2025-11-16 16:57:52.656 +03:00 [INF] CORS policy execution successful.
2025-11-16 16:57:52.721 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 16:57:52.722 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication)'
2025-11-16 16:57:52.722 +03:00 [INF] Route matched with {action = "RefreshToken", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.user.AuthResponse] RefreshToken() on controller MappyApplication.Controllers.AuthController (MappyApplication).
2025-11-16 16:57:52.726 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__refreshToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`RefreshToken` = @__refreshToken_0
LIMIT 2
2025-11-16 16:57:52.765 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`FirstName`, `a`.`LastName`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`
FROM `AspNetUsers` AS `a`
WHERE `a`.`Id` = @__p_0
LIMIT 1
2025-11-16 16:57:52.774 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']

        UPDATE TOKENS
        SET Revoked = true, Expired = true
        WHERE UserId = @p0
          AND DeviceId = @p1
          AND Revoked = false
          AND Expired = false
2025-11-16 16:57:52.777 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a0`.`Name`
FROM `AspNetUserRoles` AS `a`
INNER JOIN `AspNetRoles` AS `a0` ON `a`.`RoleId` = `a0`.`Id`
WHERE `a`.`UserId` = @__userId_0
2025-11-16 16:57:52.781 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ClaimType`, `a`.`ClaimValue`, `a`.`UserId`
FROM `AspNetUserClaims` AS `a`
WHERE `a`.`UserId` = @__user_Id_0
2025-11-16 16:57:52.783 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a0`.`Name`
FROM `AspNetUserRoles` AS `a`
INNER JOIN `AspNetRoles` AS `a0` ON `a`.`RoleId` = `a0`.`Id`
WHERE `a`.`UserId` = @__userId_0
2025-11-16 16:57:52.787 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ClaimType`, `a`.`ClaimValue`, `a`.`UserId`
FROM `AspNetUserClaims` AS `a`
WHERE `a`.`UserId` = @__user_Id_0
2025-11-16 16:57:52.798 +03:00 [INF] Executed DbCommand (4ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (DbType = DateTime), @p2='?' (Size = 4000), @p3='?' (DbType = Boolean), @p4='?' (Size = 4000), @p5='?' (DbType = Boolean), @p6='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO `Tokens` (`AccessToken`, `CreatedAt`, `DeviceId`, `Expired`, `RefreshToken`, `Revoked`, `UserId`)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6);
SELECT `Id`
FROM `Tokens`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();
2025-11-16 16:57:52.799 +03:00 [INF] Added Token MappyApplication.Data.Token
2025-11-16 16:57:52.803 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessFailedCount`, `t`.`ConcurrencyStamp`, `t`.`Email`, `t`.`EmailConfirmed`, `t`.`FirstName`, `t`.`LastName`, `t`.`LockoutEnabled`, `t`.`LockoutEnd`, `t`.`NormalizedEmail`, `t`.`NormalizedUserName`, `t`.`PasswordHash`, `t`.`PhoneNumber`, `t`.`PhoneNumberConfirmed`, `t`.`SecurityStamp`, `t`.`TwoFactorEnabled`, `t`.`UserName`, `w`.`Id`, `w`.`Cadence`, `w`.`CityName`, `w`.`Coords`, `w`.`Date`, `w`.`Distance`, `w`.`Duration`, `w`.`Emoji`, `w`.`Pace`, `w`.`Type`, `w`.`UserId`, `c`.`Id`, `c`.`CityName`, `c`.`Country`, `c`.`Date`, `c`.`Emoji`, `c`.`Lat`, `c`.`Lng`, `c`.`Notes`, `c`.`UserId`
FROM (
    SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`FirstName`, `a`.`LastName`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`
    FROM `AspNetUsers` AS `a`
    WHERE `a`.`Id` = @__user_Id_0
    LIMIT 2
) AS `t`
LEFT JOIN `Workouts` AS `w` ON `t`.`Id` = `w`.`UserId`
LEFT JOIN `Cities` AS `c` ON `t`.`Id` = `c`.`UserId`
ORDER BY `t`.`Id`, `w`.`Id`
2025-11-16 16:57:52.803 +03:00 [INF] Executing ObjectResult, writing value of type 'MappyApplication.Models.user.AuthResponse'.
2025-11-16 16:57:52.804 +03:00 [INF] Executed action MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication) in 81.3183ms
2025-11-16 16:57:52.804 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication)'
2025-11-16 16:57:52.804 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:8080/api/v1/auth/refresh-token - 200 null application/json; charset=utf-8 148.2804ms
2025-11-16 16:57:53.697 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:8080/api/v1/auth/refresh-token - null 0
2025-11-16 16:57:53.697 +03:00 [INF] CORS policy execution successful.
2025-11-16 16:57:53.726 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 16:57:53.727 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication)'
2025-11-16 16:57:53.728 +03:00 [INF] Route matched with {action = "RefreshToken", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.user.AuthResponse] RefreshToken() on controller MappyApplication.Controllers.AuthController (MappyApplication).
2025-11-16 16:57:53.731 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__refreshToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`RefreshToken` = @__refreshToken_0
LIMIT 2
2025-11-16 16:57:53.734 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`FirstName`, `a`.`LastName`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`
FROM `AspNetUsers` AS `a`
WHERE `a`.`Id` = @__p_0
LIMIT 1
2025-11-16 16:57:53.736 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']

        UPDATE TOKENS
        SET Revoked = true, Expired = true
        WHERE UserId = @p0
          AND DeviceId = @p1
          AND Revoked = false
          AND Expired = false
2025-11-16 16:57:53.738 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a0`.`Name`
FROM `AspNetUserRoles` AS `a`
INNER JOIN `AspNetRoles` AS `a0` ON `a`.`RoleId` = `a0`.`Id`
WHERE `a`.`UserId` = @__userId_0
2025-11-16 16:57:53.739 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ClaimType`, `a`.`ClaimValue`, `a`.`UserId`
FROM `AspNetUserClaims` AS `a`
WHERE `a`.`UserId` = @__user_Id_0
2025-11-16 16:57:53.741 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a0`.`Name`
FROM `AspNetUserRoles` AS `a`
INNER JOIN `AspNetRoles` AS `a0` ON `a`.`RoleId` = `a0`.`Id`
WHERE `a`.`UserId` = @__userId_0
2025-11-16 16:57:53.742 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ClaimType`, `a`.`ClaimValue`, `a`.`UserId`
FROM `AspNetUserClaims` AS `a`
WHERE `a`.`UserId` = @__user_Id_0
2025-11-16 16:57:53.745 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (DbType = DateTime), @p2='?' (Size = 4000), @p3='?' (DbType = Boolean), @p4='?' (Size = 4000), @p5='?' (DbType = Boolean), @p6='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO `Tokens` (`AccessToken`, `CreatedAt`, `DeviceId`, `Expired`, `RefreshToken`, `Revoked`, `UserId`)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6);
SELECT `Id`
FROM `Tokens`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();
2025-11-16 16:57:53.746 +03:00 [INF] Added Token MappyApplication.Data.Token
2025-11-16 16:57:53.747 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessFailedCount`, `t`.`ConcurrencyStamp`, `t`.`Email`, `t`.`EmailConfirmed`, `t`.`FirstName`, `t`.`LastName`, `t`.`LockoutEnabled`, `t`.`LockoutEnd`, `t`.`NormalizedEmail`, `t`.`NormalizedUserName`, `t`.`PasswordHash`, `t`.`PhoneNumber`, `t`.`PhoneNumberConfirmed`, `t`.`SecurityStamp`, `t`.`TwoFactorEnabled`, `t`.`UserName`, `w`.`Id`, `w`.`Cadence`, `w`.`CityName`, `w`.`Coords`, `w`.`Date`, `w`.`Distance`, `w`.`Duration`, `w`.`Emoji`, `w`.`Pace`, `w`.`Type`, `w`.`UserId`, `c`.`Id`, `c`.`CityName`, `c`.`Country`, `c`.`Date`, `c`.`Emoji`, `c`.`Lat`, `c`.`Lng`, `c`.`Notes`, `c`.`UserId`
FROM (
    SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`FirstName`, `a`.`LastName`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`
    FROM `AspNetUsers` AS `a`
    WHERE `a`.`Id` = @__user_Id_0
    LIMIT 2
) AS `t`
LEFT JOIN `Workouts` AS `w` ON `t`.`Id` = `w`.`UserId`
LEFT JOIN `Cities` AS `c` ON `t`.`Id` = `c`.`UserId`
ORDER BY `t`.`Id`, `w`.`Id`
2025-11-16 16:57:53.748 +03:00 [INF] Executing ObjectResult, writing value of type 'MappyApplication.Models.user.AuthResponse'.
2025-11-16 16:57:53.748 +03:00 [INF] Executed action MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication) in 18.7588ms
2025-11-16 16:57:53.748 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication)'
2025-11-16 16:57:53.748 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:8080/api/v1/auth/refresh-token - 200 null application/json; charset=utf-8 50.623ms
2025-11-16 16:57:54.558 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:8080/api/v1/auth/refresh-token - null 0
2025-11-16 16:57:54.559 +03:00 [INF] CORS policy execution successful.
2025-11-16 16:57:54.591 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 16:57:54.591 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication)'
2025-11-16 16:57:54.591 +03:00 [INF] Route matched with {action = "RefreshToken", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.user.AuthResponse] RefreshToken() on controller MappyApplication.Controllers.AuthController (MappyApplication).
2025-11-16 16:57:54.595 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__refreshToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`RefreshToken` = @__refreshToken_0
LIMIT 2
2025-11-16 16:57:54.597 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`FirstName`, `a`.`LastName`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`
FROM `AspNetUsers` AS `a`
WHERE `a`.`Id` = @__p_0
LIMIT 1
2025-11-16 16:57:54.601 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']

        UPDATE TOKENS
        SET Revoked = true, Expired = true
        WHERE UserId = @p0
          AND DeviceId = @p1
          AND Revoked = false
          AND Expired = false
2025-11-16 16:57:54.604 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a0`.`Name`
FROM `AspNetUserRoles` AS `a`
INNER JOIN `AspNetRoles` AS `a0` ON `a`.`RoleId` = `a0`.`Id`
WHERE `a`.`UserId` = @__userId_0
2025-11-16 16:57:54.607 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ClaimType`, `a`.`ClaimValue`, `a`.`UserId`
FROM `AspNetUserClaims` AS `a`
WHERE `a`.`UserId` = @__user_Id_0
2025-11-16 16:57:54.609 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a0`.`Name`
FROM `AspNetUserRoles` AS `a`
INNER JOIN `AspNetRoles` AS `a0` ON `a`.`RoleId` = `a0`.`Id`
WHERE `a`.`UserId` = @__userId_0
2025-11-16 16:57:54.612 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ClaimType`, `a`.`ClaimValue`, `a`.`UserId`
FROM `AspNetUserClaims` AS `a`
WHERE `a`.`UserId` = @__user_Id_0
2025-11-16 16:57:54.618 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (DbType = DateTime), @p2='?' (Size = 4000), @p3='?' (DbType = Boolean), @p4='?' (Size = 4000), @p5='?' (DbType = Boolean), @p6='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO `Tokens` (`AccessToken`, `CreatedAt`, `DeviceId`, `Expired`, `RefreshToken`, `Revoked`, `UserId`)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6);
SELECT `Id`
FROM `Tokens`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();
2025-11-16 16:57:54.620 +03:00 [INF] Added Token MappyApplication.Data.Token
2025-11-16 16:57:54.622 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessFailedCount`, `t`.`ConcurrencyStamp`, `t`.`Email`, `t`.`EmailConfirmed`, `t`.`FirstName`, `t`.`LastName`, `t`.`LockoutEnabled`, `t`.`LockoutEnd`, `t`.`NormalizedEmail`, `t`.`NormalizedUserName`, `t`.`PasswordHash`, `t`.`PhoneNumber`, `t`.`PhoneNumberConfirmed`, `t`.`SecurityStamp`, `t`.`TwoFactorEnabled`, `t`.`UserName`, `w`.`Id`, `w`.`Cadence`, `w`.`CityName`, `w`.`Coords`, `w`.`Date`, `w`.`Distance`, `w`.`Duration`, `w`.`Emoji`, `w`.`Pace`, `w`.`Type`, `w`.`UserId`, `c`.`Id`, `c`.`CityName`, `c`.`Country`, `c`.`Date`, `c`.`Emoji`, `c`.`Lat`, `c`.`Lng`, `c`.`Notes`, `c`.`UserId`
FROM (
    SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`FirstName`, `a`.`LastName`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`
    FROM `AspNetUsers` AS `a`
    WHERE `a`.`Id` = @__user_Id_0
    LIMIT 2
) AS `t`
LEFT JOIN `Workouts` AS `w` ON `t`.`Id` = `w`.`UserId`
LEFT JOIN `Cities` AS `c` ON `t`.`Id` = `c`.`UserId`
ORDER BY `t`.`Id`, `w`.`Id`
2025-11-16 16:57:54.624 +03:00 [INF] Executing ObjectResult, writing value of type 'MappyApplication.Models.user.AuthResponse'.
2025-11-16 16:57:54.624 +03:00 [INF] Executed action MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication) in 32.9589ms
2025-11-16 16:57:54.624 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication)'
2025-11-16 16:57:54.624 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:8080/api/v1/auth/refresh-token - 200 null application/json; charset=utf-8 65.9859ms
2025-11-16 16:57:55.313 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:8080/api/v1/auth/refresh-token - null 0
2025-11-16 16:57:55.313 +03:00 [INF] CORS policy execution successful.
2025-11-16 16:57:55.376 +03:00 [INF] Executed DbCommand (8ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 16:57:55.387 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication)'
2025-11-16 16:57:55.389 +03:00 [INF] Route matched with {action = "RefreshToken", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.user.AuthResponse] RefreshToken() on controller MappyApplication.Controllers.AuthController (MappyApplication).
2025-11-16 16:57:55.394 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[@__refreshToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`RefreshToken` = @__refreshToken_0
LIMIT 2
2025-11-16 16:57:55.399 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__p_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`FirstName`, `a`.`LastName`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`
FROM `AspNetUsers` AS `a`
WHERE `a`.`Id` = @__p_0
LIMIT 1
2025-11-16 16:57:55.410 +03:00 [INF] Executed DbCommand (4ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']

        UPDATE TOKENS
        SET Revoked = true, Expired = true
        WHERE UserId = @p0
          AND DeviceId = @p1
          AND Revoked = false
          AND Expired = false
2025-11-16 16:57:55.425 +03:00 [INF] Executed DbCommand (6ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a0`.`Name`
FROM `AspNetUserRoles` AS `a`
INNER JOIN `AspNetRoles` AS `a0` ON `a`.`RoleId` = `a0`.`Id`
WHERE `a`.`UserId` = @__userId_0
2025-11-16 16:57:55.429 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ClaimType`, `a`.`ClaimValue`, `a`.`UserId`
FROM `AspNetUserClaims` AS `a`
WHERE `a`.`UserId` = @__user_Id_0
2025-11-16 16:57:55.432 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a0`.`Name`
FROM `AspNetUserRoles` AS `a`
INNER JOIN `AspNetRoles` AS `a0` ON `a`.`RoleId` = `a0`.`Id`
WHERE `a`.`UserId` = @__userId_0
2025-11-16 16:57:55.433 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ClaimType`, `a`.`ClaimValue`, `a`.`UserId`
FROM `AspNetUserClaims` AS `a`
WHERE `a`.`UserId` = @__user_Id_0
2025-11-16 16:57:55.439 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (DbType = DateTime), @p2='?' (Size = 4000), @p3='?' (DbType = Boolean), @p4='?' (Size = 4000), @p5='?' (DbType = Boolean), @p6='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO `Tokens` (`AccessToken`, `CreatedAt`, `DeviceId`, `Expired`, `RefreshToken`, `Revoked`, `UserId`)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6);
SELECT `Id`
FROM `Tokens`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();
2025-11-16 16:57:55.442 +03:00 [INF] Added Token MappyApplication.Data.Token
2025-11-16 16:57:55.447 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessFailedCount`, `t`.`ConcurrencyStamp`, `t`.`Email`, `t`.`EmailConfirmed`, `t`.`FirstName`, `t`.`LastName`, `t`.`LockoutEnabled`, `t`.`LockoutEnd`, `t`.`NormalizedEmail`, `t`.`NormalizedUserName`, `t`.`PasswordHash`, `t`.`PhoneNumber`, `t`.`PhoneNumberConfirmed`, `t`.`SecurityStamp`, `t`.`TwoFactorEnabled`, `t`.`UserName`, `w`.`Id`, `w`.`Cadence`, `w`.`CityName`, `w`.`Coords`, `w`.`Date`, `w`.`Distance`, `w`.`Duration`, `w`.`Emoji`, `w`.`Pace`, `w`.`Type`, `w`.`UserId`, `c`.`Id`, `c`.`CityName`, `c`.`Country`, `c`.`Date`, `c`.`Emoji`, `c`.`Lat`, `c`.`Lng`, `c`.`Notes`, `c`.`UserId`
FROM (
    SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`FirstName`, `a`.`LastName`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`
    FROM `AspNetUsers` AS `a`
    WHERE `a`.`Id` = @__user_Id_0
    LIMIT 2
) AS `t`
LEFT JOIN `Workouts` AS `w` ON `t`.`Id` = `w`.`UserId`
LEFT JOIN `Cities` AS `c` ON `t`.`Id` = `c`.`UserId`
ORDER BY `t`.`Id`, `w`.`Id`
2025-11-16 16:57:55.449 +03:00 [INF] Executing ObjectResult, writing value of type 'MappyApplication.Models.user.AuthResponse'.
2025-11-16 16:57:55.450 +03:00 [INF] Executed action MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication) in 61.2902ms
2025-11-16 16:57:55.450 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication)'
2025-11-16 16:57:55.450 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:8080/api/v1/auth/refresh-token - 200 null application/json; charset=utf-8 138.0342ms
2025-11-16 16:57:56.051 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:8080/api/v1/auth/refresh-token - null 0
2025-11-16 16:57:56.051 +03:00 [INF] CORS policy execution successful.
2025-11-16 16:57:56.087 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 16:57:56.089 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication)'
2025-11-16 16:57:56.091 +03:00 [INF] Route matched with {action = "RefreshToken", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.user.AuthResponse] RefreshToken() on controller MappyApplication.Controllers.AuthController (MappyApplication).
2025-11-16 16:57:56.096 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__refreshToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`RefreshToken` = @__refreshToken_0
LIMIT 2
2025-11-16 16:57:56.098 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`FirstName`, `a`.`LastName`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`
FROM `AspNetUsers` AS `a`
WHERE `a`.`Id` = @__p_0
LIMIT 1
2025-11-16 16:57:56.100 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']

        UPDATE TOKENS
        SET Revoked = true, Expired = true
        WHERE UserId = @p0
          AND DeviceId = @p1
          AND Revoked = false
          AND Expired = false
2025-11-16 16:57:56.102 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a0`.`Name`
FROM `AspNetUserRoles` AS `a`
INNER JOIN `AspNetRoles` AS `a0` ON `a`.`RoleId` = `a0`.`Id`
WHERE `a`.`UserId` = @__userId_0
2025-11-16 16:57:56.103 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ClaimType`, `a`.`ClaimValue`, `a`.`UserId`
FROM `AspNetUserClaims` AS `a`
WHERE `a`.`UserId` = @__user_Id_0
2025-11-16 16:57:56.104 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a0`.`Name`
FROM `AspNetUserRoles` AS `a`
INNER JOIN `AspNetRoles` AS `a0` ON `a`.`RoleId` = `a0`.`Id`
WHERE `a`.`UserId` = @__userId_0
2025-11-16 16:57:56.107 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ClaimType`, `a`.`ClaimValue`, `a`.`UserId`
FROM `AspNetUserClaims` AS `a`
WHERE `a`.`UserId` = @__user_Id_0
2025-11-16 16:57:56.113 +03:00 [INF] Executed DbCommand (4ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (DbType = DateTime), @p2='?' (Size = 4000), @p3='?' (DbType = Boolean), @p4='?' (Size = 4000), @p5='?' (DbType = Boolean), @p6='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO `Tokens` (`AccessToken`, `CreatedAt`, `DeviceId`, `Expired`, `RefreshToken`, `Revoked`, `UserId`)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6);
SELECT `Id`
FROM `Tokens`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();
2025-11-16 16:57:56.114 +03:00 [INF] Added Token MappyApplication.Data.Token
2025-11-16 16:57:56.115 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessFailedCount`, `t`.`ConcurrencyStamp`, `t`.`Email`, `t`.`EmailConfirmed`, `t`.`FirstName`, `t`.`LastName`, `t`.`LockoutEnabled`, `t`.`LockoutEnd`, `t`.`NormalizedEmail`, `t`.`NormalizedUserName`, `t`.`PasswordHash`, `t`.`PhoneNumber`, `t`.`PhoneNumberConfirmed`, `t`.`SecurityStamp`, `t`.`TwoFactorEnabled`, `t`.`UserName`, `w`.`Id`, `w`.`Cadence`, `w`.`CityName`, `w`.`Coords`, `w`.`Date`, `w`.`Distance`, `w`.`Duration`, `w`.`Emoji`, `w`.`Pace`, `w`.`Type`, `w`.`UserId`, `c`.`Id`, `c`.`CityName`, `c`.`Country`, `c`.`Date`, `c`.`Emoji`, `c`.`Lat`, `c`.`Lng`, `c`.`Notes`, `c`.`UserId`
FROM (
    SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`FirstName`, `a`.`LastName`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`
    FROM `AspNetUsers` AS `a`
    WHERE `a`.`Id` = @__user_Id_0
    LIMIT 2
) AS `t`
LEFT JOIN `Workouts` AS `w` ON `t`.`Id` = `w`.`UserId`
LEFT JOIN `Cities` AS `c` ON `t`.`Id` = `c`.`UserId`
ORDER BY `t`.`Id`, `w`.`Id`
2025-11-16 16:57:56.115 +03:00 [INF] Executing ObjectResult, writing value of type 'MappyApplication.Models.user.AuthResponse'.
2025-11-16 16:57:56.118 +03:00 [INF] Executed action MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication) in 26.3365ms
2025-11-16 16:57:56.118 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication)'
2025-11-16 16:57:56.118 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:8080/api/v1/auth/refresh-token - 200 null application/json; charset=utf-8 67.5177ms
2025-11-16 16:57:57.259 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:8080/api/v1/auth/refresh-token - null 0
2025-11-16 16:57:57.260 +03:00 [INF] CORS policy execution successful.
2025-11-16 16:57:57.331 +03:00 [INF] Executed DbCommand (5ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 16:57:57.332 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication)'
2025-11-16 16:57:57.333 +03:00 [INF] Route matched with {action = "RefreshToken", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.user.AuthResponse] RefreshToken() on controller MappyApplication.Controllers.AuthController (MappyApplication).
2025-11-16 16:57:57.334 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__refreshToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`RefreshToken` = @__refreshToken_0
LIMIT 2
2025-11-16 16:57:57.340 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`FirstName`, `a`.`LastName`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`
FROM `AspNetUsers` AS `a`
WHERE `a`.`Id` = @__p_0
LIMIT 1
2025-11-16 16:57:57.345 +03:00 [INF] Executed DbCommand (4ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']

        UPDATE TOKENS
        SET Revoked = true, Expired = true
        WHERE UserId = @p0
          AND DeviceId = @p1
          AND Revoked = false
          AND Expired = false
2025-11-16 16:57:57.349 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a0`.`Name`
FROM `AspNetUserRoles` AS `a`
INNER JOIN `AspNetRoles` AS `a0` ON `a`.`RoleId` = `a0`.`Id`
WHERE `a`.`UserId` = @__userId_0
2025-11-16 16:57:57.353 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ClaimType`, `a`.`ClaimValue`, `a`.`UserId`
FROM `AspNetUserClaims` AS `a`
WHERE `a`.`UserId` = @__user_Id_0
2025-11-16 16:57:57.357 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a0`.`Name`
FROM `AspNetUserRoles` AS `a`
INNER JOIN `AspNetRoles` AS `a0` ON `a`.`RoleId` = `a0`.`Id`
WHERE `a`.`UserId` = @__userId_0
2025-11-16 16:57:57.358 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ClaimType`, `a`.`ClaimValue`, `a`.`UserId`
FROM `AspNetUserClaims` AS `a`
WHERE `a`.`UserId` = @__user_Id_0
2025-11-16 16:57:57.374 +03:00 [INF] Executed DbCommand (8ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (DbType = DateTime), @p2='?' (Size = 4000), @p3='?' (DbType = Boolean), @p4='?' (Size = 4000), @p5='?' (DbType = Boolean), @p6='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO `Tokens` (`AccessToken`, `CreatedAt`, `DeviceId`, `Expired`, `RefreshToken`, `Revoked`, `UserId`)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6);
SELECT `Id`
FROM `Tokens`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();
2025-11-16 16:57:57.377 +03:00 [INF] Added Token MappyApplication.Data.Token
2025-11-16 16:57:57.382 +03:00 [INF] Executed DbCommand (4ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessFailedCount`, `t`.`ConcurrencyStamp`, `t`.`Email`, `t`.`EmailConfirmed`, `t`.`FirstName`, `t`.`LastName`, `t`.`LockoutEnabled`, `t`.`LockoutEnd`, `t`.`NormalizedEmail`, `t`.`NormalizedUserName`, `t`.`PasswordHash`, `t`.`PhoneNumber`, `t`.`PhoneNumberConfirmed`, `t`.`SecurityStamp`, `t`.`TwoFactorEnabled`, `t`.`UserName`, `w`.`Id`, `w`.`Cadence`, `w`.`CityName`, `w`.`Coords`, `w`.`Date`, `w`.`Distance`, `w`.`Duration`, `w`.`Emoji`, `w`.`Pace`, `w`.`Type`, `w`.`UserId`, `c`.`Id`, `c`.`CityName`, `c`.`Country`, `c`.`Date`, `c`.`Emoji`, `c`.`Lat`, `c`.`Lng`, `c`.`Notes`, `c`.`UserId`
FROM (
    SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`FirstName`, `a`.`LastName`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`
    FROM `AspNetUsers` AS `a`
    WHERE `a`.`Id` = @__user_Id_0
    LIMIT 2
) AS `t`
LEFT JOIN `Workouts` AS `w` ON `t`.`Id` = `w`.`UserId`
LEFT JOIN `Cities` AS `c` ON `t`.`Id` = `c`.`UserId`
ORDER BY `t`.`Id`, `w`.`Id`
2025-11-16 16:57:57.383 +03:00 [INF] Executing ObjectResult, writing value of type 'MappyApplication.Models.user.AuthResponse'.
2025-11-16 16:57:57.384 +03:00 [INF] Executed action MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication) in 50.6525ms
2025-11-16 16:57:57.384 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication)'
2025-11-16 16:57:57.384 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:8080/api/v1/auth/refresh-token - 200 null application/json; charset=utf-8 125.0032ms
2025-11-16 16:58:11.645 +03:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:8080/api/v1/auth/refresh-token - null null
2025-11-16 16:58:11.648 +03:00 [INF] CORS policy execution successful.
2025-11-16 16:58:11.649 +03:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:8080/api/v1/auth/refresh-token - 204 null null 5.011ms
2025-11-16 16:58:11.651 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:8080/api/v1/auth/refresh-token - null 0
2025-11-16 16:58:11.651 +03:00 [INF] CORS policy execution successful.
2025-11-16 16:58:11.724 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 16:58:11.725 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication)'
2025-11-16 16:58:11.726 +03:00 [INF] Route matched with {action = "RefreshToken", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.user.AuthResponse] RefreshToken() on controller MappyApplication.Controllers.AuthController (MappyApplication).
2025-11-16 16:58:11.729 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__refreshToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`RefreshToken` = @__refreshToken_0
LIMIT 2
2025-11-16 16:58:11.739 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__p_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`FirstName`, `a`.`LastName`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`
FROM `AspNetUsers` AS `a`
WHERE `a`.`Id` = @__p_0
LIMIT 1
2025-11-16 16:58:11.746 +03:00 [INF] Executed DbCommand (5ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']

        UPDATE TOKENS
        SET Revoked = true, Expired = true
        WHERE UserId = @p0
          AND DeviceId = @p1
          AND Revoked = false
          AND Expired = false
2025-11-16 16:58:11.753 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a0`.`Name`
FROM `AspNetUserRoles` AS `a`
INNER JOIN `AspNetRoles` AS `a0` ON `a`.`RoleId` = `a0`.`Id`
WHERE `a`.`UserId` = @__userId_0
2025-11-16 16:58:11.761 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ClaimType`, `a`.`ClaimValue`, `a`.`UserId`
FROM `AspNetUserClaims` AS `a`
WHERE `a`.`UserId` = @__user_Id_0
2025-11-16 16:58:11.763 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a0`.`Name`
FROM `AspNetUserRoles` AS `a`
INNER JOIN `AspNetRoles` AS `a0` ON `a`.`RoleId` = `a0`.`Id`
WHERE `a`.`UserId` = @__userId_0
2025-11-16 16:58:11.765 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ClaimType`, `a`.`ClaimValue`, `a`.`UserId`
FROM `AspNetUserClaims` AS `a`
WHERE `a`.`UserId` = @__user_Id_0
2025-11-16 16:58:11.776 +03:00 [INF] Executed DbCommand (4ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (DbType = DateTime), @p2='?' (Size = 4000), @p3='?' (DbType = Boolean), @p4='?' (Size = 4000), @p5='?' (DbType = Boolean), @p6='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO `Tokens` (`AccessToken`, `CreatedAt`, `DeviceId`, `Expired`, `RefreshToken`, `Revoked`, `UserId`)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6);
SELECT `Id`
FROM `Tokens`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();
2025-11-16 16:58:11.778 +03:00 [INF] Added Token MappyApplication.Data.Token
2025-11-16 16:58:11.781 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessFailedCount`, `t`.`ConcurrencyStamp`, `t`.`Email`, `t`.`EmailConfirmed`, `t`.`FirstName`, `t`.`LastName`, `t`.`LockoutEnabled`, `t`.`LockoutEnd`, `t`.`NormalizedEmail`, `t`.`NormalizedUserName`, `t`.`PasswordHash`, `t`.`PhoneNumber`, `t`.`PhoneNumberConfirmed`, `t`.`SecurityStamp`, `t`.`TwoFactorEnabled`, `t`.`UserName`, `w`.`Id`, `w`.`Cadence`, `w`.`CityName`, `w`.`Coords`, `w`.`Date`, `w`.`Distance`, `w`.`Duration`, `w`.`Emoji`, `w`.`Pace`, `w`.`Type`, `w`.`UserId`, `c`.`Id`, `c`.`CityName`, `c`.`Country`, `c`.`Date`, `c`.`Emoji`, `c`.`Lat`, `c`.`Lng`, `c`.`Notes`, `c`.`UserId`
FROM (
    SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`FirstName`, `a`.`LastName`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`
    FROM `AspNetUsers` AS `a`
    WHERE `a`.`Id` = @__user_Id_0
    LIMIT 2
) AS `t`
LEFT JOIN `Workouts` AS `w` ON `t`.`Id` = `w`.`UserId`
LEFT JOIN `Cities` AS `c` ON `t`.`Id` = `c`.`UserId`
ORDER BY `t`.`Id`, `w`.`Id`
2025-11-16 16:58:11.781 +03:00 [INF] Executing ObjectResult, writing value of type 'MappyApplication.Models.user.AuthResponse'.
2025-11-16 16:58:11.782 +03:00 [INF] Executed action MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication) in 56.0661ms
2025-11-16 16:58:11.782 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication)'
2025-11-16 16:58:11.782 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:8080/api/v1/auth/refresh-token - 200 null application/json; charset=utf-8 131.3161ms
2025-11-16 16:58:12.330 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:8080/api/v1/auth/refresh-token - null 0
2025-11-16 16:58:12.330 +03:00 [INF] CORS policy execution successful.
2025-11-16 16:58:12.363 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 16:58:12.365 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication)'
2025-11-16 16:58:12.365 +03:00 [INF] Route matched with {action = "RefreshToken", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.user.AuthResponse] RefreshToken() on controller MappyApplication.Controllers.AuthController (MappyApplication).
2025-11-16 16:58:12.369 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__refreshToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`RefreshToken` = @__refreshToken_0
LIMIT 2
2025-11-16 16:58:12.373 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`FirstName`, `a`.`LastName`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`
FROM `AspNetUsers` AS `a`
WHERE `a`.`Id` = @__p_0
LIMIT 1
2025-11-16 16:58:12.375 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']

        UPDATE TOKENS
        SET Revoked = true, Expired = true
        WHERE UserId = @p0
          AND DeviceId = @p1
          AND Revoked = false
          AND Expired = false
2025-11-16 16:58:12.377 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a0`.`Name`
FROM `AspNetUserRoles` AS `a`
INNER JOIN `AspNetRoles` AS `a0` ON `a`.`RoleId` = `a0`.`Id`
WHERE `a`.`UserId` = @__userId_0
2025-11-16 16:58:12.381 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ClaimType`, `a`.`ClaimValue`, `a`.`UserId`
FROM `AspNetUserClaims` AS `a`
WHERE `a`.`UserId` = @__user_Id_0
2025-11-16 16:58:12.383 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a0`.`Name`
FROM `AspNetUserRoles` AS `a`
INNER JOIN `AspNetRoles` AS `a0` ON `a`.`RoleId` = `a0`.`Id`
WHERE `a`.`UserId` = @__userId_0
2025-11-16 16:58:12.386 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ClaimType`, `a`.`ClaimValue`, `a`.`UserId`
FROM `AspNetUserClaims` AS `a`
WHERE `a`.`UserId` = @__user_Id_0
2025-11-16 16:58:12.392 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (DbType = DateTime), @p2='?' (Size = 4000), @p3='?' (DbType = Boolean), @p4='?' (Size = 4000), @p5='?' (DbType = Boolean), @p6='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO `Tokens` (`AccessToken`, `CreatedAt`, `DeviceId`, `Expired`, `RefreshToken`, `Revoked`, `UserId`)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6);
SELECT `Id`
FROM `Tokens`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();
2025-11-16 16:58:12.393 +03:00 [INF] Added Token MappyApplication.Data.Token
2025-11-16 16:58:12.396 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessFailedCount`, `t`.`ConcurrencyStamp`, `t`.`Email`, `t`.`EmailConfirmed`, `t`.`FirstName`, `t`.`LastName`, `t`.`LockoutEnabled`, `t`.`LockoutEnd`, `t`.`NormalizedEmail`, `t`.`NormalizedUserName`, `t`.`PasswordHash`, `t`.`PhoneNumber`, `t`.`PhoneNumberConfirmed`, `t`.`SecurityStamp`, `t`.`TwoFactorEnabled`, `t`.`UserName`, `w`.`Id`, `w`.`Cadence`, `w`.`CityName`, `w`.`Coords`, `w`.`Date`, `w`.`Distance`, `w`.`Duration`, `w`.`Emoji`, `w`.`Pace`, `w`.`Type`, `w`.`UserId`, `c`.`Id`, `c`.`CityName`, `c`.`Country`, `c`.`Date`, `c`.`Emoji`, `c`.`Lat`, `c`.`Lng`, `c`.`Notes`, `c`.`UserId`
FROM (
    SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`FirstName`, `a`.`LastName`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`
    FROM `AspNetUsers` AS `a`
    WHERE `a`.`Id` = @__user_Id_0
    LIMIT 2
) AS `t`
LEFT JOIN `Workouts` AS `w` ON `t`.`Id` = `w`.`UserId`
LEFT JOIN `Cities` AS `c` ON `t`.`Id` = `c`.`UserId`
ORDER BY `t`.`Id`, `w`.`Id`
2025-11-16 16:58:12.396 +03:00 [INF] Executing ObjectResult, writing value of type 'MappyApplication.Models.user.AuthResponse'.
2025-11-16 16:58:12.397 +03:00 [INF] Executed action MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication) in 31.3747ms
2025-11-16 16:58:12.397 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication)'
2025-11-16 16:58:12.397 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:8080/api/v1/auth/refresh-token - 200 null application/json; charset=utf-8 66.856ms
2025-11-16 16:58:18.337 +03:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:8080/api/v1/auth/refresh-token - null null
2025-11-16 16:58:18.342 +03:00 [INF] CORS policy execution successful.
2025-11-16 16:58:18.344 +03:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:8080/api/v1/auth/refresh-token - 204 null null 7.0969ms
2025-11-16 16:58:18.346 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:8080/api/v1/auth/refresh-token - null 0
2025-11-16 16:58:18.347 +03:00 [INF] CORS policy execution successful.
2025-11-16 16:58:18.420 +03:00 [INF] Executed DbCommand (6ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 16:58:18.422 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication)'
2025-11-16 16:58:18.422 +03:00 [INF] Route matched with {action = "RefreshToken", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.user.AuthResponse] RefreshToken() on controller MappyApplication.Controllers.AuthController (MappyApplication).
2025-11-16 16:58:18.425 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__refreshToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`RefreshToken` = @__refreshToken_0
LIMIT 2
2025-11-16 16:58:18.431 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`FirstName`, `a`.`LastName`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`
FROM `AspNetUsers` AS `a`
WHERE `a`.`Id` = @__p_0
LIMIT 1
2025-11-16 16:58:18.436 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']

        UPDATE TOKENS
        SET Revoked = true, Expired = true
        WHERE UserId = @p0
          AND DeviceId = @p1
          AND Revoked = false
          AND Expired = false
2025-11-16 16:58:18.438 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a0`.`Name`
FROM `AspNetUserRoles` AS `a`
INNER JOIN `AspNetRoles` AS `a0` ON `a`.`RoleId` = `a0`.`Id`
WHERE `a`.`UserId` = @__userId_0
2025-11-16 16:58:18.438 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ClaimType`, `a`.`ClaimValue`, `a`.`UserId`
FROM `AspNetUserClaims` AS `a`
WHERE `a`.`UserId` = @__user_Id_0
2025-11-16 16:58:18.439 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a0`.`Name`
FROM `AspNetUserRoles` AS `a`
INNER JOIN `AspNetRoles` AS `a0` ON `a`.`RoleId` = `a0`.`Id`
WHERE `a`.`UserId` = @__userId_0
2025-11-16 16:58:18.440 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ClaimType`, `a`.`ClaimValue`, `a`.`UserId`
FROM `AspNetUserClaims` AS `a`
WHERE `a`.`UserId` = @__user_Id_0
2025-11-16 16:58:18.447 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (DbType = DateTime), @p2='?' (Size = 4000), @p3='?' (DbType = Boolean), @p4='?' (Size = 4000), @p5='?' (DbType = Boolean), @p6='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO `Tokens` (`AccessToken`, `CreatedAt`, `DeviceId`, `Expired`, `RefreshToken`, `Revoked`, `UserId`)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6);
SELECT `Id`
FROM `Tokens`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();
2025-11-16 16:58:18.448 +03:00 [INF] Added Token MappyApplication.Data.Token
2025-11-16 16:58:18.450 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessFailedCount`, `t`.`ConcurrencyStamp`, `t`.`Email`, `t`.`EmailConfirmed`, `t`.`FirstName`, `t`.`LastName`, `t`.`LockoutEnabled`, `t`.`LockoutEnd`, `t`.`NormalizedEmail`, `t`.`NormalizedUserName`, `t`.`PasswordHash`, `t`.`PhoneNumber`, `t`.`PhoneNumberConfirmed`, `t`.`SecurityStamp`, `t`.`TwoFactorEnabled`, `t`.`UserName`, `w`.`Id`, `w`.`Cadence`, `w`.`CityName`, `w`.`Coords`, `w`.`Date`, `w`.`Distance`, `w`.`Duration`, `w`.`Emoji`, `w`.`Pace`, `w`.`Type`, `w`.`UserId`, `c`.`Id`, `c`.`CityName`, `c`.`Country`, `c`.`Date`, `c`.`Emoji`, `c`.`Lat`, `c`.`Lng`, `c`.`Notes`, `c`.`UserId`
FROM (
    SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`FirstName`, `a`.`LastName`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`
    FROM `AspNetUsers` AS `a`
    WHERE `a`.`Id` = @__user_Id_0
    LIMIT 2
) AS `t`
LEFT JOIN `Workouts` AS `w` ON `t`.`Id` = `w`.`UserId`
LEFT JOIN `Cities` AS `c` ON `t`.`Id` = `c`.`UserId`
ORDER BY `t`.`Id`, `w`.`Id`
2025-11-16 16:58:18.452 +03:00 [INF] Executing ObjectResult, writing value of type 'MappyApplication.Models.user.AuthResponse'.
2025-11-16 16:58:18.453 +03:00 [INF] Executed action MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication) in 30.3116ms
2025-11-16 16:58:18.453 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication)'
2025-11-16 16:58:18.453 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:8080/api/v1/auth/refresh-token - 200 null application/json; charset=utf-8 106.7582ms
2025-11-16 17:11:10.176 +03:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:8080/api/v1/auth/refresh-token - null null
2025-11-16 17:11:10.181 +03:00 [INF] CORS policy execution successful.
2025-11-16 17:11:10.182 +03:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:8080/api/v1/auth/refresh-token - 204 null null 5.7265ms
2025-11-16 17:11:10.184 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:8080/api/v1/auth/refresh-token - null 0
2025-11-16 17:11:10.185 +03:00 [INF] CORS policy execution successful.
2025-11-16 17:11:10.460 +03:00 [INF] Executed DbCommand (41ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 17:11:10.460 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication)'
2025-11-16 17:11:10.464 +03:00 [INF] Route matched with {action = "RefreshToken", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.user.AuthResponse] RefreshToken() on controller MappyApplication.Controllers.AuthController (MappyApplication).
2025-11-16 17:11:10.465 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__refreshToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`RefreshToken` = @__refreshToken_0
LIMIT 2
2025-11-16 17:11:10.476 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__p_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`FirstName`, `a`.`LastName`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`
FROM `AspNetUsers` AS `a`
WHERE `a`.`Id` = @__p_0
LIMIT 1
2025-11-16 17:11:10.499 +03:00 [INF] Executed DbCommand (21ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']

        UPDATE TOKENS
        SET Revoked = true, Expired = true
        WHERE UserId = @p0
          AND DeviceId = @p1
          AND Revoked = false
          AND Expired = false
2025-11-16 17:11:10.505 +03:00 [INF] Executed DbCommand (4ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a0`.`Name`
FROM `AspNetUserRoles` AS `a`
INNER JOIN `AspNetRoles` AS `a0` ON `a`.`RoleId` = `a0`.`Id`
WHERE `a`.`UserId` = @__userId_0
2025-11-16 17:11:10.507 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ClaimType`, `a`.`ClaimValue`, `a`.`UserId`
FROM `AspNetUserClaims` AS `a`
WHERE `a`.`UserId` = @__user_Id_0
2025-11-16 17:11:10.508 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a0`.`Name`
FROM `AspNetUserRoles` AS `a`
INNER JOIN `AspNetRoles` AS `a0` ON `a`.`RoleId` = `a0`.`Id`
WHERE `a`.`UserId` = @__userId_0
2025-11-16 17:11:10.508 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ClaimType`, `a`.`ClaimValue`, `a`.`UserId`
FROM `AspNetUserClaims` AS `a`
WHERE `a`.`UserId` = @__user_Id_0
2025-11-16 17:11:10.527 +03:00 [INF] Executed DbCommand (13ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (DbType = DateTime), @p2='?' (Size = 4000), @p3='?' (DbType = Boolean), @p4='?' (Size = 4000), @p5='?' (DbType = Boolean), @p6='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO `Tokens` (`AccessToken`, `CreatedAt`, `DeviceId`, `Expired`, `RefreshToken`, `Revoked`, `UserId`)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6);
SELECT `Id`
FROM `Tokens`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();
2025-11-16 17:11:10.529 +03:00 [INF] Added Token MappyApplication.Data.Token
2025-11-16 17:11:10.537 +03:00 [INF] Executed DbCommand (8ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessFailedCount`, `t`.`ConcurrencyStamp`, `t`.`Email`, `t`.`EmailConfirmed`, `t`.`FirstName`, `t`.`LastName`, `t`.`LockoutEnabled`, `t`.`LockoutEnd`, `t`.`NormalizedEmail`, `t`.`NormalizedUserName`, `t`.`PasswordHash`, `t`.`PhoneNumber`, `t`.`PhoneNumberConfirmed`, `t`.`SecurityStamp`, `t`.`TwoFactorEnabled`, `t`.`UserName`, `w`.`Id`, `w`.`Cadence`, `w`.`CityName`, `w`.`Coords`, `w`.`Date`, `w`.`Distance`, `w`.`Duration`, `w`.`Emoji`, `w`.`Pace`, `w`.`Type`, `w`.`UserId`, `c`.`Id`, `c`.`CityName`, `c`.`Country`, `c`.`Date`, `c`.`Emoji`, `c`.`Lat`, `c`.`Lng`, `c`.`Notes`, `c`.`UserId`
FROM (
    SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`FirstName`, `a`.`LastName`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`
    FROM `AspNetUsers` AS `a`
    WHERE `a`.`Id` = @__user_Id_0
    LIMIT 2
) AS `t`
LEFT JOIN `Workouts` AS `w` ON `t`.`Id` = `w`.`UserId`
LEFT JOIN `Cities` AS `c` ON `t`.`Id` = `c`.`UserId`
ORDER BY `t`.`Id`, `w`.`Id`
2025-11-16 17:11:10.538 +03:00 [INF] Executing ObjectResult, writing value of type 'MappyApplication.Models.user.AuthResponse'.
2025-11-16 17:11:10.538 +03:00 [INF] Executed action MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication) in 74.2845ms
2025-11-16 17:11:10.538 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication)'
2025-11-16 17:11:10.538 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:8080/api/v1/auth/refresh-token - 200 null application/json; charset=utf-8 354.1346ms
2025-11-16 17:11:15.302 +03:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:8080/api/v1/auth/refresh-token - null null
2025-11-16 17:11:15.307 +03:00 [INF] CORS policy execution successful.
2025-11-16 17:11:15.308 +03:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:8080/api/v1/auth/refresh-token - 204 null null 5.5992ms
2025-11-16 17:11:15.313 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:8080/api/v1/auth/refresh-token - null 0
2025-11-16 17:11:15.313 +03:00 [INF] CORS policy execution successful.
2025-11-16 17:11:15.360 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 17:11:15.362 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication)'
2025-11-16 17:11:15.364 +03:00 [INF] Route matched with {action = "RefreshToken", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.user.AuthResponse] RefreshToken() on controller MappyApplication.Controllers.AuthController (MappyApplication).
2025-11-16 17:11:15.367 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__refreshToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`RefreshToken` = @__refreshToken_0
LIMIT 2
2025-11-16 17:11:15.374 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`FirstName`, `a`.`LastName`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`
FROM `AspNetUsers` AS `a`
WHERE `a`.`Id` = @__p_0
LIMIT 1
2025-11-16 17:11:15.380 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']

        UPDATE TOKENS
        SET Revoked = true, Expired = true
        WHERE UserId = @p0
          AND DeviceId = @p1
          AND Revoked = false
          AND Expired = false
2025-11-16 17:11:15.393 +03:00 [INF] Executed DbCommand (9ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a0`.`Name`
FROM `AspNetUserRoles` AS `a`
INNER JOIN `AspNetRoles` AS `a0` ON `a`.`RoleId` = `a0`.`Id`
WHERE `a`.`UserId` = @__userId_0
2025-11-16 17:11:15.398 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ClaimType`, `a`.`ClaimValue`, `a`.`UserId`
FROM `AspNetUserClaims` AS `a`
WHERE `a`.`UserId` = @__user_Id_0
2025-11-16 17:11:15.404 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a0`.`Name`
FROM `AspNetUserRoles` AS `a`
INNER JOIN `AspNetRoles` AS `a0` ON `a`.`RoleId` = `a0`.`Id`
WHERE `a`.`UserId` = @__userId_0
2025-11-16 17:11:15.406 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ClaimType`, `a`.`ClaimValue`, `a`.`UserId`
FROM `AspNetUserClaims` AS `a`
WHERE `a`.`UserId` = @__user_Id_0
2025-11-16 17:11:15.415 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (DbType = DateTime), @p2='?' (Size = 4000), @p3='?' (DbType = Boolean), @p4='?' (Size = 4000), @p5='?' (DbType = Boolean), @p6='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO `Tokens` (`AccessToken`, `CreatedAt`, `DeviceId`, `Expired`, `RefreshToken`, `Revoked`, `UserId`)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6);
SELECT `Id`
FROM `Tokens`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();
2025-11-16 17:11:15.416 +03:00 [INF] Added Token MappyApplication.Data.Token
2025-11-16 17:11:15.419 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessFailedCount`, `t`.`ConcurrencyStamp`, `t`.`Email`, `t`.`EmailConfirmed`, `t`.`FirstName`, `t`.`LastName`, `t`.`LockoutEnabled`, `t`.`LockoutEnd`, `t`.`NormalizedEmail`, `t`.`NormalizedUserName`, `t`.`PasswordHash`, `t`.`PhoneNumber`, `t`.`PhoneNumberConfirmed`, `t`.`SecurityStamp`, `t`.`TwoFactorEnabled`, `t`.`UserName`, `w`.`Id`, `w`.`Cadence`, `w`.`CityName`, `w`.`Coords`, `w`.`Date`, `w`.`Distance`, `w`.`Duration`, `w`.`Emoji`, `w`.`Pace`, `w`.`Type`, `w`.`UserId`, `c`.`Id`, `c`.`CityName`, `c`.`Country`, `c`.`Date`, `c`.`Emoji`, `c`.`Lat`, `c`.`Lng`, `c`.`Notes`, `c`.`UserId`
FROM (
    SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`FirstName`, `a`.`LastName`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`
    FROM `AspNetUsers` AS `a`
    WHERE `a`.`Id` = @__user_Id_0
    LIMIT 2
) AS `t`
LEFT JOIN `Workouts` AS `w` ON `t`.`Id` = `w`.`UserId`
LEFT JOIN `Cities` AS `c` ON `t`.`Id` = `c`.`UserId`
ORDER BY `t`.`Id`, `w`.`Id`
2025-11-16 17:11:15.420 +03:00 [INF] Executing ObjectResult, writing value of type 'MappyApplication.Models.user.AuthResponse'.
2025-11-16 17:11:15.421 +03:00 [INF] Executed action MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication) in 57.1377ms
2025-11-16 17:11:15.421 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication)'
2025-11-16 17:11:15.421 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:8080/api/v1/auth/refresh-token - 200 null application/json; charset=utf-8 107.8597ms
2025-11-16 17:11:16.446 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:8080/api/v1/auth/refresh-token - null 0
2025-11-16 17:11:16.446 +03:00 [INF] CORS policy execution successful.
2025-11-16 17:11:16.471 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 17:11:16.474 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication)'
2025-11-16 17:11:16.474 +03:00 [INF] Route matched with {action = "RefreshToken", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.user.AuthResponse] RefreshToken() on controller MappyApplication.Controllers.AuthController (MappyApplication).
2025-11-16 17:11:16.476 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__refreshToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`RefreshToken` = @__refreshToken_0
LIMIT 2
2025-11-16 17:11:16.480 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`FirstName`, `a`.`LastName`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`
FROM `AspNetUsers` AS `a`
WHERE `a`.`Id` = @__p_0
LIMIT 1
2025-11-16 17:11:16.490 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']

        UPDATE TOKENS
        SET Revoked = true, Expired = true
        WHERE UserId = @p0
          AND DeviceId = @p1
          AND Revoked = false
          AND Expired = false
2025-11-16 17:11:16.494 +03:00 [INF] Executed DbCommand (4ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a0`.`Name`
FROM `AspNetUserRoles` AS `a`
INNER JOIN `AspNetRoles` AS `a0` ON `a`.`RoleId` = `a0`.`Id`
WHERE `a`.`UserId` = @__userId_0
2025-11-16 17:11:16.498 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ClaimType`, `a`.`ClaimValue`, `a`.`UserId`
FROM `AspNetUserClaims` AS `a`
WHERE `a`.`UserId` = @__user_Id_0
2025-11-16 17:11:16.500 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a0`.`Name`
FROM `AspNetUserRoles` AS `a`
INNER JOIN `AspNetRoles` AS `a0` ON `a`.`RoleId` = `a0`.`Id`
WHERE `a`.`UserId` = @__userId_0
2025-11-16 17:11:16.505 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ClaimType`, `a`.`ClaimValue`, `a`.`UserId`
FROM `AspNetUserClaims` AS `a`
WHERE `a`.`UserId` = @__user_Id_0
2025-11-16 17:11:16.531 +03:00 [INF] Executed DbCommand (9ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (DbType = DateTime), @p2='?' (Size = 4000), @p3='?' (DbType = Boolean), @p4='?' (Size = 4000), @p5='?' (DbType = Boolean), @p6='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO `Tokens` (`AccessToken`, `CreatedAt`, `DeviceId`, `Expired`, `RefreshToken`, `Revoked`, `UserId`)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6);
SELECT `Id`
FROM `Tokens`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();
2025-11-16 17:11:16.534 +03:00 [INF] Added Token MappyApplication.Data.Token
2025-11-16 17:11:16.539 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessFailedCount`, `t`.`ConcurrencyStamp`, `t`.`Email`, `t`.`EmailConfirmed`, `t`.`FirstName`, `t`.`LastName`, `t`.`LockoutEnabled`, `t`.`LockoutEnd`, `t`.`NormalizedEmail`, `t`.`NormalizedUserName`, `t`.`PasswordHash`, `t`.`PhoneNumber`, `t`.`PhoneNumberConfirmed`, `t`.`SecurityStamp`, `t`.`TwoFactorEnabled`, `t`.`UserName`, `w`.`Id`, `w`.`Cadence`, `w`.`CityName`, `w`.`Coords`, `w`.`Date`, `w`.`Distance`, `w`.`Duration`, `w`.`Emoji`, `w`.`Pace`, `w`.`Type`, `w`.`UserId`, `c`.`Id`, `c`.`CityName`, `c`.`Country`, `c`.`Date`, `c`.`Emoji`, `c`.`Lat`, `c`.`Lng`, `c`.`Notes`, `c`.`UserId`
FROM (
    SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`FirstName`, `a`.`LastName`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`
    FROM `AspNetUsers` AS `a`
    WHERE `a`.`Id` = @__user_Id_0
    LIMIT 2
) AS `t`
LEFT JOIN `Workouts` AS `w` ON `t`.`Id` = `w`.`UserId`
LEFT JOIN `Cities` AS `c` ON `t`.`Id` = `c`.`UserId`
ORDER BY `t`.`Id`, `w`.`Id`
2025-11-16 17:11:16.540 +03:00 [INF] Executing ObjectResult, writing value of type 'MappyApplication.Models.user.AuthResponse'.
2025-11-16 17:11:16.540 +03:00 [INF] Executed action MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication) in 65.7963ms
2025-11-16 17:11:16.540 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication)'
2025-11-16 17:11:16.540 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:8080/api/v1/auth/refresh-token - 200 null application/json; charset=utf-8 94.242ms
2025-11-16 17:11:17.321 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:8080/api/v1/auth/refresh-token - null 0
2025-11-16 17:11:17.322 +03:00 [INF] CORS policy execution successful.
2025-11-16 17:11:17.345 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 17:11:17.346 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication)'
2025-11-16 17:11:17.346 +03:00 [INF] Route matched with {action = "RefreshToken", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.user.AuthResponse] RefreshToken() on controller MappyApplication.Controllers.AuthController (MappyApplication).
2025-11-16 17:11:17.348 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__refreshToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`RefreshToken` = @__refreshToken_0
LIMIT 2
2025-11-16 17:11:17.350 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`FirstName`, `a`.`LastName`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`
FROM `AspNetUsers` AS `a`
WHERE `a`.`Id` = @__p_0
LIMIT 1
2025-11-16 17:11:17.353 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']

        UPDATE TOKENS
        SET Revoked = true, Expired = true
        WHERE UserId = @p0
          AND DeviceId = @p1
          AND Revoked = false
          AND Expired = false
2025-11-16 17:11:17.354 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a0`.`Name`
FROM `AspNetUserRoles` AS `a`
INNER JOIN `AspNetRoles` AS `a0` ON `a`.`RoleId` = `a0`.`Id`
WHERE `a`.`UserId` = @__userId_0
2025-11-16 17:11:17.356 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ClaimType`, `a`.`ClaimValue`, `a`.`UserId`
FROM `AspNetUserClaims` AS `a`
WHERE `a`.`UserId` = @__user_Id_0
2025-11-16 17:11:17.358 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a0`.`Name`
FROM `AspNetUserRoles` AS `a`
INNER JOIN `AspNetRoles` AS `a0` ON `a`.`RoleId` = `a0`.`Id`
WHERE `a`.`UserId` = @__userId_0
2025-11-16 17:11:17.359 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ClaimType`, `a`.`ClaimValue`, `a`.`UserId`
FROM `AspNetUserClaims` AS `a`
WHERE `a`.`UserId` = @__user_Id_0
2025-11-16 17:11:17.364 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (DbType = DateTime), @p2='?' (Size = 4000), @p3='?' (DbType = Boolean), @p4='?' (Size = 4000), @p5='?' (DbType = Boolean), @p6='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO `Tokens` (`AccessToken`, `CreatedAt`, `DeviceId`, `Expired`, `RefreshToken`, `Revoked`, `UserId`)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6);
SELECT `Id`
FROM `Tokens`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();
2025-11-16 17:11:17.365 +03:00 [INF] Added Token MappyApplication.Data.Token
2025-11-16 17:11:17.372 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessFailedCount`, `t`.`ConcurrencyStamp`, `t`.`Email`, `t`.`EmailConfirmed`, `t`.`FirstName`, `t`.`LastName`, `t`.`LockoutEnabled`, `t`.`LockoutEnd`, `t`.`NormalizedEmail`, `t`.`NormalizedUserName`, `t`.`PasswordHash`, `t`.`PhoneNumber`, `t`.`PhoneNumberConfirmed`, `t`.`SecurityStamp`, `t`.`TwoFactorEnabled`, `t`.`UserName`, `w`.`Id`, `w`.`Cadence`, `w`.`CityName`, `w`.`Coords`, `w`.`Date`, `w`.`Distance`, `w`.`Duration`, `w`.`Emoji`, `w`.`Pace`, `w`.`Type`, `w`.`UserId`, `c`.`Id`, `c`.`CityName`, `c`.`Country`, `c`.`Date`, `c`.`Emoji`, `c`.`Lat`, `c`.`Lng`, `c`.`Notes`, `c`.`UserId`
FROM (
    SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`FirstName`, `a`.`LastName`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`
    FROM `AspNetUsers` AS `a`
    WHERE `a`.`Id` = @__user_Id_0
    LIMIT 2
) AS `t`
LEFT JOIN `Workouts` AS `w` ON `t`.`Id` = `w`.`UserId`
LEFT JOIN `Cities` AS `c` ON `t`.`Id` = `c`.`UserId`
ORDER BY `t`.`Id`, `w`.`Id`
2025-11-16 17:11:17.376 +03:00 [INF] Executing ObjectResult, writing value of type 'MappyApplication.Models.user.AuthResponse'.
2025-11-16 17:11:17.376 +03:00 [INF] Executed action MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication) in 30.0265ms
2025-11-16 17:11:17.376 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication)'
2025-11-16 17:11:17.376 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:8080/api/v1/auth/refresh-token - 200 null application/json; charset=utf-8 55.1665ms
2025-11-16 17:11:18.346 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:8080/api/v1/auth/refresh-token - null 0
2025-11-16 17:11:18.347 +03:00 [INF] CORS policy execution successful.
2025-11-16 17:11:18.389 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 17:11:18.390 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication)'
2025-11-16 17:11:18.390 +03:00 [INF] Route matched with {action = "RefreshToken", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.user.AuthResponse] RefreshToken() on controller MappyApplication.Controllers.AuthController (MappyApplication).
2025-11-16 17:11:18.391 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__refreshToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`RefreshToken` = @__refreshToken_0
LIMIT 2
2025-11-16 17:11:18.394 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`FirstName`, `a`.`LastName`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`
FROM `AspNetUsers` AS `a`
WHERE `a`.`Id` = @__p_0
LIMIT 1
2025-11-16 17:11:18.399 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']

        UPDATE TOKENS
        SET Revoked = true, Expired = true
        WHERE UserId = @p0
          AND DeviceId = @p1
          AND Revoked = false
          AND Expired = false
2025-11-16 17:11:18.404 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a0`.`Name`
FROM `AspNetUserRoles` AS `a`
INNER JOIN `AspNetRoles` AS `a0` ON `a`.`RoleId` = `a0`.`Id`
WHERE `a`.`UserId` = @__userId_0
2025-11-16 17:11:18.409 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ClaimType`, `a`.`ClaimValue`, `a`.`UserId`
FROM `AspNetUserClaims` AS `a`
WHERE `a`.`UserId` = @__user_Id_0
2025-11-16 17:11:18.420 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a0`.`Name`
FROM `AspNetUserRoles` AS `a`
INNER JOIN `AspNetRoles` AS `a0` ON `a`.`RoleId` = `a0`.`Id`
WHERE `a`.`UserId` = @__userId_0
2025-11-16 17:11:18.423 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ClaimType`, `a`.`ClaimValue`, `a`.`UserId`
FROM `AspNetUserClaims` AS `a`
WHERE `a`.`UserId` = @__user_Id_0
2025-11-16 17:11:18.433 +03:00 [INF] Executed DbCommand (5ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (DbType = DateTime), @p2='?' (Size = 4000), @p3='?' (DbType = Boolean), @p4='?' (Size = 4000), @p5='?' (DbType = Boolean), @p6='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO `Tokens` (`AccessToken`, `CreatedAt`, `DeviceId`, `Expired`, `RefreshToken`, `Revoked`, `UserId`)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6);
SELECT `Id`
FROM `Tokens`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();
2025-11-16 17:11:18.435 +03:00 [INF] Added Token MappyApplication.Data.Token
2025-11-16 17:11:18.444 +03:00 [INF] Executed DbCommand (7ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessFailedCount`, `t`.`ConcurrencyStamp`, `t`.`Email`, `t`.`EmailConfirmed`, `t`.`FirstName`, `t`.`LastName`, `t`.`LockoutEnabled`, `t`.`LockoutEnd`, `t`.`NormalizedEmail`, `t`.`NormalizedUserName`, `t`.`PasswordHash`, `t`.`PhoneNumber`, `t`.`PhoneNumberConfirmed`, `t`.`SecurityStamp`, `t`.`TwoFactorEnabled`, `t`.`UserName`, `w`.`Id`, `w`.`Cadence`, `w`.`CityName`, `w`.`Coords`, `w`.`Date`, `w`.`Distance`, `w`.`Duration`, `w`.`Emoji`, `w`.`Pace`, `w`.`Type`, `w`.`UserId`, `c`.`Id`, `c`.`CityName`, `c`.`Country`, `c`.`Date`, `c`.`Emoji`, `c`.`Lat`, `c`.`Lng`, `c`.`Notes`, `c`.`UserId`
FROM (
    SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`FirstName`, `a`.`LastName`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`
    FROM `AspNetUsers` AS `a`
    WHERE `a`.`Id` = @__user_Id_0
    LIMIT 2
) AS `t`
LEFT JOIN `Workouts` AS `w` ON `t`.`Id` = `w`.`UserId`
LEFT JOIN `Cities` AS `c` ON `t`.`Id` = `c`.`UserId`
ORDER BY `t`.`Id`, `w`.`Id`
2025-11-16 17:11:18.445 +03:00 [INF] Executing ObjectResult, writing value of type 'MappyApplication.Models.user.AuthResponse'.
2025-11-16 17:11:18.446 +03:00 [INF] Executed action MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication) in 56.4834ms
2025-11-16 17:11:18.446 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication)'
2025-11-16 17:11:18.446 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:8080/api/v1/auth/refresh-token - 200 null application/json; charset=utf-8 99.8613ms
2025-11-16 17:11:19.155 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:8080/api/v1/auth/refresh-token - null 0
2025-11-16 17:11:19.156 +03:00 [INF] CORS policy execution successful.
2025-11-16 17:11:19.187 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 17:11:19.187 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication)'
2025-11-16 17:11:19.187 +03:00 [INF] Route matched with {action = "RefreshToken", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.user.AuthResponse] RefreshToken() on controller MappyApplication.Controllers.AuthController (MappyApplication).
2025-11-16 17:11:19.190 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__refreshToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`RefreshToken` = @__refreshToken_0
LIMIT 2
2025-11-16 17:11:19.193 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`FirstName`, `a`.`LastName`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`
FROM `AspNetUsers` AS `a`
WHERE `a`.`Id` = @__p_0
LIMIT 1
2025-11-16 17:11:19.196 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']

        UPDATE TOKENS
        SET Revoked = true, Expired = true
        WHERE UserId = @p0
          AND DeviceId = @p1
          AND Revoked = false
          AND Expired = false
2025-11-16 17:11:19.199 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a0`.`Name`
FROM `AspNetUserRoles` AS `a`
INNER JOIN `AspNetRoles` AS `a0` ON `a`.`RoleId` = `a0`.`Id`
WHERE `a`.`UserId` = @__userId_0
2025-11-16 17:11:19.205 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ClaimType`, `a`.`ClaimValue`, `a`.`UserId`
FROM `AspNetUserClaims` AS `a`
WHERE `a`.`UserId` = @__user_Id_0
2025-11-16 17:11:19.206 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a0`.`Name`
FROM `AspNetUserRoles` AS `a`
INNER JOIN `AspNetRoles` AS `a0` ON `a`.`RoleId` = `a0`.`Id`
WHERE `a`.`UserId` = @__userId_0
2025-11-16 17:11:19.209 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ClaimType`, `a`.`ClaimValue`, `a`.`UserId`
FROM `AspNetUserClaims` AS `a`
WHERE `a`.`UserId` = @__user_Id_0
2025-11-16 17:11:19.213 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (DbType = DateTime), @p2='?' (Size = 4000), @p3='?' (DbType = Boolean), @p4='?' (Size = 4000), @p5='?' (DbType = Boolean), @p6='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO `Tokens` (`AccessToken`, `CreatedAt`, `DeviceId`, `Expired`, `RefreshToken`, `Revoked`, `UserId`)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6);
SELECT `Id`
FROM `Tokens`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();
2025-11-16 17:11:19.214 +03:00 [INF] Added Token MappyApplication.Data.Token
2025-11-16 17:11:19.219 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessFailedCount`, `t`.`ConcurrencyStamp`, `t`.`Email`, `t`.`EmailConfirmed`, `t`.`FirstName`, `t`.`LastName`, `t`.`LockoutEnabled`, `t`.`LockoutEnd`, `t`.`NormalizedEmail`, `t`.`NormalizedUserName`, `t`.`PasswordHash`, `t`.`PhoneNumber`, `t`.`PhoneNumberConfirmed`, `t`.`SecurityStamp`, `t`.`TwoFactorEnabled`, `t`.`UserName`, `w`.`Id`, `w`.`Cadence`, `w`.`CityName`, `w`.`Coords`, `w`.`Date`, `w`.`Distance`, `w`.`Duration`, `w`.`Emoji`, `w`.`Pace`, `w`.`Type`, `w`.`UserId`, `c`.`Id`, `c`.`CityName`, `c`.`Country`, `c`.`Date`, `c`.`Emoji`, `c`.`Lat`, `c`.`Lng`, `c`.`Notes`, `c`.`UserId`
FROM (
    SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`FirstName`, `a`.`LastName`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`
    FROM `AspNetUsers` AS `a`
    WHERE `a`.`Id` = @__user_Id_0
    LIMIT 2
) AS `t`
LEFT JOIN `Workouts` AS `w` ON `t`.`Id` = `w`.`UserId`
LEFT JOIN `Cities` AS `c` ON `t`.`Id` = `c`.`UserId`
ORDER BY `t`.`Id`, `w`.`Id`
2025-11-16 17:11:19.219 +03:00 [INF] Executing ObjectResult, writing value of type 'MappyApplication.Models.user.AuthResponse'.
2025-11-16 17:11:19.220 +03:00 [INF] Executed action MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication) in 32.3837ms
2025-11-16 17:11:19.220 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication)'
2025-11-16 17:11:19.221 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:8080/api/v1/auth/refresh-token - 200 null application/json; charset=utf-8 65.1778ms
2025-11-16 17:11:19.847 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:8080/api/v1/auth/refresh-token - null 0
2025-11-16 17:11:19.850 +03:00 [INF] CORS policy execution successful.
2025-11-16 17:11:19.925 +03:00 [INF] Executed DbCommand (9ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 17:11:19.926 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication)'
2025-11-16 17:11:19.929 +03:00 [INF] Route matched with {action = "RefreshToken", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.user.AuthResponse] RefreshToken() on controller MappyApplication.Controllers.AuthController (MappyApplication).
2025-11-16 17:11:19.943 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__refreshToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`RefreshToken` = @__refreshToken_0
LIMIT 2
2025-11-16 17:11:19.954 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`FirstName`, `a`.`LastName`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`
FROM `AspNetUsers` AS `a`
WHERE `a`.`Id` = @__p_0
LIMIT 1
2025-11-16 17:11:19.970 +03:00 [INF] Executed DbCommand (8ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']

        UPDATE TOKENS
        SET Revoked = true, Expired = true
        WHERE UserId = @p0
          AND DeviceId = @p1
          AND Revoked = false
          AND Expired = false
2025-11-16 17:11:19.975 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a0`.`Name`
FROM `AspNetUserRoles` AS `a`
INNER JOIN `AspNetRoles` AS `a0` ON `a`.`RoleId` = `a0`.`Id`
WHERE `a`.`UserId` = @__userId_0
2025-11-16 17:11:19.979 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ClaimType`, `a`.`ClaimValue`, `a`.`UserId`
FROM `AspNetUserClaims` AS `a`
WHERE `a`.`UserId` = @__user_Id_0
2025-11-16 17:11:19.985 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a0`.`Name`
FROM `AspNetUserRoles` AS `a`
INNER JOIN `AspNetRoles` AS `a0` ON `a`.`RoleId` = `a0`.`Id`
WHERE `a`.`UserId` = @__userId_0
2025-11-16 17:11:19.988 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ClaimType`, `a`.`ClaimValue`, `a`.`UserId`
FROM `AspNetUserClaims` AS `a`
WHERE `a`.`UserId` = @__user_Id_0
2025-11-16 17:11:19.993 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (DbType = DateTime), @p2='?' (Size = 4000), @p3='?' (DbType = Boolean), @p4='?' (Size = 4000), @p5='?' (DbType = Boolean), @p6='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO `Tokens` (`AccessToken`, `CreatedAt`, `DeviceId`, `Expired`, `RefreshToken`, `Revoked`, `UserId`)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6);
SELECT `Id`
FROM `Tokens`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();
2025-11-16 17:11:19.993 +03:00 [INF] Added Token MappyApplication.Data.Token
2025-11-16 17:11:19.995 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessFailedCount`, `t`.`ConcurrencyStamp`, `t`.`Email`, `t`.`EmailConfirmed`, `t`.`FirstName`, `t`.`LastName`, `t`.`LockoutEnabled`, `t`.`LockoutEnd`, `t`.`NormalizedEmail`, `t`.`NormalizedUserName`, `t`.`PasswordHash`, `t`.`PhoneNumber`, `t`.`PhoneNumberConfirmed`, `t`.`SecurityStamp`, `t`.`TwoFactorEnabled`, `t`.`UserName`, `w`.`Id`, `w`.`Cadence`, `w`.`CityName`, `w`.`Coords`, `w`.`Date`, `w`.`Distance`, `w`.`Duration`, `w`.`Emoji`, `w`.`Pace`, `w`.`Type`, `w`.`UserId`, `c`.`Id`, `c`.`CityName`, `c`.`Country`, `c`.`Date`, `c`.`Emoji`, `c`.`Lat`, `c`.`Lng`, `c`.`Notes`, `c`.`UserId`
FROM (
    SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`FirstName`, `a`.`LastName`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`
    FROM `AspNetUsers` AS `a`
    WHERE `a`.`Id` = @__user_Id_0
    LIMIT 2
) AS `t`
LEFT JOIN `Workouts` AS `w` ON `t`.`Id` = `w`.`UserId`
LEFT JOIN `Cities` AS `c` ON `t`.`Id` = `c`.`UserId`
ORDER BY `t`.`Id`, `w`.`Id`
2025-11-16 17:11:19.995 +03:00 [INF] Executing ObjectResult, writing value of type 'MappyApplication.Models.user.AuthResponse'.
2025-11-16 17:11:19.995 +03:00 [INF] Executed action MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication) in 65.5795ms
2025-11-16 17:11:19.995 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication)'
2025-11-16 17:11:19.996 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:8080/api/v1/auth/refresh-token - 200 null application/json; charset=utf-8 148.7734ms
2025-11-16 17:11:20.689 +03:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:8080/api/v1/auth/refresh-token - null null
2025-11-16 17:11:20.691 +03:00 [INF] CORS policy execution successful.
2025-11-16 17:11:20.693 +03:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:8080/api/v1/auth/refresh-token - 204 null null 3.7342ms
2025-11-16 17:11:20.695 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:8080/api/v1/auth/refresh-token - null 0
2025-11-16 17:11:20.696 +03:00 [INF] CORS policy execution successful.
2025-11-16 17:11:20.748 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 17:11:20.752 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication)'
2025-11-16 17:11:20.752 +03:00 [INF] Route matched with {action = "RefreshToken", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.user.AuthResponse] RefreshToken() on controller MappyApplication.Controllers.AuthController (MappyApplication).
2025-11-16 17:11:20.753 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__refreshToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`RefreshToken` = @__refreshToken_0
LIMIT 2
2025-11-16 17:11:20.756 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`FirstName`, `a`.`LastName`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`
FROM `AspNetUsers` AS `a`
WHERE `a`.`Id` = @__p_0
LIMIT 1
2025-11-16 17:11:20.763 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']

        UPDATE TOKENS
        SET Revoked = true, Expired = true
        WHERE UserId = @p0
          AND DeviceId = @p1
          AND Revoked = false
          AND Expired = false
2025-11-16 17:11:20.765 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a0`.`Name`
FROM `AspNetUserRoles` AS `a`
INNER JOIN `AspNetRoles` AS `a0` ON `a`.`RoleId` = `a0`.`Id`
WHERE `a`.`UserId` = @__userId_0
2025-11-16 17:11:20.766 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ClaimType`, `a`.`ClaimValue`, `a`.`UserId`
FROM `AspNetUserClaims` AS `a`
WHERE `a`.`UserId` = @__user_Id_0
2025-11-16 17:11:20.768 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a0`.`Name`
FROM `AspNetUserRoles` AS `a`
INNER JOIN `AspNetRoles` AS `a0` ON `a`.`RoleId` = `a0`.`Id`
WHERE `a`.`UserId` = @__userId_0
2025-11-16 17:11:20.769 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ClaimType`, `a`.`ClaimValue`, `a`.`UserId`
FROM `AspNetUserClaims` AS `a`
WHERE `a`.`UserId` = @__user_Id_0
2025-11-16 17:11:20.771 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (DbType = DateTime), @p2='?' (Size = 4000), @p3='?' (DbType = Boolean), @p4='?' (Size = 4000), @p5='?' (DbType = Boolean), @p6='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO `Tokens` (`AccessToken`, `CreatedAt`, `DeviceId`, `Expired`, `RefreshToken`, `Revoked`, `UserId`)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6);
SELECT `Id`
FROM `Tokens`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();
2025-11-16 17:11:20.772 +03:00 [INF] Added Token MappyApplication.Data.Token
2025-11-16 17:11:20.774 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessFailedCount`, `t`.`ConcurrencyStamp`, `t`.`Email`, `t`.`EmailConfirmed`, `t`.`FirstName`, `t`.`LastName`, `t`.`LockoutEnabled`, `t`.`LockoutEnd`, `t`.`NormalizedEmail`, `t`.`NormalizedUserName`, `t`.`PasswordHash`, `t`.`PhoneNumber`, `t`.`PhoneNumberConfirmed`, `t`.`SecurityStamp`, `t`.`TwoFactorEnabled`, `t`.`UserName`, `w`.`Id`, `w`.`Cadence`, `w`.`CityName`, `w`.`Coords`, `w`.`Date`, `w`.`Distance`, `w`.`Duration`, `w`.`Emoji`, `w`.`Pace`, `w`.`Type`, `w`.`UserId`, `c`.`Id`, `c`.`CityName`, `c`.`Country`, `c`.`Date`, `c`.`Emoji`, `c`.`Lat`, `c`.`Lng`, `c`.`Notes`, `c`.`UserId`
FROM (
    SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`FirstName`, `a`.`LastName`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`
    FROM `AspNetUsers` AS `a`
    WHERE `a`.`Id` = @__user_Id_0
    LIMIT 2
) AS `t`
LEFT JOIN `Workouts` AS `w` ON `t`.`Id` = `w`.`UserId`
LEFT JOIN `Cities` AS `c` ON `t`.`Id` = `c`.`UserId`
ORDER BY `t`.`Id`, `w`.`Id`
2025-11-16 17:11:20.774 +03:00 [INF] Executing ObjectResult, writing value of type 'MappyApplication.Models.user.AuthResponse'.
2025-11-16 17:11:20.774 +03:00 [INF] Executed action MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication) in 22.407ms
2025-11-16 17:11:20.774 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication)'
2025-11-16 17:11:20.774 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:8080/api/v1/auth/refresh-token - 200 null application/json; charset=utf-8 79.23ms
2025-11-16 17:11:21.384 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:8080/api/v1/auth/refresh-token - null 0
2025-11-16 17:11:21.386 +03:00 [INF] CORS policy execution successful.
2025-11-16 17:11:21.417 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 17:11:21.417 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication)'
2025-11-16 17:11:21.417 +03:00 [INF] Route matched with {action = "RefreshToken", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.user.AuthResponse] RefreshToken() on controller MappyApplication.Controllers.AuthController (MappyApplication).
2025-11-16 17:11:21.419 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__refreshToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`RefreshToken` = @__refreshToken_0
LIMIT 2
2025-11-16 17:11:21.421 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`FirstName`, `a`.`LastName`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`
FROM `AspNetUsers` AS `a`
WHERE `a`.`Id` = @__p_0
LIMIT 1
2025-11-16 17:11:21.426 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']

        UPDATE TOKENS
        SET Revoked = true, Expired = true
        WHERE UserId = @p0
          AND DeviceId = @p1
          AND Revoked = false
          AND Expired = false
2025-11-16 17:11:21.432 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a0`.`Name`
FROM `AspNetUserRoles` AS `a`
INNER JOIN `AspNetRoles` AS `a0` ON `a`.`RoleId` = `a0`.`Id`
WHERE `a`.`UserId` = @__userId_0
2025-11-16 17:11:21.433 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ClaimType`, `a`.`ClaimValue`, `a`.`UserId`
FROM `AspNetUserClaims` AS `a`
WHERE `a`.`UserId` = @__user_Id_0
2025-11-16 17:11:21.434 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a0`.`Name`
FROM `AspNetUserRoles` AS `a`
INNER JOIN `AspNetRoles` AS `a0` ON `a`.`RoleId` = `a0`.`Id`
WHERE `a`.`UserId` = @__userId_0
2025-11-16 17:11:21.435 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ClaimType`, `a`.`ClaimValue`, `a`.`UserId`
FROM `AspNetUserClaims` AS `a`
WHERE `a`.`UserId` = @__user_Id_0
2025-11-16 17:11:21.440 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (DbType = DateTime), @p2='?' (Size = 4000), @p3='?' (DbType = Boolean), @p4='?' (Size = 4000), @p5='?' (DbType = Boolean), @p6='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO `Tokens` (`AccessToken`, `CreatedAt`, `DeviceId`, `Expired`, `RefreshToken`, `Revoked`, `UserId`)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6);
SELECT `Id`
FROM `Tokens`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();
2025-11-16 17:11:21.440 +03:00 [INF] Added Token MappyApplication.Data.Token
2025-11-16 17:11:21.449 +03:00 [INF] Executed DbCommand (4ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessFailedCount`, `t`.`ConcurrencyStamp`, `t`.`Email`, `t`.`EmailConfirmed`, `t`.`FirstName`, `t`.`LastName`, `t`.`LockoutEnabled`, `t`.`LockoutEnd`, `t`.`NormalizedEmail`, `t`.`NormalizedUserName`, `t`.`PasswordHash`, `t`.`PhoneNumber`, `t`.`PhoneNumberConfirmed`, `t`.`SecurityStamp`, `t`.`TwoFactorEnabled`, `t`.`UserName`, `w`.`Id`, `w`.`Cadence`, `w`.`CityName`, `w`.`Coords`, `w`.`Date`, `w`.`Distance`, `w`.`Duration`, `w`.`Emoji`, `w`.`Pace`, `w`.`Type`, `w`.`UserId`, `c`.`Id`, `c`.`CityName`, `c`.`Country`, `c`.`Date`, `c`.`Emoji`, `c`.`Lat`, `c`.`Lng`, `c`.`Notes`, `c`.`UserId`
FROM (
    SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`FirstName`, `a`.`LastName`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`
    FROM `AspNetUsers` AS `a`
    WHERE `a`.`Id` = @__user_Id_0
    LIMIT 2
) AS `t`
LEFT JOIN `Workouts` AS `w` ON `t`.`Id` = `w`.`UserId`
LEFT JOIN `Cities` AS `c` ON `t`.`Id` = `c`.`UserId`
ORDER BY `t`.`Id`, `w`.`Id`
2025-11-16 17:11:21.449 +03:00 [INF] Executing ObjectResult, writing value of type 'MappyApplication.Models.user.AuthResponse'.
2025-11-16 17:11:21.449 +03:00 [INF] Executed action MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication) in 32.1004ms
2025-11-16 17:11:21.449 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication)'
2025-11-16 17:11:21.449 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:8080/api/v1/auth/refresh-token - 200 null application/json; charset=utf-8 65.1854ms
2025-11-16 17:11:22.411 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:8080/api/v1/auth/refresh-token - null 0
2025-11-16 17:11:22.411 +03:00 [INF] CORS policy execution successful.
2025-11-16 17:11:22.456 +03:00 [INF] Executed DbCommand (4ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 17:11:22.457 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication)'
2025-11-16 17:11:22.457 +03:00 [INF] Route matched with {action = "RefreshToken", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.user.AuthResponse] RefreshToken() on controller MappyApplication.Controllers.AuthController (MappyApplication).
2025-11-16 17:11:22.459 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__refreshToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`RefreshToken` = @__refreshToken_0
LIMIT 2
2025-11-16 17:11:22.463 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`FirstName`, `a`.`LastName`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`
FROM `AspNetUsers` AS `a`
WHERE `a`.`Id` = @__p_0
LIMIT 1
2025-11-16 17:11:22.469 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']

        UPDATE TOKENS
        SET Revoked = true, Expired = true
        WHERE UserId = @p0
          AND DeviceId = @p1
          AND Revoked = false
          AND Expired = false
2025-11-16 17:11:22.473 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a0`.`Name`
FROM `AspNetUserRoles` AS `a`
INNER JOIN `AspNetRoles` AS `a0` ON `a`.`RoleId` = `a0`.`Id`
WHERE `a`.`UserId` = @__userId_0
2025-11-16 17:11:22.477 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ClaimType`, `a`.`ClaimValue`, `a`.`UserId`
FROM `AspNetUserClaims` AS `a`
WHERE `a`.`UserId` = @__user_Id_0
2025-11-16 17:11:22.482 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a0`.`Name`
FROM `AspNetUserRoles` AS `a`
INNER JOIN `AspNetRoles` AS `a0` ON `a`.`RoleId` = `a0`.`Id`
WHERE `a`.`UserId` = @__userId_0
2025-11-16 17:11:22.489 +03:00 [INF] Executed DbCommand (6ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ClaimType`, `a`.`ClaimValue`, `a`.`UserId`
FROM `AspNetUserClaims` AS `a`
WHERE `a`.`UserId` = @__user_Id_0
2025-11-16 17:11:22.495 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (DbType = DateTime), @p2='?' (Size = 4000), @p3='?' (DbType = Boolean), @p4='?' (Size = 4000), @p5='?' (DbType = Boolean), @p6='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO `Tokens` (`AccessToken`, `CreatedAt`, `DeviceId`, `Expired`, `RefreshToken`, `Revoked`, `UserId`)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6);
SELECT `Id`
FROM `Tokens`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();
2025-11-16 17:11:22.496 +03:00 [INF] Added Token MappyApplication.Data.Token
2025-11-16 17:11:22.501 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessFailedCount`, `t`.`ConcurrencyStamp`, `t`.`Email`, `t`.`EmailConfirmed`, `t`.`FirstName`, `t`.`LastName`, `t`.`LockoutEnabled`, `t`.`LockoutEnd`, `t`.`NormalizedEmail`, `t`.`NormalizedUserName`, `t`.`PasswordHash`, `t`.`PhoneNumber`, `t`.`PhoneNumberConfirmed`, `t`.`SecurityStamp`, `t`.`TwoFactorEnabled`, `t`.`UserName`, `w`.`Id`, `w`.`Cadence`, `w`.`CityName`, `w`.`Coords`, `w`.`Date`, `w`.`Distance`, `w`.`Duration`, `w`.`Emoji`, `w`.`Pace`, `w`.`Type`, `w`.`UserId`, `c`.`Id`, `c`.`CityName`, `c`.`Country`, `c`.`Date`, `c`.`Emoji`, `c`.`Lat`, `c`.`Lng`, `c`.`Notes`, `c`.`UserId`
FROM (
    SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`FirstName`, `a`.`LastName`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`
    FROM `AspNetUsers` AS `a`
    WHERE `a`.`Id` = @__user_Id_0
    LIMIT 2
) AS `t`
LEFT JOIN `Workouts` AS `w` ON `t`.`Id` = `w`.`UserId`
LEFT JOIN `Cities` AS `c` ON `t`.`Id` = `c`.`UserId`
ORDER BY `t`.`Id`, `w`.`Id`
2025-11-16 17:11:22.508 +03:00 [INF] Executing ObjectResult, writing value of type 'MappyApplication.Models.user.AuthResponse'.
2025-11-16 17:11:22.509 +03:00 [INF] Executed action MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication) in 51.4276ms
2025-11-16 17:11:22.509 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication)'
2025-11-16 17:11:22.509 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:8080/api/v1/auth/refresh-token - 200 null application/json; charset=utf-8 98.7796ms
2025-11-16 17:14:20.183 +03:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:8080/api/v1/auth/refresh-token - null null
2025-11-16 17:14:20.185 +03:00 [INF] CORS policy execution successful.
2025-11-16 17:14:20.185 +03:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:8080/api/v1/auth/refresh-token - 204 null null 1.6759ms
2025-11-16 17:14:20.186 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:8080/api/v1/auth/refresh-token - null 0
2025-11-16 17:14:20.186 +03:00 [INF] CORS policy execution successful.
2025-11-16 17:14:20.222 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 17:14:20.222 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication)'
2025-11-16 17:14:20.222 +03:00 [INF] Route matched with {action = "RefreshToken", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.user.AuthResponse] RefreshToken() on controller MappyApplication.Controllers.AuthController (MappyApplication).
2025-11-16 17:14:20.223 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__refreshToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`RefreshToken` = @__refreshToken_0
LIMIT 2
2025-11-16 17:14:20.227 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__p_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`FirstName`, `a`.`LastName`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`
FROM `AspNetUsers` AS `a`
WHERE `a`.`Id` = @__p_0
LIMIT 1
2025-11-16 17:14:20.231 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']

        UPDATE TOKENS
        SET Revoked = true, Expired = true
        WHERE UserId = @p0
          AND DeviceId = @p1
          AND Revoked = false
          AND Expired = false
2025-11-16 17:14:20.232 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a0`.`Name`
FROM `AspNetUserRoles` AS `a`
INNER JOIN `AspNetRoles` AS `a0` ON `a`.`RoleId` = `a0`.`Id`
WHERE `a`.`UserId` = @__userId_0
2025-11-16 17:14:20.233 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ClaimType`, `a`.`ClaimValue`, `a`.`UserId`
FROM `AspNetUserClaims` AS `a`
WHERE `a`.`UserId` = @__user_Id_0
2025-11-16 17:14:20.233 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a0`.`Name`
FROM `AspNetUserRoles` AS `a`
INNER JOIN `AspNetRoles` AS `a0` ON `a`.`RoleId` = `a0`.`Id`
WHERE `a`.`UserId` = @__userId_0
2025-11-16 17:14:20.234 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ClaimType`, `a`.`ClaimValue`, `a`.`UserId`
FROM `AspNetUserClaims` AS `a`
WHERE `a`.`UserId` = @__user_Id_0
2025-11-16 17:14:20.237 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (DbType = DateTime), @p2='?' (Size = 4000), @p3='?' (DbType = Boolean), @p4='?' (Size = 4000), @p5='?' (DbType = Boolean), @p6='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO `Tokens` (`AccessToken`, `CreatedAt`, `DeviceId`, `Expired`, `RefreshToken`, `Revoked`, `UserId`)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6);
SELECT `Id`
FROM `Tokens`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();
2025-11-16 17:14:20.238 +03:00 [INF] Added Token MappyApplication.Data.Token
2025-11-16 17:14:20.240 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessFailedCount`, `t`.`ConcurrencyStamp`, `t`.`Email`, `t`.`EmailConfirmed`, `t`.`FirstName`, `t`.`LastName`, `t`.`LockoutEnabled`, `t`.`LockoutEnd`, `t`.`NormalizedEmail`, `t`.`NormalizedUserName`, `t`.`PasswordHash`, `t`.`PhoneNumber`, `t`.`PhoneNumberConfirmed`, `t`.`SecurityStamp`, `t`.`TwoFactorEnabled`, `t`.`UserName`, `w`.`Id`, `w`.`Cadence`, `w`.`CityName`, `w`.`Coords`, `w`.`Date`, `w`.`Distance`, `w`.`Duration`, `w`.`Emoji`, `w`.`Pace`, `w`.`Type`, `w`.`UserId`, `c`.`Id`, `c`.`CityName`, `c`.`Country`, `c`.`Date`, `c`.`Emoji`, `c`.`Lat`, `c`.`Lng`, `c`.`Notes`, `c`.`UserId`
FROM (
    SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`FirstName`, `a`.`LastName`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`
    FROM `AspNetUsers` AS `a`
    WHERE `a`.`Id` = @__user_Id_0
    LIMIT 2
) AS `t`
LEFT JOIN `Workouts` AS `w` ON `t`.`Id` = `w`.`UserId`
LEFT JOIN `Cities` AS `c` ON `t`.`Id` = `c`.`UserId`
ORDER BY `t`.`Id`, `w`.`Id`
2025-11-16 17:14:20.240 +03:00 [INF] Executing ObjectResult, writing value of type 'MappyApplication.Models.user.AuthResponse'.
2025-11-16 17:14:20.240 +03:00 [INF] Executed action MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication) in 17.784ms
2025-11-16 17:14:20.240 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication)'
2025-11-16 17:14:20.240 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:8080/api/v1/auth/refresh-token - 200 null application/json; charset=utf-8 54.6026ms
2025-11-16 17:14:38.401 +03:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:8080/api/v1/auth/refresh-token - null null
2025-11-16 17:14:38.406 +03:00 [INF] CORS policy execution successful.
2025-11-16 17:14:38.406 +03:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:8080/api/v1/auth/refresh-token - 204 null null 8.7257ms
2025-11-16 17:14:38.408 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:8080/api/v1/auth/refresh-token - null 0
2025-11-16 17:14:38.409 +03:00 [INF] CORS policy execution successful.
2025-11-16 17:14:38.438 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 17:14:38.439 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication)'
2025-11-16 17:14:38.439 +03:00 [INF] Route matched with {action = "RefreshToken", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.user.AuthResponse] RefreshToken() on controller MappyApplication.Controllers.AuthController (MappyApplication).
2025-11-16 17:14:38.440 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__refreshToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`RefreshToken` = @__refreshToken_0
LIMIT 2
2025-11-16 17:14:38.441 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`FirstName`, `a`.`LastName`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`
FROM `AspNetUsers` AS `a`
WHERE `a`.`Id` = @__p_0
LIMIT 1
2025-11-16 17:14:38.446 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']

        UPDATE TOKENS
        SET Revoked = true, Expired = true
        WHERE UserId = @p0
          AND DeviceId = @p1
          AND Revoked = false
          AND Expired = false
2025-11-16 17:14:38.449 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a0`.`Name`
FROM `AspNetUserRoles` AS `a`
INNER JOIN `AspNetRoles` AS `a0` ON `a`.`RoleId` = `a0`.`Id`
WHERE `a`.`UserId` = @__userId_0
2025-11-16 17:14:38.450 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ClaimType`, `a`.`ClaimValue`, `a`.`UserId`
FROM `AspNetUserClaims` AS `a`
WHERE `a`.`UserId` = @__user_Id_0
2025-11-16 17:14:38.451 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a0`.`Name`
FROM `AspNetUserRoles` AS `a`
INNER JOIN `AspNetRoles` AS `a0` ON `a`.`RoleId` = `a0`.`Id`
WHERE `a`.`UserId` = @__userId_0
2025-11-16 17:14:38.452 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ClaimType`, `a`.`ClaimValue`, `a`.`UserId`
FROM `AspNetUserClaims` AS `a`
WHERE `a`.`UserId` = @__user_Id_0
2025-11-16 17:14:38.456 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (DbType = DateTime), @p2='?' (Size = 4000), @p3='?' (DbType = Boolean), @p4='?' (Size = 4000), @p5='?' (DbType = Boolean), @p6='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO `Tokens` (`AccessToken`, `CreatedAt`, `DeviceId`, `Expired`, `RefreshToken`, `Revoked`, `UserId`)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6);
SELECT `Id`
FROM `Tokens`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();
2025-11-16 17:14:38.457 +03:00 [INF] Added Token MappyApplication.Data.Token
2025-11-16 17:14:38.460 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessFailedCount`, `t`.`ConcurrencyStamp`, `t`.`Email`, `t`.`EmailConfirmed`, `t`.`FirstName`, `t`.`LastName`, `t`.`LockoutEnabled`, `t`.`LockoutEnd`, `t`.`NormalizedEmail`, `t`.`NormalizedUserName`, `t`.`PasswordHash`, `t`.`PhoneNumber`, `t`.`PhoneNumberConfirmed`, `t`.`SecurityStamp`, `t`.`TwoFactorEnabled`, `t`.`UserName`, `w`.`Id`, `w`.`Cadence`, `w`.`CityName`, `w`.`Coords`, `w`.`Date`, `w`.`Distance`, `w`.`Duration`, `w`.`Emoji`, `w`.`Pace`, `w`.`Type`, `w`.`UserId`, `c`.`Id`, `c`.`CityName`, `c`.`Country`, `c`.`Date`, `c`.`Emoji`, `c`.`Lat`, `c`.`Lng`, `c`.`Notes`, `c`.`UserId`
FROM (
    SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`FirstName`, `a`.`LastName`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`
    FROM `AspNetUsers` AS `a`
    WHERE `a`.`Id` = @__user_Id_0
    LIMIT 2
) AS `t`
LEFT JOIN `Workouts` AS `w` ON `t`.`Id` = `w`.`UserId`
LEFT JOIN `Cities` AS `c` ON `t`.`Id` = `c`.`UserId`
ORDER BY `t`.`Id`, `w`.`Id`
2025-11-16 17:14:38.461 +03:00 [INF] Executing ObjectResult, writing value of type 'MappyApplication.Models.user.AuthResponse'.
2025-11-16 17:14:38.461 +03:00 [INF] Executed action MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication) in 21.743ms
2025-11-16 17:14:38.461 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication)'
2025-11-16 17:14:38.461 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:8080/api/v1/auth/refresh-token - 200 null application/json; charset=utf-8 52.6025ms
2025-11-16 17:14:56.693 +03:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:8080/api/v1/auth/refresh-token - null null
2025-11-16 17:14:56.699 +03:00 [INF] CORS policy execution successful.
2025-11-16 17:14:56.699 +03:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:8080/api/v1/auth/refresh-token - 204 null null 6.1532ms
2025-11-16 17:14:56.704 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:8080/api/v1/auth/refresh-token - null 0
2025-11-16 17:14:56.704 +03:00 [INF] CORS policy execution successful.
2025-11-16 17:14:56.779 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 17:14:56.780 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication)'
2025-11-16 17:14:56.781 +03:00 [INF] Route matched with {action = "RefreshToken", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.user.AuthResponse] RefreshToken() on controller MappyApplication.Controllers.AuthController (MappyApplication).
2025-11-16 17:14:56.782 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__refreshToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`RefreshToken` = @__refreshToken_0
LIMIT 2
2025-11-16 17:14:56.786 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`FirstName`, `a`.`LastName`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`
FROM `AspNetUsers` AS `a`
WHERE `a`.`Id` = @__p_0
LIMIT 1
2025-11-16 17:14:56.790 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']

        UPDATE TOKENS
        SET Revoked = true, Expired = true
        WHERE UserId = @p0
          AND DeviceId = @p1
          AND Revoked = false
          AND Expired = false
2025-11-16 17:14:56.792 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a0`.`Name`
FROM `AspNetUserRoles` AS `a`
INNER JOIN `AspNetRoles` AS `a0` ON `a`.`RoleId` = `a0`.`Id`
WHERE `a`.`UserId` = @__userId_0
2025-11-16 17:14:56.795 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ClaimType`, `a`.`ClaimValue`, `a`.`UserId`
FROM `AspNetUserClaims` AS `a`
WHERE `a`.`UserId` = @__user_Id_0
2025-11-16 17:14:56.798 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a0`.`Name`
FROM `AspNetUserRoles` AS `a`
INNER JOIN `AspNetRoles` AS `a0` ON `a`.`RoleId` = `a0`.`Id`
WHERE `a`.`UserId` = @__userId_0
2025-11-16 17:14:56.804 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ClaimType`, `a`.`ClaimValue`, `a`.`UserId`
FROM `AspNetUserClaims` AS `a`
WHERE `a`.`UserId` = @__user_Id_0
2025-11-16 17:14:56.829 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (DbType = DateTime), @p2='?' (Size = 4000), @p3='?' (DbType = Boolean), @p4='?' (Size = 4000), @p5='?' (DbType = Boolean), @p6='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO `Tokens` (`AccessToken`, `CreatedAt`, `DeviceId`, `Expired`, `RefreshToken`, `Revoked`, `UserId`)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6);
SELECT `Id`
FROM `Tokens`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();
2025-11-16 17:14:56.836 +03:00 [INF] Added Token MappyApplication.Data.Token
2025-11-16 17:14:56.843 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessFailedCount`, `t`.`ConcurrencyStamp`, `t`.`Email`, `t`.`EmailConfirmed`, `t`.`FirstName`, `t`.`LastName`, `t`.`LockoutEnabled`, `t`.`LockoutEnd`, `t`.`NormalizedEmail`, `t`.`NormalizedUserName`, `t`.`PasswordHash`, `t`.`PhoneNumber`, `t`.`PhoneNumberConfirmed`, `t`.`SecurityStamp`, `t`.`TwoFactorEnabled`, `t`.`UserName`, `w`.`Id`, `w`.`Cadence`, `w`.`CityName`, `w`.`Coords`, `w`.`Date`, `w`.`Distance`, `w`.`Duration`, `w`.`Emoji`, `w`.`Pace`, `w`.`Type`, `w`.`UserId`, `c`.`Id`, `c`.`CityName`, `c`.`Country`, `c`.`Date`, `c`.`Emoji`, `c`.`Lat`, `c`.`Lng`, `c`.`Notes`, `c`.`UserId`
FROM (
    SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`FirstName`, `a`.`LastName`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`
    FROM `AspNetUsers` AS `a`
    WHERE `a`.`Id` = @__user_Id_0
    LIMIT 2
) AS `t`
LEFT JOIN `Workouts` AS `w` ON `t`.`Id` = `w`.`UserId`
LEFT JOIN `Cities` AS `c` ON `t`.`Id` = `c`.`UserId`
ORDER BY `t`.`Id`, `w`.`Id`
2025-11-16 17:14:56.852 +03:00 [INF] Executing ObjectResult, writing value of type 'MappyApplication.Models.user.AuthResponse'.
2025-11-16 17:14:56.852 +03:00 [INF] Executed action MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication) in 71.3559ms
2025-11-16 17:14:56.852 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication)'
2025-11-16 17:14:56.852 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:8080/api/v1/auth/refresh-token - 200 null application/json; charset=utf-8 148.5376ms
2025-11-16 17:15:43.320 +03:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:8080/api/v1/auth/refresh-token - null null
2025-11-16 17:15:43.326 +03:00 [INF] CORS policy execution successful.
2025-11-16 17:15:43.326 +03:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:8080/api/v1/auth/refresh-token - 204 null null 5.9456ms
2025-11-16 17:15:43.328 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:8080/api/v1/auth/refresh-token - null 0
2025-11-16 17:15:43.328 +03:00 [INF] CORS policy execution successful.
2025-11-16 17:15:43.402 +03:00 [INF] Executed DbCommand (22ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 17:15:43.423 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication)'
2025-11-16 17:15:43.433 +03:00 [INF] Route matched with {action = "RefreshToken", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.user.AuthResponse] RefreshToken() on controller MappyApplication.Controllers.AuthController (MappyApplication).
2025-11-16 17:15:43.441 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__refreshToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`RefreshToken` = @__refreshToken_0
LIMIT 2
2025-11-16 17:15:43.451 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`FirstName`, `a`.`LastName`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`
FROM `AspNetUsers` AS `a`
WHERE `a`.`Id` = @__p_0
LIMIT 1
2025-11-16 17:15:43.458 +03:00 [INF] Executed DbCommand (6ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']

        UPDATE TOKENS
        SET Revoked = true, Expired = true
        WHERE UserId = @p0
          AND DeviceId = @p1
          AND Revoked = false
          AND Expired = false
2025-11-16 17:15:43.461 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a0`.`Name`
FROM `AspNetUserRoles` AS `a`
INNER JOIN `AspNetRoles` AS `a0` ON `a`.`RoleId` = `a0`.`Id`
WHERE `a`.`UserId` = @__userId_0
2025-11-16 17:15:43.461 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ClaimType`, `a`.`ClaimValue`, `a`.`UserId`
FROM `AspNetUserClaims` AS `a`
WHERE `a`.`UserId` = @__user_Id_0
2025-11-16 17:15:43.463 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a0`.`Name`
FROM `AspNetUserRoles` AS `a`
INNER JOIN `AspNetRoles` AS `a0` ON `a`.`RoleId` = `a0`.`Id`
WHERE `a`.`UserId` = @__userId_0
2025-11-16 17:15:43.465 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ClaimType`, `a`.`ClaimValue`, `a`.`UserId`
FROM `AspNetUserClaims` AS `a`
WHERE `a`.`UserId` = @__user_Id_0
2025-11-16 17:15:43.472 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (DbType = DateTime), @p2='?' (Size = 4000), @p3='?' (DbType = Boolean), @p4='?' (Size = 4000), @p5='?' (DbType = Boolean), @p6='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO `Tokens` (`AccessToken`, `CreatedAt`, `DeviceId`, `Expired`, `RefreshToken`, `Revoked`, `UserId`)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6);
SELECT `Id`
FROM `Tokens`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();
2025-11-16 17:15:43.475 +03:00 [INF] Added Token MappyApplication.Data.Token
2025-11-16 17:15:43.479 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessFailedCount`, `t`.`ConcurrencyStamp`, `t`.`Email`, `t`.`EmailConfirmed`, `t`.`FirstName`, `t`.`LastName`, `t`.`LockoutEnabled`, `t`.`LockoutEnd`, `t`.`NormalizedEmail`, `t`.`NormalizedUserName`, `t`.`PasswordHash`, `t`.`PhoneNumber`, `t`.`PhoneNumberConfirmed`, `t`.`SecurityStamp`, `t`.`TwoFactorEnabled`, `t`.`UserName`, `w`.`Id`, `w`.`Cadence`, `w`.`CityName`, `w`.`Coords`, `w`.`Date`, `w`.`Distance`, `w`.`Duration`, `w`.`Emoji`, `w`.`Pace`, `w`.`Type`, `w`.`UserId`, `c`.`Id`, `c`.`CityName`, `c`.`Country`, `c`.`Date`, `c`.`Emoji`, `c`.`Lat`, `c`.`Lng`, `c`.`Notes`, `c`.`UserId`
FROM (
    SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`FirstName`, `a`.`LastName`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`
    FROM `AspNetUsers` AS `a`
    WHERE `a`.`Id` = @__user_Id_0
    LIMIT 2
) AS `t`
LEFT JOIN `Workouts` AS `w` ON `t`.`Id` = `w`.`UserId`
LEFT JOIN `Cities` AS `c` ON `t`.`Id` = `c`.`UserId`
ORDER BY `t`.`Id`, `w`.`Id`
2025-11-16 17:15:43.479 +03:00 [INF] Executing ObjectResult, writing value of type 'MappyApplication.Models.user.AuthResponse'.
2025-11-16 17:15:43.480 +03:00 [INF] Executed action MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication) in 46.4416ms
2025-11-16 17:15:43.480 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication)'
2025-11-16 17:15:43.480 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:8080/api/v1/auth/refresh-token - 200 null application/json; charset=utf-8 152.2325ms
2025-11-16 17:15:45.045 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:8080/api/v1/auth/refresh-token - null 0
2025-11-16 17:15:45.049 +03:00 [INF] CORS policy execution successful.
2025-11-16 17:15:45.100 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 17:15:45.104 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication)'
2025-11-16 17:15:45.113 +03:00 [INF] Route matched with {action = "RefreshToken", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.user.AuthResponse] RefreshToken() on controller MappyApplication.Controllers.AuthController (MappyApplication).
2025-11-16 17:15:45.117 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__refreshToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`RefreshToken` = @__refreshToken_0
LIMIT 2
2025-11-16 17:15:45.121 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`FirstName`, `a`.`LastName`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`
FROM `AspNetUsers` AS `a`
WHERE `a`.`Id` = @__p_0
LIMIT 1
2025-11-16 17:15:45.124 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']

        UPDATE TOKENS
        SET Revoked = true, Expired = true
        WHERE UserId = @p0
          AND DeviceId = @p1
          AND Revoked = false
          AND Expired = false
2025-11-16 17:15:45.127 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a0`.`Name`
FROM `AspNetUserRoles` AS `a`
INNER JOIN `AspNetRoles` AS `a0` ON `a`.`RoleId` = `a0`.`Id`
WHERE `a`.`UserId` = @__userId_0
2025-11-16 17:15:45.133 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ClaimType`, `a`.`ClaimValue`, `a`.`UserId`
FROM `AspNetUserClaims` AS `a`
WHERE `a`.`UserId` = @__user_Id_0
2025-11-16 17:15:45.134 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a0`.`Name`
FROM `AspNetUserRoles` AS `a`
INNER JOIN `AspNetRoles` AS `a0` ON `a`.`RoleId` = `a0`.`Id`
WHERE `a`.`UserId` = @__userId_0
2025-11-16 17:15:45.139 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ClaimType`, `a`.`ClaimValue`, `a`.`UserId`
FROM `AspNetUserClaims` AS `a`
WHERE `a`.`UserId` = @__user_Id_0
2025-11-16 17:15:45.157 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (DbType = DateTime), @p2='?' (Size = 4000), @p3='?' (DbType = Boolean), @p4='?' (Size = 4000), @p5='?' (DbType = Boolean), @p6='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO `Tokens` (`AccessToken`, `CreatedAt`, `DeviceId`, `Expired`, `RefreshToken`, `Revoked`, `UserId`)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6);
SELECT `Id`
FROM `Tokens`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();
2025-11-16 17:15:45.163 +03:00 [INF] Added Token MappyApplication.Data.Token
2025-11-16 17:15:45.166 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessFailedCount`, `t`.`ConcurrencyStamp`, `t`.`Email`, `t`.`EmailConfirmed`, `t`.`FirstName`, `t`.`LastName`, `t`.`LockoutEnabled`, `t`.`LockoutEnd`, `t`.`NormalizedEmail`, `t`.`NormalizedUserName`, `t`.`PasswordHash`, `t`.`PhoneNumber`, `t`.`PhoneNumberConfirmed`, `t`.`SecurityStamp`, `t`.`TwoFactorEnabled`, `t`.`UserName`, `w`.`Id`, `w`.`Cadence`, `w`.`CityName`, `w`.`Coords`, `w`.`Date`, `w`.`Distance`, `w`.`Duration`, `w`.`Emoji`, `w`.`Pace`, `w`.`Type`, `w`.`UserId`, `c`.`Id`, `c`.`CityName`, `c`.`Country`, `c`.`Date`, `c`.`Emoji`, `c`.`Lat`, `c`.`Lng`, `c`.`Notes`, `c`.`UserId`
FROM (
    SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`FirstName`, `a`.`LastName`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`
    FROM `AspNetUsers` AS `a`
    WHERE `a`.`Id` = @__user_Id_0
    LIMIT 2
) AS `t`
LEFT JOIN `Workouts` AS `w` ON `t`.`Id` = `w`.`UserId`
LEFT JOIN `Cities` AS `c` ON `t`.`Id` = `c`.`UserId`
ORDER BY `t`.`Id`, `w`.`Id`
2025-11-16 17:15:45.167 +03:00 [INF] Executing ObjectResult, writing value of type 'MappyApplication.Models.user.AuthResponse'.
2025-11-16 17:15:45.167 +03:00 [INF] Executed action MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication) in 53.8787ms
2025-11-16 17:15:45.168 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication)'
2025-11-16 17:15:45.168 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:8080/api/v1/auth/refresh-token - 200 null application/json; charset=utf-8 124.3879ms
2025-11-16 17:15:58.462 +03:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:8080/api/v1/auth/refresh-token - null null
2025-11-16 17:15:58.466 +03:00 [INF] CORS policy execution successful.
2025-11-16 17:15:58.467 +03:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:8080/api/v1/auth/refresh-token - 204 null null 6.2045ms
2025-11-16 17:15:58.468 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:8080/api/v1/auth/refresh-token - null 0
2025-11-16 17:15:58.468 +03:00 [INF] CORS policy execution successful.
2025-11-16 17:15:58.567 +03:00 [INF] Executed DbCommand (4ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 17:15:58.569 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication)'
2025-11-16 17:15:58.569 +03:00 [INF] Route matched with {action = "RefreshToken", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.user.AuthResponse] RefreshToken() on controller MappyApplication.Controllers.AuthController (MappyApplication).
2025-11-16 17:15:58.573 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[@__refreshToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`RefreshToken` = @__refreshToken_0
LIMIT 2
2025-11-16 17:15:58.588 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`FirstName`, `a`.`LastName`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`
FROM `AspNetUsers` AS `a`
WHERE `a`.`Id` = @__p_0
LIMIT 1
2025-11-16 17:15:58.605 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']

        UPDATE TOKENS
        SET Revoked = true, Expired = true
        WHERE UserId = @p0
          AND DeviceId = @p1
          AND Revoked = false
          AND Expired = false
2025-11-16 17:15:58.608 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a0`.`Name`
FROM `AspNetUserRoles` AS `a`
INNER JOIN `AspNetRoles` AS `a0` ON `a`.`RoleId` = `a0`.`Id`
WHERE `a`.`UserId` = @__userId_0
2025-11-16 17:15:58.614 +03:00 [INF] Executed DbCommand (4ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ClaimType`, `a`.`ClaimValue`, `a`.`UserId`
FROM `AspNetUserClaims` AS `a`
WHERE `a`.`UserId` = @__user_Id_0
2025-11-16 17:15:58.617 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a0`.`Name`
FROM `AspNetUserRoles` AS `a`
INNER JOIN `AspNetRoles` AS `a0` ON `a`.`RoleId` = `a0`.`Id`
WHERE `a`.`UserId` = @__userId_0
2025-11-16 17:15:58.618 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ClaimType`, `a`.`ClaimValue`, `a`.`UserId`
FROM `AspNetUserClaims` AS `a`
WHERE `a`.`UserId` = @__user_Id_0
2025-11-16 17:15:58.625 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (DbType = DateTime), @p2='?' (Size = 4000), @p3='?' (DbType = Boolean), @p4='?' (Size = 4000), @p5='?' (DbType = Boolean), @p6='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO `Tokens` (`AccessToken`, `CreatedAt`, `DeviceId`, `Expired`, `RefreshToken`, `Revoked`, `UserId`)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6);
SELECT `Id`
FROM `Tokens`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();
2025-11-16 17:15:58.628 +03:00 [INF] Added Token MappyApplication.Data.Token
2025-11-16 17:15:58.633 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessFailedCount`, `t`.`ConcurrencyStamp`, `t`.`Email`, `t`.`EmailConfirmed`, `t`.`FirstName`, `t`.`LastName`, `t`.`LockoutEnabled`, `t`.`LockoutEnd`, `t`.`NormalizedEmail`, `t`.`NormalizedUserName`, `t`.`PasswordHash`, `t`.`PhoneNumber`, `t`.`PhoneNumberConfirmed`, `t`.`SecurityStamp`, `t`.`TwoFactorEnabled`, `t`.`UserName`, `w`.`Id`, `w`.`Cadence`, `w`.`CityName`, `w`.`Coords`, `w`.`Date`, `w`.`Distance`, `w`.`Duration`, `w`.`Emoji`, `w`.`Pace`, `w`.`Type`, `w`.`UserId`, `c`.`Id`, `c`.`CityName`, `c`.`Country`, `c`.`Date`, `c`.`Emoji`, `c`.`Lat`, `c`.`Lng`, `c`.`Notes`, `c`.`UserId`
FROM (
    SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`FirstName`, `a`.`LastName`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`
    FROM `AspNetUsers` AS `a`
    WHERE `a`.`Id` = @__user_Id_0
    LIMIT 2
) AS `t`
LEFT JOIN `Workouts` AS `w` ON `t`.`Id` = `w`.`UserId`
LEFT JOIN `Cities` AS `c` ON `t`.`Id` = `c`.`UserId`
ORDER BY `t`.`Id`, `w`.`Id`
2025-11-16 17:15:58.637 +03:00 [INF] Executing ObjectResult, writing value of type 'MappyApplication.Models.user.AuthResponse'.
2025-11-16 17:15:58.637 +03:00 [INF] Executed action MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication) in 68.2494ms
2025-11-16 17:15:58.637 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication)'
2025-11-16 17:15:58.637 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:8080/api/v1/auth/refresh-token - 200 null application/json; charset=utf-8 169.5635ms
2025-11-16 17:16:05.720 +03:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:8080/api/v1/auth/refresh-token - null null
2025-11-16 17:16:05.723 +03:00 [INF] CORS policy execution successful.
2025-11-16 17:16:05.730 +03:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:8080/api/v1/auth/refresh-token - 204 null null 6.1312ms
2025-11-16 17:16:05.732 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:8080/api/v1/auth/refresh-token - null 0
2025-11-16 17:16:05.732 +03:00 [INF] CORS policy execution successful.
2025-11-16 17:16:05.779 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 17:16:05.787 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication)'
2025-11-16 17:16:05.787 +03:00 [INF] Route matched with {action = "RefreshToken", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.user.AuthResponse] RefreshToken() on controller MappyApplication.Controllers.AuthController (MappyApplication).
2025-11-16 17:16:05.789 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__refreshToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`RefreshToken` = @__refreshToken_0
LIMIT 2
2025-11-16 17:16:05.794 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`FirstName`, `a`.`LastName`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`
FROM `AspNetUsers` AS `a`
WHERE `a`.`Id` = @__p_0
LIMIT 1
2025-11-16 17:16:05.802 +03:00 [INF] Executed DbCommand (5ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']

        UPDATE TOKENS
        SET Revoked = true, Expired = true
        WHERE UserId = @p0
          AND DeviceId = @p1
          AND Revoked = false
          AND Expired = false
2025-11-16 17:16:05.805 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a0`.`Name`
FROM `AspNetUserRoles` AS `a`
INNER JOIN `AspNetRoles` AS `a0` ON `a`.`RoleId` = `a0`.`Id`
WHERE `a`.`UserId` = @__userId_0
2025-11-16 17:16:05.809 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ClaimType`, `a`.`ClaimValue`, `a`.`UserId`
FROM `AspNetUserClaims` AS `a`
WHERE `a`.`UserId` = @__user_Id_0
2025-11-16 17:16:05.811 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a0`.`Name`
FROM `AspNetUserRoles` AS `a`
INNER JOIN `AspNetRoles` AS `a0` ON `a`.`RoleId` = `a0`.`Id`
WHERE `a`.`UserId` = @__userId_0
2025-11-16 17:16:05.812 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ClaimType`, `a`.`ClaimValue`, `a`.`UserId`
FROM `AspNetUserClaims` AS `a`
WHERE `a`.`UserId` = @__user_Id_0
2025-11-16 17:16:05.818 +03:00 [INF] Executed DbCommand (4ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (DbType = DateTime), @p2='?' (Size = 4000), @p3='?' (DbType = Boolean), @p4='?' (Size = 4000), @p5='?' (DbType = Boolean), @p6='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO `Tokens` (`AccessToken`, `CreatedAt`, `DeviceId`, `Expired`, `RefreshToken`, `Revoked`, `UserId`)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6);
SELECT `Id`
FROM `Tokens`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();
2025-11-16 17:16:05.820 +03:00 [INF] Added Token MappyApplication.Data.Token
2025-11-16 17:16:05.822 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessFailedCount`, `t`.`ConcurrencyStamp`, `t`.`Email`, `t`.`EmailConfirmed`, `t`.`FirstName`, `t`.`LastName`, `t`.`LockoutEnabled`, `t`.`LockoutEnd`, `t`.`NormalizedEmail`, `t`.`NormalizedUserName`, `t`.`PasswordHash`, `t`.`PhoneNumber`, `t`.`PhoneNumberConfirmed`, `t`.`SecurityStamp`, `t`.`TwoFactorEnabled`, `t`.`UserName`, `w`.`Id`, `w`.`Cadence`, `w`.`CityName`, `w`.`Coords`, `w`.`Date`, `w`.`Distance`, `w`.`Duration`, `w`.`Emoji`, `w`.`Pace`, `w`.`Type`, `w`.`UserId`, `c`.`Id`, `c`.`CityName`, `c`.`Country`, `c`.`Date`, `c`.`Emoji`, `c`.`Lat`, `c`.`Lng`, `c`.`Notes`, `c`.`UserId`
FROM (
    SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`FirstName`, `a`.`LastName`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`
    FROM `AspNetUsers` AS `a`
    WHERE `a`.`Id` = @__user_Id_0
    LIMIT 2
) AS `t`
LEFT JOIN `Workouts` AS `w` ON `t`.`Id` = `w`.`UserId`
LEFT JOIN `Cities` AS `c` ON `t`.`Id` = `c`.`UserId`
ORDER BY `t`.`Id`, `w`.`Id`
2025-11-16 17:16:05.823 +03:00 [INF] Executing ObjectResult, writing value of type 'MappyApplication.Models.user.AuthResponse'.
2025-11-16 17:16:05.823 +03:00 [INF] Executed action MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication) in 35.9487ms
2025-11-16 17:16:05.823 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication)'
2025-11-16 17:16:05.823 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:8080/api/v1/auth/refresh-token - 200 null application/json; charset=utf-8 91.0621ms
2025-11-16 17:16:13.150 +03:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:8080/api/v1/auth/refresh-token - null null
2025-11-16 17:16:13.156 +03:00 [INF] CORS policy execution successful.
2025-11-16 17:16:13.156 +03:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:8080/api/v1/auth/refresh-token - 204 null null 7.0802ms
2025-11-16 17:16:13.159 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:8080/api/v1/auth/refresh-token - null 0
2025-11-16 17:16:13.161 +03:00 [INF] CORS policy execution successful.
2025-11-16 17:16:13.218 +03:00 [INF] Executed DbCommand (4ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 17:16:13.220 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication)'
2025-11-16 17:16:13.220 +03:00 [INF] Route matched with {action = "RefreshToken", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.user.AuthResponse] RefreshToken() on controller MappyApplication.Controllers.AuthController (MappyApplication).
2025-11-16 17:16:13.225 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__refreshToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`RefreshToken` = @__refreshToken_0
LIMIT 2
2025-11-16 17:16:13.229 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`FirstName`, `a`.`LastName`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`
FROM `AspNetUsers` AS `a`
WHERE `a`.`Id` = @__p_0
LIMIT 1
2025-11-16 17:16:13.233 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']

        UPDATE TOKENS
        SET Revoked = true, Expired = true
        WHERE UserId = @p0
          AND DeviceId = @p1
          AND Revoked = false
          AND Expired = false
2025-11-16 17:16:13.239 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a0`.`Name`
FROM `AspNetUserRoles` AS `a`
INNER JOIN `AspNetRoles` AS `a0` ON `a`.`RoleId` = `a0`.`Id`
WHERE `a`.`UserId` = @__userId_0
2025-11-16 17:16:13.240 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ClaimType`, `a`.`ClaimValue`, `a`.`UserId`
FROM `AspNetUserClaims` AS `a`
WHERE `a`.`UserId` = @__user_Id_0
2025-11-16 17:16:13.246 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a0`.`Name`
FROM `AspNetUserRoles` AS `a`
INNER JOIN `AspNetRoles` AS `a0` ON `a`.`RoleId` = `a0`.`Id`
WHERE `a`.`UserId` = @__userId_0
2025-11-16 17:16:13.248 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ClaimType`, `a`.`ClaimValue`, `a`.`UserId`
FROM `AspNetUserClaims` AS `a`
WHERE `a`.`UserId` = @__user_Id_0
2025-11-16 17:16:13.254 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (DbType = DateTime), @p2='?' (Size = 4000), @p3='?' (DbType = Boolean), @p4='?' (Size = 4000), @p5='?' (DbType = Boolean), @p6='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO `Tokens` (`AccessToken`, `CreatedAt`, `DeviceId`, `Expired`, `RefreshToken`, `Revoked`, `UserId`)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6);
SELECT `Id`
FROM `Tokens`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();
2025-11-16 17:16:13.256 +03:00 [INF] Added Token MappyApplication.Data.Token
2025-11-16 17:16:13.260 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessFailedCount`, `t`.`ConcurrencyStamp`, `t`.`Email`, `t`.`EmailConfirmed`, `t`.`FirstName`, `t`.`LastName`, `t`.`LockoutEnabled`, `t`.`LockoutEnd`, `t`.`NormalizedEmail`, `t`.`NormalizedUserName`, `t`.`PasswordHash`, `t`.`PhoneNumber`, `t`.`PhoneNumberConfirmed`, `t`.`SecurityStamp`, `t`.`TwoFactorEnabled`, `t`.`UserName`, `w`.`Id`, `w`.`Cadence`, `w`.`CityName`, `w`.`Coords`, `w`.`Date`, `w`.`Distance`, `w`.`Duration`, `w`.`Emoji`, `w`.`Pace`, `w`.`Type`, `w`.`UserId`, `c`.`Id`, `c`.`CityName`, `c`.`Country`, `c`.`Date`, `c`.`Emoji`, `c`.`Lat`, `c`.`Lng`, `c`.`Notes`, `c`.`UserId`
FROM (
    SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`FirstName`, `a`.`LastName`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`
    FROM `AspNetUsers` AS `a`
    WHERE `a`.`Id` = @__user_Id_0
    LIMIT 2
) AS `t`
LEFT JOIN `Workouts` AS `w` ON `t`.`Id` = `w`.`UserId`
LEFT JOIN `Cities` AS `c` ON `t`.`Id` = `c`.`UserId`
ORDER BY `t`.`Id`, `w`.`Id`
2025-11-16 17:16:13.262 +03:00 [INF] Executing ObjectResult, writing value of type 'MappyApplication.Models.user.AuthResponse'.
2025-11-16 17:16:13.262 +03:00 [INF] Executed action MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication) in 42.1097ms
2025-11-16 17:16:13.262 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication)'
2025-11-16 17:16:13.262 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:8080/api/v1/auth/refresh-token - 200 null application/json; charset=utf-8 103.908ms
2025-11-16 17:16:50.443 +03:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:8080/api/v1/auth/refresh-token - null null
2025-11-16 17:16:50.445 +03:00 [INF] CORS policy execution successful.
2025-11-16 17:16:50.446 +03:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:8080/api/v1/auth/refresh-token - 204 null null 2.5087ms
2025-11-16 17:16:50.447 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:8080/api/v1/auth/refresh-token - null 0
2025-11-16 17:16:50.447 +03:00 [INF] CORS policy execution successful.
2025-11-16 17:16:50.491 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 17:16:50.495 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication)'
2025-11-16 17:16:50.496 +03:00 [INF] Route matched with {action = "RefreshToken", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.user.AuthResponse] RefreshToken() on controller MappyApplication.Controllers.AuthController (MappyApplication).
2025-11-16 17:16:50.501 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__refreshToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`RefreshToken` = @__refreshToken_0
LIMIT 2
2025-11-16 17:16:50.504 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`FirstName`, `a`.`LastName`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`
FROM `AspNetUsers` AS `a`
WHERE `a`.`Id` = @__p_0
LIMIT 1
2025-11-16 17:16:50.509 +03:00 [INF] Executed DbCommand (4ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']

        UPDATE TOKENS
        SET Revoked = true, Expired = true
        WHERE UserId = @p0
          AND DeviceId = @p1
          AND Revoked = false
          AND Expired = false
2025-11-16 17:16:50.516 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a0`.`Name`
FROM `AspNetUserRoles` AS `a`
INNER JOIN `AspNetRoles` AS `a0` ON `a`.`RoleId` = `a0`.`Id`
WHERE `a`.`UserId` = @__userId_0
2025-11-16 17:16:50.517 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ClaimType`, `a`.`ClaimValue`, `a`.`UserId`
FROM `AspNetUserClaims` AS `a`
WHERE `a`.`UserId` = @__user_Id_0
2025-11-16 17:16:50.519 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a0`.`Name`
FROM `AspNetUserRoles` AS `a`
INNER JOIN `AspNetRoles` AS `a0` ON `a`.`RoleId` = `a0`.`Id`
WHERE `a`.`UserId` = @__userId_0
2025-11-16 17:16:50.521 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ClaimType`, `a`.`ClaimValue`, `a`.`UserId`
FROM `AspNetUserClaims` AS `a`
WHERE `a`.`UserId` = @__user_Id_0
2025-11-16 17:16:50.540 +03:00 [INF] Executed DbCommand (12ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (DbType = DateTime), @p2='?' (Size = 4000), @p3='?' (DbType = Boolean), @p4='?' (Size = 4000), @p5='?' (DbType = Boolean), @p6='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO `Tokens` (`AccessToken`, `CreatedAt`, `DeviceId`, `Expired`, `RefreshToken`, `Revoked`, `UserId`)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6);
SELECT `Id`
FROM `Tokens`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();
2025-11-16 17:16:50.561 +03:00 [INF] Added Token MappyApplication.Data.Token
2025-11-16 17:16:50.566 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessFailedCount`, `t`.`ConcurrencyStamp`, `t`.`Email`, `t`.`EmailConfirmed`, `t`.`FirstName`, `t`.`LastName`, `t`.`LockoutEnabled`, `t`.`LockoutEnd`, `t`.`NormalizedEmail`, `t`.`NormalizedUserName`, `t`.`PasswordHash`, `t`.`PhoneNumber`, `t`.`PhoneNumberConfirmed`, `t`.`SecurityStamp`, `t`.`TwoFactorEnabled`, `t`.`UserName`, `w`.`Id`, `w`.`Cadence`, `w`.`CityName`, `w`.`Coords`, `w`.`Date`, `w`.`Distance`, `w`.`Duration`, `w`.`Emoji`, `w`.`Pace`, `w`.`Type`, `w`.`UserId`, `c`.`Id`, `c`.`CityName`, `c`.`Country`, `c`.`Date`, `c`.`Emoji`, `c`.`Lat`, `c`.`Lng`, `c`.`Notes`, `c`.`UserId`
FROM (
    SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`FirstName`, `a`.`LastName`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`
    FROM `AspNetUsers` AS `a`
    WHERE `a`.`Id` = @__user_Id_0
    LIMIT 2
) AS `t`
LEFT JOIN `Workouts` AS `w` ON `t`.`Id` = `w`.`UserId`
LEFT JOIN `Cities` AS `c` ON `t`.`Id` = `c`.`UserId`
ORDER BY `t`.`Id`, `w`.`Id`
2025-11-16 17:16:50.567 +03:00 [INF] Executing ObjectResult, writing value of type 'MappyApplication.Models.user.AuthResponse'.
2025-11-16 17:16:50.567 +03:00 [INF] Executed action MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication) in 70.5936ms
2025-11-16 17:16:50.567 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication)'
2025-11-16 17:16:50.567 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:8080/api/v1/auth/refresh-token - 200 null application/json; charset=utf-8 120.6177ms
2025-11-16 17:17:08.124 +03:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:8080/api/v1/auth/refresh-token - null null
2025-11-16 17:17:08.129 +03:00 [INF] CORS policy execution successful.
2025-11-16 17:17:08.130 +03:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:8080/api/v1/auth/refresh-token - 204 null null 5.657ms
2025-11-16 17:17:08.131 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:8080/api/v1/auth/refresh-token - null 0
2025-11-16 17:17:08.131 +03:00 [INF] CORS policy execution successful.
2025-11-16 17:17:08.179 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 17:17:08.180 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication)'
2025-11-16 17:17:08.182 +03:00 [INF] Route matched with {action = "RefreshToken", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.user.AuthResponse] RefreshToken() on controller MappyApplication.Controllers.AuthController (MappyApplication).
2025-11-16 17:17:08.190 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__refreshToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`RefreshToken` = @__refreshToken_0
LIMIT 2
2025-11-16 17:17:08.203 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__p_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`FirstName`, `a`.`LastName`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`
FROM `AspNetUsers` AS `a`
WHERE `a`.`Id` = @__p_0
LIMIT 1
2025-11-16 17:17:08.208 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']

        UPDATE TOKENS
        SET Revoked = true, Expired = true
        WHERE UserId = @p0
          AND DeviceId = @p1
          AND Revoked = false
          AND Expired = false
2025-11-16 17:17:08.215 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a0`.`Name`
FROM `AspNetUserRoles` AS `a`
INNER JOIN `AspNetRoles` AS `a0` ON `a`.`RoleId` = `a0`.`Id`
WHERE `a`.`UserId` = @__userId_0
2025-11-16 17:17:08.217 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ClaimType`, `a`.`ClaimValue`, `a`.`UserId`
FROM `AspNetUserClaims` AS `a`
WHERE `a`.`UserId` = @__user_Id_0
2025-11-16 17:17:08.228 +03:00 [INF] Executed DbCommand (5ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a0`.`Name`
FROM `AspNetUserRoles` AS `a`
INNER JOIN `AspNetRoles` AS `a0` ON `a`.`RoleId` = `a0`.`Id`
WHERE `a`.`UserId` = @__userId_0
2025-11-16 17:17:08.230 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ClaimType`, `a`.`ClaimValue`, `a`.`UserId`
FROM `AspNetUserClaims` AS `a`
WHERE `a`.`UserId` = @__user_Id_0
2025-11-16 17:17:08.245 +03:00 [INF] Executed DbCommand (5ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (DbType = DateTime), @p2='?' (Size = 4000), @p3='?' (DbType = Boolean), @p4='?' (Size = 4000), @p5='?' (DbType = Boolean), @p6='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO `Tokens` (`AccessToken`, `CreatedAt`, `DeviceId`, `Expired`, `RefreshToken`, `Revoked`, `UserId`)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6);
SELECT `Id`
FROM `Tokens`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();
2025-11-16 17:17:08.247 +03:00 [INF] Added Token MappyApplication.Data.Token
2025-11-16 17:17:08.251 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessFailedCount`, `t`.`ConcurrencyStamp`, `t`.`Email`, `t`.`EmailConfirmed`, `t`.`FirstName`, `t`.`LastName`, `t`.`LockoutEnabled`, `t`.`LockoutEnd`, `t`.`NormalizedEmail`, `t`.`NormalizedUserName`, `t`.`PasswordHash`, `t`.`PhoneNumber`, `t`.`PhoneNumberConfirmed`, `t`.`SecurityStamp`, `t`.`TwoFactorEnabled`, `t`.`UserName`, `w`.`Id`, `w`.`Cadence`, `w`.`CityName`, `w`.`Coords`, `w`.`Date`, `w`.`Distance`, `w`.`Duration`, `w`.`Emoji`, `w`.`Pace`, `w`.`Type`, `w`.`UserId`, `c`.`Id`, `c`.`CityName`, `c`.`Country`, `c`.`Date`, `c`.`Emoji`, `c`.`Lat`, `c`.`Lng`, `c`.`Notes`, `c`.`UserId`
FROM (
    SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`FirstName`, `a`.`LastName`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`
    FROM `AspNetUsers` AS `a`
    WHERE `a`.`Id` = @__user_Id_0
    LIMIT 2
) AS `t`
LEFT JOIN `Workouts` AS `w` ON `t`.`Id` = `w`.`UserId`
LEFT JOIN `Cities` AS `c` ON `t`.`Id` = `c`.`UserId`
ORDER BY `t`.`Id`, `w`.`Id`
2025-11-16 17:17:08.252 +03:00 [INF] Executing ObjectResult, writing value of type 'MappyApplication.Models.user.AuthResponse'.
2025-11-16 17:17:08.267 +03:00 [INF] Executed action MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication) in 85.3347ms
2025-11-16 17:17:08.268 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication)'
2025-11-16 17:17:08.268 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:8080/api/v1/auth/refresh-token - 200 null application/json; charset=utf-8 136.7552ms
2025-11-16 17:18:18.459 +03:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:8080/api/v1/auth/refresh-token - null null
2025-11-16 17:18:18.464 +03:00 [INF] CORS policy execution successful.
2025-11-16 17:18:18.464 +03:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:8080/api/v1/auth/refresh-token - 204 null null 6.946ms
2025-11-16 17:18:18.466 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:8080/api/v1/auth/refresh-token - null 0
2025-11-16 17:18:18.466 +03:00 [INF] CORS policy execution successful.
2025-11-16 17:18:18.536 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 17:18:18.537 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication)'
2025-11-16 17:18:18.537 +03:00 [INF] Route matched with {action = "RefreshToken", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.user.AuthResponse] RefreshToken() on controller MappyApplication.Controllers.AuthController (MappyApplication).
2025-11-16 17:18:18.539 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__refreshToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`RefreshToken` = @__refreshToken_0
LIMIT 2
2025-11-16 17:18:18.543 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`FirstName`, `a`.`LastName`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`
FROM `AspNetUsers` AS `a`
WHERE `a`.`Id` = @__p_0
LIMIT 1
2025-11-16 17:18:18.549 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']

        UPDATE TOKENS
        SET Revoked = true, Expired = true
        WHERE UserId = @p0
          AND DeviceId = @p1
          AND Revoked = false
          AND Expired = false
2025-11-16 17:18:18.554 +03:00 [INF] Executed DbCommand (4ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a0`.`Name`
FROM `AspNetUserRoles` AS `a`
INNER JOIN `AspNetRoles` AS `a0` ON `a`.`RoleId` = `a0`.`Id`
WHERE `a`.`UserId` = @__userId_0
2025-11-16 17:18:18.557 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ClaimType`, `a`.`ClaimValue`, `a`.`UserId`
FROM `AspNetUserClaims` AS `a`
WHERE `a`.`UserId` = @__user_Id_0
2025-11-16 17:18:18.559 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a0`.`Name`
FROM `AspNetUserRoles` AS `a`
INNER JOIN `AspNetRoles` AS `a0` ON `a`.`RoleId` = `a0`.`Id`
WHERE `a`.`UserId` = @__userId_0
2025-11-16 17:18:18.560 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ClaimType`, `a`.`ClaimValue`, `a`.`UserId`
FROM `AspNetUserClaims` AS `a`
WHERE `a`.`UserId` = @__user_Id_0
2025-11-16 17:18:18.569 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (DbType = DateTime), @p2='?' (Size = 4000), @p3='?' (DbType = Boolean), @p4='?' (Size = 4000), @p5='?' (DbType = Boolean), @p6='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO `Tokens` (`AccessToken`, `CreatedAt`, `DeviceId`, `Expired`, `RefreshToken`, `Revoked`, `UserId`)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6);
SELECT `Id`
FROM `Tokens`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();
2025-11-16 17:18:18.569 +03:00 [INF] Added Token MappyApplication.Data.Token
2025-11-16 17:18:18.571 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessFailedCount`, `t`.`ConcurrencyStamp`, `t`.`Email`, `t`.`EmailConfirmed`, `t`.`FirstName`, `t`.`LastName`, `t`.`LockoutEnabled`, `t`.`LockoutEnd`, `t`.`NormalizedEmail`, `t`.`NormalizedUserName`, `t`.`PasswordHash`, `t`.`PhoneNumber`, `t`.`PhoneNumberConfirmed`, `t`.`SecurityStamp`, `t`.`TwoFactorEnabled`, `t`.`UserName`, `w`.`Id`, `w`.`Cadence`, `w`.`CityName`, `w`.`Coords`, `w`.`Date`, `w`.`Distance`, `w`.`Duration`, `w`.`Emoji`, `w`.`Pace`, `w`.`Type`, `w`.`UserId`, `c`.`Id`, `c`.`CityName`, `c`.`Country`, `c`.`Date`, `c`.`Emoji`, `c`.`Lat`, `c`.`Lng`, `c`.`Notes`, `c`.`UserId`
FROM (
    SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`FirstName`, `a`.`LastName`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`
    FROM `AspNetUsers` AS `a`
    WHERE `a`.`Id` = @__user_Id_0
    LIMIT 2
) AS `t`
LEFT JOIN `Workouts` AS `w` ON `t`.`Id` = `w`.`UserId`
LEFT JOIN `Cities` AS `c` ON `t`.`Id` = `c`.`UserId`
ORDER BY `t`.`Id`, `w`.`Id`
2025-11-16 17:18:18.571 +03:00 [INF] Executing ObjectResult, writing value of type 'MappyApplication.Models.user.AuthResponse'.
2025-11-16 17:18:18.571 +03:00 [INF] Executed action MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication) in 33.7582ms
2025-11-16 17:18:18.571 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication)'
2025-11-16 17:18:18.571 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:8080/api/v1/auth/refresh-token - 200 null application/json; charset=utf-8 105.8198ms
2025-11-16 17:19:38.631 +03:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:8080/api/v1/auth/refresh-token - null null
2025-11-16 17:19:38.632 +03:00 [INF] CORS policy execution successful.
2025-11-16 17:19:38.632 +03:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:8080/api/v1/auth/refresh-token - 204 null null 1.9163ms
2025-11-16 17:19:38.634 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:8080/api/v1/auth/refresh-token - null 0
2025-11-16 17:19:38.635 +03:00 [INF] CORS policy execution successful.
2025-11-16 17:19:38.670 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 17:19:38.671 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication)'
2025-11-16 17:19:38.672 +03:00 [INF] Route matched with {action = "RefreshToken", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.user.AuthResponse] RefreshToken() on controller MappyApplication.Controllers.AuthController (MappyApplication).
2025-11-16 17:19:38.675 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__refreshToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`RefreshToken` = @__refreshToken_0
LIMIT 2
2025-11-16 17:19:38.681 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__p_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`FirstName`, `a`.`LastName`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`
FROM `AspNetUsers` AS `a`
WHERE `a`.`Id` = @__p_0
LIMIT 1
2025-11-16 17:19:38.684 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']

        UPDATE TOKENS
        SET Revoked = true, Expired = true
        WHERE UserId = @p0
          AND DeviceId = @p1
          AND Revoked = false
          AND Expired = false
2025-11-16 17:19:38.685 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a0`.`Name`
FROM `AspNetUserRoles` AS `a`
INNER JOIN `AspNetRoles` AS `a0` ON `a`.`RoleId` = `a0`.`Id`
WHERE `a`.`UserId` = @__userId_0
2025-11-16 17:19:38.687 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ClaimType`, `a`.`ClaimValue`, `a`.`UserId`
FROM `AspNetUserClaims` AS `a`
WHERE `a`.`UserId` = @__user_Id_0
2025-11-16 17:19:38.688 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a0`.`Name`
FROM `AspNetUserRoles` AS `a`
INNER JOIN `AspNetRoles` AS `a0` ON `a`.`RoleId` = `a0`.`Id`
WHERE `a`.`UserId` = @__userId_0
2025-11-16 17:19:38.689 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ClaimType`, `a`.`ClaimValue`, `a`.`UserId`
FROM `AspNetUserClaims` AS `a`
WHERE `a`.`UserId` = @__user_Id_0
2025-11-16 17:19:38.692 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (DbType = DateTime), @p2='?' (Size = 4000), @p3='?' (DbType = Boolean), @p4='?' (Size = 4000), @p5='?' (DbType = Boolean), @p6='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO `Tokens` (`AccessToken`, `CreatedAt`, `DeviceId`, `Expired`, `RefreshToken`, `Revoked`, `UserId`)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6);
SELECT `Id`
FROM `Tokens`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();
2025-11-16 17:19:38.703 +03:00 [INF] Added Token MappyApplication.Data.Token
2025-11-16 17:19:38.728 +03:00 [INF] Executed DbCommand (6ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessFailedCount`, `t`.`ConcurrencyStamp`, `t`.`Email`, `t`.`EmailConfirmed`, `t`.`FirstName`, `t`.`LastName`, `t`.`LockoutEnabled`, `t`.`LockoutEnd`, `t`.`NormalizedEmail`, `t`.`NormalizedUserName`, `t`.`PasswordHash`, `t`.`PhoneNumber`, `t`.`PhoneNumberConfirmed`, `t`.`SecurityStamp`, `t`.`TwoFactorEnabled`, `t`.`UserName`, `w`.`Id`, `w`.`Cadence`, `w`.`CityName`, `w`.`Coords`, `w`.`Date`, `w`.`Distance`, `w`.`Duration`, `w`.`Emoji`, `w`.`Pace`, `w`.`Type`, `w`.`UserId`, `c`.`Id`, `c`.`CityName`, `c`.`Country`, `c`.`Date`, `c`.`Emoji`, `c`.`Lat`, `c`.`Lng`, `c`.`Notes`, `c`.`UserId`
FROM (
    SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`FirstName`, `a`.`LastName`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`
    FROM `AspNetUsers` AS `a`
    WHERE `a`.`Id` = @__user_Id_0
    LIMIT 2
) AS `t`
LEFT JOIN `Workouts` AS `w` ON `t`.`Id` = `w`.`UserId`
LEFT JOIN `Cities` AS `c` ON `t`.`Id` = `c`.`UserId`
ORDER BY `t`.`Id`, `w`.`Id`
2025-11-16 17:19:38.729 +03:00 [INF] Executing ObjectResult, writing value of type 'MappyApplication.Models.user.AuthResponse'.
2025-11-16 17:19:38.730 +03:00 [INF] Executed action MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication) in 57.8747ms
2025-11-16 17:19:38.730 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication)'
2025-11-16 17:19:38.730 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:8080/api/v1/auth/refresh-token - 200 null application/json; charset=utf-8 95.8073ms
2025-11-16 17:20:05.137 +03:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:8080/api/v1/auth/refresh-token - null null
2025-11-16 17:20:05.144 +03:00 [INF] CORS policy execution successful.
2025-11-16 17:20:05.145 +03:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:8080/api/v1/auth/refresh-token - 204 null null 7.8916ms
2025-11-16 17:20:05.147 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:8080/api/v1/auth/refresh-token - null 0
2025-11-16 17:20:05.148 +03:00 [INF] CORS policy execution successful.
2025-11-16 17:20:05.199 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 17:20:05.200 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication)'
2025-11-16 17:20:05.200 +03:00 [INF] Route matched with {action = "RefreshToken", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.user.AuthResponse] RefreshToken() on controller MappyApplication.Controllers.AuthController (MappyApplication).
2025-11-16 17:20:05.201 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__refreshToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`RefreshToken` = @__refreshToken_0
LIMIT 2
2025-11-16 17:20:05.203 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`FirstName`, `a`.`LastName`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`
FROM `AspNetUsers` AS `a`
WHERE `a`.`Id` = @__p_0
LIMIT 1
2025-11-16 17:20:05.208 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']

        UPDATE TOKENS
        SET Revoked = true, Expired = true
        WHERE UserId = @p0
          AND DeviceId = @p1
          AND Revoked = false
          AND Expired = false
2025-11-16 17:20:05.209 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a0`.`Name`
FROM `AspNetUserRoles` AS `a`
INNER JOIN `AspNetRoles` AS `a0` ON `a`.`RoleId` = `a0`.`Id`
WHERE `a`.`UserId` = @__userId_0
2025-11-16 17:20:05.210 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ClaimType`, `a`.`ClaimValue`, `a`.`UserId`
FROM `AspNetUserClaims` AS `a`
WHERE `a`.`UserId` = @__user_Id_0
2025-11-16 17:20:05.210 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a0`.`Name`
FROM `AspNetUserRoles` AS `a`
INNER JOIN `AspNetRoles` AS `a0` ON `a`.`RoleId` = `a0`.`Id`
WHERE `a`.`UserId` = @__userId_0
2025-11-16 17:20:05.210 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ClaimType`, `a`.`ClaimValue`, `a`.`UserId`
FROM `AspNetUserClaims` AS `a`
WHERE `a`.`UserId` = @__user_Id_0
2025-11-16 17:20:05.217 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (DbType = DateTime), @p2='?' (Size = 4000), @p3='?' (DbType = Boolean), @p4='?' (Size = 4000), @p5='?' (DbType = Boolean), @p6='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO `Tokens` (`AccessToken`, `CreatedAt`, `DeviceId`, `Expired`, `RefreshToken`, `Revoked`, `UserId`)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6);
SELECT `Id`
FROM `Tokens`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();
2025-11-16 17:20:05.217 +03:00 [INF] Added Token MappyApplication.Data.Token
2025-11-16 17:20:05.220 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessFailedCount`, `t`.`ConcurrencyStamp`, `t`.`Email`, `t`.`EmailConfirmed`, `t`.`FirstName`, `t`.`LastName`, `t`.`LockoutEnabled`, `t`.`LockoutEnd`, `t`.`NormalizedEmail`, `t`.`NormalizedUserName`, `t`.`PasswordHash`, `t`.`PhoneNumber`, `t`.`PhoneNumberConfirmed`, `t`.`SecurityStamp`, `t`.`TwoFactorEnabled`, `t`.`UserName`, `w`.`Id`, `w`.`Cadence`, `w`.`CityName`, `w`.`Coords`, `w`.`Date`, `w`.`Distance`, `w`.`Duration`, `w`.`Emoji`, `w`.`Pace`, `w`.`Type`, `w`.`UserId`, `c`.`Id`, `c`.`CityName`, `c`.`Country`, `c`.`Date`, `c`.`Emoji`, `c`.`Lat`, `c`.`Lng`, `c`.`Notes`, `c`.`UserId`
FROM (
    SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`FirstName`, `a`.`LastName`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`
    FROM `AspNetUsers` AS `a`
    WHERE `a`.`Id` = @__user_Id_0
    LIMIT 2
) AS `t`
LEFT JOIN `Workouts` AS `w` ON `t`.`Id` = `w`.`UserId`
LEFT JOIN `Cities` AS `c` ON `t`.`Id` = `c`.`UserId`
ORDER BY `t`.`Id`, `w`.`Id`
2025-11-16 17:20:05.220 +03:00 [INF] Executing ObjectResult, writing value of type 'MappyApplication.Models.user.AuthResponse'.
2025-11-16 17:20:05.220 +03:00 [INF] Executed action MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication) in 20.2312ms
2025-11-16 17:20:05.220 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication)'
2025-11-16 17:20:05.220 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:8080/api/v1/auth/refresh-token - 200 null application/json; charset=utf-8 73.207ms
2025-11-16 17:20:05.972 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:8080/api/v1/auth/refresh-token - null 0
2025-11-16 17:20:05.973 +03:00 [INF] CORS policy execution successful.
2025-11-16 17:20:05.995 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 17:20:05.996 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication)'
2025-11-16 17:20:05.996 +03:00 [INF] Route matched with {action = "RefreshToken", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.user.AuthResponse] RefreshToken() on controller MappyApplication.Controllers.AuthController (MappyApplication).
2025-11-16 17:20:05.997 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__refreshToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`RefreshToken` = @__refreshToken_0
LIMIT 2
2025-11-16 17:20:05.998 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`FirstName`, `a`.`LastName`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`
FROM `AspNetUsers` AS `a`
WHERE `a`.`Id` = @__p_0
LIMIT 1
2025-11-16 17:20:05.999 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']

        UPDATE TOKENS
        SET Revoked = true, Expired = true
        WHERE UserId = @p0
          AND DeviceId = @p1
          AND Revoked = false
          AND Expired = false
2025-11-16 17:20:06.000 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a0`.`Name`
FROM `AspNetUserRoles` AS `a`
INNER JOIN `AspNetRoles` AS `a0` ON `a`.`RoleId` = `a0`.`Id`
WHERE `a`.`UserId` = @__userId_0
2025-11-16 17:20:06.001 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ClaimType`, `a`.`ClaimValue`, `a`.`UserId`
FROM `AspNetUserClaims` AS `a`
WHERE `a`.`UserId` = @__user_Id_0
2025-11-16 17:20:06.001 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a0`.`Name`
FROM `AspNetUserRoles` AS `a`
INNER JOIN `AspNetRoles` AS `a0` ON `a`.`RoleId` = `a0`.`Id`
WHERE `a`.`UserId` = @__userId_0
2025-11-16 17:20:06.002 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ClaimType`, `a`.`ClaimValue`, `a`.`UserId`
FROM `AspNetUserClaims` AS `a`
WHERE `a`.`UserId` = @__user_Id_0
2025-11-16 17:20:06.004 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (DbType = DateTime), @p2='?' (Size = 4000), @p3='?' (DbType = Boolean), @p4='?' (Size = 4000), @p5='?' (DbType = Boolean), @p6='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO `Tokens` (`AccessToken`, `CreatedAt`, `DeviceId`, `Expired`, `RefreshToken`, `Revoked`, `UserId`)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6);
SELECT `Id`
FROM `Tokens`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();
2025-11-16 17:20:06.004 +03:00 [INF] Added Token MappyApplication.Data.Token
2025-11-16 17:20:06.005 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessFailedCount`, `t`.`ConcurrencyStamp`, `t`.`Email`, `t`.`EmailConfirmed`, `t`.`FirstName`, `t`.`LastName`, `t`.`LockoutEnabled`, `t`.`LockoutEnd`, `t`.`NormalizedEmail`, `t`.`NormalizedUserName`, `t`.`PasswordHash`, `t`.`PhoneNumber`, `t`.`PhoneNumberConfirmed`, `t`.`SecurityStamp`, `t`.`TwoFactorEnabled`, `t`.`UserName`, `w`.`Id`, `w`.`Cadence`, `w`.`CityName`, `w`.`Coords`, `w`.`Date`, `w`.`Distance`, `w`.`Duration`, `w`.`Emoji`, `w`.`Pace`, `w`.`Type`, `w`.`UserId`, `c`.`Id`, `c`.`CityName`, `c`.`Country`, `c`.`Date`, `c`.`Emoji`, `c`.`Lat`, `c`.`Lng`, `c`.`Notes`, `c`.`UserId`
FROM (
    SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`FirstName`, `a`.`LastName`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`
    FROM `AspNetUsers` AS `a`
    WHERE `a`.`Id` = @__user_Id_0
    LIMIT 2
) AS `t`
LEFT JOIN `Workouts` AS `w` ON `t`.`Id` = `w`.`UserId`
LEFT JOIN `Cities` AS `c` ON `t`.`Id` = `c`.`UserId`
ORDER BY `t`.`Id`, `w`.`Id`
2025-11-16 17:20:06.006 +03:00 [INF] Executing ObjectResult, writing value of type 'MappyApplication.Models.user.AuthResponse'.
2025-11-16 17:20:06.006 +03:00 [INF] Executed action MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication) in 9.8749ms
2025-11-16 17:20:06.006 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication)'
2025-11-16 17:20:06.006 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:8080/api/v1/auth/refresh-token - 200 null application/json; charset=utf-8 33.3717ms
2025-11-16 17:21:23.549 +03:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:8080/api/v1/auth/refresh-token - null null
2025-11-16 17:21:23.552 +03:00 [INF] CORS policy execution successful.
2025-11-16 17:21:23.555 +03:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:8080/api/v1/auth/refresh-token - 204 null null 4.8364ms
2025-11-16 17:21:23.558 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:8080/api/v1/auth/refresh-token - null 0
2025-11-16 17:21:23.558 +03:00 [INF] CORS policy execution successful.
2025-11-16 17:21:23.611 +03:00 [INF] Executed DbCommand (4ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 17:21:23.612 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication)'
2025-11-16 17:21:23.612 +03:00 [INF] Route matched with {action = "RefreshToken", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.user.AuthResponse] RefreshToken() on controller MappyApplication.Controllers.AuthController (MappyApplication).
2025-11-16 17:21:23.614 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__refreshToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`RefreshToken` = @__refreshToken_0
LIMIT 2
2025-11-16 17:21:23.616 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`FirstName`, `a`.`LastName`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`
FROM `AspNetUsers` AS `a`
WHERE `a`.`Id` = @__p_0
LIMIT 1
2025-11-16 17:21:23.621 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']

        UPDATE TOKENS
        SET Revoked = true, Expired = true
        WHERE UserId = @p0
          AND DeviceId = @p1
          AND Revoked = false
          AND Expired = false
2025-11-16 17:21:23.622 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a0`.`Name`
FROM `AspNetUserRoles` AS `a`
INNER JOIN `AspNetRoles` AS `a0` ON `a`.`RoleId` = `a0`.`Id`
WHERE `a`.`UserId` = @__userId_0
2025-11-16 17:21:23.623 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ClaimType`, `a`.`ClaimValue`, `a`.`UserId`
FROM `AspNetUserClaims` AS `a`
WHERE `a`.`UserId` = @__user_Id_0
2025-11-16 17:21:23.624 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a0`.`Name`
FROM `AspNetUserRoles` AS `a`
INNER JOIN `AspNetRoles` AS `a0` ON `a`.`RoleId` = `a0`.`Id`
WHERE `a`.`UserId` = @__userId_0
2025-11-16 17:21:23.624 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ClaimType`, `a`.`ClaimValue`, `a`.`UserId`
FROM `AspNetUserClaims` AS `a`
WHERE `a`.`UserId` = @__user_Id_0
2025-11-16 17:21:23.626 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (DbType = DateTime), @p2='?' (Size = 4000), @p3='?' (DbType = Boolean), @p4='?' (Size = 4000), @p5='?' (DbType = Boolean), @p6='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO `Tokens` (`AccessToken`, `CreatedAt`, `DeviceId`, `Expired`, `RefreshToken`, `Revoked`, `UserId`)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6);
SELECT `Id`
FROM `Tokens`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();
2025-11-16 17:21:23.626 +03:00 [INF] Added Token MappyApplication.Data.Token
2025-11-16 17:21:23.627 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessFailedCount`, `t`.`ConcurrencyStamp`, `t`.`Email`, `t`.`EmailConfirmed`, `t`.`FirstName`, `t`.`LastName`, `t`.`LockoutEnabled`, `t`.`LockoutEnd`, `t`.`NormalizedEmail`, `t`.`NormalizedUserName`, `t`.`PasswordHash`, `t`.`PhoneNumber`, `t`.`PhoneNumberConfirmed`, `t`.`SecurityStamp`, `t`.`TwoFactorEnabled`, `t`.`UserName`, `w`.`Id`, `w`.`Cadence`, `w`.`CityName`, `w`.`Coords`, `w`.`Date`, `w`.`Distance`, `w`.`Duration`, `w`.`Emoji`, `w`.`Pace`, `w`.`Type`, `w`.`UserId`, `c`.`Id`, `c`.`CityName`, `c`.`Country`, `c`.`Date`, `c`.`Emoji`, `c`.`Lat`, `c`.`Lng`, `c`.`Notes`, `c`.`UserId`
FROM (
    SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`FirstName`, `a`.`LastName`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`
    FROM `AspNetUsers` AS `a`
    WHERE `a`.`Id` = @__user_Id_0
    LIMIT 2
) AS `t`
LEFT JOIN `Workouts` AS `w` ON `t`.`Id` = `w`.`UserId`
LEFT JOIN `Cities` AS `c` ON `t`.`Id` = `c`.`UserId`
ORDER BY `t`.`Id`, `w`.`Id`
2025-11-16 17:21:23.627 +03:00 [INF] Executing ObjectResult, writing value of type 'MappyApplication.Models.user.AuthResponse'.
2025-11-16 17:21:23.627 +03:00 [INF] Executed action MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication) in 15.0026ms
2025-11-16 17:21:23.627 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication)'
2025-11-16 17:21:23.627 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:8080/api/v1/auth/refresh-token - 200 null application/json; charset=utf-8 69.5602ms
2025-11-16 17:22:11.948 +03:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:8080/api/v1/auth/refresh-token - null null
2025-11-16 17:22:11.954 +03:00 [INF] CORS policy execution successful.
2025-11-16 17:22:11.958 +03:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:8080/api/v1/auth/refresh-token - 204 null null 9.3299ms
2025-11-16 17:22:11.961 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:8080/api/v1/auth/refresh-token - null 0
2025-11-16 17:22:11.963 +03:00 [INF] CORS policy execution successful.
2025-11-16 17:22:12.049 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 17:22:12.052 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication)'
2025-11-16 17:22:12.052 +03:00 [INF] Route matched with {action = "RefreshToken", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.user.AuthResponse] RefreshToken() on controller MappyApplication.Controllers.AuthController (MappyApplication).
2025-11-16 17:22:12.054 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__refreshToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`RefreshToken` = @__refreshToken_0
LIMIT 2
2025-11-16 17:22:12.065 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`FirstName`, `a`.`LastName`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`
FROM `AspNetUsers` AS `a`
WHERE `a`.`Id` = @__p_0
LIMIT 1
2025-11-16 17:22:12.072 +03:00 [INF] Executed DbCommand (5ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']

        UPDATE TOKENS
        SET Revoked = true, Expired = true
        WHERE UserId = @p0
          AND DeviceId = @p1
          AND Revoked = false
          AND Expired = false
2025-11-16 17:22:12.074 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a0`.`Name`
FROM `AspNetUserRoles` AS `a`
INNER JOIN `AspNetRoles` AS `a0` ON `a`.`RoleId` = `a0`.`Id`
WHERE `a`.`UserId` = @__userId_0
2025-11-16 17:22:12.074 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ClaimType`, `a`.`ClaimValue`, `a`.`UserId`
FROM `AspNetUserClaims` AS `a`
WHERE `a`.`UserId` = @__user_Id_0
2025-11-16 17:22:12.076 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a0`.`Name`
FROM `AspNetUserRoles` AS `a`
INNER JOIN `AspNetRoles` AS `a0` ON `a`.`RoleId` = `a0`.`Id`
WHERE `a`.`UserId` = @__userId_0
2025-11-16 17:22:12.076 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ClaimType`, `a`.`ClaimValue`, `a`.`UserId`
FROM `AspNetUserClaims` AS `a`
WHERE `a`.`UserId` = @__user_Id_0
2025-11-16 17:22:12.079 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (DbType = DateTime), @p2='?' (Size = 4000), @p3='?' (DbType = Boolean), @p4='?' (Size = 4000), @p5='?' (DbType = Boolean), @p6='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO `Tokens` (`AccessToken`, `CreatedAt`, `DeviceId`, `Expired`, `RefreshToken`, `Revoked`, `UserId`)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6);
SELECT `Id`
FROM `Tokens`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();
2025-11-16 17:22:12.080 +03:00 [INF] Added Token MappyApplication.Data.Token
2025-11-16 17:22:12.083 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessFailedCount`, `t`.`ConcurrencyStamp`, `t`.`Email`, `t`.`EmailConfirmed`, `t`.`FirstName`, `t`.`LastName`, `t`.`LockoutEnabled`, `t`.`LockoutEnd`, `t`.`NormalizedEmail`, `t`.`NormalizedUserName`, `t`.`PasswordHash`, `t`.`PhoneNumber`, `t`.`PhoneNumberConfirmed`, `t`.`SecurityStamp`, `t`.`TwoFactorEnabled`, `t`.`UserName`, `w`.`Id`, `w`.`Cadence`, `w`.`CityName`, `w`.`Coords`, `w`.`Date`, `w`.`Distance`, `w`.`Duration`, `w`.`Emoji`, `w`.`Pace`, `w`.`Type`, `w`.`UserId`, `c`.`Id`, `c`.`CityName`, `c`.`Country`, `c`.`Date`, `c`.`Emoji`, `c`.`Lat`, `c`.`Lng`, `c`.`Notes`, `c`.`UserId`
FROM (
    SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`FirstName`, `a`.`LastName`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`
    FROM `AspNetUsers` AS `a`
    WHERE `a`.`Id` = @__user_Id_0
    LIMIT 2
) AS `t`
LEFT JOIN `Workouts` AS `w` ON `t`.`Id` = `w`.`UserId`
LEFT JOIN `Cities` AS `c` ON `t`.`Id` = `c`.`UserId`
ORDER BY `t`.`Id`, `w`.`Id`
2025-11-16 17:22:12.085 +03:00 [INF] Executing ObjectResult, writing value of type 'MappyApplication.Models.user.AuthResponse'.
2025-11-16 17:22:12.087 +03:00 [INF] Executed action MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication) in 34.8517ms
2025-11-16 17:22:12.087 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication)'
2025-11-16 17:22:12.087 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:8080/api/v1/auth/refresh-token - 200 null application/json; charset=utf-8 127.1541ms
2025-11-16 17:22:18.801 +03:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:8080/api/v1/auth/refresh-token - null null
2025-11-16 17:22:18.804 +03:00 [INF] CORS policy execution successful.
2025-11-16 17:22:18.805 +03:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:8080/api/v1/auth/refresh-token - 204 null null 3.7664ms
2025-11-16 17:22:18.808 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:8080/api/v1/auth/refresh-token - null 0
2025-11-16 17:22:18.808 +03:00 [INF] CORS policy execution successful.
2025-11-16 17:22:18.853 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 17:22:18.853 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication)'
2025-11-16 17:22:18.854 +03:00 [INF] Route matched with {action = "RefreshToken", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.user.AuthResponse] RefreshToken() on controller MappyApplication.Controllers.AuthController (MappyApplication).
2025-11-16 17:22:18.856 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__refreshToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`RefreshToken` = @__refreshToken_0
LIMIT 2
2025-11-16 17:22:18.858 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`FirstName`, `a`.`LastName`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`
FROM `AspNetUsers` AS `a`
WHERE `a`.`Id` = @__p_0
LIMIT 1
2025-11-16 17:22:18.863 +03:00 [INF] Executed DbCommand (4ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']

        UPDATE TOKENS
        SET Revoked = true, Expired = true
        WHERE UserId = @p0
          AND DeviceId = @p1
          AND Revoked = false
          AND Expired = false
2025-11-16 17:22:18.865 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a0`.`Name`
FROM `AspNetUserRoles` AS `a`
INNER JOIN `AspNetRoles` AS `a0` ON `a`.`RoleId` = `a0`.`Id`
WHERE `a`.`UserId` = @__userId_0
2025-11-16 17:22:18.868 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ClaimType`, `a`.`ClaimValue`, `a`.`UserId`
FROM `AspNetUserClaims` AS `a`
WHERE `a`.`UserId` = @__user_Id_0
2025-11-16 17:22:18.871 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a0`.`Name`
FROM `AspNetUserRoles` AS `a`
INNER JOIN `AspNetRoles` AS `a0` ON `a`.`RoleId` = `a0`.`Id`
WHERE `a`.`UserId` = @__userId_0
2025-11-16 17:22:18.872 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ClaimType`, `a`.`ClaimValue`, `a`.`UserId`
FROM `AspNetUserClaims` AS `a`
WHERE `a`.`UserId` = @__user_Id_0
2025-11-16 17:22:18.879 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (DbType = DateTime), @p2='?' (Size = 4000), @p3='?' (DbType = Boolean), @p4='?' (Size = 4000), @p5='?' (DbType = Boolean), @p6='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO `Tokens` (`AccessToken`, `CreatedAt`, `DeviceId`, `Expired`, `RefreshToken`, `Revoked`, `UserId`)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6);
SELECT `Id`
FROM `Tokens`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();
2025-11-16 17:22:18.880 +03:00 [INF] Added Token MappyApplication.Data.Token
2025-11-16 17:22:18.883 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessFailedCount`, `t`.`ConcurrencyStamp`, `t`.`Email`, `t`.`EmailConfirmed`, `t`.`FirstName`, `t`.`LastName`, `t`.`LockoutEnabled`, `t`.`LockoutEnd`, `t`.`NormalizedEmail`, `t`.`NormalizedUserName`, `t`.`PasswordHash`, `t`.`PhoneNumber`, `t`.`PhoneNumberConfirmed`, `t`.`SecurityStamp`, `t`.`TwoFactorEnabled`, `t`.`UserName`, `w`.`Id`, `w`.`Cadence`, `w`.`CityName`, `w`.`Coords`, `w`.`Date`, `w`.`Distance`, `w`.`Duration`, `w`.`Emoji`, `w`.`Pace`, `w`.`Type`, `w`.`UserId`, `c`.`Id`, `c`.`CityName`, `c`.`Country`, `c`.`Date`, `c`.`Emoji`, `c`.`Lat`, `c`.`Lng`, `c`.`Notes`, `c`.`UserId`
FROM (
    SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`FirstName`, `a`.`LastName`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`
    FROM `AspNetUsers` AS `a`
    WHERE `a`.`Id` = @__user_Id_0
    LIMIT 2
) AS `t`
LEFT JOIN `Workouts` AS `w` ON `t`.`Id` = `w`.`UserId`
LEFT JOIN `Cities` AS `c` ON `t`.`Id` = `c`.`UserId`
ORDER BY `t`.`Id`, `w`.`Id`
2025-11-16 17:22:18.883 +03:00 [INF] Executing ObjectResult, writing value of type 'MappyApplication.Models.user.AuthResponse'.
2025-11-16 17:22:18.884 +03:00 [INF] Executed action MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication) in 30.0558ms
2025-11-16 17:22:18.884 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication)'
2025-11-16 17:22:18.884 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:8080/api/v1/auth/refresh-token - 200 null application/json; charset=utf-8 76.5002ms
2025-11-16 17:22:20.802 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:8080/api/v1/auth/refresh-token - null 0
2025-11-16 17:22:20.803 +03:00 [INF] CORS policy execution successful.
2025-11-16 17:22:20.834 +03:00 [INF] Executed DbCommand (6ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 17:22:20.834 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication)'
2025-11-16 17:22:20.835 +03:00 [INF] Route matched with {action = "RefreshToken", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.user.AuthResponse] RefreshToken() on controller MappyApplication.Controllers.AuthController (MappyApplication).
2025-11-16 17:22:20.839 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__refreshToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`RefreshToken` = @__refreshToken_0
LIMIT 2
2025-11-16 17:22:20.841 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`FirstName`, `a`.`LastName`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`
FROM `AspNetUsers` AS `a`
WHERE `a`.`Id` = @__p_0
LIMIT 1
2025-11-16 17:22:20.843 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']

        UPDATE TOKENS
        SET Revoked = true, Expired = true
        WHERE UserId = @p0
          AND DeviceId = @p1
          AND Revoked = false
          AND Expired = false
2025-11-16 17:22:20.844 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a0`.`Name`
FROM `AspNetUserRoles` AS `a`
INNER JOIN `AspNetRoles` AS `a0` ON `a`.`RoleId` = `a0`.`Id`
WHERE `a`.`UserId` = @__userId_0
2025-11-16 17:22:20.845 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ClaimType`, `a`.`ClaimValue`, `a`.`UserId`
FROM `AspNetUserClaims` AS `a`
WHERE `a`.`UserId` = @__user_Id_0
2025-11-16 17:22:20.847 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a0`.`Name`
FROM `AspNetUserRoles` AS `a`
INNER JOIN `AspNetRoles` AS `a0` ON `a`.`RoleId` = `a0`.`Id`
WHERE `a`.`UserId` = @__userId_0
2025-11-16 17:22:20.849 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ClaimType`, `a`.`ClaimValue`, `a`.`UserId`
FROM `AspNetUserClaims` AS `a`
WHERE `a`.`UserId` = @__user_Id_0
2025-11-16 17:22:20.852 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (DbType = DateTime), @p2='?' (Size = 4000), @p3='?' (DbType = Boolean), @p4='?' (Size = 4000), @p5='?' (DbType = Boolean), @p6='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO `Tokens` (`AccessToken`, `CreatedAt`, `DeviceId`, `Expired`, `RefreshToken`, `Revoked`, `UserId`)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6);
SELECT `Id`
FROM `Tokens`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();
2025-11-16 17:22:20.853 +03:00 [INF] Added Token MappyApplication.Data.Token
2025-11-16 17:22:20.855 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessFailedCount`, `t`.`ConcurrencyStamp`, `t`.`Email`, `t`.`EmailConfirmed`, `t`.`FirstName`, `t`.`LastName`, `t`.`LockoutEnabled`, `t`.`LockoutEnd`, `t`.`NormalizedEmail`, `t`.`NormalizedUserName`, `t`.`PasswordHash`, `t`.`PhoneNumber`, `t`.`PhoneNumberConfirmed`, `t`.`SecurityStamp`, `t`.`TwoFactorEnabled`, `t`.`UserName`, `w`.`Id`, `w`.`Cadence`, `w`.`CityName`, `w`.`Coords`, `w`.`Date`, `w`.`Distance`, `w`.`Duration`, `w`.`Emoji`, `w`.`Pace`, `w`.`Type`, `w`.`UserId`, `c`.`Id`, `c`.`CityName`, `c`.`Country`, `c`.`Date`, `c`.`Emoji`, `c`.`Lat`, `c`.`Lng`, `c`.`Notes`, `c`.`UserId`
FROM (
    SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`FirstName`, `a`.`LastName`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`
    FROM `AspNetUsers` AS `a`
    WHERE `a`.`Id` = @__user_Id_0
    LIMIT 2
) AS `t`
LEFT JOIN `Workouts` AS `w` ON `t`.`Id` = `w`.`UserId`
LEFT JOIN `Cities` AS `c` ON `t`.`Id` = `c`.`UserId`
ORDER BY `t`.`Id`, `w`.`Id`
2025-11-16 17:22:20.855 +03:00 [INF] Executing ObjectResult, writing value of type 'MappyApplication.Models.user.AuthResponse'.
2025-11-16 17:22:20.855 +03:00 [INF] Executed action MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication) in 20.7845ms
2025-11-16 17:22:20.855 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication)'
2025-11-16 17:22:20.855 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:8080/api/v1/auth/refresh-token - 200 null application/json; charset=utf-8 53.0997ms
2025-11-16 17:23:12.586 +03:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:8080/api/v1/auth/refresh-token - null null
2025-11-16 17:23:12.592 +03:00 [INF] CORS policy execution successful.
2025-11-16 17:23:12.596 +03:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:8080/api/v1/auth/refresh-token - 204 null null 10.6094ms
2025-11-16 17:23:12.599 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:8080/api/v1/auth/refresh-token - null 0
2025-11-16 17:23:12.599 +03:00 [INF] CORS policy execution successful.
2025-11-16 17:23:12.651 +03:00 [INF] Executed DbCommand (6ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 17:23:12.655 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication)'
2025-11-16 17:23:12.656 +03:00 [INF] Route matched with {action = "RefreshToken", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.user.AuthResponse] RefreshToken() on controller MappyApplication.Controllers.AuthController (MappyApplication).
2025-11-16 17:23:12.659 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__refreshToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`RefreshToken` = @__refreshToken_0
LIMIT 2
2025-11-16 17:23:12.670 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__p_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`FirstName`, `a`.`LastName`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`
FROM `AspNetUsers` AS `a`
WHERE `a`.`Id` = @__p_0
LIMIT 1
2025-11-16 17:23:12.686 +03:00 [INF] Executed DbCommand (4ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']

        UPDATE TOKENS
        SET Revoked = true, Expired = true
        WHERE UserId = @p0
          AND DeviceId = @p1
          AND Revoked = false
          AND Expired = false
2025-11-16 17:23:12.688 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a0`.`Name`
FROM `AspNetUserRoles` AS `a`
INNER JOIN `AspNetRoles` AS `a0` ON `a`.`RoleId` = `a0`.`Id`
WHERE `a`.`UserId` = @__userId_0
2025-11-16 17:23:12.721 +03:00 [INF] Executed DbCommand (5ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ClaimType`, `a`.`ClaimValue`, `a`.`UserId`
FROM `AspNetUserClaims` AS `a`
WHERE `a`.`UserId` = @__user_Id_0
2025-11-16 17:23:12.725 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a0`.`Name`
FROM `AspNetUserRoles` AS `a`
INNER JOIN `AspNetRoles` AS `a0` ON `a`.`RoleId` = `a0`.`Id`
WHERE `a`.`UserId` = @__userId_0
2025-11-16 17:23:12.731 +03:00 [INF] Executed DbCommand (4ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ClaimType`, `a`.`ClaimValue`, `a`.`UserId`
FROM `AspNetUserClaims` AS `a`
WHERE `a`.`UserId` = @__user_Id_0
2025-11-16 17:23:12.739 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (DbType = DateTime), @p2='?' (Size = 4000), @p3='?' (DbType = Boolean), @p4='?' (Size = 4000), @p5='?' (DbType = Boolean), @p6='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO `Tokens` (`AccessToken`, `CreatedAt`, `DeviceId`, `Expired`, `RefreshToken`, `Revoked`, `UserId`)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6);
SELECT `Id`
FROM `Tokens`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();
2025-11-16 17:23:12.744 +03:00 [INF] Added Token MappyApplication.Data.Token
2025-11-16 17:23:12.746 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessFailedCount`, `t`.`ConcurrencyStamp`, `t`.`Email`, `t`.`EmailConfirmed`, `t`.`FirstName`, `t`.`LastName`, `t`.`LockoutEnabled`, `t`.`LockoutEnd`, `t`.`NormalizedEmail`, `t`.`NormalizedUserName`, `t`.`PasswordHash`, `t`.`PhoneNumber`, `t`.`PhoneNumberConfirmed`, `t`.`SecurityStamp`, `t`.`TwoFactorEnabled`, `t`.`UserName`, `w`.`Id`, `w`.`Cadence`, `w`.`CityName`, `w`.`Coords`, `w`.`Date`, `w`.`Distance`, `w`.`Duration`, `w`.`Emoji`, `w`.`Pace`, `w`.`Type`, `w`.`UserId`, `c`.`Id`, `c`.`CityName`, `c`.`Country`, `c`.`Date`, `c`.`Emoji`, `c`.`Lat`, `c`.`Lng`, `c`.`Notes`, `c`.`UserId`
FROM (
    SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`FirstName`, `a`.`LastName`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`
    FROM `AspNetUsers` AS `a`
    WHERE `a`.`Id` = @__user_Id_0
    LIMIT 2
) AS `t`
LEFT JOIN `Workouts` AS `w` ON `t`.`Id` = `w`.`UserId`
LEFT JOIN `Cities` AS `c` ON `t`.`Id` = `c`.`UserId`
ORDER BY `t`.`Id`, `w`.`Id`
2025-11-16 17:23:12.750 +03:00 [INF] Executing ObjectResult, writing value of type 'MappyApplication.Models.user.AuthResponse'.
2025-11-16 17:23:12.756 +03:00 [INF] Executed action MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication) in 99.0745ms
2025-11-16 17:23:12.756 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication)'
2025-11-16 17:23:12.756 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:8080/api/v1/auth/refresh-token - 200 null application/json; charset=utf-8 157.5091ms
2025-11-16 17:23:14.760 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:8080/api/v1/auth/refresh-token - null 0
2025-11-16 17:23:14.779 +03:00 [INF] CORS policy execution successful.
2025-11-16 17:23:14.890 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 17:23:14.892 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication)'
2025-11-16 17:23:14.892 +03:00 [INF] Route matched with {action = "RefreshToken", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.user.AuthResponse] RefreshToken() on controller MappyApplication.Controllers.AuthController (MappyApplication).
2025-11-16 17:23:14.894 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__refreshToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`RefreshToken` = @__refreshToken_0
LIMIT 2
2025-11-16 17:23:14.898 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`FirstName`, `a`.`LastName`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`
FROM `AspNetUsers` AS `a`
WHERE `a`.`Id` = @__p_0
LIMIT 1
2025-11-16 17:23:14.902 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']

        UPDATE TOKENS
        SET Revoked = true, Expired = true
        WHERE UserId = @p0
          AND DeviceId = @p1
          AND Revoked = false
          AND Expired = false
2025-11-16 17:23:14.906 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a0`.`Name`
FROM `AspNetUserRoles` AS `a`
INNER JOIN `AspNetRoles` AS `a0` ON `a`.`RoleId` = `a0`.`Id`
WHERE `a`.`UserId` = @__userId_0
2025-11-16 17:23:14.908 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ClaimType`, `a`.`ClaimValue`, `a`.`UserId`
FROM `AspNetUserClaims` AS `a`
WHERE `a`.`UserId` = @__user_Id_0
2025-11-16 17:23:14.912 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a0`.`Name`
FROM `AspNetUserRoles` AS `a`
INNER JOIN `AspNetRoles` AS `a0` ON `a`.`RoleId` = `a0`.`Id`
WHERE `a`.`UserId` = @__userId_0
2025-11-16 17:23:14.914 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ClaimType`, `a`.`ClaimValue`, `a`.`UserId`
FROM `AspNetUserClaims` AS `a`
WHERE `a`.`UserId` = @__user_Id_0
2025-11-16 17:23:14.925 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (DbType = DateTime), @p2='?' (Size = 4000), @p3='?' (DbType = Boolean), @p4='?' (Size = 4000), @p5='?' (DbType = Boolean), @p6='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO `Tokens` (`AccessToken`, `CreatedAt`, `DeviceId`, `Expired`, `RefreshToken`, `Revoked`, `UserId`)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6);
SELECT `Id`
FROM `Tokens`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();
2025-11-16 17:23:14.931 +03:00 [INF] Added Token MappyApplication.Data.Token
2025-11-16 17:23:14.944 +03:00 [INF] Executed DbCommand (10ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessFailedCount`, `t`.`ConcurrencyStamp`, `t`.`Email`, `t`.`EmailConfirmed`, `t`.`FirstName`, `t`.`LastName`, `t`.`LockoutEnabled`, `t`.`LockoutEnd`, `t`.`NormalizedEmail`, `t`.`NormalizedUserName`, `t`.`PasswordHash`, `t`.`PhoneNumber`, `t`.`PhoneNumberConfirmed`, `t`.`SecurityStamp`, `t`.`TwoFactorEnabled`, `t`.`UserName`, `w`.`Id`, `w`.`Cadence`, `w`.`CityName`, `w`.`Coords`, `w`.`Date`, `w`.`Distance`, `w`.`Duration`, `w`.`Emoji`, `w`.`Pace`, `w`.`Type`, `w`.`UserId`, `c`.`Id`, `c`.`CityName`, `c`.`Country`, `c`.`Date`, `c`.`Emoji`, `c`.`Lat`, `c`.`Lng`, `c`.`Notes`, `c`.`UserId`
FROM (
    SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`FirstName`, `a`.`LastName`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`
    FROM `AspNetUsers` AS `a`
    WHERE `a`.`Id` = @__user_Id_0
    LIMIT 2
) AS `t`
LEFT JOIN `Workouts` AS `w` ON `t`.`Id` = `w`.`UserId`
LEFT JOIN `Cities` AS `c` ON `t`.`Id` = `c`.`UserId`
ORDER BY `t`.`Id`, `w`.`Id`
2025-11-16 17:23:14.947 +03:00 [INF] Executing ObjectResult, writing value of type 'MappyApplication.Models.user.AuthResponse'.
2025-11-16 17:23:14.949 +03:00 [INF] Executed action MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication) in 57.0921ms
2025-11-16 17:23:14.949 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication)'
2025-11-16 17:23:14.949 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:8080/api/v1/auth/refresh-token - 200 null application/json; charset=utf-8 192.8207ms
2025-11-16 17:23:19.620 +03:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:8080/api/v1/auth/refresh-token - null null
2025-11-16 17:23:19.623 +03:00 [INF] CORS policy execution successful.
2025-11-16 17:23:19.624 +03:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:8080/api/v1/auth/refresh-token - 204 null null 4.2551ms
2025-11-16 17:23:19.627 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:8080/api/v1/auth/refresh-token - null 0
2025-11-16 17:23:19.627 +03:00 [INF] CORS policy execution successful.
2025-11-16 17:23:19.701 +03:00 [INF] Executed DbCommand (7ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 17:23:19.712 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication)'
2025-11-16 17:23:19.712 +03:00 [INF] Route matched with {action = "RefreshToken", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.user.AuthResponse] RefreshToken() on controller MappyApplication.Controllers.AuthController (MappyApplication).
2025-11-16 17:23:19.715 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__refreshToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`RefreshToken` = @__refreshToken_0
LIMIT 2
2025-11-16 17:23:19.718 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`FirstName`, `a`.`LastName`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`
FROM `AspNetUsers` AS `a`
WHERE `a`.`Id` = @__p_0
LIMIT 1
2025-11-16 17:23:19.752 +03:00 [INF] Executed DbCommand (5ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']

        UPDATE TOKENS
        SET Revoked = true, Expired = true
        WHERE UserId = @p0
          AND DeviceId = @p1
          AND Revoked = false
          AND Expired = false
2025-11-16 17:23:19.760 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a0`.`Name`
FROM `AspNetUserRoles` AS `a`
INNER JOIN `AspNetRoles` AS `a0` ON `a`.`RoleId` = `a0`.`Id`
WHERE `a`.`UserId` = @__userId_0
2025-11-16 17:23:19.764 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ClaimType`, `a`.`ClaimValue`, `a`.`UserId`
FROM `AspNetUserClaims` AS `a`
WHERE `a`.`UserId` = @__user_Id_0
2025-11-16 17:23:19.766 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a0`.`Name`
FROM `AspNetUserRoles` AS `a`
INNER JOIN `AspNetRoles` AS `a0` ON `a`.`RoleId` = `a0`.`Id`
WHERE `a`.`UserId` = @__userId_0
2025-11-16 17:23:19.767 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ClaimType`, `a`.`ClaimValue`, `a`.`UserId`
FROM `AspNetUserClaims` AS `a`
WHERE `a`.`UserId` = @__user_Id_0
2025-11-16 17:23:19.779 +03:00 [INF] Executed DbCommand (9ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (DbType = DateTime), @p2='?' (Size = 4000), @p3='?' (DbType = Boolean), @p4='?' (Size = 4000), @p5='?' (DbType = Boolean), @p6='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO `Tokens` (`AccessToken`, `CreatedAt`, `DeviceId`, `Expired`, `RefreshToken`, `Revoked`, `UserId`)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6);
SELECT `Id`
FROM `Tokens`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();
2025-11-16 17:23:19.783 +03:00 [INF] Added Token MappyApplication.Data.Token
2025-11-16 17:23:19.785 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessFailedCount`, `t`.`ConcurrencyStamp`, `t`.`Email`, `t`.`EmailConfirmed`, `t`.`FirstName`, `t`.`LastName`, `t`.`LockoutEnabled`, `t`.`LockoutEnd`, `t`.`NormalizedEmail`, `t`.`NormalizedUserName`, `t`.`PasswordHash`, `t`.`PhoneNumber`, `t`.`PhoneNumberConfirmed`, `t`.`SecurityStamp`, `t`.`TwoFactorEnabled`, `t`.`UserName`, `w`.`Id`, `w`.`Cadence`, `w`.`CityName`, `w`.`Coords`, `w`.`Date`, `w`.`Distance`, `w`.`Duration`, `w`.`Emoji`, `w`.`Pace`, `w`.`Type`, `w`.`UserId`, `c`.`Id`, `c`.`CityName`, `c`.`Country`, `c`.`Date`, `c`.`Emoji`, `c`.`Lat`, `c`.`Lng`, `c`.`Notes`, `c`.`UserId`
FROM (
    SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`FirstName`, `a`.`LastName`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`
    FROM `AspNetUsers` AS `a`
    WHERE `a`.`Id` = @__user_Id_0
    LIMIT 2
) AS `t`
LEFT JOIN `Workouts` AS `w` ON `t`.`Id` = `w`.`UserId`
LEFT JOIN `Cities` AS `c` ON `t`.`Id` = `c`.`UserId`
ORDER BY `t`.`Id`, `w`.`Id`
2025-11-16 17:23:19.786 +03:00 [INF] Executing ObjectResult, writing value of type 'MappyApplication.Models.user.AuthResponse'.
2025-11-16 17:23:19.786 +03:00 [INF] Executed action MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication) in 73.9132ms
2025-11-16 17:23:19.786 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication)'
2025-11-16 17:23:19.786 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:8080/api/v1/auth/refresh-token - 200 null application/json; charset=utf-8 159.7085ms
2025-11-16 17:23:26.814 +03:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:8080/api/v1/auth/refresh-token - null null
2025-11-16 17:23:26.816 +03:00 [INF] CORS policy execution successful.
2025-11-16 17:23:26.817 +03:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:8080/api/v1/auth/refresh-token - 204 null null 2.4347ms
2025-11-16 17:23:26.819 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:8080/api/v1/auth/refresh-token - null 0
2025-11-16 17:23:26.819 +03:00 [INF] CORS policy execution successful.
2025-11-16 17:23:26.883 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 17:23:26.884 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication)'
2025-11-16 17:23:26.885 +03:00 [INF] Route matched with {action = "RefreshToken", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.user.AuthResponse] RefreshToken() on controller MappyApplication.Controllers.AuthController (MappyApplication).
2025-11-16 17:23:26.887 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__refreshToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`RefreshToken` = @__refreshToken_0
LIMIT 2
2025-11-16 17:23:26.897 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`FirstName`, `a`.`LastName`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`
FROM `AspNetUsers` AS `a`
WHERE `a`.`Id` = @__p_0
LIMIT 1
2025-11-16 17:23:26.903 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']

        UPDATE TOKENS
        SET Revoked = true, Expired = true
        WHERE UserId = @p0
          AND DeviceId = @p1
          AND Revoked = false
          AND Expired = false
2025-11-16 17:23:26.910 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a0`.`Name`
FROM `AspNetUserRoles` AS `a`
INNER JOIN `AspNetRoles` AS `a0` ON `a`.`RoleId` = `a0`.`Id`
WHERE `a`.`UserId` = @__userId_0
2025-11-16 17:23:26.913 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ClaimType`, `a`.`ClaimValue`, `a`.`UserId`
FROM `AspNetUserClaims` AS `a`
WHERE `a`.`UserId` = @__user_Id_0
2025-11-16 17:23:26.915 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a0`.`Name`
FROM `AspNetUserRoles` AS `a`
INNER JOIN `AspNetRoles` AS `a0` ON `a`.`RoleId` = `a0`.`Id`
WHERE `a`.`UserId` = @__userId_0
2025-11-16 17:23:26.916 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ClaimType`, `a`.`ClaimValue`, `a`.`UserId`
FROM `AspNetUserClaims` AS `a`
WHERE `a`.`UserId` = @__user_Id_0
2025-11-16 17:23:26.928 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (DbType = DateTime), @p2='?' (Size = 4000), @p3='?' (DbType = Boolean), @p4='?' (Size = 4000), @p5='?' (DbType = Boolean), @p6='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO `Tokens` (`AccessToken`, `CreatedAt`, `DeviceId`, `Expired`, `RefreshToken`, `Revoked`, `UserId`)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6);
SELECT `Id`
FROM `Tokens`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();
2025-11-16 17:23:26.930 +03:00 [INF] Added Token MappyApplication.Data.Token
2025-11-16 17:23:26.934 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessFailedCount`, `t`.`ConcurrencyStamp`, `t`.`Email`, `t`.`EmailConfirmed`, `t`.`FirstName`, `t`.`LastName`, `t`.`LockoutEnabled`, `t`.`LockoutEnd`, `t`.`NormalizedEmail`, `t`.`NormalizedUserName`, `t`.`PasswordHash`, `t`.`PhoneNumber`, `t`.`PhoneNumberConfirmed`, `t`.`SecurityStamp`, `t`.`TwoFactorEnabled`, `t`.`UserName`, `w`.`Id`, `w`.`Cadence`, `w`.`CityName`, `w`.`Coords`, `w`.`Date`, `w`.`Distance`, `w`.`Duration`, `w`.`Emoji`, `w`.`Pace`, `w`.`Type`, `w`.`UserId`, `c`.`Id`, `c`.`CityName`, `c`.`Country`, `c`.`Date`, `c`.`Emoji`, `c`.`Lat`, `c`.`Lng`, `c`.`Notes`, `c`.`UserId`
FROM (
    SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`FirstName`, `a`.`LastName`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`
    FROM `AspNetUsers` AS `a`
    WHERE `a`.`Id` = @__user_Id_0
    LIMIT 2
) AS `t`
LEFT JOIN `Workouts` AS `w` ON `t`.`Id` = `w`.`UserId`
LEFT JOIN `Cities` AS `c` ON `t`.`Id` = `c`.`UserId`
ORDER BY `t`.`Id`, `w`.`Id`
2025-11-16 17:23:26.934 +03:00 [INF] Executing ObjectResult, writing value of type 'MappyApplication.Models.user.AuthResponse'.
2025-11-16 17:23:26.935 +03:00 [INF] Executed action MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication) in 49.8029ms
2025-11-16 17:23:26.935 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication)'
2025-11-16 17:23:26.935 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:8080/api/v1/auth/refresh-token - 200 null application/json; charset=utf-8 116.1319ms
2025-11-16 17:23:54.592 +03:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:8080/api/v1/auth/refresh-token - null null
2025-11-16 17:23:54.609 +03:00 [INF] CORS policy execution successful.
2025-11-16 17:23:54.610 +03:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:8080/api/v1/auth/refresh-token - 204 null null 18.2106ms
2025-11-16 17:23:54.615 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:8080/api/v1/auth/refresh-token - null 0
2025-11-16 17:23:54.620 +03:00 [INF] CORS policy execution successful.
2025-11-16 17:23:54.796 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 17:23:54.797 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication)'
2025-11-16 17:23:54.797 +03:00 [INF] Route matched with {action = "RefreshToken", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.user.AuthResponse] RefreshToken() on controller MappyApplication.Controllers.AuthController (MappyApplication).
2025-11-16 17:23:54.801 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__refreshToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`RefreshToken` = @__refreshToken_0
LIMIT 2
2025-11-16 17:23:54.816 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__p_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`FirstName`, `a`.`LastName`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`
FROM `AspNetUsers` AS `a`
WHERE `a`.`Id` = @__p_0
LIMIT 1
2025-11-16 17:23:54.834 +03:00 [INF] Executed DbCommand (6ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']

        UPDATE TOKENS
        SET Revoked = true, Expired = true
        WHERE UserId = @p0
          AND DeviceId = @p1
          AND Revoked = false
          AND Expired = false
2025-11-16 17:23:54.849 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a0`.`Name`
FROM `AspNetUserRoles` AS `a`
INNER JOIN `AspNetRoles` AS `a0` ON `a`.`RoleId` = `a0`.`Id`
WHERE `a`.`UserId` = @__userId_0
2025-11-16 17:23:54.882 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ClaimType`, `a`.`ClaimValue`, `a`.`UserId`
FROM `AspNetUserClaims` AS `a`
WHERE `a`.`UserId` = @__user_Id_0
2025-11-16 17:23:54.896 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a0`.`Name`
FROM `AspNetUserRoles` AS `a`
INNER JOIN `AspNetRoles` AS `a0` ON `a`.`RoleId` = `a0`.`Id`
WHERE `a`.`UserId` = @__userId_0
2025-11-16 17:23:54.901 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ClaimType`, `a`.`ClaimValue`, `a`.`UserId`
FROM `AspNetUserClaims` AS `a`
WHERE `a`.`UserId` = @__user_Id_0
2025-11-16 17:23:54.923 +03:00 [INF] Executed DbCommand (4ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (DbType = DateTime), @p2='?' (Size = 4000), @p3='?' (DbType = Boolean), @p4='?' (Size = 4000), @p5='?' (DbType = Boolean), @p6='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO `Tokens` (`AccessToken`, `CreatedAt`, `DeviceId`, `Expired`, `RefreshToken`, `Revoked`, `UserId`)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6);
SELECT `Id`
FROM `Tokens`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();
2025-11-16 17:23:54.925 +03:00 [INF] Added Token MappyApplication.Data.Token
2025-11-16 17:23:54.928 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessFailedCount`, `t`.`ConcurrencyStamp`, `t`.`Email`, `t`.`EmailConfirmed`, `t`.`FirstName`, `t`.`LastName`, `t`.`LockoutEnabled`, `t`.`LockoutEnd`, `t`.`NormalizedEmail`, `t`.`NormalizedUserName`, `t`.`PasswordHash`, `t`.`PhoneNumber`, `t`.`PhoneNumberConfirmed`, `t`.`SecurityStamp`, `t`.`TwoFactorEnabled`, `t`.`UserName`, `w`.`Id`, `w`.`Cadence`, `w`.`CityName`, `w`.`Coords`, `w`.`Date`, `w`.`Distance`, `w`.`Duration`, `w`.`Emoji`, `w`.`Pace`, `w`.`Type`, `w`.`UserId`, `c`.`Id`, `c`.`CityName`, `c`.`Country`, `c`.`Date`, `c`.`Emoji`, `c`.`Lat`, `c`.`Lng`, `c`.`Notes`, `c`.`UserId`
FROM (
    SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`FirstName`, `a`.`LastName`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`
    FROM `AspNetUsers` AS `a`
    WHERE `a`.`Id` = @__user_Id_0
    LIMIT 2
) AS `t`
LEFT JOIN `Workouts` AS `w` ON `t`.`Id` = `w`.`UserId`
LEFT JOIN `Cities` AS `c` ON `t`.`Id` = `c`.`UserId`
ORDER BY `t`.`Id`, `w`.`Id`
2025-11-16 17:23:54.930 +03:00 [INF] Executing ObjectResult, writing value of type 'MappyApplication.Models.user.AuthResponse'.
2025-11-16 17:23:54.931 +03:00 [INF] Executed action MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication) in 133.1188ms
2025-11-16 17:23:54.931 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication)'
2025-11-16 17:23:54.931 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:8080/api/v1/auth/refresh-token - 200 null application/json; charset=utf-8 316.306ms
2025-11-16 17:23:55.509 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:8080/api/v1/auth/refresh-token - null 0
2025-11-16 17:23:55.513 +03:00 [INF] CORS policy execution successful.
2025-11-16 17:23:55.601 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 17:23:55.602 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication)'
2025-11-16 17:23:55.602 +03:00 [INF] Route matched with {action = "RefreshToken", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.user.AuthResponse] RefreshToken() on controller MappyApplication.Controllers.AuthController (MappyApplication).
2025-11-16 17:23:55.611 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[@__refreshToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`RefreshToken` = @__refreshToken_0
LIMIT 2
2025-11-16 17:23:55.630 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__p_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`FirstName`, `a`.`LastName`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`
FROM `AspNetUsers` AS `a`
WHERE `a`.`Id` = @__p_0
LIMIT 1
2025-11-16 17:23:55.653 +03:00 [INF] Executed DbCommand (16ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']

        UPDATE TOKENS
        SET Revoked = true, Expired = true
        WHERE UserId = @p0
          AND DeviceId = @p1
          AND Revoked = false
          AND Expired = false
2025-11-16 17:23:55.659 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a0`.`Name`
FROM `AspNetUserRoles` AS `a`
INNER JOIN `AspNetRoles` AS `a0` ON `a`.`RoleId` = `a0`.`Id`
WHERE `a`.`UserId` = @__userId_0
2025-11-16 17:23:55.662 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ClaimType`, `a`.`ClaimValue`, `a`.`UserId`
FROM `AspNetUserClaims` AS `a`
WHERE `a`.`UserId` = @__user_Id_0
2025-11-16 17:23:55.663 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a0`.`Name`
FROM `AspNetUserRoles` AS `a`
INNER JOIN `AspNetRoles` AS `a0` ON `a`.`RoleId` = `a0`.`Id`
WHERE `a`.`UserId` = @__userId_0
2025-11-16 17:23:55.666 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ClaimType`, `a`.`ClaimValue`, `a`.`UserId`
FROM `AspNetUserClaims` AS `a`
WHERE `a`.`UserId` = @__user_Id_0
2025-11-16 17:23:55.675 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (DbType = DateTime), @p2='?' (Size = 4000), @p3='?' (DbType = Boolean), @p4='?' (Size = 4000), @p5='?' (DbType = Boolean), @p6='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO `Tokens` (`AccessToken`, `CreatedAt`, `DeviceId`, `Expired`, `RefreshToken`, `Revoked`, `UserId`)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6);
SELECT `Id`
FROM `Tokens`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();
2025-11-16 17:23:55.676 +03:00 [INF] Added Token MappyApplication.Data.Token
2025-11-16 17:23:55.678 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessFailedCount`, `t`.`ConcurrencyStamp`, `t`.`Email`, `t`.`EmailConfirmed`, `t`.`FirstName`, `t`.`LastName`, `t`.`LockoutEnabled`, `t`.`LockoutEnd`, `t`.`NormalizedEmail`, `t`.`NormalizedUserName`, `t`.`PasswordHash`, `t`.`PhoneNumber`, `t`.`PhoneNumberConfirmed`, `t`.`SecurityStamp`, `t`.`TwoFactorEnabled`, `t`.`UserName`, `w`.`Id`, `w`.`Cadence`, `w`.`CityName`, `w`.`Coords`, `w`.`Date`, `w`.`Distance`, `w`.`Duration`, `w`.`Emoji`, `w`.`Pace`, `w`.`Type`, `w`.`UserId`, `c`.`Id`, `c`.`CityName`, `c`.`Country`, `c`.`Date`, `c`.`Emoji`, `c`.`Lat`, `c`.`Lng`, `c`.`Notes`, `c`.`UserId`
FROM (
    SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`FirstName`, `a`.`LastName`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`
    FROM `AspNetUsers` AS `a`
    WHERE `a`.`Id` = @__user_Id_0
    LIMIT 2
) AS `t`
LEFT JOIN `Workouts` AS `w` ON `t`.`Id` = `w`.`UserId`
LEFT JOIN `Cities` AS `c` ON `t`.`Id` = `c`.`UserId`
ORDER BY `t`.`Id`, `w`.`Id`
2025-11-16 17:23:55.679 +03:00 [INF] Executing ObjectResult, writing value of type 'MappyApplication.Models.user.AuthResponse'.
2025-11-16 17:23:55.679 +03:00 [INF] Executed action MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication) in 77.068ms
2025-11-16 17:23:55.679 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication)'
2025-11-16 17:23:55.679 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:8080/api/v1/auth/refresh-token - 200 null application/json; charset=utf-8 170.1638ms
2025-11-16 17:24:00.885 +03:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:8080/api/v1/auth/refresh-token - null null
2025-11-16 17:24:00.894 +03:00 [INF] CORS policy execution successful.
2025-11-16 17:24:00.895 +03:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:8080/api/v1/auth/refresh-token - 204 null null 11.6578ms
2025-11-16 17:24:00.900 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:8080/api/v1/auth/refresh-token - null 0
2025-11-16 17:24:00.900 +03:00 [INF] CORS policy execution successful.
2025-11-16 17:24:00.965 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 17:24:00.965 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication)'
2025-11-16 17:24:00.966 +03:00 [INF] Route matched with {action = "RefreshToken", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.user.AuthResponse] RefreshToken() on controller MappyApplication.Controllers.AuthController (MappyApplication).
2025-11-16 17:24:00.967 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__refreshToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`RefreshToken` = @__refreshToken_0
LIMIT 2
2025-11-16 17:24:00.969 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`FirstName`, `a`.`LastName`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`
FROM `AspNetUsers` AS `a`
WHERE `a`.`Id` = @__p_0
LIMIT 1
2025-11-16 17:24:00.983 +03:00 [INF] Executed DbCommand (8ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']

        UPDATE TOKENS
        SET Revoked = true, Expired = true
        WHERE UserId = @p0
          AND DeviceId = @p1
          AND Revoked = false
          AND Expired = false
2025-11-16 17:24:00.991 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a0`.`Name`
FROM `AspNetUserRoles` AS `a`
INNER JOIN `AspNetRoles` AS `a0` ON `a`.`RoleId` = `a0`.`Id`
WHERE `a`.`UserId` = @__userId_0
2025-11-16 17:24:00.998 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ClaimType`, `a`.`ClaimValue`, `a`.`UserId`
FROM `AspNetUserClaims` AS `a`
WHERE `a`.`UserId` = @__user_Id_0
2025-11-16 17:24:01.000 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a0`.`Name`
FROM `AspNetUserRoles` AS `a`
INNER JOIN `AspNetRoles` AS `a0` ON `a`.`RoleId` = `a0`.`Id`
WHERE `a`.`UserId` = @__userId_0
2025-11-16 17:24:01.002 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ClaimType`, `a`.`ClaimValue`, `a`.`UserId`
FROM `AspNetUserClaims` AS `a`
WHERE `a`.`UserId` = @__user_Id_0
2025-11-16 17:24:01.015 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (DbType = DateTime), @p2='?' (Size = 4000), @p3='?' (DbType = Boolean), @p4='?' (Size = 4000), @p5='?' (DbType = Boolean), @p6='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO `Tokens` (`AccessToken`, `CreatedAt`, `DeviceId`, `Expired`, `RefreshToken`, `Revoked`, `UserId`)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6);
SELECT `Id`
FROM `Tokens`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();
2025-11-16 17:24:01.021 +03:00 [INF] Added Token MappyApplication.Data.Token
2025-11-16 17:24:01.029 +03:00 [INF] Executed DbCommand (4ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessFailedCount`, `t`.`ConcurrencyStamp`, `t`.`Email`, `t`.`EmailConfirmed`, `t`.`FirstName`, `t`.`LastName`, `t`.`LockoutEnabled`, `t`.`LockoutEnd`, `t`.`NormalizedEmail`, `t`.`NormalizedUserName`, `t`.`PasswordHash`, `t`.`PhoneNumber`, `t`.`PhoneNumberConfirmed`, `t`.`SecurityStamp`, `t`.`TwoFactorEnabled`, `t`.`UserName`, `w`.`Id`, `w`.`Cadence`, `w`.`CityName`, `w`.`Coords`, `w`.`Date`, `w`.`Distance`, `w`.`Duration`, `w`.`Emoji`, `w`.`Pace`, `w`.`Type`, `w`.`UserId`, `c`.`Id`, `c`.`CityName`, `c`.`Country`, `c`.`Date`, `c`.`Emoji`, `c`.`Lat`, `c`.`Lng`, `c`.`Notes`, `c`.`UserId`
FROM (
    SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`FirstName`, `a`.`LastName`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`
    FROM `AspNetUsers` AS `a`
    WHERE `a`.`Id` = @__user_Id_0
    LIMIT 2
) AS `t`
LEFT JOIN `Workouts` AS `w` ON `t`.`Id` = `w`.`UserId`
LEFT JOIN `Cities` AS `c` ON `t`.`Id` = `c`.`UserId`
ORDER BY `t`.`Id`, `w`.`Id`
2025-11-16 17:24:01.033 +03:00 [INF] Executing ObjectResult, writing value of type 'MappyApplication.Models.user.AuthResponse'.
2025-11-16 17:24:01.034 +03:00 [INF] Executed action MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication) in 67.7989ms
2025-11-16 17:24:01.034 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication)'
2025-11-16 17:24:01.034 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:8080/api/v1/auth/refresh-token - 200 null application/json; charset=utf-8 136.5607ms
2025-11-16 17:24:11.436 +03:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:8080/api/v1/auth/refresh-token - null null
2025-11-16 17:24:11.439 +03:00 [INF] CORS policy execution successful.
2025-11-16 17:24:11.440 +03:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:8080/api/v1/auth/refresh-token - 204 null null 3.3296ms
2025-11-16 17:24:11.442 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:8080/api/v1/auth/refresh-token - null 0
2025-11-16 17:24:11.443 +03:00 [INF] CORS policy execution successful.
2025-11-16 17:24:11.499 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 17:24:11.501 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication)'
2025-11-16 17:24:11.501 +03:00 [INF] Route matched with {action = "RefreshToken", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.user.AuthResponse] RefreshToken() on controller MappyApplication.Controllers.AuthController (MappyApplication).
2025-11-16 17:24:11.506 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__refreshToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`RefreshToken` = @__refreshToken_0
LIMIT 2
2025-11-16 17:24:11.514 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[@__p_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`FirstName`, `a`.`LastName`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`
FROM `AspNetUsers` AS `a`
WHERE `a`.`Id` = @__p_0
LIMIT 1
2025-11-16 17:24:11.542 +03:00 [INF] Executed DbCommand (6ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']

        UPDATE TOKENS
        SET Revoked = true, Expired = true
        WHERE UserId = @p0
          AND DeviceId = @p1
          AND Revoked = false
          AND Expired = false
2025-11-16 17:24:11.548 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a0`.`Name`
FROM `AspNetUserRoles` AS `a`
INNER JOIN `AspNetRoles` AS `a0` ON `a`.`RoleId` = `a0`.`Id`
WHERE `a`.`UserId` = @__userId_0
2025-11-16 17:24:11.550 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ClaimType`, `a`.`ClaimValue`, `a`.`UserId`
FROM `AspNetUserClaims` AS `a`
WHERE `a`.`UserId` = @__user_Id_0
2025-11-16 17:24:11.551 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a0`.`Name`
FROM `AspNetUserRoles` AS `a`
INNER JOIN `AspNetRoles` AS `a0` ON `a`.`RoleId` = `a0`.`Id`
WHERE `a`.`UserId` = @__userId_0
2025-11-16 17:24:11.553 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ClaimType`, `a`.`ClaimValue`, `a`.`UserId`
FROM `AspNetUserClaims` AS `a`
WHERE `a`.`UserId` = @__user_Id_0
2025-11-16 17:24:11.562 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (DbType = DateTime), @p2='?' (Size = 4000), @p3='?' (DbType = Boolean), @p4='?' (Size = 4000), @p5='?' (DbType = Boolean), @p6='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO `Tokens` (`AccessToken`, `CreatedAt`, `DeviceId`, `Expired`, `RefreshToken`, `Revoked`, `UserId`)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6);
SELECT `Id`
FROM `Tokens`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();
2025-11-16 17:24:11.564 +03:00 [INF] Added Token MappyApplication.Data.Token
2025-11-16 17:24:11.567 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessFailedCount`, `t`.`ConcurrencyStamp`, `t`.`Email`, `t`.`EmailConfirmed`, `t`.`FirstName`, `t`.`LastName`, `t`.`LockoutEnabled`, `t`.`LockoutEnd`, `t`.`NormalizedEmail`, `t`.`NormalizedUserName`, `t`.`PasswordHash`, `t`.`PhoneNumber`, `t`.`PhoneNumberConfirmed`, `t`.`SecurityStamp`, `t`.`TwoFactorEnabled`, `t`.`UserName`, `w`.`Id`, `w`.`Cadence`, `w`.`CityName`, `w`.`Coords`, `w`.`Date`, `w`.`Distance`, `w`.`Duration`, `w`.`Emoji`, `w`.`Pace`, `w`.`Type`, `w`.`UserId`, `c`.`Id`, `c`.`CityName`, `c`.`Country`, `c`.`Date`, `c`.`Emoji`, `c`.`Lat`, `c`.`Lng`, `c`.`Notes`, `c`.`UserId`
FROM (
    SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`FirstName`, `a`.`LastName`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`
    FROM `AspNetUsers` AS `a`
    WHERE `a`.`Id` = @__user_Id_0
    LIMIT 2
) AS `t`
LEFT JOIN `Workouts` AS `w` ON `t`.`Id` = `w`.`UserId`
LEFT JOIN `Cities` AS `c` ON `t`.`Id` = `c`.`UserId`
ORDER BY `t`.`Id`, `w`.`Id`
2025-11-16 17:24:11.567 +03:00 [INF] Executing ObjectResult, writing value of type 'MappyApplication.Models.user.AuthResponse'.
2025-11-16 17:24:11.568 +03:00 [INF] Executed action MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication) in 66.47ms
2025-11-16 17:24:11.568 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication)'
2025-11-16 17:24:11.568 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:8080/api/v1/auth/refresh-token - 200 null application/json; charset=utf-8 125.7832ms
2025-11-16 17:24:14.948 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:8080/api/v1/auth/refresh-token - null 0
2025-11-16 17:24:14.950 +03:00 [INF] CORS policy execution successful.
2025-11-16 17:24:14.996 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 17:24:14.997 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication)'
2025-11-16 17:24:14.997 +03:00 [INF] Route matched with {action = "RefreshToken", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.user.AuthResponse] RefreshToken() on controller MappyApplication.Controllers.AuthController (MappyApplication).
2025-11-16 17:24:15.003 +03:00 [INF] Executed DbCommand (4ms) [Parameters=[@__refreshToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`RefreshToken` = @__refreshToken_0
LIMIT 2
2025-11-16 17:24:15.005 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`FirstName`, `a`.`LastName`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`
FROM `AspNetUsers` AS `a`
WHERE `a`.`Id` = @__p_0
LIMIT 1
2025-11-16 17:24:15.011 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']

        UPDATE TOKENS
        SET Revoked = true, Expired = true
        WHERE UserId = @p0
          AND DeviceId = @p1
          AND Revoked = false
          AND Expired = false
2025-11-16 17:24:15.015 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a0`.`Name`
FROM `AspNetUserRoles` AS `a`
INNER JOIN `AspNetRoles` AS `a0` ON `a`.`RoleId` = `a0`.`Id`
WHERE `a`.`UserId` = @__userId_0
2025-11-16 17:24:15.019 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ClaimType`, `a`.`ClaimValue`, `a`.`UserId`
FROM `AspNetUserClaims` AS `a`
WHERE `a`.`UserId` = @__user_Id_0
2025-11-16 17:24:15.022 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a0`.`Name`
FROM `AspNetUserRoles` AS `a`
INNER JOIN `AspNetRoles` AS `a0` ON `a`.`RoleId` = `a0`.`Id`
WHERE `a`.`UserId` = @__userId_0
2025-11-16 17:24:15.026 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ClaimType`, `a`.`ClaimValue`, `a`.`UserId`
FROM `AspNetUserClaims` AS `a`
WHERE `a`.`UserId` = @__user_Id_0
2025-11-16 17:24:15.035 +03:00 [INF] Executed DbCommand (5ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (DbType = DateTime), @p2='?' (Size = 4000), @p3='?' (DbType = Boolean), @p4='?' (Size = 4000), @p5='?' (DbType = Boolean), @p6='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO `Tokens` (`AccessToken`, `CreatedAt`, `DeviceId`, `Expired`, `RefreshToken`, `Revoked`, `UserId`)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6);
SELECT `Id`
FROM `Tokens`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();
2025-11-16 17:24:15.037 +03:00 [INF] Added Token MappyApplication.Data.Token
2025-11-16 17:24:15.040 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessFailedCount`, `t`.`ConcurrencyStamp`, `t`.`Email`, `t`.`EmailConfirmed`, `t`.`FirstName`, `t`.`LastName`, `t`.`LockoutEnabled`, `t`.`LockoutEnd`, `t`.`NormalizedEmail`, `t`.`NormalizedUserName`, `t`.`PasswordHash`, `t`.`PhoneNumber`, `t`.`PhoneNumberConfirmed`, `t`.`SecurityStamp`, `t`.`TwoFactorEnabled`, `t`.`UserName`, `w`.`Id`, `w`.`Cadence`, `w`.`CityName`, `w`.`Coords`, `w`.`Date`, `w`.`Distance`, `w`.`Duration`, `w`.`Emoji`, `w`.`Pace`, `w`.`Type`, `w`.`UserId`, `c`.`Id`, `c`.`CityName`, `c`.`Country`, `c`.`Date`, `c`.`Emoji`, `c`.`Lat`, `c`.`Lng`, `c`.`Notes`, `c`.`UserId`
FROM (
    SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`FirstName`, `a`.`LastName`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`
    FROM `AspNetUsers` AS `a`
    WHERE `a`.`Id` = @__user_Id_0
    LIMIT 2
) AS `t`
LEFT JOIN `Workouts` AS `w` ON `t`.`Id` = `w`.`UserId`
LEFT JOIN `Cities` AS `c` ON `t`.`Id` = `c`.`UserId`
ORDER BY `t`.`Id`, `w`.`Id`
2025-11-16 17:24:15.040 +03:00 [INF] Executing ObjectResult, writing value of type 'MappyApplication.Models.user.AuthResponse'.
2025-11-16 17:24:15.041 +03:00 [INF] Executed action MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication) in 44.0636ms
2025-11-16 17:24:15.042 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication)'
2025-11-16 17:24:15.042 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:8080/api/v1/auth/refresh-token - 200 null application/json; charset=utf-8 93.986ms
2025-11-16 17:24:20.430 +03:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:8080/api/v1/auth/refresh-token - null null
2025-11-16 17:24:20.434 +03:00 [INF] CORS policy execution successful.
2025-11-16 17:24:20.435 +03:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:8080/api/v1/auth/refresh-token - 204 null null 6.7205ms
2025-11-16 17:24:20.443 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:8080/api/v1/auth/refresh-token - null 0
2025-11-16 17:24:20.443 +03:00 [INF] CORS policy execution successful.
2025-11-16 17:24:20.487 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 17:24:20.487 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication)'
2025-11-16 17:24:20.487 +03:00 [INF] Route matched with {action = "RefreshToken", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.user.AuthResponse] RefreshToken() on controller MappyApplication.Controllers.AuthController (MappyApplication).
2025-11-16 17:24:20.489 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__refreshToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`RefreshToken` = @__refreshToken_0
LIMIT 2
2025-11-16 17:24:20.509 +03:00 [INF] Executed DbCommand (5ms) [Parameters=[@__p_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`FirstName`, `a`.`LastName`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`
FROM `AspNetUsers` AS `a`
WHERE `a`.`Id` = @__p_0
LIMIT 1
2025-11-16 17:24:20.515 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']

        UPDATE TOKENS
        SET Revoked = true, Expired = true
        WHERE UserId = @p0
          AND DeviceId = @p1
          AND Revoked = false
          AND Expired = false
2025-11-16 17:24:20.520 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a0`.`Name`
FROM `AspNetUserRoles` AS `a`
INNER JOIN `AspNetRoles` AS `a0` ON `a`.`RoleId` = `a0`.`Id`
WHERE `a`.`UserId` = @__userId_0
2025-11-16 17:24:20.521 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ClaimType`, `a`.`ClaimValue`, `a`.`UserId`
FROM `AspNetUserClaims` AS `a`
WHERE `a`.`UserId` = @__user_Id_0
2025-11-16 17:24:20.528 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a0`.`Name`
FROM `AspNetUserRoles` AS `a`
INNER JOIN `AspNetRoles` AS `a0` ON `a`.`RoleId` = `a0`.`Id`
WHERE `a`.`UserId` = @__userId_0
2025-11-16 17:24:20.529 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ClaimType`, `a`.`ClaimValue`, `a`.`UserId`
FROM `AspNetUserClaims` AS `a`
WHERE `a`.`UserId` = @__user_Id_0
2025-11-16 17:24:20.533 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (DbType = DateTime), @p2='?' (Size = 4000), @p3='?' (DbType = Boolean), @p4='?' (Size = 4000), @p5='?' (DbType = Boolean), @p6='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO `Tokens` (`AccessToken`, `CreatedAt`, `DeviceId`, `Expired`, `RefreshToken`, `Revoked`, `UserId`)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6);
SELECT `Id`
FROM `Tokens`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();
2025-11-16 17:24:20.534 +03:00 [INF] Added Token MappyApplication.Data.Token
2025-11-16 17:24:20.538 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessFailedCount`, `t`.`ConcurrencyStamp`, `t`.`Email`, `t`.`EmailConfirmed`, `t`.`FirstName`, `t`.`LastName`, `t`.`LockoutEnabled`, `t`.`LockoutEnd`, `t`.`NormalizedEmail`, `t`.`NormalizedUserName`, `t`.`PasswordHash`, `t`.`PhoneNumber`, `t`.`PhoneNumberConfirmed`, `t`.`SecurityStamp`, `t`.`TwoFactorEnabled`, `t`.`UserName`, `w`.`Id`, `w`.`Cadence`, `w`.`CityName`, `w`.`Coords`, `w`.`Date`, `w`.`Distance`, `w`.`Duration`, `w`.`Emoji`, `w`.`Pace`, `w`.`Type`, `w`.`UserId`, `c`.`Id`, `c`.`CityName`, `c`.`Country`, `c`.`Date`, `c`.`Emoji`, `c`.`Lat`, `c`.`Lng`, `c`.`Notes`, `c`.`UserId`
FROM (
    SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`FirstName`, `a`.`LastName`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`
    FROM `AspNetUsers` AS `a`
    WHERE `a`.`Id` = @__user_Id_0
    LIMIT 2
) AS `t`
LEFT JOIN `Workouts` AS `w` ON `t`.`Id` = `w`.`UserId`
LEFT JOIN `Cities` AS `c` ON `t`.`Id` = `c`.`UserId`
ORDER BY `t`.`Id`, `w`.`Id`
2025-11-16 17:24:20.539 +03:00 [INF] Executing ObjectResult, writing value of type 'MappyApplication.Models.user.AuthResponse'.
2025-11-16 17:24:20.542 +03:00 [INF] Executed action MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication) in 54.2527ms
2025-11-16 17:24:20.542 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication)'
2025-11-16 17:24:20.542 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:8080/api/v1/auth/refresh-token - 200 null application/json; charset=utf-8 100.6279ms
2025-11-16 17:24:32.023 +03:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:8080/api/v1/auth/refresh-token - null null
2025-11-16 17:24:32.028 +03:00 [INF] CORS policy execution successful.
2025-11-16 17:24:32.032 +03:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:8080/api/v1/auth/refresh-token - 204 null null 9.3183ms
2025-11-16 17:24:32.035 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:8080/api/v1/auth/refresh-token - null 0
2025-11-16 17:24:32.036 +03:00 [INF] CORS policy execution successful.
2025-11-16 17:24:32.080 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 17:24:32.085 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication)'
2025-11-16 17:24:32.085 +03:00 [INF] Route matched with {action = "RefreshToken", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.user.AuthResponse] RefreshToken() on controller MappyApplication.Controllers.AuthController (MappyApplication).
2025-11-16 17:24:32.091 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[@__refreshToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`RefreshToken` = @__refreshToken_0
LIMIT 2
2025-11-16 17:24:32.097 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[@__p_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`FirstName`, `a`.`LastName`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`
FROM `AspNetUsers` AS `a`
WHERE `a`.`Id` = @__p_0
LIMIT 1
2025-11-16 17:24:32.119 +03:00 [INF] Executed DbCommand (4ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']

        UPDATE TOKENS
        SET Revoked = true, Expired = true
        WHERE UserId = @p0
          AND DeviceId = @p1
          AND Revoked = false
          AND Expired = false
2025-11-16 17:24:32.129 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a0`.`Name`
FROM `AspNetUserRoles` AS `a`
INNER JOIN `AspNetRoles` AS `a0` ON `a`.`RoleId` = `a0`.`Id`
WHERE `a`.`UserId` = @__userId_0
2025-11-16 17:24:32.132 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ClaimType`, `a`.`ClaimValue`, `a`.`UserId`
FROM `AspNetUserClaims` AS `a`
WHERE `a`.`UserId` = @__user_Id_0
2025-11-16 17:24:32.134 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a0`.`Name`
FROM `AspNetUserRoles` AS `a`
INNER JOIN `AspNetRoles` AS `a0` ON `a`.`RoleId` = `a0`.`Id`
WHERE `a`.`UserId` = @__userId_0
2025-11-16 17:24:32.141 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ClaimType`, `a`.`ClaimValue`, `a`.`UserId`
FROM `AspNetUserClaims` AS `a`
WHERE `a`.`UserId` = @__user_Id_0
2025-11-16 17:24:32.147 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (DbType = DateTime), @p2='?' (Size = 4000), @p3='?' (DbType = Boolean), @p4='?' (Size = 4000), @p5='?' (DbType = Boolean), @p6='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO `Tokens` (`AccessToken`, `CreatedAt`, `DeviceId`, `Expired`, `RefreshToken`, `Revoked`, `UserId`)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6);
SELECT `Id`
FROM `Tokens`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();
2025-11-16 17:24:32.150 +03:00 [INF] Added Token MappyApplication.Data.Token
2025-11-16 17:24:32.154 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessFailedCount`, `t`.`ConcurrencyStamp`, `t`.`Email`, `t`.`EmailConfirmed`, `t`.`FirstName`, `t`.`LastName`, `t`.`LockoutEnabled`, `t`.`LockoutEnd`, `t`.`NormalizedEmail`, `t`.`NormalizedUserName`, `t`.`PasswordHash`, `t`.`PhoneNumber`, `t`.`PhoneNumberConfirmed`, `t`.`SecurityStamp`, `t`.`TwoFactorEnabled`, `t`.`UserName`, `w`.`Id`, `w`.`Cadence`, `w`.`CityName`, `w`.`Coords`, `w`.`Date`, `w`.`Distance`, `w`.`Duration`, `w`.`Emoji`, `w`.`Pace`, `w`.`Type`, `w`.`UserId`, `c`.`Id`, `c`.`CityName`, `c`.`Country`, `c`.`Date`, `c`.`Emoji`, `c`.`Lat`, `c`.`Lng`, `c`.`Notes`, `c`.`UserId`
FROM (
    SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`FirstName`, `a`.`LastName`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`
    FROM `AspNetUsers` AS `a`
    WHERE `a`.`Id` = @__user_Id_0
    LIMIT 2
) AS `t`
LEFT JOIN `Workouts` AS `w` ON `t`.`Id` = `w`.`UserId`
LEFT JOIN `Cities` AS `c` ON `t`.`Id` = `c`.`UserId`
ORDER BY `t`.`Id`, `w`.`Id`
2025-11-16 17:24:32.154 +03:00 [INF] Executing ObjectResult, writing value of type 'MappyApplication.Models.user.AuthResponse'.
2025-11-16 17:24:32.154 +03:00 [INF] Executed action MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication) in 68.9432ms
2025-11-16 17:24:32.154 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication)'
2025-11-16 17:24:32.154 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:8080/api/v1/auth/refresh-token - 200 null application/json; charset=utf-8 119.3009ms
2025-11-16 17:24:36.175 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:8080/api/v1/auth/refresh-token - null 0
2025-11-16 17:24:36.186 +03:00 [INF] CORS policy execution successful.
2025-11-16 17:24:36.284 +03:00 [INF] Executed DbCommand (9ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 17:24:36.286 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication)'
2025-11-16 17:24:36.286 +03:00 [INF] Route matched with {action = "RefreshToken", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.user.AuthResponse] RefreshToken() on controller MappyApplication.Controllers.AuthController (MappyApplication).
2025-11-16 17:24:36.301 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__refreshToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`RefreshToken` = @__refreshToken_0
LIMIT 2
2025-11-16 17:24:36.308 +03:00 [INF] Executed DbCommand (4ms) [Parameters=[@__p_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`FirstName`, `a`.`LastName`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`
FROM `AspNetUsers` AS `a`
WHERE `a`.`Id` = @__p_0
LIMIT 1
2025-11-16 17:24:36.314 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']

        UPDATE TOKENS
        SET Revoked = true, Expired = true
        WHERE UserId = @p0
          AND DeviceId = @p1
          AND Revoked = false
          AND Expired = false
2025-11-16 17:24:36.318 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a0`.`Name`
FROM `AspNetUserRoles` AS `a`
INNER JOIN `AspNetRoles` AS `a0` ON `a`.`RoleId` = `a0`.`Id`
WHERE `a`.`UserId` = @__userId_0
2025-11-16 17:24:36.323 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ClaimType`, `a`.`ClaimValue`, `a`.`UserId`
FROM `AspNetUserClaims` AS `a`
WHERE `a`.`UserId` = @__user_Id_0
2025-11-16 17:24:36.325 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a0`.`Name`
FROM `AspNetUserRoles` AS `a`
INNER JOIN `AspNetRoles` AS `a0` ON `a`.`RoleId` = `a0`.`Id`
WHERE `a`.`UserId` = @__userId_0
2025-11-16 17:24:36.329 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ClaimType`, `a`.`ClaimValue`, `a`.`UserId`
FROM `AspNetUserClaims` AS `a`
WHERE `a`.`UserId` = @__user_Id_0
2025-11-16 17:24:36.333 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (DbType = DateTime), @p2='?' (Size = 4000), @p3='?' (DbType = Boolean), @p4='?' (Size = 4000), @p5='?' (DbType = Boolean), @p6='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO `Tokens` (`AccessToken`, `CreatedAt`, `DeviceId`, `Expired`, `RefreshToken`, `Revoked`, `UserId`)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6);
SELECT `Id`
FROM `Tokens`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();
2025-11-16 17:24:36.335 +03:00 [INF] Added Token MappyApplication.Data.Token
2025-11-16 17:24:36.342 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessFailedCount`, `t`.`ConcurrencyStamp`, `t`.`Email`, `t`.`EmailConfirmed`, `t`.`FirstName`, `t`.`LastName`, `t`.`LockoutEnabled`, `t`.`LockoutEnd`, `t`.`NormalizedEmail`, `t`.`NormalizedUserName`, `t`.`PasswordHash`, `t`.`PhoneNumber`, `t`.`PhoneNumberConfirmed`, `t`.`SecurityStamp`, `t`.`TwoFactorEnabled`, `t`.`UserName`, `w`.`Id`, `w`.`Cadence`, `w`.`CityName`, `w`.`Coords`, `w`.`Date`, `w`.`Distance`, `w`.`Duration`, `w`.`Emoji`, `w`.`Pace`, `w`.`Type`, `w`.`UserId`, `c`.`Id`, `c`.`CityName`, `c`.`Country`, `c`.`Date`, `c`.`Emoji`, `c`.`Lat`, `c`.`Lng`, `c`.`Notes`, `c`.`UserId`
FROM (
    SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`FirstName`, `a`.`LastName`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`
    FROM `AspNetUsers` AS `a`
    WHERE `a`.`Id` = @__user_Id_0
    LIMIT 2
) AS `t`
LEFT JOIN `Workouts` AS `w` ON `t`.`Id` = `w`.`UserId`
LEFT JOIN `Cities` AS `c` ON `t`.`Id` = `c`.`UserId`
ORDER BY `t`.`Id`, `w`.`Id`
2025-11-16 17:24:36.343 +03:00 [INF] Executing ObjectResult, writing value of type 'MappyApplication.Models.user.AuthResponse'.
2025-11-16 17:24:36.343 +03:00 [INF] Executed action MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication) in 50.3196ms
2025-11-16 17:24:36.343 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication)'
2025-11-16 17:24:36.343 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:8080/api/v1/auth/refresh-token - 200 null application/json; charset=utf-8 170.6962ms
2025-11-16 17:24:37.152 +03:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:8080/api/v1/auth/refresh-token - null null
2025-11-16 17:24:37.163 +03:00 [INF] CORS policy execution successful.
2025-11-16 17:24:37.164 +03:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:8080/api/v1/auth/refresh-token - 204 null null 12.9731ms
2025-11-16 17:24:37.165 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:8080/api/v1/auth/refresh-token - null 0
2025-11-16 17:24:37.165 +03:00 [INF] CORS policy execution successful.
2025-11-16 17:24:37.225 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 17:24:37.226 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication)'
2025-11-16 17:24:37.227 +03:00 [INF] Route matched with {action = "RefreshToken", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.user.AuthResponse] RefreshToken() on controller MappyApplication.Controllers.AuthController (MappyApplication).
2025-11-16 17:24:37.230 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__refreshToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`RefreshToken` = @__refreshToken_0
LIMIT 2
2025-11-16 17:24:37.249 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`FirstName`, `a`.`LastName`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`
FROM `AspNetUsers` AS `a`
WHERE `a`.`Id` = @__p_0
LIMIT 1
2025-11-16 17:24:37.257 +03:00 [INF] Executed DbCommand (6ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']

        UPDATE TOKENS
        SET Revoked = true, Expired = true
        WHERE UserId = @p0
          AND DeviceId = @p1
          AND Revoked = false
          AND Expired = false
2025-11-16 17:24:37.260 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a0`.`Name`
FROM `AspNetUserRoles` AS `a`
INNER JOIN `AspNetRoles` AS `a0` ON `a`.`RoleId` = `a0`.`Id`
WHERE `a`.`UserId` = @__userId_0
2025-11-16 17:24:37.261 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ClaimType`, `a`.`ClaimValue`, `a`.`UserId`
FROM `AspNetUserClaims` AS `a`
WHERE `a`.`UserId` = @__user_Id_0
2025-11-16 17:24:37.262 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a0`.`Name`
FROM `AspNetUserRoles` AS `a`
INNER JOIN `AspNetRoles` AS `a0` ON `a`.`RoleId` = `a0`.`Id`
WHERE `a`.`UserId` = @__userId_0
2025-11-16 17:24:37.262 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ClaimType`, `a`.`ClaimValue`, `a`.`UserId`
FROM `AspNetUserClaims` AS `a`
WHERE `a`.`UserId` = @__user_Id_0
2025-11-16 17:24:37.265 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (DbType = DateTime), @p2='?' (Size = 4000), @p3='?' (DbType = Boolean), @p4='?' (Size = 4000), @p5='?' (DbType = Boolean), @p6='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO `Tokens` (`AccessToken`, `CreatedAt`, `DeviceId`, `Expired`, `RefreshToken`, `Revoked`, `UserId`)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6);
SELECT `Id`
FROM `Tokens`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();
2025-11-16 17:24:37.266 +03:00 [INF] Added Token MappyApplication.Data.Token
2025-11-16 17:24:37.267 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessFailedCount`, `t`.`ConcurrencyStamp`, `t`.`Email`, `t`.`EmailConfirmed`, `t`.`FirstName`, `t`.`LastName`, `t`.`LockoutEnabled`, `t`.`LockoutEnd`, `t`.`NormalizedEmail`, `t`.`NormalizedUserName`, `t`.`PasswordHash`, `t`.`PhoneNumber`, `t`.`PhoneNumberConfirmed`, `t`.`SecurityStamp`, `t`.`TwoFactorEnabled`, `t`.`UserName`, `w`.`Id`, `w`.`Cadence`, `w`.`CityName`, `w`.`Coords`, `w`.`Date`, `w`.`Distance`, `w`.`Duration`, `w`.`Emoji`, `w`.`Pace`, `w`.`Type`, `w`.`UserId`, `c`.`Id`, `c`.`CityName`, `c`.`Country`, `c`.`Date`, `c`.`Emoji`, `c`.`Lat`, `c`.`Lng`, `c`.`Notes`, `c`.`UserId`
FROM (
    SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`FirstName`, `a`.`LastName`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`
    FROM `AspNetUsers` AS `a`
    WHERE `a`.`Id` = @__user_Id_0
    LIMIT 2
) AS `t`
LEFT JOIN `Workouts` AS `w` ON `t`.`Id` = `w`.`UserId`
LEFT JOIN `Cities` AS `c` ON `t`.`Id` = `c`.`UserId`
ORDER BY `t`.`Id`, `w`.`Id`
2025-11-16 17:24:37.267 +03:00 [INF] Executing ObjectResult, writing value of type 'MappyApplication.Models.user.AuthResponse'.
2025-11-16 17:24:37.267 +03:00 [INF] Executed action MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication) in 40.8974ms
2025-11-16 17:24:37.267 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication)'
2025-11-16 17:24:37.268 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:8080/api/v1/auth/refresh-token - 200 null application/json; charset=utf-8 102.4573ms
2025-11-16 17:24:43.257 +03:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:8080/api/v1/auth/refresh-token - null null
2025-11-16 17:24:43.266 +03:00 [INF] CORS policy execution successful.
2025-11-16 17:24:43.269 +03:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:8080/api/v1/auth/refresh-token - 204 null null 13.7436ms
2025-11-16 17:24:43.272 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:8080/api/v1/auth/refresh-token - null 0
2025-11-16 17:24:43.275 +03:00 [INF] CORS policy execution successful.
2025-11-16 17:24:43.353 +03:00 [INF] Executed DbCommand (5ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 17:24:43.354 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication)'
2025-11-16 17:24:43.354 +03:00 [INF] Route matched with {action = "RefreshToken", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.user.AuthResponse] RefreshToken() on controller MappyApplication.Controllers.AuthController (MappyApplication).
2025-11-16 17:24:43.356 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__refreshToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`RefreshToken` = @__refreshToken_0
LIMIT 2
2025-11-16 17:24:43.363 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`FirstName`, `a`.`LastName`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`
FROM `AspNetUsers` AS `a`
WHERE `a`.`Id` = @__p_0
LIMIT 1
2025-11-16 17:24:43.382 +03:00 [INF] Executed DbCommand (17ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']

        UPDATE TOKENS
        SET Revoked = true, Expired = true
        WHERE UserId = @p0
          AND DeviceId = @p1
          AND Revoked = false
          AND Expired = false
2025-11-16 17:24:43.401 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a0`.`Name`
FROM `AspNetUserRoles` AS `a`
INNER JOIN `AspNetRoles` AS `a0` ON `a`.`RoleId` = `a0`.`Id`
WHERE `a`.`UserId` = @__userId_0
2025-11-16 17:24:43.410 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ClaimType`, `a`.`ClaimValue`, `a`.`UserId`
FROM `AspNetUserClaims` AS `a`
WHERE `a`.`UserId` = @__user_Id_0
2025-11-16 17:24:43.413 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a0`.`Name`
FROM `AspNetUserRoles` AS `a`
INNER JOIN `AspNetRoles` AS `a0` ON `a`.`RoleId` = `a0`.`Id`
WHERE `a`.`UserId` = @__userId_0
2025-11-16 17:24:43.416 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ClaimType`, `a`.`ClaimValue`, `a`.`UserId`
FROM `AspNetUserClaims` AS `a`
WHERE `a`.`UserId` = @__user_Id_0
2025-11-16 17:24:43.418 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (DbType = DateTime), @p2='?' (Size = 4000), @p3='?' (DbType = Boolean), @p4='?' (Size = 4000), @p5='?' (DbType = Boolean), @p6='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO `Tokens` (`AccessToken`, `CreatedAt`, `DeviceId`, `Expired`, `RefreshToken`, `Revoked`, `UserId`)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6);
SELECT `Id`
FROM `Tokens`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();
2025-11-16 17:24:43.419 +03:00 [INF] Added Token MappyApplication.Data.Token
2025-11-16 17:24:43.425 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessFailedCount`, `t`.`ConcurrencyStamp`, `t`.`Email`, `t`.`EmailConfirmed`, `t`.`FirstName`, `t`.`LastName`, `t`.`LockoutEnabled`, `t`.`LockoutEnd`, `t`.`NormalizedEmail`, `t`.`NormalizedUserName`, `t`.`PasswordHash`, `t`.`PhoneNumber`, `t`.`PhoneNumberConfirmed`, `t`.`SecurityStamp`, `t`.`TwoFactorEnabled`, `t`.`UserName`, `w`.`Id`, `w`.`Cadence`, `w`.`CityName`, `w`.`Coords`, `w`.`Date`, `w`.`Distance`, `w`.`Duration`, `w`.`Emoji`, `w`.`Pace`, `w`.`Type`, `w`.`UserId`, `c`.`Id`, `c`.`CityName`, `c`.`Country`, `c`.`Date`, `c`.`Emoji`, `c`.`Lat`, `c`.`Lng`, `c`.`Notes`, `c`.`UserId`
FROM (
    SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`FirstName`, `a`.`LastName`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`
    FROM `AspNetUsers` AS `a`
    WHERE `a`.`Id` = @__user_Id_0
    LIMIT 2
) AS `t`
LEFT JOIN `Workouts` AS `w` ON `t`.`Id` = `w`.`UserId`
LEFT JOIN `Cities` AS `c` ON `t`.`Id` = `c`.`UserId`
ORDER BY `t`.`Id`, `w`.`Id`
2025-11-16 17:24:43.428 +03:00 [INF] Executing ObjectResult, writing value of type 'MappyApplication.Models.user.AuthResponse'.
2025-11-16 17:24:43.428 +03:00 [INF] Executed action MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication) in 73.798ms
2025-11-16 17:24:43.428 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication)'
2025-11-16 17:24:43.428 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:8080/api/v1/auth/refresh-token - 200 null application/json; charset=utf-8 156.5988ms
2025-11-16 17:24:45.099 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:8080/api/v1/auth/refresh-token - null 0
2025-11-16 17:24:45.109 +03:00 [INF] CORS policy execution successful.
2025-11-16 17:24:45.211 +03:00 [INF] Executed DbCommand (10ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 17:24:45.215 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication)'
2025-11-16 17:24:45.217 +03:00 [INF] Route matched with {action = "RefreshToken", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.user.AuthResponse] RefreshToken() on controller MappyApplication.Controllers.AuthController (MappyApplication).
2025-11-16 17:24:45.222 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[@__refreshToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`RefreshToken` = @__refreshToken_0
LIMIT 2
2025-11-16 17:24:45.232 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[@__p_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`FirstName`, `a`.`LastName`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`
FROM `AspNetUsers` AS `a`
WHERE `a`.`Id` = @__p_0
LIMIT 1
2025-11-16 17:24:45.239 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']

        UPDATE TOKENS
        SET Revoked = true, Expired = true
        WHERE UserId = @p0
          AND DeviceId = @p1
          AND Revoked = false
          AND Expired = false
2025-11-16 17:24:45.243 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a0`.`Name`
FROM `AspNetUserRoles` AS `a`
INNER JOIN `AspNetRoles` AS `a0` ON `a`.`RoleId` = `a0`.`Id`
WHERE `a`.`UserId` = @__userId_0
2025-11-16 17:24:45.247 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ClaimType`, `a`.`ClaimValue`, `a`.`UserId`
FROM `AspNetUserClaims` AS `a`
WHERE `a`.`UserId` = @__user_Id_0
2025-11-16 17:24:45.249 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a0`.`Name`
FROM `AspNetUserRoles` AS `a`
INNER JOIN `AspNetRoles` AS `a0` ON `a`.`RoleId` = `a0`.`Id`
WHERE `a`.`UserId` = @__userId_0
2025-11-16 17:24:45.250 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ClaimType`, `a`.`ClaimValue`, `a`.`UserId`
FROM `AspNetUserClaims` AS `a`
WHERE `a`.`UserId` = @__user_Id_0
2025-11-16 17:24:45.256 +03:00 [INF] Executed DbCommand (5ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (DbType = DateTime), @p2='?' (Size = 4000), @p3='?' (DbType = Boolean), @p4='?' (Size = 4000), @p5='?' (DbType = Boolean), @p6='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO `Tokens` (`AccessToken`, `CreatedAt`, `DeviceId`, `Expired`, `RefreshToken`, `Revoked`, `UserId`)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6);
SELECT `Id`
FROM `Tokens`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();
2025-11-16 17:24:45.259 +03:00 [INF] Added Token MappyApplication.Data.Token
2025-11-16 17:24:45.264 +03:00 [INF] Executed DbCommand (4ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessFailedCount`, `t`.`ConcurrencyStamp`, `t`.`Email`, `t`.`EmailConfirmed`, `t`.`FirstName`, `t`.`LastName`, `t`.`LockoutEnabled`, `t`.`LockoutEnd`, `t`.`NormalizedEmail`, `t`.`NormalizedUserName`, `t`.`PasswordHash`, `t`.`PhoneNumber`, `t`.`PhoneNumberConfirmed`, `t`.`SecurityStamp`, `t`.`TwoFactorEnabled`, `t`.`UserName`, `w`.`Id`, `w`.`Cadence`, `w`.`CityName`, `w`.`Coords`, `w`.`Date`, `w`.`Distance`, `w`.`Duration`, `w`.`Emoji`, `w`.`Pace`, `w`.`Type`, `w`.`UserId`, `c`.`Id`, `c`.`CityName`, `c`.`Country`, `c`.`Date`, `c`.`Emoji`, `c`.`Lat`, `c`.`Lng`, `c`.`Notes`, `c`.`UserId`
FROM (
    SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`FirstName`, `a`.`LastName`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`
    FROM `AspNetUsers` AS `a`
    WHERE `a`.`Id` = @__user_Id_0
    LIMIT 2
) AS `t`
LEFT JOIN `Workouts` AS `w` ON `t`.`Id` = `w`.`UserId`
LEFT JOIN `Cities` AS `c` ON `t`.`Id` = `c`.`UserId`
ORDER BY `t`.`Id`, `w`.`Id`
2025-11-16 17:24:45.267 +03:00 [INF] Executing ObjectResult, writing value of type 'MappyApplication.Models.user.AuthResponse'.
2025-11-16 17:24:45.267 +03:00 [INF] Executed action MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication) in 50.1076ms
2025-11-16 17:24:45.267 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication)'
2025-11-16 17:24:45.268 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:8080/api/v1/auth/refresh-token - 200 null application/json; charset=utf-8 168.4227ms
2025-11-16 17:25:15.623 +03:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:8080/api/v1/auth/refresh-token - null null
2025-11-16 17:25:15.626 +03:00 [INF] CORS policy execution successful.
2025-11-16 17:25:15.627 +03:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:8080/api/v1/auth/refresh-token - 204 null null 3.5115ms
2025-11-16 17:25:15.629 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:8080/api/v1/auth/refresh-token - null 0
2025-11-16 17:25:15.629 +03:00 [INF] CORS policy execution successful.
2025-11-16 17:25:15.713 +03:00 [INF] Executed DbCommand (4ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 17:25:15.714 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication)'
2025-11-16 17:25:15.714 +03:00 [INF] Route matched with {action = "RefreshToken", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.user.AuthResponse] RefreshToken() on controller MappyApplication.Controllers.AuthController (MappyApplication).
2025-11-16 17:25:15.726 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__refreshToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`RefreshToken` = @__refreshToken_0
LIMIT 2
2025-11-16 17:25:15.753 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__p_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`FirstName`, `a`.`LastName`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`
FROM `AspNetUsers` AS `a`
WHERE `a`.`Id` = @__p_0
LIMIT 1
2025-11-16 17:25:15.772 +03:00 [INF] Executed DbCommand (10ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']

        UPDATE TOKENS
        SET Revoked = true, Expired = true
        WHERE UserId = @p0
          AND DeviceId = @p1
          AND Revoked = false
          AND Expired = false
2025-11-16 17:25:15.775 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a0`.`Name`
FROM `AspNetUserRoles` AS `a`
INNER JOIN `AspNetRoles` AS `a0` ON `a`.`RoleId` = `a0`.`Id`
WHERE `a`.`UserId` = @__userId_0
2025-11-16 17:25:15.778 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ClaimType`, `a`.`ClaimValue`, `a`.`UserId`
FROM `AspNetUserClaims` AS `a`
WHERE `a`.`UserId` = @__user_Id_0
2025-11-16 17:25:15.783 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a0`.`Name`
FROM `AspNetUserRoles` AS `a`
INNER JOIN `AspNetRoles` AS `a0` ON `a`.`RoleId` = `a0`.`Id`
WHERE `a`.`UserId` = @__userId_0
2025-11-16 17:25:15.791 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ClaimType`, `a`.`ClaimValue`, `a`.`UserId`
FROM `AspNetUserClaims` AS `a`
WHERE `a`.`UserId` = @__user_Id_0
2025-11-16 17:25:15.799 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (DbType = DateTime), @p2='?' (Size = 4000), @p3='?' (DbType = Boolean), @p4='?' (Size = 4000), @p5='?' (DbType = Boolean), @p6='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO `Tokens` (`AccessToken`, `CreatedAt`, `DeviceId`, `Expired`, `RefreshToken`, `Revoked`, `UserId`)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6);
SELECT `Id`
FROM `Tokens`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();
2025-11-16 17:25:15.804 +03:00 [INF] Added Token MappyApplication.Data.Token
2025-11-16 17:25:15.810 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessFailedCount`, `t`.`ConcurrencyStamp`, `t`.`Email`, `t`.`EmailConfirmed`, `t`.`FirstName`, `t`.`LastName`, `t`.`LockoutEnabled`, `t`.`LockoutEnd`, `t`.`NormalizedEmail`, `t`.`NormalizedUserName`, `t`.`PasswordHash`, `t`.`PhoneNumber`, `t`.`PhoneNumberConfirmed`, `t`.`SecurityStamp`, `t`.`TwoFactorEnabled`, `t`.`UserName`, `w`.`Id`, `w`.`Cadence`, `w`.`CityName`, `w`.`Coords`, `w`.`Date`, `w`.`Distance`, `w`.`Duration`, `w`.`Emoji`, `w`.`Pace`, `w`.`Type`, `w`.`UserId`, `c`.`Id`, `c`.`CityName`, `c`.`Country`, `c`.`Date`, `c`.`Emoji`, `c`.`Lat`, `c`.`Lng`, `c`.`Notes`, `c`.`UserId`
FROM (
    SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`FirstName`, `a`.`LastName`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`
    FROM `AspNetUsers` AS `a`
    WHERE `a`.`Id` = @__user_Id_0
    LIMIT 2
) AS `t`
LEFT JOIN `Workouts` AS `w` ON `t`.`Id` = `w`.`UserId`
LEFT JOIN `Cities` AS `c` ON `t`.`Id` = `c`.`UserId`
ORDER BY `t`.`Id`, `w`.`Id`
2025-11-16 17:25:15.825 +03:00 [INF] Executing ObjectResult, writing value of type 'MappyApplication.Models.user.AuthResponse'.
2025-11-16 17:25:15.833 +03:00 [INF] Executed action MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication) in 119.0039ms
2025-11-16 17:25:15.834 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication)'
2025-11-16 17:25:15.834 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:8080/api/v1/auth/refresh-token - 200 null application/json; charset=utf-8 205.2078ms
2025-11-16 17:25:17.043 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:8080/api/v1/auth/refresh-token - null 0
2025-11-16 17:25:17.056 +03:00 [INF] CORS policy execution successful.
2025-11-16 17:25:17.100 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 17:25:17.102 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication)'
2025-11-16 17:25:17.103 +03:00 [INF] Route matched with {action = "RefreshToken", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.user.AuthResponse] RefreshToken() on controller MappyApplication.Controllers.AuthController (MappyApplication).
2025-11-16 17:25:17.106 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__refreshToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`RefreshToken` = @__refreshToken_0
LIMIT 2
2025-11-16 17:25:17.110 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`FirstName`, `a`.`LastName`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`
FROM `AspNetUsers` AS `a`
WHERE `a`.`Id` = @__p_0
LIMIT 1
2025-11-16 17:25:17.118 +03:00 [INF] Executed DbCommand (5ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']

        UPDATE TOKENS
        SET Revoked = true, Expired = true
        WHERE UserId = @p0
          AND DeviceId = @p1
          AND Revoked = false
          AND Expired = false
2025-11-16 17:25:17.121 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a0`.`Name`
FROM `AspNetUserRoles` AS `a`
INNER JOIN `AspNetRoles` AS `a0` ON `a`.`RoleId` = `a0`.`Id`
WHERE `a`.`UserId` = @__userId_0
2025-11-16 17:25:17.123 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ClaimType`, `a`.`ClaimValue`, `a`.`UserId`
FROM `AspNetUserClaims` AS `a`
WHERE `a`.`UserId` = @__user_Id_0
2025-11-16 17:25:17.124 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a0`.`Name`
FROM `AspNetUserRoles` AS `a`
INNER JOIN `AspNetRoles` AS `a0` ON `a`.`RoleId` = `a0`.`Id`
WHERE `a`.`UserId` = @__userId_0
2025-11-16 17:25:17.125 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ClaimType`, `a`.`ClaimValue`, `a`.`UserId`
FROM `AspNetUserClaims` AS `a`
WHERE `a`.`UserId` = @__user_Id_0
2025-11-16 17:25:17.127 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (DbType = DateTime), @p2='?' (Size = 4000), @p3='?' (DbType = Boolean), @p4='?' (Size = 4000), @p5='?' (DbType = Boolean), @p6='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO `Tokens` (`AccessToken`, `CreatedAt`, `DeviceId`, `Expired`, `RefreshToken`, `Revoked`, `UserId`)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6);
SELECT `Id`
FROM `Tokens`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();
2025-11-16 17:25:17.128 +03:00 [INF] Added Token MappyApplication.Data.Token
2025-11-16 17:25:17.133 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessFailedCount`, `t`.`ConcurrencyStamp`, `t`.`Email`, `t`.`EmailConfirmed`, `t`.`FirstName`, `t`.`LastName`, `t`.`LockoutEnabled`, `t`.`LockoutEnd`, `t`.`NormalizedEmail`, `t`.`NormalizedUserName`, `t`.`PasswordHash`, `t`.`PhoneNumber`, `t`.`PhoneNumberConfirmed`, `t`.`SecurityStamp`, `t`.`TwoFactorEnabled`, `t`.`UserName`, `w`.`Id`, `w`.`Cadence`, `w`.`CityName`, `w`.`Coords`, `w`.`Date`, `w`.`Distance`, `w`.`Duration`, `w`.`Emoji`, `w`.`Pace`, `w`.`Type`, `w`.`UserId`, `c`.`Id`, `c`.`CityName`, `c`.`Country`, `c`.`Date`, `c`.`Emoji`, `c`.`Lat`, `c`.`Lng`, `c`.`Notes`, `c`.`UserId`
FROM (
    SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`FirstName`, `a`.`LastName`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`
    FROM `AspNetUsers` AS `a`
    WHERE `a`.`Id` = @__user_Id_0
    LIMIT 2
) AS `t`
LEFT JOIN `Workouts` AS `w` ON `t`.`Id` = `w`.`UserId`
LEFT JOIN `Cities` AS `c` ON `t`.`Id` = `c`.`UserId`
ORDER BY `t`.`Id`, `w`.`Id`
2025-11-16 17:25:17.133 +03:00 [INF] Executing ObjectResult, writing value of type 'MappyApplication.Models.user.AuthResponse'.
2025-11-16 17:25:17.133 +03:00 [INF] Executed action MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication) in 29.796ms
2025-11-16 17:25:17.133 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication)'
2025-11-16 17:25:17.133 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:8080/api/v1/auth/refresh-token - 200 null application/json; charset=utf-8 90.4532ms
2025-11-16 17:25:38.160 +03:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:8080/api/v1/auth/refresh-token - null null
2025-11-16 17:25:38.161 +03:00 [INF] CORS policy execution successful.
2025-11-16 17:25:38.163 +03:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:8080/api/v1/auth/refresh-token - 204 null null 3.0984ms
2025-11-16 17:25:38.167 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:8080/api/v1/auth/refresh-token - null 0
2025-11-16 17:25:38.167 +03:00 [INF] CORS policy execution successful.
2025-11-16 17:25:38.212 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 17:25:38.214 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication)'
2025-11-16 17:25:38.214 +03:00 [INF] Route matched with {action = "RefreshToken", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.user.AuthResponse] RefreshToken() on controller MappyApplication.Controllers.AuthController (MappyApplication).
2025-11-16 17:25:38.216 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__refreshToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`RefreshToken` = @__refreshToken_0
LIMIT 2
2025-11-16 17:25:38.251 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`FirstName`, `a`.`LastName`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`
FROM `AspNetUsers` AS `a`
WHERE `a`.`Id` = @__p_0
LIMIT 1
2025-11-16 17:25:38.276 +03:00 [INF] Executed DbCommand (7ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']

        UPDATE TOKENS
        SET Revoked = true, Expired = true
        WHERE UserId = @p0
          AND DeviceId = @p1
          AND Revoked = false
          AND Expired = false
2025-11-16 17:25:38.281 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a0`.`Name`
FROM `AspNetUserRoles` AS `a`
INNER JOIN `AspNetRoles` AS `a0` ON `a`.`RoleId` = `a0`.`Id`
WHERE `a`.`UserId` = @__userId_0
2025-11-16 17:25:38.285 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ClaimType`, `a`.`ClaimValue`, `a`.`UserId`
FROM `AspNetUserClaims` AS `a`
WHERE `a`.`UserId` = @__user_Id_0
2025-11-16 17:25:38.288 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a0`.`Name`
FROM `AspNetUserRoles` AS `a`
INNER JOIN `AspNetRoles` AS `a0` ON `a`.`RoleId` = `a0`.`Id`
WHERE `a`.`UserId` = @__userId_0
2025-11-16 17:25:38.289 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ClaimType`, `a`.`ClaimValue`, `a`.`UserId`
FROM `AspNetUserClaims` AS `a`
WHERE `a`.`UserId` = @__user_Id_0
2025-11-16 17:25:38.294 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (DbType = DateTime), @p2='?' (Size = 4000), @p3='?' (DbType = Boolean), @p4='?' (Size = 4000), @p5='?' (DbType = Boolean), @p6='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO `Tokens` (`AccessToken`, `CreatedAt`, `DeviceId`, `Expired`, `RefreshToken`, `Revoked`, `UserId`)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6);
SELECT `Id`
FROM `Tokens`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();
2025-11-16 17:25:38.295 +03:00 [INF] Added Token MappyApplication.Data.Token
2025-11-16 17:25:38.299 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessFailedCount`, `t`.`ConcurrencyStamp`, `t`.`Email`, `t`.`EmailConfirmed`, `t`.`FirstName`, `t`.`LastName`, `t`.`LockoutEnabled`, `t`.`LockoutEnd`, `t`.`NormalizedEmail`, `t`.`NormalizedUserName`, `t`.`PasswordHash`, `t`.`PhoneNumber`, `t`.`PhoneNumberConfirmed`, `t`.`SecurityStamp`, `t`.`TwoFactorEnabled`, `t`.`UserName`, `w`.`Id`, `w`.`Cadence`, `w`.`CityName`, `w`.`Coords`, `w`.`Date`, `w`.`Distance`, `w`.`Duration`, `w`.`Emoji`, `w`.`Pace`, `w`.`Type`, `w`.`UserId`, `c`.`Id`, `c`.`CityName`, `c`.`Country`, `c`.`Date`, `c`.`Emoji`, `c`.`Lat`, `c`.`Lng`, `c`.`Notes`, `c`.`UserId`
FROM (
    SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`FirstName`, `a`.`LastName`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`
    FROM `AspNetUsers` AS `a`
    WHERE `a`.`Id` = @__user_Id_0
    LIMIT 2
) AS `t`
LEFT JOIN `Workouts` AS `w` ON `t`.`Id` = `w`.`UserId`
LEFT JOIN `Cities` AS `c` ON `t`.`Id` = `c`.`UserId`
ORDER BY `t`.`Id`, `w`.`Id`
2025-11-16 17:25:38.300 +03:00 [INF] Executing ObjectResult, writing value of type 'MappyApplication.Models.user.AuthResponse'.
2025-11-16 17:25:38.301 +03:00 [INF] Executed action MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication) in 86.7079ms
2025-11-16 17:25:38.301 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication)'
2025-11-16 17:25:38.301 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:8080/api/v1/auth/refresh-token - 200 null application/json; charset=utf-8 134.3667ms
2025-11-16 17:26:11.324 +03:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:8080/api/v1/auth/refresh-token - null null
2025-11-16 17:26:11.328 +03:00 [INF] CORS policy execution successful.
2025-11-16 17:26:11.328 +03:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:8080/api/v1/auth/refresh-token - 204 null null 4.105ms
2025-11-16 17:26:11.330 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:8080/api/v1/auth/refresh-token - null 0
2025-11-16 17:26:11.330 +03:00 [INF] CORS policy execution successful.
2025-11-16 17:26:11.363 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 17:26:11.365 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication)'
2025-11-16 17:26:11.365 +03:00 [INF] Route matched with {action = "RefreshToken", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.user.AuthResponse] RefreshToken() on controller MappyApplication.Controllers.AuthController (MappyApplication).
2025-11-16 17:26:11.367 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__refreshToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`RefreshToken` = @__refreshToken_0
LIMIT 2
2025-11-16 17:26:11.374 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`FirstName`, `a`.`LastName`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`
FROM `AspNetUsers` AS `a`
WHERE `a`.`Id` = @__p_0
LIMIT 1
2025-11-16 17:26:11.377 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']

        UPDATE TOKENS
        SET Revoked = true, Expired = true
        WHERE UserId = @p0
          AND DeviceId = @p1
          AND Revoked = false
          AND Expired = false
2025-11-16 17:26:11.379 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a0`.`Name`
FROM `AspNetUserRoles` AS `a`
INNER JOIN `AspNetRoles` AS `a0` ON `a`.`RoleId` = `a0`.`Id`
WHERE `a`.`UserId` = @__userId_0
2025-11-16 17:26:11.382 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ClaimType`, `a`.`ClaimValue`, `a`.`UserId`
FROM `AspNetUserClaims` AS `a`
WHERE `a`.`UserId` = @__user_Id_0
2025-11-16 17:26:11.404 +03:00 [INF] Executed DbCommand (5ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a0`.`Name`
FROM `AspNetUserRoles` AS `a`
INNER JOIN `AspNetRoles` AS `a0` ON `a`.`RoleId` = `a0`.`Id`
WHERE `a`.`UserId` = @__userId_0
2025-11-16 17:26:11.408 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ClaimType`, `a`.`ClaimValue`, `a`.`UserId`
FROM `AspNetUserClaims` AS `a`
WHERE `a`.`UserId` = @__user_Id_0
2025-11-16 17:26:11.417 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (DbType = DateTime), @p2='?' (Size = 4000), @p3='?' (DbType = Boolean), @p4='?' (Size = 4000), @p5='?' (DbType = Boolean), @p6='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO `Tokens` (`AccessToken`, `CreatedAt`, `DeviceId`, `Expired`, `RefreshToken`, `Revoked`, `UserId`)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6);
SELECT `Id`
FROM `Tokens`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();
2025-11-16 17:26:11.419 +03:00 [INF] Added Token MappyApplication.Data.Token
2025-11-16 17:26:11.422 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessFailedCount`, `t`.`ConcurrencyStamp`, `t`.`Email`, `t`.`EmailConfirmed`, `t`.`FirstName`, `t`.`LastName`, `t`.`LockoutEnabled`, `t`.`LockoutEnd`, `t`.`NormalizedEmail`, `t`.`NormalizedUserName`, `t`.`PasswordHash`, `t`.`PhoneNumber`, `t`.`PhoneNumberConfirmed`, `t`.`SecurityStamp`, `t`.`TwoFactorEnabled`, `t`.`UserName`, `w`.`Id`, `w`.`Cadence`, `w`.`CityName`, `w`.`Coords`, `w`.`Date`, `w`.`Distance`, `w`.`Duration`, `w`.`Emoji`, `w`.`Pace`, `w`.`Type`, `w`.`UserId`, `c`.`Id`, `c`.`CityName`, `c`.`Country`, `c`.`Date`, `c`.`Emoji`, `c`.`Lat`, `c`.`Lng`, `c`.`Notes`, `c`.`UserId`
FROM (
    SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`FirstName`, `a`.`LastName`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`
    FROM `AspNetUsers` AS `a`
    WHERE `a`.`Id` = @__user_Id_0
    LIMIT 2
) AS `t`
LEFT JOIN `Workouts` AS `w` ON `t`.`Id` = `w`.`UserId`
LEFT JOIN `Cities` AS `c` ON `t`.`Id` = `c`.`UserId`
ORDER BY `t`.`Id`, `w`.`Id`
2025-11-16 17:26:11.423 +03:00 [INF] Executing ObjectResult, writing value of type 'MappyApplication.Models.user.AuthResponse'.
2025-11-16 17:26:11.424 +03:00 [INF] Executed action MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication) in 58.714ms
2025-11-16 17:26:11.424 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication)'
2025-11-16 17:26:11.424 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:8080/api/v1/auth/refresh-token - 200 null application/json; charset=utf-8 93.6598ms
2025-11-16 17:26:41.845 +03:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:8080/api/v1/auth/refresh-token - null null
2025-11-16 17:26:41.848 +03:00 [INF] CORS policy execution successful.
2025-11-16 17:26:41.849 +03:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:8080/api/v1/auth/refresh-token - 204 null null 3.0879ms
2025-11-16 17:26:41.849 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:8080/api/v1/auth/refresh-token - null 0
2025-11-16 17:26:41.850 +03:00 [INF] CORS policy execution successful.
2025-11-16 17:26:41.904 +03:00 [INF] Executed DbCommand (7ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 17:26:41.904 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication)'
2025-11-16 17:26:41.905 +03:00 [INF] Route matched with {action = "RefreshToken", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.user.AuthResponse] RefreshToken() on controller MappyApplication.Controllers.AuthController (MappyApplication).
2025-11-16 17:26:41.906 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__refreshToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`RefreshToken` = @__refreshToken_0
LIMIT 2
2025-11-16 17:26:41.907 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`FirstName`, `a`.`LastName`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`
FROM `AspNetUsers` AS `a`
WHERE `a`.`Id` = @__p_0
LIMIT 1
2025-11-16 17:26:41.910 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']

        UPDATE TOKENS
        SET Revoked = true, Expired = true
        WHERE UserId = @p0
          AND DeviceId = @p1
          AND Revoked = false
          AND Expired = false
2025-11-16 17:26:41.916 +03:00 [INF] Executed DbCommand (4ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a0`.`Name`
FROM `AspNetUserRoles` AS `a`
INNER JOIN `AspNetRoles` AS `a0` ON `a`.`RoleId` = `a0`.`Id`
WHERE `a`.`UserId` = @__userId_0
2025-11-16 17:26:41.918 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ClaimType`, `a`.`ClaimValue`, `a`.`UserId`
FROM `AspNetUserClaims` AS `a`
WHERE `a`.`UserId` = @__user_Id_0
2025-11-16 17:26:41.921 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a0`.`Name`
FROM `AspNetUserRoles` AS `a`
INNER JOIN `AspNetRoles` AS `a0` ON `a`.`RoleId` = `a0`.`Id`
WHERE `a`.`UserId` = @__userId_0
2025-11-16 17:26:41.921 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ClaimType`, `a`.`ClaimValue`, `a`.`UserId`
FROM `AspNetUserClaims` AS `a`
WHERE `a`.`UserId` = @__user_Id_0
2025-11-16 17:26:41.923 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (DbType = DateTime), @p2='?' (Size = 4000), @p3='?' (DbType = Boolean), @p4='?' (Size = 4000), @p5='?' (DbType = Boolean), @p6='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO `Tokens` (`AccessToken`, `CreatedAt`, `DeviceId`, `Expired`, `RefreshToken`, `Revoked`, `UserId`)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6);
SELECT `Id`
FROM `Tokens`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();
2025-11-16 17:26:41.924 +03:00 [INF] Added Token MappyApplication.Data.Token
2025-11-16 17:26:41.925 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessFailedCount`, `t`.`ConcurrencyStamp`, `t`.`Email`, `t`.`EmailConfirmed`, `t`.`FirstName`, `t`.`LastName`, `t`.`LockoutEnabled`, `t`.`LockoutEnd`, `t`.`NormalizedEmail`, `t`.`NormalizedUserName`, `t`.`PasswordHash`, `t`.`PhoneNumber`, `t`.`PhoneNumberConfirmed`, `t`.`SecurityStamp`, `t`.`TwoFactorEnabled`, `t`.`UserName`, `w`.`Id`, `w`.`Cadence`, `w`.`CityName`, `w`.`Coords`, `w`.`Date`, `w`.`Distance`, `w`.`Duration`, `w`.`Emoji`, `w`.`Pace`, `w`.`Type`, `w`.`UserId`, `c`.`Id`, `c`.`CityName`, `c`.`Country`, `c`.`Date`, `c`.`Emoji`, `c`.`Lat`, `c`.`Lng`, `c`.`Notes`, `c`.`UserId`
FROM (
    SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`FirstName`, `a`.`LastName`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`
    FROM `AspNetUsers` AS `a`
    WHERE `a`.`Id` = @__user_Id_0
    LIMIT 2
) AS `t`
LEFT JOIN `Workouts` AS `w` ON `t`.`Id` = `w`.`UserId`
LEFT JOIN `Cities` AS `c` ON `t`.`Id` = `c`.`UserId`
ORDER BY `t`.`Id`, `w`.`Id`
2025-11-16 17:26:41.926 +03:00 [INF] Executing ObjectResult, writing value of type 'MappyApplication.Models.user.AuthResponse'.
2025-11-16 17:26:41.926 +03:00 [INF] Executed action MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication) in 20.9635ms
2025-11-16 17:26:41.926 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication)'
2025-11-16 17:26:41.926 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:8080/api/v1/auth/refresh-token - 200 null application/json; charset=utf-8 76.2467ms
2025-11-16 17:27:35.007 +03:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:8080/api/v1/auth/refresh-token - null null
2025-11-16 17:27:35.011 +03:00 [INF] CORS policy execution successful.
2025-11-16 17:27:35.012 +03:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:8080/api/v1/auth/refresh-token - 204 null null 5.7953ms
2025-11-16 17:27:35.014 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:8080/api/v1/auth/refresh-token - null 0
2025-11-16 17:27:35.017 +03:00 [INF] CORS policy execution successful.
2025-11-16 17:27:35.112 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 17:27:35.116 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication)'
2025-11-16 17:27:35.116 +03:00 [INF] Route matched with {action = "RefreshToken", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.user.AuthResponse] RefreshToken() on controller MappyApplication.Controllers.AuthController (MappyApplication).
2025-11-16 17:27:35.118 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__refreshToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`RefreshToken` = @__refreshToken_0
LIMIT 2
2025-11-16 17:27:35.121 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`FirstName`, `a`.`LastName`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`
FROM `AspNetUsers` AS `a`
WHERE `a`.`Id` = @__p_0
LIMIT 1
2025-11-16 17:27:35.125 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']

        UPDATE TOKENS
        SET Revoked = true, Expired = true
        WHERE UserId = @p0
          AND DeviceId = @p1
          AND Revoked = false
          AND Expired = false
2025-11-16 17:27:35.128 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a0`.`Name`
FROM `AspNetUserRoles` AS `a`
INNER JOIN `AspNetRoles` AS `a0` ON `a`.`RoleId` = `a0`.`Id`
WHERE `a`.`UserId` = @__userId_0
2025-11-16 17:27:35.129 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ClaimType`, `a`.`ClaimValue`, `a`.`UserId`
FROM `AspNetUserClaims` AS `a`
WHERE `a`.`UserId` = @__user_Id_0
2025-11-16 17:27:35.132 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a0`.`Name`
FROM `AspNetUserRoles` AS `a`
INNER JOIN `AspNetRoles` AS `a0` ON `a`.`RoleId` = `a0`.`Id`
WHERE `a`.`UserId` = @__userId_0
2025-11-16 17:27:35.133 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ClaimType`, `a`.`ClaimValue`, `a`.`UserId`
FROM `AspNetUserClaims` AS `a`
WHERE `a`.`UserId` = @__user_Id_0
2025-11-16 17:27:35.138 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (DbType = DateTime), @p2='?' (Size = 4000), @p3='?' (DbType = Boolean), @p4='?' (Size = 4000), @p5='?' (DbType = Boolean), @p6='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO `Tokens` (`AccessToken`, `CreatedAt`, `DeviceId`, `Expired`, `RefreshToken`, `Revoked`, `UserId`)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6);
SELECT `Id`
FROM `Tokens`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();
2025-11-16 17:27:35.139 +03:00 [INF] Added Token MappyApplication.Data.Token
2025-11-16 17:27:35.141 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessFailedCount`, `t`.`ConcurrencyStamp`, `t`.`Email`, `t`.`EmailConfirmed`, `t`.`FirstName`, `t`.`LastName`, `t`.`LockoutEnabled`, `t`.`LockoutEnd`, `t`.`NormalizedEmail`, `t`.`NormalizedUserName`, `t`.`PasswordHash`, `t`.`PhoneNumber`, `t`.`PhoneNumberConfirmed`, `t`.`SecurityStamp`, `t`.`TwoFactorEnabled`, `t`.`UserName`, `w`.`Id`, `w`.`Cadence`, `w`.`CityName`, `w`.`Coords`, `w`.`Date`, `w`.`Distance`, `w`.`Duration`, `w`.`Emoji`, `w`.`Pace`, `w`.`Type`, `w`.`UserId`, `c`.`Id`, `c`.`CityName`, `c`.`Country`, `c`.`Date`, `c`.`Emoji`, `c`.`Lat`, `c`.`Lng`, `c`.`Notes`, `c`.`UserId`
FROM (
    SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`FirstName`, `a`.`LastName`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`
    FROM `AspNetUsers` AS `a`
    WHERE `a`.`Id` = @__user_Id_0
    LIMIT 2
) AS `t`
LEFT JOIN `Workouts` AS `w` ON `t`.`Id` = `w`.`UserId`
LEFT JOIN `Cities` AS `c` ON `t`.`Id` = `c`.`UserId`
ORDER BY `t`.`Id`, `w`.`Id`
2025-11-16 17:27:35.143 +03:00 [INF] Executing ObjectResult, writing value of type 'MappyApplication.Models.user.AuthResponse'.
2025-11-16 17:27:35.143 +03:00 [INF] Executed action MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication) in 26.5415ms
2025-11-16 17:27:35.143 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication)'
2025-11-16 17:27:35.143 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:8080/api/v1/auth/refresh-token - 200 null application/json; charset=utf-8 129.0199ms
2025-11-16 17:27:40.461 +03:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:8080/api/v1/auth/login - null null
2025-11-16 17:27:40.463 +03:00 [INF] CORS policy execution successful.
2025-11-16 17:27:40.465 +03:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:8080/api/v1/auth/login - 204 null null 4.2951ms
2025-11-16 17:27:40.468 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:8080/api/v1/auth/login - application/json 51
2025-11-16 17:27:40.468 +03:00 [INF] CORS policy execution successful.
2025-11-16 17:27:40.503 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 17:27:40.507 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.AuthController.Login (MappyApplication)'
2025-11-16 17:27:40.508 +03:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.user.AuthResponse] Login(MappyApplication.Models.user.AuthLogin) on controller MappyApplication.Controllers.AuthController (MappyApplication).
2025-11-16 17:27:40.536 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`FirstName`, `a`.`LastName`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`
FROM `AspNetUsers` AS `a`
WHERE `a`.`NormalizedEmail` = @__normalizedEmail_0
LIMIT 2
2025-11-16 17:27:40.582 +03:00 [INF] Executed DbCommand (4ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']

        UPDATE TOKENS
        SET Revoked = true, Expired = true
        WHERE UserId = @p0
          AND DeviceId = @p1
          AND Revoked = false
          AND Expired = false
2025-11-16 17:27:40.584 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a0`.`Name`
FROM `AspNetUserRoles` AS `a`
INNER JOIN `AspNetRoles` AS `a0` ON `a`.`RoleId` = `a0`.`Id`
WHERE `a`.`UserId` = @__userId_0
2025-11-16 17:27:40.585 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ClaimType`, `a`.`ClaimValue`, `a`.`UserId`
FROM `AspNetUserClaims` AS `a`
WHERE `a`.`UserId` = @__user_Id_0
2025-11-16 17:27:40.585 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a0`.`Name`
FROM `AspNetUserRoles` AS `a`
INNER JOIN `AspNetRoles` AS `a0` ON `a`.`RoleId` = `a0`.`Id`
WHERE `a`.`UserId` = @__userId_0
2025-11-16 17:27:40.586 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ClaimType`, `a`.`ClaimValue`, `a`.`UserId`
FROM `AspNetUserClaims` AS `a`
WHERE `a`.`UserId` = @__user_Id_0
2025-11-16 17:27:40.587 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (DbType = DateTime), @p2='?' (Size = 4000), @p3='?' (DbType = Boolean), @p4='?' (Size = 4000), @p5='?' (DbType = Boolean), @p6='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO `Tokens` (`AccessToken`, `CreatedAt`, `DeviceId`, `Expired`, `RefreshToken`, `Revoked`, `UserId`)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6);
SELECT `Id`
FROM `Tokens`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();
2025-11-16 17:27:40.588 +03:00 [INF] Added Token MappyApplication.Data.Token
2025-11-16 17:27:40.589 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessFailedCount`, `t`.`ConcurrencyStamp`, `t`.`Email`, `t`.`EmailConfirmed`, `t`.`FirstName`, `t`.`LastName`, `t`.`LockoutEnabled`, `t`.`LockoutEnd`, `t`.`NormalizedEmail`, `t`.`NormalizedUserName`, `t`.`PasswordHash`, `t`.`PhoneNumber`, `t`.`PhoneNumberConfirmed`, `t`.`SecurityStamp`, `t`.`TwoFactorEnabled`, `t`.`UserName`, `w`.`Id`, `w`.`Cadence`, `w`.`CityName`, `w`.`Coords`, `w`.`Date`, `w`.`Distance`, `w`.`Duration`, `w`.`Emoji`, `w`.`Pace`, `w`.`Type`, `w`.`UserId`, `c`.`Id`, `c`.`CityName`, `c`.`Country`, `c`.`Date`, `c`.`Emoji`, `c`.`Lat`, `c`.`Lng`, `c`.`Notes`, `c`.`UserId`
FROM (
    SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`FirstName`, `a`.`LastName`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`
    FROM `AspNetUsers` AS `a`
    WHERE `a`.`Id` = @__user_Id_0
    LIMIT 2
) AS `t`
LEFT JOIN `Workouts` AS `w` ON `t`.`Id` = `w`.`UserId`
LEFT JOIN `Cities` AS `c` ON `t`.`Id` = `c`.`UserId`
ORDER BY `t`.`Id`, `w`.`Id`
2025-11-16 17:27:40.590 +03:00 [INF] Executing ObjectResult, writing value of type 'MappyApplication.Models.user.AuthResponse'.
2025-11-16 17:27:40.590 +03:00 [INF] Executed action MappyApplication.Controllers.AuthController.Login (MappyApplication) in 81.9487ms
2025-11-16 17:27:40.590 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.AuthController.Login (MappyApplication)'
2025-11-16 17:27:40.590 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:8080/api/v1/auth/login - 200 null application/json; charset=utf-8 122.3311ms
2025-11-16 17:28:12.667 +03:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:8080/api/v1/auth/refresh-token - null null
2025-11-16 17:28:12.669 +03:00 [INF] CORS policy execution successful.
2025-11-16 17:28:12.670 +03:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:8080/api/v1/auth/refresh-token - 204 null null 4.0858ms
2025-11-16 17:28:12.672 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:8080/api/v1/auth/refresh-token - null 0
2025-11-16 17:28:12.672 +03:00 [INF] CORS policy execution successful.
2025-11-16 17:28:12.738 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 17:28:12.744 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication)'
2025-11-16 17:28:12.744 +03:00 [INF] Route matched with {action = "RefreshToken", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.user.AuthResponse] RefreshToken() on controller MappyApplication.Controllers.AuthController (MappyApplication).
2025-11-16 17:28:12.749 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[@__refreshToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`RefreshToken` = @__refreshToken_0
LIMIT 2
2025-11-16 17:28:12.755 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__p_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`FirstName`, `a`.`LastName`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`
FROM `AspNetUsers` AS `a`
WHERE `a`.`Id` = @__p_0
LIMIT 1
2025-11-16 17:28:12.764 +03:00 [INF] Executed DbCommand (6ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']

        UPDATE TOKENS
        SET Revoked = true, Expired = true
        WHERE UserId = @p0
          AND DeviceId = @p1
          AND Revoked = false
          AND Expired = false
2025-11-16 17:28:12.768 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a0`.`Name`
FROM `AspNetUserRoles` AS `a`
INNER JOIN `AspNetRoles` AS `a0` ON `a`.`RoleId` = `a0`.`Id`
WHERE `a`.`UserId` = @__userId_0
2025-11-16 17:28:12.770 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ClaimType`, `a`.`ClaimValue`, `a`.`UserId`
FROM `AspNetUserClaims` AS `a`
WHERE `a`.`UserId` = @__user_Id_0
2025-11-16 17:28:12.784 +03:00 [INF] Executed DbCommand (9ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a0`.`Name`
FROM `AspNetUserRoles` AS `a`
INNER JOIN `AspNetRoles` AS `a0` ON `a`.`RoleId` = `a0`.`Id`
WHERE `a`.`UserId` = @__userId_0
2025-11-16 17:28:12.786 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ClaimType`, `a`.`ClaimValue`, `a`.`UserId`
FROM `AspNetUserClaims` AS `a`
WHERE `a`.`UserId` = @__user_Id_0
2025-11-16 17:28:12.795 +03:00 [INF] Executed DbCommand (5ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (DbType = DateTime), @p2='?' (Size = 4000), @p3='?' (DbType = Boolean), @p4='?' (Size = 4000), @p5='?' (DbType = Boolean), @p6='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO `Tokens` (`AccessToken`, `CreatedAt`, `DeviceId`, `Expired`, `RefreshToken`, `Revoked`, `UserId`)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6);
SELECT `Id`
FROM `Tokens`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();
2025-11-16 17:28:12.798 +03:00 [INF] Added Token MappyApplication.Data.Token
2025-11-16 17:28:12.805 +03:00 [INF] Executed DbCommand (4ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessFailedCount`, `t`.`ConcurrencyStamp`, `t`.`Email`, `t`.`EmailConfirmed`, `t`.`FirstName`, `t`.`LastName`, `t`.`LockoutEnabled`, `t`.`LockoutEnd`, `t`.`NormalizedEmail`, `t`.`NormalizedUserName`, `t`.`PasswordHash`, `t`.`PhoneNumber`, `t`.`PhoneNumberConfirmed`, `t`.`SecurityStamp`, `t`.`TwoFactorEnabled`, `t`.`UserName`, `w`.`Id`, `w`.`Cadence`, `w`.`CityName`, `w`.`Coords`, `w`.`Date`, `w`.`Distance`, `w`.`Duration`, `w`.`Emoji`, `w`.`Pace`, `w`.`Type`, `w`.`UserId`, `c`.`Id`, `c`.`CityName`, `c`.`Country`, `c`.`Date`, `c`.`Emoji`, `c`.`Lat`, `c`.`Lng`, `c`.`Notes`, `c`.`UserId`
FROM (
    SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`FirstName`, `a`.`LastName`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`
    FROM `AspNetUsers` AS `a`
    WHERE `a`.`Id` = @__user_Id_0
    LIMIT 2
) AS `t`
LEFT JOIN `Workouts` AS `w` ON `t`.`Id` = `w`.`UserId`
LEFT JOIN `Cities` AS `c` ON `t`.`Id` = `c`.`UserId`
ORDER BY `t`.`Id`, `w`.`Id`
2025-11-16 17:28:12.805 +03:00 [INF] Executing ObjectResult, writing value of type 'MappyApplication.Models.user.AuthResponse'.
2025-11-16 17:28:12.805 +03:00 [INF] Executed action MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication) in 61.3298ms
2025-11-16 17:28:12.805 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication)'
2025-11-16 17:28:12.805 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:8080/api/v1/auth/refresh-token - 200 null application/json; charset=utf-8 133.5974ms
2025-11-16 17:28:16.789 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:8080/api/v1/auth/refresh-token - null 0
2025-11-16 17:28:16.790 +03:00 [INF] CORS policy execution successful.
2025-11-16 17:28:16.842 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 17:28:16.843 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication)'
2025-11-16 17:28:16.843 +03:00 [INF] Route matched with {action = "RefreshToken", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.user.AuthResponse] RefreshToken() on controller MappyApplication.Controllers.AuthController (MappyApplication).
2025-11-16 17:28:16.845 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__refreshToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`RefreshToken` = @__refreshToken_0
LIMIT 2
2025-11-16 17:28:16.848 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`FirstName`, `a`.`LastName`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`
FROM `AspNetUsers` AS `a`
WHERE `a`.`Id` = @__p_0
LIMIT 1
2025-11-16 17:28:16.852 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']

        UPDATE TOKENS
        SET Revoked = true, Expired = true
        WHERE UserId = @p0
          AND DeviceId = @p1
          AND Revoked = false
          AND Expired = false
2025-11-16 17:28:16.854 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a0`.`Name`
FROM `AspNetUserRoles` AS `a`
INNER JOIN `AspNetRoles` AS `a0` ON `a`.`RoleId` = `a0`.`Id`
WHERE `a`.`UserId` = @__userId_0
2025-11-16 17:28:16.858 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ClaimType`, `a`.`ClaimValue`, `a`.`UserId`
FROM `AspNetUserClaims` AS `a`
WHERE `a`.`UserId` = @__user_Id_0
2025-11-16 17:28:16.860 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a0`.`Name`
FROM `AspNetUserRoles` AS `a`
INNER JOIN `AspNetRoles` AS `a0` ON `a`.`RoleId` = `a0`.`Id`
WHERE `a`.`UserId` = @__userId_0
2025-11-16 17:28:16.861 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ClaimType`, `a`.`ClaimValue`, `a`.`UserId`
FROM `AspNetUserClaims` AS `a`
WHERE `a`.`UserId` = @__user_Id_0
2025-11-16 17:28:16.871 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (DbType = DateTime), @p2='?' (Size = 4000), @p3='?' (DbType = Boolean), @p4='?' (Size = 4000), @p5='?' (DbType = Boolean), @p6='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO `Tokens` (`AccessToken`, `CreatedAt`, `DeviceId`, `Expired`, `RefreshToken`, `Revoked`, `UserId`)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6);
SELECT `Id`
FROM `Tokens`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();
2025-11-16 17:28:16.872 +03:00 [INF] Added Token MappyApplication.Data.Token
2025-11-16 17:28:16.874 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessFailedCount`, `t`.`ConcurrencyStamp`, `t`.`Email`, `t`.`EmailConfirmed`, `t`.`FirstName`, `t`.`LastName`, `t`.`LockoutEnabled`, `t`.`LockoutEnd`, `t`.`NormalizedEmail`, `t`.`NormalizedUserName`, `t`.`PasswordHash`, `t`.`PhoneNumber`, `t`.`PhoneNumberConfirmed`, `t`.`SecurityStamp`, `t`.`TwoFactorEnabled`, `t`.`UserName`, `w`.`Id`, `w`.`Cadence`, `w`.`CityName`, `w`.`Coords`, `w`.`Date`, `w`.`Distance`, `w`.`Duration`, `w`.`Emoji`, `w`.`Pace`, `w`.`Type`, `w`.`UserId`, `c`.`Id`, `c`.`CityName`, `c`.`Country`, `c`.`Date`, `c`.`Emoji`, `c`.`Lat`, `c`.`Lng`, `c`.`Notes`, `c`.`UserId`
FROM (
    SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`FirstName`, `a`.`LastName`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`
    FROM `AspNetUsers` AS `a`
    WHERE `a`.`Id` = @__user_Id_0
    LIMIT 2
) AS `t`
LEFT JOIN `Workouts` AS `w` ON `t`.`Id` = `w`.`UserId`
LEFT JOIN `Cities` AS `c` ON `t`.`Id` = `c`.`UserId`
ORDER BY `t`.`Id`, `w`.`Id`
2025-11-16 17:28:16.874 +03:00 [INF] Executing ObjectResult, writing value of type 'MappyApplication.Models.user.AuthResponse'.
2025-11-16 17:28:16.875 +03:00 [INF] Executed action MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication) in 31.1834ms
2025-11-16 17:28:16.875 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication)'
2025-11-16 17:28:16.875 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:8080/api/v1/auth/refresh-token - 200 null application/json; charset=utf-8 85.8706ms
2025-11-16 17:28:32.155 +03:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:8080/api/v1/auth/refresh-token - null null
2025-11-16 17:28:32.157 +03:00 [INF] CORS policy execution successful.
2025-11-16 17:28:32.158 +03:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:8080/api/v1/auth/refresh-token - 204 null null 2.9687ms
2025-11-16 17:28:32.162 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:8080/api/v1/auth/refresh-token - null 0
2025-11-16 17:28:32.162 +03:00 [INF] CORS policy execution successful.
2025-11-16 17:28:32.211 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 17:28:32.212 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication)'
2025-11-16 17:28:32.212 +03:00 [INF] Route matched with {action = "RefreshToken", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.user.AuthResponse] RefreshToken() on controller MappyApplication.Controllers.AuthController (MappyApplication).
2025-11-16 17:28:32.214 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__refreshToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`RefreshToken` = @__refreshToken_0
LIMIT 2
2025-11-16 17:28:32.218 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`FirstName`, `a`.`LastName`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`
FROM `AspNetUsers` AS `a`
WHERE `a`.`Id` = @__p_0
LIMIT 1
2025-11-16 17:28:32.227 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']

        UPDATE TOKENS
        SET Revoked = true, Expired = true
        WHERE UserId = @p0
          AND DeviceId = @p1
          AND Revoked = false
          AND Expired = false
2025-11-16 17:28:32.230 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a0`.`Name`
FROM `AspNetUserRoles` AS `a`
INNER JOIN `AspNetRoles` AS `a0` ON `a`.`RoleId` = `a0`.`Id`
WHERE `a`.`UserId` = @__userId_0
2025-11-16 17:28:32.232 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ClaimType`, `a`.`ClaimValue`, `a`.`UserId`
FROM `AspNetUserClaims` AS `a`
WHERE `a`.`UserId` = @__user_Id_0
2025-11-16 17:28:32.233 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a0`.`Name`
FROM `AspNetUserRoles` AS `a`
INNER JOIN `AspNetRoles` AS `a0` ON `a`.`RoleId` = `a0`.`Id`
WHERE `a`.`UserId` = @__userId_0
2025-11-16 17:28:32.235 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ClaimType`, `a`.`ClaimValue`, `a`.`UserId`
FROM `AspNetUserClaims` AS `a`
WHERE `a`.`UserId` = @__user_Id_0
2025-11-16 17:28:32.244 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (DbType = DateTime), @p2='?' (Size = 4000), @p3='?' (DbType = Boolean), @p4='?' (Size = 4000), @p5='?' (DbType = Boolean), @p6='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO `Tokens` (`AccessToken`, `CreatedAt`, `DeviceId`, `Expired`, `RefreshToken`, `Revoked`, `UserId`)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6);
SELECT `Id`
FROM `Tokens`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();
2025-11-16 17:28:32.245 +03:00 [INF] Added Token MappyApplication.Data.Token
2025-11-16 17:28:32.247 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessFailedCount`, `t`.`ConcurrencyStamp`, `t`.`Email`, `t`.`EmailConfirmed`, `t`.`FirstName`, `t`.`LastName`, `t`.`LockoutEnabled`, `t`.`LockoutEnd`, `t`.`NormalizedEmail`, `t`.`NormalizedUserName`, `t`.`PasswordHash`, `t`.`PhoneNumber`, `t`.`PhoneNumberConfirmed`, `t`.`SecurityStamp`, `t`.`TwoFactorEnabled`, `t`.`UserName`, `w`.`Id`, `w`.`Cadence`, `w`.`CityName`, `w`.`Coords`, `w`.`Date`, `w`.`Distance`, `w`.`Duration`, `w`.`Emoji`, `w`.`Pace`, `w`.`Type`, `w`.`UserId`, `c`.`Id`, `c`.`CityName`, `c`.`Country`, `c`.`Date`, `c`.`Emoji`, `c`.`Lat`, `c`.`Lng`, `c`.`Notes`, `c`.`UserId`
FROM (
    SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`FirstName`, `a`.`LastName`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`
    FROM `AspNetUsers` AS `a`
    WHERE `a`.`Id` = @__user_Id_0
    LIMIT 2
) AS `t`
LEFT JOIN `Workouts` AS `w` ON `t`.`Id` = `w`.`UserId`
LEFT JOIN `Cities` AS `c` ON `t`.`Id` = `c`.`UserId`
ORDER BY `t`.`Id`, `w`.`Id`
2025-11-16 17:28:32.247 +03:00 [INF] Executing ObjectResult, writing value of type 'MappyApplication.Models.user.AuthResponse'.
2025-11-16 17:28:32.247 +03:00 [INF] Executed action MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication) in 35.1797ms
2025-11-16 17:28:32.247 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication)'
2025-11-16 17:28:32.248 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:8080/api/v1/auth/refresh-token - 200 null application/json; charset=utf-8 86.4471ms
2025-11-16 17:28:34.487 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:8080/api/v1/auth/refresh-token - null 0
2025-11-16 17:28:34.489 +03:00 [INF] CORS policy execution successful.
2025-11-16 17:28:34.543 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 17:28:34.547 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication)'
2025-11-16 17:28:34.548 +03:00 [INF] Route matched with {action = "RefreshToken", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.user.AuthResponse] RefreshToken() on controller MappyApplication.Controllers.AuthController (MappyApplication).
2025-11-16 17:28:34.551 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__refreshToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`RefreshToken` = @__refreshToken_0
LIMIT 2
2025-11-16 17:28:34.554 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`FirstName`, `a`.`LastName`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`
FROM `AspNetUsers` AS `a`
WHERE `a`.`Id` = @__p_0
LIMIT 1
2025-11-16 17:28:34.564 +03:00 [INF] Executed DbCommand (4ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']

        UPDATE TOKENS
        SET Revoked = true, Expired = true
        WHERE UserId = @p0
          AND DeviceId = @p1
          AND Revoked = false
          AND Expired = false
2025-11-16 17:28:34.567 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a0`.`Name`
FROM `AspNetUserRoles` AS `a`
INNER JOIN `AspNetRoles` AS `a0` ON `a`.`RoleId` = `a0`.`Id`
WHERE `a`.`UserId` = @__userId_0
2025-11-16 17:28:34.568 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ClaimType`, `a`.`ClaimValue`, `a`.`UserId`
FROM `AspNetUserClaims` AS `a`
WHERE `a`.`UserId` = @__user_Id_0
2025-11-16 17:28:34.571 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a0`.`Name`
FROM `AspNetUserRoles` AS `a`
INNER JOIN `AspNetRoles` AS `a0` ON `a`.`RoleId` = `a0`.`Id`
WHERE `a`.`UserId` = @__userId_0
2025-11-16 17:28:34.572 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ClaimType`, `a`.`ClaimValue`, `a`.`UserId`
FROM `AspNetUserClaims` AS `a`
WHERE `a`.`UserId` = @__user_Id_0
2025-11-16 17:28:34.576 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (DbType = DateTime), @p2='?' (Size = 4000), @p3='?' (DbType = Boolean), @p4='?' (Size = 4000), @p5='?' (DbType = Boolean), @p6='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO `Tokens` (`AccessToken`, `CreatedAt`, `DeviceId`, `Expired`, `RefreshToken`, `Revoked`, `UserId`)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6);
SELECT `Id`
FROM `Tokens`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();
2025-11-16 17:28:34.578 +03:00 [INF] Added Token MappyApplication.Data.Token
2025-11-16 17:28:34.580 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessFailedCount`, `t`.`ConcurrencyStamp`, `t`.`Email`, `t`.`EmailConfirmed`, `t`.`FirstName`, `t`.`LastName`, `t`.`LockoutEnabled`, `t`.`LockoutEnd`, `t`.`NormalizedEmail`, `t`.`NormalizedUserName`, `t`.`PasswordHash`, `t`.`PhoneNumber`, `t`.`PhoneNumberConfirmed`, `t`.`SecurityStamp`, `t`.`TwoFactorEnabled`, `t`.`UserName`, `w`.`Id`, `w`.`Cadence`, `w`.`CityName`, `w`.`Coords`, `w`.`Date`, `w`.`Distance`, `w`.`Duration`, `w`.`Emoji`, `w`.`Pace`, `w`.`Type`, `w`.`UserId`, `c`.`Id`, `c`.`CityName`, `c`.`Country`, `c`.`Date`, `c`.`Emoji`, `c`.`Lat`, `c`.`Lng`, `c`.`Notes`, `c`.`UserId`
FROM (
    SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`FirstName`, `a`.`LastName`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`
    FROM `AspNetUsers` AS `a`
    WHERE `a`.`Id` = @__user_Id_0
    LIMIT 2
) AS `t`
LEFT JOIN `Workouts` AS `w` ON `t`.`Id` = `w`.`UserId`
LEFT JOIN `Cities` AS `c` ON `t`.`Id` = `c`.`UserId`
ORDER BY `t`.`Id`, `w`.`Id`
2025-11-16 17:28:34.580 +03:00 [INF] Executing ObjectResult, writing value of type 'MappyApplication.Models.user.AuthResponse'.
2025-11-16 17:28:34.580 +03:00 [INF] Executed action MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication) in 32.6093ms
2025-11-16 17:28:34.580 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication)'
2025-11-16 17:28:34.580 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:8080/api/v1/auth/refresh-token - 200 null application/json; charset=utf-8 93.306ms
2025-11-16 17:28:35.569 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:8080/api/v1/auth/refresh-token - null 0
2025-11-16 17:28:35.569 +03:00 [INF] CORS policy execution successful.
2025-11-16 17:28:35.595 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 17:28:35.595 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication)'
2025-11-16 17:28:35.595 +03:00 [INF] Route matched with {action = "RefreshToken", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.user.AuthResponse] RefreshToken() on controller MappyApplication.Controllers.AuthController (MappyApplication).
2025-11-16 17:28:35.596 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__refreshToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`RefreshToken` = @__refreshToken_0
LIMIT 2
2025-11-16 17:28:35.600 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[@__p_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`FirstName`, `a`.`LastName`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`
FROM `AspNetUsers` AS `a`
WHERE `a`.`Id` = @__p_0
LIMIT 1
2025-11-16 17:28:35.608 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']

        UPDATE TOKENS
        SET Revoked = true, Expired = true
        WHERE UserId = @p0
          AND DeviceId = @p1
          AND Revoked = false
          AND Expired = false
2025-11-16 17:28:35.613 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a0`.`Name`
FROM `AspNetUserRoles` AS `a`
INNER JOIN `AspNetRoles` AS `a0` ON `a`.`RoleId` = `a0`.`Id`
WHERE `a`.`UserId` = @__userId_0
2025-11-16 17:28:35.622 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ClaimType`, `a`.`ClaimValue`, `a`.`UserId`
FROM `AspNetUserClaims` AS `a`
WHERE `a`.`UserId` = @__user_Id_0
2025-11-16 17:28:35.624 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a0`.`Name`
FROM `AspNetUserRoles` AS `a`
INNER JOIN `AspNetRoles` AS `a0` ON `a`.`RoleId` = `a0`.`Id`
WHERE `a`.`UserId` = @__userId_0
2025-11-16 17:28:35.625 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ClaimType`, `a`.`ClaimValue`, `a`.`UserId`
FROM `AspNetUserClaims` AS `a`
WHERE `a`.`UserId` = @__user_Id_0
2025-11-16 17:28:35.647 +03:00 [INF] Executed DbCommand (11ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (DbType = DateTime), @p2='?' (Size = 4000), @p3='?' (DbType = Boolean), @p4='?' (Size = 4000), @p5='?' (DbType = Boolean), @p6='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO `Tokens` (`AccessToken`, `CreatedAt`, `DeviceId`, `Expired`, `RefreshToken`, `Revoked`, `UserId`)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6);
SELECT `Id`
FROM `Tokens`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();
2025-11-16 17:28:35.648 +03:00 [INF] Added Token MappyApplication.Data.Token
2025-11-16 17:28:35.650 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessFailedCount`, `t`.`ConcurrencyStamp`, `t`.`Email`, `t`.`EmailConfirmed`, `t`.`FirstName`, `t`.`LastName`, `t`.`LockoutEnabled`, `t`.`LockoutEnd`, `t`.`NormalizedEmail`, `t`.`NormalizedUserName`, `t`.`PasswordHash`, `t`.`PhoneNumber`, `t`.`PhoneNumberConfirmed`, `t`.`SecurityStamp`, `t`.`TwoFactorEnabled`, `t`.`UserName`, `w`.`Id`, `w`.`Cadence`, `w`.`CityName`, `w`.`Coords`, `w`.`Date`, `w`.`Distance`, `w`.`Duration`, `w`.`Emoji`, `w`.`Pace`, `w`.`Type`, `w`.`UserId`, `c`.`Id`, `c`.`CityName`, `c`.`Country`, `c`.`Date`, `c`.`Emoji`, `c`.`Lat`, `c`.`Lng`, `c`.`Notes`, `c`.`UserId`
FROM (
    SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`FirstName`, `a`.`LastName`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`
    FROM `AspNetUsers` AS `a`
    WHERE `a`.`Id` = @__user_Id_0
    LIMIT 2
) AS `t`
LEFT JOIN `Workouts` AS `w` ON `t`.`Id` = `w`.`UserId`
LEFT JOIN `Cities` AS `c` ON `t`.`Id` = `c`.`UserId`
ORDER BY `t`.`Id`, `w`.`Id`
2025-11-16 17:28:35.650 +03:00 [INF] Executing ObjectResult, writing value of type 'MappyApplication.Models.user.AuthResponse'.
2025-11-16 17:28:35.650 +03:00 [INF] Executed action MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication) in 55.1846ms
2025-11-16 17:28:35.650 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication)'
2025-11-16 17:28:35.651 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:8080/api/v1/auth/refresh-token - 200 null application/json; charset=utf-8 81.1973ms
2025-11-16 17:28:36.865 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:8080/api/v1/auth/refresh-token - null 0
2025-11-16 17:28:36.866 +03:00 [INF] CORS policy execution successful.
2025-11-16 17:28:36.918 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 17:28:36.920 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication)'
2025-11-16 17:28:36.921 +03:00 [INF] Route matched with {action = "RefreshToken", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.user.AuthResponse] RefreshToken() on controller MappyApplication.Controllers.AuthController (MappyApplication).
2025-11-16 17:28:36.924 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__refreshToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`RefreshToken` = @__refreshToken_0
LIMIT 2
2025-11-16 17:28:36.927 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`FirstName`, `a`.`LastName`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`
FROM `AspNetUsers` AS `a`
WHERE `a`.`Id` = @__p_0
LIMIT 1
2025-11-16 17:28:36.930 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']

        UPDATE TOKENS
        SET Revoked = true, Expired = true
        WHERE UserId = @p0
          AND DeviceId = @p1
          AND Revoked = false
          AND Expired = false
2025-11-16 17:28:36.934 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a0`.`Name`
FROM `AspNetUserRoles` AS `a`
INNER JOIN `AspNetRoles` AS `a0` ON `a`.`RoleId` = `a0`.`Id`
WHERE `a`.`UserId` = @__userId_0
2025-11-16 17:28:36.937 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ClaimType`, `a`.`ClaimValue`, `a`.`UserId`
FROM `AspNetUserClaims` AS `a`
WHERE `a`.`UserId` = @__user_Id_0
2025-11-16 17:28:36.939 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a0`.`Name`
FROM `AspNetUserRoles` AS `a`
INNER JOIN `AspNetRoles` AS `a0` ON `a`.`RoleId` = `a0`.`Id`
WHERE `a`.`UserId` = @__userId_0
2025-11-16 17:28:36.940 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ClaimType`, `a`.`ClaimValue`, `a`.`UserId`
FROM `AspNetUserClaims` AS `a`
WHERE `a`.`UserId` = @__user_Id_0
2025-11-16 17:28:36.943 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (DbType = DateTime), @p2='?' (Size = 4000), @p3='?' (DbType = Boolean), @p4='?' (Size = 4000), @p5='?' (DbType = Boolean), @p6='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO `Tokens` (`AccessToken`, `CreatedAt`, `DeviceId`, `Expired`, `RefreshToken`, `Revoked`, `UserId`)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6);
SELECT `Id`
FROM `Tokens`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();
2025-11-16 17:28:36.944 +03:00 [INF] Added Token MappyApplication.Data.Token
2025-11-16 17:28:36.946 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessFailedCount`, `t`.`ConcurrencyStamp`, `t`.`Email`, `t`.`EmailConfirmed`, `t`.`FirstName`, `t`.`LastName`, `t`.`LockoutEnabled`, `t`.`LockoutEnd`, `t`.`NormalizedEmail`, `t`.`NormalizedUserName`, `t`.`PasswordHash`, `t`.`PhoneNumber`, `t`.`PhoneNumberConfirmed`, `t`.`SecurityStamp`, `t`.`TwoFactorEnabled`, `t`.`UserName`, `w`.`Id`, `w`.`Cadence`, `w`.`CityName`, `w`.`Coords`, `w`.`Date`, `w`.`Distance`, `w`.`Duration`, `w`.`Emoji`, `w`.`Pace`, `w`.`Type`, `w`.`UserId`, `c`.`Id`, `c`.`CityName`, `c`.`Country`, `c`.`Date`, `c`.`Emoji`, `c`.`Lat`, `c`.`Lng`, `c`.`Notes`, `c`.`UserId`
FROM (
    SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`FirstName`, `a`.`LastName`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`
    FROM `AspNetUsers` AS `a`
    WHERE `a`.`Id` = @__user_Id_0
    LIMIT 2
) AS `t`
LEFT JOIN `Workouts` AS `w` ON `t`.`Id` = `w`.`UserId`
LEFT JOIN `Cities` AS `c` ON `t`.`Id` = `c`.`UserId`
ORDER BY `t`.`Id`, `w`.`Id`
2025-11-16 17:28:36.946 +03:00 [INF] Executing ObjectResult, writing value of type 'MappyApplication.Models.user.AuthResponse'.
2025-11-16 17:28:36.946 +03:00 [INF] Executed action MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication) in 25.0177ms
2025-11-16 17:28:36.946 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication)'
2025-11-16 17:28:36.946 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:8080/api/v1/auth/refresh-token - 200 null application/json; charset=utf-8 81.575ms
2025-11-16 17:29:16.040 +03:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:8080/api/v1/auth/refresh-token - null null
2025-11-16 17:29:16.044 +03:00 [INF] CORS policy execution successful.
2025-11-16 17:29:16.045 +03:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:8080/api/v1/auth/refresh-token - 204 null null 4.6672ms
2025-11-16 17:29:16.046 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:8080/api/v1/auth/refresh-token - null 0
2025-11-16 17:29:16.046 +03:00 [INF] CORS policy execution successful.
2025-11-16 17:29:16.091 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 17:29:16.094 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication)'
2025-11-16 17:29:16.095 +03:00 [INF] Route matched with {action = "RefreshToken", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.user.AuthResponse] RefreshToken() on controller MappyApplication.Controllers.AuthController (MappyApplication).
2025-11-16 17:29:16.101 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__refreshToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`RefreshToken` = @__refreshToken_0
LIMIT 2
2025-11-16 17:29:16.105 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`FirstName`, `a`.`LastName`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`
FROM `AspNetUsers` AS `a`
WHERE `a`.`Id` = @__p_0
LIMIT 1
2025-11-16 17:29:16.116 +03:00 [INF] Executed DbCommand (5ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']

        UPDATE TOKENS
        SET Revoked = true, Expired = true
        WHERE UserId = @p0
          AND DeviceId = @p1
          AND Revoked = false
          AND Expired = false
2025-11-16 17:29:16.118 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a0`.`Name`
FROM `AspNetUserRoles` AS `a`
INNER JOIN `AspNetRoles` AS `a0` ON `a`.`RoleId` = `a0`.`Id`
WHERE `a`.`UserId` = @__userId_0
2025-11-16 17:29:16.120 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ClaimType`, `a`.`ClaimValue`, `a`.`UserId`
FROM `AspNetUserClaims` AS `a`
WHERE `a`.`UserId` = @__user_Id_0
2025-11-16 17:29:16.122 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a0`.`Name`
FROM `AspNetUserRoles` AS `a`
INNER JOIN `AspNetRoles` AS `a0` ON `a`.`RoleId` = `a0`.`Id`
WHERE `a`.`UserId` = @__userId_0
2025-11-16 17:29:16.128 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ClaimType`, `a`.`ClaimValue`, `a`.`UserId`
FROM `AspNetUserClaims` AS `a`
WHERE `a`.`UserId` = @__user_Id_0
2025-11-16 17:29:16.135 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (DbType = DateTime), @p2='?' (Size = 4000), @p3='?' (DbType = Boolean), @p4='?' (Size = 4000), @p5='?' (DbType = Boolean), @p6='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO `Tokens` (`AccessToken`, `CreatedAt`, `DeviceId`, `Expired`, `RefreshToken`, `Revoked`, `UserId`)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6);
SELECT `Id`
FROM `Tokens`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();
2025-11-16 17:29:16.136 +03:00 [INF] Added Token MappyApplication.Data.Token
2025-11-16 17:29:16.138 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessFailedCount`, `t`.`ConcurrencyStamp`, `t`.`Email`, `t`.`EmailConfirmed`, `t`.`FirstName`, `t`.`LastName`, `t`.`LockoutEnabled`, `t`.`LockoutEnd`, `t`.`NormalizedEmail`, `t`.`NormalizedUserName`, `t`.`PasswordHash`, `t`.`PhoneNumber`, `t`.`PhoneNumberConfirmed`, `t`.`SecurityStamp`, `t`.`TwoFactorEnabled`, `t`.`UserName`, `w`.`Id`, `w`.`Cadence`, `w`.`CityName`, `w`.`Coords`, `w`.`Date`, `w`.`Distance`, `w`.`Duration`, `w`.`Emoji`, `w`.`Pace`, `w`.`Type`, `w`.`UserId`, `c`.`Id`, `c`.`CityName`, `c`.`Country`, `c`.`Date`, `c`.`Emoji`, `c`.`Lat`, `c`.`Lng`, `c`.`Notes`, `c`.`UserId`
FROM (
    SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`FirstName`, `a`.`LastName`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`
    FROM `AspNetUsers` AS `a`
    WHERE `a`.`Id` = @__user_Id_0
    LIMIT 2
) AS `t`
LEFT JOIN `Workouts` AS `w` ON `t`.`Id` = `w`.`UserId`
LEFT JOIN `Cities` AS `c` ON `t`.`Id` = `c`.`UserId`
ORDER BY `t`.`Id`, `w`.`Id`
2025-11-16 17:29:16.139 +03:00 [INF] Executing ObjectResult, writing value of type 'MappyApplication.Models.user.AuthResponse'.
2025-11-16 17:29:16.140 +03:00 [INF] Executed action MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication) in 44.1489ms
2025-11-16 17:29:16.140 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication)'
2025-11-16 17:29:16.140 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:8080/api/v1/auth/refresh-token - 200 null application/json; charset=utf-8 93.8465ms
2025-11-16 17:29:18.908 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:8080/api/v1/auth/refresh-token - null 0
2025-11-16 17:29:18.909 +03:00 [INF] CORS policy execution successful.
2025-11-16 17:29:18.963 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 17:29:18.964 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication)'
2025-11-16 17:29:18.964 +03:00 [INF] Route matched with {action = "RefreshToken", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.user.AuthResponse] RefreshToken() on controller MappyApplication.Controllers.AuthController (MappyApplication).
2025-11-16 17:29:18.966 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__refreshToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`RefreshToken` = @__refreshToken_0
LIMIT 2
2025-11-16 17:29:18.968 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`FirstName`, `a`.`LastName`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`
FROM `AspNetUsers` AS `a`
WHERE `a`.`Id` = @__p_0
LIMIT 1
2025-11-16 17:29:18.976 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']

        UPDATE TOKENS
        SET Revoked = true, Expired = true
        WHERE UserId = @p0
          AND DeviceId = @p1
          AND Revoked = false
          AND Expired = false
2025-11-16 17:29:18.977 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a0`.`Name`
FROM `AspNetUserRoles` AS `a`
INNER JOIN `AspNetRoles` AS `a0` ON `a`.`RoleId` = `a0`.`Id`
WHERE `a`.`UserId` = @__userId_0
2025-11-16 17:29:18.978 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ClaimType`, `a`.`ClaimValue`, `a`.`UserId`
FROM `AspNetUserClaims` AS `a`
WHERE `a`.`UserId` = @__user_Id_0
2025-11-16 17:29:18.980 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a0`.`Name`
FROM `AspNetUserRoles` AS `a`
INNER JOIN `AspNetRoles` AS `a0` ON `a`.`RoleId` = `a0`.`Id`
WHERE `a`.`UserId` = @__userId_0
2025-11-16 17:29:18.981 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ClaimType`, `a`.`ClaimValue`, `a`.`UserId`
FROM `AspNetUserClaims` AS `a`
WHERE `a`.`UserId` = @__user_Id_0
2025-11-16 17:29:18.982 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (DbType = DateTime), @p2='?' (Size = 4000), @p3='?' (DbType = Boolean), @p4='?' (Size = 4000), @p5='?' (DbType = Boolean), @p6='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO `Tokens` (`AccessToken`, `CreatedAt`, `DeviceId`, `Expired`, `RefreshToken`, `Revoked`, `UserId`)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6);
SELECT `Id`
FROM `Tokens`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();
2025-11-16 17:29:18.984 +03:00 [INF] Added Token MappyApplication.Data.Token
2025-11-16 17:29:18.987 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessFailedCount`, `t`.`ConcurrencyStamp`, `t`.`Email`, `t`.`EmailConfirmed`, `t`.`FirstName`, `t`.`LastName`, `t`.`LockoutEnabled`, `t`.`LockoutEnd`, `t`.`NormalizedEmail`, `t`.`NormalizedUserName`, `t`.`PasswordHash`, `t`.`PhoneNumber`, `t`.`PhoneNumberConfirmed`, `t`.`SecurityStamp`, `t`.`TwoFactorEnabled`, `t`.`UserName`, `w`.`Id`, `w`.`Cadence`, `w`.`CityName`, `w`.`Coords`, `w`.`Date`, `w`.`Distance`, `w`.`Duration`, `w`.`Emoji`, `w`.`Pace`, `w`.`Type`, `w`.`UserId`, `c`.`Id`, `c`.`CityName`, `c`.`Country`, `c`.`Date`, `c`.`Emoji`, `c`.`Lat`, `c`.`Lng`, `c`.`Notes`, `c`.`UserId`
FROM (
    SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`FirstName`, `a`.`LastName`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`
    FROM `AspNetUsers` AS `a`
    WHERE `a`.`Id` = @__user_Id_0
    LIMIT 2
) AS `t`
LEFT JOIN `Workouts` AS `w` ON `t`.`Id` = `w`.`UserId`
LEFT JOIN `Cities` AS `c` ON `t`.`Id` = `c`.`UserId`
ORDER BY `t`.`Id`, `w`.`Id`
2025-11-16 17:29:18.987 +03:00 [INF] Executing ObjectResult, writing value of type 'MappyApplication.Models.user.AuthResponse'.
2025-11-16 17:29:18.987 +03:00 [INF] Executed action MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication) in 22.5262ms
2025-11-16 17:29:18.987 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication)'
2025-11-16 17:29:18.987 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:8080/api/v1/auth/refresh-token - 200 null application/json; charset=utf-8 79.8337ms
2025-11-16 17:29:26.323 +03:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:8080/api/v1/auth/refresh-token - null null
2025-11-16 17:29:26.332 +03:00 [INF] CORS policy execution successful.
2025-11-16 17:29:26.332 +03:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:8080/api/v1/auth/refresh-token - 204 null null 9.7973ms
2025-11-16 17:29:26.339 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:8080/api/v1/auth/refresh-token - null 0
2025-11-16 17:29:26.341 +03:00 [INF] CORS policy execution successful.
2025-11-16 17:29:26.377 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 17:29:26.377 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication)'
2025-11-16 17:29:26.377 +03:00 [INF] Route matched with {action = "RefreshToken", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.user.AuthResponse] RefreshToken() on controller MappyApplication.Controllers.AuthController (MappyApplication).
2025-11-16 17:29:26.378 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__refreshToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`RefreshToken` = @__refreshToken_0
LIMIT 2
2025-11-16 17:29:26.382 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`FirstName`, `a`.`LastName`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`
FROM `AspNetUsers` AS `a`
WHERE `a`.`Id` = @__p_0
LIMIT 1
2025-11-16 17:29:26.384 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']

        UPDATE TOKENS
        SET Revoked = true, Expired = true
        WHERE UserId = @p0
          AND DeviceId = @p1
          AND Revoked = false
          AND Expired = false
2025-11-16 17:29:26.385 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a0`.`Name`
FROM `AspNetUserRoles` AS `a`
INNER JOIN `AspNetRoles` AS `a0` ON `a`.`RoleId` = `a0`.`Id`
WHERE `a`.`UserId` = @__userId_0
2025-11-16 17:29:26.386 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ClaimType`, `a`.`ClaimValue`, `a`.`UserId`
FROM `AspNetUserClaims` AS `a`
WHERE `a`.`UserId` = @__user_Id_0
2025-11-16 17:29:26.387 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a0`.`Name`
FROM `AspNetUserRoles` AS `a`
INNER JOIN `AspNetRoles` AS `a0` ON `a`.`RoleId` = `a0`.`Id`
WHERE `a`.`UserId` = @__userId_0
2025-11-16 17:29:26.388 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ClaimType`, `a`.`ClaimValue`, `a`.`UserId`
FROM `AspNetUserClaims` AS `a`
WHERE `a`.`UserId` = @__user_Id_0
2025-11-16 17:29:26.391 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (DbType = DateTime), @p2='?' (Size = 4000), @p3='?' (DbType = Boolean), @p4='?' (Size = 4000), @p5='?' (DbType = Boolean), @p6='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO `Tokens` (`AccessToken`, `CreatedAt`, `DeviceId`, `Expired`, `RefreshToken`, `Revoked`, `UserId`)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6);
SELECT `Id`
FROM `Tokens`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();
2025-11-16 17:29:26.392 +03:00 [INF] Added Token MappyApplication.Data.Token
2025-11-16 17:29:26.395 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessFailedCount`, `t`.`ConcurrencyStamp`, `t`.`Email`, `t`.`EmailConfirmed`, `t`.`FirstName`, `t`.`LastName`, `t`.`LockoutEnabled`, `t`.`LockoutEnd`, `t`.`NormalizedEmail`, `t`.`NormalizedUserName`, `t`.`PasswordHash`, `t`.`PhoneNumber`, `t`.`PhoneNumberConfirmed`, `t`.`SecurityStamp`, `t`.`TwoFactorEnabled`, `t`.`UserName`, `w`.`Id`, `w`.`Cadence`, `w`.`CityName`, `w`.`Coords`, `w`.`Date`, `w`.`Distance`, `w`.`Duration`, `w`.`Emoji`, `w`.`Pace`, `w`.`Type`, `w`.`UserId`, `c`.`Id`, `c`.`CityName`, `c`.`Country`, `c`.`Date`, `c`.`Emoji`, `c`.`Lat`, `c`.`Lng`, `c`.`Notes`, `c`.`UserId`
FROM (
    SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`FirstName`, `a`.`LastName`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`
    FROM `AspNetUsers` AS `a`
    WHERE `a`.`Id` = @__user_Id_0
    LIMIT 2
) AS `t`
LEFT JOIN `Workouts` AS `w` ON `t`.`Id` = `w`.`UserId`
LEFT JOIN `Cities` AS `c` ON `t`.`Id` = `c`.`UserId`
ORDER BY `t`.`Id`, `w`.`Id`
2025-11-16 17:29:26.395 +03:00 [INF] Executing ObjectResult, writing value of type 'MappyApplication.Models.user.AuthResponse'.
2025-11-16 17:29:26.395 +03:00 [INF] Executed action MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication) in 17.8646ms
2025-11-16 17:29:26.395 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication)'
2025-11-16 17:29:26.395 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:8080/api/v1/auth/refresh-token - 200 null application/json; charset=utf-8 56.1162ms
2025-11-16 17:29:33.107 +03:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:8080/api/v1/auth/refresh-token - null null
2025-11-16 17:29:33.109 +03:00 [INF] CORS policy execution successful.
2025-11-16 17:29:33.110 +03:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:8080/api/v1/auth/refresh-token - 204 null null 3.1555ms
2025-11-16 17:29:33.111 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:8080/api/v1/auth/refresh-token - null 0
2025-11-16 17:29:33.111 +03:00 [INF] CORS policy execution successful.
2025-11-16 17:29:33.150 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 17:29:33.151 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication)'
2025-11-16 17:29:33.153 +03:00 [INF] Route matched with {action = "RefreshToken", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.user.AuthResponse] RefreshToken() on controller MappyApplication.Controllers.AuthController (MappyApplication).
2025-11-16 17:29:33.155 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__refreshToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`RefreshToken` = @__refreshToken_0
LIMIT 2
2025-11-16 17:29:33.160 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`FirstName`, `a`.`LastName`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`
FROM `AspNetUsers` AS `a`
WHERE `a`.`Id` = @__p_0
LIMIT 1
2025-11-16 17:29:33.163 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']

        UPDATE TOKENS
        SET Revoked = true, Expired = true
        WHERE UserId = @p0
          AND DeviceId = @p1
          AND Revoked = false
          AND Expired = false
2025-11-16 17:29:33.166 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a0`.`Name`
FROM `AspNetUserRoles` AS `a`
INNER JOIN `AspNetRoles` AS `a0` ON `a`.`RoleId` = `a0`.`Id`
WHERE `a`.`UserId` = @__userId_0
2025-11-16 17:29:33.168 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ClaimType`, `a`.`ClaimValue`, `a`.`UserId`
FROM `AspNetUserClaims` AS `a`
WHERE `a`.`UserId` = @__user_Id_0
2025-11-16 17:29:33.169 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a0`.`Name`
FROM `AspNetUserRoles` AS `a`
INNER JOIN `AspNetRoles` AS `a0` ON `a`.`RoleId` = `a0`.`Id`
WHERE `a`.`UserId` = @__userId_0
2025-11-16 17:29:33.170 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ClaimType`, `a`.`ClaimValue`, `a`.`UserId`
FROM `AspNetUserClaims` AS `a`
WHERE `a`.`UserId` = @__user_Id_0
2025-11-16 17:29:33.174 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (DbType = DateTime), @p2='?' (Size = 4000), @p3='?' (DbType = Boolean), @p4='?' (Size = 4000), @p5='?' (DbType = Boolean), @p6='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO `Tokens` (`AccessToken`, `CreatedAt`, `DeviceId`, `Expired`, `RefreshToken`, `Revoked`, `UserId`)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6);
SELECT `Id`
FROM `Tokens`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();
2025-11-16 17:29:33.175 +03:00 [INF] Added Token MappyApplication.Data.Token
2025-11-16 17:29:33.177 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessFailedCount`, `t`.`ConcurrencyStamp`, `t`.`Email`, `t`.`EmailConfirmed`, `t`.`FirstName`, `t`.`LastName`, `t`.`LockoutEnabled`, `t`.`LockoutEnd`, `t`.`NormalizedEmail`, `t`.`NormalizedUserName`, `t`.`PasswordHash`, `t`.`PhoneNumber`, `t`.`PhoneNumberConfirmed`, `t`.`SecurityStamp`, `t`.`TwoFactorEnabled`, `t`.`UserName`, `w`.`Id`, `w`.`Cadence`, `w`.`CityName`, `w`.`Coords`, `w`.`Date`, `w`.`Distance`, `w`.`Duration`, `w`.`Emoji`, `w`.`Pace`, `w`.`Type`, `w`.`UserId`, `c`.`Id`, `c`.`CityName`, `c`.`Country`, `c`.`Date`, `c`.`Emoji`, `c`.`Lat`, `c`.`Lng`, `c`.`Notes`, `c`.`UserId`
FROM (
    SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`FirstName`, `a`.`LastName`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`
    FROM `AspNetUsers` AS `a`
    WHERE `a`.`Id` = @__user_Id_0
    LIMIT 2
) AS `t`
LEFT JOIN `Workouts` AS `w` ON `t`.`Id` = `w`.`UserId`
LEFT JOIN `Cities` AS `c` ON `t`.`Id` = `c`.`UserId`
ORDER BY `t`.`Id`, `w`.`Id`
2025-11-16 17:29:33.177 +03:00 [INF] Executing ObjectResult, writing value of type 'MappyApplication.Models.user.AuthResponse'.
2025-11-16 17:29:33.177 +03:00 [INF] Executed action MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication) in 24.3155ms
2025-11-16 17:29:33.177 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication)'
2025-11-16 17:29:33.177 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:8080/api/v1/auth/refresh-token - 200 null application/json; charset=utf-8 66.4012ms
2025-11-16 17:29:35.641 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:8080/api/v1/auth/refresh-token - null 0
2025-11-16 17:29:35.643 +03:00 [INF] CORS policy execution successful.
2025-11-16 17:29:35.700 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 17:29:35.700 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication)'
2025-11-16 17:29:35.700 +03:00 [INF] Route matched with {action = "RefreshToken", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.user.AuthResponse] RefreshToken() on controller MappyApplication.Controllers.AuthController (MappyApplication).
2025-11-16 17:29:35.701 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__refreshToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`RefreshToken` = @__refreshToken_0
LIMIT 2
2025-11-16 17:29:35.704 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`FirstName`, `a`.`LastName`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`
FROM `AspNetUsers` AS `a`
WHERE `a`.`Id` = @__p_0
LIMIT 1
2025-11-16 17:29:35.708 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']

        UPDATE TOKENS
        SET Revoked = true, Expired = true
        WHERE UserId = @p0
          AND DeviceId = @p1
          AND Revoked = false
          AND Expired = false
2025-11-16 17:29:35.709 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a0`.`Name`
FROM `AspNetUserRoles` AS `a`
INNER JOIN `AspNetRoles` AS `a0` ON `a`.`RoleId` = `a0`.`Id`
WHERE `a`.`UserId` = @__userId_0
2025-11-16 17:29:35.710 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ClaimType`, `a`.`ClaimValue`, `a`.`UserId`
FROM `AspNetUserClaims` AS `a`
WHERE `a`.`UserId` = @__user_Id_0
2025-11-16 17:29:35.711 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a0`.`Name`
FROM `AspNetUserRoles` AS `a`
INNER JOIN `AspNetRoles` AS `a0` ON `a`.`RoleId` = `a0`.`Id`
WHERE `a`.`UserId` = @__userId_0
2025-11-16 17:29:35.712 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ClaimType`, `a`.`ClaimValue`, `a`.`UserId`
FROM `AspNetUserClaims` AS `a`
WHERE `a`.`UserId` = @__user_Id_0
2025-11-16 17:29:35.721 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (DbType = DateTime), @p2='?' (Size = 4000), @p3='?' (DbType = Boolean), @p4='?' (Size = 4000), @p5='?' (DbType = Boolean), @p6='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO `Tokens` (`AccessToken`, `CreatedAt`, `DeviceId`, `Expired`, `RefreshToken`, `Revoked`, `UserId`)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6);
SELECT `Id`
FROM `Tokens`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();
2025-11-16 17:29:35.722 +03:00 [INF] Added Token MappyApplication.Data.Token
2025-11-16 17:29:35.728 +03:00 [INF] Executed DbCommand (5ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessFailedCount`, `t`.`ConcurrencyStamp`, `t`.`Email`, `t`.`EmailConfirmed`, `t`.`FirstName`, `t`.`LastName`, `t`.`LockoutEnabled`, `t`.`LockoutEnd`, `t`.`NormalizedEmail`, `t`.`NormalizedUserName`, `t`.`PasswordHash`, `t`.`PhoneNumber`, `t`.`PhoneNumberConfirmed`, `t`.`SecurityStamp`, `t`.`TwoFactorEnabled`, `t`.`UserName`, `w`.`Id`, `w`.`Cadence`, `w`.`CityName`, `w`.`Coords`, `w`.`Date`, `w`.`Distance`, `w`.`Duration`, `w`.`Emoji`, `w`.`Pace`, `w`.`Type`, `w`.`UserId`, `c`.`Id`, `c`.`CityName`, `c`.`Country`, `c`.`Date`, `c`.`Emoji`, `c`.`Lat`, `c`.`Lng`, `c`.`Notes`, `c`.`UserId`
FROM (
    SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`FirstName`, `a`.`LastName`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`
    FROM `AspNetUsers` AS `a`
    WHERE `a`.`Id` = @__user_Id_0
    LIMIT 2
) AS `t`
LEFT JOIN `Workouts` AS `w` ON `t`.`Id` = `w`.`UserId`
LEFT JOIN `Cities` AS `c` ON `t`.`Id` = `c`.`UserId`
ORDER BY `t`.`Id`, `w`.`Id`
2025-11-16 17:29:35.730 +03:00 [INF] Executing ObjectResult, writing value of type 'MappyApplication.Models.user.AuthResponse'.
2025-11-16 17:29:35.730 +03:00 [INF] Executed action MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication) in 29.764ms
2025-11-16 17:29:35.730 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication)'
2025-11-16 17:29:35.730 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:8080/api/v1/auth/refresh-token - 200 null application/json; charset=utf-8 93.3391ms
2025-11-16 17:29:44.332 +03:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:8080/api/v1/auth/refresh-token - null null
2025-11-16 17:29:44.338 +03:00 [INF] CORS policy execution successful.
2025-11-16 17:29:44.338 +03:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:8080/api/v1/auth/refresh-token - 204 null null 5.8522ms
2025-11-16 17:29:44.340 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:8080/api/v1/auth/refresh-token - null 0
2025-11-16 17:29:44.340 +03:00 [INF] CORS policy execution successful.
2025-11-16 17:29:44.377 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 17:29:44.378 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication)'
2025-11-16 17:29:44.378 +03:00 [INF] Route matched with {action = "RefreshToken", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.user.AuthResponse] RefreshToken() on controller MappyApplication.Controllers.AuthController (MappyApplication).
2025-11-16 17:29:44.379 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__refreshToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`RefreshToken` = @__refreshToken_0
LIMIT 2
2025-11-16 17:29:44.387 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`FirstName`, `a`.`LastName`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`
FROM `AspNetUsers` AS `a`
WHERE `a`.`Id` = @__p_0
LIMIT 1
2025-11-16 17:29:44.393 +03:00 [INF] Executed DbCommand (4ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']

        UPDATE TOKENS
        SET Revoked = true, Expired = true
        WHERE UserId = @p0
          AND DeviceId = @p1
          AND Revoked = false
          AND Expired = false
2025-11-16 17:29:44.396 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a0`.`Name`
FROM `AspNetUserRoles` AS `a`
INNER JOIN `AspNetRoles` AS `a0` ON `a`.`RoleId` = `a0`.`Id`
WHERE `a`.`UserId` = @__userId_0
2025-11-16 17:29:44.397 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ClaimType`, `a`.`ClaimValue`, `a`.`UserId`
FROM `AspNetUserClaims` AS `a`
WHERE `a`.`UserId` = @__user_Id_0
2025-11-16 17:29:44.398 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a0`.`Name`
FROM `AspNetUserRoles` AS `a`
INNER JOIN `AspNetRoles` AS `a0` ON `a`.`RoleId` = `a0`.`Id`
WHERE `a`.`UserId` = @__userId_0
2025-11-16 17:29:44.400 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ClaimType`, `a`.`ClaimValue`, `a`.`UserId`
FROM `AspNetUserClaims` AS `a`
WHERE `a`.`UserId` = @__user_Id_0
2025-11-16 17:29:44.412 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (DbType = DateTime), @p2='?' (Size = 4000), @p3='?' (DbType = Boolean), @p4='?' (Size = 4000), @p5='?' (DbType = Boolean), @p6='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO `Tokens` (`AccessToken`, `CreatedAt`, `DeviceId`, `Expired`, `RefreshToken`, `Revoked`, `UserId`)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6);
SELECT `Id`
FROM `Tokens`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();
2025-11-16 17:29:44.413 +03:00 [INF] Added Token MappyApplication.Data.Token
2025-11-16 17:29:44.417 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessFailedCount`, `t`.`ConcurrencyStamp`, `t`.`Email`, `t`.`EmailConfirmed`, `t`.`FirstName`, `t`.`LastName`, `t`.`LockoutEnabled`, `t`.`LockoutEnd`, `t`.`NormalizedEmail`, `t`.`NormalizedUserName`, `t`.`PasswordHash`, `t`.`PhoneNumber`, `t`.`PhoneNumberConfirmed`, `t`.`SecurityStamp`, `t`.`TwoFactorEnabled`, `t`.`UserName`, `w`.`Id`, `w`.`Cadence`, `w`.`CityName`, `w`.`Coords`, `w`.`Date`, `w`.`Distance`, `w`.`Duration`, `w`.`Emoji`, `w`.`Pace`, `w`.`Type`, `w`.`UserId`, `c`.`Id`, `c`.`CityName`, `c`.`Country`, `c`.`Date`, `c`.`Emoji`, `c`.`Lat`, `c`.`Lng`, `c`.`Notes`, `c`.`UserId`
FROM (
    SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`FirstName`, `a`.`LastName`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`
    FROM `AspNetUsers` AS `a`
    WHERE `a`.`Id` = @__user_Id_0
    LIMIT 2
) AS `t`
LEFT JOIN `Workouts` AS `w` ON `t`.`Id` = `w`.`UserId`
LEFT JOIN `Cities` AS `c` ON `t`.`Id` = `c`.`UserId`
ORDER BY `t`.`Id`, `w`.`Id`
2025-11-16 17:29:44.419 +03:00 [INF] Executing ObjectResult, writing value of type 'MappyApplication.Models.user.AuthResponse'.
2025-11-16 17:29:44.419 +03:00 [INF] Executed action MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication) in 41.0501ms
2025-11-16 17:29:44.419 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication)'
2025-11-16 17:29:44.420 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:8080/api/v1/auth/refresh-token - 200 null application/json; charset=utf-8 79.9747ms
2025-11-16 17:29:46.780 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:8080/api/v1/auth/refresh-token - null 0
2025-11-16 17:29:46.788 +03:00 [INF] CORS policy execution successful.
2025-11-16 17:29:46.867 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 17:29:46.874 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication)'
2025-11-16 17:29:46.874 +03:00 [INF] Route matched with {action = "RefreshToken", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.user.AuthResponse] RefreshToken() on controller MappyApplication.Controllers.AuthController (MappyApplication).
2025-11-16 17:29:46.877 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__refreshToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`RefreshToken` = @__refreshToken_0
LIMIT 2
2025-11-16 17:29:46.881 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`FirstName`, `a`.`LastName`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`
FROM `AspNetUsers` AS `a`
WHERE `a`.`Id` = @__p_0
LIMIT 1
2025-11-16 17:29:46.885 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']

        UPDATE TOKENS
        SET Revoked = true, Expired = true
        WHERE UserId = @p0
          AND DeviceId = @p1
          AND Revoked = false
          AND Expired = false
2025-11-16 17:29:46.887 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a0`.`Name`
FROM `AspNetUserRoles` AS `a`
INNER JOIN `AspNetRoles` AS `a0` ON `a`.`RoleId` = `a0`.`Id`
WHERE `a`.`UserId` = @__userId_0
2025-11-16 17:29:46.888 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ClaimType`, `a`.`ClaimValue`, `a`.`UserId`
FROM `AspNetUserClaims` AS `a`
WHERE `a`.`UserId` = @__user_Id_0
2025-11-16 17:29:46.889 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a0`.`Name`
FROM `AspNetUserRoles` AS `a`
INNER JOIN `AspNetRoles` AS `a0` ON `a`.`RoleId` = `a0`.`Id`
WHERE `a`.`UserId` = @__userId_0
2025-11-16 17:29:46.890 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ClaimType`, `a`.`ClaimValue`, `a`.`UserId`
FROM `AspNetUserClaims` AS `a`
WHERE `a`.`UserId` = @__user_Id_0
2025-11-16 17:29:46.893 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (DbType = DateTime), @p2='?' (Size = 4000), @p3='?' (DbType = Boolean), @p4='?' (Size = 4000), @p5='?' (DbType = Boolean), @p6='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO `Tokens` (`AccessToken`, `CreatedAt`, `DeviceId`, `Expired`, `RefreshToken`, `Revoked`, `UserId`)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6);
SELECT `Id`
FROM `Tokens`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();
2025-11-16 17:29:46.894 +03:00 [INF] Added Token MappyApplication.Data.Token
2025-11-16 17:29:46.896 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessFailedCount`, `t`.`ConcurrencyStamp`, `t`.`Email`, `t`.`EmailConfirmed`, `t`.`FirstName`, `t`.`LastName`, `t`.`LockoutEnabled`, `t`.`LockoutEnd`, `t`.`NormalizedEmail`, `t`.`NormalizedUserName`, `t`.`PasswordHash`, `t`.`PhoneNumber`, `t`.`PhoneNumberConfirmed`, `t`.`SecurityStamp`, `t`.`TwoFactorEnabled`, `t`.`UserName`, `w`.`Id`, `w`.`Cadence`, `w`.`CityName`, `w`.`Coords`, `w`.`Date`, `w`.`Distance`, `w`.`Duration`, `w`.`Emoji`, `w`.`Pace`, `w`.`Type`, `w`.`UserId`, `c`.`Id`, `c`.`CityName`, `c`.`Country`, `c`.`Date`, `c`.`Emoji`, `c`.`Lat`, `c`.`Lng`, `c`.`Notes`, `c`.`UserId`
FROM (
    SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`FirstName`, `a`.`LastName`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`
    FROM `AspNetUsers` AS `a`
    WHERE `a`.`Id` = @__user_Id_0
    LIMIT 2
) AS `t`
LEFT JOIN `Workouts` AS `w` ON `t`.`Id` = `w`.`UserId`
LEFT JOIN `Cities` AS `c` ON `t`.`Id` = `c`.`UserId`
ORDER BY `t`.`Id`, `w`.`Id`
2025-11-16 17:29:46.896 +03:00 [INF] Executing ObjectResult, writing value of type 'MappyApplication.Models.user.AuthResponse'.
2025-11-16 17:29:46.896 +03:00 [INF] Executed action MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication) in 21.902ms
2025-11-16 17:29:46.896 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication)'
2025-11-16 17:29:46.897 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:8080/api/v1/auth/refresh-token - 200 null application/json; charset=utf-8 116.6419ms
2025-11-16 17:29:50.576 +03:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:8080/api/v1/auth/refresh-token - null null
2025-11-16 17:29:50.596 +03:00 [INF] CORS policy execution successful.
2025-11-16 17:29:50.600 +03:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:8080/api/v1/auth/refresh-token - 204 null null 24.6084ms
2025-11-16 17:29:50.602 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:8080/api/v1/auth/refresh-token - null 0
2025-11-16 17:29:50.602 +03:00 [INF] CORS policy execution successful.
2025-11-16 17:29:50.632 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 17:29:50.632 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication)'
2025-11-16 17:29:50.632 +03:00 [INF] Route matched with {action = "RefreshToken", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.user.AuthResponse] RefreshToken() on controller MappyApplication.Controllers.AuthController (MappyApplication).
2025-11-16 17:29:50.633 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__refreshToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`RefreshToken` = @__refreshToken_0
LIMIT 2
2025-11-16 17:29:50.635 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`FirstName`, `a`.`LastName`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`
FROM `AspNetUsers` AS `a`
WHERE `a`.`Id` = @__p_0
LIMIT 1
2025-11-16 17:29:50.639 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']

        UPDATE TOKENS
        SET Revoked = true, Expired = true
        WHERE UserId = @p0
          AND DeviceId = @p1
          AND Revoked = false
          AND Expired = false
2025-11-16 17:29:50.641 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a0`.`Name`
FROM `AspNetUserRoles` AS `a`
INNER JOIN `AspNetRoles` AS `a0` ON `a`.`RoleId` = `a0`.`Id`
WHERE `a`.`UserId` = @__userId_0
2025-11-16 17:29:50.641 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ClaimType`, `a`.`ClaimValue`, `a`.`UserId`
FROM `AspNetUserClaims` AS `a`
WHERE `a`.`UserId` = @__user_Id_0
2025-11-16 17:29:50.642 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a0`.`Name`
FROM `AspNetUserRoles` AS `a`
INNER JOIN `AspNetRoles` AS `a0` ON `a`.`RoleId` = `a0`.`Id`
WHERE `a`.`UserId` = @__userId_0
2025-11-16 17:29:50.643 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ClaimType`, `a`.`ClaimValue`, `a`.`UserId`
FROM `AspNetUserClaims` AS `a`
WHERE `a`.`UserId` = @__user_Id_0
2025-11-16 17:29:50.644 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (DbType = DateTime), @p2='?' (Size = 4000), @p3='?' (DbType = Boolean), @p4='?' (Size = 4000), @p5='?' (DbType = Boolean), @p6='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO `Tokens` (`AccessToken`, `CreatedAt`, `DeviceId`, `Expired`, `RefreshToken`, `Revoked`, `UserId`)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6);
SELECT `Id`
FROM `Tokens`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();
2025-11-16 17:29:50.645 +03:00 [INF] Added Token MappyApplication.Data.Token
2025-11-16 17:29:50.646 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessFailedCount`, `t`.`ConcurrencyStamp`, `t`.`Email`, `t`.`EmailConfirmed`, `t`.`FirstName`, `t`.`LastName`, `t`.`LockoutEnabled`, `t`.`LockoutEnd`, `t`.`NormalizedEmail`, `t`.`NormalizedUserName`, `t`.`PasswordHash`, `t`.`PhoneNumber`, `t`.`PhoneNumberConfirmed`, `t`.`SecurityStamp`, `t`.`TwoFactorEnabled`, `t`.`UserName`, `w`.`Id`, `w`.`Cadence`, `w`.`CityName`, `w`.`Coords`, `w`.`Date`, `w`.`Distance`, `w`.`Duration`, `w`.`Emoji`, `w`.`Pace`, `w`.`Type`, `w`.`UserId`, `c`.`Id`, `c`.`CityName`, `c`.`Country`, `c`.`Date`, `c`.`Emoji`, `c`.`Lat`, `c`.`Lng`, `c`.`Notes`, `c`.`UserId`
FROM (
    SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`FirstName`, `a`.`LastName`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`
    FROM `AspNetUsers` AS `a`
    WHERE `a`.`Id` = @__user_Id_0
    LIMIT 2
) AS `t`
LEFT JOIN `Workouts` AS `w` ON `t`.`Id` = `w`.`UserId`
LEFT JOIN `Cities` AS `c` ON `t`.`Id` = `c`.`UserId`
ORDER BY `t`.`Id`, `w`.`Id`
2025-11-16 17:29:50.646 +03:00 [INF] Executing ObjectResult, writing value of type 'MappyApplication.Models.user.AuthResponse'.
2025-11-16 17:29:50.647 +03:00 [INF] Executed action MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication) in 14.2794ms
2025-11-16 17:29:50.647 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication)'
2025-11-16 17:29:50.647 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:8080/api/v1/auth/refresh-token - 200 null application/json; charset=utf-8 44.6801ms
2025-11-16 17:30:01.522 +03:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:8080/api/v1/auth/refresh-token - null null
2025-11-16 17:30:01.527 +03:00 [INF] CORS policy execution successful.
2025-11-16 17:30:01.527 +03:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:8080/api/v1/auth/refresh-token - 204 null null 5.2422ms
2025-11-16 17:30:01.532 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:8080/api/v1/auth/refresh-token - null 0
2025-11-16 17:30:01.532 +03:00 [INF] CORS policy execution successful.
2025-11-16 17:30:01.579 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 17:30:01.579 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication)'
2025-11-16 17:30:01.579 +03:00 [INF] Route matched with {action = "RefreshToken", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.user.AuthResponse] RefreshToken() on controller MappyApplication.Controllers.AuthController (MappyApplication).
2025-11-16 17:30:01.580 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__refreshToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`RefreshToken` = @__refreshToken_0
LIMIT 2
2025-11-16 17:30:01.581 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`FirstName`, `a`.`LastName`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`
FROM `AspNetUsers` AS `a`
WHERE `a`.`Id` = @__p_0
LIMIT 1
2025-11-16 17:30:01.584 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']

        UPDATE TOKENS
        SET Revoked = true, Expired = true
        WHERE UserId = @p0
          AND DeviceId = @p1
          AND Revoked = false
          AND Expired = false
2025-11-16 17:30:01.588 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a0`.`Name`
FROM `AspNetUserRoles` AS `a`
INNER JOIN `AspNetRoles` AS `a0` ON `a`.`RoleId` = `a0`.`Id`
WHERE `a`.`UserId` = @__userId_0
2025-11-16 17:30:01.589 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ClaimType`, `a`.`ClaimValue`, `a`.`UserId`
FROM `AspNetUserClaims` AS `a`
WHERE `a`.`UserId` = @__user_Id_0
2025-11-16 17:30:01.590 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a0`.`Name`
FROM `AspNetUserRoles` AS `a`
INNER JOIN `AspNetRoles` AS `a0` ON `a`.`RoleId` = `a0`.`Id`
WHERE `a`.`UserId` = @__userId_0
2025-11-16 17:30:01.591 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ClaimType`, `a`.`ClaimValue`, `a`.`UserId`
FROM `AspNetUserClaims` AS `a`
WHERE `a`.`UserId` = @__user_Id_0
2025-11-16 17:30:01.593 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (DbType = DateTime), @p2='?' (Size = 4000), @p3='?' (DbType = Boolean), @p4='?' (Size = 4000), @p5='?' (DbType = Boolean), @p6='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO `Tokens` (`AccessToken`, `CreatedAt`, `DeviceId`, `Expired`, `RefreshToken`, `Revoked`, `UserId`)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6);
SELECT `Id`
FROM `Tokens`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();
2025-11-16 17:30:01.594 +03:00 [INF] Added Token MappyApplication.Data.Token
2025-11-16 17:30:01.595 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessFailedCount`, `t`.`ConcurrencyStamp`, `t`.`Email`, `t`.`EmailConfirmed`, `t`.`FirstName`, `t`.`LastName`, `t`.`LockoutEnabled`, `t`.`LockoutEnd`, `t`.`NormalizedEmail`, `t`.`NormalizedUserName`, `t`.`PasswordHash`, `t`.`PhoneNumber`, `t`.`PhoneNumberConfirmed`, `t`.`SecurityStamp`, `t`.`TwoFactorEnabled`, `t`.`UserName`, `w`.`Id`, `w`.`Cadence`, `w`.`CityName`, `w`.`Coords`, `w`.`Date`, `w`.`Distance`, `w`.`Duration`, `w`.`Emoji`, `w`.`Pace`, `w`.`Type`, `w`.`UserId`, `c`.`Id`, `c`.`CityName`, `c`.`Country`, `c`.`Date`, `c`.`Emoji`, `c`.`Lat`, `c`.`Lng`, `c`.`Notes`, `c`.`UserId`
FROM (
    SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`FirstName`, `a`.`LastName`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`
    FROM `AspNetUsers` AS `a`
    WHERE `a`.`Id` = @__user_Id_0
    LIMIT 2
) AS `t`
LEFT JOIN `Workouts` AS `w` ON `t`.`Id` = `w`.`UserId`
LEFT JOIN `Cities` AS `c` ON `t`.`Id` = `c`.`UserId`
ORDER BY `t`.`Id`, `w`.`Id`
2025-11-16 17:30:01.595 +03:00 [INF] Executing ObjectResult, writing value of type 'MappyApplication.Models.user.AuthResponse'.
2025-11-16 17:30:01.595 +03:00 [INF] Executed action MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication) in 16.3439ms
2025-11-16 17:30:01.595 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication)'
2025-11-16 17:30:01.596 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:8080/api/v1/auth/refresh-token - 200 null application/json; charset=utf-8 63.351ms
2025-11-16 17:30:06.277 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:8080/api/v1/auth/refresh-token - null 0
2025-11-16 17:30:06.279 +03:00 [INF] CORS policy execution successful.
2025-11-16 17:30:06.305 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 17:30:06.306 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication)'
2025-11-16 17:30:06.306 +03:00 [INF] Route matched with {action = "RefreshToken", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.user.AuthResponse] RefreshToken() on controller MappyApplication.Controllers.AuthController (MappyApplication).
2025-11-16 17:30:06.307 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__refreshToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`RefreshToken` = @__refreshToken_0
LIMIT 2
2025-11-16 17:30:06.308 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`FirstName`, `a`.`LastName`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`
FROM `AspNetUsers` AS `a`
WHERE `a`.`Id` = @__p_0
LIMIT 1
2025-11-16 17:30:06.312 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']

        UPDATE TOKENS
        SET Revoked = true, Expired = true
        WHERE UserId = @p0
          AND DeviceId = @p1
          AND Revoked = false
          AND Expired = false
2025-11-16 17:30:06.314 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a0`.`Name`
FROM `AspNetUserRoles` AS `a`
INNER JOIN `AspNetRoles` AS `a0` ON `a`.`RoleId` = `a0`.`Id`
WHERE `a`.`UserId` = @__userId_0
2025-11-16 17:30:06.316 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ClaimType`, `a`.`ClaimValue`, `a`.`UserId`
FROM `AspNetUserClaims` AS `a`
WHERE `a`.`UserId` = @__user_Id_0
2025-11-16 17:30:06.318 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a0`.`Name`
FROM `AspNetUserRoles` AS `a`
INNER JOIN `AspNetRoles` AS `a0` ON `a`.`RoleId` = `a0`.`Id`
WHERE `a`.`UserId` = @__userId_0
2025-11-16 17:30:06.319 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ClaimType`, `a`.`ClaimValue`, `a`.`UserId`
FROM `AspNetUserClaims` AS `a`
WHERE `a`.`UserId` = @__user_Id_0
2025-11-16 17:30:06.323 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (DbType = DateTime), @p2='?' (Size = 4000), @p3='?' (DbType = Boolean), @p4='?' (Size = 4000), @p5='?' (DbType = Boolean), @p6='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO `Tokens` (`AccessToken`, `CreatedAt`, `DeviceId`, `Expired`, `RefreshToken`, `Revoked`, `UserId`)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6);
SELECT `Id`
FROM `Tokens`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();
2025-11-16 17:30:06.323 +03:00 [INF] Added Token MappyApplication.Data.Token
2025-11-16 17:30:06.325 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessFailedCount`, `t`.`ConcurrencyStamp`, `t`.`Email`, `t`.`EmailConfirmed`, `t`.`FirstName`, `t`.`LastName`, `t`.`LockoutEnabled`, `t`.`LockoutEnd`, `t`.`NormalizedEmail`, `t`.`NormalizedUserName`, `t`.`PasswordHash`, `t`.`PhoneNumber`, `t`.`PhoneNumberConfirmed`, `t`.`SecurityStamp`, `t`.`TwoFactorEnabled`, `t`.`UserName`, `w`.`Id`, `w`.`Cadence`, `w`.`CityName`, `w`.`Coords`, `w`.`Date`, `w`.`Distance`, `w`.`Duration`, `w`.`Emoji`, `w`.`Pace`, `w`.`Type`, `w`.`UserId`, `c`.`Id`, `c`.`CityName`, `c`.`Country`, `c`.`Date`, `c`.`Emoji`, `c`.`Lat`, `c`.`Lng`, `c`.`Notes`, `c`.`UserId`
FROM (
    SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`FirstName`, `a`.`LastName`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`
    FROM `AspNetUsers` AS `a`
    WHERE `a`.`Id` = @__user_Id_0
    LIMIT 2
) AS `t`
LEFT JOIN `Workouts` AS `w` ON `t`.`Id` = `w`.`UserId`
LEFT JOIN `Cities` AS `c` ON `t`.`Id` = `c`.`UserId`
ORDER BY `t`.`Id`, `w`.`Id`
2025-11-16 17:30:06.325 +03:00 [INF] Executing ObjectResult, writing value of type 'MappyApplication.Models.user.AuthResponse'.
2025-11-16 17:30:06.326 +03:00 [INF] Executed action MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication) in 19.3876ms
2025-11-16 17:30:06.326 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication)'
2025-11-16 17:30:06.326 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:8080/api/v1/auth/refresh-token - 200 null application/json; charset=utf-8 49.1579ms
2025-11-16 17:30:34.070 +03:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:8080/api/v1/auth/refresh-token - null null
2025-11-16 17:30:34.075 +03:00 [INF] CORS policy execution successful.
2025-11-16 17:30:34.076 +03:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:8080/api/v1/auth/refresh-token - 204 null null 5.9454ms
2025-11-16 17:30:34.080 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:8080/api/v1/auth/refresh-token - null 0
2025-11-16 17:30:34.080 +03:00 [INF] CORS policy execution successful.
2025-11-16 17:30:34.163 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 17:30:34.164 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication)'
2025-11-16 17:30:34.164 +03:00 [INF] Route matched with {action = "RefreshToken", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.user.AuthResponse] RefreshToken() on controller MappyApplication.Controllers.AuthController (MappyApplication).
2025-11-16 17:30:34.166 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__refreshToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`RefreshToken` = @__refreshToken_0
LIMIT 2
2025-11-16 17:30:34.172 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`FirstName`, `a`.`LastName`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`
FROM `AspNetUsers` AS `a`
WHERE `a`.`Id` = @__p_0
LIMIT 1
2025-11-16 17:30:34.186 +03:00 [INF] Executed DbCommand (4ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']

        UPDATE TOKENS
        SET Revoked = true, Expired = true
        WHERE UserId = @p0
          AND DeviceId = @p1
          AND Revoked = false
          AND Expired = false
2025-11-16 17:30:34.223 +03:00 [INF] Executed DbCommand (10ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a0`.`Name`
FROM `AspNetUserRoles` AS `a`
INNER JOIN `AspNetRoles` AS `a0` ON `a`.`RoleId` = `a0`.`Id`
WHERE `a`.`UserId` = @__userId_0
2025-11-16 17:30:34.230 +03:00 [INF] Executed DbCommand (5ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ClaimType`, `a`.`ClaimValue`, `a`.`UserId`
FROM `AspNetUserClaims` AS `a`
WHERE `a`.`UserId` = @__user_Id_0
2025-11-16 17:30:34.240 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a0`.`Name`
FROM `AspNetUserRoles` AS `a`
INNER JOIN `AspNetRoles` AS `a0` ON `a`.`RoleId` = `a0`.`Id`
WHERE `a`.`UserId` = @__userId_0
2025-11-16 17:30:34.244 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ClaimType`, `a`.`ClaimValue`, `a`.`UserId`
FROM `AspNetUserClaims` AS `a`
WHERE `a`.`UserId` = @__user_Id_0
2025-11-16 17:30:34.255 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (DbType = DateTime), @p2='?' (Size = 4000), @p3='?' (DbType = Boolean), @p4='?' (Size = 4000), @p5='?' (DbType = Boolean), @p6='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO `Tokens` (`AccessToken`, `CreatedAt`, `DeviceId`, `Expired`, `RefreshToken`, `Revoked`, `UserId`)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6);
SELECT `Id`
FROM `Tokens`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();
2025-11-16 17:30:34.256 +03:00 [INF] Added Token MappyApplication.Data.Token
2025-11-16 17:30:34.257 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessFailedCount`, `t`.`ConcurrencyStamp`, `t`.`Email`, `t`.`EmailConfirmed`, `t`.`FirstName`, `t`.`LastName`, `t`.`LockoutEnabled`, `t`.`LockoutEnd`, `t`.`NormalizedEmail`, `t`.`NormalizedUserName`, `t`.`PasswordHash`, `t`.`PhoneNumber`, `t`.`PhoneNumberConfirmed`, `t`.`SecurityStamp`, `t`.`TwoFactorEnabled`, `t`.`UserName`, `w`.`Id`, `w`.`Cadence`, `w`.`CityName`, `w`.`Coords`, `w`.`Date`, `w`.`Distance`, `w`.`Duration`, `w`.`Emoji`, `w`.`Pace`, `w`.`Type`, `w`.`UserId`, `c`.`Id`, `c`.`CityName`, `c`.`Country`, `c`.`Date`, `c`.`Emoji`, `c`.`Lat`, `c`.`Lng`, `c`.`Notes`, `c`.`UserId`
FROM (
    SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`FirstName`, `a`.`LastName`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`
    FROM `AspNetUsers` AS `a`
    WHERE `a`.`Id` = @__user_Id_0
    LIMIT 2
) AS `t`
LEFT JOIN `Workouts` AS `w` ON `t`.`Id` = `w`.`UserId`
LEFT JOIN `Cities` AS `c` ON `t`.`Id` = `c`.`UserId`
ORDER BY `t`.`Id`, `w`.`Id`
2025-11-16 17:30:34.258 +03:00 [INF] Executing ObjectResult, writing value of type 'MappyApplication.Models.user.AuthResponse'.
2025-11-16 17:30:34.258 +03:00 [INF] Executed action MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication) in 93.5465ms
2025-11-16 17:30:34.258 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication)'
2025-11-16 17:30:34.258 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:8080/api/v1/auth/refresh-token - 200 null application/json; charset=utf-8 178.5332ms
2025-11-16 17:30:38.471 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:8080/api/v1/auth/refresh-token - null 0
2025-11-16 17:30:38.474 +03:00 [INF] CORS policy execution successful.
2025-11-16 17:30:38.546 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 17:30:38.555 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication)'
2025-11-16 17:30:38.570 +03:00 [INF] Route matched with {action = "RefreshToken", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.user.AuthResponse] RefreshToken() on controller MappyApplication.Controllers.AuthController (MappyApplication).
2025-11-16 17:30:38.578 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__refreshToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`RefreshToken` = @__refreshToken_0
LIMIT 2
2025-11-16 17:30:38.588 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`FirstName`, `a`.`LastName`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`
FROM `AspNetUsers` AS `a`
WHERE `a`.`Id` = @__p_0
LIMIT 1
2025-11-16 17:30:38.596 +03:00 [INF] Executed DbCommand (4ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']

        UPDATE TOKENS
        SET Revoked = true, Expired = true
        WHERE UserId = @p0
          AND DeviceId = @p1
          AND Revoked = false
          AND Expired = false
2025-11-16 17:30:38.600 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a0`.`Name`
FROM `AspNetUserRoles` AS `a`
INNER JOIN `AspNetRoles` AS `a0` ON `a`.`RoleId` = `a0`.`Id`
WHERE `a`.`UserId` = @__userId_0
2025-11-16 17:30:38.604 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ClaimType`, `a`.`ClaimValue`, `a`.`UserId`
FROM `AspNetUserClaims` AS `a`
WHERE `a`.`UserId` = @__user_Id_0
2025-11-16 17:30:38.607 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a0`.`Name`
FROM `AspNetUserRoles` AS `a`
INNER JOIN `AspNetRoles` AS `a0` ON `a`.`RoleId` = `a0`.`Id`
WHERE `a`.`UserId` = @__userId_0
2025-11-16 17:30:38.611 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ClaimType`, `a`.`ClaimValue`, `a`.`UserId`
FROM `AspNetUserClaims` AS `a`
WHERE `a`.`UserId` = @__user_Id_0
2025-11-16 17:30:38.615 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (DbType = DateTime), @p2='?' (Size = 4000), @p3='?' (DbType = Boolean), @p4='?' (Size = 4000), @p5='?' (DbType = Boolean), @p6='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO `Tokens` (`AccessToken`, `CreatedAt`, `DeviceId`, `Expired`, `RefreshToken`, `Revoked`, `UserId`)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6);
SELECT `Id`
FROM `Tokens`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();
2025-11-16 17:30:38.616 +03:00 [INF] Added Token MappyApplication.Data.Token
2025-11-16 17:30:38.618 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessFailedCount`, `t`.`ConcurrencyStamp`, `t`.`Email`, `t`.`EmailConfirmed`, `t`.`FirstName`, `t`.`LastName`, `t`.`LockoutEnabled`, `t`.`LockoutEnd`, `t`.`NormalizedEmail`, `t`.`NormalizedUserName`, `t`.`PasswordHash`, `t`.`PhoneNumber`, `t`.`PhoneNumberConfirmed`, `t`.`SecurityStamp`, `t`.`TwoFactorEnabled`, `t`.`UserName`, `w`.`Id`, `w`.`Cadence`, `w`.`CityName`, `w`.`Coords`, `w`.`Date`, `w`.`Distance`, `w`.`Duration`, `w`.`Emoji`, `w`.`Pace`, `w`.`Type`, `w`.`UserId`, `c`.`Id`, `c`.`CityName`, `c`.`Country`, `c`.`Date`, `c`.`Emoji`, `c`.`Lat`, `c`.`Lng`, `c`.`Notes`, `c`.`UserId`
FROM (
    SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`FirstName`, `a`.`LastName`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`
    FROM `AspNetUsers` AS `a`
    WHERE `a`.`Id` = @__user_Id_0
    LIMIT 2
) AS `t`
LEFT JOIN `Workouts` AS `w` ON `t`.`Id` = `w`.`UserId`
LEFT JOIN `Cities` AS `c` ON `t`.`Id` = `c`.`UserId`
ORDER BY `t`.`Id`, `w`.`Id`
2025-11-16 17:30:38.620 +03:00 [INF] Executing ObjectResult, writing value of type 'MappyApplication.Models.user.AuthResponse'.
2025-11-16 17:30:38.620 +03:00 [INF] Executed action MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication) in 49.6509ms
2025-11-16 17:30:38.620 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication)'
2025-11-16 17:30:38.620 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:8080/api/v1/auth/refresh-token - 200 null application/json; charset=utf-8 148.7356ms
2025-11-16 17:30:55.270 +03:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:8080/api/v1/auth/refresh-token - null null
2025-11-16 17:30:55.272 +03:00 [INF] CORS policy execution successful.
2025-11-16 17:30:55.272 +03:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:8080/api/v1/auth/refresh-token - 204 null null 2.7533ms
2025-11-16 17:30:55.274 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:8080/api/v1/auth/refresh-token - null 0
2025-11-16 17:30:55.274 +03:00 [INF] CORS policy execution successful.
2025-11-16 17:30:55.299 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 17:30:55.300 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication)'
2025-11-16 17:30:55.300 +03:00 [INF] Route matched with {action = "RefreshToken", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.user.AuthResponse] RefreshToken() on controller MappyApplication.Controllers.AuthController (MappyApplication).
2025-11-16 17:30:55.301 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__refreshToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`RefreshToken` = @__refreshToken_0
LIMIT 2
2025-11-16 17:30:55.302 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`FirstName`, `a`.`LastName`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`
FROM `AspNetUsers` AS `a`
WHERE `a`.`Id` = @__p_0
LIMIT 1
2025-11-16 17:30:55.305 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']

        UPDATE TOKENS
        SET Revoked = true, Expired = true
        WHERE UserId = @p0
          AND DeviceId = @p1
          AND Revoked = false
          AND Expired = false
2025-11-16 17:30:55.306 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a0`.`Name`
FROM `AspNetUserRoles` AS `a`
INNER JOIN `AspNetRoles` AS `a0` ON `a`.`RoleId` = `a0`.`Id`
WHERE `a`.`UserId` = @__userId_0
2025-11-16 17:30:55.306 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ClaimType`, `a`.`ClaimValue`, `a`.`UserId`
FROM `AspNetUserClaims` AS `a`
WHERE `a`.`UserId` = @__user_Id_0
2025-11-16 17:30:55.307 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a0`.`Name`
FROM `AspNetUserRoles` AS `a`
INNER JOIN `AspNetRoles` AS `a0` ON `a`.`RoleId` = `a0`.`Id`
WHERE `a`.`UserId` = @__userId_0
2025-11-16 17:30:55.308 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ClaimType`, `a`.`ClaimValue`, `a`.`UserId`
FROM `AspNetUserClaims` AS `a`
WHERE `a`.`UserId` = @__user_Id_0
2025-11-16 17:30:55.309 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (DbType = DateTime), @p2='?' (Size = 4000), @p3='?' (DbType = Boolean), @p4='?' (Size = 4000), @p5='?' (DbType = Boolean), @p6='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO `Tokens` (`AccessToken`, `CreatedAt`, `DeviceId`, `Expired`, `RefreshToken`, `Revoked`, `UserId`)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6);
SELECT `Id`
FROM `Tokens`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();
2025-11-16 17:30:55.310 +03:00 [INF] Added Token MappyApplication.Data.Token
2025-11-16 17:30:55.312 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessFailedCount`, `t`.`ConcurrencyStamp`, `t`.`Email`, `t`.`EmailConfirmed`, `t`.`FirstName`, `t`.`LastName`, `t`.`LockoutEnabled`, `t`.`LockoutEnd`, `t`.`NormalizedEmail`, `t`.`NormalizedUserName`, `t`.`PasswordHash`, `t`.`PhoneNumber`, `t`.`PhoneNumberConfirmed`, `t`.`SecurityStamp`, `t`.`TwoFactorEnabled`, `t`.`UserName`, `w`.`Id`, `w`.`Cadence`, `w`.`CityName`, `w`.`Coords`, `w`.`Date`, `w`.`Distance`, `w`.`Duration`, `w`.`Emoji`, `w`.`Pace`, `w`.`Type`, `w`.`UserId`, `c`.`Id`, `c`.`CityName`, `c`.`Country`, `c`.`Date`, `c`.`Emoji`, `c`.`Lat`, `c`.`Lng`, `c`.`Notes`, `c`.`UserId`
FROM (
    SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`FirstName`, `a`.`LastName`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`
    FROM `AspNetUsers` AS `a`
    WHERE `a`.`Id` = @__user_Id_0
    LIMIT 2
) AS `t`
LEFT JOIN `Workouts` AS `w` ON `t`.`Id` = `w`.`UserId`
LEFT JOIN `Cities` AS `c` ON `t`.`Id` = `c`.`UserId`
ORDER BY `t`.`Id`, `w`.`Id`
2025-11-16 17:30:55.312 +03:00 [INF] Executing ObjectResult, writing value of type 'MappyApplication.Models.user.AuthResponse'.
2025-11-16 17:30:55.312 +03:00 [INF] Executed action MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication) in 12.4031ms
2025-11-16 17:30:55.312 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication)'
2025-11-16 17:30:55.312 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:8080/api/v1/auth/refresh-token - 200 null application/json; charset=utf-8 38.7325ms
2025-11-16 17:30:57.870 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:8080/api/v1/auth/refresh-token - null 0
2025-11-16 17:30:57.870 +03:00 [INF] CORS policy execution successful.
2025-11-16 17:30:57.887 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 17:30:57.888 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication)'
2025-11-16 17:30:57.888 +03:00 [INF] Route matched with {action = "RefreshToken", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.user.AuthResponse] RefreshToken() on controller MappyApplication.Controllers.AuthController (MappyApplication).
2025-11-16 17:30:57.890 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__refreshToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`RefreshToken` = @__refreshToken_0
LIMIT 2
2025-11-16 17:30:57.893 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`FirstName`, `a`.`LastName`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`
FROM `AspNetUsers` AS `a`
WHERE `a`.`Id` = @__p_0
LIMIT 1
2025-11-16 17:30:57.897 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']

        UPDATE TOKENS
        SET Revoked = true, Expired = true
        WHERE UserId = @p0
          AND DeviceId = @p1
          AND Revoked = false
          AND Expired = false
2025-11-16 17:30:57.899 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a0`.`Name`
FROM `AspNetUserRoles` AS `a`
INNER JOIN `AspNetRoles` AS `a0` ON `a`.`RoleId` = `a0`.`Id`
WHERE `a`.`UserId` = @__userId_0
2025-11-16 17:30:57.900 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ClaimType`, `a`.`ClaimValue`, `a`.`UserId`
FROM `AspNetUserClaims` AS `a`
WHERE `a`.`UserId` = @__user_Id_0
2025-11-16 17:30:57.900 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a0`.`Name`
FROM `AspNetUserRoles` AS `a`
INNER JOIN `AspNetRoles` AS `a0` ON `a`.`RoleId` = `a0`.`Id`
WHERE `a`.`UserId` = @__userId_0
2025-11-16 17:30:57.901 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ClaimType`, `a`.`ClaimValue`, `a`.`UserId`
FROM `AspNetUserClaims` AS `a`
WHERE `a`.`UserId` = @__user_Id_0
2025-11-16 17:30:57.902 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (DbType = DateTime), @p2='?' (Size = 4000), @p3='?' (DbType = Boolean), @p4='?' (Size = 4000), @p5='?' (DbType = Boolean), @p6='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO `Tokens` (`AccessToken`, `CreatedAt`, `DeviceId`, `Expired`, `RefreshToken`, `Revoked`, `UserId`)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6);
SELECT `Id`
FROM `Tokens`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();
2025-11-16 17:30:57.902 +03:00 [INF] Added Token MappyApplication.Data.Token
2025-11-16 17:30:57.903 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessFailedCount`, `t`.`ConcurrencyStamp`, `t`.`Email`, `t`.`EmailConfirmed`, `t`.`FirstName`, `t`.`LastName`, `t`.`LockoutEnabled`, `t`.`LockoutEnd`, `t`.`NormalizedEmail`, `t`.`NormalizedUserName`, `t`.`PasswordHash`, `t`.`PhoneNumber`, `t`.`PhoneNumberConfirmed`, `t`.`SecurityStamp`, `t`.`TwoFactorEnabled`, `t`.`UserName`, `w`.`Id`, `w`.`Cadence`, `w`.`CityName`, `w`.`Coords`, `w`.`Date`, `w`.`Distance`, `w`.`Duration`, `w`.`Emoji`, `w`.`Pace`, `w`.`Type`, `w`.`UserId`, `c`.`Id`, `c`.`CityName`, `c`.`Country`, `c`.`Date`, `c`.`Emoji`, `c`.`Lat`, `c`.`Lng`, `c`.`Notes`, `c`.`UserId`
FROM (
    SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`FirstName`, `a`.`LastName`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`
    FROM `AspNetUsers` AS `a`
    WHERE `a`.`Id` = @__user_Id_0
    LIMIT 2
) AS `t`
LEFT JOIN `Workouts` AS `w` ON `t`.`Id` = `w`.`UserId`
LEFT JOIN `Cities` AS `c` ON `t`.`Id` = `c`.`UserId`
ORDER BY `t`.`Id`, `w`.`Id`
2025-11-16 17:30:57.903 +03:00 [INF] Executing ObjectResult, writing value of type 'MappyApplication.Models.user.AuthResponse'.
2025-11-16 17:30:57.903 +03:00 [INF] Executed action MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication) in 15.6248ms
2025-11-16 17:30:57.904 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication)'
2025-11-16 17:30:57.904 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:8080/api/v1/auth/refresh-token - 200 null application/json; charset=utf-8 33.8572ms
2025-11-16 17:30:58.545 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:8080/api/v1/auth/refresh-token - null 0
2025-11-16 17:30:58.545 +03:00 [INF] CORS policy execution successful.
2025-11-16 17:30:58.558 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 17:30:58.558 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication)'
2025-11-16 17:30:58.558 +03:00 [INF] Route matched with {action = "RefreshToken", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.user.AuthResponse] RefreshToken() on controller MappyApplication.Controllers.AuthController (MappyApplication).
2025-11-16 17:30:58.559 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__refreshToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`RefreshToken` = @__refreshToken_0
LIMIT 2
2025-11-16 17:30:58.559 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`FirstName`, `a`.`LastName`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`
FROM `AspNetUsers` AS `a`
WHERE `a`.`Id` = @__p_0
LIMIT 1
2025-11-16 17:30:58.562 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']

        UPDATE TOKENS
        SET Revoked = true, Expired = true
        WHERE UserId = @p0
          AND DeviceId = @p1
          AND Revoked = false
          AND Expired = false
2025-11-16 17:30:58.565 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a0`.`Name`
FROM `AspNetUserRoles` AS `a`
INNER JOIN `AspNetRoles` AS `a0` ON `a`.`RoleId` = `a0`.`Id`
WHERE `a`.`UserId` = @__userId_0
2025-11-16 17:30:58.567 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ClaimType`, `a`.`ClaimValue`, `a`.`UserId`
FROM `AspNetUserClaims` AS `a`
WHERE `a`.`UserId` = @__user_Id_0
2025-11-16 17:30:58.568 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a0`.`Name`
FROM `AspNetUserRoles` AS `a`
INNER JOIN `AspNetRoles` AS `a0` ON `a`.`RoleId` = `a0`.`Id`
WHERE `a`.`UserId` = @__userId_0
2025-11-16 17:30:58.570 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ClaimType`, `a`.`ClaimValue`, `a`.`UserId`
FROM `AspNetUserClaims` AS `a`
WHERE `a`.`UserId` = @__user_Id_0
2025-11-16 17:30:58.572 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (DbType = DateTime), @p2='?' (Size = 4000), @p3='?' (DbType = Boolean), @p4='?' (Size = 4000), @p5='?' (DbType = Boolean), @p6='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO `Tokens` (`AccessToken`, `CreatedAt`, `DeviceId`, `Expired`, `RefreshToken`, `Revoked`, `UserId`)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6);
SELECT `Id`
FROM `Tokens`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();
2025-11-16 17:30:58.572 +03:00 [INF] Added Token MappyApplication.Data.Token
2025-11-16 17:30:58.574 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessFailedCount`, `t`.`ConcurrencyStamp`, `t`.`Email`, `t`.`EmailConfirmed`, `t`.`FirstName`, `t`.`LastName`, `t`.`LockoutEnabled`, `t`.`LockoutEnd`, `t`.`NormalizedEmail`, `t`.`NormalizedUserName`, `t`.`PasswordHash`, `t`.`PhoneNumber`, `t`.`PhoneNumberConfirmed`, `t`.`SecurityStamp`, `t`.`TwoFactorEnabled`, `t`.`UserName`, `w`.`Id`, `w`.`Cadence`, `w`.`CityName`, `w`.`Coords`, `w`.`Date`, `w`.`Distance`, `w`.`Duration`, `w`.`Emoji`, `w`.`Pace`, `w`.`Type`, `w`.`UserId`, `c`.`Id`, `c`.`CityName`, `c`.`Country`, `c`.`Date`, `c`.`Emoji`, `c`.`Lat`, `c`.`Lng`, `c`.`Notes`, `c`.`UserId`
FROM (
    SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`FirstName`, `a`.`LastName`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`
    FROM `AspNetUsers` AS `a`
    WHERE `a`.`Id` = @__user_Id_0
    LIMIT 2
) AS `t`
LEFT JOIN `Workouts` AS `w` ON `t`.`Id` = `w`.`UserId`
LEFT JOIN `Cities` AS `c` ON `t`.`Id` = `c`.`UserId`
ORDER BY `t`.`Id`, `w`.`Id`
2025-11-16 17:30:58.574 +03:00 [INF] Executing ObjectResult, writing value of type 'MappyApplication.Models.user.AuthResponse'.
2025-11-16 17:30:58.574 +03:00 [INF] Executed action MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication) in 15.6036ms
2025-11-16 17:30:58.574 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication)'
2025-11-16 17:30:58.574 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:8080/api/v1/auth/refresh-token - 200 null application/json; charset=utf-8 28.9152ms
2025-11-16 17:31:15.311 +03:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:8080/api/v1/auth/refresh-token - null null
2025-11-16 17:31:15.313 +03:00 [INF] CORS policy execution successful.
2025-11-16 17:31:15.313 +03:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:8080/api/v1/auth/refresh-token - 204 null null 2.4056ms
2025-11-16 17:31:15.314 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:8080/api/v1/auth/refresh-token - null 0
2025-11-16 17:31:15.315 +03:00 [INF] CORS policy execution successful.
2025-11-16 17:31:15.341 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 17:31:15.341 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication)'
2025-11-16 17:31:15.342 +03:00 [INF] Route matched with {action = "RefreshToken", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.user.AuthResponse] RefreshToken() on controller MappyApplication.Controllers.AuthController (MappyApplication).
2025-11-16 17:31:15.343 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__refreshToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`RefreshToken` = @__refreshToken_0
LIMIT 2
2025-11-16 17:31:15.344 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`FirstName`, `a`.`LastName`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`
FROM `AspNetUsers` AS `a`
WHERE `a`.`Id` = @__p_0
LIMIT 1
2025-11-16 17:31:15.347 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']

        UPDATE TOKENS
        SET Revoked = true, Expired = true
        WHERE UserId = @p0
          AND DeviceId = @p1
          AND Revoked = false
          AND Expired = false
2025-11-16 17:31:15.348 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a0`.`Name`
FROM `AspNetUserRoles` AS `a`
INNER JOIN `AspNetRoles` AS `a0` ON `a`.`RoleId` = `a0`.`Id`
WHERE `a`.`UserId` = @__userId_0
2025-11-16 17:31:15.349 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ClaimType`, `a`.`ClaimValue`, `a`.`UserId`
FROM `AspNetUserClaims` AS `a`
WHERE `a`.`UserId` = @__user_Id_0
2025-11-16 17:31:15.350 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a0`.`Name`
FROM `AspNetUserRoles` AS `a`
INNER JOIN `AspNetRoles` AS `a0` ON `a`.`RoleId` = `a0`.`Id`
WHERE `a`.`UserId` = @__userId_0
2025-11-16 17:31:15.351 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ClaimType`, `a`.`ClaimValue`, `a`.`UserId`
FROM `AspNetUserClaims` AS `a`
WHERE `a`.`UserId` = @__user_Id_0
2025-11-16 17:31:15.353 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (DbType = DateTime), @p2='?' (Size = 4000), @p3='?' (DbType = Boolean), @p4='?' (Size = 4000), @p5='?' (DbType = Boolean), @p6='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO `Tokens` (`AccessToken`, `CreatedAt`, `DeviceId`, `Expired`, `RefreshToken`, `Revoked`, `UserId`)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6);
SELECT `Id`
FROM `Tokens`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();
2025-11-16 17:31:15.354 +03:00 [INF] Added Token MappyApplication.Data.Token
2025-11-16 17:31:15.356 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessFailedCount`, `t`.`ConcurrencyStamp`, `t`.`Email`, `t`.`EmailConfirmed`, `t`.`FirstName`, `t`.`LastName`, `t`.`LockoutEnabled`, `t`.`LockoutEnd`, `t`.`NormalizedEmail`, `t`.`NormalizedUserName`, `t`.`PasswordHash`, `t`.`PhoneNumber`, `t`.`PhoneNumberConfirmed`, `t`.`SecurityStamp`, `t`.`TwoFactorEnabled`, `t`.`UserName`, `w`.`Id`, `w`.`Cadence`, `w`.`CityName`, `w`.`Coords`, `w`.`Date`, `w`.`Distance`, `w`.`Duration`, `w`.`Emoji`, `w`.`Pace`, `w`.`Type`, `w`.`UserId`, `c`.`Id`, `c`.`CityName`, `c`.`Country`, `c`.`Date`, `c`.`Emoji`, `c`.`Lat`, `c`.`Lng`, `c`.`Notes`, `c`.`UserId`
FROM (
    SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`FirstName`, `a`.`LastName`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`
    FROM `AspNetUsers` AS `a`
    WHERE `a`.`Id` = @__user_Id_0
    LIMIT 2
) AS `t`
LEFT JOIN `Workouts` AS `w` ON `t`.`Id` = `w`.`UserId`
LEFT JOIN `Cities` AS `c` ON `t`.`Id` = `c`.`UserId`
ORDER BY `t`.`Id`, `w`.`Id`
2025-11-16 17:31:15.356 +03:00 [INF] Executing ObjectResult, writing value of type 'MappyApplication.Models.user.AuthResponse'.
2025-11-16 17:31:15.356 +03:00 [INF] Executed action MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication) in 14.3602ms
2025-11-16 17:31:15.356 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication)'
2025-11-16 17:31:15.356 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:8080/api/v1/auth/refresh-token - 200 null application/json; charset=utf-8 41.5774ms
2025-11-16 17:31:16.545 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:8080/api/v1/auth/refresh-token - null 0
2025-11-16 17:31:16.546 +03:00 [INF] CORS policy execution successful.
2025-11-16 17:31:16.560 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 17:31:16.560 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication)'
2025-11-16 17:31:16.561 +03:00 [INF] Route matched with {action = "RefreshToken", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.user.AuthResponse] RefreshToken() on controller MappyApplication.Controllers.AuthController (MappyApplication).
2025-11-16 17:31:16.564 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__refreshToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`RefreshToken` = @__refreshToken_0
LIMIT 2
2025-11-16 17:31:16.566 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`FirstName`, `a`.`LastName`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`
FROM `AspNetUsers` AS `a`
WHERE `a`.`Id` = @__p_0
LIMIT 1
2025-11-16 17:31:16.568 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']

        UPDATE TOKENS
        SET Revoked = true, Expired = true
        WHERE UserId = @p0
          AND DeviceId = @p1
          AND Revoked = false
          AND Expired = false
2025-11-16 17:31:16.569 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a0`.`Name`
FROM `AspNetUserRoles` AS `a`
INNER JOIN `AspNetRoles` AS `a0` ON `a`.`RoleId` = `a0`.`Id`
WHERE `a`.`UserId` = @__userId_0
2025-11-16 17:31:16.570 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ClaimType`, `a`.`ClaimValue`, `a`.`UserId`
FROM `AspNetUserClaims` AS `a`
WHERE `a`.`UserId` = @__user_Id_0
2025-11-16 17:31:16.571 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a0`.`Name`
FROM `AspNetUserRoles` AS `a`
INNER JOIN `AspNetRoles` AS `a0` ON `a`.`RoleId` = `a0`.`Id`
WHERE `a`.`UserId` = @__userId_0
2025-11-16 17:31:16.572 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ClaimType`, `a`.`ClaimValue`, `a`.`UserId`
FROM `AspNetUserClaims` AS `a`
WHERE `a`.`UserId` = @__user_Id_0
2025-11-16 17:31:16.573 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (DbType = DateTime), @p2='?' (Size = 4000), @p3='?' (DbType = Boolean), @p4='?' (Size = 4000), @p5='?' (DbType = Boolean), @p6='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO `Tokens` (`AccessToken`, `CreatedAt`, `DeviceId`, `Expired`, `RefreshToken`, `Revoked`, `UserId`)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6);
SELECT `Id`
FROM `Tokens`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();
2025-11-16 17:31:16.574 +03:00 [INF] Added Token MappyApplication.Data.Token
2025-11-16 17:31:16.575 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessFailedCount`, `t`.`ConcurrencyStamp`, `t`.`Email`, `t`.`EmailConfirmed`, `t`.`FirstName`, `t`.`LastName`, `t`.`LockoutEnabled`, `t`.`LockoutEnd`, `t`.`NormalizedEmail`, `t`.`NormalizedUserName`, `t`.`PasswordHash`, `t`.`PhoneNumber`, `t`.`PhoneNumberConfirmed`, `t`.`SecurityStamp`, `t`.`TwoFactorEnabled`, `t`.`UserName`, `w`.`Id`, `w`.`Cadence`, `w`.`CityName`, `w`.`Coords`, `w`.`Date`, `w`.`Distance`, `w`.`Duration`, `w`.`Emoji`, `w`.`Pace`, `w`.`Type`, `w`.`UserId`, `c`.`Id`, `c`.`CityName`, `c`.`Country`, `c`.`Date`, `c`.`Emoji`, `c`.`Lat`, `c`.`Lng`, `c`.`Notes`, `c`.`UserId`
FROM (
    SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`FirstName`, `a`.`LastName`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`
    FROM `AspNetUsers` AS `a`
    WHERE `a`.`Id` = @__user_Id_0
    LIMIT 2
) AS `t`
LEFT JOIN `Workouts` AS `w` ON `t`.`Id` = `w`.`UserId`
LEFT JOIN `Cities` AS `c` ON `t`.`Id` = `c`.`UserId`
ORDER BY `t`.`Id`, `w`.`Id`
2025-11-16 17:31:16.575 +03:00 [INF] Executing ObjectResult, writing value of type 'MappyApplication.Models.user.AuthResponse'.
2025-11-16 17:31:16.575 +03:00 [INF] Executed action MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication) in 14.2428ms
2025-11-16 17:31:16.575 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication)'
2025-11-16 17:31:16.575 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:8080/api/v1/auth/refresh-token - 200 null application/json; charset=utf-8 29.4821ms
2025-11-16 17:31:17.281 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:8080/api/v1/auth/refresh-token - null 0
2025-11-16 17:31:17.281 +03:00 [INF] CORS policy execution successful.
2025-11-16 17:31:17.329 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 17:31:17.330 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication)'
2025-11-16 17:31:17.330 +03:00 [INF] Route matched with {action = "RefreshToken", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.user.AuthResponse] RefreshToken() on controller MappyApplication.Controllers.AuthController (MappyApplication).
2025-11-16 17:31:17.331 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__refreshToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`RefreshToken` = @__refreshToken_0
LIMIT 2
2025-11-16 17:31:17.332 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`FirstName`, `a`.`LastName`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`
FROM `AspNetUsers` AS `a`
WHERE `a`.`Id` = @__p_0
LIMIT 1
2025-11-16 17:31:17.334 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']

        UPDATE TOKENS
        SET Revoked = true, Expired = true
        WHERE UserId = @p0
          AND DeviceId = @p1
          AND Revoked = false
          AND Expired = false
2025-11-16 17:31:17.338 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a0`.`Name`
FROM `AspNetUserRoles` AS `a`
INNER JOIN `AspNetRoles` AS `a0` ON `a`.`RoleId` = `a0`.`Id`
WHERE `a`.`UserId` = @__userId_0
2025-11-16 17:31:17.340 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ClaimType`, `a`.`ClaimValue`, `a`.`UserId`
FROM `AspNetUserClaims` AS `a`
WHERE `a`.`UserId` = @__user_Id_0
2025-11-16 17:31:17.342 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a0`.`Name`
FROM `AspNetUserRoles` AS `a`
INNER JOIN `AspNetRoles` AS `a0` ON `a`.`RoleId` = `a0`.`Id`
WHERE `a`.`UserId` = @__userId_0
2025-11-16 17:31:17.344 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ClaimType`, `a`.`ClaimValue`, `a`.`UserId`
FROM `AspNetUserClaims` AS `a`
WHERE `a`.`UserId` = @__user_Id_0
2025-11-16 17:31:17.348 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (DbType = DateTime), @p2='?' (Size = 4000), @p3='?' (DbType = Boolean), @p4='?' (Size = 4000), @p5='?' (DbType = Boolean), @p6='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO `Tokens` (`AccessToken`, `CreatedAt`, `DeviceId`, `Expired`, `RefreshToken`, `Revoked`, `UserId`)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6);
SELECT `Id`
FROM `Tokens`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();
2025-11-16 17:31:17.349 +03:00 [INF] Added Token MappyApplication.Data.Token
2025-11-16 17:31:17.351 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessFailedCount`, `t`.`ConcurrencyStamp`, `t`.`Email`, `t`.`EmailConfirmed`, `t`.`FirstName`, `t`.`LastName`, `t`.`LockoutEnabled`, `t`.`LockoutEnd`, `t`.`NormalizedEmail`, `t`.`NormalizedUserName`, `t`.`PasswordHash`, `t`.`PhoneNumber`, `t`.`PhoneNumberConfirmed`, `t`.`SecurityStamp`, `t`.`TwoFactorEnabled`, `t`.`UserName`, `w`.`Id`, `w`.`Cadence`, `w`.`CityName`, `w`.`Coords`, `w`.`Date`, `w`.`Distance`, `w`.`Duration`, `w`.`Emoji`, `w`.`Pace`, `w`.`Type`, `w`.`UserId`, `c`.`Id`, `c`.`CityName`, `c`.`Country`, `c`.`Date`, `c`.`Emoji`, `c`.`Lat`, `c`.`Lng`, `c`.`Notes`, `c`.`UserId`
FROM (
    SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`FirstName`, `a`.`LastName`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`
    FROM `AspNetUsers` AS `a`
    WHERE `a`.`Id` = @__user_Id_0
    LIMIT 2
) AS `t`
LEFT JOIN `Workouts` AS `w` ON `t`.`Id` = `w`.`UserId`
LEFT JOIN `Cities` AS `c` ON `t`.`Id` = `c`.`UserId`
ORDER BY `t`.`Id`, `w`.`Id`
2025-11-16 17:31:17.351 +03:00 [INF] Executing ObjectResult, writing value of type 'MappyApplication.Models.user.AuthResponse'.
2025-11-16 17:31:17.351 +03:00 [INF] Executed action MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication) in 21.62ms
2025-11-16 17:31:17.351 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication)'
2025-11-16 17:31:17.352 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:8080/api/v1/auth/refresh-token - 200 null application/json; charset=utf-8 70.4923ms
2025-11-16 17:31:17.863 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:8080/api/v1/auth/refresh-token - null 0
2025-11-16 17:31:17.864 +03:00 [INF] CORS policy execution successful.
2025-11-16 17:31:17.895 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 17:31:17.896 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication)'
2025-11-16 17:31:17.896 +03:00 [INF] Route matched with {action = "RefreshToken", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.user.AuthResponse] RefreshToken() on controller MappyApplication.Controllers.AuthController (MappyApplication).
2025-11-16 17:31:17.897 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__refreshToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`RefreshToken` = @__refreshToken_0
LIMIT 2
2025-11-16 17:31:17.899 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`FirstName`, `a`.`LastName`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`
FROM `AspNetUsers` AS `a`
WHERE `a`.`Id` = @__p_0
LIMIT 1
2025-11-16 17:31:17.901 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']

        UPDATE TOKENS
        SET Revoked = true, Expired = true
        WHERE UserId = @p0
          AND DeviceId = @p1
          AND Revoked = false
          AND Expired = false
2025-11-16 17:31:17.902 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a0`.`Name`
FROM `AspNetUserRoles` AS `a`
INNER JOIN `AspNetRoles` AS `a0` ON `a`.`RoleId` = `a0`.`Id`
WHERE `a`.`UserId` = @__userId_0
2025-11-16 17:31:17.904 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ClaimType`, `a`.`ClaimValue`, `a`.`UserId`
FROM `AspNetUserClaims` AS `a`
WHERE `a`.`UserId` = @__user_Id_0
2025-11-16 17:31:17.904 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a0`.`Name`
FROM `AspNetUserRoles` AS `a`
INNER JOIN `AspNetRoles` AS `a0` ON `a`.`RoleId` = `a0`.`Id`
WHERE `a`.`UserId` = @__userId_0
2025-11-16 17:31:17.905 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ClaimType`, `a`.`ClaimValue`, `a`.`UserId`
FROM `AspNetUserClaims` AS `a`
WHERE `a`.`UserId` = @__user_Id_0
2025-11-16 17:31:17.907 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (DbType = DateTime), @p2='?' (Size = 4000), @p3='?' (DbType = Boolean), @p4='?' (Size = 4000), @p5='?' (DbType = Boolean), @p6='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO `Tokens` (`AccessToken`, `CreatedAt`, `DeviceId`, `Expired`, `RefreshToken`, `Revoked`, `UserId`)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6);
SELECT `Id`
FROM `Tokens`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();
2025-11-16 17:31:17.907 +03:00 [INF] Added Token MappyApplication.Data.Token
2025-11-16 17:31:17.908 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessFailedCount`, `t`.`ConcurrencyStamp`, `t`.`Email`, `t`.`EmailConfirmed`, `t`.`FirstName`, `t`.`LastName`, `t`.`LockoutEnabled`, `t`.`LockoutEnd`, `t`.`NormalizedEmail`, `t`.`NormalizedUserName`, `t`.`PasswordHash`, `t`.`PhoneNumber`, `t`.`PhoneNumberConfirmed`, `t`.`SecurityStamp`, `t`.`TwoFactorEnabled`, `t`.`UserName`, `w`.`Id`, `w`.`Cadence`, `w`.`CityName`, `w`.`Coords`, `w`.`Date`, `w`.`Distance`, `w`.`Duration`, `w`.`Emoji`, `w`.`Pace`, `w`.`Type`, `w`.`UserId`, `c`.`Id`, `c`.`CityName`, `c`.`Country`, `c`.`Date`, `c`.`Emoji`, `c`.`Lat`, `c`.`Lng`, `c`.`Notes`, `c`.`UserId`
FROM (
    SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`FirstName`, `a`.`LastName`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`
    FROM `AspNetUsers` AS `a`
    WHERE `a`.`Id` = @__user_Id_0
    LIMIT 2
) AS `t`
LEFT JOIN `Workouts` AS `w` ON `t`.`Id` = `w`.`UserId`
LEFT JOIN `Cities` AS `c` ON `t`.`Id` = `c`.`UserId`
ORDER BY `t`.`Id`, `w`.`Id`
2025-11-16 17:31:17.909 +03:00 [INF] Executing ObjectResult, writing value of type 'MappyApplication.Models.user.AuthResponse'.
2025-11-16 17:31:17.909 +03:00 [INF] Executed action MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication) in 13.326ms
2025-11-16 17:31:17.909 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication)'
2025-11-16 17:31:17.909 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:8080/api/v1/auth/refresh-token - 200 null application/json; charset=utf-8 46.1205ms
2025-11-16 17:31:18.663 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:8080/api/v1/auth/refresh-token - null 0
2025-11-16 17:31:18.663 +03:00 [INF] CORS policy execution successful.
2025-11-16 17:31:18.676 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 17:31:18.676 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication)'
2025-11-16 17:31:18.676 +03:00 [INF] Route matched with {action = "RefreshToken", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.user.AuthResponse] RefreshToken() on controller MappyApplication.Controllers.AuthController (MappyApplication).
2025-11-16 17:31:18.677 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__refreshToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`RefreshToken` = @__refreshToken_0
LIMIT 2
2025-11-16 17:31:18.678 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`FirstName`, `a`.`LastName`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`
FROM `AspNetUsers` AS `a`
WHERE `a`.`Id` = @__p_0
LIMIT 1
2025-11-16 17:31:18.679 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']

        UPDATE TOKENS
        SET Revoked = true, Expired = true
        WHERE UserId = @p0
          AND DeviceId = @p1
          AND Revoked = false
          AND Expired = false
2025-11-16 17:31:18.682 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a0`.`Name`
FROM `AspNetUserRoles` AS `a`
INNER JOIN `AspNetRoles` AS `a0` ON `a`.`RoleId` = `a0`.`Id`
WHERE `a`.`UserId` = @__userId_0
2025-11-16 17:31:18.684 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ClaimType`, `a`.`ClaimValue`, `a`.`UserId`
FROM `AspNetUserClaims` AS `a`
WHERE `a`.`UserId` = @__user_Id_0
2025-11-16 17:31:18.686 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a0`.`Name`
FROM `AspNetUserRoles` AS `a`
INNER JOIN `AspNetRoles` AS `a0` ON `a`.`RoleId` = `a0`.`Id`
WHERE `a`.`UserId` = @__userId_0
2025-11-16 17:31:18.687 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ClaimType`, `a`.`ClaimValue`, `a`.`UserId`
FROM `AspNetUserClaims` AS `a`
WHERE `a`.`UserId` = @__user_Id_0
2025-11-16 17:31:18.689 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (DbType = DateTime), @p2='?' (Size = 4000), @p3='?' (DbType = Boolean), @p4='?' (Size = 4000), @p5='?' (DbType = Boolean), @p6='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO `Tokens` (`AccessToken`, `CreatedAt`, `DeviceId`, `Expired`, `RefreshToken`, `Revoked`, `UserId`)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6);
SELECT `Id`
FROM `Tokens`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();
2025-11-16 17:31:18.690 +03:00 [INF] Added Token MappyApplication.Data.Token
2025-11-16 17:31:18.691 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessFailedCount`, `t`.`ConcurrencyStamp`, `t`.`Email`, `t`.`EmailConfirmed`, `t`.`FirstName`, `t`.`LastName`, `t`.`LockoutEnabled`, `t`.`LockoutEnd`, `t`.`NormalizedEmail`, `t`.`NormalizedUserName`, `t`.`PasswordHash`, `t`.`PhoneNumber`, `t`.`PhoneNumberConfirmed`, `t`.`SecurityStamp`, `t`.`TwoFactorEnabled`, `t`.`UserName`, `w`.`Id`, `w`.`Cadence`, `w`.`CityName`, `w`.`Coords`, `w`.`Date`, `w`.`Distance`, `w`.`Duration`, `w`.`Emoji`, `w`.`Pace`, `w`.`Type`, `w`.`UserId`, `c`.`Id`, `c`.`CityName`, `c`.`Country`, `c`.`Date`, `c`.`Emoji`, `c`.`Lat`, `c`.`Lng`, `c`.`Notes`, `c`.`UserId`
FROM (
    SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`FirstName`, `a`.`LastName`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`
    FROM `AspNetUsers` AS `a`
    WHERE `a`.`Id` = @__user_Id_0
    LIMIT 2
) AS `t`
LEFT JOIN `Workouts` AS `w` ON `t`.`Id` = `w`.`UserId`
LEFT JOIN `Cities` AS `c` ON `t`.`Id` = `c`.`UserId`
ORDER BY `t`.`Id`, `w`.`Id`
2025-11-16 17:31:18.691 +03:00 [INF] Executing ObjectResult, writing value of type 'MappyApplication.Models.user.AuthResponse'.
2025-11-16 17:31:18.691 +03:00 [INF] Executed action MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication) in 15.4269ms
2025-11-16 17:31:18.691 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication)'
2025-11-16 17:31:18.691 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:8080/api/v1/auth/refresh-token - 200 null application/json; charset=utf-8 28.3288ms
2025-11-16 17:31:19.293 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:8080/api/v1/auth/refresh-token - null 0
2025-11-16 17:31:19.294 +03:00 [INF] CORS policy execution successful.
2025-11-16 17:31:19.306 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 17:31:19.307 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication)'
2025-11-16 17:31:19.307 +03:00 [INF] Route matched with {action = "RefreshToken", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.user.AuthResponse] RefreshToken() on controller MappyApplication.Controllers.AuthController (MappyApplication).
2025-11-16 17:31:19.308 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__refreshToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`RefreshToken` = @__refreshToken_0
LIMIT 2
2025-11-16 17:31:19.309 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`FirstName`, `a`.`LastName`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`
FROM `AspNetUsers` AS `a`
WHERE `a`.`Id` = @__p_0
LIMIT 1
2025-11-16 17:31:19.315 +03:00 [INF] Executed DbCommand (5ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']

        UPDATE TOKENS
        SET Revoked = true, Expired = true
        WHERE UserId = @p0
          AND DeviceId = @p1
          AND Revoked = false
          AND Expired = false
2025-11-16 17:31:19.317 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a0`.`Name`
FROM `AspNetUserRoles` AS `a`
INNER JOIN `AspNetRoles` AS `a0` ON `a`.`RoleId` = `a0`.`Id`
WHERE `a`.`UserId` = @__userId_0
2025-11-16 17:31:19.318 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ClaimType`, `a`.`ClaimValue`, `a`.`UserId`
FROM `AspNetUserClaims` AS `a`
WHERE `a`.`UserId` = @__user_Id_0
2025-11-16 17:31:19.320 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a0`.`Name`
FROM `AspNetUserRoles` AS `a`
INNER JOIN `AspNetRoles` AS `a0` ON `a`.`RoleId` = `a0`.`Id`
WHERE `a`.`UserId` = @__userId_0
2025-11-16 17:31:19.320 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ClaimType`, `a`.`ClaimValue`, `a`.`UserId`
FROM `AspNetUserClaims` AS `a`
WHERE `a`.`UserId` = @__user_Id_0
2025-11-16 17:31:19.322 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (DbType = DateTime), @p2='?' (Size = 4000), @p3='?' (DbType = Boolean), @p4='?' (Size = 4000), @p5='?' (DbType = Boolean), @p6='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO `Tokens` (`AccessToken`, `CreatedAt`, `DeviceId`, `Expired`, `RefreshToken`, `Revoked`, `UserId`)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6);
SELECT `Id`
FROM `Tokens`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();
2025-11-16 17:31:19.322 +03:00 [INF] Added Token MappyApplication.Data.Token
2025-11-16 17:31:19.324 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessFailedCount`, `t`.`ConcurrencyStamp`, `t`.`Email`, `t`.`EmailConfirmed`, `t`.`FirstName`, `t`.`LastName`, `t`.`LockoutEnabled`, `t`.`LockoutEnd`, `t`.`NormalizedEmail`, `t`.`NormalizedUserName`, `t`.`PasswordHash`, `t`.`PhoneNumber`, `t`.`PhoneNumberConfirmed`, `t`.`SecurityStamp`, `t`.`TwoFactorEnabled`, `t`.`UserName`, `w`.`Id`, `w`.`Cadence`, `w`.`CityName`, `w`.`Coords`, `w`.`Date`, `w`.`Distance`, `w`.`Duration`, `w`.`Emoji`, `w`.`Pace`, `w`.`Type`, `w`.`UserId`, `c`.`Id`, `c`.`CityName`, `c`.`Country`, `c`.`Date`, `c`.`Emoji`, `c`.`Lat`, `c`.`Lng`, `c`.`Notes`, `c`.`UserId`
FROM (
    SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`FirstName`, `a`.`LastName`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`
    FROM `AspNetUsers` AS `a`
    WHERE `a`.`Id` = @__user_Id_0
    LIMIT 2
) AS `t`
LEFT JOIN `Workouts` AS `w` ON `t`.`Id` = `w`.`UserId`
LEFT JOIN `Cities` AS `c` ON `t`.`Id` = `c`.`UserId`
ORDER BY `t`.`Id`, `w`.`Id`
2025-11-16 17:31:19.324 +03:00 [INF] Executing ObjectResult, writing value of type 'MappyApplication.Models.user.AuthResponse'.
2025-11-16 17:31:19.324 +03:00 [INF] Executed action MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication) in 17.1751ms
2025-11-16 17:31:19.324 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication)'
2025-11-16 17:31:19.324 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:8080/api/v1/auth/refresh-token - 200 null application/json; charset=utf-8 30.8912ms
2025-11-16 17:31:19.995 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:8080/api/v1/auth/refresh-token - null 0
2025-11-16 17:31:19.996 +03:00 [INF] CORS policy execution successful.
2025-11-16 17:31:20.009 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 17:31:20.009 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication)'
2025-11-16 17:31:20.009 +03:00 [INF] Route matched with {action = "RefreshToken", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.user.AuthResponse] RefreshToken() on controller MappyApplication.Controllers.AuthController (MappyApplication).
2025-11-16 17:31:20.010 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__refreshToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`RefreshToken` = @__refreshToken_0
LIMIT 2
2025-11-16 17:31:20.010 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`FirstName`, `a`.`LastName`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`
FROM `AspNetUsers` AS `a`
WHERE `a`.`Id` = @__p_0
LIMIT 1
2025-11-16 17:31:20.014 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']

        UPDATE TOKENS
        SET Revoked = true, Expired = true
        WHERE UserId = @p0
          AND DeviceId = @p1
          AND Revoked = false
          AND Expired = false
2025-11-16 17:31:20.018 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a0`.`Name`
FROM `AspNetUserRoles` AS `a`
INNER JOIN `AspNetRoles` AS `a0` ON `a`.`RoleId` = `a0`.`Id`
WHERE `a`.`UserId` = @__userId_0
2025-11-16 17:31:20.020 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ClaimType`, `a`.`ClaimValue`, `a`.`UserId`
FROM `AspNetUserClaims` AS `a`
WHERE `a`.`UserId` = @__user_Id_0
2025-11-16 17:31:20.022 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a0`.`Name`
FROM `AspNetUserRoles` AS `a`
INNER JOIN `AspNetRoles` AS `a0` ON `a`.`RoleId` = `a0`.`Id`
WHERE `a`.`UserId` = @__userId_0
2025-11-16 17:31:20.023 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ClaimType`, `a`.`ClaimValue`, `a`.`UserId`
FROM `AspNetUserClaims` AS `a`
WHERE `a`.`UserId` = @__user_Id_0
2025-11-16 17:31:20.024 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (DbType = DateTime), @p2='?' (Size = 4000), @p3='?' (DbType = Boolean), @p4='?' (Size = 4000), @p5='?' (DbType = Boolean), @p6='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO `Tokens` (`AccessToken`, `CreatedAt`, `DeviceId`, `Expired`, `RefreshToken`, `Revoked`, `UserId`)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6);
SELECT `Id`
FROM `Tokens`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();
2025-11-16 17:31:20.025 +03:00 [INF] Added Token MappyApplication.Data.Token
2025-11-16 17:31:20.026 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessFailedCount`, `t`.`ConcurrencyStamp`, `t`.`Email`, `t`.`EmailConfirmed`, `t`.`FirstName`, `t`.`LastName`, `t`.`LockoutEnabled`, `t`.`LockoutEnd`, `t`.`NormalizedEmail`, `t`.`NormalizedUserName`, `t`.`PasswordHash`, `t`.`PhoneNumber`, `t`.`PhoneNumberConfirmed`, `t`.`SecurityStamp`, `t`.`TwoFactorEnabled`, `t`.`UserName`, `w`.`Id`, `w`.`Cadence`, `w`.`CityName`, `w`.`Coords`, `w`.`Date`, `w`.`Distance`, `w`.`Duration`, `w`.`Emoji`, `w`.`Pace`, `w`.`Type`, `w`.`UserId`, `c`.`Id`, `c`.`CityName`, `c`.`Country`, `c`.`Date`, `c`.`Emoji`, `c`.`Lat`, `c`.`Lng`, `c`.`Notes`, `c`.`UserId`
FROM (
    SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`FirstName`, `a`.`LastName`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`
    FROM `AspNetUsers` AS `a`
    WHERE `a`.`Id` = @__user_Id_0
    LIMIT 2
) AS `t`
LEFT JOIN `Workouts` AS `w` ON `t`.`Id` = `w`.`UserId`
LEFT JOIN `Cities` AS `c` ON `t`.`Id` = `c`.`UserId`
ORDER BY `t`.`Id`, `w`.`Id`
2025-11-16 17:31:20.026 +03:00 [INF] Executing ObjectResult, writing value of type 'MappyApplication.Models.user.AuthResponse'.
2025-11-16 17:31:20.026 +03:00 [INF] Executed action MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication) in 17.1038ms
2025-11-16 17:31:20.026 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication)'
2025-11-16 17:31:20.026 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:8080/api/v1/auth/refresh-token - 200 null application/json; charset=utf-8 30.6307ms
2025-11-16 17:31:27.574 +03:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:8080/api/v1/auth/refresh-token - null null
2025-11-16 17:31:27.579 +03:00 [INF] CORS policy execution successful.
2025-11-16 17:31:27.580 +03:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:8080/api/v1/auth/refresh-token - 204 null null 6.1547ms
2025-11-16 17:31:27.582 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:8080/api/v1/auth/refresh-token - null 0
2025-11-16 17:31:27.582 +03:00 [INF] CORS policy execution successful.
2025-11-16 17:31:27.610 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 17:31:27.610 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication)'
2025-11-16 17:31:27.611 +03:00 [INF] Route matched with {action = "RefreshToken", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.user.AuthResponse] RefreshToken() on controller MappyApplication.Controllers.AuthController (MappyApplication).
2025-11-16 17:31:27.612 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__refreshToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`RefreshToken` = @__refreshToken_0
LIMIT 2
2025-11-16 17:31:27.614 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`FirstName`, `a`.`LastName`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`
FROM `AspNetUsers` AS `a`
WHERE `a`.`Id` = @__p_0
LIMIT 1
2025-11-16 17:31:27.619 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']

        UPDATE TOKENS
        SET Revoked = true, Expired = true
        WHERE UserId = @p0
          AND DeviceId = @p1
          AND Revoked = false
          AND Expired = false
2025-11-16 17:31:27.621 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a0`.`Name`
FROM `AspNetUserRoles` AS `a`
INNER JOIN `AspNetRoles` AS `a0` ON `a`.`RoleId` = `a0`.`Id`
WHERE `a`.`UserId` = @__userId_0
2025-11-16 17:31:27.622 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ClaimType`, `a`.`ClaimValue`, `a`.`UserId`
FROM `AspNetUserClaims` AS `a`
WHERE `a`.`UserId` = @__user_Id_0
2025-11-16 17:31:27.622 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a0`.`Name`
FROM `AspNetUserRoles` AS `a`
INNER JOIN `AspNetRoles` AS `a0` ON `a`.`RoleId` = `a0`.`Id`
WHERE `a`.`UserId` = @__userId_0
2025-11-16 17:31:27.623 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ClaimType`, `a`.`ClaimValue`, `a`.`UserId`
FROM `AspNetUserClaims` AS `a`
WHERE `a`.`UserId` = @__user_Id_0
2025-11-16 17:31:27.625 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (DbType = DateTime), @p2='?' (Size = 4000), @p3='?' (DbType = Boolean), @p4='?' (Size = 4000), @p5='?' (DbType = Boolean), @p6='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO `Tokens` (`AccessToken`, `CreatedAt`, `DeviceId`, `Expired`, `RefreshToken`, `Revoked`, `UserId`)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6);
SELECT `Id`
FROM `Tokens`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();
2025-11-16 17:31:27.625 +03:00 [INF] Added Token MappyApplication.Data.Token
2025-11-16 17:31:27.627 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessFailedCount`, `t`.`ConcurrencyStamp`, `t`.`Email`, `t`.`EmailConfirmed`, `t`.`FirstName`, `t`.`LastName`, `t`.`LockoutEnabled`, `t`.`LockoutEnd`, `t`.`NormalizedEmail`, `t`.`NormalizedUserName`, `t`.`PasswordHash`, `t`.`PhoneNumber`, `t`.`PhoneNumberConfirmed`, `t`.`SecurityStamp`, `t`.`TwoFactorEnabled`, `t`.`UserName`, `w`.`Id`, `w`.`Cadence`, `w`.`CityName`, `w`.`Coords`, `w`.`Date`, `w`.`Distance`, `w`.`Duration`, `w`.`Emoji`, `w`.`Pace`, `w`.`Type`, `w`.`UserId`, `c`.`Id`, `c`.`CityName`, `c`.`Country`, `c`.`Date`, `c`.`Emoji`, `c`.`Lat`, `c`.`Lng`, `c`.`Notes`, `c`.`UserId`
FROM (
    SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`FirstName`, `a`.`LastName`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`
    FROM `AspNetUsers` AS `a`
    WHERE `a`.`Id` = @__user_Id_0
    LIMIT 2
) AS `t`
LEFT JOIN `Workouts` AS `w` ON `t`.`Id` = `w`.`UserId`
LEFT JOIN `Cities` AS `c` ON `t`.`Id` = `c`.`UserId`
ORDER BY `t`.`Id`, `w`.`Id`
2025-11-16 17:31:27.627 +03:00 [INF] Executing ObjectResult, writing value of type 'MappyApplication.Models.user.AuthResponse'.
2025-11-16 17:31:27.628 +03:00 [INF] Executed action MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication) in 17.0969ms
2025-11-16 17:31:27.628 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication)'
2025-11-16 17:31:27.628 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:8080/api/v1/auth/refresh-token - 200 null application/json; charset=utf-8 46.1516ms
2025-11-16 17:31:28.248 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:8080/api/v1/auth/refresh-token - null 0
2025-11-16 17:31:28.248 +03:00 [INF] CORS policy execution successful.
2025-11-16 17:31:28.264 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 17:31:28.264 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication)'
2025-11-16 17:31:28.264 +03:00 [INF] Route matched with {action = "RefreshToken", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.user.AuthResponse] RefreshToken() on controller MappyApplication.Controllers.AuthController (MappyApplication).
2025-11-16 17:31:28.265 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__refreshToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`RefreshToken` = @__refreshToken_0
LIMIT 2
2025-11-16 17:31:28.266 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`FirstName`, `a`.`LastName`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`
FROM `AspNetUsers` AS `a`
WHERE `a`.`Id` = @__p_0
LIMIT 1
2025-11-16 17:31:28.268 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']

        UPDATE TOKENS
        SET Revoked = true, Expired = true
        WHERE UserId = @p0
          AND DeviceId = @p1
          AND Revoked = false
          AND Expired = false
2025-11-16 17:31:28.271 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a0`.`Name`
FROM `AspNetUserRoles` AS `a`
INNER JOIN `AspNetRoles` AS `a0` ON `a`.`RoleId` = `a0`.`Id`
WHERE `a`.`UserId` = @__userId_0
2025-11-16 17:31:28.272 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ClaimType`, `a`.`ClaimValue`, `a`.`UserId`
FROM `AspNetUserClaims` AS `a`
WHERE `a`.`UserId` = @__user_Id_0
2025-11-16 17:31:28.276 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a0`.`Name`
FROM `AspNetUserRoles` AS `a`
INNER JOIN `AspNetRoles` AS `a0` ON `a`.`RoleId` = `a0`.`Id`
WHERE `a`.`UserId` = @__userId_0
2025-11-16 17:31:28.277 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ClaimType`, `a`.`ClaimValue`, `a`.`UserId`
FROM `AspNetUserClaims` AS `a`
WHERE `a`.`UserId` = @__user_Id_0
2025-11-16 17:31:28.279 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (DbType = DateTime), @p2='?' (Size = 4000), @p3='?' (DbType = Boolean), @p4='?' (Size = 4000), @p5='?' (DbType = Boolean), @p6='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO `Tokens` (`AccessToken`, `CreatedAt`, `DeviceId`, `Expired`, `RefreshToken`, `Revoked`, `UserId`)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6);
SELECT `Id`
FROM `Tokens`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();
2025-11-16 17:31:28.280 +03:00 [INF] Added Token MappyApplication.Data.Token
2025-11-16 17:31:28.283 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessFailedCount`, `t`.`ConcurrencyStamp`, `t`.`Email`, `t`.`EmailConfirmed`, `t`.`FirstName`, `t`.`LastName`, `t`.`LockoutEnabled`, `t`.`LockoutEnd`, `t`.`NormalizedEmail`, `t`.`NormalizedUserName`, `t`.`PasswordHash`, `t`.`PhoneNumber`, `t`.`PhoneNumberConfirmed`, `t`.`SecurityStamp`, `t`.`TwoFactorEnabled`, `t`.`UserName`, `w`.`Id`, `w`.`Cadence`, `w`.`CityName`, `w`.`Coords`, `w`.`Date`, `w`.`Distance`, `w`.`Duration`, `w`.`Emoji`, `w`.`Pace`, `w`.`Type`, `w`.`UserId`, `c`.`Id`, `c`.`CityName`, `c`.`Country`, `c`.`Date`, `c`.`Emoji`, `c`.`Lat`, `c`.`Lng`, `c`.`Notes`, `c`.`UserId`
FROM (
    SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`FirstName`, `a`.`LastName`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`
    FROM `AspNetUsers` AS `a`
    WHERE `a`.`Id` = @__user_Id_0
    LIMIT 2
) AS `t`
LEFT JOIN `Workouts` AS `w` ON `t`.`Id` = `w`.`UserId`
LEFT JOIN `Cities` AS `c` ON `t`.`Id` = `c`.`UserId`
ORDER BY `t`.`Id`, `w`.`Id`
2025-11-16 17:31:28.283 +03:00 [INF] Executing ObjectResult, writing value of type 'MappyApplication.Models.user.AuthResponse'.
2025-11-16 17:31:28.284 +03:00 [INF] Executed action MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication) in 19.2614ms
2025-11-16 17:31:28.284 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication)'
2025-11-16 17:31:28.284 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:8080/api/v1/auth/refresh-token - 200 null application/json; charset=utf-8 35.9145ms
2025-11-16 17:31:28.830 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:8080/api/v1/auth/refresh-token - null 0
2025-11-16 17:31:28.831 +03:00 [INF] CORS policy execution successful.
2025-11-16 17:31:28.844 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 17:31:28.845 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication)'
2025-11-16 17:31:28.845 +03:00 [INF] Route matched with {action = "RefreshToken", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.user.AuthResponse] RefreshToken() on controller MappyApplication.Controllers.AuthController (MappyApplication).
2025-11-16 17:31:28.848 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__refreshToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`RefreshToken` = @__refreshToken_0
LIMIT 2
2025-11-16 17:31:28.850 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`FirstName`, `a`.`LastName`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`
FROM `AspNetUsers` AS `a`
WHERE `a`.`Id` = @__p_0
LIMIT 1
2025-11-16 17:31:28.853 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']

        UPDATE TOKENS
        SET Revoked = true, Expired = true
        WHERE UserId = @p0
          AND DeviceId = @p1
          AND Revoked = false
          AND Expired = false
2025-11-16 17:31:28.854 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a0`.`Name`
FROM `AspNetUserRoles` AS `a`
INNER JOIN `AspNetRoles` AS `a0` ON `a`.`RoleId` = `a0`.`Id`
WHERE `a`.`UserId` = @__userId_0
2025-11-16 17:31:28.855 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ClaimType`, `a`.`ClaimValue`, `a`.`UserId`
FROM `AspNetUserClaims` AS `a`
WHERE `a`.`UserId` = @__user_Id_0
2025-11-16 17:31:28.857 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a0`.`Name`
FROM `AspNetUserRoles` AS `a`
INNER JOIN `AspNetRoles` AS `a0` ON `a`.`RoleId` = `a0`.`Id`
WHERE `a`.`UserId` = @__userId_0
2025-11-16 17:31:28.858 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ClaimType`, `a`.`ClaimValue`, `a`.`UserId`
FROM `AspNetUserClaims` AS `a`
WHERE `a`.`UserId` = @__user_Id_0
2025-11-16 17:31:28.860 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (DbType = DateTime), @p2='?' (Size = 4000), @p3='?' (DbType = Boolean), @p4='?' (Size = 4000), @p5='?' (DbType = Boolean), @p6='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO `Tokens` (`AccessToken`, `CreatedAt`, `DeviceId`, `Expired`, `RefreshToken`, `Revoked`, `UserId`)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6);
SELECT `Id`
FROM `Tokens`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();
2025-11-16 17:31:28.860 +03:00 [INF] Added Token MappyApplication.Data.Token
2025-11-16 17:31:28.862 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessFailedCount`, `t`.`ConcurrencyStamp`, `t`.`Email`, `t`.`EmailConfirmed`, `t`.`FirstName`, `t`.`LastName`, `t`.`LockoutEnabled`, `t`.`LockoutEnd`, `t`.`NormalizedEmail`, `t`.`NormalizedUserName`, `t`.`PasswordHash`, `t`.`PhoneNumber`, `t`.`PhoneNumberConfirmed`, `t`.`SecurityStamp`, `t`.`TwoFactorEnabled`, `t`.`UserName`, `w`.`Id`, `w`.`Cadence`, `w`.`CityName`, `w`.`Coords`, `w`.`Date`, `w`.`Distance`, `w`.`Duration`, `w`.`Emoji`, `w`.`Pace`, `w`.`Type`, `w`.`UserId`, `c`.`Id`, `c`.`CityName`, `c`.`Country`, `c`.`Date`, `c`.`Emoji`, `c`.`Lat`, `c`.`Lng`, `c`.`Notes`, `c`.`UserId`
FROM (
    SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`FirstName`, `a`.`LastName`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`
    FROM `AspNetUsers` AS `a`
    WHERE `a`.`Id` = @__user_Id_0
    LIMIT 2
) AS `t`
LEFT JOIN `Workouts` AS `w` ON `t`.`Id` = `w`.`UserId`
LEFT JOIN `Cities` AS `c` ON `t`.`Id` = `c`.`UserId`
ORDER BY `t`.`Id`, `w`.`Id`
2025-11-16 17:31:28.862 +03:00 [INF] Executing ObjectResult, writing value of type 'MappyApplication.Models.user.AuthResponse'.
2025-11-16 17:31:28.862 +03:00 [INF] Executed action MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication) in 16.609ms
2025-11-16 17:31:28.862 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication)'
2025-11-16 17:31:28.862 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:8080/api/v1/auth/refresh-token - 200 null application/json; charset=utf-8 32.0935ms
2025-11-16 17:31:29.400 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:8080/api/v1/auth/refresh-token - null 0
2025-11-16 17:31:29.401 +03:00 [INF] CORS policy execution successful.
2025-11-16 17:31:29.414 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 17:31:29.414 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication)'
2025-11-16 17:31:29.414 +03:00 [INF] Route matched with {action = "RefreshToken", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.user.AuthResponse] RefreshToken() on controller MappyApplication.Controllers.AuthController (MappyApplication).
2025-11-16 17:31:29.415 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__refreshToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`RefreshToken` = @__refreshToken_0
LIMIT 2
2025-11-16 17:31:29.416 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`FirstName`, `a`.`LastName`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`
FROM `AspNetUsers` AS `a`
WHERE `a`.`Id` = @__p_0
LIMIT 1
2025-11-16 17:31:29.420 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']

        UPDATE TOKENS
        SET Revoked = true, Expired = true
        WHERE UserId = @p0
          AND DeviceId = @p1
          AND Revoked = false
          AND Expired = false
2025-11-16 17:31:29.422 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a0`.`Name`
FROM `AspNetUserRoles` AS `a`
INNER JOIN `AspNetRoles` AS `a0` ON `a`.`RoleId` = `a0`.`Id`
WHERE `a`.`UserId` = @__userId_0
2025-11-16 17:31:29.423 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ClaimType`, `a`.`ClaimValue`, `a`.`UserId`
FROM `AspNetUserClaims` AS `a`
WHERE `a`.`UserId` = @__user_Id_0
2025-11-16 17:31:29.425 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a0`.`Name`
FROM `AspNetUserRoles` AS `a`
INNER JOIN `AspNetRoles` AS `a0` ON `a`.`RoleId` = `a0`.`Id`
WHERE `a`.`UserId` = @__userId_0
2025-11-16 17:31:29.426 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ClaimType`, `a`.`ClaimValue`, `a`.`UserId`
FROM `AspNetUserClaims` AS `a`
WHERE `a`.`UserId` = @__user_Id_0
2025-11-16 17:31:29.428 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (DbType = DateTime), @p2='?' (Size = 4000), @p3='?' (DbType = Boolean), @p4='?' (Size = 4000), @p5='?' (DbType = Boolean), @p6='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO `Tokens` (`AccessToken`, `CreatedAt`, `DeviceId`, `Expired`, `RefreshToken`, `Revoked`, `UserId`)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6);
SELECT `Id`
FROM `Tokens`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();
2025-11-16 17:31:29.429 +03:00 [INF] Added Token MappyApplication.Data.Token
2025-11-16 17:31:29.430 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessFailedCount`, `t`.`ConcurrencyStamp`, `t`.`Email`, `t`.`EmailConfirmed`, `t`.`FirstName`, `t`.`LastName`, `t`.`LockoutEnabled`, `t`.`LockoutEnd`, `t`.`NormalizedEmail`, `t`.`NormalizedUserName`, `t`.`PasswordHash`, `t`.`PhoneNumber`, `t`.`PhoneNumberConfirmed`, `t`.`SecurityStamp`, `t`.`TwoFactorEnabled`, `t`.`UserName`, `w`.`Id`, `w`.`Cadence`, `w`.`CityName`, `w`.`Coords`, `w`.`Date`, `w`.`Distance`, `w`.`Duration`, `w`.`Emoji`, `w`.`Pace`, `w`.`Type`, `w`.`UserId`, `c`.`Id`, `c`.`CityName`, `c`.`Country`, `c`.`Date`, `c`.`Emoji`, `c`.`Lat`, `c`.`Lng`, `c`.`Notes`, `c`.`UserId`
FROM (
    SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`FirstName`, `a`.`LastName`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`
    FROM `AspNetUsers` AS `a`
    WHERE `a`.`Id` = @__user_Id_0
    LIMIT 2
) AS `t`
LEFT JOIN `Workouts` AS `w` ON `t`.`Id` = `w`.`UserId`
LEFT JOIN `Cities` AS `c` ON `t`.`Id` = `c`.`UserId`
ORDER BY `t`.`Id`, `w`.`Id`
2025-11-16 17:31:29.430 +03:00 [INF] Executing ObjectResult, writing value of type 'MappyApplication.Models.user.AuthResponse'.
2025-11-16 17:31:29.430 +03:00 [INF] Executed action MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication) in 16.2656ms
2025-11-16 17:31:29.430 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication)'
2025-11-16 17:31:29.431 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:8080/api/v1/auth/refresh-token - 200 null application/json; charset=utf-8 30.1489ms
2025-11-16 17:31:29.959 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:8080/api/v1/auth/refresh-token - null 0
2025-11-16 17:31:29.959 +03:00 [INF] CORS policy execution successful.
2025-11-16 17:31:29.972 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 17:31:29.972 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication)'
2025-11-16 17:31:29.972 +03:00 [INF] Route matched with {action = "RefreshToken", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.user.AuthResponse] RefreshToken() on controller MappyApplication.Controllers.AuthController (MappyApplication).
2025-11-16 17:31:29.974 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__refreshToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`RefreshToken` = @__refreshToken_0
LIMIT 2
2025-11-16 17:31:29.975 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`FirstName`, `a`.`LastName`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`
FROM `AspNetUsers` AS `a`
WHERE `a`.`Id` = @__p_0
LIMIT 1
2025-11-16 17:31:29.976 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']

        UPDATE TOKENS
        SET Revoked = true, Expired = true
        WHERE UserId = @p0
          AND DeviceId = @p1
          AND Revoked = false
          AND Expired = false
2025-11-16 17:31:29.980 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a0`.`Name`
FROM `AspNetUserRoles` AS `a`
INNER JOIN `AspNetRoles` AS `a0` ON `a`.`RoleId` = `a0`.`Id`
WHERE `a`.`UserId` = @__userId_0
2025-11-16 17:31:29.982 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ClaimType`, `a`.`ClaimValue`, `a`.`UserId`
FROM `AspNetUserClaims` AS `a`
WHERE `a`.`UserId` = @__user_Id_0
2025-11-16 17:31:29.983 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a0`.`Name`
FROM `AspNetUserRoles` AS `a`
INNER JOIN `AspNetRoles` AS `a0` ON `a`.`RoleId` = `a0`.`Id`
WHERE `a`.`UserId` = @__userId_0
2025-11-16 17:31:29.983 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ClaimType`, `a`.`ClaimValue`, `a`.`UserId`
FROM `AspNetUserClaims` AS `a`
WHERE `a`.`UserId` = @__user_Id_0
2025-11-16 17:31:29.985 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (DbType = DateTime), @p2='?' (Size = 4000), @p3='?' (DbType = Boolean), @p4='?' (Size = 4000), @p5='?' (DbType = Boolean), @p6='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO `Tokens` (`AccessToken`, `CreatedAt`, `DeviceId`, `Expired`, `RefreshToken`, `Revoked`, `UserId`)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6);
SELECT `Id`
FROM `Tokens`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();
2025-11-16 17:31:29.985 +03:00 [INF] Added Token MappyApplication.Data.Token
2025-11-16 17:31:29.987 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessFailedCount`, `t`.`ConcurrencyStamp`, `t`.`Email`, `t`.`EmailConfirmed`, `t`.`FirstName`, `t`.`LastName`, `t`.`LockoutEnabled`, `t`.`LockoutEnd`, `t`.`NormalizedEmail`, `t`.`NormalizedUserName`, `t`.`PasswordHash`, `t`.`PhoneNumber`, `t`.`PhoneNumberConfirmed`, `t`.`SecurityStamp`, `t`.`TwoFactorEnabled`, `t`.`UserName`, `w`.`Id`, `w`.`Cadence`, `w`.`CityName`, `w`.`Coords`, `w`.`Date`, `w`.`Distance`, `w`.`Duration`, `w`.`Emoji`, `w`.`Pace`, `w`.`Type`, `w`.`UserId`, `c`.`Id`, `c`.`CityName`, `c`.`Country`, `c`.`Date`, `c`.`Emoji`, `c`.`Lat`, `c`.`Lng`, `c`.`Notes`, `c`.`UserId`
FROM (
    SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`FirstName`, `a`.`LastName`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`
    FROM `AspNetUsers` AS `a`
    WHERE `a`.`Id` = @__user_Id_0
    LIMIT 2
) AS `t`
LEFT JOIN `Workouts` AS `w` ON `t`.`Id` = `w`.`UserId`
LEFT JOIN `Cities` AS `c` ON `t`.`Id` = `c`.`UserId`
ORDER BY `t`.`Id`, `w`.`Id`
2025-11-16 17:31:29.987 +03:00 [INF] Executing ObjectResult, writing value of type 'MappyApplication.Models.user.AuthResponse'.
2025-11-16 17:31:29.987 +03:00 [INF] Executed action MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication) in 14.5571ms
2025-11-16 17:31:29.987 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication)'
2025-11-16 17:31:29.987 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:8080/api/v1/auth/refresh-token - 200 null application/json; charset=utf-8 27.9546ms
2025-11-16 17:31:30.585 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:8080/api/v1/auth/refresh-token - null 0
2025-11-16 17:31:30.586 +03:00 [INF] CORS policy execution successful.
2025-11-16 17:31:30.602 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 17:31:30.602 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication)'
2025-11-16 17:31:30.602 +03:00 [INF] Route matched with {action = "RefreshToken", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.user.AuthResponse] RefreshToken() on controller MappyApplication.Controllers.AuthController (MappyApplication).
2025-11-16 17:31:30.603 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__refreshToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`RefreshToken` = @__refreshToken_0
LIMIT 2
2025-11-16 17:31:30.604 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`FirstName`, `a`.`LastName`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`
FROM `AspNetUsers` AS `a`
WHERE `a`.`Id` = @__p_0
LIMIT 1
2025-11-16 17:31:30.606 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']

        UPDATE TOKENS
        SET Revoked = true, Expired = true
        WHERE UserId = @p0
          AND DeviceId = @p1
          AND Revoked = false
          AND Expired = false
2025-11-16 17:31:30.607 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a0`.`Name`
FROM `AspNetUserRoles` AS `a`
INNER JOIN `AspNetRoles` AS `a0` ON `a`.`RoleId` = `a0`.`Id`
WHERE `a`.`UserId` = @__userId_0
2025-11-16 17:31:30.608 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ClaimType`, `a`.`ClaimValue`, `a`.`UserId`
FROM `AspNetUserClaims` AS `a`
WHERE `a`.`UserId` = @__user_Id_0
2025-11-16 17:31:30.609 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a0`.`Name`
FROM `AspNetUserRoles` AS `a`
INNER JOIN `AspNetRoles` AS `a0` ON `a`.`RoleId` = `a0`.`Id`
WHERE `a`.`UserId` = @__userId_0
2025-11-16 17:31:30.609 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ClaimType`, `a`.`ClaimValue`, `a`.`UserId`
FROM `AspNetUserClaims` AS `a`
WHERE `a`.`UserId` = @__user_Id_0
2025-11-16 17:31:30.611 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (DbType = DateTime), @p2='?' (Size = 4000), @p3='?' (DbType = Boolean), @p4='?' (Size = 4000), @p5='?' (DbType = Boolean), @p6='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO `Tokens` (`AccessToken`, `CreatedAt`, `DeviceId`, `Expired`, `RefreshToken`, `Revoked`, `UserId`)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6);
SELECT `Id`
FROM `Tokens`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();
2025-11-16 17:31:30.612 +03:00 [INF] Added Token MappyApplication.Data.Token
2025-11-16 17:31:30.613 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessFailedCount`, `t`.`ConcurrencyStamp`, `t`.`Email`, `t`.`EmailConfirmed`, `t`.`FirstName`, `t`.`LastName`, `t`.`LockoutEnabled`, `t`.`LockoutEnd`, `t`.`NormalizedEmail`, `t`.`NormalizedUserName`, `t`.`PasswordHash`, `t`.`PhoneNumber`, `t`.`PhoneNumberConfirmed`, `t`.`SecurityStamp`, `t`.`TwoFactorEnabled`, `t`.`UserName`, `w`.`Id`, `w`.`Cadence`, `w`.`CityName`, `w`.`Coords`, `w`.`Date`, `w`.`Distance`, `w`.`Duration`, `w`.`Emoji`, `w`.`Pace`, `w`.`Type`, `w`.`UserId`, `c`.`Id`, `c`.`CityName`, `c`.`Country`, `c`.`Date`, `c`.`Emoji`, `c`.`Lat`, `c`.`Lng`, `c`.`Notes`, `c`.`UserId`
FROM (
    SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`FirstName`, `a`.`LastName`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`
    FROM `AspNetUsers` AS `a`
    WHERE `a`.`Id` = @__user_Id_0
    LIMIT 2
) AS `t`
LEFT JOIN `Workouts` AS `w` ON `t`.`Id` = `w`.`UserId`
LEFT JOIN `Cities` AS `c` ON `t`.`Id` = `c`.`UserId`
ORDER BY `t`.`Id`, `w`.`Id`
2025-11-16 17:31:30.613 +03:00 [INF] Executing ObjectResult, writing value of type 'MappyApplication.Models.user.AuthResponse'.
2025-11-16 17:31:30.613 +03:00 [INF] Executed action MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication) in 11.2162ms
2025-11-16 17:31:30.613 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication)'
2025-11-16 17:31:30.613 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:8080/api/v1/auth/refresh-token - 200 null application/json; charset=utf-8 27.8361ms
2025-11-16 17:31:34.900 +03:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:8080/api/v1/auth/refresh-token - null null
2025-11-16 17:31:34.901 +03:00 [INF] CORS policy execution successful.
2025-11-16 17:31:34.902 +03:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:8080/api/v1/auth/refresh-token - 204 null null 1.135ms
2025-11-16 17:31:34.903 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:8080/api/v1/auth/refresh-token - null 0
2025-11-16 17:31:34.903 +03:00 [INF] CORS policy execution successful.
2025-11-16 17:31:34.924 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 17:31:34.924 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication)'
2025-11-16 17:31:34.924 +03:00 [INF] Route matched with {action = "RefreshToken", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.user.AuthResponse] RefreshToken() on controller MappyApplication.Controllers.AuthController (MappyApplication).
2025-11-16 17:31:34.925 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__refreshToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`RefreshToken` = @__refreshToken_0
LIMIT 2
2025-11-16 17:31:34.926 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`FirstName`, `a`.`LastName`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`
FROM `AspNetUsers` AS `a`
WHERE `a`.`Id` = @__p_0
LIMIT 1
2025-11-16 17:31:34.927 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']

        UPDATE TOKENS
        SET Revoked = true, Expired = true
        WHERE UserId = @p0
          AND DeviceId = @p1
          AND Revoked = false
          AND Expired = false
2025-11-16 17:31:34.928 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a0`.`Name`
FROM `AspNetUserRoles` AS `a`
INNER JOIN `AspNetRoles` AS `a0` ON `a`.`RoleId` = `a0`.`Id`
WHERE `a`.`UserId` = @__userId_0
2025-11-16 17:31:34.929 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ClaimType`, `a`.`ClaimValue`, `a`.`UserId`
FROM `AspNetUserClaims` AS `a`
WHERE `a`.`UserId` = @__user_Id_0
2025-11-16 17:31:34.930 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a0`.`Name`
FROM `AspNetUserRoles` AS `a`
INNER JOIN `AspNetRoles` AS `a0` ON `a`.`RoleId` = `a0`.`Id`
WHERE `a`.`UserId` = @__userId_0
2025-11-16 17:31:34.930 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ClaimType`, `a`.`ClaimValue`, `a`.`UserId`
FROM `AspNetUserClaims` AS `a`
WHERE `a`.`UserId` = @__user_Id_0
2025-11-16 17:31:34.934 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (DbType = DateTime), @p2='?' (Size = 4000), @p3='?' (DbType = Boolean), @p4='?' (Size = 4000), @p5='?' (DbType = Boolean), @p6='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO `Tokens` (`AccessToken`, `CreatedAt`, `DeviceId`, `Expired`, `RefreshToken`, `Revoked`, `UserId`)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6);
SELECT `Id`
FROM `Tokens`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();
2025-11-16 17:31:34.934 +03:00 [INF] Added Token MappyApplication.Data.Token
2025-11-16 17:31:34.936 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessFailedCount`, `t`.`ConcurrencyStamp`, `t`.`Email`, `t`.`EmailConfirmed`, `t`.`FirstName`, `t`.`LastName`, `t`.`LockoutEnabled`, `t`.`LockoutEnd`, `t`.`NormalizedEmail`, `t`.`NormalizedUserName`, `t`.`PasswordHash`, `t`.`PhoneNumber`, `t`.`PhoneNumberConfirmed`, `t`.`SecurityStamp`, `t`.`TwoFactorEnabled`, `t`.`UserName`, `w`.`Id`, `w`.`Cadence`, `w`.`CityName`, `w`.`Coords`, `w`.`Date`, `w`.`Distance`, `w`.`Duration`, `w`.`Emoji`, `w`.`Pace`, `w`.`Type`, `w`.`UserId`, `c`.`Id`, `c`.`CityName`, `c`.`Country`, `c`.`Date`, `c`.`Emoji`, `c`.`Lat`, `c`.`Lng`, `c`.`Notes`, `c`.`UserId`
FROM (
    SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`FirstName`, `a`.`LastName`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`
    FROM `AspNetUsers` AS `a`
    WHERE `a`.`Id` = @__user_Id_0
    LIMIT 2
) AS `t`
LEFT JOIN `Workouts` AS `w` ON `t`.`Id` = `w`.`UserId`
LEFT JOIN `Cities` AS `c` ON `t`.`Id` = `c`.`UserId`
ORDER BY `t`.`Id`, `w`.`Id`
2025-11-16 17:31:34.936 +03:00 [INF] Executing ObjectResult, writing value of type 'MappyApplication.Models.user.AuthResponse'.
2025-11-16 17:31:34.936 +03:00 [INF] Executed action MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication) in 11.979ms
2025-11-16 17:31:34.936 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication)'
2025-11-16 17:31:34.936 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:8080/api/v1/auth/refresh-token - 200 null application/json; charset=utf-8 33.3021ms
2025-11-16 17:31:35.879 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:8080/api/v1/auth/refresh-token - null 0
2025-11-16 17:31:35.879 +03:00 [INF] CORS policy execution successful.
2025-11-16 17:31:35.892 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 17:31:35.893 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication)'
2025-11-16 17:31:35.893 +03:00 [INF] Route matched with {action = "RefreshToken", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.user.AuthResponse] RefreshToken() on controller MappyApplication.Controllers.AuthController (MappyApplication).
2025-11-16 17:31:35.894 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__refreshToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`RefreshToken` = @__refreshToken_0
LIMIT 2
2025-11-16 17:31:35.895 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`FirstName`, `a`.`LastName`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`
FROM `AspNetUsers` AS `a`
WHERE `a`.`Id` = @__p_0
LIMIT 1
2025-11-16 17:31:35.901 +03:00 [INF] Executed DbCommand (5ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']

        UPDATE TOKENS
        SET Revoked = true, Expired = true
        WHERE UserId = @p0
          AND DeviceId = @p1
          AND Revoked = false
          AND Expired = false
2025-11-16 17:31:35.903 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a0`.`Name`
FROM `AspNetUserRoles` AS `a`
INNER JOIN `AspNetRoles` AS `a0` ON `a`.`RoleId` = `a0`.`Id`
WHERE `a`.`UserId` = @__userId_0
2025-11-16 17:31:35.905 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ClaimType`, `a`.`ClaimValue`, `a`.`UserId`
FROM `AspNetUserClaims` AS `a`
WHERE `a`.`UserId` = @__user_Id_0
2025-11-16 17:31:35.907 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a0`.`Name`
FROM `AspNetUserRoles` AS `a`
INNER JOIN `AspNetRoles` AS `a0` ON `a`.`RoleId` = `a0`.`Id`
WHERE `a`.`UserId` = @__userId_0
2025-11-16 17:31:35.907 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ClaimType`, `a`.`ClaimValue`, `a`.`UserId`
FROM `AspNetUserClaims` AS `a`
WHERE `a`.`UserId` = @__user_Id_0
2025-11-16 17:31:35.909 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (DbType = DateTime), @p2='?' (Size = 4000), @p3='?' (DbType = Boolean), @p4='?' (Size = 4000), @p5='?' (DbType = Boolean), @p6='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO `Tokens` (`AccessToken`, `CreatedAt`, `DeviceId`, `Expired`, `RefreshToken`, `Revoked`, `UserId`)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6);
SELECT `Id`
FROM `Tokens`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();
2025-11-16 17:31:35.910 +03:00 [INF] Added Token MappyApplication.Data.Token
2025-11-16 17:31:35.911 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessFailedCount`, `t`.`ConcurrencyStamp`, `t`.`Email`, `t`.`EmailConfirmed`, `t`.`FirstName`, `t`.`LastName`, `t`.`LockoutEnabled`, `t`.`LockoutEnd`, `t`.`NormalizedEmail`, `t`.`NormalizedUserName`, `t`.`PasswordHash`, `t`.`PhoneNumber`, `t`.`PhoneNumberConfirmed`, `t`.`SecurityStamp`, `t`.`TwoFactorEnabled`, `t`.`UserName`, `w`.`Id`, `w`.`Cadence`, `w`.`CityName`, `w`.`Coords`, `w`.`Date`, `w`.`Distance`, `w`.`Duration`, `w`.`Emoji`, `w`.`Pace`, `w`.`Type`, `w`.`UserId`, `c`.`Id`, `c`.`CityName`, `c`.`Country`, `c`.`Date`, `c`.`Emoji`, `c`.`Lat`, `c`.`Lng`, `c`.`Notes`, `c`.`UserId`
FROM (
    SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`FirstName`, `a`.`LastName`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`
    FROM `AspNetUsers` AS `a`
    WHERE `a`.`Id` = @__user_Id_0
    LIMIT 2
) AS `t`
LEFT JOIN `Workouts` AS `w` ON `t`.`Id` = `w`.`UserId`
LEFT JOIN `Cities` AS `c` ON `t`.`Id` = `c`.`UserId`
ORDER BY `t`.`Id`, `w`.`Id`
2025-11-16 17:31:35.911 +03:00 [INF] Executing ObjectResult, writing value of type 'MappyApplication.Models.user.AuthResponse'.
2025-11-16 17:31:35.911 +03:00 [INF] Executed action MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication) in 18.5842ms
2025-11-16 17:31:35.911 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication)'
2025-11-16 17:31:35.911 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:8080/api/v1/auth/refresh-token - 200 null application/json; charset=utf-8 32.2322ms
2025-11-16 17:31:36.641 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:8080/api/v1/auth/refresh-token - null 0
2025-11-16 17:31:36.642 +03:00 [INF] CORS policy execution successful.
2025-11-16 17:31:36.655 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 17:31:36.655 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication)'
2025-11-16 17:31:36.655 +03:00 [INF] Route matched with {action = "RefreshToken", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.user.AuthResponse] RefreshToken() on controller MappyApplication.Controllers.AuthController (MappyApplication).
2025-11-16 17:31:36.656 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__refreshToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`RefreshToken` = @__refreshToken_0
LIMIT 2
2025-11-16 17:31:36.657 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`FirstName`, `a`.`LastName`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`
FROM `AspNetUsers` AS `a`
WHERE `a`.`Id` = @__p_0
LIMIT 1
2025-11-16 17:31:36.659 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']

        UPDATE TOKENS
        SET Revoked = true, Expired = true
        WHERE UserId = @p0
          AND DeviceId = @p1
          AND Revoked = false
          AND Expired = false
2025-11-16 17:31:36.661 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a0`.`Name`
FROM `AspNetUserRoles` AS `a`
INNER JOIN `AspNetRoles` AS `a0` ON `a`.`RoleId` = `a0`.`Id`
WHERE `a`.`UserId` = @__userId_0
2025-11-16 17:31:36.663 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ClaimType`, `a`.`ClaimValue`, `a`.`UserId`
FROM `AspNetUserClaims` AS `a`
WHERE `a`.`UserId` = @__user_Id_0
2025-11-16 17:31:36.665 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a0`.`Name`
FROM `AspNetUserRoles` AS `a`
INNER JOIN `AspNetRoles` AS `a0` ON `a`.`RoleId` = `a0`.`Id`
WHERE `a`.`UserId` = @__userId_0
2025-11-16 17:31:36.665 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ClaimType`, `a`.`ClaimValue`, `a`.`UserId`
FROM `AspNetUserClaims` AS `a`
WHERE `a`.`UserId` = @__user_Id_0
2025-11-16 17:31:36.667 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (DbType = DateTime), @p2='?' (Size = 4000), @p3='?' (DbType = Boolean), @p4='?' (Size = 4000), @p5='?' (DbType = Boolean), @p6='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO `Tokens` (`AccessToken`, `CreatedAt`, `DeviceId`, `Expired`, `RefreshToken`, `Revoked`, `UserId`)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6);
SELECT `Id`
FROM `Tokens`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();
2025-11-16 17:31:36.668 +03:00 [INF] Added Token MappyApplication.Data.Token
2025-11-16 17:31:36.669 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessFailedCount`, `t`.`ConcurrencyStamp`, `t`.`Email`, `t`.`EmailConfirmed`, `t`.`FirstName`, `t`.`LastName`, `t`.`LockoutEnabled`, `t`.`LockoutEnd`, `t`.`NormalizedEmail`, `t`.`NormalizedUserName`, `t`.`PasswordHash`, `t`.`PhoneNumber`, `t`.`PhoneNumberConfirmed`, `t`.`SecurityStamp`, `t`.`TwoFactorEnabled`, `t`.`UserName`, `w`.`Id`, `w`.`Cadence`, `w`.`CityName`, `w`.`Coords`, `w`.`Date`, `w`.`Distance`, `w`.`Duration`, `w`.`Emoji`, `w`.`Pace`, `w`.`Type`, `w`.`UserId`, `c`.`Id`, `c`.`CityName`, `c`.`Country`, `c`.`Date`, `c`.`Emoji`, `c`.`Lat`, `c`.`Lng`, `c`.`Notes`, `c`.`UserId`
FROM (
    SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`FirstName`, `a`.`LastName`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`
    FROM `AspNetUsers` AS `a`
    WHERE `a`.`Id` = @__user_Id_0
    LIMIT 2
) AS `t`
LEFT JOIN `Workouts` AS `w` ON `t`.`Id` = `w`.`UserId`
LEFT JOIN `Cities` AS `c` ON `t`.`Id` = `c`.`UserId`
ORDER BY `t`.`Id`, `w`.`Id`
2025-11-16 17:31:36.669 +03:00 [INF] Executing ObjectResult, writing value of type 'MappyApplication.Models.user.AuthResponse'.
2025-11-16 17:31:36.669 +03:00 [INF] Executed action MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication) in 13.8354ms
2025-11-16 17:31:36.669 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication)'
2025-11-16 17:31:36.669 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:8080/api/v1/auth/refresh-token - 200 null application/json; charset=utf-8 27.4815ms
2025-11-16 17:32:17.330 +03:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:8080/api/v1/auth/refresh-token - null null
2025-11-16 17:32:17.333 +03:00 [INF] CORS policy execution successful.
2025-11-16 17:32:17.333 +03:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:8080/api/v1/auth/refresh-token - 204 null null 2.7688ms
2025-11-16 17:32:17.334 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:8080/api/v1/auth/refresh-token - null 0
2025-11-16 17:32:17.334 +03:00 [INF] CORS policy execution successful.
2025-11-16 17:32:17.364 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 17:32:17.364 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication)'
2025-11-16 17:32:17.365 +03:00 [INF] Route matched with {action = "RefreshToken", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.user.AuthResponse] RefreshToken() on controller MappyApplication.Controllers.AuthController (MappyApplication).
2025-11-16 17:32:17.366 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__refreshToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`RefreshToken` = @__refreshToken_0
LIMIT 2
2025-11-16 17:32:17.368 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`FirstName`, `a`.`LastName`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`
FROM `AspNetUsers` AS `a`
WHERE `a`.`Id` = @__p_0
LIMIT 1
2025-11-16 17:32:17.372 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']

        UPDATE TOKENS
        SET Revoked = true, Expired = true
        WHERE UserId = @p0
          AND DeviceId = @p1
          AND Revoked = false
          AND Expired = false
2025-11-16 17:32:17.373 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a0`.`Name`
FROM `AspNetUserRoles` AS `a`
INNER JOIN `AspNetRoles` AS `a0` ON `a`.`RoleId` = `a0`.`Id`
WHERE `a`.`UserId` = @__userId_0
2025-11-16 17:32:17.373 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ClaimType`, `a`.`ClaimValue`, `a`.`UserId`
FROM `AspNetUserClaims` AS `a`
WHERE `a`.`UserId` = @__user_Id_0
2025-11-16 17:32:17.375 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a0`.`Name`
FROM `AspNetUserRoles` AS `a`
INNER JOIN `AspNetRoles` AS `a0` ON `a`.`RoleId` = `a0`.`Id`
WHERE `a`.`UserId` = @__userId_0
2025-11-16 17:32:17.376 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ClaimType`, `a`.`ClaimValue`, `a`.`UserId`
FROM `AspNetUserClaims` AS `a`
WHERE `a`.`UserId` = @__user_Id_0
2025-11-16 17:32:17.380 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (DbType = DateTime), @p2='?' (Size = 4000), @p3='?' (DbType = Boolean), @p4='?' (Size = 4000), @p5='?' (DbType = Boolean), @p6='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO `Tokens` (`AccessToken`, `CreatedAt`, `DeviceId`, `Expired`, `RefreshToken`, `Revoked`, `UserId`)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6);
SELECT `Id`
FROM `Tokens`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();
2025-11-16 17:32:17.381 +03:00 [INF] Added Token MappyApplication.Data.Token
2025-11-16 17:32:17.382 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessFailedCount`, `t`.`ConcurrencyStamp`, `t`.`Email`, `t`.`EmailConfirmed`, `t`.`FirstName`, `t`.`LastName`, `t`.`LockoutEnabled`, `t`.`LockoutEnd`, `t`.`NormalizedEmail`, `t`.`NormalizedUserName`, `t`.`PasswordHash`, `t`.`PhoneNumber`, `t`.`PhoneNumberConfirmed`, `t`.`SecurityStamp`, `t`.`TwoFactorEnabled`, `t`.`UserName`, `w`.`Id`, `w`.`Cadence`, `w`.`CityName`, `w`.`Coords`, `w`.`Date`, `w`.`Distance`, `w`.`Duration`, `w`.`Emoji`, `w`.`Pace`, `w`.`Type`, `w`.`UserId`, `c`.`Id`, `c`.`CityName`, `c`.`Country`, `c`.`Date`, `c`.`Emoji`, `c`.`Lat`, `c`.`Lng`, `c`.`Notes`, `c`.`UserId`
FROM (
    SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`FirstName`, `a`.`LastName`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`
    FROM `AspNetUsers` AS `a`
    WHERE `a`.`Id` = @__user_Id_0
    LIMIT 2
) AS `t`
LEFT JOIN `Workouts` AS `w` ON `t`.`Id` = `w`.`UserId`
LEFT JOIN `Cities` AS `c` ON `t`.`Id` = `c`.`UserId`
ORDER BY `t`.`Id`, `w`.`Id`
2025-11-16 17:32:17.382 +03:00 [INF] Executing ObjectResult, writing value of type 'MappyApplication.Models.user.AuthResponse'.
2025-11-16 17:32:17.382 +03:00 [INF] Executed action MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication) in 17.5332ms
2025-11-16 17:32:17.382 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication)'
2025-11-16 17:32:17.382 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:8080/api/v1/auth/refresh-token - 200 null application/json; charset=utf-8 48.0083ms
2025-11-16 17:32:18.140 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:8080/api/v1/auth/refresh-token - null 0
2025-11-16 17:32:18.140 +03:00 [INF] CORS policy execution successful.
2025-11-16 17:32:18.163 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 17:32:18.164 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication)'
2025-11-16 17:32:18.164 +03:00 [INF] Route matched with {action = "RefreshToken", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.user.AuthResponse] RefreshToken() on controller MappyApplication.Controllers.AuthController (MappyApplication).
2025-11-16 17:32:18.166 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__refreshToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`RefreshToken` = @__refreshToken_0
LIMIT 2
2025-11-16 17:32:18.166 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`FirstName`, `a`.`LastName`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`
FROM `AspNetUsers` AS `a`
WHERE `a`.`Id` = @__p_0
LIMIT 1
2025-11-16 17:32:18.168 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']

        UPDATE TOKENS
        SET Revoked = true, Expired = true
        WHERE UserId = @p0
          AND DeviceId = @p1
          AND Revoked = false
          AND Expired = false
2025-11-16 17:32:18.170 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a0`.`Name`
FROM `AspNetUserRoles` AS `a`
INNER JOIN `AspNetRoles` AS `a0` ON `a`.`RoleId` = `a0`.`Id`
WHERE `a`.`UserId` = @__userId_0
2025-11-16 17:32:18.170 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ClaimType`, `a`.`ClaimValue`, `a`.`UserId`
FROM `AspNetUserClaims` AS `a`
WHERE `a`.`UserId` = @__user_Id_0
2025-11-16 17:32:18.171 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a0`.`Name`
FROM `AspNetUserRoles` AS `a`
INNER JOIN `AspNetRoles` AS `a0` ON `a`.`RoleId` = `a0`.`Id`
WHERE `a`.`UserId` = @__userId_0
2025-11-16 17:32:18.172 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ClaimType`, `a`.`ClaimValue`, `a`.`UserId`
FROM `AspNetUserClaims` AS `a`
WHERE `a`.`UserId` = @__user_Id_0
2025-11-16 17:32:18.173 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (DbType = DateTime), @p2='?' (Size = 4000), @p3='?' (DbType = Boolean), @p4='?' (Size = 4000), @p5='?' (DbType = Boolean), @p6='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO `Tokens` (`AccessToken`, `CreatedAt`, `DeviceId`, `Expired`, `RefreshToken`, `Revoked`, `UserId`)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6);
SELECT `Id`
FROM `Tokens`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();
2025-11-16 17:32:18.173 +03:00 [INF] Added Token MappyApplication.Data.Token
2025-11-16 17:32:18.174 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessFailedCount`, `t`.`ConcurrencyStamp`, `t`.`Email`, `t`.`EmailConfirmed`, `t`.`FirstName`, `t`.`LastName`, `t`.`LockoutEnabled`, `t`.`LockoutEnd`, `t`.`NormalizedEmail`, `t`.`NormalizedUserName`, `t`.`PasswordHash`, `t`.`PhoneNumber`, `t`.`PhoneNumberConfirmed`, `t`.`SecurityStamp`, `t`.`TwoFactorEnabled`, `t`.`UserName`, `w`.`Id`, `w`.`Cadence`, `w`.`CityName`, `w`.`Coords`, `w`.`Date`, `w`.`Distance`, `w`.`Duration`, `w`.`Emoji`, `w`.`Pace`, `w`.`Type`, `w`.`UserId`, `c`.`Id`, `c`.`CityName`, `c`.`Country`, `c`.`Date`, `c`.`Emoji`, `c`.`Lat`, `c`.`Lng`, `c`.`Notes`, `c`.`UserId`
FROM (
    SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`FirstName`, `a`.`LastName`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`
    FROM `AspNetUsers` AS `a`
    WHERE `a`.`Id` = @__user_Id_0
    LIMIT 2
) AS `t`
LEFT JOIN `Workouts` AS `w` ON `t`.`Id` = `w`.`UserId`
LEFT JOIN `Cities` AS `c` ON `t`.`Id` = `c`.`UserId`
ORDER BY `t`.`Id`, `w`.`Id`
2025-11-16 17:32:18.174 +03:00 [INF] Executing ObjectResult, writing value of type 'MappyApplication.Models.user.AuthResponse'.
2025-11-16 17:32:18.174 +03:00 [INF] Executed action MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication) in 10.0663ms
2025-11-16 17:32:18.174 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication)'
2025-11-16 17:32:18.174 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:8080/api/v1/auth/refresh-token - 200 null application/json; charset=utf-8 34.8119ms
2025-11-16 17:32:31.482 +03:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:8080/api/v1/auth/refresh-token - null null
2025-11-16 17:32:31.484 +03:00 [INF] CORS policy execution successful.
2025-11-16 17:32:31.484 +03:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:8080/api/v1/auth/refresh-token - 204 null null 2.3612ms
2025-11-16 17:32:31.485 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:8080/api/v1/auth/refresh-token - null 0
2025-11-16 17:32:31.485 +03:00 [INF] CORS policy execution successful.
2025-11-16 17:32:31.513 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 17:32:31.513 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication)'
2025-11-16 17:32:31.514 +03:00 [INF] Route matched with {action = "RefreshToken", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.user.AuthResponse] RefreshToken() on controller MappyApplication.Controllers.AuthController (MappyApplication).
2025-11-16 17:32:31.516 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__refreshToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`RefreshToken` = @__refreshToken_0
LIMIT 2
2025-11-16 17:32:31.519 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`FirstName`, `a`.`LastName`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`
FROM `AspNetUsers` AS `a`
WHERE `a`.`Id` = @__p_0
LIMIT 1
2025-11-16 17:32:31.522 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']

        UPDATE TOKENS
        SET Revoked = true, Expired = true
        WHERE UserId = @p0
          AND DeviceId = @p1
          AND Revoked = false
          AND Expired = false
2025-11-16 17:32:31.525 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a0`.`Name`
FROM `AspNetUserRoles` AS `a`
INNER JOIN `AspNetRoles` AS `a0` ON `a`.`RoleId` = `a0`.`Id`
WHERE `a`.`UserId` = @__userId_0
2025-11-16 17:32:31.525 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ClaimType`, `a`.`ClaimValue`, `a`.`UserId`
FROM `AspNetUserClaims` AS `a`
WHERE `a`.`UserId` = @__user_Id_0
2025-11-16 17:32:31.527 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a0`.`Name`
FROM `AspNetUserRoles` AS `a`
INNER JOIN `AspNetRoles` AS `a0` ON `a`.`RoleId` = `a0`.`Id`
WHERE `a`.`UserId` = @__userId_0
2025-11-16 17:32:31.528 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ClaimType`, `a`.`ClaimValue`, `a`.`UserId`
FROM `AspNetUserClaims` AS `a`
WHERE `a`.`UserId` = @__user_Id_0
2025-11-16 17:32:31.531 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (DbType = DateTime), @p2='?' (Size = 4000), @p3='?' (DbType = Boolean), @p4='?' (Size = 4000), @p5='?' (DbType = Boolean), @p6='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO `Tokens` (`AccessToken`, `CreatedAt`, `DeviceId`, `Expired`, `RefreshToken`, `Revoked`, `UserId`)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6);
SELECT `Id`
FROM `Tokens`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();
2025-11-16 17:32:31.532 +03:00 [INF] Added Token MappyApplication.Data.Token
2025-11-16 17:32:31.534 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessFailedCount`, `t`.`ConcurrencyStamp`, `t`.`Email`, `t`.`EmailConfirmed`, `t`.`FirstName`, `t`.`LastName`, `t`.`LockoutEnabled`, `t`.`LockoutEnd`, `t`.`NormalizedEmail`, `t`.`NormalizedUserName`, `t`.`PasswordHash`, `t`.`PhoneNumber`, `t`.`PhoneNumberConfirmed`, `t`.`SecurityStamp`, `t`.`TwoFactorEnabled`, `t`.`UserName`, `w`.`Id`, `w`.`Cadence`, `w`.`CityName`, `w`.`Coords`, `w`.`Date`, `w`.`Distance`, `w`.`Duration`, `w`.`Emoji`, `w`.`Pace`, `w`.`Type`, `w`.`UserId`, `c`.`Id`, `c`.`CityName`, `c`.`Country`, `c`.`Date`, `c`.`Emoji`, `c`.`Lat`, `c`.`Lng`, `c`.`Notes`, `c`.`UserId`
FROM (
    SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`FirstName`, `a`.`LastName`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`
    FROM `AspNetUsers` AS `a`
    WHERE `a`.`Id` = @__user_Id_0
    LIMIT 2
) AS `t`
LEFT JOIN `Workouts` AS `w` ON `t`.`Id` = `w`.`UserId`
LEFT JOIN `Cities` AS `c` ON `t`.`Id` = `c`.`UserId`
ORDER BY `t`.`Id`, `w`.`Id`
2025-11-16 17:32:31.534 +03:00 [INF] Executing ObjectResult, writing value of type 'MappyApplication.Models.user.AuthResponse'.
2025-11-16 17:32:31.535 +03:00 [INF] Executed action MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication) in 20.9587ms
2025-11-16 17:32:31.535 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication)'
2025-11-16 17:32:31.535 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:8080/api/v1/auth/refresh-token - 200 null application/json; charset=utf-8 49.2499ms
2025-11-16 17:32:32.258 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:8080/api/v1/auth/refresh-token - null 0
2025-11-16 17:32:32.259 +03:00 [INF] CORS policy execution successful.
2025-11-16 17:32:32.272 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 17:32:32.272 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication)'
2025-11-16 17:32:32.273 +03:00 [INF] Route matched with {action = "RefreshToken", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.user.AuthResponse] RefreshToken() on controller MappyApplication.Controllers.AuthController (MappyApplication).
2025-11-16 17:32:32.274 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__refreshToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`RefreshToken` = @__refreshToken_0
LIMIT 2
2025-11-16 17:32:32.274 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`FirstName`, `a`.`LastName`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`
FROM `AspNetUsers` AS `a`
WHERE `a`.`Id` = @__p_0
LIMIT 1
2025-11-16 17:32:32.277 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']

        UPDATE TOKENS
        SET Revoked = true, Expired = true
        WHERE UserId = @p0
          AND DeviceId = @p1
          AND Revoked = false
          AND Expired = false
2025-11-16 17:32:32.279 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a0`.`Name`
FROM `AspNetUserRoles` AS `a`
INNER JOIN `AspNetRoles` AS `a0` ON `a`.`RoleId` = `a0`.`Id`
WHERE `a`.`UserId` = @__userId_0
2025-11-16 17:32:32.280 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ClaimType`, `a`.`ClaimValue`, `a`.`UserId`
FROM `AspNetUserClaims` AS `a`
WHERE `a`.`UserId` = @__user_Id_0
2025-11-16 17:32:32.281 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a0`.`Name`
FROM `AspNetUserRoles` AS `a`
INNER JOIN `AspNetRoles` AS `a0` ON `a`.`RoleId` = `a0`.`Id`
WHERE `a`.`UserId` = @__userId_0
2025-11-16 17:32:32.281 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ClaimType`, `a`.`ClaimValue`, `a`.`UserId`
FROM `AspNetUserClaims` AS `a`
WHERE `a`.`UserId` = @__user_Id_0
2025-11-16 17:32:32.284 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (DbType = DateTime), @p2='?' (Size = 4000), @p3='?' (DbType = Boolean), @p4='?' (Size = 4000), @p5='?' (DbType = Boolean), @p6='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO `Tokens` (`AccessToken`, `CreatedAt`, `DeviceId`, `Expired`, `RefreshToken`, `Revoked`, `UserId`)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6);
SELECT `Id`
FROM `Tokens`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();
2025-11-16 17:32:32.285 +03:00 [INF] Added Token MappyApplication.Data.Token
2025-11-16 17:32:32.286 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessFailedCount`, `t`.`ConcurrencyStamp`, `t`.`Email`, `t`.`EmailConfirmed`, `t`.`FirstName`, `t`.`LastName`, `t`.`LockoutEnabled`, `t`.`LockoutEnd`, `t`.`NormalizedEmail`, `t`.`NormalizedUserName`, `t`.`PasswordHash`, `t`.`PhoneNumber`, `t`.`PhoneNumberConfirmed`, `t`.`SecurityStamp`, `t`.`TwoFactorEnabled`, `t`.`UserName`, `w`.`Id`, `w`.`Cadence`, `w`.`CityName`, `w`.`Coords`, `w`.`Date`, `w`.`Distance`, `w`.`Duration`, `w`.`Emoji`, `w`.`Pace`, `w`.`Type`, `w`.`UserId`, `c`.`Id`, `c`.`CityName`, `c`.`Country`, `c`.`Date`, `c`.`Emoji`, `c`.`Lat`, `c`.`Lng`, `c`.`Notes`, `c`.`UserId`
FROM (
    SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`FirstName`, `a`.`LastName`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`
    FROM `AspNetUsers` AS `a`
    WHERE `a`.`Id` = @__user_Id_0
    LIMIT 2
) AS `t`
LEFT JOIN `Workouts` AS `w` ON `t`.`Id` = `w`.`UserId`
LEFT JOIN `Cities` AS `c` ON `t`.`Id` = `c`.`UserId`
ORDER BY `t`.`Id`, `w`.`Id`
2025-11-16 17:32:32.286 +03:00 [INF] Executing ObjectResult, writing value of type 'MappyApplication.Models.user.AuthResponse'.
2025-11-16 17:32:32.287 +03:00 [INF] Executed action MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication) in 13.9028ms
2025-11-16 17:32:32.287 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication)'
2025-11-16 17:32:32.287 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:8080/api/v1/auth/refresh-token - 200 null application/json; charset=utf-8 28.2649ms
2025-11-16 17:33:28.120 +03:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:8080/api/v1/auth/refresh-token - null null
2025-11-16 17:33:28.126 +03:00 [INF] CORS policy execution successful.
2025-11-16 17:33:28.127 +03:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:8080/api/v1/auth/refresh-token - 204 null null 8.2948ms
2025-11-16 17:33:28.127 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:8080/api/v1/auth/refresh-token - null 0
2025-11-16 17:33:28.127 +03:00 [INF] CORS policy execution successful.
2025-11-16 17:33:28.179 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 17:33:28.180 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication)'
2025-11-16 17:33:28.180 +03:00 [INF] Route matched with {action = "RefreshToken", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.user.AuthResponse] RefreshToken() on controller MappyApplication.Controllers.AuthController (MappyApplication).
2025-11-16 17:33:28.181 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__refreshToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`RefreshToken` = @__refreshToken_0
LIMIT 2
2025-11-16 17:33:28.183 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`FirstName`, `a`.`LastName`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`
FROM `AspNetUsers` AS `a`
WHERE `a`.`Id` = @__p_0
LIMIT 1
2025-11-16 17:33:28.186 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']

        UPDATE TOKENS
        SET Revoked = true, Expired = true
        WHERE UserId = @p0
          AND DeviceId = @p1
          AND Revoked = false
          AND Expired = false
2025-11-16 17:33:28.187 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a0`.`Name`
FROM `AspNetUserRoles` AS `a`
INNER JOIN `AspNetRoles` AS `a0` ON `a`.`RoleId` = `a0`.`Id`
WHERE `a`.`UserId` = @__userId_0
2025-11-16 17:33:28.188 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ClaimType`, `a`.`ClaimValue`, `a`.`UserId`
FROM `AspNetUserClaims` AS `a`
WHERE `a`.`UserId` = @__user_Id_0
2025-11-16 17:33:28.189 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a0`.`Name`
FROM `AspNetUserRoles` AS `a`
INNER JOIN `AspNetRoles` AS `a0` ON `a`.`RoleId` = `a0`.`Id`
WHERE `a`.`UserId` = @__userId_0
2025-11-16 17:33:28.189 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ClaimType`, `a`.`ClaimValue`, `a`.`UserId`
FROM `AspNetUserClaims` AS `a`
WHERE `a`.`UserId` = @__user_Id_0
2025-11-16 17:33:28.191 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (DbType = DateTime), @p2='?' (Size = 4000), @p3='?' (DbType = Boolean), @p4='?' (Size = 4000), @p5='?' (DbType = Boolean), @p6='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO `Tokens` (`AccessToken`, `CreatedAt`, `DeviceId`, `Expired`, `RefreshToken`, `Revoked`, `UserId`)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6);
SELECT `Id`
FROM `Tokens`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();
2025-11-16 17:33:28.192 +03:00 [INF] Added Token MappyApplication.Data.Token
2025-11-16 17:33:28.194 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessFailedCount`, `t`.`ConcurrencyStamp`, `t`.`Email`, `t`.`EmailConfirmed`, `t`.`FirstName`, `t`.`LastName`, `t`.`LockoutEnabled`, `t`.`LockoutEnd`, `t`.`NormalizedEmail`, `t`.`NormalizedUserName`, `t`.`PasswordHash`, `t`.`PhoneNumber`, `t`.`PhoneNumberConfirmed`, `t`.`SecurityStamp`, `t`.`TwoFactorEnabled`, `t`.`UserName`, `w`.`Id`, `w`.`Cadence`, `w`.`CityName`, `w`.`Coords`, `w`.`Date`, `w`.`Distance`, `w`.`Duration`, `w`.`Emoji`, `w`.`Pace`, `w`.`Type`, `w`.`UserId`, `c`.`Id`, `c`.`CityName`, `c`.`Country`, `c`.`Date`, `c`.`Emoji`, `c`.`Lat`, `c`.`Lng`, `c`.`Notes`, `c`.`UserId`
FROM (
    SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`FirstName`, `a`.`LastName`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`
    FROM `AspNetUsers` AS `a`
    WHERE `a`.`Id` = @__user_Id_0
    LIMIT 2
) AS `t`
LEFT JOIN `Workouts` AS `w` ON `t`.`Id` = `w`.`UserId`
LEFT JOIN `Cities` AS `c` ON `t`.`Id` = `c`.`UserId`
ORDER BY `t`.`Id`, `w`.`Id`
2025-11-16 17:33:28.195 +03:00 [INF] Executing ObjectResult, writing value of type 'MappyApplication.Models.user.AuthResponse'.
2025-11-16 17:33:28.195 +03:00 [INF] Executed action MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication) in 14.7497ms
2025-11-16 17:33:28.195 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication)'
2025-11-16 17:33:28.195 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:8080/api/v1/auth/refresh-token - 200 null application/json; charset=utf-8 67.4456ms
2025-11-16 17:33:30.757 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:8080/api/v1/auth/refresh-token - null 0
2025-11-16 17:33:30.760 +03:00 [INF] CORS policy execution successful.
2025-11-16 17:33:30.792 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 17:33:30.793 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication)'
2025-11-16 17:33:30.793 +03:00 [INF] Route matched with {action = "RefreshToken", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.user.AuthResponse] RefreshToken() on controller MappyApplication.Controllers.AuthController (MappyApplication).
2025-11-16 17:33:30.794 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__refreshToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`RefreshToken` = @__refreshToken_0
LIMIT 2
2025-11-16 17:33:30.796 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`FirstName`, `a`.`LastName`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`
FROM `AspNetUsers` AS `a`
WHERE `a`.`Id` = @__p_0
LIMIT 1
2025-11-16 17:33:30.799 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']

        UPDATE TOKENS
        SET Revoked = true, Expired = true
        WHERE UserId = @p0
          AND DeviceId = @p1
          AND Revoked = false
          AND Expired = false
2025-11-16 17:33:30.800 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a0`.`Name`
FROM `AspNetUserRoles` AS `a`
INNER JOIN `AspNetRoles` AS `a0` ON `a`.`RoleId` = `a0`.`Id`
WHERE `a`.`UserId` = @__userId_0
2025-11-16 17:33:30.801 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ClaimType`, `a`.`ClaimValue`, `a`.`UserId`
FROM `AspNetUserClaims` AS `a`
WHERE `a`.`UserId` = @__user_Id_0
2025-11-16 17:33:30.801 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a0`.`Name`
FROM `AspNetUserRoles` AS `a`
INNER JOIN `AspNetRoles` AS `a0` ON `a`.`RoleId` = `a0`.`Id`
WHERE `a`.`UserId` = @__userId_0
2025-11-16 17:33:30.802 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ClaimType`, `a`.`ClaimValue`, `a`.`UserId`
FROM `AspNetUserClaims` AS `a`
WHERE `a`.`UserId` = @__user_Id_0
2025-11-16 17:33:30.804 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (DbType = DateTime), @p2='?' (Size = 4000), @p3='?' (DbType = Boolean), @p4='?' (Size = 4000), @p5='?' (DbType = Boolean), @p6='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO `Tokens` (`AccessToken`, `CreatedAt`, `DeviceId`, `Expired`, `RefreshToken`, `Revoked`, `UserId`)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6);
SELECT `Id`
FROM `Tokens`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();
2025-11-16 17:33:30.804 +03:00 [INF] Added Token MappyApplication.Data.Token
2025-11-16 17:33:30.806 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessFailedCount`, `t`.`ConcurrencyStamp`, `t`.`Email`, `t`.`EmailConfirmed`, `t`.`FirstName`, `t`.`LastName`, `t`.`LockoutEnabled`, `t`.`LockoutEnd`, `t`.`NormalizedEmail`, `t`.`NormalizedUserName`, `t`.`PasswordHash`, `t`.`PhoneNumber`, `t`.`PhoneNumberConfirmed`, `t`.`SecurityStamp`, `t`.`TwoFactorEnabled`, `t`.`UserName`, `w`.`Id`, `w`.`Cadence`, `w`.`CityName`, `w`.`Coords`, `w`.`Date`, `w`.`Distance`, `w`.`Duration`, `w`.`Emoji`, `w`.`Pace`, `w`.`Type`, `w`.`UserId`, `c`.`Id`, `c`.`CityName`, `c`.`Country`, `c`.`Date`, `c`.`Emoji`, `c`.`Lat`, `c`.`Lng`, `c`.`Notes`, `c`.`UserId`
FROM (
    SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`FirstName`, `a`.`LastName`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`
    FROM `AspNetUsers` AS `a`
    WHERE `a`.`Id` = @__user_Id_0
    LIMIT 2
) AS `t`
LEFT JOIN `Workouts` AS `w` ON `t`.`Id` = `w`.`UserId`
LEFT JOIN `Cities` AS `c` ON `t`.`Id` = `c`.`UserId`
ORDER BY `t`.`Id`, `w`.`Id`
2025-11-16 17:33:30.806 +03:00 [INF] Executing ObjectResult, writing value of type 'MappyApplication.Models.user.AuthResponse'.
2025-11-16 17:33:30.806 +03:00 [INF] Executed action MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication) in 12.6325ms
2025-11-16 17:33:30.806 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication)'
2025-11-16 17:33:30.806 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:8080/api/v1/auth/refresh-token - 200 null application/json; charset=utf-8 49.1034ms
2025-11-16 17:33:31.566 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:8080/api/v1/auth/refresh-token - null 0
2025-11-16 17:33:31.566 +03:00 [INF] CORS policy execution successful.
2025-11-16 17:33:31.594 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 17:33:31.594 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication)'
2025-11-16 17:33:31.594 +03:00 [INF] Route matched with {action = "RefreshToken", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.user.AuthResponse] RefreshToken() on controller MappyApplication.Controllers.AuthController (MappyApplication).
2025-11-16 17:33:31.595 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__refreshToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`RefreshToken` = @__refreshToken_0
LIMIT 2
2025-11-16 17:33:31.596 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`FirstName`, `a`.`LastName`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`
FROM `AspNetUsers` AS `a`
WHERE `a`.`Id` = @__p_0
LIMIT 1
2025-11-16 17:33:31.599 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']

        UPDATE TOKENS
        SET Revoked = true, Expired = true
        WHERE UserId = @p0
          AND DeviceId = @p1
          AND Revoked = false
          AND Expired = false
2025-11-16 17:33:31.600 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a0`.`Name`
FROM `AspNetUserRoles` AS `a`
INNER JOIN `AspNetRoles` AS `a0` ON `a`.`RoleId` = `a0`.`Id`
WHERE `a`.`UserId` = @__userId_0
2025-11-16 17:33:31.601 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ClaimType`, `a`.`ClaimValue`, `a`.`UserId`
FROM `AspNetUserClaims` AS `a`
WHERE `a`.`UserId` = @__user_Id_0
2025-11-16 17:33:31.602 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a0`.`Name`
FROM `AspNetUserRoles` AS `a`
INNER JOIN `AspNetRoles` AS `a0` ON `a`.`RoleId` = `a0`.`Id`
WHERE `a`.`UserId` = @__userId_0
2025-11-16 17:33:31.602 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ClaimType`, `a`.`ClaimValue`, `a`.`UserId`
FROM `AspNetUserClaims` AS `a`
WHERE `a`.`UserId` = @__user_Id_0
2025-11-16 17:33:31.604 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (DbType = DateTime), @p2='?' (Size = 4000), @p3='?' (DbType = Boolean), @p4='?' (Size = 4000), @p5='?' (DbType = Boolean), @p6='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO `Tokens` (`AccessToken`, `CreatedAt`, `DeviceId`, `Expired`, `RefreshToken`, `Revoked`, `UserId`)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6);
SELECT `Id`
FROM `Tokens`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();
2025-11-16 17:33:31.604 +03:00 [INF] Added Token MappyApplication.Data.Token
2025-11-16 17:33:31.605 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessFailedCount`, `t`.`ConcurrencyStamp`, `t`.`Email`, `t`.`EmailConfirmed`, `t`.`FirstName`, `t`.`LastName`, `t`.`LockoutEnabled`, `t`.`LockoutEnd`, `t`.`NormalizedEmail`, `t`.`NormalizedUserName`, `t`.`PasswordHash`, `t`.`PhoneNumber`, `t`.`PhoneNumberConfirmed`, `t`.`SecurityStamp`, `t`.`TwoFactorEnabled`, `t`.`UserName`, `w`.`Id`, `w`.`Cadence`, `w`.`CityName`, `w`.`Coords`, `w`.`Date`, `w`.`Distance`, `w`.`Duration`, `w`.`Emoji`, `w`.`Pace`, `w`.`Type`, `w`.`UserId`, `c`.`Id`, `c`.`CityName`, `c`.`Country`, `c`.`Date`, `c`.`Emoji`, `c`.`Lat`, `c`.`Lng`, `c`.`Notes`, `c`.`UserId`
FROM (
    SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`FirstName`, `a`.`LastName`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`
    FROM `AspNetUsers` AS `a`
    WHERE `a`.`Id` = @__user_Id_0
    LIMIT 2
) AS `t`
LEFT JOIN `Workouts` AS `w` ON `t`.`Id` = `w`.`UserId`
LEFT JOIN `Cities` AS `c` ON `t`.`Id` = `c`.`UserId`
ORDER BY `t`.`Id`, `w`.`Id`
2025-11-16 17:33:31.605 +03:00 [INF] Executing ObjectResult, writing value of type 'MappyApplication.Models.user.AuthResponse'.
2025-11-16 17:33:31.605 +03:00 [INF] Executed action MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication) in 11.0914ms
2025-11-16 17:33:31.605 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication)'
2025-11-16 17:33:31.605 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:8080/api/v1/auth/refresh-token - 200 null application/json; charset=utf-8 39.7192ms
2025-11-16 17:34:22.350 +03:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:8080/api/v1/auth/refresh-token - null null
2025-11-16 17:34:22.352 +03:00 [INF] CORS policy execution successful.
2025-11-16 17:34:22.352 +03:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:8080/api/v1/auth/refresh-token - 204 null null 3.0238ms
2025-11-16 17:34:22.354 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:8080/api/v1/auth/refresh-token - null 0
2025-11-16 17:34:22.354 +03:00 [INF] CORS policy execution successful.
2025-11-16 17:34:22.387 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 17:34:22.388 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication)'
2025-11-16 17:34:22.388 +03:00 [INF] Route matched with {action = "RefreshToken", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.user.AuthResponse] RefreshToken() on controller MappyApplication.Controllers.AuthController (MappyApplication).
2025-11-16 17:34:22.389 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__refreshToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`RefreshToken` = @__refreshToken_0
LIMIT 2
2025-11-16 17:34:22.391 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`FirstName`, `a`.`LastName`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`
FROM `AspNetUsers` AS `a`
WHERE `a`.`Id` = @__p_0
LIMIT 1
2025-11-16 17:34:22.394 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']

        UPDATE TOKENS
        SET Revoked = true, Expired = true
        WHERE UserId = @p0
          AND DeviceId = @p1
          AND Revoked = false
          AND Expired = false
2025-11-16 17:34:22.396 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a0`.`Name`
FROM `AspNetUserRoles` AS `a`
INNER JOIN `AspNetRoles` AS `a0` ON `a`.`RoleId` = `a0`.`Id`
WHERE `a`.`UserId` = @__userId_0
2025-11-16 17:34:22.396 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ClaimType`, `a`.`ClaimValue`, `a`.`UserId`
FROM `AspNetUserClaims` AS `a`
WHERE `a`.`UserId` = @__user_Id_0
2025-11-16 17:34:22.397 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a0`.`Name`
FROM `AspNetUserRoles` AS `a`
INNER JOIN `AspNetRoles` AS `a0` ON `a`.`RoleId` = `a0`.`Id`
WHERE `a`.`UserId` = @__userId_0
2025-11-16 17:34:22.403 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ClaimType`, `a`.`ClaimValue`, `a`.`UserId`
FROM `AspNetUserClaims` AS `a`
WHERE `a`.`UserId` = @__user_Id_0
2025-11-16 17:34:22.405 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (DbType = DateTime), @p2='?' (Size = 4000), @p3='?' (DbType = Boolean), @p4='?' (Size = 4000), @p5='?' (DbType = Boolean), @p6='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO `Tokens` (`AccessToken`, `CreatedAt`, `DeviceId`, `Expired`, `RefreshToken`, `Revoked`, `UserId`)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6);
SELECT `Id`
FROM `Tokens`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();
2025-11-16 17:34:22.406 +03:00 [INF] Added Token MappyApplication.Data.Token
2025-11-16 17:34:22.407 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessFailedCount`, `t`.`ConcurrencyStamp`, `t`.`Email`, `t`.`EmailConfirmed`, `t`.`FirstName`, `t`.`LastName`, `t`.`LockoutEnabled`, `t`.`LockoutEnd`, `t`.`NormalizedEmail`, `t`.`NormalizedUserName`, `t`.`PasswordHash`, `t`.`PhoneNumber`, `t`.`PhoneNumberConfirmed`, `t`.`SecurityStamp`, `t`.`TwoFactorEnabled`, `t`.`UserName`, `w`.`Id`, `w`.`Cadence`, `w`.`CityName`, `w`.`Coords`, `w`.`Date`, `w`.`Distance`, `w`.`Duration`, `w`.`Emoji`, `w`.`Pace`, `w`.`Type`, `w`.`UserId`, `c`.`Id`, `c`.`CityName`, `c`.`Country`, `c`.`Date`, `c`.`Emoji`, `c`.`Lat`, `c`.`Lng`, `c`.`Notes`, `c`.`UserId`
FROM (
    SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`FirstName`, `a`.`LastName`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`
    FROM `AspNetUsers` AS `a`
    WHERE `a`.`Id` = @__user_Id_0
    LIMIT 2
) AS `t`
LEFT JOIN `Workouts` AS `w` ON `t`.`Id` = `w`.`UserId`
LEFT JOIN `Cities` AS `c` ON `t`.`Id` = `c`.`UserId`
ORDER BY `t`.`Id`, `w`.`Id`
2025-11-16 17:34:22.407 +03:00 [INF] Executing ObjectResult, writing value of type 'MappyApplication.Models.user.AuthResponse'.
2025-11-16 17:34:22.407 +03:00 [INF] Executed action MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication) in 18.973ms
2025-11-16 17:34:22.407 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication)'
2025-11-16 17:34:22.407 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:8080/api/v1/auth/refresh-token - 200 null application/json; charset=utf-8 53.2783ms
2025-11-16 17:34:23.740 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:8080/api/v1/auth/refresh-token - null 0
2025-11-16 17:34:23.742 +03:00 [INF] CORS policy execution successful.
2025-11-16 17:34:23.791 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 17:34:23.792 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication)'
2025-11-16 17:34:23.792 +03:00 [INF] Route matched with {action = "RefreshToken", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.user.AuthResponse] RefreshToken() on controller MappyApplication.Controllers.AuthController (MappyApplication).
2025-11-16 17:34:23.793 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__refreshToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`RefreshToken` = @__refreshToken_0
LIMIT 2
2025-11-16 17:34:23.795 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`FirstName`, `a`.`LastName`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`
FROM `AspNetUsers` AS `a`
WHERE `a`.`Id` = @__p_0
LIMIT 1
2025-11-16 17:34:23.797 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']

        UPDATE TOKENS
        SET Revoked = true, Expired = true
        WHERE UserId = @p0
          AND DeviceId = @p1
          AND Revoked = false
          AND Expired = false
2025-11-16 17:34:23.799 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a0`.`Name`
FROM `AspNetUserRoles` AS `a`
INNER JOIN `AspNetRoles` AS `a0` ON `a`.`RoleId` = `a0`.`Id`
WHERE `a`.`UserId` = @__userId_0
2025-11-16 17:34:23.799 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ClaimType`, `a`.`ClaimValue`, `a`.`UserId`
FROM `AspNetUserClaims` AS `a`
WHERE `a`.`UserId` = @__user_Id_0
2025-11-16 17:34:23.800 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a0`.`Name`
FROM `AspNetUserRoles` AS `a`
INNER JOIN `AspNetRoles` AS `a0` ON `a`.`RoleId` = `a0`.`Id`
WHERE `a`.`UserId` = @__userId_0
2025-11-16 17:34:23.800 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ClaimType`, `a`.`ClaimValue`, `a`.`UserId`
FROM `AspNetUserClaims` AS `a`
WHERE `a`.`UserId` = @__user_Id_0
2025-11-16 17:34:23.804 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (DbType = DateTime), @p2='?' (Size = 4000), @p3='?' (DbType = Boolean), @p4='?' (Size = 4000), @p5='?' (DbType = Boolean), @p6='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO `Tokens` (`AccessToken`, `CreatedAt`, `DeviceId`, `Expired`, `RefreshToken`, `Revoked`, `UserId`)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6);
SELECT `Id`
FROM `Tokens`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();
2025-11-16 17:34:23.807 +03:00 [INF] Added Token MappyApplication.Data.Token
2025-11-16 17:34:23.809 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessFailedCount`, `t`.`ConcurrencyStamp`, `t`.`Email`, `t`.`EmailConfirmed`, `t`.`FirstName`, `t`.`LastName`, `t`.`LockoutEnabled`, `t`.`LockoutEnd`, `t`.`NormalizedEmail`, `t`.`NormalizedUserName`, `t`.`PasswordHash`, `t`.`PhoneNumber`, `t`.`PhoneNumberConfirmed`, `t`.`SecurityStamp`, `t`.`TwoFactorEnabled`, `t`.`UserName`, `w`.`Id`, `w`.`Cadence`, `w`.`CityName`, `w`.`Coords`, `w`.`Date`, `w`.`Distance`, `w`.`Duration`, `w`.`Emoji`, `w`.`Pace`, `w`.`Type`, `w`.`UserId`, `c`.`Id`, `c`.`CityName`, `c`.`Country`, `c`.`Date`, `c`.`Emoji`, `c`.`Lat`, `c`.`Lng`, `c`.`Notes`, `c`.`UserId`
FROM (
    SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`FirstName`, `a`.`LastName`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`
    FROM `AspNetUsers` AS `a`
    WHERE `a`.`Id` = @__user_Id_0
    LIMIT 2
) AS `t`
LEFT JOIN `Workouts` AS `w` ON `t`.`Id` = `w`.`UserId`
LEFT JOIN `Cities` AS `c` ON `t`.`Id` = `c`.`UserId`
ORDER BY `t`.`Id`, `w`.`Id`
2025-11-16 17:34:23.810 +03:00 [INF] Executing ObjectResult, writing value of type 'MappyApplication.Models.user.AuthResponse'.
2025-11-16 17:34:23.810 +03:00 [INF] Executed action MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication) in 18.0545ms
2025-11-16 17:34:23.810 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication)'
2025-11-16 17:34:23.810 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:8080/api/v1/auth/refresh-token - 200 null application/json; charset=utf-8 70.3122ms
2025-11-16 17:34:54.323 +03:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:8080/api/v1/auth/refresh-token - null null
2025-11-16 17:34:54.327 +03:00 [INF] CORS policy execution successful.
2025-11-16 17:34:54.327 +03:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:8080/api/v1/auth/refresh-token - 204 null null 5.1835ms
2025-11-16 17:34:54.331 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:8080/api/v1/auth/refresh-token - null 0
2025-11-16 17:34:54.332 +03:00 [INF] CORS policy execution successful.
2025-11-16 17:34:54.365 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 17:34:54.369 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication)'
2025-11-16 17:34:54.369 +03:00 [INF] Route matched with {action = "RefreshToken", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.user.AuthResponse] RefreshToken() on controller MappyApplication.Controllers.AuthController (MappyApplication).
2025-11-16 17:34:54.370 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__refreshToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`RefreshToken` = @__refreshToken_0
LIMIT 2
2025-11-16 17:34:54.372 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`FirstName`, `a`.`LastName`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`
FROM `AspNetUsers` AS `a`
WHERE `a`.`Id` = @__p_0
LIMIT 1
2025-11-16 17:34:54.375 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']

        UPDATE TOKENS
        SET Revoked = true, Expired = true
        WHERE UserId = @p0
          AND DeviceId = @p1
          AND Revoked = false
          AND Expired = false
2025-11-16 17:34:54.376 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a0`.`Name`
FROM `AspNetUserRoles` AS `a`
INNER JOIN `AspNetRoles` AS `a0` ON `a`.`RoleId` = `a0`.`Id`
WHERE `a`.`UserId` = @__userId_0
2025-11-16 17:34:54.377 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ClaimType`, `a`.`ClaimValue`, `a`.`UserId`
FROM `AspNetUserClaims` AS `a`
WHERE `a`.`UserId` = @__user_Id_0
2025-11-16 17:34:54.378 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a0`.`Name`
FROM `AspNetUserRoles` AS `a`
INNER JOIN `AspNetRoles` AS `a0` ON `a`.`RoleId` = `a0`.`Id`
WHERE `a`.`UserId` = @__userId_0
2025-11-16 17:34:54.378 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ClaimType`, `a`.`ClaimValue`, `a`.`UserId`
FROM `AspNetUserClaims` AS `a`
WHERE `a`.`UserId` = @__user_Id_0
2025-11-16 17:34:54.383 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (DbType = DateTime), @p2='?' (Size = 4000), @p3='?' (DbType = Boolean), @p4='?' (Size = 4000), @p5='?' (DbType = Boolean), @p6='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO `Tokens` (`AccessToken`, `CreatedAt`, `DeviceId`, `Expired`, `RefreshToken`, `Revoked`, `UserId`)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6);
SELECT `Id`
FROM `Tokens`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();
2025-11-16 17:34:54.384 +03:00 [INF] Added Token MappyApplication.Data.Token
2025-11-16 17:34:54.385 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessFailedCount`, `t`.`ConcurrencyStamp`, `t`.`Email`, `t`.`EmailConfirmed`, `t`.`FirstName`, `t`.`LastName`, `t`.`LockoutEnabled`, `t`.`LockoutEnd`, `t`.`NormalizedEmail`, `t`.`NormalizedUserName`, `t`.`PasswordHash`, `t`.`PhoneNumber`, `t`.`PhoneNumberConfirmed`, `t`.`SecurityStamp`, `t`.`TwoFactorEnabled`, `t`.`UserName`, `w`.`Id`, `w`.`Cadence`, `w`.`CityName`, `w`.`Coords`, `w`.`Date`, `w`.`Distance`, `w`.`Duration`, `w`.`Emoji`, `w`.`Pace`, `w`.`Type`, `w`.`UserId`, `c`.`Id`, `c`.`CityName`, `c`.`Country`, `c`.`Date`, `c`.`Emoji`, `c`.`Lat`, `c`.`Lng`, `c`.`Notes`, `c`.`UserId`
FROM (
    SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`FirstName`, `a`.`LastName`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`
    FROM `AspNetUsers` AS `a`
    WHERE `a`.`Id` = @__user_Id_0
    LIMIT 2
) AS `t`
LEFT JOIN `Workouts` AS `w` ON `t`.`Id` = `w`.`UserId`
LEFT JOIN `Cities` AS `c` ON `t`.`Id` = `c`.`UserId`
ORDER BY `t`.`Id`, `w`.`Id`
2025-11-16 17:34:54.385 +03:00 [INF] Executing ObjectResult, writing value of type 'MappyApplication.Models.user.AuthResponse'.
2025-11-16 17:34:54.385 +03:00 [INF] Executed action MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication) in 16.5291ms
2025-11-16 17:34:54.385 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication)'
2025-11-16 17:34:54.385 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:8080/api/v1/auth/refresh-token - 200 null application/json; charset=utf-8 53.989ms
2025-11-16 17:34:55.930 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:8080/api/v1/auth/refresh-token - null 0
2025-11-16 17:34:55.938 +03:00 [INF] CORS policy execution successful.
2025-11-16 17:34:55.970 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 17:34:55.970 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication)'
2025-11-16 17:34:55.970 +03:00 [INF] Route matched with {action = "RefreshToken", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.user.AuthResponse] RefreshToken() on controller MappyApplication.Controllers.AuthController (MappyApplication).
2025-11-16 17:34:55.971 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__refreshToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`RefreshToken` = @__refreshToken_0
LIMIT 2
2025-11-16 17:34:55.972 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`FirstName`, `a`.`LastName`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`
FROM `AspNetUsers` AS `a`
WHERE `a`.`Id` = @__p_0
LIMIT 1
2025-11-16 17:34:55.975 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']

        UPDATE TOKENS
        SET Revoked = true, Expired = true
        WHERE UserId = @p0
          AND DeviceId = @p1
          AND Revoked = false
          AND Expired = false
2025-11-16 17:34:55.976 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a0`.`Name`
FROM `AspNetUserRoles` AS `a`
INNER JOIN `AspNetRoles` AS `a0` ON `a`.`RoleId` = `a0`.`Id`
WHERE `a`.`UserId` = @__userId_0
2025-11-16 17:34:55.977 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ClaimType`, `a`.`ClaimValue`, `a`.`UserId`
FROM `AspNetUserClaims` AS `a`
WHERE `a`.`UserId` = @__user_Id_0
2025-11-16 17:34:55.978 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a0`.`Name`
FROM `AspNetUserRoles` AS `a`
INNER JOIN `AspNetRoles` AS `a0` ON `a`.`RoleId` = `a0`.`Id`
WHERE `a`.`UserId` = @__userId_0
2025-11-16 17:34:55.978 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ClaimType`, `a`.`ClaimValue`, `a`.`UserId`
FROM `AspNetUserClaims` AS `a`
WHERE `a`.`UserId` = @__user_Id_0
2025-11-16 17:34:55.981 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (DbType = DateTime), @p2='?' (Size = 4000), @p3='?' (DbType = Boolean), @p4='?' (Size = 4000), @p5='?' (DbType = Boolean), @p6='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO `Tokens` (`AccessToken`, `CreatedAt`, `DeviceId`, `Expired`, `RefreshToken`, `Revoked`, `UserId`)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6);
SELECT `Id`
FROM `Tokens`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();
2025-11-16 17:34:55.982 +03:00 [INF] Added Token MappyApplication.Data.Token
2025-11-16 17:34:55.983 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessFailedCount`, `t`.`ConcurrencyStamp`, `t`.`Email`, `t`.`EmailConfirmed`, `t`.`FirstName`, `t`.`LastName`, `t`.`LockoutEnabled`, `t`.`LockoutEnd`, `t`.`NormalizedEmail`, `t`.`NormalizedUserName`, `t`.`PasswordHash`, `t`.`PhoneNumber`, `t`.`PhoneNumberConfirmed`, `t`.`SecurityStamp`, `t`.`TwoFactorEnabled`, `t`.`UserName`, `w`.`Id`, `w`.`Cadence`, `w`.`CityName`, `w`.`Coords`, `w`.`Date`, `w`.`Distance`, `w`.`Duration`, `w`.`Emoji`, `w`.`Pace`, `w`.`Type`, `w`.`UserId`, `c`.`Id`, `c`.`CityName`, `c`.`Country`, `c`.`Date`, `c`.`Emoji`, `c`.`Lat`, `c`.`Lng`, `c`.`Notes`, `c`.`UserId`
FROM (
    SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`FirstName`, `a`.`LastName`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`
    FROM `AspNetUsers` AS `a`
    WHERE `a`.`Id` = @__user_Id_0
    LIMIT 2
) AS `t`
LEFT JOIN `Workouts` AS `w` ON `t`.`Id` = `w`.`UserId`
LEFT JOIN `Cities` AS `c` ON `t`.`Id` = `c`.`UserId`
ORDER BY `t`.`Id`, `w`.`Id`
2025-11-16 17:34:55.983 +03:00 [INF] Executing ObjectResult, writing value of type 'MappyApplication.Models.user.AuthResponse'.
2025-11-16 17:34:55.984 +03:00 [INF] Executed action MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication) in 13.3404ms
2025-11-16 17:34:55.984 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication)'
2025-11-16 17:34:55.984 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:8080/api/v1/auth/refresh-token - 200 null application/json; charset=utf-8 53.4252ms
2025-11-16 17:34:58.437 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:8080/api/v1/auth/refresh-token - null 0
2025-11-16 17:34:58.439 +03:00 [INF] CORS policy execution successful.
2025-11-16 17:34:58.476 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 17:34:58.477 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication)'
2025-11-16 17:34:58.477 +03:00 [INF] Route matched with {action = "RefreshToken", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.user.AuthResponse] RefreshToken() on controller MappyApplication.Controllers.AuthController (MappyApplication).
2025-11-16 17:34:58.478 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__refreshToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`RefreshToken` = @__refreshToken_0
LIMIT 2
2025-11-16 17:34:58.482 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`FirstName`, `a`.`LastName`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`
FROM `AspNetUsers` AS `a`
WHERE `a`.`Id` = @__p_0
LIMIT 1
2025-11-16 17:34:58.486 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']

        UPDATE TOKENS
        SET Revoked = true, Expired = true
        WHERE UserId = @p0
          AND DeviceId = @p1
          AND Revoked = false
          AND Expired = false
2025-11-16 17:34:58.487 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a0`.`Name`
FROM `AspNetUserRoles` AS `a`
INNER JOIN `AspNetRoles` AS `a0` ON `a`.`RoleId` = `a0`.`Id`
WHERE `a`.`UserId` = @__userId_0
2025-11-16 17:34:58.488 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ClaimType`, `a`.`ClaimValue`, `a`.`UserId`
FROM `AspNetUserClaims` AS `a`
WHERE `a`.`UserId` = @__user_Id_0
2025-11-16 17:34:58.488 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a0`.`Name`
FROM `AspNetUserRoles` AS `a`
INNER JOIN `AspNetRoles` AS `a0` ON `a`.`RoleId` = `a0`.`Id`
WHERE `a`.`UserId` = @__userId_0
2025-11-16 17:34:58.489 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ClaimType`, `a`.`ClaimValue`, `a`.`UserId`
FROM `AspNetUserClaims` AS `a`
WHERE `a`.`UserId` = @__user_Id_0
2025-11-16 17:34:58.492 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (DbType = DateTime), @p2='?' (Size = 4000), @p3='?' (DbType = Boolean), @p4='?' (Size = 4000), @p5='?' (DbType = Boolean), @p6='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO `Tokens` (`AccessToken`, `CreatedAt`, `DeviceId`, `Expired`, `RefreshToken`, `Revoked`, `UserId`)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6);
SELECT `Id`
FROM `Tokens`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();
2025-11-16 17:34:58.492 +03:00 [INF] Added Token MappyApplication.Data.Token
2025-11-16 17:34:58.493 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessFailedCount`, `t`.`ConcurrencyStamp`, `t`.`Email`, `t`.`EmailConfirmed`, `t`.`FirstName`, `t`.`LastName`, `t`.`LockoutEnabled`, `t`.`LockoutEnd`, `t`.`NormalizedEmail`, `t`.`NormalizedUserName`, `t`.`PasswordHash`, `t`.`PhoneNumber`, `t`.`PhoneNumberConfirmed`, `t`.`SecurityStamp`, `t`.`TwoFactorEnabled`, `t`.`UserName`, `w`.`Id`, `w`.`Cadence`, `w`.`CityName`, `w`.`Coords`, `w`.`Date`, `w`.`Distance`, `w`.`Duration`, `w`.`Emoji`, `w`.`Pace`, `w`.`Type`, `w`.`UserId`, `c`.`Id`, `c`.`CityName`, `c`.`Country`, `c`.`Date`, `c`.`Emoji`, `c`.`Lat`, `c`.`Lng`, `c`.`Notes`, `c`.`UserId`
FROM (
    SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`FirstName`, `a`.`LastName`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`
    FROM `AspNetUsers` AS `a`
    WHERE `a`.`Id` = @__user_Id_0
    LIMIT 2
) AS `t`
LEFT JOIN `Workouts` AS `w` ON `t`.`Id` = `w`.`UserId`
LEFT JOIN `Cities` AS `c` ON `t`.`Id` = `c`.`UserId`
ORDER BY `t`.`Id`, `w`.`Id`
2025-11-16 17:34:58.494 +03:00 [INF] Executing ObjectResult, writing value of type 'MappyApplication.Models.user.AuthResponse'.
2025-11-16 17:34:58.494 +03:00 [INF] Executed action MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication) in 16.6965ms
2025-11-16 17:34:58.494 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication)'
2025-11-16 17:34:58.494 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:8080/api/v1/auth/refresh-token - 200 null application/json; charset=utf-8 56.8368ms
2025-11-16 17:34:59.295 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:8080/api/v1/auth/refresh-token - null 0
2025-11-16 17:34:59.296 +03:00 [INF] CORS policy execution successful.
2025-11-16 17:34:59.319 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 17:34:59.319 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication)'
2025-11-16 17:34:59.320 +03:00 [INF] Route matched with {action = "RefreshToken", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.user.AuthResponse] RefreshToken() on controller MappyApplication.Controllers.AuthController (MappyApplication).
2025-11-16 17:34:59.320 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__refreshToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`RefreshToken` = @__refreshToken_0
LIMIT 2
2025-11-16 17:34:59.322 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`FirstName`, `a`.`LastName`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`
FROM `AspNetUsers` AS `a`
WHERE `a`.`Id` = @__p_0
LIMIT 1
2025-11-16 17:34:59.325 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']

        UPDATE TOKENS
        SET Revoked = true, Expired = true
        WHERE UserId = @p0
          AND DeviceId = @p1
          AND Revoked = false
          AND Expired = false
2025-11-16 17:34:59.326 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a0`.`Name`
FROM `AspNetUserRoles` AS `a`
INNER JOIN `AspNetRoles` AS `a0` ON `a`.`RoleId` = `a0`.`Id`
WHERE `a`.`UserId` = @__userId_0
2025-11-16 17:34:59.326 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ClaimType`, `a`.`ClaimValue`, `a`.`UserId`
FROM `AspNetUserClaims` AS `a`
WHERE `a`.`UserId` = @__user_Id_0
2025-11-16 17:34:59.327 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a0`.`Name`
FROM `AspNetUserRoles` AS `a`
INNER JOIN `AspNetRoles` AS `a0` ON `a`.`RoleId` = `a0`.`Id`
WHERE `a`.`UserId` = @__userId_0
2025-11-16 17:34:59.327 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ClaimType`, `a`.`ClaimValue`, `a`.`UserId`
FROM `AspNetUserClaims` AS `a`
WHERE `a`.`UserId` = @__user_Id_0
2025-11-16 17:34:59.329 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (DbType = DateTime), @p2='?' (Size = 4000), @p3='?' (DbType = Boolean), @p4='?' (Size = 4000), @p5='?' (DbType = Boolean), @p6='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO `Tokens` (`AccessToken`, `CreatedAt`, `DeviceId`, `Expired`, `RefreshToken`, `Revoked`, `UserId`)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6);
SELECT `Id`
FROM `Tokens`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();
2025-11-16 17:34:59.329 +03:00 [INF] Added Token MappyApplication.Data.Token
2025-11-16 17:34:59.330 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessFailedCount`, `t`.`ConcurrencyStamp`, `t`.`Email`, `t`.`EmailConfirmed`, `t`.`FirstName`, `t`.`LastName`, `t`.`LockoutEnabled`, `t`.`LockoutEnd`, `t`.`NormalizedEmail`, `t`.`NormalizedUserName`, `t`.`PasswordHash`, `t`.`PhoneNumber`, `t`.`PhoneNumberConfirmed`, `t`.`SecurityStamp`, `t`.`TwoFactorEnabled`, `t`.`UserName`, `w`.`Id`, `w`.`Cadence`, `w`.`CityName`, `w`.`Coords`, `w`.`Date`, `w`.`Distance`, `w`.`Duration`, `w`.`Emoji`, `w`.`Pace`, `w`.`Type`, `w`.`UserId`, `c`.`Id`, `c`.`CityName`, `c`.`Country`, `c`.`Date`, `c`.`Emoji`, `c`.`Lat`, `c`.`Lng`, `c`.`Notes`, `c`.`UserId`
FROM (
    SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`FirstName`, `a`.`LastName`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`
    FROM `AspNetUsers` AS `a`
    WHERE `a`.`Id` = @__user_Id_0
    LIMIT 2
) AS `t`
LEFT JOIN `Workouts` AS `w` ON `t`.`Id` = `w`.`UserId`
LEFT JOIN `Cities` AS `c` ON `t`.`Id` = `c`.`UserId`
ORDER BY `t`.`Id`, `w`.`Id`
2025-11-16 17:34:59.331 +03:00 [INF] Executing ObjectResult, writing value of type 'MappyApplication.Models.user.AuthResponse'.
2025-11-16 17:34:59.331 +03:00 [INF] Executed action MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication) in 11.0606ms
2025-11-16 17:34:59.331 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication)'
2025-11-16 17:34:59.331 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:8080/api/v1/auth/refresh-token - 200 null application/json; charset=utf-8 35.7568ms
2025-11-16 17:34:59.850 +03:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:8080/api/v1/auth/refresh-token - null null
2025-11-16 17:34:59.850 +03:00 [INF] CORS policy execution successful.
2025-11-16 17:34:59.850 +03:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:8080/api/v1/auth/refresh-token - 204 null null 0.4635ms
2025-11-16 17:34:59.852 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:8080/api/v1/auth/refresh-token - null 0
2025-11-16 17:34:59.852 +03:00 [INF] CORS policy execution successful.
2025-11-16 17:34:59.871 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 17:34:59.871 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication)'
2025-11-16 17:34:59.871 +03:00 [INF] Route matched with {action = "RefreshToken", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.user.AuthResponse] RefreshToken() on controller MappyApplication.Controllers.AuthController (MappyApplication).
2025-11-16 17:34:59.873 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__refreshToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`RefreshToken` = @__refreshToken_0
LIMIT 2
2025-11-16 17:34:59.875 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`FirstName`, `a`.`LastName`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`
FROM `AspNetUsers` AS `a`
WHERE `a`.`Id` = @__p_0
LIMIT 1
2025-11-16 17:34:59.876 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']

        UPDATE TOKENS
        SET Revoked = true, Expired = true
        WHERE UserId = @p0
          AND DeviceId = @p1
          AND Revoked = false
          AND Expired = false
2025-11-16 17:34:59.883 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a0`.`Name`
FROM `AspNetUserRoles` AS `a`
INNER JOIN `AspNetRoles` AS `a0` ON `a`.`RoleId` = `a0`.`Id`
WHERE `a`.`UserId` = @__userId_0
2025-11-16 17:34:59.885 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ClaimType`, `a`.`ClaimValue`, `a`.`UserId`
FROM `AspNetUserClaims` AS `a`
WHERE `a`.`UserId` = @__user_Id_0
2025-11-16 17:34:59.887 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a0`.`Name`
FROM `AspNetUserRoles` AS `a`
INNER JOIN `AspNetRoles` AS `a0` ON `a`.`RoleId` = `a0`.`Id`
WHERE `a`.`UserId` = @__userId_0
2025-11-16 17:34:59.888 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ClaimType`, `a`.`ClaimValue`, `a`.`UserId`
FROM `AspNetUserClaims` AS `a`
WHERE `a`.`UserId` = @__user_Id_0
2025-11-16 17:34:59.891 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (DbType = DateTime), @p2='?' (Size = 4000), @p3='?' (DbType = Boolean), @p4='?' (Size = 4000), @p5='?' (DbType = Boolean), @p6='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO `Tokens` (`AccessToken`, `CreatedAt`, `DeviceId`, `Expired`, `RefreshToken`, `Revoked`, `UserId`)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6);
SELECT `Id`
FROM `Tokens`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();
2025-11-16 17:34:59.892 +03:00 [INF] Added Token MappyApplication.Data.Token
2025-11-16 17:34:59.894 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessFailedCount`, `t`.`ConcurrencyStamp`, `t`.`Email`, `t`.`EmailConfirmed`, `t`.`FirstName`, `t`.`LastName`, `t`.`LockoutEnabled`, `t`.`LockoutEnd`, `t`.`NormalizedEmail`, `t`.`NormalizedUserName`, `t`.`PasswordHash`, `t`.`PhoneNumber`, `t`.`PhoneNumberConfirmed`, `t`.`SecurityStamp`, `t`.`TwoFactorEnabled`, `t`.`UserName`, `w`.`Id`, `w`.`Cadence`, `w`.`CityName`, `w`.`Coords`, `w`.`Date`, `w`.`Distance`, `w`.`Duration`, `w`.`Emoji`, `w`.`Pace`, `w`.`Type`, `w`.`UserId`, `c`.`Id`, `c`.`CityName`, `c`.`Country`, `c`.`Date`, `c`.`Emoji`, `c`.`Lat`, `c`.`Lng`, `c`.`Notes`, `c`.`UserId`
FROM (
    SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`FirstName`, `a`.`LastName`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`
    FROM `AspNetUsers` AS `a`
    WHERE `a`.`Id` = @__user_Id_0
    LIMIT 2
) AS `t`
LEFT JOIN `Workouts` AS `w` ON `t`.`Id` = `w`.`UserId`
LEFT JOIN `Cities` AS `c` ON `t`.`Id` = `c`.`UserId`
ORDER BY `t`.`Id`, `w`.`Id`
2025-11-16 17:34:59.894 +03:00 [INF] Executing ObjectResult, writing value of type 'MappyApplication.Models.user.AuthResponse'.
2025-11-16 17:34:59.894 +03:00 [INF] Executed action MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication) in 22.1635ms
2025-11-16 17:34:59.894 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication)'
2025-11-16 17:34:59.894 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:8080/api/v1/auth/refresh-token - 200 null application/json; charset=utf-8 41.9187ms
2025-11-16 17:38:08.900 +03:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:8080/api/v1/auth/refresh-token - null null
2025-11-16 17:38:08.912 +03:00 [INF] CORS policy execution successful.
2025-11-16 17:38:08.912 +03:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:8080/api/v1/auth/refresh-token - 204 null null 12.56ms
2025-11-16 17:38:08.916 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:8080/api/v1/auth/refresh-token - null 0
2025-11-16 17:38:08.916 +03:00 [INF] CORS policy execution successful.
2025-11-16 17:38:08.959 +03:00 [INF] Executed DbCommand (4ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 17:38:08.960 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication)'
2025-11-16 17:38:08.960 +03:00 [INF] Route matched with {action = "RefreshToken", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.user.AuthResponse] RefreshToken() on controller MappyApplication.Controllers.AuthController (MappyApplication).
2025-11-16 17:38:08.961 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__refreshToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`RefreshToken` = @__refreshToken_0
LIMIT 2
2025-11-16 17:38:08.963 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`FirstName`, `a`.`LastName`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`
FROM `AspNetUsers` AS `a`
WHERE `a`.`Id` = @__p_0
LIMIT 1
2025-11-16 17:38:08.970 +03:00 [INF] Executed DbCommand (5ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']

        UPDATE TOKENS
        SET Revoked = true, Expired = true
        WHERE UserId = @p0
          AND DeviceId = @p1
          AND Revoked = false
          AND Expired = false
2025-11-16 17:38:08.972 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a0`.`Name`
FROM `AspNetUserRoles` AS `a`
INNER JOIN `AspNetRoles` AS `a0` ON `a`.`RoleId` = `a0`.`Id`
WHERE `a`.`UserId` = @__userId_0
2025-11-16 17:38:08.973 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ClaimType`, `a`.`ClaimValue`, `a`.`UserId`
FROM `AspNetUserClaims` AS `a`
WHERE `a`.`UserId` = @__user_Id_0
2025-11-16 17:38:08.975 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a0`.`Name`
FROM `AspNetUserRoles` AS `a`
INNER JOIN `AspNetRoles` AS `a0` ON `a`.`RoleId` = `a0`.`Id`
WHERE `a`.`UserId` = @__userId_0
2025-11-16 17:38:08.975 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ClaimType`, `a`.`ClaimValue`, `a`.`UserId`
FROM `AspNetUserClaims` AS `a`
WHERE `a`.`UserId` = @__user_Id_0
2025-11-16 17:38:08.979 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (DbType = DateTime), @p2='?' (Size = 4000), @p3='?' (DbType = Boolean), @p4='?' (Size = 4000), @p5='?' (DbType = Boolean), @p6='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO `Tokens` (`AccessToken`, `CreatedAt`, `DeviceId`, `Expired`, `RefreshToken`, `Revoked`, `UserId`)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6);
SELECT `Id`
FROM `Tokens`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();
2025-11-16 17:38:08.979 +03:00 [INF] Added Token MappyApplication.Data.Token
2025-11-16 17:38:08.983 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessFailedCount`, `t`.`ConcurrencyStamp`, `t`.`Email`, `t`.`EmailConfirmed`, `t`.`FirstName`, `t`.`LastName`, `t`.`LockoutEnabled`, `t`.`LockoutEnd`, `t`.`NormalizedEmail`, `t`.`NormalizedUserName`, `t`.`PasswordHash`, `t`.`PhoneNumber`, `t`.`PhoneNumberConfirmed`, `t`.`SecurityStamp`, `t`.`TwoFactorEnabled`, `t`.`UserName`, `w`.`Id`, `w`.`Cadence`, `w`.`CityName`, `w`.`Coords`, `w`.`Date`, `w`.`Distance`, `w`.`Duration`, `w`.`Emoji`, `w`.`Pace`, `w`.`Type`, `w`.`UserId`, `c`.`Id`, `c`.`CityName`, `c`.`Country`, `c`.`Date`, `c`.`Emoji`, `c`.`Lat`, `c`.`Lng`, `c`.`Notes`, `c`.`UserId`
FROM (
    SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`FirstName`, `a`.`LastName`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`
    FROM `AspNetUsers` AS `a`
    WHERE `a`.`Id` = @__user_Id_0
    LIMIT 2
) AS `t`
LEFT JOIN `Workouts` AS `w` ON `t`.`Id` = `w`.`UserId`
LEFT JOIN `Cities` AS `c` ON `t`.`Id` = `c`.`UserId`
ORDER BY `t`.`Id`, `w`.`Id`
2025-11-16 17:38:08.983 +03:00 [INF] Executing ObjectResult, writing value of type 'MappyApplication.Models.user.AuthResponse'.
2025-11-16 17:38:08.984 +03:00 [INF] Executed action MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication) in 24.0861ms
2025-11-16 17:38:08.984 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication)'
2025-11-16 17:38:08.984 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:8080/api/v1/auth/refresh-token - 200 null application/json; charset=utf-8 68.7307ms
2025-11-16 17:38:12.219 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:8080/api/v1/auth/refresh-token - null 0
2025-11-16 17:38:12.227 +03:00 [INF] CORS policy execution successful.
2025-11-16 17:38:12.267 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 17:38:12.267 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication)'
2025-11-16 17:38:12.268 +03:00 [INF] Route matched with {action = "RefreshToken", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.user.AuthResponse] RefreshToken() on controller MappyApplication.Controllers.AuthController (MappyApplication).
2025-11-16 17:38:12.269 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__refreshToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`RefreshToken` = @__refreshToken_0
LIMIT 2
2025-11-16 17:38:12.270 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`FirstName`, `a`.`LastName`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`
FROM `AspNetUsers` AS `a`
WHERE `a`.`Id` = @__p_0
LIMIT 1
2025-11-16 17:38:12.273 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']

        UPDATE TOKENS
        SET Revoked = true, Expired = true
        WHERE UserId = @p0
          AND DeviceId = @p1
          AND Revoked = false
          AND Expired = false
2025-11-16 17:38:12.274 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a0`.`Name`
FROM `AspNetUserRoles` AS `a`
INNER JOIN `AspNetRoles` AS `a0` ON `a`.`RoleId` = `a0`.`Id`
WHERE `a`.`UserId` = @__userId_0
2025-11-16 17:38:12.276 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ClaimType`, `a`.`ClaimValue`, `a`.`UserId`
FROM `AspNetUserClaims` AS `a`
WHERE `a`.`UserId` = @__user_Id_0
2025-11-16 17:38:12.277 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a0`.`Name`
FROM `AspNetUserRoles` AS `a`
INNER JOIN `AspNetRoles` AS `a0` ON `a`.`RoleId` = `a0`.`Id`
WHERE `a`.`UserId` = @__userId_0
2025-11-16 17:38:12.277 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ClaimType`, `a`.`ClaimValue`, `a`.`UserId`
FROM `AspNetUserClaims` AS `a`
WHERE `a`.`UserId` = @__user_Id_0
2025-11-16 17:38:12.280 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (DbType = DateTime), @p2='?' (Size = 4000), @p3='?' (DbType = Boolean), @p4='?' (Size = 4000), @p5='?' (DbType = Boolean), @p6='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO `Tokens` (`AccessToken`, `CreatedAt`, `DeviceId`, `Expired`, `RefreshToken`, `Revoked`, `UserId`)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6);
SELECT `Id`
FROM `Tokens`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();
2025-11-16 17:38:12.280 +03:00 [INF] Added Token MappyApplication.Data.Token
2025-11-16 17:38:12.283 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessFailedCount`, `t`.`ConcurrencyStamp`, `t`.`Email`, `t`.`EmailConfirmed`, `t`.`FirstName`, `t`.`LastName`, `t`.`LockoutEnabled`, `t`.`LockoutEnd`, `t`.`NormalizedEmail`, `t`.`NormalizedUserName`, `t`.`PasswordHash`, `t`.`PhoneNumber`, `t`.`PhoneNumberConfirmed`, `t`.`SecurityStamp`, `t`.`TwoFactorEnabled`, `t`.`UserName`, `w`.`Id`, `w`.`Cadence`, `w`.`CityName`, `w`.`Coords`, `w`.`Date`, `w`.`Distance`, `w`.`Duration`, `w`.`Emoji`, `w`.`Pace`, `w`.`Type`, `w`.`UserId`, `c`.`Id`, `c`.`CityName`, `c`.`Country`, `c`.`Date`, `c`.`Emoji`, `c`.`Lat`, `c`.`Lng`, `c`.`Notes`, `c`.`UserId`
FROM (
    SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`FirstName`, `a`.`LastName`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`
    FROM `AspNetUsers` AS `a`
    WHERE `a`.`Id` = @__user_Id_0
    LIMIT 2
) AS `t`
LEFT JOIN `Workouts` AS `w` ON `t`.`Id` = `w`.`UserId`
LEFT JOIN `Cities` AS `c` ON `t`.`Id` = `c`.`UserId`
ORDER BY `t`.`Id`, `w`.`Id`
2025-11-16 17:38:12.283 +03:00 [INF] Executing ObjectResult, writing value of type 'MappyApplication.Models.user.AuthResponse'.
2025-11-16 17:38:12.283 +03:00 [INF] Executed action MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication) in 15.196ms
2025-11-16 17:38:12.283 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication)'
2025-11-16 17:38:12.283 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:8080/api/v1/auth/refresh-token - 200 null application/json; charset=utf-8 65.305ms
2025-11-16 17:38:14.033 +03:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:8080/api/v1/auth/refresh-token - null null
2025-11-16 17:38:14.033 +03:00 [INF] CORS policy execution successful.
2025-11-16 17:38:14.034 +03:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:8080/api/v1/auth/refresh-token - 204 null null 0.6996ms
2025-11-16 17:38:14.036 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:8080/api/v1/auth/refresh-token - null 0
2025-11-16 17:38:14.036 +03:00 [INF] CORS policy execution successful.
2025-11-16 17:38:14.058 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 17:38:14.059 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication)'
2025-11-16 17:38:14.059 +03:00 [INF] Route matched with {action = "RefreshToken", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.user.AuthResponse] RefreshToken() on controller MappyApplication.Controllers.AuthController (MappyApplication).
2025-11-16 17:38:14.061 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__refreshToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`RefreshToken` = @__refreshToken_0
LIMIT 2
2025-11-16 17:38:14.062 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`FirstName`, `a`.`LastName`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`
FROM `AspNetUsers` AS `a`
WHERE `a`.`Id` = @__p_0
LIMIT 1
2025-11-16 17:38:14.063 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']

        UPDATE TOKENS
        SET Revoked = true, Expired = true
        WHERE UserId = @p0
          AND DeviceId = @p1
          AND Revoked = false
          AND Expired = false
2025-11-16 17:38:14.065 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a0`.`Name`
FROM `AspNetUserRoles` AS `a`
INNER JOIN `AspNetRoles` AS `a0` ON `a`.`RoleId` = `a0`.`Id`
WHERE `a`.`UserId` = @__userId_0
2025-11-16 17:38:14.066 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ClaimType`, `a`.`ClaimValue`, `a`.`UserId`
FROM `AspNetUserClaims` AS `a`
WHERE `a`.`UserId` = @__user_Id_0
2025-11-16 17:38:14.067 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a0`.`Name`
FROM `AspNetUserRoles` AS `a`
INNER JOIN `AspNetRoles` AS `a0` ON `a`.`RoleId` = `a0`.`Id`
WHERE `a`.`UserId` = @__userId_0
2025-11-16 17:38:14.068 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ClaimType`, `a`.`ClaimValue`, `a`.`UserId`
FROM `AspNetUserClaims` AS `a`
WHERE `a`.`UserId` = @__user_Id_0
2025-11-16 17:38:14.070 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (DbType = DateTime), @p2='?' (Size = 4000), @p3='?' (DbType = Boolean), @p4='?' (Size = 4000), @p5='?' (DbType = Boolean), @p6='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO `Tokens` (`AccessToken`, `CreatedAt`, `DeviceId`, `Expired`, `RefreshToken`, `Revoked`, `UserId`)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6);
SELECT `Id`
FROM `Tokens`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();
2025-11-16 17:38:14.070 +03:00 [INF] Added Token MappyApplication.Data.Token
2025-11-16 17:38:14.071 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessFailedCount`, `t`.`ConcurrencyStamp`, `t`.`Email`, `t`.`EmailConfirmed`, `t`.`FirstName`, `t`.`LastName`, `t`.`LockoutEnabled`, `t`.`LockoutEnd`, `t`.`NormalizedEmail`, `t`.`NormalizedUserName`, `t`.`PasswordHash`, `t`.`PhoneNumber`, `t`.`PhoneNumberConfirmed`, `t`.`SecurityStamp`, `t`.`TwoFactorEnabled`, `t`.`UserName`, `w`.`Id`, `w`.`Cadence`, `w`.`CityName`, `w`.`Coords`, `w`.`Date`, `w`.`Distance`, `w`.`Duration`, `w`.`Emoji`, `w`.`Pace`, `w`.`Type`, `w`.`UserId`, `c`.`Id`, `c`.`CityName`, `c`.`Country`, `c`.`Date`, `c`.`Emoji`, `c`.`Lat`, `c`.`Lng`, `c`.`Notes`, `c`.`UserId`
FROM (
    SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`FirstName`, `a`.`LastName`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`
    FROM `AspNetUsers` AS `a`
    WHERE `a`.`Id` = @__user_Id_0
    LIMIT 2
) AS `t`
LEFT JOIN `Workouts` AS `w` ON `t`.`Id` = `w`.`UserId`
LEFT JOIN `Cities` AS `c` ON `t`.`Id` = `c`.`UserId`
ORDER BY `t`.`Id`, `w`.`Id`
2025-11-16 17:38:14.071 +03:00 [INF] Executing ObjectResult, writing value of type 'MappyApplication.Models.user.AuthResponse'.
2025-11-16 17:38:14.071 +03:00 [INF] Executed action MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication) in 12.4047ms
2025-11-16 17:38:14.071 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication)'
2025-11-16 17:38:14.072 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:8080/api/v1/auth/refresh-token - 200 null application/json; charset=utf-8 35.3211ms
2025-11-16 17:38:15.195 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:8080/api/v1/auth/refresh-token - null 0
2025-11-16 17:38:15.196 +03:00 [INF] CORS policy execution successful.
2025-11-16 17:38:15.231 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 17:38:15.232 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication)'
2025-11-16 17:38:15.232 +03:00 [INF] Route matched with {action = "RefreshToken", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.user.AuthResponse] RefreshToken() on controller MappyApplication.Controllers.AuthController (MappyApplication).
2025-11-16 17:38:15.233 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__refreshToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`RefreshToken` = @__refreshToken_0
LIMIT 2
2025-11-16 17:38:15.234 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`FirstName`, `a`.`LastName`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`
FROM `AspNetUsers` AS `a`
WHERE `a`.`Id` = @__p_0
LIMIT 1
2025-11-16 17:38:15.240 +03:00 [INF] Executed DbCommand (5ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']

        UPDATE TOKENS
        SET Revoked = true, Expired = true
        WHERE UserId = @p0
          AND DeviceId = @p1
          AND Revoked = false
          AND Expired = false
2025-11-16 17:38:15.242 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a0`.`Name`
FROM `AspNetUserRoles` AS `a`
INNER JOIN `AspNetRoles` AS `a0` ON `a`.`RoleId` = `a0`.`Id`
WHERE `a`.`UserId` = @__userId_0
2025-11-16 17:38:15.243 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ClaimType`, `a`.`ClaimValue`, `a`.`UserId`
FROM `AspNetUserClaims` AS `a`
WHERE `a`.`UserId` = @__user_Id_0
2025-11-16 17:38:15.244 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a0`.`Name`
FROM `AspNetUserRoles` AS `a`
INNER JOIN `AspNetRoles` AS `a0` ON `a`.`RoleId` = `a0`.`Id`
WHERE `a`.`UserId` = @__userId_0
2025-11-16 17:38:15.244 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ClaimType`, `a`.`ClaimValue`, `a`.`UserId`
FROM `AspNetUserClaims` AS `a`
WHERE `a`.`UserId` = @__user_Id_0
2025-11-16 17:38:15.247 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (DbType = DateTime), @p2='?' (Size = 4000), @p3='?' (DbType = Boolean), @p4='?' (Size = 4000), @p5='?' (DbType = Boolean), @p6='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO `Tokens` (`AccessToken`, `CreatedAt`, `DeviceId`, `Expired`, `RefreshToken`, `Revoked`, `UserId`)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6);
SELECT `Id`
FROM `Tokens`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();
2025-11-16 17:38:15.248 +03:00 [INF] Added Token MappyApplication.Data.Token
2025-11-16 17:38:15.249 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessFailedCount`, `t`.`ConcurrencyStamp`, `t`.`Email`, `t`.`EmailConfirmed`, `t`.`FirstName`, `t`.`LastName`, `t`.`LockoutEnabled`, `t`.`LockoutEnd`, `t`.`NormalizedEmail`, `t`.`NormalizedUserName`, `t`.`PasswordHash`, `t`.`PhoneNumber`, `t`.`PhoneNumberConfirmed`, `t`.`SecurityStamp`, `t`.`TwoFactorEnabled`, `t`.`UserName`, `w`.`Id`, `w`.`Cadence`, `w`.`CityName`, `w`.`Coords`, `w`.`Date`, `w`.`Distance`, `w`.`Duration`, `w`.`Emoji`, `w`.`Pace`, `w`.`Type`, `w`.`UserId`, `c`.`Id`, `c`.`CityName`, `c`.`Country`, `c`.`Date`, `c`.`Emoji`, `c`.`Lat`, `c`.`Lng`, `c`.`Notes`, `c`.`UserId`
FROM (
    SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`FirstName`, `a`.`LastName`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`
    FROM `AspNetUsers` AS `a`
    WHERE `a`.`Id` = @__user_Id_0
    LIMIT 2
) AS `t`
LEFT JOIN `Workouts` AS `w` ON `t`.`Id` = `w`.`UserId`
LEFT JOIN `Cities` AS `c` ON `t`.`Id` = `c`.`UserId`
ORDER BY `t`.`Id`, `w`.`Id`
2025-11-16 17:38:15.249 +03:00 [INF] Executing ObjectResult, writing value of type 'MappyApplication.Models.user.AuthResponse'.
2025-11-16 17:38:15.250 +03:00 [INF] Executed action MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication) in 17.8793ms
2025-11-16 17:38:15.250 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication)'
2025-11-16 17:38:15.250 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:8080/api/v1/auth/refresh-token - 200 null application/json; charset=utf-8 55.3852ms
2025-11-16 17:38:15.451 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:8080/api/v1/auth/refresh-token - null 0
2025-11-16 17:38:15.451 +03:00 [INF] CORS policy execution successful.
2025-11-16 17:38:15.468 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 17:38:15.468 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication)'
2025-11-16 17:38:15.468 +03:00 [INF] Route matched with {action = "RefreshToken", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.user.AuthResponse] RefreshToken() on controller MappyApplication.Controllers.AuthController (MappyApplication).
2025-11-16 17:38:15.470 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__refreshToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`RefreshToken` = @__refreshToken_0
LIMIT 2
2025-11-16 17:38:15.470 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`FirstName`, `a`.`LastName`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`
FROM `AspNetUsers` AS `a`
WHERE `a`.`Id` = @__p_0
LIMIT 1
2025-11-16 17:38:15.477 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']

        UPDATE TOKENS
        SET Revoked = true, Expired = true
        WHERE UserId = @p0
          AND DeviceId = @p1
          AND Revoked = false
          AND Expired = false
2025-11-16 17:38:15.478 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a0`.`Name`
FROM `AspNetUserRoles` AS `a`
INNER JOIN `AspNetRoles` AS `a0` ON `a`.`RoleId` = `a0`.`Id`
WHERE `a`.`UserId` = @__userId_0
2025-11-16 17:38:15.479 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ClaimType`, `a`.`ClaimValue`, `a`.`UserId`
FROM `AspNetUserClaims` AS `a`
WHERE `a`.`UserId` = @__user_Id_0
2025-11-16 17:38:15.480 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a0`.`Name`
FROM `AspNetUserRoles` AS `a`
INNER JOIN `AspNetRoles` AS `a0` ON `a`.`RoleId` = `a0`.`Id`
WHERE `a`.`UserId` = @__userId_0
2025-11-16 17:38:15.480 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ClaimType`, `a`.`ClaimValue`, `a`.`UserId`
FROM `AspNetUserClaims` AS `a`
WHERE `a`.`UserId` = @__user_Id_0
2025-11-16 17:38:15.481 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (DbType = DateTime), @p2='?' (Size = 4000), @p3='?' (DbType = Boolean), @p4='?' (Size = 4000), @p5='?' (DbType = Boolean), @p6='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO `Tokens` (`AccessToken`, `CreatedAt`, `DeviceId`, `Expired`, `RefreshToken`, `Revoked`, `UserId`)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6);
SELECT `Id`
FROM `Tokens`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();
2025-11-16 17:38:15.482 +03:00 [INF] Added Token MappyApplication.Data.Token
2025-11-16 17:38:15.483 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessFailedCount`, `t`.`ConcurrencyStamp`, `t`.`Email`, `t`.`EmailConfirmed`, `t`.`FirstName`, `t`.`LastName`, `t`.`LockoutEnabled`, `t`.`LockoutEnd`, `t`.`NormalizedEmail`, `t`.`NormalizedUserName`, `t`.`PasswordHash`, `t`.`PhoneNumber`, `t`.`PhoneNumberConfirmed`, `t`.`SecurityStamp`, `t`.`TwoFactorEnabled`, `t`.`UserName`, `w`.`Id`, `w`.`Cadence`, `w`.`CityName`, `w`.`Coords`, `w`.`Date`, `w`.`Distance`, `w`.`Duration`, `w`.`Emoji`, `w`.`Pace`, `w`.`Type`, `w`.`UserId`, `c`.`Id`, `c`.`CityName`, `c`.`Country`, `c`.`Date`, `c`.`Emoji`, `c`.`Lat`, `c`.`Lng`, `c`.`Notes`, `c`.`UserId`
FROM (
    SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`FirstName`, `a`.`LastName`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`
    FROM `AspNetUsers` AS `a`
    WHERE `a`.`Id` = @__user_Id_0
    LIMIT 2
) AS `t`
LEFT JOIN `Workouts` AS `w` ON `t`.`Id` = `w`.`UserId`
LEFT JOIN `Cities` AS `c` ON `t`.`Id` = `c`.`UserId`
ORDER BY `t`.`Id`, `w`.`Id`
2025-11-16 17:38:15.484 +03:00 [INF] Executing ObjectResult, writing value of type 'MappyApplication.Models.user.AuthResponse'.
2025-11-16 17:38:15.484 +03:00 [INF] Executed action MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication) in 15.5175ms
2025-11-16 17:38:15.484 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication)'
2025-11-16 17:38:15.484 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:8080/api/v1/auth/refresh-token - 200 null application/json; charset=utf-8 32.8554ms
2025-11-16 17:38:16.491 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:8080/api/v1/auth/refresh-token - null 0
2025-11-16 17:38:16.492 +03:00 [INF] CORS policy execution successful.
2025-11-16 17:38:16.513 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 17:38:16.513 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication)'
2025-11-16 17:38:16.513 +03:00 [INF] Route matched with {action = "RefreshToken", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.user.AuthResponse] RefreshToken() on controller MappyApplication.Controllers.AuthController (MappyApplication).
2025-11-16 17:38:16.515 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__refreshToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`RefreshToken` = @__refreshToken_0
LIMIT 2
2025-11-16 17:38:16.516 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`FirstName`, `a`.`LastName`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`
FROM `AspNetUsers` AS `a`
WHERE `a`.`Id` = @__p_0
LIMIT 1
2025-11-16 17:38:16.520 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']

        UPDATE TOKENS
        SET Revoked = true, Expired = true
        WHERE UserId = @p0
          AND DeviceId = @p1
          AND Revoked = false
          AND Expired = false
2025-11-16 17:38:16.522 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a0`.`Name`
FROM `AspNetUserRoles` AS `a`
INNER JOIN `AspNetRoles` AS `a0` ON `a`.`RoleId` = `a0`.`Id`
WHERE `a`.`UserId` = @__userId_0
2025-11-16 17:38:16.527 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ClaimType`, `a`.`ClaimValue`, `a`.`UserId`
FROM `AspNetUserClaims` AS `a`
WHERE `a`.`UserId` = @__user_Id_0
2025-11-16 17:38:16.529 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a0`.`Name`
FROM `AspNetUserRoles` AS `a`
INNER JOIN `AspNetRoles` AS `a0` ON `a`.`RoleId` = `a0`.`Id`
WHERE `a`.`UserId` = @__userId_0
2025-11-16 17:38:16.529 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ClaimType`, `a`.`ClaimValue`, `a`.`UserId`
FROM `AspNetUserClaims` AS `a`
WHERE `a`.`UserId` = @__user_Id_0
2025-11-16 17:38:16.532 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (DbType = DateTime), @p2='?' (Size = 4000), @p3='?' (DbType = Boolean), @p4='?' (Size = 4000), @p5='?' (DbType = Boolean), @p6='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO `Tokens` (`AccessToken`, `CreatedAt`, `DeviceId`, `Expired`, `RefreshToken`, `Revoked`, `UserId`)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6);
SELECT `Id`
FROM `Tokens`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();
2025-11-16 17:38:16.533 +03:00 [INF] Added Token MappyApplication.Data.Token
2025-11-16 17:38:16.534 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessFailedCount`, `t`.`ConcurrencyStamp`, `t`.`Email`, `t`.`EmailConfirmed`, `t`.`FirstName`, `t`.`LastName`, `t`.`LockoutEnabled`, `t`.`LockoutEnd`, `t`.`NormalizedEmail`, `t`.`NormalizedUserName`, `t`.`PasswordHash`, `t`.`PhoneNumber`, `t`.`PhoneNumberConfirmed`, `t`.`SecurityStamp`, `t`.`TwoFactorEnabled`, `t`.`UserName`, `w`.`Id`, `w`.`Cadence`, `w`.`CityName`, `w`.`Coords`, `w`.`Date`, `w`.`Distance`, `w`.`Duration`, `w`.`Emoji`, `w`.`Pace`, `w`.`Type`, `w`.`UserId`, `c`.`Id`, `c`.`CityName`, `c`.`Country`, `c`.`Date`, `c`.`Emoji`, `c`.`Lat`, `c`.`Lng`, `c`.`Notes`, `c`.`UserId`
FROM (
    SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`FirstName`, `a`.`LastName`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`
    FROM `AspNetUsers` AS `a`
    WHERE `a`.`Id` = @__user_Id_0
    LIMIT 2
) AS `t`
LEFT JOIN `Workouts` AS `w` ON `t`.`Id` = `w`.`UserId`
LEFT JOIN `Cities` AS `c` ON `t`.`Id` = `c`.`UserId`
ORDER BY `t`.`Id`, `w`.`Id`
2025-11-16 17:38:16.534 +03:00 [INF] Executing ObjectResult, writing value of type 'MappyApplication.Models.user.AuthResponse'.
2025-11-16 17:38:16.534 +03:00 [INF] Executed action MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication) in 21.1107ms
2025-11-16 17:38:16.534 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication)'
2025-11-16 17:38:16.534 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:8080/api/v1/auth/refresh-token - 200 null application/json; charset=utf-8 43.3407ms
2025-11-16 17:38:17.502 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:8080/api/v1/auth/refresh-token - null 0
2025-11-16 17:38:17.503 +03:00 [INF] CORS policy execution successful.
2025-11-16 17:38:17.527 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 17:38:17.527 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication)'
2025-11-16 17:38:17.527 +03:00 [INF] Route matched with {action = "RefreshToken", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.user.AuthResponse] RefreshToken() on controller MappyApplication.Controllers.AuthController (MappyApplication).
2025-11-16 17:38:17.528 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__refreshToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`RefreshToken` = @__refreshToken_0
LIMIT 2
2025-11-16 17:38:17.530 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`FirstName`, `a`.`LastName`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`
FROM `AspNetUsers` AS `a`
WHERE `a`.`Id` = @__p_0
LIMIT 1
2025-11-16 17:38:17.531 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']

        UPDATE TOKENS
        SET Revoked = true, Expired = true
        WHERE UserId = @p0
          AND DeviceId = @p1
          AND Revoked = false
          AND Expired = false
2025-11-16 17:38:17.533 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a0`.`Name`
FROM `AspNetUserRoles` AS `a`
INNER JOIN `AspNetRoles` AS `a0` ON `a`.`RoleId` = `a0`.`Id`
WHERE `a`.`UserId` = @__userId_0
2025-11-16 17:38:17.534 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ClaimType`, `a`.`ClaimValue`, `a`.`UserId`
FROM `AspNetUserClaims` AS `a`
WHERE `a`.`UserId` = @__user_Id_0
2025-11-16 17:38:17.534 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a0`.`Name`
FROM `AspNetUserRoles` AS `a`
INNER JOIN `AspNetRoles` AS `a0` ON `a`.`RoleId` = `a0`.`Id`
WHERE `a`.`UserId` = @__userId_0
2025-11-16 17:38:17.536 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ClaimType`, `a`.`ClaimValue`, `a`.`UserId`
FROM `AspNetUserClaims` AS `a`
WHERE `a`.`UserId` = @__user_Id_0
2025-11-16 17:38:17.538 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (DbType = DateTime), @p2='?' (Size = 4000), @p3='?' (DbType = Boolean), @p4='?' (Size = 4000), @p5='?' (DbType = Boolean), @p6='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO `Tokens` (`AccessToken`, `CreatedAt`, `DeviceId`, `Expired`, `RefreshToken`, `Revoked`, `UserId`)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6);
SELECT `Id`
FROM `Tokens`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();
2025-11-16 17:38:17.538 +03:00 [INF] Added Token MappyApplication.Data.Token
2025-11-16 17:38:17.539 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessFailedCount`, `t`.`ConcurrencyStamp`, `t`.`Email`, `t`.`EmailConfirmed`, `t`.`FirstName`, `t`.`LastName`, `t`.`LockoutEnabled`, `t`.`LockoutEnd`, `t`.`NormalizedEmail`, `t`.`NormalizedUserName`, `t`.`PasswordHash`, `t`.`PhoneNumber`, `t`.`PhoneNumberConfirmed`, `t`.`SecurityStamp`, `t`.`TwoFactorEnabled`, `t`.`UserName`, `w`.`Id`, `w`.`Cadence`, `w`.`CityName`, `w`.`Coords`, `w`.`Date`, `w`.`Distance`, `w`.`Duration`, `w`.`Emoji`, `w`.`Pace`, `w`.`Type`, `w`.`UserId`, `c`.`Id`, `c`.`CityName`, `c`.`Country`, `c`.`Date`, `c`.`Emoji`, `c`.`Lat`, `c`.`Lng`, `c`.`Notes`, `c`.`UserId`
FROM (
    SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`FirstName`, `a`.`LastName`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`
    FROM `AspNetUsers` AS `a`
    WHERE `a`.`Id` = @__user_Id_0
    LIMIT 2
) AS `t`
LEFT JOIN `Workouts` AS `w` ON `t`.`Id` = `w`.`UserId`
LEFT JOIN `Cities` AS `c` ON `t`.`Id` = `c`.`UserId`
ORDER BY `t`.`Id`, `w`.`Id`
2025-11-16 17:38:17.539 +03:00 [INF] Executing ObjectResult, writing value of type 'MappyApplication.Models.user.AuthResponse'.
2025-11-16 17:38:17.540 +03:00 [INF] Executed action MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication) in 12.4173ms
2025-11-16 17:38:17.540 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication)'
2025-11-16 17:38:17.540 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:8080/api/v1/auth/refresh-token - 200 null application/json; charset=utf-8 37.3413ms
2025-11-16 17:38:18.460 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:8080/api/v1/auth/refresh-token - null 0
2025-11-16 17:38:18.461 +03:00 [INF] CORS policy execution successful.
2025-11-16 17:38:18.481 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 17:38:18.481 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication)'
2025-11-16 17:38:18.482 +03:00 [INF] Route matched with {action = "RefreshToken", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.user.AuthResponse] RefreshToken() on controller MappyApplication.Controllers.AuthController (MappyApplication).
2025-11-16 17:38:18.484 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__refreshToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`RefreshToken` = @__refreshToken_0
LIMIT 2
2025-11-16 17:38:18.485 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`FirstName`, `a`.`LastName`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`
FROM `AspNetUsers` AS `a`
WHERE `a`.`Id` = @__p_0
LIMIT 1
2025-11-16 17:38:18.487 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']

        UPDATE TOKENS
        SET Revoked = true, Expired = true
        WHERE UserId = @p0
          AND DeviceId = @p1
          AND Revoked = false
          AND Expired = false
2025-11-16 17:38:18.488 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a0`.`Name`
FROM `AspNetUserRoles` AS `a`
INNER JOIN `AspNetRoles` AS `a0` ON `a`.`RoleId` = `a0`.`Id`
WHERE `a`.`UserId` = @__userId_0
2025-11-16 17:38:18.488 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ClaimType`, `a`.`ClaimValue`, `a`.`UserId`
FROM `AspNetUserClaims` AS `a`
WHERE `a`.`UserId` = @__user_Id_0
2025-11-16 17:38:18.489 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a0`.`Name`
FROM `AspNetUserRoles` AS `a`
INNER JOIN `AspNetRoles` AS `a0` ON `a`.`RoleId` = `a0`.`Id`
WHERE `a`.`UserId` = @__userId_0
2025-11-16 17:38:18.490 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ClaimType`, `a`.`ClaimValue`, `a`.`UserId`
FROM `AspNetUserClaims` AS `a`
WHERE `a`.`UserId` = @__user_Id_0
2025-11-16 17:38:18.496 +03:00 [INF] Executed DbCommand (4ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (DbType = DateTime), @p2='?' (Size = 4000), @p3='?' (DbType = Boolean), @p4='?' (Size = 4000), @p5='?' (DbType = Boolean), @p6='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO `Tokens` (`AccessToken`, `CreatedAt`, `DeviceId`, `Expired`, `RefreshToken`, `Revoked`, `UserId`)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6);
SELECT `Id`
FROM `Tokens`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();
2025-11-16 17:38:18.497 +03:00 [INF] Added Token MappyApplication.Data.Token
2025-11-16 17:38:18.498 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessFailedCount`, `t`.`ConcurrencyStamp`, `t`.`Email`, `t`.`EmailConfirmed`, `t`.`FirstName`, `t`.`LastName`, `t`.`LockoutEnabled`, `t`.`LockoutEnd`, `t`.`NormalizedEmail`, `t`.`NormalizedUserName`, `t`.`PasswordHash`, `t`.`PhoneNumber`, `t`.`PhoneNumberConfirmed`, `t`.`SecurityStamp`, `t`.`TwoFactorEnabled`, `t`.`UserName`, `w`.`Id`, `w`.`Cadence`, `w`.`CityName`, `w`.`Coords`, `w`.`Date`, `w`.`Distance`, `w`.`Duration`, `w`.`Emoji`, `w`.`Pace`, `w`.`Type`, `w`.`UserId`, `c`.`Id`, `c`.`CityName`, `c`.`Country`, `c`.`Date`, `c`.`Emoji`, `c`.`Lat`, `c`.`Lng`, `c`.`Notes`, `c`.`UserId`
FROM (
    SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`FirstName`, `a`.`LastName`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`
    FROM `AspNetUsers` AS `a`
    WHERE `a`.`Id` = @__user_Id_0
    LIMIT 2
) AS `t`
LEFT JOIN `Workouts` AS `w` ON `t`.`Id` = `w`.`UserId`
LEFT JOIN `Cities` AS `c` ON `t`.`Id` = `c`.`UserId`
ORDER BY `t`.`Id`, `w`.`Id`
2025-11-16 17:38:18.498 +03:00 [INF] Executing ObjectResult, writing value of type 'MappyApplication.Models.user.AuthResponse'.
2025-11-16 17:38:18.498 +03:00 [INF] Executed action MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication) in 15.9ms
2025-11-16 17:38:18.498 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication)'
2025-11-16 17:38:18.499 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:8080/api/v1/auth/refresh-token - 200 null application/json; charset=utf-8 39.0475ms
2025-11-16 17:38:26.284 +03:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:8080/api/v1/auth/refresh-token - null null
2025-11-16 17:38:26.285 +03:00 [INF] CORS policy execution successful.
2025-11-16 17:38:26.285 +03:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:8080/api/v1/auth/refresh-token - 204 null null 1.3852ms
2025-11-16 17:38:26.293 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:8080/api/v1/auth/refresh-token - null 0
2025-11-16 17:38:26.293 +03:00 [INF] CORS policy execution successful.
2025-11-16 17:38:26.323 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 17:38:26.323 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication)'
2025-11-16 17:38:26.323 +03:00 [INF] Route matched with {action = "RefreshToken", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.user.AuthResponse] RefreshToken() on controller MappyApplication.Controllers.AuthController (MappyApplication).
2025-11-16 17:38:26.324 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__refreshToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`RefreshToken` = @__refreshToken_0
LIMIT 2
2025-11-16 17:38:26.325 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`FirstName`, `a`.`LastName`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`
FROM `AspNetUsers` AS `a`
WHERE `a`.`Id` = @__p_0
LIMIT 1
2025-11-16 17:38:26.328 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']

        UPDATE TOKENS
        SET Revoked = true, Expired = true
        WHERE UserId = @p0
          AND DeviceId = @p1
          AND Revoked = false
          AND Expired = false
2025-11-16 17:38:26.329 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a0`.`Name`
FROM `AspNetUserRoles` AS `a`
INNER JOIN `AspNetRoles` AS `a0` ON `a`.`RoleId` = `a0`.`Id`
WHERE `a`.`UserId` = @__userId_0
2025-11-16 17:38:26.330 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ClaimType`, `a`.`ClaimValue`, `a`.`UserId`
FROM `AspNetUserClaims` AS `a`
WHERE `a`.`UserId` = @__user_Id_0
2025-11-16 17:38:26.331 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a0`.`Name`
FROM `AspNetUserRoles` AS `a`
INNER JOIN `AspNetRoles` AS `a0` ON `a`.`RoleId` = `a0`.`Id`
WHERE `a`.`UserId` = @__userId_0
2025-11-16 17:38:26.331 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ClaimType`, `a`.`ClaimValue`, `a`.`UserId`
FROM `AspNetUserClaims` AS `a`
WHERE `a`.`UserId` = @__user_Id_0
2025-11-16 17:38:26.335 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (DbType = DateTime), @p2='?' (Size = 4000), @p3='?' (DbType = Boolean), @p4='?' (Size = 4000), @p5='?' (DbType = Boolean), @p6='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO `Tokens` (`AccessToken`, `CreatedAt`, `DeviceId`, `Expired`, `RefreshToken`, `Revoked`, `UserId`)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6);
SELECT `Id`
FROM `Tokens`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();
2025-11-16 17:38:26.336 +03:00 [INF] Added Token MappyApplication.Data.Token
2025-11-16 17:38:26.337 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessFailedCount`, `t`.`ConcurrencyStamp`, `t`.`Email`, `t`.`EmailConfirmed`, `t`.`FirstName`, `t`.`LastName`, `t`.`LockoutEnabled`, `t`.`LockoutEnd`, `t`.`NormalizedEmail`, `t`.`NormalizedUserName`, `t`.`PasswordHash`, `t`.`PhoneNumber`, `t`.`PhoneNumberConfirmed`, `t`.`SecurityStamp`, `t`.`TwoFactorEnabled`, `t`.`UserName`, `w`.`Id`, `w`.`Cadence`, `w`.`CityName`, `w`.`Coords`, `w`.`Date`, `w`.`Distance`, `w`.`Duration`, `w`.`Emoji`, `w`.`Pace`, `w`.`Type`, `w`.`UserId`, `c`.`Id`, `c`.`CityName`, `c`.`Country`, `c`.`Date`, `c`.`Emoji`, `c`.`Lat`, `c`.`Lng`, `c`.`Notes`, `c`.`UserId`
FROM (
    SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`FirstName`, `a`.`LastName`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`
    FROM `AspNetUsers` AS `a`
    WHERE `a`.`Id` = @__user_Id_0
    LIMIT 2
) AS `t`
LEFT JOIN `Workouts` AS `w` ON `t`.`Id` = `w`.`UserId`
LEFT JOIN `Cities` AS `c` ON `t`.`Id` = `c`.`UserId`
ORDER BY `t`.`Id`, `w`.`Id`
2025-11-16 17:38:26.337 +03:00 [INF] Executing ObjectResult, writing value of type 'MappyApplication.Models.user.AuthResponse'.
2025-11-16 17:38:26.338 +03:00 [INF] Executed action MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication) in 14.257ms
2025-11-16 17:38:26.338 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication)'
2025-11-16 17:38:26.338 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:8080/api/v1/auth/refresh-token - 200 null application/json; charset=utf-8 45.1537ms
2025-11-16 17:38:29.346 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:8080/api/v1/auth/refresh-token - null 0
2025-11-16 17:38:29.346 +03:00 [INF] CORS policy execution successful.
2025-11-16 17:38:29.392 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 17:38:29.393 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication)'
2025-11-16 17:38:29.393 +03:00 [INF] Route matched with {action = "RefreshToken", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.user.AuthResponse] RefreshToken() on controller MappyApplication.Controllers.AuthController (MappyApplication).
2025-11-16 17:38:29.394 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__refreshToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`RefreshToken` = @__refreshToken_0
LIMIT 2
2025-11-16 17:38:29.395 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`FirstName`, `a`.`LastName`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`
FROM `AspNetUsers` AS `a`
WHERE `a`.`Id` = @__p_0
LIMIT 1
2025-11-16 17:38:29.397 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']

        UPDATE TOKENS
        SET Revoked = true, Expired = true
        WHERE UserId = @p0
          AND DeviceId = @p1
          AND Revoked = false
          AND Expired = false
2025-11-16 17:38:29.397 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a0`.`Name`
FROM `AspNetUserRoles` AS `a`
INNER JOIN `AspNetRoles` AS `a0` ON `a`.`RoleId` = `a0`.`Id`
WHERE `a`.`UserId` = @__userId_0
2025-11-16 17:38:29.398 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ClaimType`, `a`.`ClaimValue`, `a`.`UserId`
FROM `AspNetUserClaims` AS `a`
WHERE `a`.`UserId` = @__user_Id_0
2025-11-16 17:38:29.400 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a0`.`Name`
FROM `AspNetUserRoles` AS `a`
INNER JOIN `AspNetRoles` AS `a0` ON `a`.`RoleId` = `a0`.`Id`
WHERE `a`.`UserId` = @__userId_0
2025-11-16 17:38:29.400 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ClaimType`, `a`.`ClaimValue`, `a`.`UserId`
FROM `AspNetUserClaims` AS `a`
WHERE `a`.`UserId` = @__user_Id_0
2025-11-16 17:38:29.402 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (DbType = DateTime), @p2='?' (Size = 4000), @p3='?' (DbType = Boolean), @p4='?' (Size = 4000), @p5='?' (DbType = Boolean), @p6='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO `Tokens` (`AccessToken`, `CreatedAt`, `DeviceId`, `Expired`, `RefreshToken`, `Revoked`, `UserId`)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6);
SELECT `Id`
FROM `Tokens`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();
2025-11-16 17:38:29.403 +03:00 [INF] Added Token MappyApplication.Data.Token
2025-11-16 17:38:29.404 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessFailedCount`, `t`.`ConcurrencyStamp`, `t`.`Email`, `t`.`EmailConfirmed`, `t`.`FirstName`, `t`.`LastName`, `t`.`LockoutEnabled`, `t`.`LockoutEnd`, `t`.`NormalizedEmail`, `t`.`NormalizedUserName`, `t`.`PasswordHash`, `t`.`PhoneNumber`, `t`.`PhoneNumberConfirmed`, `t`.`SecurityStamp`, `t`.`TwoFactorEnabled`, `t`.`UserName`, `w`.`Id`, `w`.`Cadence`, `w`.`CityName`, `w`.`Coords`, `w`.`Date`, `w`.`Distance`, `w`.`Duration`, `w`.`Emoji`, `w`.`Pace`, `w`.`Type`, `w`.`UserId`, `c`.`Id`, `c`.`CityName`, `c`.`Country`, `c`.`Date`, `c`.`Emoji`, `c`.`Lat`, `c`.`Lng`, `c`.`Notes`, `c`.`UserId`
FROM (
    SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`FirstName`, `a`.`LastName`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`
    FROM `AspNetUsers` AS `a`
    WHERE `a`.`Id` = @__user_Id_0
    LIMIT 2
) AS `t`
LEFT JOIN `Workouts` AS `w` ON `t`.`Id` = `w`.`UserId`
LEFT JOIN `Cities` AS `c` ON `t`.`Id` = `c`.`UserId`
ORDER BY `t`.`Id`, `w`.`Id`
2025-11-16 17:38:29.404 +03:00 [INF] Executing ObjectResult, writing value of type 'MappyApplication.Models.user.AuthResponse'.
2025-11-16 17:38:29.404 +03:00 [INF] Executed action MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication) in 11.7573ms
2025-11-16 17:38:29.404 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication)'
2025-11-16 17:38:29.405 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:8080/api/v1/auth/refresh-token - 200 null application/json; charset=utf-8 58.5096ms
2025-11-16 17:38:57.047 +03:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:8080/api/v1/auth/refresh-token - null null
2025-11-16 17:38:57.059 +03:00 [INF] CORS policy execution successful.
2025-11-16 17:38:57.059 +03:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:8080/api/v1/auth/refresh-token - 204 null null 12.2926ms
2025-11-16 17:38:57.060 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:8080/api/v1/auth/refresh-token - null 0
2025-11-16 17:38:57.061 +03:00 [INF] CORS policy execution successful.
2025-11-16 17:38:57.093 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 17:38:57.094 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication)'
2025-11-16 17:38:57.094 +03:00 [INF] Route matched with {action = "RefreshToken", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.user.AuthResponse] RefreshToken() on controller MappyApplication.Controllers.AuthController (MappyApplication).
2025-11-16 17:38:57.095 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__refreshToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`RefreshToken` = @__refreshToken_0
LIMIT 2
2025-11-16 17:38:57.097 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`FirstName`, `a`.`LastName`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`
FROM `AspNetUsers` AS `a`
WHERE `a`.`Id` = @__p_0
LIMIT 1
2025-11-16 17:38:57.100 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']

        UPDATE TOKENS
        SET Revoked = true, Expired = true
        WHERE UserId = @p0
          AND DeviceId = @p1
          AND Revoked = false
          AND Expired = false
2025-11-16 17:38:57.101 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a0`.`Name`
FROM `AspNetUserRoles` AS `a`
INNER JOIN `AspNetRoles` AS `a0` ON `a`.`RoleId` = `a0`.`Id`
WHERE `a`.`UserId` = @__userId_0
2025-11-16 17:38:57.102 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ClaimType`, `a`.`ClaimValue`, `a`.`UserId`
FROM `AspNetUserClaims` AS `a`
WHERE `a`.`UserId` = @__user_Id_0
2025-11-16 17:38:57.103 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a0`.`Name`
FROM `AspNetUserRoles` AS `a`
INNER JOIN `AspNetRoles` AS `a0` ON `a`.`RoleId` = `a0`.`Id`
WHERE `a`.`UserId` = @__userId_0
2025-11-16 17:38:57.104 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ClaimType`, `a`.`ClaimValue`, `a`.`UserId`
FROM `AspNetUserClaims` AS `a`
WHERE `a`.`UserId` = @__user_Id_0
2025-11-16 17:38:57.106 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (DbType = DateTime), @p2='?' (Size = 4000), @p3='?' (DbType = Boolean), @p4='?' (Size = 4000), @p5='?' (DbType = Boolean), @p6='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO `Tokens` (`AccessToken`, `CreatedAt`, `DeviceId`, `Expired`, `RefreshToken`, `Revoked`, `UserId`)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6);
SELECT `Id`
FROM `Tokens`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();
2025-11-16 17:38:57.106 +03:00 [INF] Added Token MappyApplication.Data.Token
2025-11-16 17:38:57.109 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessFailedCount`, `t`.`ConcurrencyStamp`, `t`.`Email`, `t`.`EmailConfirmed`, `t`.`FirstName`, `t`.`LastName`, `t`.`LockoutEnabled`, `t`.`LockoutEnd`, `t`.`NormalizedEmail`, `t`.`NormalizedUserName`, `t`.`PasswordHash`, `t`.`PhoneNumber`, `t`.`PhoneNumberConfirmed`, `t`.`SecurityStamp`, `t`.`TwoFactorEnabled`, `t`.`UserName`, `w`.`Id`, `w`.`Cadence`, `w`.`CityName`, `w`.`Coords`, `w`.`Date`, `w`.`Distance`, `w`.`Duration`, `w`.`Emoji`, `w`.`Pace`, `w`.`Type`, `w`.`UserId`, `c`.`Id`, `c`.`CityName`, `c`.`Country`, `c`.`Date`, `c`.`Emoji`, `c`.`Lat`, `c`.`Lng`, `c`.`Notes`, `c`.`UserId`
FROM (
    SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`FirstName`, `a`.`LastName`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`
    FROM `AspNetUsers` AS `a`
    WHERE `a`.`Id` = @__user_Id_0
    LIMIT 2
) AS `t`
LEFT JOIN `Workouts` AS `w` ON `t`.`Id` = `w`.`UserId`
LEFT JOIN `Cities` AS `c` ON `t`.`Id` = `c`.`UserId`
ORDER BY `t`.`Id`, `w`.`Id`
2025-11-16 17:38:57.109 +03:00 [INF] Executing ObjectResult, writing value of type 'MappyApplication.Models.user.AuthResponse'.
2025-11-16 17:38:57.110 +03:00 [INF] Executed action MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication) in 15.109ms
2025-11-16 17:38:57.110 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication)'
2025-11-16 17:38:57.110 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:8080/api/v1/auth/refresh-token - 200 null application/json; charset=utf-8 49.32ms
2025-11-16 17:38:58.805 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:8080/api/v1/auth/refresh-token - null 0
2025-11-16 17:38:58.807 +03:00 [INF] CORS policy execution successful.
2025-11-16 17:38:58.828 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 17:38:58.829 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication)'
2025-11-16 17:38:58.829 +03:00 [INF] Route matched with {action = "RefreshToken", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.user.AuthResponse] RefreshToken() on controller MappyApplication.Controllers.AuthController (MappyApplication).
2025-11-16 17:38:58.829 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__refreshToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`RefreshToken` = @__refreshToken_0
LIMIT 2
2025-11-16 17:38:58.830 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`FirstName`, `a`.`LastName`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`
FROM `AspNetUsers` AS `a`
WHERE `a`.`Id` = @__p_0
LIMIT 1
2025-11-16 17:38:58.833 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']

        UPDATE TOKENS
        SET Revoked = true, Expired = true
        WHERE UserId = @p0
          AND DeviceId = @p1
          AND Revoked = false
          AND Expired = false
2025-11-16 17:38:58.834 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a0`.`Name`
FROM `AspNetUserRoles` AS `a`
INNER JOIN `AspNetRoles` AS `a0` ON `a`.`RoleId` = `a0`.`Id`
WHERE `a`.`UserId` = @__userId_0
2025-11-16 17:38:58.835 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ClaimType`, `a`.`ClaimValue`, `a`.`UserId`
FROM `AspNetUserClaims` AS `a`
WHERE `a`.`UserId` = @__user_Id_0
2025-11-16 17:38:58.836 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a0`.`Name`
FROM `AspNetUserRoles` AS `a`
INNER JOIN `AspNetRoles` AS `a0` ON `a`.`RoleId` = `a0`.`Id`
WHERE `a`.`UserId` = @__userId_0
2025-11-16 17:38:58.837 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ClaimType`, `a`.`ClaimValue`, `a`.`UserId`
FROM `AspNetUserClaims` AS `a`
WHERE `a`.`UserId` = @__user_Id_0
2025-11-16 17:38:58.839 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (DbType = DateTime), @p2='?' (Size = 4000), @p3='?' (DbType = Boolean), @p4='?' (Size = 4000), @p5='?' (DbType = Boolean), @p6='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO `Tokens` (`AccessToken`, `CreatedAt`, `DeviceId`, `Expired`, `RefreshToken`, `Revoked`, `UserId`)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6);
SELECT `Id`
FROM `Tokens`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();
2025-11-16 17:38:58.840 +03:00 [INF] Added Token MappyApplication.Data.Token
2025-11-16 17:38:58.841 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessFailedCount`, `t`.`ConcurrencyStamp`, `t`.`Email`, `t`.`EmailConfirmed`, `t`.`FirstName`, `t`.`LastName`, `t`.`LockoutEnabled`, `t`.`LockoutEnd`, `t`.`NormalizedEmail`, `t`.`NormalizedUserName`, `t`.`PasswordHash`, `t`.`PhoneNumber`, `t`.`PhoneNumberConfirmed`, `t`.`SecurityStamp`, `t`.`TwoFactorEnabled`, `t`.`UserName`, `w`.`Id`, `w`.`Cadence`, `w`.`CityName`, `w`.`Coords`, `w`.`Date`, `w`.`Distance`, `w`.`Duration`, `w`.`Emoji`, `w`.`Pace`, `w`.`Type`, `w`.`UserId`, `c`.`Id`, `c`.`CityName`, `c`.`Country`, `c`.`Date`, `c`.`Emoji`, `c`.`Lat`, `c`.`Lng`, `c`.`Notes`, `c`.`UserId`
FROM (
    SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`FirstName`, `a`.`LastName`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`
    FROM `AspNetUsers` AS `a`
    WHERE `a`.`Id` = @__user_Id_0
    LIMIT 2
) AS `t`
LEFT JOIN `Workouts` AS `w` ON `t`.`Id` = `w`.`UserId`
LEFT JOIN `Cities` AS `c` ON `t`.`Id` = `c`.`UserId`
ORDER BY `t`.`Id`, `w`.`Id`
2025-11-16 17:38:58.841 +03:00 [INF] Executing ObjectResult, writing value of type 'MappyApplication.Models.user.AuthResponse'.
2025-11-16 17:38:58.841 +03:00 [INF] Executed action MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication) in 12.3456ms
2025-11-16 17:38:58.841 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication)'
2025-11-16 17:38:58.841 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:8080/api/v1/auth/refresh-token - 200 null application/json; charset=utf-8 36.3655ms
2025-11-16 17:38:59.673 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:8080/api/v1/auth/refresh-token - null 0
2025-11-16 17:38:59.673 +03:00 [INF] CORS policy execution successful.
2025-11-16 17:38:59.697 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 17:38:59.698 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication)'
2025-11-16 17:38:59.698 +03:00 [INF] Route matched with {action = "RefreshToken", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.user.AuthResponse] RefreshToken() on controller MappyApplication.Controllers.AuthController (MappyApplication).
2025-11-16 17:38:59.701 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__refreshToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`RefreshToken` = @__refreshToken_0
LIMIT 2
2025-11-16 17:38:59.702 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`FirstName`, `a`.`LastName`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`
FROM `AspNetUsers` AS `a`
WHERE `a`.`Id` = @__p_0
LIMIT 1
2025-11-16 17:38:59.704 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']

        UPDATE TOKENS
        SET Revoked = true, Expired = true
        WHERE UserId = @p0
          AND DeviceId = @p1
          AND Revoked = false
          AND Expired = false
2025-11-16 17:38:59.705 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a0`.`Name`
FROM `AspNetUserRoles` AS `a`
INNER JOIN `AspNetRoles` AS `a0` ON `a`.`RoleId` = `a0`.`Id`
WHERE `a`.`UserId` = @__userId_0
2025-11-16 17:38:59.705 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ClaimType`, `a`.`ClaimValue`, `a`.`UserId`
FROM `AspNetUserClaims` AS `a`
WHERE `a`.`UserId` = @__user_Id_0
2025-11-16 17:38:59.706 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a0`.`Name`
FROM `AspNetUserRoles` AS `a`
INNER JOIN `AspNetRoles` AS `a0` ON `a`.`RoleId` = `a0`.`Id`
WHERE `a`.`UserId` = @__userId_0
2025-11-16 17:38:59.708 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ClaimType`, `a`.`ClaimValue`, `a`.`UserId`
FROM `AspNetUserClaims` AS `a`
WHERE `a`.`UserId` = @__user_Id_0
2025-11-16 17:38:59.710 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (DbType = DateTime), @p2='?' (Size = 4000), @p3='?' (DbType = Boolean), @p4='?' (Size = 4000), @p5='?' (DbType = Boolean), @p6='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO `Tokens` (`AccessToken`, `CreatedAt`, `DeviceId`, `Expired`, `RefreshToken`, `Revoked`, `UserId`)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6);
SELECT `Id`
FROM `Tokens`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();
2025-11-16 17:38:59.711 +03:00 [INF] Added Token MappyApplication.Data.Token
2025-11-16 17:38:59.712 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessFailedCount`, `t`.`ConcurrencyStamp`, `t`.`Email`, `t`.`EmailConfirmed`, `t`.`FirstName`, `t`.`LastName`, `t`.`LockoutEnabled`, `t`.`LockoutEnd`, `t`.`NormalizedEmail`, `t`.`NormalizedUserName`, `t`.`PasswordHash`, `t`.`PhoneNumber`, `t`.`PhoneNumberConfirmed`, `t`.`SecurityStamp`, `t`.`TwoFactorEnabled`, `t`.`UserName`, `w`.`Id`, `w`.`Cadence`, `w`.`CityName`, `w`.`Coords`, `w`.`Date`, `w`.`Distance`, `w`.`Duration`, `w`.`Emoji`, `w`.`Pace`, `w`.`Type`, `w`.`UserId`, `c`.`Id`, `c`.`CityName`, `c`.`Country`, `c`.`Date`, `c`.`Emoji`, `c`.`Lat`, `c`.`Lng`, `c`.`Notes`, `c`.`UserId`
FROM (
    SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`FirstName`, `a`.`LastName`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`
    FROM `AspNetUsers` AS `a`
    WHERE `a`.`Id` = @__user_Id_0
    LIMIT 2
) AS `t`
LEFT JOIN `Workouts` AS `w` ON `t`.`Id` = `w`.`UserId`
LEFT JOIN `Cities` AS `c` ON `t`.`Id` = `c`.`UserId`
ORDER BY `t`.`Id`, `w`.`Id`
2025-11-16 17:38:59.712 +03:00 [INF] Executing ObjectResult, writing value of type 'MappyApplication.Models.user.AuthResponse'.
2025-11-16 17:38:59.712 +03:00 [INF] Executed action MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication) in 14.0107ms
2025-11-16 17:38:59.712 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication)'
2025-11-16 17:38:59.713 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:8080/api/v1/auth/refresh-token - 200 null application/json; charset=utf-8 40.0668ms
2025-11-16 17:39:00.258 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:8080/api/v1/auth/refresh-token - null 0
2025-11-16 17:39:00.258 +03:00 [INF] CORS policy execution successful.
2025-11-16 17:39:00.284 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 17:39:00.285 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication)'
2025-11-16 17:39:00.285 +03:00 [INF] Route matched with {action = "RefreshToken", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.user.AuthResponse] RefreshToken() on controller MappyApplication.Controllers.AuthController (MappyApplication).
2025-11-16 17:39:00.286 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__refreshToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`RefreshToken` = @__refreshToken_0
LIMIT 2
2025-11-16 17:39:00.287 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`FirstName`, `a`.`LastName`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`
FROM `AspNetUsers` AS `a`
WHERE `a`.`Id` = @__p_0
LIMIT 1
2025-11-16 17:39:00.292 +03:00 [INF] Executed DbCommand (4ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']

        UPDATE TOKENS
        SET Revoked = true, Expired = true
        WHERE UserId = @p0
          AND DeviceId = @p1
          AND Revoked = false
          AND Expired = false
2025-11-16 17:39:00.294 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a0`.`Name`
FROM `AspNetUserRoles` AS `a`
INNER JOIN `AspNetRoles` AS `a0` ON `a`.`RoleId` = `a0`.`Id`
WHERE `a`.`UserId` = @__userId_0
2025-11-16 17:39:00.294 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ClaimType`, `a`.`ClaimValue`, `a`.`UserId`
FROM `AspNetUserClaims` AS `a`
WHERE `a`.`UserId` = @__user_Id_0
2025-11-16 17:39:00.295 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a0`.`Name`
FROM `AspNetUserRoles` AS `a`
INNER JOIN `AspNetRoles` AS `a0` ON `a`.`RoleId` = `a0`.`Id`
WHERE `a`.`UserId` = @__userId_0
2025-11-16 17:39:00.296 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ClaimType`, `a`.`ClaimValue`, `a`.`UserId`
FROM `AspNetUserClaims` AS `a`
WHERE `a`.`UserId` = @__user_Id_0
2025-11-16 17:39:00.298 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (DbType = DateTime), @p2='?' (Size = 4000), @p3='?' (DbType = Boolean), @p4='?' (Size = 4000), @p5='?' (DbType = Boolean), @p6='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO `Tokens` (`AccessToken`, `CreatedAt`, `DeviceId`, `Expired`, `RefreshToken`, `Revoked`, `UserId`)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6);
SELECT `Id`
FROM `Tokens`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();
2025-11-16 17:39:00.298 +03:00 [INF] Added Token MappyApplication.Data.Token
2025-11-16 17:39:00.301 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessFailedCount`, `t`.`ConcurrencyStamp`, `t`.`Email`, `t`.`EmailConfirmed`, `t`.`FirstName`, `t`.`LastName`, `t`.`LockoutEnabled`, `t`.`LockoutEnd`, `t`.`NormalizedEmail`, `t`.`NormalizedUserName`, `t`.`PasswordHash`, `t`.`PhoneNumber`, `t`.`PhoneNumberConfirmed`, `t`.`SecurityStamp`, `t`.`TwoFactorEnabled`, `t`.`UserName`, `w`.`Id`, `w`.`Cadence`, `w`.`CityName`, `w`.`Coords`, `w`.`Date`, `w`.`Distance`, `w`.`Duration`, `w`.`Emoji`, `w`.`Pace`, `w`.`Type`, `w`.`UserId`, `c`.`Id`, `c`.`CityName`, `c`.`Country`, `c`.`Date`, `c`.`Emoji`, `c`.`Lat`, `c`.`Lng`, `c`.`Notes`, `c`.`UserId`
FROM (
    SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`FirstName`, `a`.`LastName`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`
    FROM `AspNetUsers` AS `a`
    WHERE `a`.`Id` = @__user_Id_0
    LIMIT 2
) AS `t`
LEFT JOIN `Workouts` AS `w` ON `t`.`Id` = `w`.`UserId`
LEFT JOIN `Cities` AS `c` ON `t`.`Id` = `c`.`UserId`
ORDER BY `t`.`Id`, `w`.`Id`
2025-11-16 17:39:00.301 +03:00 [INF] Executing ObjectResult, writing value of type 'MappyApplication.Models.user.AuthResponse'.
2025-11-16 17:39:00.301 +03:00 [INF] Executed action MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication) in 16.3939ms
2025-11-16 17:39:00.301 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication)'
2025-11-16 17:39:00.301 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:8080/api/v1/auth/refresh-token - 200 null application/json; charset=utf-8 42.9882ms
2025-11-16 17:39:00.881 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:8080/api/v1/auth/refresh-token - null 0
2025-11-16 17:39:00.882 +03:00 [INF] CORS policy execution successful.
2025-11-16 17:39:00.902 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 17:39:00.902 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication)'
2025-11-16 17:39:00.902 +03:00 [INF] Route matched with {action = "RefreshToken", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.user.AuthResponse] RefreshToken() on controller MappyApplication.Controllers.AuthController (MappyApplication).
2025-11-16 17:39:00.904 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__refreshToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`RefreshToken` = @__refreshToken_0
LIMIT 2
2025-11-16 17:39:00.904 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`FirstName`, `a`.`LastName`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`
FROM `AspNetUsers` AS `a`
WHERE `a`.`Id` = @__p_0
LIMIT 1
2025-11-16 17:39:00.908 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']

        UPDATE TOKENS
        SET Revoked = true, Expired = true
        WHERE UserId = @p0
          AND DeviceId = @p1
          AND Revoked = false
          AND Expired = false
2025-11-16 17:39:00.910 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a0`.`Name`
FROM `AspNetUserRoles` AS `a`
INNER JOIN `AspNetRoles` AS `a0` ON `a`.`RoleId` = `a0`.`Id`
WHERE `a`.`UserId` = @__userId_0
2025-11-16 17:39:00.911 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ClaimType`, `a`.`ClaimValue`, `a`.`UserId`
FROM `AspNetUserClaims` AS `a`
WHERE `a`.`UserId` = @__user_Id_0
2025-11-16 17:39:00.912 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a0`.`Name`
FROM `AspNetUserRoles` AS `a`
INNER JOIN `AspNetRoles` AS `a0` ON `a`.`RoleId` = `a0`.`Id`
WHERE `a`.`UserId` = @__userId_0
2025-11-16 17:39:00.913 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ClaimType`, `a`.`ClaimValue`, `a`.`UserId`
FROM `AspNetUserClaims` AS `a`
WHERE `a`.`UserId` = @__user_Id_0
2025-11-16 17:39:00.914 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (DbType = DateTime), @p2='?' (Size = 4000), @p3='?' (DbType = Boolean), @p4='?' (Size = 4000), @p5='?' (DbType = Boolean), @p6='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO `Tokens` (`AccessToken`, `CreatedAt`, `DeviceId`, `Expired`, `RefreshToken`, `Revoked`, `UserId`)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6);
SELECT `Id`
FROM `Tokens`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();
2025-11-16 17:39:00.914 +03:00 [INF] Added Token MappyApplication.Data.Token
2025-11-16 17:39:00.917 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessFailedCount`, `t`.`ConcurrencyStamp`, `t`.`Email`, `t`.`EmailConfirmed`, `t`.`FirstName`, `t`.`LastName`, `t`.`LockoutEnabled`, `t`.`LockoutEnd`, `t`.`NormalizedEmail`, `t`.`NormalizedUserName`, `t`.`PasswordHash`, `t`.`PhoneNumber`, `t`.`PhoneNumberConfirmed`, `t`.`SecurityStamp`, `t`.`TwoFactorEnabled`, `t`.`UserName`, `w`.`Id`, `w`.`Cadence`, `w`.`CityName`, `w`.`Coords`, `w`.`Date`, `w`.`Distance`, `w`.`Duration`, `w`.`Emoji`, `w`.`Pace`, `w`.`Type`, `w`.`UserId`, `c`.`Id`, `c`.`CityName`, `c`.`Country`, `c`.`Date`, `c`.`Emoji`, `c`.`Lat`, `c`.`Lng`, `c`.`Notes`, `c`.`UserId`
FROM (
    SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`FirstName`, `a`.`LastName`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`
    FROM `AspNetUsers` AS `a`
    WHERE `a`.`Id` = @__user_Id_0
    LIMIT 2
) AS `t`
LEFT JOIN `Workouts` AS `w` ON `t`.`Id` = `w`.`UserId`
LEFT JOIN `Cities` AS `c` ON `t`.`Id` = `c`.`UserId`
ORDER BY `t`.`Id`, `w`.`Id`
2025-11-16 17:39:00.917 +03:00 [INF] Executing ObjectResult, writing value of type 'MappyApplication.Models.user.AuthResponse'.
2025-11-16 17:39:00.917 +03:00 [INF] Executed action MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication) in 14.4389ms
2025-11-16 17:39:00.917 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication)'
2025-11-16 17:39:00.917 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:8080/api/v1/auth/refresh-token - 200 null application/json; charset=utf-8 35.5678ms
2025-11-16 17:39:01.438 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:8080/api/v1/auth/refresh-token - null 0
2025-11-16 17:39:01.439 +03:00 [INF] CORS policy execution successful.
2025-11-16 17:39:01.460 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 17:39:01.460 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication)'
2025-11-16 17:39:01.460 +03:00 [INF] Route matched with {action = "RefreshToken", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.user.AuthResponse] RefreshToken() on controller MappyApplication.Controllers.AuthController (MappyApplication).
2025-11-16 17:39:01.461 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__refreshToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`RefreshToken` = @__refreshToken_0
LIMIT 2
2025-11-16 17:39:01.462 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`FirstName`, `a`.`LastName`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`
FROM `AspNetUsers` AS `a`
WHERE `a`.`Id` = @__p_0
LIMIT 1
2025-11-16 17:39:01.464 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']

        UPDATE TOKENS
        SET Revoked = true, Expired = true
        WHERE UserId = @p0
          AND DeviceId = @p1
          AND Revoked = false
          AND Expired = false
2025-11-16 17:39:01.465 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a0`.`Name`
FROM `AspNetUserRoles` AS `a`
INNER JOIN `AspNetRoles` AS `a0` ON `a`.`RoleId` = `a0`.`Id`
WHERE `a`.`UserId` = @__userId_0
2025-11-16 17:39:01.465 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ClaimType`, `a`.`ClaimValue`, `a`.`UserId`
FROM `AspNetUserClaims` AS `a`
WHERE `a`.`UserId` = @__user_Id_0
2025-11-16 17:39:01.466 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a0`.`Name`
FROM `AspNetUserRoles` AS `a`
INNER JOIN `AspNetRoles` AS `a0` ON `a`.`RoleId` = `a0`.`Id`
WHERE `a`.`UserId` = @__userId_0
2025-11-16 17:39:01.467 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ClaimType`, `a`.`ClaimValue`, `a`.`UserId`
FROM `AspNetUserClaims` AS `a`
WHERE `a`.`UserId` = @__user_Id_0
2025-11-16 17:39:01.470 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (DbType = DateTime), @p2='?' (Size = 4000), @p3='?' (DbType = Boolean), @p4='?' (Size = 4000), @p5='?' (DbType = Boolean), @p6='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO `Tokens` (`AccessToken`, `CreatedAt`, `DeviceId`, `Expired`, `RefreshToken`, `Revoked`, `UserId`)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6);
SELECT `Id`
FROM `Tokens`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();
2025-11-16 17:39:01.470 +03:00 [INF] Added Token MappyApplication.Data.Token
2025-11-16 17:39:01.471 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessFailedCount`, `t`.`ConcurrencyStamp`, `t`.`Email`, `t`.`EmailConfirmed`, `t`.`FirstName`, `t`.`LastName`, `t`.`LockoutEnabled`, `t`.`LockoutEnd`, `t`.`NormalizedEmail`, `t`.`NormalizedUserName`, `t`.`PasswordHash`, `t`.`PhoneNumber`, `t`.`PhoneNumberConfirmed`, `t`.`SecurityStamp`, `t`.`TwoFactorEnabled`, `t`.`UserName`, `w`.`Id`, `w`.`Cadence`, `w`.`CityName`, `w`.`Coords`, `w`.`Date`, `w`.`Distance`, `w`.`Duration`, `w`.`Emoji`, `w`.`Pace`, `w`.`Type`, `w`.`UserId`, `c`.`Id`, `c`.`CityName`, `c`.`Country`, `c`.`Date`, `c`.`Emoji`, `c`.`Lat`, `c`.`Lng`, `c`.`Notes`, `c`.`UserId`
FROM (
    SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`FirstName`, `a`.`LastName`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`
    FROM `AspNetUsers` AS `a`
    WHERE `a`.`Id` = @__user_Id_0
    LIMIT 2
) AS `t`
LEFT JOIN `Workouts` AS `w` ON `t`.`Id` = `w`.`UserId`
LEFT JOIN `Cities` AS `c` ON `t`.`Id` = `c`.`UserId`
ORDER BY `t`.`Id`, `w`.`Id`
2025-11-16 17:39:01.472 +03:00 [INF] Executing ObjectResult, writing value of type 'MappyApplication.Models.user.AuthResponse'.
2025-11-16 17:39:01.472 +03:00 [INF] Executed action MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication) in 11.412ms
2025-11-16 17:39:01.472 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication)'
2025-11-16 17:39:01.472 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:8080/api/v1/auth/refresh-token - 200 null application/json; charset=utf-8 33.4314ms
2025-11-16 17:39:01.953 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:8080/api/v1/auth/refresh-token - null 0
2025-11-16 17:39:01.953 +03:00 [INF] CORS policy execution successful.
2025-11-16 17:39:01.975 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 17:39:01.975 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication)'
2025-11-16 17:39:01.975 +03:00 [INF] Route matched with {action = "RefreshToken", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.user.AuthResponse] RefreshToken() on controller MappyApplication.Controllers.AuthController (MappyApplication).
2025-11-16 17:39:01.977 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__refreshToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`RefreshToken` = @__refreshToken_0
LIMIT 2
2025-11-16 17:39:01.978 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`FirstName`, `a`.`LastName`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`
FROM `AspNetUsers` AS `a`
WHERE `a`.`Id` = @__p_0
LIMIT 1
2025-11-16 17:39:01.981 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']

        UPDATE TOKENS
        SET Revoked = true, Expired = true
        WHERE UserId = @p0
          AND DeviceId = @p1
          AND Revoked = false
          AND Expired = false
2025-11-16 17:39:01.983 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a0`.`Name`
FROM `AspNetUserRoles` AS `a`
INNER JOIN `AspNetRoles` AS `a0` ON `a`.`RoleId` = `a0`.`Id`
WHERE `a`.`UserId` = @__userId_0
2025-11-16 17:39:01.983 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ClaimType`, `a`.`ClaimValue`, `a`.`UserId`
FROM `AspNetUserClaims` AS `a`
WHERE `a`.`UserId` = @__user_Id_0
2025-11-16 17:39:01.984 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a0`.`Name`
FROM `AspNetUserRoles` AS `a`
INNER JOIN `AspNetRoles` AS `a0` ON `a`.`RoleId` = `a0`.`Id`
WHERE `a`.`UserId` = @__userId_0
2025-11-16 17:39:01.985 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ClaimType`, `a`.`ClaimValue`, `a`.`UserId`
FROM `AspNetUserClaims` AS `a`
WHERE `a`.`UserId` = @__user_Id_0
2025-11-16 17:39:01.987 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (DbType = DateTime), @p2='?' (Size = 4000), @p3='?' (DbType = Boolean), @p4='?' (Size = 4000), @p5='?' (DbType = Boolean), @p6='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO `Tokens` (`AccessToken`, `CreatedAt`, `DeviceId`, `Expired`, `RefreshToken`, `Revoked`, `UserId`)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6);
SELECT `Id`
FROM `Tokens`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();
2025-11-16 17:39:01.988 +03:00 [INF] Added Token MappyApplication.Data.Token
2025-11-16 17:39:01.989 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessFailedCount`, `t`.`ConcurrencyStamp`, `t`.`Email`, `t`.`EmailConfirmed`, `t`.`FirstName`, `t`.`LastName`, `t`.`LockoutEnabled`, `t`.`LockoutEnd`, `t`.`NormalizedEmail`, `t`.`NormalizedUserName`, `t`.`PasswordHash`, `t`.`PhoneNumber`, `t`.`PhoneNumberConfirmed`, `t`.`SecurityStamp`, `t`.`TwoFactorEnabled`, `t`.`UserName`, `w`.`Id`, `w`.`Cadence`, `w`.`CityName`, `w`.`Coords`, `w`.`Date`, `w`.`Distance`, `w`.`Duration`, `w`.`Emoji`, `w`.`Pace`, `w`.`Type`, `w`.`UserId`, `c`.`Id`, `c`.`CityName`, `c`.`Country`, `c`.`Date`, `c`.`Emoji`, `c`.`Lat`, `c`.`Lng`, `c`.`Notes`, `c`.`UserId`
FROM (
    SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`FirstName`, `a`.`LastName`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`
    FROM `AspNetUsers` AS `a`
    WHERE `a`.`Id` = @__user_Id_0
    LIMIT 2
) AS `t`
LEFT JOIN `Workouts` AS `w` ON `t`.`Id` = `w`.`UserId`
LEFT JOIN `Cities` AS `c` ON `t`.`Id` = `c`.`UserId`
ORDER BY `t`.`Id`, `w`.`Id`
2025-11-16 17:39:01.989 +03:00 [INF] Executing ObjectResult, writing value of type 'MappyApplication.Models.user.AuthResponse'.
2025-11-16 17:39:01.989 +03:00 [INF] Executed action MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication) in 14.1005ms
2025-11-16 17:39:01.989 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication)'
2025-11-16 17:39:01.989 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:8080/api/v1/auth/refresh-token - 200 null application/json; charset=utf-8 36.6455ms
2025-11-16 17:39:02.392 +03:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:8080/api/v1/auth/refresh-token - null null
2025-11-16 17:39:02.392 +03:00 [INF] CORS policy execution successful.
2025-11-16 17:39:02.392 +03:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:8080/api/v1/auth/refresh-token - 204 null null 0.2903ms
2025-11-16 17:39:02.393 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:8080/api/v1/auth/refresh-token - null 0
2025-11-16 17:39:02.393 +03:00 [INF] CORS policy execution successful.
2025-11-16 17:39:02.418 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 17:39:02.419 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication)'
2025-11-16 17:39:02.419 +03:00 [INF] Route matched with {action = "RefreshToken", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.user.AuthResponse] RefreshToken() on controller MappyApplication.Controllers.AuthController (MappyApplication).
2025-11-16 17:39:02.420 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__refreshToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`RefreshToken` = @__refreshToken_0
LIMIT 2
2025-11-16 17:39:02.422 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`FirstName`, `a`.`LastName`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`
FROM `AspNetUsers` AS `a`
WHERE `a`.`Id` = @__p_0
LIMIT 1
2025-11-16 17:39:02.430 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']

        UPDATE TOKENS
        SET Revoked = true, Expired = true
        WHERE UserId = @p0
          AND DeviceId = @p1
          AND Revoked = false
          AND Expired = false
2025-11-16 17:39:02.431 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a0`.`Name`
FROM `AspNetUserRoles` AS `a`
INNER JOIN `AspNetRoles` AS `a0` ON `a`.`RoleId` = `a0`.`Id`
WHERE `a`.`UserId` = @__userId_0
2025-11-16 17:39:02.432 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ClaimType`, `a`.`ClaimValue`, `a`.`UserId`
FROM `AspNetUserClaims` AS `a`
WHERE `a`.`UserId` = @__user_Id_0
2025-11-16 17:39:02.433 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a0`.`Name`
FROM `AspNetUserRoles` AS `a`
INNER JOIN `AspNetRoles` AS `a0` ON `a`.`RoleId` = `a0`.`Id`
WHERE `a`.`UserId` = @__userId_0
2025-11-16 17:39:02.438 +03:00 [INF] Executed DbCommand (4ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ClaimType`, `a`.`ClaimValue`, `a`.`UserId`
FROM `AspNetUserClaims` AS `a`
WHERE `a`.`UserId` = @__user_Id_0
2025-11-16 17:39:02.440 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (DbType = DateTime), @p2='?' (Size = 4000), @p3='?' (DbType = Boolean), @p4='?' (Size = 4000), @p5='?' (DbType = Boolean), @p6='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO `Tokens` (`AccessToken`, `CreatedAt`, `DeviceId`, `Expired`, `RefreshToken`, `Revoked`, `UserId`)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6);
SELECT `Id`
FROM `Tokens`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();
2025-11-16 17:39:02.441 +03:00 [INF] Added Token MappyApplication.Data.Token
2025-11-16 17:39:02.442 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessFailedCount`, `t`.`ConcurrencyStamp`, `t`.`Email`, `t`.`EmailConfirmed`, `t`.`FirstName`, `t`.`LastName`, `t`.`LockoutEnabled`, `t`.`LockoutEnd`, `t`.`NormalizedEmail`, `t`.`NormalizedUserName`, `t`.`PasswordHash`, `t`.`PhoneNumber`, `t`.`PhoneNumberConfirmed`, `t`.`SecurityStamp`, `t`.`TwoFactorEnabled`, `t`.`UserName`, `w`.`Id`, `w`.`Cadence`, `w`.`CityName`, `w`.`Coords`, `w`.`Date`, `w`.`Distance`, `w`.`Duration`, `w`.`Emoji`, `w`.`Pace`, `w`.`Type`, `w`.`UserId`, `c`.`Id`, `c`.`CityName`, `c`.`Country`, `c`.`Date`, `c`.`Emoji`, `c`.`Lat`, `c`.`Lng`, `c`.`Notes`, `c`.`UserId`
FROM (
    SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`FirstName`, `a`.`LastName`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`
    FROM `AspNetUsers` AS `a`
    WHERE `a`.`Id` = @__user_Id_0
    LIMIT 2
) AS `t`
LEFT JOIN `Workouts` AS `w` ON `t`.`Id` = `w`.`UserId`
LEFT JOIN `Cities` AS `c` ON `t`.`Id` = `c`.`UserId`
ORDER BY `t`.`Id`, `w`.`Id`
2025-11-16 17:39:02.442 +03:00 [INF] Executing ObjectResult, writing value of type 'MappyApplication.Models.user.AuthResponse'.
2025-11-16 17:39:02.442 +03:00 [INF] Executed action MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication) in 23.5962ms
2025-11-16 17:39:02.442 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication)'
2025-11-16 17:39:02.443 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:8080/api/v1/auth/refresh-token - 200 null application/json; charset=utf-8 49.426ms
2025-11-16 17:39:03.019 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:8080/api/v1/auth/refresh-token - null 0
2025-11-16 17:39:03.022 +03:00 [INF] CORS policy execution successful.
2025-11-16 17:39:03.054 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 17:39:03.055 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication)'
2025-11-16 17:39:03.055 +03:00 [INF] Route matched with {action = "RefreshToken", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.user.AuthResponse] RefreshToken() on controller MappyApplication.Controllers.AuthController (MappyApplication).
2025-11-16 17:39:03.056 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__refreshToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`RefreshToken` = @__refreshToken_0
LIMIT 2
2025-11-16 17:39:03.058 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`FirstName`, `a`.`LastName`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`
FROM `AspNetUsers` AS `a`
WHERE `a`.`Id` = @__p_0
LIMIT 1
2025-11-16 17:39:03.063 +03:00 [INF] Executed DbCommand (4ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']

        UPDATE TOKENS
        SET Revoked = true, Expired = true
        WHERE UserId = @p0
          AND DeviceId = @p1
          AND Revoked = false
          AND Expired = false
2025-11-16 17:39:03.065 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a0`.`Name`
FROM `AspNetUserRoles` AS `a`
INNER JOIN `AspNetRoles` AS `a0` ON `a`.`RoleId` = `a0`.`Id`
WHERE `a`.`UserId` = @__userId_0
2025-11-16 17:39:03.065 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ClaimType`, `a`.`ClaimValue`, `a`.`UserId`
FROM `AspNetUserClaims` AS `a`
WHERE `a`.`UserId` = @__user_Id_0
2025-11-16 17:39:03.066 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a0`.`Name`
FROM `AspNetUserRoles` AS `a`
INNER JOIN `AspNetRoles` AS `a0` ON `a`.`RoleId` = `a0`.`Id`
WHERE `a`.`UserId` = @__userId_0
2025-11-16 17:39:03.068 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ClaimType`, `a`.`ClaimValue`, `a`.`UserId`
FROM `AspNetUserClaims` AS `a`
WHERE `a`.`UserId` = @__user_Id_0
2025-11-16 17:39:03.070 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (DbType = DateTime), @p2='?' (Size = 4000), @p3='?' (DbType = Boolean), @p4='?' (Size = 4000), @p5='?' (DbType = Boolean), @p6='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO `Tokens` (`AccessToken`, `CreatedAt`, `DeviceId`, `Expired`, `RefreshToken`, `Revoked`, `UserId`)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6);
SELECT `Id`
FROM `Tokens`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();
2025-11-16 17:39:03.071 +03:00 [INF] Added Token MappyApplication.Data.Token
2025-11-16 17:39:03.072 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessFailedCount`, `t`.`ConcurrencyStamp`, `t`.`Email`, `t`.`EmailConfirmed`, `t`.`FirstName`, `t`.`LastName`, `t`.`LockoutEnabled`, `t`.`LockoutEnd`, `t`.`NormalizedEmail`, `t`.`NormalizedUserName`, `t`.`PasswordHash`, `t`.`PhoneNumber`, `t`.`PhoneNumberConfirmed`, `t`.`SecurityStamp`, `t`.`TwoFactorEnabled`, `t`.`UserName`, `w`.`Id`, `w`.`Cadence`, `w`.`CityName`, `w`.`Coords`, `w`.`Date`, `w`.`Distance`, `w`.`Duration`, `w`.`Emoji`, `w`.`Pace`, `w`.`Type`, `w`.`UserId`, `c`.`Id`, `c`.`CityName`, `c`.`Country`, `c`.`Date`, `c`.`Emoji`, `c`.`Lat`, `c`.`Lng`, `c`.`Notes`, `c`.`UserId`
FROM (
    SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`FirstName`, `a`.`LastName`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`
    FROM `AspNetUsers` AS `a`
    WHERE `a`.`Id` = @__user_Id_0
    LIMIT 2
) AS `t`
LEFT JOIN `Workouts` AS `w` ON `t`.`Id` = `w`.`UserId`
LEFT JOIN `Cities` AS `c` ON `t`.`Id` = `c`.`UserId`
ORDER BY `t`.`Id`, `w`.`Id`
2025-11-16 17:39:03.073 +03:00 [INF] Executing ObjectResult, writing value of type 'MappyApplication.Models.user.AuthResponse'.
2025-11-16 17:39:03.073 +03:00 [INF] Executed action MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication) in 18.1061ms
2025-11-16 17:39:03.073 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication)'
2025-11-16 17:39:03.073 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:8080/api/v1/auth/refresh-token - 200 null application/json; charset=utf-8 54.027ms
2025-11-16 17:39:03.174 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:8080/api/v1/auth/refresh-token - null 0
2025-11-16 17:39:03.174 +03:00 [INF] CORS policy execution successful.
2025-11-16 17:39:03.197 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 17:39:03.197 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication)'
2025-11-16 17:39:03.197 +03:00 [INF] Route matched with {action = "RefreshToken", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.user.AuthResponse] RefreshToken() on controller MappyApplication.Controllers.AuthController (MappyApplication).
2025-11-16 17:39:03.199 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__refreshToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`RefreshToken` = @__refreshToken_0
LIMIT 2
2025-11-16 17:39:03.200 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`FirstName`, `a`.`LastName`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`
FROM `AspNetUsers` AS `a`
WHERE `a`.`Id` = @__p_0
LIMIT 1
2025-11-16 17:39:03.204 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']

        UPDATE TOKENS
        SET Revoked = true, Expired = true
        WHERE UserId = @p0
          AND DeviceId = @p1
          AND Revoked = false
          AND Expired = false
2025-11-16 17:39:03.205 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a0`.`Name`
FROM `AspNetUserRoles` AS `a`
INNER JOIN `AspNetRoles` AS `a0` ON `a`.`RoleId` = `a0`.`Id`
WHERE `a`.`UserId` = @__userId_0
2025-11-16 17:39:03.205 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ClaimType`, `a`.`ClaimValue`, `a`.`UserId`
FROM `AspNetUserClaims` AS `a`
WHERE `a`.`UserId` = @__user_Id_0
2025-11-16 17:39:03.206 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a0`.`Name`
FROM `AspNetUserRoles` AS `a`
INNER JOIN `AspNetRoles` AS `a0` ON `a`.`RoleId` = `a0`.`Id`
WHERE `a`.`UserId` = @__userId_0
2025-11-16 17:39:03.206 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ClaimType`, `a`.`ClaimValue`, `a`.`UserId`
FROM `AspNetUserClaims` AS `a`
WHERE `a`.`UserId` = @__user_Id_0
2025-11-16 17:39:03.207 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (DbType = DateTime), @p2='?' (Size = 4000), @p3='?' (DbType = Boolean), @p4='?' (Size = 4000), @p5='?' (DbType = Boolean), @p6='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO `Tokens` (`AccessToken`, `CreatedAt`, `DeviceId`, `Expired`, `RefreshToken`, `Revoked`, `UserId`)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6);
SELECT `Id`
FROM `Tokens`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();
2025-11-16 17:39:03.208 +03:00 [INF] Added Token MappyApplication.Data.Token
2025-11-16 17:39:03.209 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessFailedCount`, `t`.`ConcurrencyStamp`, `t`.`Email`, `t`.`EmailConfirmed`, `t`.`FirstName`, `t`.`LastName`, `t`.`LockoutEnabled`, `t`.`LockoutEnd`, `t`.`NormalizedEmail`, `t`.`NormalizedUserName`, `t`.`PasswordHash`, `t`.`PhoneNumber`, `t`.`PhoneNumberConfirmed`, `t`.`SecurityStamp`, `t`.`TwoFactorEnabled`, `t`.`UserName`, `w`.`Id`, `w`.`Cadence`, `w`.`CityName`, `w`.`Coords`, `w`.`Date`, `w`.`Distance`, `w`.`Duration`, `w`.`Emoji`, `w`.`Pace`, `w`.`Type`, `w`.`UserId`, `c`.`Id`, `c`.`CityName`, `c`.`Country`, `c`.`Date`, `c`.`Emoji`, `c`.`Lat`, `c`.`Lng`, `c`.`Notes`, `c`.`UserId`
FROM (
    SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`FirstName`, `a`.`LastName`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`
    FROM `AspNetUsers` AS `a`
    WHERE `a`.`Id` = @__user_Id_0
    LIMIT 2
) AS `t`
LEFT JOIN `Workouts` AS `w` ON `t`.`Id` = `w`.`UserId`
LEFT JOIN `Cities` AS `c` ON `t`.`Id` = `c`.`UserId`
ORDER BY `t`.`Id`, `w`.`Id`
2025-11-16 17:39:03.209 +03:00 [INF] Executing ObjectResult, writing value of type 'MappyApplication.Models.user.AuthResponse'.
2025-11-16 17:39:03.209 +03:00 [INF] Executed action MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication) in 12.0205ms
2025-11-16 17:39:03.209 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication)'
2025-11-16 17:39:03.209 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:8080/api/v1/auth/refresh-token - 200 null application/json; charset=utf-8 34.9729ms
2025-11-16 17:39:03.912 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:8080/api/v1/auth/refresh-token - null 0
2025-11-16 17:39:03.912 +03:00 [INF] CORS policy execution successful.
2025-11-16 17:39:03.934 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 17:39:03.935 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication)'
2025-11-16 17:39:03.935 +03:00 [INF] Route matched with {action = "RefreshToken", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.user.AuthResponse] RefreshToken() on controller MappyApplication.Controllers.AuthController (MappyApplication).
2025-11-16 17:39:03.936 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__refreshToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`RefreshToken` = @__refreshToken_0
LIMIT 2
2025-11-16 17:39:03.936 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`FirstName`, `a`.`LastName`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`
FROM `AspNetUsers` AS `a`
WHERE `a`.`Id` = @__p_0
LIMIT 1
2025-11-16 17:39:03.939 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']

        UPDATE TOKENS
        SET Revoked = true, Expired = true
        WHERE UserId = @p0
          AND DeviceId = @p1
          AND Revoked = false
          AND Expired = false
2025-11-16 17:39:03.940 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a0`.`Name`
FROM `AspNetUserRoles` AS `a`
INNER JOIN `AspNetRoles` AS `a0` ON `a`.`RoleId` = `a0`.`Id`
WHERE `a`.`UserId` = @__userId_0
2025-11-16 17:39:03.940 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ClaimType`, `a`.`ClaimValue`, `a`.`UserId`
FROM `AspNetUserClaims` AS `a`
WHERE `a`.`UserId` = @__user_Id_0
2025-11-16 17:39:03.941 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a0`.`Name`
FROM `AspNetUserRoles` AS `a`
INNER JOIN `AspNetRoles` AS `a0` ON `a`.`RoleId` = `a0`.`Id`
WHERE `a`.`UserId` = @__userId_0
2025-11-16 17:39:03.941 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ClaimType`, `a`.`ClaimValue`, `a`.`UserId`
FROM `AspNetUserClaims` AS `a`
WHERE `a`.`UserId` = @__user_Id_0
2025-11-16 17:39:03.943 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (DbType = DateTime), @p2='?' (Size = 4000), @p3='?' (DbType = Boolean), @p4='?' (Size = 4000), @p5='?' (DbType = Boolean), @p6='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO `Tokens` (`AccessToken`, `CreatedAt`, `DeviceId`, `Expired`, `RefreshToken`, `Revoked`, `UserId`)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6);
SELECT `Id`
FROM `Tokens`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();
2025-11-16 17:39:03.943 +03:00 [INF] Added Token MappyApplication.Data.Token
2025-11-16 17:39:03.944 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessFailedCount`, `t`.`ConcurrencyStamp`, `t`.`Email`, `t`.`EmailConfirmed`, `t`.`FirstName`, `t`.`LastName`, `t`.`LockoutEnabled`, `t`.`LockoutEnd`, `t`.`NormalizedEmail`, `t`.`NormalizedUserName`, `t`.`PasswordHash`, `t`.`PhoneNumber`, `t`.`PhoneNumberConfirmed`, `t`.`SecurityStamp`, `t`.`TwoFactorEnabled`, `t`.`UserName`, `w`.`Id`, `w`.`Cadence`, `w`.`CityName`, `w`.`Coords`, `w`.`Date`, `w`.`Distance`, `w`.`Duration`, `w`.`Emoji`, `w`.`Pace`, `w`.`Type`, `w`.`UserId`, `c`.`Id`, `c`.`CityName`, `c`.`Country`, `c`.`Date`, `c`.`Emoji`, `c`.`Lat`, `c`.`Lng`, `c`.`Notes`, `c`.`UserId`
FROM (
    SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`FirstName`, `a`.`LastName`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`
    FROM `AspNetUsers` AS `a`
    WHERE `a`.`Id` = @__user_Id_0
    LIMIT 2
) AS `t`
LEFT JOIN `Workouts` AS `w` ON `t`.`Id` = `w`.`UserId`
LEFT JOIN `Cities` AS `c` ON `t`.`Id` = `c`.`UserId`
ORDER BY `t`.`Id`, `w`.`Id`
2025-11-16 17:39:03.945 +03:00 [INF] Executing ObjectResult, writing value of type 'MappyApplication.Models.user.AuthResponse'.
2025-11-16 17:39:03.945 +03:00 [INF] Executed action MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication) in 9.8972ms
2025-11-16 17:39:03.945 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication)'
2025-11-16 17:39:03.945 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:8080/api/v1/auth/refresh-token - 200 null application/json; charset=utf-8 32.84ms
2025-11-16 17:39:04.618 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:8080/api/v1/auth/refresh-token - null 0
2025-11-16 17:39:04.619 +03:00 [INF] CORS policy execution successful.
2025-11-16 17:39:04.643 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 17:39:04.643 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication)'
2025-11-16 17:39:04.643 +03:00 [INF] Route matched with {action = "RefreshToken", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.user.AuthResponse] RefreshToken() on controller MappyApplication.Controllers.AuthController (MappyApplication).
2025-11-16 17:39:04.645 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__refreshToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`RefreshToken` = @__refreshToken_0
LIMIT 2
2025-11-16 17:39:04.646 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`FirstName`, `a`.`LastName`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`
FROM `AspNetUsers` AS `a`
WHERE `a`.`Id` = @__p_0
LIMIT 1
2025-11-16 17:39:04.648 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']

        UPDATE TOKENS
        SET Revoked = true, Expired = true
        WHERE UserId = @p0
          AND DeviceId = @p1
          AND Revoked = false
          AND Expired = false
2025-11-16 17:39:04.649 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a0`.`Name`
FROM `AspNetUserRoles` AS `a`
INNER JOIN `AspNetRoles` AS `a0` ON `a`.`RoleId` = `a0`.`Id`
WHERE `a`.`UserId` = @__userId_0
2025-11-16 17:39:04.650 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ClaimType`, `a`.`ClaimValue`, `a`.`UserId`
FROM `AspNetUserClaims` AS `a`
WHERE `a`.`UserId` = @__user_Id_0
2025-11-16 17:39:04.652 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a0`.`Name`
FROM `AspNetUserRoles` AS `a`
INNER JOIN `AspNetRoles` AS `a0` ON `a`.`RoleId` = `a0`.`Id`
WHERE `a`.`UserId` = @__userId_0
2025-11-16 17:39:04.653 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ClaimType`, `a`.`ClaimValue`, `a`.`UserId`
FROM `AspNetUserClaims` AS `a`
WHERE `a`.`UserId` = @__user_Id_0
2025-11-16 17:39:04.654 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (DbType = DateTime), @p2='?' (Size = 4000), @p3='?' (DbType = Boolean), @p4='?' (Size = 4000), @p5='?' (DbType = Boolean), @p6='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO `Tokens` (`AccessToken`, `CreatedAt`, `DeviceId`, `Expired`, `RefreshToken`, `Revoked`, `UserId`)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6);
SELECT `Id`
FROM `Tokens`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();
2025-11-16 17:39:04.655 +03:00 [INF] Added Token MappyApplication.Data.Token
2025-11-16 17:39:04.656 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessFailedCount`, `t`.`ConcurrencyStamp`, `t`.`Email`, `t`.`EmailConfirmed`, `t`.`FirstName`, `t`.`LastName`, `t`.`LockoutEnabled`, `t`.`LockoutEnd`, `t`.`NormalizedEmail`, `t`.`NormalizedUserName`, `t`.`PasswordHash`, `t`.`PhoneNumber`, `t`.`PhoneNumberConfirmed`, `t`.`SecurityStamp`, `t`.`TwoFactorEnabled`, `t`.`UserName`, `w`.`Id`, `w`.`Cadence`, `w`.`CityName`, `w`.`Coords`, `w`.`Date`, `w`.`Distance`, `w`.`Duration`, `w`.`Emoji`, `w`.`Pace`, `w`.`Type`, `w`.`UserId`, `c`.`Id`, `c`.`CityName`, `c`.`Country`, `c`.`Date`, `c`.`Emoji`, `c`.`Lat`, `c`.`Lng`, `c`.`Notes`, `c`.`UserId`
FROM (
    SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`FirstName`, `a`.`LastName`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`
    FROM `AspNetUsers` AS `a`
    WHERE `a`.`Id` = @__user_Id_0
    LIMIT 2
) AS `t`
LEFT JOIN `Workouts` AS `w` ON `t`.`Id` = `w`.`UserId`
LEFT JOIN `Cities` AS `c` ON `t`.`Id` = `c`.`UserId`
ORDER BY `t`.`Id`, `w`.`Id`
2025-11-16 17:39:04.656 +03:00 [INF] Executing ObjectResult, writing value of type 'MappyApplication.Models.user.AuthResponse'.
2025-11-16 17:39:04.656 +03:00 [INF] Executed action MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication) in 12.5133ms
2025-11-16 17:39:04.656 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication)'
2025-11-16 17:39:04.656 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:8080/api/v1/auth/refresh-token - 200 null application/json; charset=utf-8 37.6114ms
2025-11-16 17:39:32.007 +03:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:8080/api/v1/auth/refresh-token - null null
2025-11-16 17:39:32.009 +03:00 [INF] CORS policy execution successful.
2025-11-16 17:39:32.009 +03:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:8080/api/v1/auth/refresh-token - 204 null null 2.2944ms
2025-11-16 17:39:32.010 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:8080/api/v1/auth/refresh-token - null 0
2025-11-16 17:39:32.011 +03:00 [INF] CORS policy execution successful.
2025-11-16 17:39:32.038 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 17:39:32.039 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication)'
2025-11-16 17:39:32.039 +03:00 [INF] Route matched with {action = "RefreshToken", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.user.AuthResponse] RefreshToken() on controller MappyApplication.Controllers.AuthController (MappyApplication).
2025-11-16 17:39:32.040 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__refreshToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`RefreshToken` = @__refreshToken_0
LIMIT 2
2025-11-16 17:39:32.041 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`FirstName`, `a`.`LastName`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`
FROM `AspNetUsers` AS `a`
WHERE `a`.`Id` = @__p_0
LIMIT 1
2025-11-16 17:39:32.044 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']

        UPDATE TOKENS
        SET Revoked = true, Expired = true
        WHERE UserId = @p0
          AND DeviceId = @p1
          AND Revoked = false
          AND Expired = false
2025-11-16 17:39:32.045 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a0`.`Name`
FROM `AspNetUserRoles` AS `a`
INNER JOIN `AspNetRoles` AS `a0` ON `a`.`RoleId` = `a0`.`Id`
WHERE `a`.`UserId` = @__userId_0
2025-11-16 17:39:32.046 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ClaimType`, `a`.`ClaimValue`, `a`.`UserId`
FROM `AspNetUserClaims` AS `a`
WHERE `a`.`UserId` = @__user_Id_0
2025-11-16 17:39:32.046 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a0`.`Name`
FROM `AspNetUserRoles` AS `a`
INNER JOIN `AspNetRoles` AS `a0` ON `a`.`RoleId` = `a0`.`Id`
WHERE `a`.`UserId` = @__userId_0
2025-11-16 17:39:32.046 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ClaimType`, `a`.`ClaimValue`, `a`.`UserId`
FROM `AspNetUserClaims` AS `a`
WHERE `a`.`UserId` = @__user_Id_0
2025-11-16 17:39:32.048 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (DbType = DateTime), @p2='?' (Size = 4000), @p3='?' (DbType = Boolean), @p4='?' (Size = 4000), @p5='?' (DbType = Boolean), @p6='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO `Tokens` (`AccessToken`, `CreatedAt`, `DeviceId`, `Expired`, `RefreshToken`, `Revoked`, `UserId`)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6);
SELECT `Id`
FROM `Tokens`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();
2025-11-16 17:39:32.048 +03:00 [INF] Added Token MappyApplication.Data.Token
2025-11-16 17:39:32.050 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessFailedCount`, `t`.`ConcurrencyStamp`, `t`.`Email`, `t`.`EmailConfirmed`, `t`.`FirstName`, `t`.`LastName`, `t`.`LockoutEnabled`, `t`.`LockoutEnd`, `t`.`NormalizedEmail`, `t`.`NormalizedUserName`, `t`.`PasswordHash`, `t`.`PhoneNumber`, `t`.`PhoneNumberConfirmed`, `t`.`SecurityStamp`, `t`.`TwoFactorEnabled`, `t`.`UserName`, `w`.`Id`, `w`.`Cadence`, `w`.`CityName`, `w`.`Coords`, `w`.`Date`, `w`.`Distance`, `w`.`Duration`, `w`.`Emoji`, `w`.`Pace`, `w`.`Type`, `w`.`UserId`, `c`.`Id`, `c`.`CityName`, `c`.`Country`, `c`.`Date`, `c`.`Emoji`, `c`.`Lat`, `c`.`Lng`, `c`.`Notes`, `c`.`UserId`
FROM (
    SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`FirstName`, `a`.`LastName`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`
    FROM `AspNetUsers` AS `a`
    WHERE `a`.`Id` = @__user_Id_0
    LIMIT 2
) AS `t`
LEFT JOIN `Workouts` AS `w` ON `t`.`Id` = `w`.`UserId`
LEFT JOIN `Cities` AS `c` ON `t`.`Id` = `c`.`UserId`
ORDER BY `t`.`Id`, `w`.`Id`
2025-11-16 17:39:32.050 +03:00 [INF] Executing ObjectResult, writing value of type 'MappyApplication.Models.user.AuthResponse'.
2025-11-16 17:39:32.050 +03:00 [INF] Executed action MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication) in 11.6296ms
2025-11-16 17:39:32.050 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication)'
2025-11-16 17:39:32.050 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:8080/api/v1/auth/refresh-token - 200 null application/json; charset=utf-8 40.1803ms
2025-11-16 17:39:45.208 +03:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:8080/api/v1/auth/refresh-token - null null
2025-11-16 17:39:45.209 +03:00 [INF] CORS policy execution successful.
2025-11-16 17:39:45.209 +03:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:8080/api/v1/auth/refresh-token - 204 null null 1.3951ms
2025-11-16 17:39:45.211 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:8080/api/v1/auth/refresh-token - null 0
2025-11-16 17:39:45.211 +03:00 [INF] CORS policy execution successful.
2025-11-16 17:39:45.245 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 17:39:45.246 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication)'
2025-11-16 17:39:45.246 +03:00 [INF] Route matched with {action = "RefreshToken", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.user.AuthResponse] RefreshToken() on controller MappyApplication.Controllers.AuthController (MappyApplication).
2025-11-16 17:39:45.247 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__refreshToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`RefreshToken` = @__refreshToken_0
LIMIT 2
2025-11-16 17:39:45.249 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`FirstName`, `a`.`LastName`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`
FROM `AspNetUsers` AS `a`
WHERE `a`.`Id` = @__p_0
LIMIT 1
2025-11-16 17:39:45.251 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']

        UPDATE TOKENS
        SET Revoked = true, Expired = true
        WHERE UserId = @p0
          AND DeviceId = @p1
          AND Revoked = false
          AND Expired = false
2025-11-16 17:39:45.252 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a0`.`Name`
FROM `AspNetUserRoles` AS `a`
INNER JOIN `AspNetRoles` AS `a0` ON `a`.`RoleId` = `a0`.`Id`
WHERE `a`.`UserId` = @__userId_0
2025-11-16 17:39:45.253 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ClaimType`, `a`.`ClaimValue`, `a`.`UserId`
FROM `AspNetUserClaims` AS `a`
WHERE `a`.`UserId` = @__user_Id_0
2025-11-16 17:39:45.254 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a0`.`Name`
FROM `AspNetUserRoles` AS `a`
INNER JOIN `AspNetRoles` AS `a0` ON `a`.`RoleId` = `a0`.`Id`
WHERE `a`.`UserId` = @__userId_0
2025-11-16 17:39:45.254 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ClaimType`, `a`.`ClaimValue`, `a`.`UserId`
FROM `AspNetUserClaims` AS `a`
WHERE `a`.`UserId` = @__user_Id_0
2025-11-16 17:39:45.257 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (DbType = DateTime), @p2='?' (Size = 4000), @p3='?' (DbType = Boolean), @p4='?' (Size = 4000), @p5='?' (DbType = Boolean), @p6='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO `Tokens` (`AccessToken`, `CreatedAt`, `DeviceId`, `Expired`, `RefreshToken`, `Revoked`, `UserId`)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6);
SELECT `Id`
FROM `Tokens`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();
2025-11-16 17:39:45.258 +03:00 [INF] Added Token MappyApplication.Data.Token
2025-11-16 17:39:45.260 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessFailedCount`, `t`.`ConcurrencyStamp`, `t`.`Email`, `t`.`EmailConfirmed`, `t`.`FirstName`, `t`.`LastName`, `t`.`LockoutEnabled`, `t`.`LockoutEnd`, `t`.`NormalizedEmail`, `t`.`NormalizedUserName`, `t`.`PasswordHash`, `t`.`PhoneNumber`, `t`.`PhoneNumberConfirmed`, `t`.`SecurityStamp`, `t`.`TwoFactorEnabled`, `t`.`UserName`, `w`.`Id`, `w`.`Cadence`, `w`.`CityName`, `w`.`Coords`, `w`.`Date`, `w`.`Distance`, `w`.`Duration`, `w`.`Emoji`, `w`.`Pace`, `w`.`Type`, `w`.`UserId`, `c`.`Id`, `c`.`CityName`, `c`.`Country`, `c`.`Date`, `c`.`Emoji`, `c`.`Lat`, `c`.`Lng`, `c`.`Notes`, `c`.`UserId`
FROM (
    SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`FirstName`, `a`.`LastName`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`
    FROM `AspNetUsers` AS `a`
    WHERE `a`.`Id` = @__user_Id_0
    LIMIT 2
) AS `t`
LEFT JOIN `Workouts` AS `w` ON `t`.`Id` = `w`.`UserId`
LEFT JOIN `Cities` AS `c` ON `t`.`Id` = `c`.`UserId`
ORDER BY `t`.`Id`, `w`.`Id`
2025-11-16 17:39:45.261 +03:00 [INF] Executing ObjectResult, writing value of type 'MappyApplication.Models.user.AuthResponse'.
2025-11-16 17:39:45.261 +03:00 [INF] Executed action MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication) in 14.5694ms
2025-11-16 17:39:45.261 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication)'
2025-11-16 17:39:45.261 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:8080/api/v1/auth/refresh-token - 200 null application/json; charset=utf-8 50.1219ms
2025-11-16 17:39:46.082 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:8080/api/v1/auth/refresh-token - null 0
2025-11-16 17:39:46.083 +03:00 [INF] CORS policy execution successful.
2025-11-16 17:39:46.107 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 17:39:46.108 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication)'
2025-11-16 17:39:46.108 +03:00 [INF] Route matched with {action = "RefreshToken", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.user.AuthResponse] RefreshToken() on controller MappyApplication.Controllers.AuthController (MappyApplication).
2025-11-16 17:39:46.109 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__refreshToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`RefreshToken` = @__refreshToken_0
LIMIT 2
2025-11-16 17:39:46.112 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`FirstName`, `a`.`LastName`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`
FROM `AspNetUsers` AS `a`
WHERE `a`.`Id` = @__p_0
LIMIT 1
2025-11-16 17:39:46.115 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']

        UPDATE TOKENS
        SET Revoked = true, Expired = true
        WHERE UserId = @p0
          AND DeviceId = @p1
          AND Revoked = false
          AND Expired = false
2025-11-16 17:39:46.117 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a0`.`Name`
FROM `AspNetUserRoles` AS `a`
INNER JOIN `AspNetRoles` AS `a0` ON `a`.`RoleId` = `a0`.`Id`
WHERE `a`.`UserId` = @__userId_0
2025-11-16 17:39:46.118 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ClaimType`, `a`.`ClaimValue`, `a`.`UserId`
FROM `AspNetUserClaims` AS `a`
WHERE `a`.`UserId` = @__user_Id_0
2025-11-16 17:39:46.121 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a0`.`Name`
FROM `AspNetUserRoles` AS `a`
INNER JOIN `AspNetRoles` AS `a0` ON `a`.`RoleId` = `a0`.`Id`
WHERE `a`.`UserId` = @__userId_0
2025-11-16 17:39:46.122 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ClaimType`, `a`.`ClaimValue`, `a`.`UserId`
FROM `AspNetUserClaims` AS `a`
WHERE `a`.`UserId` = @__user_Id_0
2025-11-16 17:39:46.123 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (DbType = DateTime), @p2='?' (Size = 4000), @p3='?' (DbType = Boolean), @p4='?' (Size = 4000), @p5='?' (DbType = Boolean), @p6='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO `Tokens` (`AccessToken`, `CreatedAt`, `DeviceId`, `Expired`, `RefreshToken`, `Revoked`, `UserId`)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6);
SELECT `Id`
FROM `Tokens`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();
2025-11-16 17:39:46.124 +03:00 [INF] Added Token MappyApplication.Data.Token
2025-11-16 17:39:46.125 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessFailedCount`, `t`.`ConcurrencyStamp`, `t`.`Email`, `t`.`EmailConfirmed`, `t`.`FirstName`, `t`.`LastName`, `t`.`LockoutEnabled`, `t`.`LockoutEnd`, `t`.`NormalizedEmail`, `t`.`NormalizedUserName`, `t`.`PasswordHash`, `t`.`PhoneNumber`, `t`.`PhoneNumberConfirmed`, `t`.`SecurityStamp`, `t`.`TwoFactorEnabled`, `t`.`UserName`, `w`.`Id`, `w`.`Cadence`, `w`.`CityName`, `w`.`Coords`, `w`.`Date`, `w`.`Distance`, `w`.`Duration`, `w`.`Emoji`, `w`.`Pace`, `w`.`Type`, `w`.`UserId`, `c`.`Id`, `c`.`CityName`, `c`.`Country`, `c`.`Date`, `c`.`Emoji`, `c`.`Lat`, `c`.`Lng`, `c`.`Notes`, `c`.`UserId`
FROM (
    SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`FirstName`, `a`.`LastName`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`
    FROM `AspNetUsers` AS `a`
    WHERE `a`.`Id` = @__user_Id_0
    LIMIT 2
) AS `t`
LEFT JOIN `Workouts` AS `w` ON `t`.`Id` = `w`.`UserId`
LEFT JOIN `Cities` AS `c` ON `t`.`Id` = `c`.`UserId`
ORDER BY `t`.`Id`, `w`.`Id`
2025-11-16 17:39:46.126 +03:00 [INF] Executing ObjectResult, writing value of type 'MappyApplication.Models.user.AuthResponse'.
2025-11-16 17:39:46.126 +03:00 [INF] Executed action MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication) in 18.0318ms
2025-11-16 17:39:46.126 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication)'
2025-11-16 17:39:46.126 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:8080/api/v1/auth/refresh-token - 200 null application/json; charset=utf-8 43.4247ms
2025-11-16 17:40:05.201 +03:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:8080/api/v1/auth/refresh-token - null null
2025-11-16 17:40:05.206 +03:00 [INF] CORS policy execution successful.
2025-11-16 17:40:05.207 +03:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:8080/api/v1/auth/refresh-token - 204 null null 5.9541ms
2025-11-16 17:40:05.208 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:8080/api/v1/auth/refresh-token - null 0
2025-11-16 17:40:05.208 +03:00 [INF] CORS policy execution successful.
2025-11-16 17:40:05.233 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 17:40:05.234 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication)'
2025-11-16 17:40:05.234 +03:00 [INF] Route matched with {action = "RefreshToken", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.user.AuthResponse] RefreshToken() on controller MappyApplication.Controllers.AuthController (MappyApplication).
2025-11-16 17:40:05.235 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__refreshToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`RefreshToken` = @__refreshToken_0
LIMIT 2
2025-11-16 17:40:05.237 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`FirstName`, `a`.`LastName`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`
FROM `AspNetUsers` AS `a`
WHERE `a`.`Id` = @__p_0
LIMIT 1
2025-11-16 17:40:05.240 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']

        UPDATE TOKENS
        SET Revoked = true, Expired = true
        WHERE UserId = @p0
          AND DeviceId = @p1
          AND Revoked = false
          AND Expired = false
2025-11-16 17:40:05.241 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a0`.`Name`
FROM `AspNetUserRoles` AS `a`
INNER JOIN `AspNetRoles` AS `a0` ON `a`.`RoleId` = `a0`.`Id`
WHERE `a`.`UserId` = @__userId_0
2025-11-16 17:40:05.241 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ClaimType`, `a`.`ClaimValue`, `a`.`UserId`
FROM `AspNetUserClaims` AS `a`
WHERE `a`.`UserId` = @__user_Id_0
2025-11-16 17:40:05.242 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a0`.`Name`
FROM `AspNetUserRoles` AS `a`
INNER JOIN `AspNetRoles` AS `a0` ON `a`.`RoleId` = `a0`.`Id`
WHERE `a`.`UserId` = @__userId_0
2025-11-16 17:40:05.242 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ClaimType`, `a`.`ClaimValue`, `a`.`UserId`
FROM `AspNetUserClaims` AS `a`
WHERE `a`.`UserId` = @__user_Id_0
2025-11-16 17:40:05.246 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (DbType = DateTime), @p2='?' (Size = 4000), @p3='?' (DbType = Boolean), @p4='?' (Size = 4000), @p5='?' (DbType = Boolean), @p6='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO `Tokens` (`AccessToken`, `CreatedAt`, `DeviceId`, `Expired`, `RefreshToken`, `Revoked`, `UserId`)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6);
SELECT `Id`
FROM `Tokens`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();
2025-11-16 17:40:05.246 +03:00 [INF] Added Token MappyApplication.Data.Token
2025-11-16 17:40:05.248 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessFailedCount`, `t`.`ConcurrencyStamp`, `t`.`Email`, `t`.`EmailConfirmed`, `t`.`FirstName`, `t`.`LastName`, `t`.`LockoutEnabled`, `t`.`LockoutEnd`, `t`.`NormalizedEmail`, `t`.`NormalizedUserName`, `t`.`PasswordHash`, `t`.`PhoneNumber`, `t`.`PhoneNumberConfirmed`, `t`.`SecurityStamp`, `t`.`TwoFactorEnabled`, `t`.`UserName`, `w`.`Id`, `w`.`Cadence`, `w`.`CityName`, `w`.`Coords`, `w`.`Date`, `w`.`Distance`, `w`.`Duration`, `w`.`Emoji`, `w`.`Pace`, `w`.`Type`, `w`.`UserId`, `c`.`Id`, `c`.`CityName`, `c`.`Country`, `c`.`Date`, `c`.`Emoji`, `c`.`Lat`, `c`.`Lng`, `c`.`Notes`, `c`.`UserId`
FROM (
    SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`FirstName`, `a`.`LastName`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`
    FROM `AspNetUsers` AS `a`
    WHERE `a`.`Id` = @__user_Id_0
    LIMIT 2
) AS `t`
LEFT JOIN `Workouts` AS `w` ON `t`.`Id` = `w`.`UserId`
LEFT JOIN `Cities` AS `c` ON `t`.`Id` = `c`.`UserId`
ORDER BY `t`.`Id`, `w`.`Id`
2025-11-16 17:40:05.248 +03:00 [INF] Executing ObjectResult, writing value of type 'MappyApplication.Models.user.AuthResponse'.
2025-11-16 17:40:05.248 +03:00 [INF] Executed action MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication) in 14.3516ms
2025-11-16 17:40:05.248 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication)'
2025-11-16 17:40:05.248 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:8080/api/v1/auth/refresh-token - 200 null application/json; charset=utf-8 39.7975ms
2025-11-16 17:40:12.489 +03:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:8080/api/v1/auth/refresh-token - null null
2025-11-16 17:40:12.491 +03:00 [INF] CORS policy execution successful.
2025-11-16 17:40:12.491 +03:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:8080/api/v1/auth/refresh-token - 204 null null 2.7741ms
2025-11-16 17:40:12.493 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:8080/api/v1/auth/refresh-token - null 0
2025-11-16 17:40:12.493 +03:00 [INF] CORS policy execution successful.
2025-11-16 17:40:12.540 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 17:40:12.541 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication)'
2025-11-16 17:40:12.541 +03:00 [INF] Route matched with {action = "RefreshToken", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.user.AuthResponse] RefreshToken() on controller MappyApplication.Controllers.AuthController (MappyApplication).
2025-11-16 17:40:12.542 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__refreshToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`RefreshToken` = @__refreshToken_0
LIMIT 2
2025-11-16 17:40:12.543 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`FirstName`, `a`.`LastName`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`
FROM `AspNetUsers` AS `a`
WHERE `a`.`Id` = @__p_0
LIMIT 1
2025-11-16 17:40:12.546 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']

        UPDATE TOKENS
        SET Revoked = true, Expired = true
        WHERE UserId = @p0
          AND DeviceId = @p1
          AND Revoked = false
          AND Expired = false
2025-11-16 17:40:12.547 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a0`.`Name`
FROM `AspNetUserRoles` AS `a`
INNER JOIN `AspNetRoles` AS `a0` ON `a`.`RoleId` = `a0`.`Id`
WHERE `a`.`UserId` = @__userId_0
2025-11-16 17:40:12.548 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ClaimType`, `a`.`ClaimValue`, `a`.`UserId`
FROM `AspNetUserClaims` AS `a`
WHERE `a`.`UserId` = @__user_Id_0
2025-11-16 17:40:12.549 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a0`.`Name`
FROM `AspNetUserRoles` AS `a`
INNER JOIN `AspNetRoles` AS `a0` ON `a`.`RoleId` = `a0`.`Id`
WHERE `a`.`UserId` = @__userId_0
2025-11-16 17:40:12.550 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ClaimType`, `a`.`ClaimValue`, `a`.`UserId`
FROM `AspNetUserClaims` AS `a`
WHERE `a`.`UserId` = @__user_Id_0
2025-11-16 17:40:12.554 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (DbType = DateTime), @p2='?' (Size = 4000), @p3='?' (DbType = Boolean), @p4='?' (Size = 4000), @p5='?' (DbType = Boolean), @p6='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO `Tokens` (`AccessToken`, `CreatedAt`, `DeviceId`, `Expired`, `RefreshToken`, `Revoked`, `UserId`)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6);
SELECT `Id`
FROM `Tokens`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();
2025-11-16 17:40:12.554 +03:00 [INF] Added Token MappyApplication.Data.Token
2025-11-16 17:40:12.556 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessFailedCount`, `t`.`ConcurrencyStamp`, `t`.`Email`, `t`.`EmailConfirmed`, `t`.`FirstName`, `t`.`LastName`, `t`.`LockoutEnabled`, `t`.`LockoutEnd`, `t`.`NormalizedEmail`, `t`.`NormalizedUserName`, `t`.`PasswordHash`, `t`.`PhoneNumber`, `t`.`PhoneNumberConfirmed`, `t`.`SecurityStamp`, `t`.`TwoFactorEnabled`, `t`.`UserName`, `w`.`Id`, `w`.`Cadence`, `w`.`CityName`, `w`.`Coords`, `w`.`Date`, `w`.`Distance`, `w`.`Duration`, `w`.`Emoji`, `w`.`Pace`, `w`.`Type`, `w`.`UserId`, `c`.`Id`, `c`.`CityName`, `c`.`Country`, `c`.`Date`, `c`.`Emoji`, `c`.`Lat`, `c`.`Lng`, `c`.`Notes`, `c`.`UserId`
FROM (
    SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`FirstName`, `a`.`LastName`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`
    FROM `AspNetUsers` AS `a`
    WHERE `a`.`Id` = @__user_Id_0
    LIMIT 2
) AS `t`
LEFT JOIN `Workouts` AS `w` ON `t`.`Id` = `w`.`UserId`
LEFT JOIN `Cities` AS `c` ON `t`.`Id` = `c`.`UserId`
ORDER BY `t`.`Id`, `w`.`Id`
2025-11-16 17:40:12.556 +03:00 [INF] Executing ObjectResult, writing value of type 'MappyApplication.Models.user.AuthResponse'.
2025-11-16 17:40:12.556 +03:00 [INF] Executed action MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication) in 15.069ms
2025-11-16 17:40:12.556 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication)'
2025-11-16 17:40:12.556 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:8080/api/v1/auth/refresh-token - 200 null application/json; charset=utf-8 63.361ms
2025-11-16 17:40:27.371 +03:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:8080/api/v1/auth/refresh-token - null null
2025-11-16 17:40:27.377 +03:00 [INF] CORS policy execution successful.
2025-11-16 17:40:27.378 +03:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:8080/api/v1/auth/refresh-token - 204 null null 6.3643ms
2025-11-16 17:40:27.379 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:8080/api/v1/auth/refresh-token - null 0
2025-11-16 17:40:27.380 +03:00 [INF] CORS policy execution successful.
2025-11-16 17:40:27.406 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 17:40:27.407 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication)'
2025-11-16 17:40:27.407 +03:00 [INF] Route matched with {action = "RefreshToken", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.user.AuthResponse] RefreshToken() on controller MappyApplication.Controllers.AuthController (MappyApplication).
2025-11-16 17:40:27.408 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__refreshToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`RefreshToken` = @__refreshToken_0
LIMIT 2
2025-11-16 17:40:27.414 +03:00 [INF] Executed DbCommand (6ms) [Parameters=[@__p_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`FirstName`, `a`.`LastName`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`
FROM `AspNetUsers` AS `a`
WHERE `a`.`Id` = @__p_0
LIMIT 1
2025-11-16 17:40:27.419 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']

        UPDATE TOKENS
        SET Revoked = true, Expired = true
        WHERE UserId = @p0
          AND DeviceId = @p1
          AND Revoked = false
          AND Expired = false
2025-11-16 17:40:27.420 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a0`.`Name`
FROM `AspNetUserRoles` AS `a`
INNER JOIN `AspNetRoles` AS `a0` ON `a`.`RoleId` = `a0`.`Id`
WHERE `a`.`UserId` = @__userId_0
2025-11-16 17:40:27.421 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ClaimType`, `a`.`ClaimValue`, `a`.`UserId`
FROM `AspNetUserClaims` AS `a`
WHERE `a`.`UserId` = @__user_Id_0
2025-11-16 17:40:27.421 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a0`.`Name`
FROM `AspNetUserRoles` AS `a`
INNER JOIN `AspNetRoles` AS `a0` ON `a`.`RoleId` = `a0`.`Id`
WHERE `a`.`UserId` = @__userId_0
2025-11-16 17:40:27.422 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ClaimType`, `a`.`ClaimValue`, `a`.`UserId`
FROM `AspNetUserClaims` AS `a`
WHERE `a`.`UserId` = @__user_Id_0
2025-11-16 17:40:27.426 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (DbType = DateTime), @p2='?' (Size = 4000), @p3='?' (DbType = Boolean), @p4='?' (Size = 4000), @p5='?' (DbType = Boolean), @p6='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO `Tokens` (`AccessToken`, `CreatedAt`, `DeviceId`, `Expired`, `RefreshToken`, `Revoked`, `UserId`)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6);
SELECT `Id`
FROM `Tokens`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();
2025-11-16 17:40:27.426 +03:00 [INF] Added Token MappyApplication.Data.Token
2025-11-16 17:40:27.427 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessFailedCount`, `t`.`ConcurrencyStamp`, `t`.`Email`, `t`.`EmailConfirmed`, `t`.`FirstName`, `t`.`LastName`, `t`.`LockoutEnabled`, `t`.`LockoutEnd`, `t`.`NormalizedEmail`, `t`.`NormalizedUserName`, `t`.`PasswordHash`, `t`.`PhoneNumber`, `t`.`PhoneNumberConfirmed`, `t`.`SecurityStamp`, `t`.`TwoFactorEnabled`, `t`.`UserName`, `w`.`Id`, `w`.`Cadence`, `w`.`CityName`, `w`.`Coords`, `w`.`Date`, `w`.`Distance`, `w`.`Duration`, `w`.`Emoji`, `w`.`Pace`, `w`.`Type`, `w`.`UserId`, `c`.`Id`, `c`.`CityName`, `c`.`Country`, `c`.`Date`, `c`.`Emoji`, `c`.`Lat`, `c`.`Lng`, `c`.`Notes`, `c`.`UserId`
FROM (
    SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`FirstName`, `a`.`LastName`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`
    FROM `AspNetUsers` AS `a`
    WHERE `a`.`Id` = @__user_Id_0
    LIMIT 2
) AS `t`
LEFT JOIN `Workouts` AS `w` ON `t`.`Id` = `w`.`UserId`
LEFT JOIN `Cities` AS `c` ON `t`.`Id` = `c`.`UserId`
ORDER BY `t`.`Id`, `w`.`Id`
2025-11-16 17:40:27.428 +03:00 [INF] Executing ObjectResult, writing value of type 'MappyApplication.Models.user.AuthResponse'.
2025-11-16 17:40:27.428 +03:00 [INF] Executed action MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication) in 21.3067ms
2025-11-16 17:40:27.428 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication)'
2025-11-16 17:40:27.428 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:8080/api/v1/auth/refresh-token - 200 null application/json; charset=utf-8 49.7027ms
2025-11-16 17:40:28.524 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:8080/api/v1/auth/refresh-token - null 0
2025-11-16 17:40:28.524 +03:00 [INF] CORS policy execution successful.
2025-11-16 17:40:28.545 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 17:40:28.546 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication)'
2025-11-16 17:40:28.546 +03:00 [INF] Route matched with {action = "RefreshToken", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.user.AuthResponse] RefreshToken() on controller MappyApplication.Controllers.AuthController (MappyApplication).
2025-11-16 17:40:28.547 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__refreshToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`RefreshToken` = @__refreshToken_0
LIMIT 2
2025-11-16 17:40:28.547 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`FirstName`, `a`.`LastName`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`
FROM `AspNetUsers` AS `a`
WHERE `a`.`Id` = @__p_0
LIMIT 1
2025-11-16 17:40:28.549 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']

        UPDATE TOKENS
        SET Revoked = true, Expired = true
        WHERE UserId = @p0
          AND DeviceId = @p1
          AND Revoked = false
          AND Expired = false
2025-11-16 17:40:28.550 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a0`.`Name`
FROM `AspNetUserRoles` AS `a`
INNER JOIN `AspNetRoles` AS `a0` ON `a`.`RoleId` = `a0`.`Id`
WHERE `a`.`UserId` = @__userId_0
2025-11-16 17:40:28.550 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ClaimType`, `a`.`ClaimValue`, `a`.`UserId`
FROM `AspNetUserClaims` AS `a`
WHERE `a`.`UserId` = @__user_Id_0
2025-11-16 17:40:28.551 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a0`.`Name`
FROM `AspNetUserRoles` AS `a`
INNER JOIN `AspNetRoles` AS `a0` ON `a`.`RoleId` = `a0`.`Id`
WHERE `a`.`UserId` = @__userId_0
2025-11-16 17:40:28.551 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ClaimType`, `a`.`ClaimValue`, `a`.`UserId`
FROM `AspNetUserClaims` AS `a`
WHERE `a`.`UserId` = @__user_Id_0
2025-11-16 17:40:28.553 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (DbType = DateTime), @p2='?' (Size = 4000), @p3='?' (DbType = Boolean), @p4='?' (Size = 4000), @p5='?' (DbType = Boolean), @p6='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO `Tokens` (`AccessToken`, `CreatedAt`, `DeviceId`, `Expired`, `RefreshToken`, `Revoked`, `UserId`)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6);
SELECT `Id`
FROM `Tokens`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();
2025-11-16 17:40:28.554 +03:00 [INF] Added Token MappyApplication.Data.Token
2025-11-16 17:40:28.555 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessFailedCount`, `t`.`ConcurrencyStamp`, `t`.`Email`, `t`.`EmailConfirmed`, `t`.`FirstName`, `t`.`LastName`, `t`.`LockoutEnabled`, `t`.`LockoutEnd`, `t`.`NormalizedEmail`, `t`.`NormalizedUserName`, `t`.`PasswordHash`, `t`.`PhoneNumber`, `t`.`PhoneNumberConfirmed`, `t`.`SecurityStamp`, `t`.`TwoFactorEnabled`, `t`.`UserName`, `w`.`Id`, `w`.`Cadence`, `w`.`CityName`, `w`.`Coords`, `w`.`Date`, `w`.`Distance`, `w`.`Duration`, `w`.`Emoji`, `w`.`Pace`, `w`.`Type`, `w`.`UserId`, `c`.`Id`, `c`.`CityName`, `c`.`Country`, `c`.`Date`, `c`.`Emoji`, `c`.`Lat`, `c`.`Lng`, `c`.`Notes`, `c`.`UserId`
FROM (
    SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`FirstName`, `a`.`LastName`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`
    FROM `AspNetUsers` AS `a`
    WHERE `a`.`Id` = @__user_Id_0
    LIMIT 2
) AS `t`
LEFT JOIN `Workouts` AS `w` ON `t`.`Id` = `w`.`UserId`
LEFT JOIN `Cities` AS `c` ON `t`.`Id` = `c`.`UserId`
ORDER BY `t`.`Id`, `w`.`Id`
2025-11-16 17:40:28.555 +03:00 [INF] Executing ObjectResult, writing value of type 'MappyApplication.Models.user.AuthResponse'.
2025-11-16 17:40:28.555 +03:00 [INF] Executed action MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication) in 9.462ms
2025-11-16 17:40:28.555 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication)'
2025-11-16 17:40:28.555 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:8080/api/v1/auth/refresh-token - 200 null application/json; charset=utf-8 31.4335ms
2025-11-16 17:40:29.213 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:8080/api/v1/auth/refresh-token - null 0
2025-11-16 17:40:29.213 +03:00 [INF] CORS policy execution successful.
2025-11-16 17:40:29.231 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 17:40:29.231 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication)'
2025-11-16 17:40:29.231 +03:00 [INF] Route matched with {action = "RefreshToken", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.user.AuthResponse] RefreshToken() on controller MappyApplication.Controllers.AuthController (MappyApplication).
2025-11-16 17:40:29.232 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__refreshToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`RefreshToken` = @__refreshToken_0
LIMIT 2
2025-11-16 17:40:29.235 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`FirstName`, `a`.`LastName`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`
FROM `AspNetUsers` AS `a`
WHERE `a`.`Id` = @__p_0
LIMIT 1
2025-11-16 17:40:29.238 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']

        UPDATE TOKENS
        SET Revoked = true, Expired = true
        WHERE UserId = @p0
          AND DeviceId = @p1
          AND Revoked = false
          AND Expired = false
2025-11-16 17:40:29.239 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a0`.`Name`
FROM `AspNetUserRoles` AS `a`
INNER JOIN `AspNetRoles` AS `a0` ON `a`.`RoleId` = `a0`.`Id`
WHERE `a`.`UserId` = @__userId_0
2025-11-16 17:40:29.240 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ClaimType`, `a`.`ClaimValue`, `a`.`UserId`
FROM `AspNetUserClaims` AS `a`
WHERE `a`.`UserId` = @__user_Id_0
2025-11-16 17:40:29.240 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a0`.`Name`
FROM `AspNetUserRoles` AS `a`
INNER JOIN `AspNetRoles` AS `a0` ON `a`.`RoleId` = `a0`.`Id`
WHERE `a`.`UserId` = @__userId_0
2025-11-16 17:40:29.241 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ClaimType`, `a`.`ClaimValue`, `a`.`UserId`
FROM `AspNetUserClaims` AS `a`
WHERE `a`.`UserId` = @__user_Id_0
2025-11-16 17:40:29.243 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (DbType = DateTime), @p2='?' (Size = 4000), @p3='?' (DbType = Boolean), @p4='?' (Size = 4000), @p5='?' (DbType = Boolean), @p6='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO `Tokens` (`AccessToken`, `CreatedAt`, `DeviceId`, `Expired`, `RefreshToken`, `Revoked`, `UserId`)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6);
SELECT `Id`
FROM `Tokens`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();
2025-11-16 17:40:29.243 +03:00 [INF] Added Token MappyApplication.Data.Token
2025-11-16 17:40:29.245 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessFailedCount`, `t`.`ConcurrencyStamp`, `t`.`Email`, `t`.`EmailConfirmed`, `t`.`FirstName`, `t`.`LastName`, `t`.`LockoutEnabled`, `t`.`LockoutEnd`, `t`.`NormalizedEmail`, `t`.`NormalizedUserName`, `t`.`PasswordHash`, `t`.`PhoneNumber`, `t`.`PhoneNumberConfirmed`, `t`.`SecurityStamp`, `t`.`TwoFactorEnabled`, `t`.`UserName`, `w`.`Id`, `w`.`Cadence`, `w`.`CityName`, `w`.`Coords`, `w`.`Date`, `w`.`Distance`, `w`.`Duration`, `w`.`Emoji`, `w`.`Pace`, `w`.`Type`, `w`.`UserId`, `c`.`Id`, `c`.`CityName`, `c`.`Country`, `c`.`Date`, `c`.`Emoji`, `c`.`Lat`, `c`.`Lng`, `c`.`Notes`, `c`.`UserId`
FROM (
    SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`FirstName`, `a`.`LastName`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`
    FROM `AspNetUsers` AS `a`
    WHERE `a`.`Id` = @__user_Id_0
    LIMIT 2
) AS `t`
LEFT JOIN `Workouts` AS `w` ON `t`.`Id` = `w`.`UserId`
LEFT JOIN `Cities` AS `c` ON `t`.`Id` = `c`.`UserId`
ORDER BY `t`.`Id`, `w`.`Id`
2025-11-16 17:40:29.245 +03:00 [INF] Executing ObjectResult, writing value of type 'MappyApplication.Models.user.AuthResponse'.
2025-11-16 17:40:29.245 +03:00 [INF] Executed action MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication) in 14.1895ms
2025-11-16 17:40:29.245 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication)'
2025-11-16 17:40:29.245 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:8080/api/v1/auth/refresh-token - 200 null application/json; charset=utf-8 32.1768ms
2025-11-16 17:40:29.926 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:8080/api/v1/auth/refresh-token - null 0
2025-11-16 17:40:29.926 +03:00 [INF] CORS policy execution successful.
2025-11-16 17:40:29.943 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 17:40:29.944 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication)'
2025-11-16 17:40:29.944 +03:00 [INF] Route matched with {action = "RefreshToken", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.user.AuthResponse] RefreshToken() on controller MappyApplication.Controllers.AuthController (MappyApplication).
2025-11-16 17:40:29.944 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__refreshToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`RefreshToken` = @__refreshToken_0
LIMIT 2
2025-11-16 17:40:29.946 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`FirstName`, `a`.`LastName`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`
FROM `AspNetUsers` AS `a`
WHERE `a`.`Id` = @__p_0
LIMIT 1
2025-11-16 17:40:29.949 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']

        UPDATE TOKENS
        SET Revoked = true, Expired = true
        WHERE UserId = @p0
          AND DeviceId = @p1
          AND Revoked = false
          AND Expired = false
2025-11-16 17:40:29.950 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a0`.`Name`
FROM `AspNetUserRoles` AS `a`
INNER JOIN `AspNetRoles` AS `a0` ON `a`.`RoleId` = `a0`.`Id`
WHERE `a`.`UserId` = @__userId_0
2025-11-16 17:40:29.951 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ClaimType`, `a`.`ClaimValue`, `a`.`UserId`
FROM `AspNetUserClaims` AS `a`
WHERE `a`.`UserId` = @__user_Id_0
2025-11-16 17:40:29.952 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a0`.`Name`
FROM `AspNetUserRoles` AS `a`
INNER JOIN `AspNetRoles` AS `a0` ON `a`.`RoleId` = `a0`.`Id`
WHERE `a`.`UserId` = @__userId_0
2025-11-16 17:40:29.952 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ClaimType`, `a`.`ClaimValue`, `a`.`UserId`
FROM `AspNetUserClaims` AS `a`
WHERE `a`.`UserId` = @__user_Id_0
2025-11-16 17:40:29.954 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (DbType = DateTime), @p2='?' (Size = 4000), @p3='?' (DbType = Boolean), @p4='?' (Size = 4000), @p5='?' (DbType = Boolean), @p6='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO `Tokens` (`AccessToken`, `CreatedAt`, `DeviceId`, `Expired`, `RefreshToken`, `Revoked`, `UserId`)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6);
SELECT `Id`
FROM `Tokens`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();
2025-11-16 17:40:29.954 +03:00 [INF] Added Token MappyApplication.Data.Token
2025-11-16 17:40:29.955 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessFailedCount`, `t`.`ConcurrencyStamp`, `t`.`Email`, `t`.`EmailConfirmed`, `t`.`FirstName`, `t`.`LastName`, `t`.`LockoutEnabled`, `t`.`LockoutEnd`, `t`.`NormalizedEmail`, `t`.`NormalizedUserName`, `t`.`PasswordHash`, `t`.`PhoneNumber`, `t`.`PhoneNumberConfirmed`, `t`.`SecurityStamp`, `t`.`TwoFactorEnabled`, `t`.`UserName`, `w`.`Id`, `w`.`Cadence`, `w`.`CityName`, `w`.`Coords`, `w`.`Date`, `w`.`Distance`, `w`.`Duration`, `w`.`Emoji`, `w`.`Pace`, `w`.`Type`, `w`.`UserId`, `c`.`Id`, `c`.`CityName`, `c`.`Country`, `c`.`Date`, `c`.`Emoji`, `c`.`Lat`, `c`.`Lng`, `c`.`Notes`, `c`.`UserId`
FROM (
    SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`FirstName`, `a`.`LastName`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`
    FROM `AspNetUsers` AS `a`
    WHERE `a`.`Id` = @__user_Id_0
    LIMIT 2
) AS `t`
LEFT JOIN `Workouts` AS `w` ON `t`.`Id` = `w`.`UserId`
LEFT JOIN `Cities` AS `c` ON `t`.`Id` = `c`.`UserId`
ORDER BY `t`.`Id`, `w`.`Id`
2025-11-16 17:40:29.956 +03:00 [INF] Executing ObjectResult, writing value of type 'MappyApplication.Models.user.AuthResponse'.
2025-11-16 17:40:29.956 +03:00 [INF] Executed action MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication) in 12.2605ms
2025-11-16 17:40:29.956 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication)'
2025-11-16 17:40:29.956 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:8080/api/v1/auth/refresh-token - 200 null application/json; charset=utf-8 30.4214ms
2025-11-16 17:40:30.548 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:8080/api/v1/auth/refresh-token - null 0
2025-11-16 17:40:30.549 +03:00 [INF] CORS policy execution successful.
2025-11-16 17:40:30.571 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 17:40:30.571 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication)'
2025-11-16 17:40:30.571 +03:00 [INF] Route matched with {action = "RefreshToken", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.user.AuthResponse] RefreshToken() on controller MappyApplication.Controllers.AuthController (MappyApplication).
2025-11-16 17:40:30.573 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__refreshToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`RefreshToken` = @__refreshToken_0
LIMIT 2
2025-11-16 17:40:30.574 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`FirstName`, `a`.`LastName`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`
FROM `AspNetUsers` AS `a`
WHERE `a`.`Id` = @__p_0
LIMIT 1
2025-11-16 17:40:30.578 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']

        UPDATE TOKENS
        SET Revoked = true, Expired = true
        WHERE UserId = @p0
          AND DeviceId = @p1
          AND Revoked = false
          AND Expired = false
2025-11-16 17:40:30.580 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a0`.`Name`
FROM `AspNetUserRoles` AS `a`
INNER JOIN `AspNetRoles` AS `a0` ON `a`.`RoleId` = `a0`.`Id`
WHERE `a`.`UserId` = @__userId_0
2025-11-16 17:40:30.582 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ClaimType`, `a`.`ClaimValue`, `a`.`UserId`
FROM `AspNetUserClaims` AS `a`
WHERE `a`.`UserId` = @__user_Id_0
2025-11-16 17:40:30.583 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a0`.`Name`
FROM `AspNetUserRoles` AS `a`
INNER JOIN `AspNetRoles` AS `a0` ON `a`.`RoleId` = `a0`.`Id`
WHERE `a`.`UserId` = @__userId_0
2025-11-16 17:40:30.585 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ClaimType`, `a`.`ClaimValue`, `a`.`UserId`
FROM `AspNetUserClaims` AS `a`
WHERE `a`.`UserId` = @__user_Id_0
2025-11-16 17:40:30.588 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (DbType = DateTime), @p2='?' (Size = 4000), @p3='?' (DbType = Boolean), @p4='?' (Size = 4000), @p5='?' (DbType = Boolean), @p6='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO `Tokens` (`AccessToken`, `CreatedAt`, `DeviceId`, `Expired`, `RefreshToken`, `Revoked`, `UserId`)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6);
SELECT `Id`
FROM `Tokens`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();
2025-11-16 17:40:30.589 +03:00 [INF] Added Token MappyApplication.Data.Token
2025-11-16 17:40:30.590 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessFailedCount`, `t`.`ConcurrencyStamp`, `t`.`Email`, `t`.`EmailConfirmed`, `t`.`FirstName`, `t`.`LastName`, `t`.`LockoutEnabled`, `t`.`LockoutEnd`, `t`.`NormalizedEmail`, `t`.`NormalizedUserName`, `t`.`PasswordHash`, `t`.`PhoneNumber`, `t`.`PhoneNumberConfirmed`, `t`.`SecurityStamp`, `t`.`TwoFactorEnabled`, `t`.`UserName`, `w`.`Id`, `w`.`Cadence`, `w`.`CityName`, `w`.`Coords`, `w`.`Date`, `w`.`Distance`, `w`.`Duration`, `w`.`Emoji`, `w`.`Pace`, `w`.`Type`, `w`.`UserId`, `c`.`Id`, `c`.`CityName`, `c`.`Country`, `c`.`Date`, `c`.`Emoji`, `c`.`Lat`, `c`.`Lng`, `c`.`Notes`, `c`.`UserId`
FROM (
    SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`FirstName`, `a`.`LastName`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`
    FROM `AspNetUsers` AS `a`
    WHERE `a`.`Id` = @__user_Id_0
    LIMIT 2
) AS `t`
LEFT JOIN `Workouts` AS `w` ON `t`.`Id` = `w`.`UserId`
LEFT JOIN `Cities` AS `c` ON `t`.`Id` = `c`.`UserId`
ORDER BY `t`.`Id`, `w`.`Id`
2025-11-16 17:40:30.590 +03:00 [INF] Executing ObjectResult, writing value of type 'MappyApplication.Models.user.AuthResponse'.
2025-11-16 17:40:30.590 +03:00 [INF] Executed action MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication) in 18.613ms
2025-11-16 17:40:30.590 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication)'
2025-11-16 17:40:30.591 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:8080/api/v1/auth/refresh-token - 200 null application/json; charset=utf-8 42.2913ms
2025-11-16 17:40:31.197 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:8080/api/v1/auth/refresh-token - null 0
2025-11-16 17:40:31.197 +03:00 [INF] CORS policy execution successful.
2025-11-16 17:40:31.213 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 17:40:31.213 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication)'
2025-11-16 17:40:31.213 +03:00 [INF] Route matched with {action = "RefreshToken", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.user.AuthResponse] RefreshToken() on controller MappyApplication.Controllers.AuthController (MappyApplication).
2025-11-16 17:40:31.214 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__refreshToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`RefreshToken` = @__refreshToken_0
LIMIT 2
2025-11-16 17:40:31.215 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`FirstName`, `a`.`LastName`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`
FROM `AspNetUsers` AS `a`
WHERE `a`.`Id` = @__p_0
LIMIT 1
2025-11-16 17:40:31.219 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']

        UPDATE TOKENS
        SET Revoked = true, Expired = true
        WHERE UserId = @p0
          AND DeviceId = @p1
          AND Revoked = false
          AND Expired = false
2025-11-16 17:40:31.220 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a0`.`Name`
FROM `AspNetUserRoles` AS `a`
INNER JOIN `AspNetRoles` AS `a0` ON `a`.`RoleId` = `a0`.`Id`
WHERE `a`.`UserId` = @__userId_0
2025-11-16 17:40:31.221 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ClaimType`, `a`.`ClaimValue`, `a`.`UserId`
FROM `AspNetUserClaims` AS `a`
WHERE `a`.`UserId` = @__user_Id_0
2025-11-16 17:40:31.221 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a0`.`Name`
FROM `AspNetUserRoles` AS `a`
INNER JOIN `AspNetRoles` AS `a0` ON `a`.`RoleId` = `a0`.`Id`
WHERE `a`.`UserId` = @__userId_0
2025-11-16 17:40:31.222 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ClaimType`, `a`.`ClaimValue`, `a`.`UserId`
FROM `AspNetUserClaims` AS `a`
WHERE `a`.`UserId` = @__user_Id_0
2025-11-16 17:40:31.224 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (DbType = DateTime), @p2='?' (Size = 4000), @p3='?' (DbType = Boolean), @p4='?' (Size = 4000), @p5='?' (DbType = Boolean), @p6='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO `Tokens` (`AccessToken`, `CreatedAt`, `DeviceId`, `Expired`, `RefreshToken`, `Revoked`, `UserId`)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6);
SELECT `Id`
FROM `Tokens`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();
2025-11-16 17:40:31.224 +03:00 [INF] Added Token MappyApplication.Data.Token
2025-11-16 17:40:31.225 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessFailedCount`, `t`.`ConcurrencyStamp`, `t`.`Email`, `t`.`EmailConfirmed`, `t`.`FirstName`, `t`.`LastName`, `t`.`LockoutEnabled`, `t`.`LockoutEnd`, `t`.`NormalizedEmail`, `t`.`NormalizedUserName`, `t`.`PasswordHash`, `t`.`PhoneNumber`, `t`.`PhoneNumberConfirmed`, `t`.`SecurityStamp`, `t`.`TwoFactorEnabled`, `t`.`UserName`, `w`.`Id`, `w`.`Cadence`, `w`.`CityName`, `w`.`Coords`, `w`.`Date`, `w`.`Distance`, `w`.`Duration`, `w`.`Emoji`, `w`.`Pace`, `w`.`Type`, `w`.`UserId`, `c`.`Id`, `c`.`CityName`, `c`.`Country`, `c`.`Date`, `c`.`Emoji`, `c`.`Lat`, `c`.`Lng`, `c`.`Notes`, `c`.`UserId`
FROM (
    SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`FirstName`, `a`.`LastName`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`
    FROM `AspNetUsers` AS `a`
    WHERE `a`.`Id` = @__user_Id_0
    LIMIT 2
) AS `t`
LEFT JOIN `Workouts` AS `w` ON `t`.`Id` = `w`.`UserId`
LEFT JOIN `Cities` AS `c` ON `t`.`Id` = `c`.`UserId`
ORDER BY `t`.`Id`, `w`.`Id`
2025-11-16 17:40:31.225 +03:00 [INF] Executing ObjectResult, writing value of type 'MappyApplication.Models.user.AuthResponse'.
2025-11-16 17:40:31.225 +03:00 [INF] Executed action MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication) in 11.8272ms
2025-11-16 17:40:31.225 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication)'
2025-11-16 17:40:31.225 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:8080/api/v1/auth/refresh-token - 200 null application/json; charset=utf-8 28.2914ms
2025-11-16 17:40:31.766 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:8080/api/v1/auth/refresh-token - null 0
2025-11-16 17:40:31.767 +03:00 [INF] CORS policy execution successful.
2025-11-16 17:40:31.784 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 17:40:31.785 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication)'
2025-11-16 17:40:31.785 +03:00 [INF] Route matched with {action = "RefreshToken", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.user.AuthResponse] RefreshToken() on controller MappyApplication.Controllers.AuthController (MappyApplication).
2025-11-16 17:40:31.786 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__refreshToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`RefreshToken` = @__refreshToken_0
LIMIT 2
2025-11-16 17:40:31.787 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`FirstName`, `a`.`LastName`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`
FROM `AspNetUsers` AS `a`
WHERE `a`.`Id` = @__p_0
LIMIT 1
2025-11-16 17:40:31.788 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']

        UPDATE TOKENS
        SET Revoked = true, Expired = true
        WHERE UserId = @p0
          AND DeviceId = @p1
          AND Revoked = false
          AND Expired = false
2025-11-16 17:40:31.790 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a0`.`Name`
FROM `AspNetUserRoles` AS `a`
INNER JOIN `AspNetRoles` AS `a0` ON `a`.`RoleId` = `a0`.`Id`
WHERE `a`.`UserId` = @__userId_0
2025-11-16 17:40:31.791 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ClaimType`, `a`.`ClaimValue`, `a`.`UserId`
FROM `AspNetUserClaims` AS `a`
WHERE `a`.`UserId` = @__user_Id_0
2025-11-16 17:40:31.791 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a0`.`Name`
FROM `AspNetUserRoles` AS `a`
INNER JOIN `AspNetRoles` AS `a0` ON `a`.`RoleId` = `a0`.`Id`
WHERE `a`.`UserId` = @__userId_0
2025-11-16 17:40:31.791 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ClaimType`, `a`.`ClaimValue`, `a`.`UserId`
FROM `AspNetUserClaims` AS `a`
WHERE `a`.`UserId` = @__user_Id_0
2025-11-16 17:40:31.793 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (DbType = DateTime), @p2='?' (Size = 4000), @p3='?' (DbType = Boolean), @p4='?' (Size = 4000), @p5='?' (DbType = Boolean), @p6='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO `Tokens` (`AccessToken`, `CreatedAt`, `DeviceId`, `Expired`, `RefreshToken`, `Revoked`, `UserId`)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6);
SELECT `Id`
FROM `Tokens`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();
2025-11-16 17:40:31.794 +03:00 [INF] Added Token MappyApplication.Data.Token
2025-11-16 17:40:31.795 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessFailedCount`, `t`.`ConcurrencyStamp`, `t`.`Email`, `t`.`EmailConfirmed`, `t`.`FirstName`, `t`.`LastName`, `t`.`LockoutEnabled`, `t`.`LockoutEnd`, `t`.`NormalizedEmail`, `t`.`NormalizedUserName`, `t`.`PasswordHash`, `t`.`PhoneNumber`, `t`.`PhoneNumberConfirmed`, `t`.`SecurityStamp`, `t`.`TwoFactorEnabled`, `t`.`UserName`, `w`.`Id`, `w`.`Cadence`, `w`.`CityName`, `w`.`Coords`, `w`.`Date`, `w`.`Distance`, `w`.`Duration`, `w`.`Emoji`, `w`.`Pace`, `w`.`Type`, `w`.`UserId`, `c`.`Id`, `c`.`CityName`, `c`.`Country`, `c`.`Date`, `c`.`Emoji`, `c`.`Lat`, `c`.`Lng`, `c`.`Notes`, `c`.`UserId`
FROM (
    SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`FirstName`, `a`.`LastName`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`
    FROM `AspNetUsers` AS `a`
    WHERE `a`.`Id` = @__user_Id_0
    LIMIT 2
) AS `t`
LEFT JOIN `Workouts` AS `w` ON `t`.`Id` = `w`.`UserId`
LEFT JOIN `Cities` AS `c` ON `t`.`Id` = `c`.`UserId`
ORDER BY `t`.`Id`, `w`.`Id`
2025-11-16 17:40:31.795 +03:00 [INF] Executing ObjectResult, writing value of type 'MappyApplication.Models.user.AuthResponse'.
2025-11-16 17:40:31.795 +03:00 [INF] Executed action MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication) in 10.3694ms
2025-11-16 17:40:31.795 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication)'
2025-11-16 17:40:31.795 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:8080/api/v1/auth/refresh-token - 200 null application/json; charset=utf-8 29.0367ms
2025-11-16 17:40:32.320 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:8080/api/v1/auth/refresh-token - null 0
2025-11-16 17:40:32.320 +03:00 [INF] CORS policy execution successful.
2025-11-16 17:40:32.337 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 17:40:32.337 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication)'
2025-11-16 17:40:32.337 +03:00 [INF] Route matched with {action = "RefreshToken", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.user.AuthResponse] RefreshToken() on controller MappyApplication.Controllers.AuthController (MappyApplication).
2025-11-16 17:40:32.338 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__refreshToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`RefreshToken` = @__refreshToken_0
LIMIT 2
2025-11-16 17:40:32.339 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`FirstName`, `a`.`LastName`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`
FROM `AspNetUsers` AS `a`
WHERE `a`.`Id` = @__p_0
LIMIT 1
2025-11-16 17:40:32.341 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']

        UPDATE TOKENS
        SET Revoked = true, Expired = true
        WHERE UserId = @p0
          AND DeviceId = @p1
          AND Revoked = false
          AND Expired = false
2025-11-16 17:40:32.342 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a0`.`Name`
FROM `AspNetUserRoles` AS `a`
INNER JOIN `AspNetRoles` AS `a0` ON `a`.`RoleId` = `a0`.`Id`
WHERE `a`.`UserId` = @__userId_0
2025-11-16 17:40:32.343 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ClaimType`, `a`.`ClaimValue`, `a`.`UserId`
FROM `AspNetUserClaims` AS `a`
WHERE `a`.`UserId` = @__user_Id_0
2025-11-16 17:40:32.344 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a0`.`Name`
FROM `AspNetUserRoles` AS `a`
INNER JOIN `AspNetRoles` AS `a0` ON `a`.`RoleId` = `a0`.`Id`
WHERE `a`.`UserId` = @__userId_0
2025-11-16 17:40:32.344 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ClaimType`, `a`.`ClaimValue`, `a`.`UserId`
FROM `AspNetUserClaims` AS `a`
WHERE `a`.`UserId` = @__user_Id_0
2025-11-16 17:40:32.347 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (DbType = DateTime), @p2='?' (Size = 4000), @p3='?' (DbType = Boolean), @p4='?' (Size = 4000), @p5='?' (DbType = Boolean), @p6='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO `Tokens` (`AccessToken`, `CreatedAt`, `DeviceId`, `Expired`, `RefreshToken`, `Revoked`, `UserId`)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6);
SELECT `Id`
FROM `Tokens`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();
2025-11-16 17:40:32.348 +03:00 [INF] Added Token MappyApplication.Data.Token
2025-11-16 17:40:32.349 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessFailedCount`, `t`.`ConcurrencyStamp`, `t`.`Email`, `t`.`EmailConfirmed`, `t`.`FirstName`, `t`.`LastName`, `t`.`LockoutEnabled`, `t`.`LockoutEnd`, `t`.`NormalizedEmail`, `t`.`NormalizedUserName`, `t`.`PasswordHash`, `t`.`PhoneNumber`, `t`.`PhoneNumberConfirmed`, `t`.`SecurityStamp`, `t`.`TwoFactorEnabled`, `t`.`UserName`, `w`.`Id`, `w`.`Cadence`, `w`.`CityName`, `w`.`Coords`, `w`.`Date`, `w`.`Distance`, `w`.`Duration`, `w`.`Emoji`, `w`.`Pace`, `w`.`Type`, `w`.`UserId`, `c`.`Id`, `c`.`CityName`, `c`.`Country`, `c`.`Date`, `c`.`Emoji`, `c`.`Lat`, `c`.`Lng`, `c`.`Notes`, `c`.`UserId`
FROM (
    SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`FirstName`, `a`.`LastName`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`
    FROM `AspNetUsers` AS `a`
    WHERE `a`.`Id` = @__user_Id_0
    LIMIT 2
) AS `t`
LEFT JOIN `Workouts` AS `w` ON `t`.`Id` = `w`.`UserId`
LEFT JOIN `Cities` AS `c` ON `t`.`Id` = `c`.`UserId`
ORDER BY `t`.`Id`, `w`.`Id`
2025-11-16 17:40:32.349 +03:00 [INF] Executing ObjectResult, writing value of type 'MappyApplication.Models.user.AuthResponse'.
2025-11-16 17:40:32.349 +03:00 [INF] Executed action MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication) in 11.9637ms
2025-11-16 17:40:32.349 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication)'
2025-11-16 17:40:32.349 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:8080/api/v1/auth/refresh-token - 200 null application/json; charset=utf-8 28.9856ms
2025-11-16 17:40:32.969 +03:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:8080/api/v1/auth/refresh-token - null null
2025-11-16 17:40:32.972 +03:00 [INF] CORS policy execution successful.
2025-11-16 17:40:32.972 +03:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:8080/api/v1/auth/refresh-token - 204 null null 2.9402ms
2025-11-16 17:40:32.974 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:8080/api/v1/auth/refresh-token - null 0
2025-11-16 17:40:32.974 +03:00 [INF] CORS policy execution successful.
2025-11-16 17:40:32.997 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 17:40:32.998 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication)'
2025-11-16 17:40:32.998 +03:00 [INF] Route matched with {action = "RefreshToken", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.user.AuthResponse] RefreshToken() on controller MappyApplication.Controllers.AuthController (MappyApplication).
2025-11-16 17:40:32.999 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__refreshToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`RefreshToken` = @__refreshToken_0
LIMIT 2
2025-11-16 17:40:33.000 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`FirstName`, `a`.`LastName`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`
FROM `AspNetUsers` AS `a`
WHERE `a`.`Id` = @__p_0
LIMIT 1
2025-11-16 17:40:33.003 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']

        UPDATE TOKENS
        SET Revoked = true, Expired = true
        WHERE UserId = @p0
          AND DeviceId = @p1
          AND Revoked = false
          AND Expired = false
2025-11-16 17:40:33.003 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a0`.`Name`
FROM `AspNetUserRoles` AS `a`
INNER JOIN `AspNetRoles` AS `a0` ON `a`.`RoleId` = `a0`.`Id`
WHERE `a`.`UserId` = @__userId_0
2025-11-16 17:40:33.004 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ClaimType`, `a`.`ClaimValue`, `a`.`UserId`
FROM `AspNetUserClaims` AS `a`
WHERE `a`.`UserId` = @__user_Id_0
2025-11-16 17:40:33.005 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a0`.`Name`
FROM `AspNetUserRoles` AS `a`
INNER JOIN `AspNetRoles` AS `a0` ON `a`.`RoleId` = `a0`.`Id`
WHERE `a`.`UserId` = @__userId_0
2025-11-16 17:40:33.005 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ClaimType`, `a`.`ClaimValue`, `a`.`UserId`
FROM `AspNetUserClaims` AS `a`
WHERE `a`.`UserId` = @__user_Id_0
2025-11-16 17:40:33.007 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (DbType = DateTime), @p2='?' (Size = 4000), @p3='?' (DbType = Boolean), @p4='?' (Size = 4000), @p5='?' (DbType = Boolean), @p6='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO `Tokens` (`AccessToken`, `CreatedAt`, `DeviceId`, `Expired`, `RefreshToken`, `Revoked`, `UserId`)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6);
SELECT `Id`
FROM `Tokens`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();
2025-11-16 17:40:33.008 +03:00 [INF] Added Token MappyApplication.Data.Token
2025-11-16 17:40:33.011 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessFailedCount`, `t`.`ConcurrencyStamp`, `t`.`Email`, `t`.`EmailConfirmed`, `t`.`FirstName`, `t`.`LastName`, `t`.`LockoutEnabled`, `t`.`LockoutEnd`, `t`.`NormalizedEmail`, `t`.`NormalizedUserName`, `t`.`PasswordHash`, `t`.`PhoneNumber`, `t`.`PhoneNumberConfirmed`, `t`.`SecurityStamp`, `t`.`TwoFactorEnabled`, `t`.`UserName`, `w`.`Id`, `w`.`Cadence`, `w`.`CityName`, `w`.`Coords`, `w`.`Date`, `w`.`Distance`, `w`.`Duration`, `w`.`Emoji`, `w`.`Pace`, `w`.`Type`, `w`.`UserId`, `c`.`Id`, `c`.`CityName`, `c`.`Country`, `c`.`Date`, `c`.`Emoji`, `c`.`Lat`, `c`.`Lng`, `c`.`Notes`, `c`.`UserId`
FROM (
    SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`FirstName`, `a`.`LastName`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`
    FROM `AspNetUsers` AS `a`
    WHERE `a`.`Id` = @__user_Id_0
    LIMIT 2
) AS `t`
LEFT JOIN `Workouts` AS `w` ON `t`.`Id` = `w`.`UserId`
LEFT JOIN `Cities` AS `c` ON `t`.`Id` = `c`.`UserId`
ORDER BY `t`.`Id`, `w`.`Id`
2025-11-16 17:40:33.012 +03:00 [INF] Executing ObjectResult, writing value of type 'MappyApplication.Models.user.AuthResponse'.
2025-11-16 17:40:33.012 +03:00 [INF] Executed action MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication) in 13.8128ms
2025-11-16 17:40:33.012 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication)'
2025-11-16 17:40:33.012 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:8080/api/v1/auth/refresh-token - 200 null application/json; charset=utf-8 38.4382ms
2025-11-16 17:40:33.514 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:8080/api/v1/auth/refresh-token - null 0
2025-11-16 17:40:33.514 +03:00 [INF] CORS policy execution successful.
2025-11-16 17:40:33.532 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 17:40:33.532 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication)'
2025-11-16 17:40:33.532 +03:00 [INF] Route matched with {action = "RefreshToken", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.user.AuthResponse] RefreshToken() on controller MappyApplication.Controllers.AuthController (MappyApplication).
2025-11-16 17:40:33.535 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__refreshToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`RefreshToken` = @__refreshToken_0
LIMIT 2
2025-11-16 17:40:33.536 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`FirstName`, `a`.`LastName`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`
FROM `AspNetUsers` AS `a`
WHERE `a`.`Id` = @__p_0
LIMIT 1
2025-11-16 17:40:33.538 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']

        UPDATE TOKENS
        SET Revoked = true, Expired = true
        WHERE UserId = @p0
          AND DeviceId = @p1
          AND Revoked = false
          AND Expired = false
2025-11-16 17:40:33.539 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a0`.`Name`
FROM `AspNetUserRoles` AS `a`
INNER JOIN `AspNetRoles` AS `a0` ON `a`.`RoleId` = `a0`.`Id`
WHERE `a`.`UserId` = @__userId_0
2025-11-16 17:40:33.539 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ClaimType`, `a`.`ClaimValue`, `a`.`UserId`
FROM `AspNetUserClaims` AS `a`
WHERE `a`.`UserId` = @__user_Id_0
2025-11-16 17:40:33.540 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a0`.`Name`
FROM `AspNetUserRoles` AS `a`
INNER JOIN `AspNetRoles` AS `a0` ON `a`.`RoleId` = `a0`.`Id`
WHERE `a`.`UserId` = @__userId_0
2025-11-16 17:40:33.540 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ClaimType`, `a`.`ClaimValue`, `a`.`UserId`
FROM `AspNetUserClaims` AS `a`
WHERE `a`.`UserId` = @__user_Id_0
2025-11-16 17:40:33.542 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (DbType = DateTime), @p2='?' (Size = 4000), @p3='?' (DbType = Boolean), @p4='?' (Size = 4000), @p5='?' (DbType = Boolean), @p6='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO `Tokens` (`AccessToken`, `CreatedAt`, `DeviceId`, `Expired`, `RefreshToken`, `Revoked`, `UserId`)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6);
SELECT `Id`
FROM `Tokens`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();
2025-11-16 17:40:33.543 +03:00 [INF] Added Token MappyApplication.Data.Token
2025-11-16 17:40:33.544 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessFailedCount`, `t`.`ConcurrencyStamp`, `t`.`Email`, `t`.`EmailConfirmed`, `t`.`FirstName`, `t`.`LastName`, `t`.`LockoutEnabled`, `t`.`LockoutEnd`, `t`.`NormalizedEmail`, `t`.`NormalizedUserName`, `t`.`PasswordHash`, `t`.`PhoneNumber`, `t`.`PhoneNumberConfirmed`, `t`.`SecurityStamp`, `t`.`TwoFactorEnabled`, `t`.`UserName`, `w`.`Id`, `w`.`Cadence`, `w`.`CityName`, `w`.`Coords`, `w`.`Date`, `w`.`Distance`, `w`.`Duration`, `w`.`Emoji`, `w`.`Pace`, `w`.`Type`, `w`.`UserId`, `c`.`Id`, `c`.`CityName`, `c`.`Country`, `c`.`Date`, `c`.`Emoji`, `c`.`Lat`, `c`.`Lng`, `c`.`Notes`, `c`.`UserId`
FROM (
    SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`FirstName`, `a`.`LastName`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`
    FROM `AspNetUsers` AS `a`
    WHERE `a`.`Id` = @__user_Id_0
    LIMIT 2
) AS `t`
LEFT JOIN `Workouts` AS `w` ON `t`.`Id` = `w`.`UserId`
LEFT JOIN `Cities` AS `c` ON `t`.`Id` = `c`.`UserId`
ORDER BY `t`.`Id`, `w`.`Id`
2025-11-16 17:40:33.544 +03:00 [INF] Executing ObjectResult, writing value of type 'MappyApplication.Models.user.AuthResponse'.
2025-11-16 17:40:33.544 +03:00 [INF] Executed action MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication) in 11.4094ms
2025-11-16 17:40:33.544 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication)'
2025-11-16 17:40:33.544 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:8080/api/v1/auth/refresh-token - 200 null application/json; charset=utf-8 30.1135ms
2025-11-16 17:40:34.148 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:8080/api/v1/auth/refresh-token - null 0
2025-11-16 17:40:34.148 +03:00 [INF] CORS policy execution successful.
2025-11-16 17:40:34.167 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 17:40:34.168 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication)'
2025-11-16 17:40:34.168 +03:00 [INF] Route matched with {action = "RefreshToken", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.user.AuthResponse] RefreshToken() on controller MappyApplication.Controllers.AuthController (MappyApplication).
2025-11-16 17:40:34.170 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__refreshToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`RefreshToken` = @__refreshToken_0
LIMIT 2
2025-11-16 17:40:34.171 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`FirstName`, `a`.`LastName`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`
FROM `AspNetUsers` AS `a`
WHERE `a`.`Id` = @__p_0
LIMIT 1
2025-11-16 17:40:34.174 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']

        UPDATE TOKENS
        SET Revoked = true, Expired = true
        WHERE UserId = @p0
          AND DeviceId = @p1
          AND Revoked = false
          AND Expired = false
2025-11-16 17:40:34.175 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a0`.`Name`
FROM `AspNetUserRoles` AS `a`
INNER JOIN `AspNetRoles` AS `a0` ON `a`.`RoleId` = `a0`.`Id`
WHERE `a`.`UserId` = @__userId_0
2025-11-16 17:40:34.175 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ClaimType`, `a`.`ClaimValue`, `a`.`UserId`
FROM `AspNetUserClaims` AS `a`
WHERE `a`.`UserId` = @__user_Id_0
2025-11-16 17:40:34.176 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a0`.`Name`
FROM `AspNetUserRoles` AS `a`
INNER JOIN `AspNetRoles` AS `a0` ON `a`.`RoleId` = `a0`.`Id`
WHERE `a`.`UserId` = @__userId_0
2025-11-16 17:40:34.177 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ClaimType`, `a`.`ClaimValue`, `a`.`UserId`
FROM `AspNetUserClaims` AS `a`
WHERE `a`.`UserId` = @__user_Id_0
2025-11-16 17:40:34.179 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (DbType = DateTime), @p2='?' (Size = 4000), @p3='?' (DbType = Boolean), @p4='?' (Size = 4000), @p5='?' (DbType = Boolean), @p6='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO `Tokens` (`AccessToken`, `CreatedAt`, `DeviceId`, `Expired`, `RefreshToken`, `Revoked`, `UserId`)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6);
SELECT `Id`
FROM `Tokens`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();
2025-11-16 17:40:34.180 +03:00 [INF] Added Token MappyApplication.Data.Token
2025-11-16 17:40:34.181 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessFailedCount`, `t`.`ConcurrencyStamp`, `t`.`Email`, `t`.`EmailConfirmed`, `t`.`FirstName`, `t`.`LastName`, `t`.`LockoutEnabled`, `t`.`LockoutEnd`, `t`.`NormalizedEmail`, `t`.`NormalizedUserName`, `t`.`PasswordHash`, `t`.`PhoneNumber`, `t`.`PhoneNumberConfirmed`, `t`.`SecurityStamp`, `t`.`TwoFactorEnabled`, `t`.`UserName`, `w`.`Id`, `w`.`Cadence`, `w`.`CityName`, `w`.`Coords`, `w`.`Date`, `w`.`Distance`, `w`.`Duration`, `w`.`Emoji`, `w`.`Pace`, `w`.`Type`, `w`.`UserId`, `c`.`Id`, `c`.`CityName`, `c`.`Country`, `c`.`Date`, `c`.`Emoji`, `c`.`Lat`, `c`.`Lng`, `c`.`Notes`, `c`.`UserId`
FROM (
    SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`FirstName`, `a`.`LastName`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`
    FROM `AspNetUsers` AS `a`
    WHERE `a`.`Id` = @__user_Id_0
    LIMIT 2
) AS `t`
LEFT JOIN `Workouts` AS `w` ON `t`.`Id` = `w`.`UserId`
LEFT JOIN `Cities` AS `c` ON `t`.`Id` = `c`.`UserId`
ORDER BY `t`.`Id`, `w`.`Id`
2025-11-16 17:40:34.181 +03:00 [INF] Executing ObjectResult, writing value of type 'MappyApplication.Models.user.AuthResponse'.
2025-11-16 17:40:34.181 +03:00 [INF] Executed action MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication) in 12.9642ms
2025-11-16 17:40:34.181 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication)'
2025-11-16 17:40:34.181 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:8080/api/v1/auth/refresh-token - 200 null application/json; charset=utf-8 33.333ms
2025-11-16 17:40:34.676 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:8080/api/v1/auth/refresh-token - null 0
2025-11-16 17:40:34.676 +03:00 [INF] CORS policy execution successful.
2025-11-16 17:40:34.690 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 17:40:34.691 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication)'
2025-11-16 17:40:34.691 +03:00 [INF] Route matched with {action = "RefreshToken", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.user.AuthResponse] RefreshToken() on controller MappyApplication.Controllers.AuthController (MappyApplication).
2025-11-16 17:40:34.692 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__refreshToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`RefreshToken` = @__refreshToken_0
LIMIT 2
2025-11-16 17:40:34.693 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`FirstName`, `a`.`LastName`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`
FROM `AspNetUsers` AS `a`
WHERE `a`.`Id` = @__p_0
LIMIT 1
2025-11-16 17:40:34.695 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']

        UPDATE TOKENS
        SET Revoked = true, Expired = true
        WHERE UserId = @p0
          AND DeviceId = @p1
          AND Revoked = false
          AND Expired = false
2025-11-16 17:40:34.696 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a0`.`Name`
FROM `AspNetUserRoles` AS `a`
INNER JOIN `AspNetRoles` AS `a0` ON `a`.`RoleId` = `a0`.`Id`
WHERE `a`.`UserId` = @__userId_0
2025-11-16 17:40:34.697 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ClaimType`, `a`.`ClaimValue`, `a`.`UserId`
FROM `AspNetUserClaims` AS `a`
WHERE `a`.`UserId` = @__user_Id_0
2025-11-16 17:40:34.698 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a0`.`Name`
FROM `AspNetUserRoles` AS `a`
INNER JOIN `AspNetRoles` AS `a0` ON `a`.`RoleId` = `a0`.`Id`
WHERE `a`.`UserId` = @__userId_0
2025-11-16 17:40:34.702 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ClaimType`, `a`.`ClaimValue`, `a`.`UserId`
FROM `AspNetUserClaims` AS `a`
WHERE `a`.`UserId` = @__user_Id_0
2025-11-16 17:40:34.703 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (DbType = DateTime), @p2='?' (Size = 4000), @p3='?' (DbType = Boolean), @p4='?' (Size = 4000), @p5='?' (DbType = Boolean), @p6='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO `Tokens` (`AccessToken`, `CreatedAt`, `DeviceId`, `Expired`, `RefreshToken`, `Revoked`, `UserId`)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6);
SELECT `Id`
FROM `Tokens`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();
2025-11-16 17:40:34.704 +03:00 [INF] Added Token MappyApplication.Data.Token
2025-11-16 17:40:34.705 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessFailedCount`, `t`.`ConcurrencyStamp`, `t`.`Email`, `t`.`EmailConfirmed`, `t`.`FirstName`, `t`.`LastName`, `t`.`LockoutEnabled`, `t`.`LockoutEnd`, `t`.`NormalizedEmail`, `t`.`NormalizedUserName`, `t`.`PasswordHash`, `t`.`PhoneNumber`, `t`.`PhoneNumberConfirmed`, `t`.`SecurityStamp`, `t`.`TwoFactorEnabled`, `t`.`UserName`, `w`.`Id`, `w`.`Cadence`, `w`.`CityName`, `w`.`Coords`, `w`.`Date`, `w`.`Distance`, `w`.`Duration`, `w`.`Emoji`, `w`.`Pace`, `w`.`Type`, `w`.`UserId`, `c`.`Id`, `c`.`CityName`, `c`.`Country`, `c`.`Date`, `c`.`Emoji`, `c`.`Lat`, `c`.`Lng`, `c`.`Notes`, `c`.`UserId`
FROM (
    SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`FirstName`, `a`.`LastName`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`
    FROM `AspNetUsers` AS `a`
    WHERE `a`.`Id` = @__user_Id_0
    LIMIT 2
) AS `t`
LEFT JOIN `Workouts` AS `w` ON `t`.`Id` = `w`.`UserId`
LEFT JOIN `Cities` AS `c` ON `t`.`Id` = `c`.`UserId`
ORDER BY `t`.`Id`, `w`.`Id`
2025-11-16 17:40:34.705 +03:00 [INF] Executing ObjectResult, writing value of type 'MappyApplication.Models.user.AuthResponse'.
2025-11-16 17:40:34.705 +03:00 [INF] Executed action MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication) in 14.5288ms
2025-11-16 17:40:34.705 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication)'
2025-11-16 17:40:34.705 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:8080/api/v1/auth/refresh-token - 200 null application/json; charset=utf-8 29.1408ms
2025-11-16 17:40:35.218 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:8080/api/v1/auth/refresh-token - null 0
2025-11-16 17:40:35.218 +03:00 [INF] CORS policy execution successful.
2025-11-16 17:40:35.236 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 17:40:35.236 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication)'
2025-11-16 17:40:35.236 +03:00 [INF] Route matched with {action = "RefreshToken", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.user.AuthResponse] RefreshToken() on controller MappyApplication.Controllers.AuthController (MappyApplication).
2025-11-16 17:40:35.237 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__refreshToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`RefreshToken` = @__refreshToken_0
LIMIT 2
2025-11-16 17:40:35.238 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`FirstName`, `a`.`LastName`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`
FROM `AspNetUsers` AS `a`
WHERE `a`.`Id` = @__p_0
LIMIT 1
2025-11-16 17:40:35.239 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']

        UPDATE TOKENS
        SET Revoked = true, Expired = true
        WHERE UserId = @p0
          AND DeviceId = @p1
          AND Revoked = false
          AND Expired = false
2025-11-16 17:40:35.240 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a0`.`Name`
FROM `AspNetUserRoles` AS `a`
INNER JOIN `AspNetRoles` AS `a0` ON `a`.`RoleId` = `a0`.`Id`
WHERE `a`.`UserId` = @__userId_0
2025-11-16 17:40:35.243 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ClaimType`, `a`.`ClaimValue`, `a`.`UserId`
FROM `AspNetUserClaims` AS `a`
WHERE `a`.`UserId` = @__user_Id_0
2025-11-16 17:40:35.244 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a0`.`Name`
FROM `AspNetUserRoles` AS `a`
INNER JOIN `AspNetRoles` AS `a0` ON `a`.`RoleId` = `a0`.`Id`
WHERE `a`.`UserId` = @__userId_0
2025-11-16 17:40:35.245 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ClaimType`, `a`.`ClaimValue`, `a`.`UserId`
FROM `AspNetUserClaims` AS `a`
WHERE `a`.`UserId` = @__user_Id_0
2025-11-16 17:40:35.246 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (DbType = DateTime), @p2='?' (Size = 4000), @p3='?' (DbType = Boolean), @p4='?' (Size = 4000), @p5='?' (DbType = Boolean), @p6='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO `Tokens` (`AccessToken`, `CreatedAt`, `DeviceId`, `Expired`, `RefreshToken`, `Revoked`, `UserId`)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6);
SELECT `Id`
FROM `Tokens`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();
2025-11-16 17:40:35.246 +03:00 [INF] Added Token MappyApplication.Data.Token
2025-11-16 17:40:35.247 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessFailedCount`, `t`.`ConcurrencyStamp`, `t`.`Email`, `t`.`EmailConfirmed`, `t`.`FirstName`, `t`.`LastName`, `t`.`LockoutEnabled`, `t`.`LockoutEnd`, `t`.`NormalizedEmail`, `t`.`NormalizedUserName`, `t`.`PasswordHash`, `t`.`PhoneNumber`, `t`.`PhoneNumberConfirmed`, `t`.`SecurityStamp`, `t`.`TwoFactorEnabled`, `t`.`UserName`, `w`.`Id`, `w`.`Cadence`, `w`.`CityName`, `w`.`Coords`, `w`.`Date`, `w`.`Distance`, `w`.`Duration`, `w`.`Emoji`, `w`.`Pace`, `w`.`Type`, `w`.`UserId`, `c`.`Id`, `c`.`CityName`, `c`.`Country`, `c`.`Date`, `c`.`Emoji`, `c`.`Lat`, `c`.`Lng`, `c`.`Notes`, `c`.`UserId`
FROM (
    SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`FirstName`, `a`.`LastName`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`
    FROM `AspNetUsers` AS `a`
    WHERE `a`.`Id` = @__user_Id_0
    LIMIT 2
) AS `t`
LEFT JOIN `Workouts` AS `w` ON `t`.`Id` = `w`.`UserId`
LEFT JOIN `Cities` AS `c` ON `t`.`Id` = `c`.`UserId`
ORDER BY `t`.`Id`, `w`.`Id`
2025-11-16 17:40:35.248 +03:00 [INF] Executing ObjectResult, writing value of type 'MappyApplication.Models.user.AuthResponse'.
2025-11-16 17:40:35.248 +03:00 [INF] Executed action MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication) in 11.674ms
2025-11-16 17:40:35.248 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication)'
2025-11-16 17:40:35.248 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:8080/api/v1/auth/refresh-token - 200 null application/json; charset=utf-8 30.217ms
2025-11-16 17:40:38.816 +03:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:8080/api/v1/auth/refresh-token - null null
2025-11-16 17:40:38.821 +03:00 [INF] CORS policy execution successful.
2025-11-16 17:40:38.821 +03:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:8080/api/v1/auth/refresh-token - 204 null null 4.7847ms
2025-11-16 17:40:38.823 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:8080/api/v1/auth/refresh-token - null 0
2025-11-16 17:40:38.823 +03:00 [INF] CORS policy execution successful.
2025-11-16 17:40:38.848 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 17:40:38.848 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication)'
2025-11-16 17:40:38.848 +03:00 [INF] Route matched with {action = "RefreshToken", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.user.AuthResponse] RefreshToken() on controller MappyApplication.Controllers.AuthController (MappyApplication).
2025-11-16 17:40:38.849 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__refreshToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`RefreshToken` = @__refreshToken_0
LIMIT 2
2025-11-16 17:40:38.852 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`FirstName`, `a`.`LastName`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`
FROM `AspNetUsers` AS `a`
WHERE `a`.`Id` = @__p_0
LIMIT 1
2025-11-16 17:40:38.854 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']

        UPDATE TOKENS
        SET Revoked = true, Expired = true
        WHERE UserId = @p0
          AND DeviceId = @p1
          AND Revoked = false
          AND Expired = false
2025-11-16 17:40:38.857 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a0`.`Name`
FROM `AspNetUserRoles` AS `a`
INNER JOIN `AspNetRoles` AS `a0` ON `a`.`RoleId` = `a0`.`Id`
WHERE `a`.`UserId` = @__userId_0
2025-11-16 17:40:38.858 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ClaimType`, `a`.`ClaimValue`, `a`.`UserId`
FROM `AspNetUserClaims` AS `a`
WHERE `a`.`UserId` = @__user_Id_0
2025-11-16 17:40:38.859 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a0`.`Name`
FROM `AspNetUserRoles` AS `a`
INNER JOIN `AspNetRoles` AS `a0` ON `a`.`RoleId` = `a0`.`Id`
WHERE `a`.`UserId` = @__userId_0
2025-11-16 17:40:38.859 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ClaimType`, `a`.`ClaimValue`, `a`.`UserId`
FROM `AspNetUserClaims` AS `a`
WHERE `a`.`UserId` = @__user_Id_0
2025-11-16 17:40:38.862 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (DbType = DateTime), @p2='?' (Size = 4000), @p3='?' (DbType = Boolean), @p4='?' (Size = 4000), @p5='?' (DbType = Boolean), @p6='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO `Tokens` (`AccessToken`, `CreatedAt`, `DeviceId`, `Expired`, `RefreshToken`, `Revoked`, `UserId`)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6);
SELECT `Id`
FROM `Tokens`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();
2025-11-16 17:40:38.862 +03:00 [INF] Added Token MappyApplication.Data.Token
2025-11-16 17:40:38.863 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessFailedCount`, `t`.`ConcurrencyStamp`, `t`.`Email`, `t`.`EmailConfirmed`, `t`.`FirstName`, `t`.`LastName`, `t`.`LockoutEnabled`, `t`.`LockoutEnd`, `t`.`NormalizedEmail`, `t`.`NormalizedUserName`, `t`.`PasswordHash`, `t`.`PhoneNumber`, `t`.`PhoneNumberConfirmed`, `t`.`SecurityStamp`, `t`.`TwoFactorEnabled`, `t`.`UserName`, `w`.`Id`, `w`.`Cadence`, `w`.`CityName`, `w`.`Coords`, `w`.`Date`, `w`.`Distance`, `w`.`Duration`, `w`.`Emoji`, `w`.`Pace`, `w`.`Type`, `w`.`UserId`, `c`.`Id`, `c`.`CityName`, `c`.`Country`, `c`.`Date`, `c`.`Emoji`, `c`.`Lat`, `c`.`Lng`, `c`.`Notes`, `c`.`UserId`
FROM (
    SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`FirstName`, `a`.`LastName`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`
    FROM `AspNetUsers` AS `a`
    WHERE `a`.`Id` = @__user_Id_0
    LIMIT 2
) AS `t`
LEFT JOIN `Workouts` AS `w` ON `t`.`Id` = `w`.`UserId`
LEFT JOIN `Cities` AS `c` ON `t`.`Id` = `c`.`UserId`
ORDER BY `t`.`Id`, `w`.`Id`
2025-11-16 17:40:38.864 +03:00 [INF] Executing ObjectResult, writing value of type 'MappyApplication.Models.user.AuthResponse'.
2025-11-16 17:40:38.864 +03:00 [INF] Executed action MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication) in 15.5551ms
2025-11-16 17:40:38.864 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication)'
2025-11-16 17:40:38.864 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:8080/api/v1/auth/refresh-token - 200 null application/json; charset=utf-8 40.6796ms
2025-11-16 17:41:51.639 +03:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:8080/api/v1/auth/refresh-token - null null
2025-11-16 17:41:51.644 +03:00 [INF] CORS policy execution successful.
2025-11-16 17:41:51.645 +03:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:8080/api/v1/auth/refresh-token - 204 null null 6.2417ms
2025-11-16 17:41:51.647 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:8080/api/v1/auth/refresh-token - null 0
2025-11-16 17:41:51.647 +03:00 [INF] CORS policy execution successful.
2025-11-16 17:41:51.676 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 17:41:51.677 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication)'
2025-11-16 17:41:51.677 +03:00 [INF] Route matched with {action = "RefreshToken", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.user.AuthResponse] RefreshToken() on controller MappyApplication.Controllers.AuthController (MappyApplication).
2025-11-16 17:41:51.678 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__refreshToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`RefreshToken` = @__refreshToken_0
LIMIT 2
2025-11-16 17:41:51.679 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`FirstName`, `a`.`LastName`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`
FROM `AspNetUsers` AS `a`
WHERE `a`.`Id` = @__p_0
LIMIT 1
2025-11-16 17:41:51.683 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']

        UPDATE TOKENS
        SET Revoked = true, Expired = true
        WHERE UserId = @p0
          AND DeviceId = @p1
          AND Revoked = false
          AND Expired = false
2025-11-16 17:41:51.684 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a0`.`Name`
FROM `AspNetUserRoles` AS `a`
INNER JOIN `AspNetRoles` AS `a0` ON `a`.`RoleId` = `a0`.`Id`
WHERE `a`.`UserId` = @__userId_0
2025-11-16 17:41:51.685 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ClaimType`, `a`.`ClaimValue`, `a`.`UserId`
FROM `AspNetUserClaims` AS `a`
WHERE `a`.`UserId` = @__user_Id_0
2025-11-16 17:41:51.685 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a0`.`Name`
FROM `AspNetUserRoles` AS `a`
INNER JOIN `AspNetRoles` AS `a0` ON `a`.`RoleId` = `a0`.`Id`
WHERE `a`.`UserId` = @__userId_0
2025-11-16 17:41:51.686 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ClaimType`, `a`.`ClaimValue`, `a`.`UserId`
FROM `AspNetUserClaims` AS `a`
WHERE `a`.`UserId` = @__user_Id_0
2025-11-16 17:41:51.687 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (DbType = DateTime), @p2='?' (Size = 4000), @p3='?' (DbType = Boolean), @p4='?' (Size = 4000), @p5='?' (DbType = Boolean), @p6='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO `Tokens` (`AccessToken`, `CreatedAt`, `DeviceId`, `Expired`, `RefreshToken`, `Revoked`, `UserId`)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6);
SELECT `Id`
FROM `Tokens`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();
2025-11-16 17:41:51.688 +03:00 [INF] Added Token MappyApplication.Data.Token
2025-11-16 17:41:51.688 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessFailedCount`, `t`.`ConcurrencyStamp`, `t`.`Email`, `t`.`EmailConfirmed`, `t`.`FirstName`, `t`.`LastName`, `t`.`LockoutEnabled`, `t`.`LockoutEnd`, `t`.`NormalizedEmail`, `t`.`NormalizedUserName`, `t`.`PasswordHash`, `t`.`PhoneNumber`, `t`.`PhoneNumberConfirmed`, `t`.`SecurityStamp`, `t`.`TwoFactorEnabled`, `t`.`UserName`, `w`.`Id`, `w`.`Cadence`, `w`.`CityName`, `w`.`Coords`, `w`.`Date`, `w`.`Distance`, `w`.`Duration`, `w`.`Emoji`, `w`.`Pace`, `w`.`Type`, `w`.`UserId`, `c`.`Id`, `c`.`CityName`, `c`.`Country`, `c`.`Date`, `c`.`Emoji`, `c`.`Lat`, `c`.`Lng`, `c`.`Notes`, `c`.`UserId`
FROM (
    SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`FirstName`, `a`.`LastName`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`
    FROM `AspNetUsers` AS `a`
    WHERE `a`.`Id` = @__user_Id_0
    LIMIT 2
) AS `t`
LEFT JOIN `Workouts` AS `w` ON `t`.`Id` = `w`.`UserId`
LEFT JOIN `Cities` AS `c` ON `t`.`Id` = `c`.`UserId`
ORDER BY `t`.`Id`, `w`.`Id`
2025-11-16 17:41:51.689 +03:00 [INF] Executing ObjectResult, writing value of type 'MappyApplication.Models.user.AuthResponse'.
2025-11-16 17:41:51.689 +03:00 [INF] Executed action MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication) in 12.4481ms
2025-11-16 17:41:51.689 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication)'
2025-11-16 17:41:51.689 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:8080/api/v1/auth/refresh-token - 200 null application/json; charset=utf-8 42.6702ms
2025-11-16 17:41:55.946 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:8080/api/v1/auth/refresh-token - null 0
2025-11-16 17:41:55.948 +03:00 [INF] CORS policy execution successful.
2025-11-16 17:41:55.980 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 17:41:55.981 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication)'
2025-11-16 17:41:55.981 +03:00 [INF] Route matched with {action = "RefreshToken", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.user.AuthResponse] RefreshToken() on controller MappyApplication.Controllers.AuthController (MappyApplication).
2025-11-16 17:41:55.983 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__refreshToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`RefreshToken` = @__refreshToken_0
LIMIT 2
2025-11-16 17:41:55.993 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`FirstName`, `a`.`LastName`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`
FROM `AspNetUsers` AS `a`
WHERE `a`.`Id` = @__p_0
LIMIT 1
2025-11-16 17:41:56.002 +03:00 [INF] Executed DbCommand (5ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']

        UPDATE TOKENS
        SET Revoked = true, Expired = true
        WHERE UserId = @p0
          AND DeviceId = @p1
          AND Revoked = false
          AND Expired = false
2025-11-16 17:41:56.007 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a0`.`Name`
FROM `AspNetUserRoles` AS `a`
INNER JOIN `AspNetRoles` AS `a0` ON `a`.`RoleId` = `a0`.`Id`
WHERE `a`.`UserId` = @__userId_0
2025-11-16 17:41:56.012 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ClaimType`, `a`.`ClaimValue`, `a`.`UserId`
FROM `AspNetUserClaims` AS `a`
WHERE `a`.`UserId` = @__user_Id_0
2025-11-16 17:41:56.019 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a0`.`Name`
FROM `AspNetUserRoles` AS `a`
INNER JOIN `AspNetRoles` AS `a0` ON `a`.`RoleId` = `a0`.`Id`
WHERE `a`.`UserId` = @__userId_0
2025-11-16 17:41:56.020 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ClaimType`, `a`.`ClaimValue`, `a`.`UserId`
FROM `AspNetUserClaims` AS `a`
WHERE `a`.`UserId` = @__user_Id_0
2025-11-16 17:41:56.022 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (DbType = DateTime), @p2='?' (Size = 4000), @p3='?' (DbType = Boolean), @p4='?' (Size = 4000), @p5='?' (DbType = Boolean), @p6='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO `Tokens` (`AccessToken`, `CreatedAt`, `DeviceId`, `Expired`, `RefreshToken`, `Revoked`, `UserId`)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6);
SELECT `Id`
FROM `Tokens`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();
2025-11-16 17:41:56.023 +03:00 [INF] Added Token MappyApplication.Data.Token
2025-11-16 17:41:56.025 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessFailedCount`, `t`.`ConcurrencyStamp`, `t`.`Email`, `t`.`EmailConfirmed`, `t`.`FirstName`, `t`.`LastName`, `t`.`LockoutEnabled`, `t`.`LockoutEnd`, `t`.`NormalizedEmail`, `t`.`NormalizedUserName`, `t`.`PasswordHash`, `t`.`PhoneNumber`, `t`.`PhoneNumberConfirmed`, `t`.`SecurityStamp`, `t`.`TwoFactorEnabled`, `t`.`UserName`, `w`.`Id`, `w`.`Cadence`, `w`.`CityName`, `w`.`Coords`, `w`.`Date`, `w`.`Distance`, `w`.`Duration`, `w`.`Emoji`, `w`.`Pace`, `w`.`Type`, `w`.`UserId`, `c`.`Id`, `c`.`CityName`, `c`.`Country`, `c`.`Date`, `c`.`Emoji`, `c`.`Lat`, `c`.`Lng`, `c`.`Notes`, `c`.`UserId`
FROM (
    SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`FirstName`, `a`.`LastName`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`
    FROM `AspNetUsers` AS `a`
    WHERE `a`.`Id` = @__user_Id_0
    LIMIT 2
) AS `t`
LEFT JOIN `Workouts` AS `w` ON `t`.`Id` = `w`.`UserId`
LEFT JOIN `Cities` AS `c` ON `t`.`Id` = `c`.`UserId`
ORDER BY `t`.`Id`, `w`.`Id`
2025-11-16 17:41:56.025 +03:00 [INF] Executing ObjectResult, writing value of type 'MappyApplication.Models.user.AuthResponse'.
2025-11-16 17:41:56.025 +03:00 [INF] Executed action MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication) in 44.3493ms
2025-11-16 17:41:56.025 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication)'
2025-11-16 17:41:56.025 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:8080/api/v1/auth/refresh-token - 200 null application/json; charset=utf-8 79.4271ms
2025-11-16 17:41:57.838 +03:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:8080/api/v1/auth/refresh-token - null null
2025-11-16 17:41:57.840 +03:00 [INF] CORS policy execution successful.
2025-11-16 17:41:57.841 +03:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:8080/api/v1/auth/refresh-token - 204 null null 2.5535ms
2025-11-16 17:41:57.842 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:8080/api/v1/auth/refresh-token - null 0
2025-11-16 17:41:57.842 +03:00 [INF] CORS policy execution successful.
2025-11-16 17:41:57.875 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 17:41:57.876 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication)'
2025-11-16 17:41:57.876 +03:00 [INF] Route matched with {action = "RefreshToken", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.user.AuthResponse] RefreshToken() on controller MappyApplication.Controllers.AuthController (MappyApplication).
2025-11-16 17:41:57.877 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__refreshToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`RefreshToken` = @__refreshToken_0
LIMIT 2
2025-11-16 17:41:57.878 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`FirstName`, `a`.`LastName`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`
FROM `AspNetUsers` AS `a`
WHERE `a`.`Id` = @__p_0
LIMIT 1
2025-11-16 17:41:57.881 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']

        UPDATE TOKENS
        SET Revoked = true, Expired = true
        WHERE UserId = @p0
          AND DeviceId = @p1
          AND Revoked = false
          AND Expired = false
2025-11-16 17:41:57.882 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a0`.`Name`
FROM `AspNetUserRoles` AS `a`
INNER JOIN `AspNetRoles` AS `a0` ON `a`.`RoleId` = `a0`.`Id`
WHERE `a`.`UserId` = @__userId_0
2025-11-16 17:41:57.883 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ClaimType`, `a`.`ClaimValue`, `a`.`UserId`
FROM `AspNetUserClaims` AS `a`
WHERE `a`.`UserId` = @__user_Id_0
2025-11-16 17:41:57.884 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a0`.`Name`
FROM `AspNetUserRoles` AS `a`
INNER JOIN `AspNetRoles` AS `a0` ON `a`.`RoleId` = `a0`.`Id`
WHERE `a`.`UserId` = @__userId_0
2025-11-16 17:41:57.884 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ClaimType`, `a`.`ClaimValue`, `a`.`UserId`
FROM `AspNetUserClaims` AS `a`
WHERE `a`.`UserId` = @__user_Id_0
2025-11-16 17:41:57.887 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (DbType = DateTime), @p2='?' (Size = 4000), @p3='?' (DbType = Boolean), @p4='?' (Size = 4000), @p5='?' (DbType = Boolean), @p6='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO `Tokens` (`AccessToken`, `CreatedAt`, `DeviceId`, `Expired`, `RefreshToken`, `Revoked`, `UserId`)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6);
SELECT `Id`
FROM `Tokens`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();
2025-11-16 17:41:57.887 +03:00 [INF] Added Token MappyApplication.Data.Token
2025-11-16 17:41:57.889 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessFailedCount`, `t`.`ConcurrencyStamp`, `t`.`Email`, `t`.`EmailConfirmed`, `t`.`FirstName`, `t`.`LastName`, `t`.`LockoutEnabled`, `t`.`LockoutEnd`, `t`.`NormalizedEmail`, `t`.`NormalizedUserName`, `t`.`PasswordHash`, `t`.`PhoneNumber`, `t`.`PhoneNumberConfirmed`, `t`.`SecurityStamp`, `t`.`TwoFactorEnabled`, `t`.`UserName`, `w`.`Id`, `w`.`Cadence`, `w`.`CityName`, `w`.`Coords`, `w`.`Date`, `w`.`Distance`, `w`.`Duration`, `w`.`Emoji`, `w`.`Pace`, `w`.`Type`, `w`.`UserId`, `c`.`Id`, `c`.`CityName`, `c`.`Country`, `c`.`Date`, `c`.`Emoji`, `c`.`Lat`, `c`.`Lng`, `c`.`Notes`, `c`.`UserId`
FROM (
    SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`FirstName`, `a`.`LastName`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`
    FROM `AspNetUsers` AS `a`
    WHERE `a`.`Id` = @__user_Id_0
    LIMIT 2
) AS `t`
LEFT JOIN `Workouts` AS `w` ON `t`.`Id` = `w`.`UserId`
LEFT JOIN `Cities` AS `c` ON `t`.`Id` = `c`.`UserId`
ORDER BY `t`.`Id`, `w`.`Id`
2025-11-16 17:41:57.889 +03:00 [INF] Executing ObjectResult, writing value of type 'MappyApplication.Models.user.AuthResponse'.
2025-11-16 17:41:57.889 +03:00 [INF] Executed action MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication) in 13.009ms
2025-11-16 17:41:57.889 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication)'
2025-11-16 17:41:57.889 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:8080/api/v1/auth/refresh-token - 200 null application/json; charset=utf-8 47.3497ms
2025-11-16 17:42:00.535 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:8080/api/v1/auth/refresh-token - null 0
2025-11-16 17:42:00.536 +03:00 [INF] CORS policy execution successful.
2025-11-16 17:42:00.565 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 17:42:00.566 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication)'
2025-11-16 17:42:00.566 +03:00 [INF] Route matched with {action = "RefreshToken", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.user.AuthResponse] RefreshToken() on controller MappyApplication.Controllers.AuthController (MappyApplication).
2025-11-16 17:42:00.567 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__refreshToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`RefreshToken` = @__refreshToken_0
LIMIT 2
2025-11-16 17:42:00.569 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`FirstName`, `a`.`LastName`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`
FROM `AspNetUsers` AS `a`
WHERE `a`.`Id` = @__p_0
LIMIT 1
2025-11-16 17:42:00.573 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']

        UPDATE TOKENS
        SET Revoked = true, Expired = true
        WHERE UserId = @p0
          AND DeviceId = @p1
          AND Revoked = false
          AND Expired = false
2025-11-16 17:42:00.574 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a0`.`Name`
FROM `AspNetUserRoles` AS `a`
INNER JOIN `AspNetRoles` AS `a0` ON `a`.`RoleId` = `a0`.`Id`
WHERE `a`.`UserId` = @__userId_0
2025-11-16 17:42:00.574 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ClaimType`, `a`.`ClaimValue`, `a`.`UserId`
FROM `AspNetUserClaims` AS `a`
WHERE `a`.`UserId` = @__user_Id_0
2025-11-16 17:42:00.575 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a0`.`Name`
FROM `AspNetUserRoles` AS `a`
INNER JOIN `AspNetRoles` AS `a0` ON `a`.`RoleId` = `a0`.`Id`
WHERE `a`.`UserId` = @__userId_0
2025-11-16 17:42:00.576 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ClaimType`, `a`.`ClaimValue`, `a`.`UserId`
FROM `AspNetUserClaims` AS `a`
WHERE `a`.`UserId` = @__user_Id_0
2025-11-16 17:42:00.578 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (DbType = DateTime), @p2='?' (Size = 4000), @p3='?' (DbType = Boolean), @p4='?' (Size = 4000), @p5='?' (DbType = Boolean), @p6='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO `Tokens` (`AccessToken`, `CreatedAt`, `DeviceId`, `Expired`, `RefreshToken`, `Revoked`, `UserId`)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6);
SELECT `Id`
FROM `Tokens`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();
2025-11-16 17:42:00.578 +03:00 [INF] Added Token MappyApplication.Data.Token
2025-11-16 17:42:00.580 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessFailedCount`, `t`.`ConcurrencyStamp`, `t`.`Email`, `t`.`EmailConfirmed`, `t`.`FirstName`, `t`.`LastName`, `t`.`LockoutEnabled`, `t`.`LockoutEnd`, `t`.`NormalizedEmail`, `t`.`NormalizedUserName`, `t`.`PasswordHash`, `t`.`PhoneNumber`, `t`.`PhoneNumberConfirmed`, `t`.`SecurityStamp`, `t`.`TwoFactorEnabled`, `t`.`UserName`, `w`.`Id`, `w`.`Cadence`, `w`.`CityName`, `w`.`Coords`, `w`.`Date`, `w`.`Distance`, `w`.`Duration`, `w`.`Emoji`, `w`.`Pace`, `w`.`Type`, `w`.`UserId`, `c`.`Id`, `c`.`CityName`, `c`.`Country`, `c`.`Date`, `c`.`Emoji`, `c`.`Lat`, `c`.`Lng`, `c`.`Notes`, `c`.`UserId`
FROM (
    SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`FirstName`, `a`.`LastName`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`
    FROM `AspNetUsers` AS `a`
    WHERE `a`.`Id` = @__user_Id_0
    LIMIT 2
) AS `t`
LEFT JOIN `Workouts` AS `w` ON `t`.`Id` = `w`.`UserId`
LEFT JOIN `Cities` AS `c` ON `t`.`Id` = `c`.`UserId`
ORDER BY `t`.`Id`, `w`.`Id`
2025-11-16 17:42:00.580 +03:00 [INF] Executing ObjectResult, writing value of type 'MappyApplication.Models.user.AuthResponse'.
2025-11-16 17:42:00.581 +03:00 [INF] Executed action MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication) in 14.7734ms
2025-11-16 17:42:00.581 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication)'
2025-11-16 17:42:00.581 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:8080/api/v1/auth/refresh-token - 200 null application/json; charset=utf-8 49.35ms
2025-11-16 17:42:05.463 +03:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:8080/api/v1/auth/refresh-token - null null
2025-11-16 17:42:05.463 +03:00 [INF] CORS policy execution successful.
2025-11-16 17:42:05.463 +03:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:8080/api/v1/auth/refresh-token - 204 null null 0.9335ms
2025-11-16 17:42:05.466 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:8080/api/v1/auth/refresh-token - null 0
2025-11-16 17:42:05.466 +03:00 [INF] CORS policy execution successful.
2025-11-16 17:42:05.486 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 17:42:05.487 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication)'
2025-11-16 17:42:05.487 +03:00 [INF] Route matched with {action = "RefreshToken", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.user.AuthResponse] RefreshToken() on controller MappyApplication.Controllers.AuthController (MappyApplication).
2025-11-16 17:42:05.488 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__refreshToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`RefreshToken` = @__refreshToken_0
LIMIT 2
2025-11-16 17:42:05.489 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`FirstName`, `a`.`LastName`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`
FROM `AspNetUsers` AS `a`
WHERE `a`.`Id` = @__p_0
LIMIT 1
2025-11-16 17:42:05.493 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']

        UPDATE TOKENS
        SET Revoked = true, Expired = true
        WHERE UserId = @p0
          AND DeviceId = @p1
          AND Revoked = false
          AND Expired = false
2025-11-16 17:42:05.494 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a0`.`Name`
FROM `AspNetUserRoles` AS `a`
INNER JOIN `AspNetRoles` AS `a0` ON `a`.`RoleId` = `a0`.`Id`
WHERE `a`.`UserId` = @__userId_0
2025-11-16 17:42:05.495 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ClaimType`, `a`.`ClaimValue`, `a`.`UserId`
FROM `AspNetUserClaims` AS `a`
WHERE `a`.`UserId` = @__user_Id_0
2025-11-16 17:42:05.496 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a0`.`Name`
FROM `AspNetUserRoles` AS `a`
INNER JOIN `AspNetRoles` AS `a0` ON `a`.`RoleId` = `a0`.`Id`
WHERE `a`.`UserId` = @__userId_0
2025-11-16 17:42:05.497 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ClaimType`, `a`.`ClaimValue`, `a`.`UserId`
FROM `AspNetUserClaims` AS `a`
WHERE `a`.`UserId` = @__user_Id_0
2025-11-16 17:42:05.499 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (DbType = DateTime), @p2='?' (Size = 4000), @p3='?' (DbType = Boolean), @p4='?' (Size = 4000), @p5='?' (DbType = Boolean), @p6='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO `Tokens` (`AccessToken`, `CreatedAt`, `DeviceId`, `Expired`, `RefreshToken`, `Revoked`, `UserId`)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6);
SELECT `Id`
FROM `Tokens`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();
2025-11-16 17:42:05.500 +03:00 [INF] Added Token MappyApplication.Data.Token
2025-11-16 17:42:05.502 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessFailedCount`, `t`.`ConcurrencyStamp`, `t`.`Email`, `t`.`EmailConfirmed`, `t`.`FirstName`, `t`.`LastName`, `t`.`LockoutEnabled`, `t`.`LockoutEnd`, `t`.`NormalizedEmail`, `t`.`NormalizedUserName`, `t`.`PasswordHash`, `t`.`PhoneNumber`, `t`.`PhoneNumberConfirmed`, `t`.`SecurityStamp`, `t`.`TwoFactorEnabled`, `t`.`UserName`, `w`.`Id`, `w`.`Cadence`, `w`.`CityName`, `w`.`Coords`, `w`.`Date`, `w`.`Distance`, `w`.`Duration`, `w`.`Emoji`, `w`.`Pace`, `w`.`Type`, `w`.`UserId`, `c`.`Id`, `c`.`CityName`, `c`.`Country`, `c`.`Date`, `c`.`Emoji`, `c`.`Lat`, `c`.`Lng`, `c`.`Notes`, `c`.`UserId`
FROM (
    SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`FirstName`, `a`.`LastName`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`
    FROM `AspNetUsers` AS `a`
    WHERE `a`.`Id` = @__user_Id_0
    LIMIT 2
) AS `t`
LEFT JOIN `Workouts` AS `w` ON `t`.`Id` = `w`.`UserId`
LEFT JOIN `Cities` AS `c` ON `t`.`Id` = `c`.`UserId`
ORDER BY `t`.`Id`, `w`.`Id`
2025-11-16 17:42:05.502 +03:00 [INF] Executing ObjectResult, writing value of type 'MappyApplication.Models.user.AuthResponse'.
2025-11-16 17:42:05.502 +03:00 [INF] Executed action MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication) in 15.4638ms
2025-11-16 17:42:05.502 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication)'
2025-11-16 17:42:05.503 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:8080/api/v1/auth/refresh-token - 200 null application/json; charset=utf-8 37.1715ms
2025-11-16 17:43:57.872 +03:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:8080/api/v1/auth/refresh-token - null null
2025-11-16 17:43:57.877 +03:00 [INF] CORS policy execution successful.
2025-11-16 17:43:57.878 +03:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:8080/api/v1/auth/refresh-token - 204 null null 6.4702ms
2025-11-16 17:43:57.880 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:8080/api/v1/auth/refresh-token - null 0
2025-11-16 17:43:57.881 +03:00 [INF] CORS policy execution successful.
2025-11-16 17:43:57.920 +03:00 [INF] Executed DbCommand (6ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 17:43:57.921 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication)'
2025-11-16 17:43:57.921 +03:00 [INF] Route matched with {action = "RefreshToken", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.user.AuthResponse] RefreshToken() on controller MappyApplication.Controllers.AuthController (MappyApplication).
2025-11-16 17:43:57.924 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__refreshToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`RefreshToken` = @__refreshToken_0
LIMIT 2
2025-11-16 17:43:57.926 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`FirstName`, `a`.`LastName`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`
FROM `AspNetUsers` AS `a`
WHERE `a`.`Id` = @__p_0
LIMIT 1
2025-11-16 17:43:57.934 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']

        UPDATE TOKENS
        SET Revoked = true, Expired = true
        WHERE UserId = @p0
          AND DeviceId = @p1
          AND Revoked = false
          AND Expired = false
2025-11-16 17:43:57.940 +03:00 [INF] Executed DbCommand (4ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a0`.`Name`
FROM `AspNetUserRoles` AS `a`
INNER JOIN `AspNetRoles` AS `a0` ON `a`.`RoleId` = `a0`.`Id`
WHERE `a`.`UserId` = @__userId_0
2025-11-16 17:43:57.948 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ClaimType`, `a`.`ClaimValue`, `a`.`UserId`
FROM `AspNetUserClaims` AS `a`
WHERE `a`.`UserId` = @__user_Id_0
2025-11-16 17:43:57.949 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a0`.`Name`
FROM `AspNetUserRoles` AS `a`
INNER JOIN `AspNetRoles` AS `a0` ON `a`.`RoleId` = `a0`.`Id`
WHERE `a`.`UserId` = @__userId_0
2025-11-16 17:43:57.950 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ClaimType`, `a`.`ClaimValue`, `a`.`UserId`
FROM `AspNetUserClaims` AS `a`
WHERE `a`.`UserId` = @__user_Id_0
2025-11-16 17:43:57.952 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (DbType = DateTime), @p2='?' (Size = 4000), @p3='?' (DbType = Boolean), @p4='?' (Size = 4000), @p5='?' (DbType = Boolean), @p6='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO `Tokens` (`AccessToken`, `CreatedAt`, `DeviceId`, `Expired`, `RefreshToken`, `Revoked`, `UserId`)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6);
SELECT `Id`
FROM `Tokens`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();
2025-11-16 17:43:57.956 +03:00 [INF] Added Token MappyApplication.Data.Token
2025-11-16 17:43:57.958 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessFailedCount`, `t`.`ConcurrencyStamp`, `t`.`Email`, `t`.`EmailConfirmed`, `t`.`FirstName`, `t`.`LastName`, `t`.`LockoutEnabled`, `t`.`LockoutEnd`, `t`.`NormalizedEmail`, `t`.`NormalizedUserName`, `t`.`PasswordHash`, `t`.`PhoneNumber`, `t`.`PhoneNumberConfirmed`, `t`.`SecurityStamp`, `t`.`TwoFactorEnabled`, `t`.`UserName`, `w`.`Id`, `w`.`Cadence`, `w`.`CityName`, `w`.`Coords`, `w`.`Date`, `w`.`Distance`, `w`.`Duration`, `w`.`Emoji`, `w`.`Pace`, `w`.`Type`, `w`.`UserId`, `c`.`Id`, `c`.`CityName`, `c`.`Country`, `c`.`Date`, `c`.`Emoji`, `c`.`Lat`, `c`.`Lng`, `c`.`Notes`, `c`.`UserId`
FROM (
    SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`FirstName`, `a`.`LastName`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`
    FROM `AspNetUsers` AS `a`
    WHERE `a`.`Id` = @__user_Id_0
    LIMIT 2
) AS `t`
LEFT JOIN `Workouts` AS `w` ON `t`.`Id` = `w`.`UserId`
LEFT JOIN `Cities` AS `c` ON `t`.`Id` = `c`.`UserId`
ORDER BY `t`.`Id`, `w`.`Id`
2025-11-16 17:43:57.958 +03:00 [INF] Executing ObjectResult, writing value of type 'MappyApplication.Models.user.AuthResponse'.
2025-11-16 17:43:57.958 +03:00 [INF] Executed action MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication) in 36.8558ms
2025-11-16 17:43:57.958 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication)'
2025-11-16 17:43:57.958 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:8080/api/v1/auth/refresh-token - 200 null application/json; charset=utf-8 78.2746ms
2025-11-16 17:44:00.214 +03:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:8080/api/v1/auth/logout - null null
2025-11-16 17:44:00.214 +03:00 [INF] CORS policy execution successful.
2025-11-16 17:44:00.215 +03:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:8080/api/v1/auth/logout - 204 null null 0.5027ms
2025-11-16 17:44:00.216 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:8080/api/v1/auth/logout - null null
2025-11-16 17:44:00.233 +03:00 [INF] CORS policy execution successful.
2025-11-16 17:44:00.260 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 17:44:00.284 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.AuthController.Logout (MappyApplication)'
2025-11-16 17:44:00.366 +03:00 [INF] Route matched with {action = "Logout", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Logout() on controller MappyApplication.Controllers.AuthController (MappyApplication).
2025-11-16 17:44:00.379 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__refreshToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`RefreshToken` = @__refreshToken_0
LIMIT 2
2025-11-16 17:44:00.381 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']

        UPDATE TOKENS
        SET Revoked = true, Expired = true
        WHERE UserId = @p0
          AND DeviceId = @p1
          AND Revoked = false
          AND Expired = false
2025-11-16 17:44:00.396 +03:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType0`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-11-16 17:44:00.442 +03:00 [INF] Executed action MappyApplication.Controllers.AuthController.Logout (MappyApplication) in 76.0004ms
2025-11-16 17:44:00.442 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.AuthController.Logout (MappyApplication)'
2025-11-16 17:44:00.442 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:8080/api/v1/auth/logout - 200 null application/json; charset=utf-8 225.7986ms
2025-11-16 17:44:30.330 +03:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:8080/api/v1/auth/login - null null
2025-11-16 17:44:30.333 +03:00 [INF] CORS policy execution successful.
2025-11-16 17:44:30.334 +03:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:8080/api/v1/auth/login - 204 null null 3.5732ms
2025-11-16 17:44:30.335 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:8080/api/v1/auth/login - application/json 51
2025-11-16 17:44:30.335 +03:00 [INF] CORS policy execution successful.
2025-11-16 17:44:30.339 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.AuthController.Login (MappyApplication)'
2025-11-16 17:44:30.340 +03:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.user.AuthResponse] Login(MappyApplication.Models.user.AuthLogin) on controller MappyApplication.Controllers.AuthController (MappyApplication).
2025-11-16 17:44:30.390 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`FirstName`, `a`.`LastName`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`
FROM `AspNetUsers` AS `a`
WHERE `a`.`NormalizedEmail` = @__normalizedEmail_0
LIMIT 2
2025-11-16 17:44:30.435 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']

        UPDATE TOKENS
        SET Revoked = true, Expired = true
        WHERE UserId = @p0
          AND DeviceId = @p1
          AND Revoked = false
          AND Expired = false
2025-11-16 17:44:30.436 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a0`.`Name`
FROM `AspNetUserRoles` AS `a`
INNER JOIN `AspNetRoles` AS `a0` ON `a`.`RoleId` = `a0`.`Id`
WHERE `a`.`UserId` = @__userId_0
2025-11-16 17:44:30.437 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ClaimType`, `a`.`ClaimValue`, `a`.`UserId`
FROM `AspNetUserClaims` AS `a`
WHERE `a`.`UserId` = @__user_Id_0
2025-11-16 17:44:30.437 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a0`.`Name`
FROM `AspNetUserRoles` AS `a`
INNER JOIN `AspNetRoles` AS `a0` ON `a`.`RoleId` = `a0`.`Id`
WHERE `a`.`UserId` = @__userId_0
2025-11-16 17:44:30.438 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ClaimType`, `a`.`ClaimValue`, `a`.`UserId`
FROM `AspNetUserClaims` AS `a`
WHERE `a`.`UserId` = @__user_Id_0
2025-11-16 17:44:30.441 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (DbType = DateTime), @p2='?' (Size = 4000), @p3='?' (DbType = Boolean), @p4='?' (Size = 4000), @p5='?' (DbType = Boolean), @p6='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO `Tokens` (`AccessToken`, `CreatedAt`, `DeviceId`, `Expired`, `RefreshToken`, `Revoked`, `UserId`)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6);
SELECT `Id`
FROM `Tokens`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();
2025-11-16 17:44:30.442 +03:00 [INF] Added Token MappyApplication.Data.Token
2025-11-16 17:44:30.443 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessFailedCount`, `t`.`ConcurrencyStamp`, `t`.`Email`, `t`.`EmailConfirmed`, `t`.`FirstName`, `t`.`LastName`, `t`.`LockoutEnabled`, `t`.`LockoutEnd`, `t`.`NormalizedEmail`, `t`.`NormalizedUserName`, `t`.`PasswordHash`, `t`.`PhoneNumber`, `t`.`PhoneNumberConfirmed`, `t`.`SecurityStamp`, `t`.`TwoFactorEnabled`, `t`.`UserName`, `w`.`Id`, `w`.`Cadence`, `w`.`CityName`, `w`.`Coords`, `w`.`Date`, `w`.`Distance`, `w`.`Duration`, `w`.`Emoji`, `w`.`Pace`, `w`.`Type`, `w`.`UserId`, `c`.`Id`, `c`.`CityName`, `c`.`Country`, `c`.`Date`, `c`.`Emoji`, `c`.`Lat`, `c`.`Lng`, `c`.`Notes`, `c`.`UserId`
FROM (
    SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`FirstName`, `a`.`LastName`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`
    FROM `AspNetUsers` AS `a`
    WHERE `a`.`Id` = @__user_Id_0
    LIMIT 2
) AS `t`
LEFT JOIN `Workouts` AS `w` ON `t`.`Id` = `w`.`UserId`
LEFT JOIN `Cities` AS `c` ON `t`.`Id` = `c`.`UserId`
ORDER BY `t`.`Id`, `w`.`Id`
2025-11-16 17:44:30.444 +03:00 [INF] Executing ObjectResult, writing value of type 'MappyApplication.Models.user.AuthResponse'.
2025-11-16 17:44:30.444 +03:00 [INF] Executed action MappyApplication.Controllers.AuthController.Login (MappyApplication) in 102.6037ms
2025-11-16 17:44:30.444 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.AuthController.Login (MappyApplication)'
2025-11-16 17:44:30.444 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:8080/api/v1/auth/login - 200 null application/json; charset=utf-8 108.5355ms
2025-11-16 17:44:34.200 +03:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:8080/api/v1/auth/refresh-token - null null
2025-11-16 17:44:34.216 +03:00 [INF] CORS policy execution successful.
2025-11-16 17:44:34.221 +03:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:8080/api/v1/auth/refresh-token - 204 null null 19.8761ms
2025-11-16 17:44:34.223 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:8080/api/v1/auth/refresh-token - null 0
2025-11-16 17:44:34.224 +03:00 [INF] CORS policy execution successful.
2025-11-16 17:44:34.258 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 17:44:34.259 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication)'
2025-11-16 17:44:34.259 +03:00 [INF] Route matched with {action = "RefreshToken", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.user.AuthResponse] RefreshToken() on controller MappyApplication.Controllers.AuthController (MappyApplication).
2025-11-16 17:44:34.260 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__refreshToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`RefreshToken` = @__refreshToken_0
LIMIT 2
2025-11-16 17:44:34.261 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`FirstName`, `a`.`LastName`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`
FROM `AspNetUsers` AS `a`
WHERE `a`.`Id` = @__p_0
LIMIT 1
2025-11-16 17:44:34.263 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']

        UPDATE TOKENS
        SET Revoked = true, Expired = true
        WHERE UserId = @p0
          AND DeviceId = @p1
          AND Revoked = false
          AND Expired = false
2025-11-16 17:44:34.264 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a0`.`Name`
FROM `AspNetUserRoles` AS `a`
INNER JOIN `AspNetRoles` AS `a0` ON `a`.`RoleId` = `a0`.`Id`
WHERE `a`.`UserId` = @__userId_0
2025-11-16 17:44:34.265 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ClaimType`, `a`.`ClaimValue`, `a`.`UserId`
FROM `AspNetUserClaims` AS `a`
WHERE `a`.`UserId` = @__user_Id_0
2025-11-16 17:44:34.265 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a0`.`Name`
FROM `AspNetUserRoles` AS `a`
INNER JOIN `AspNetRoles` AS `a0` ON `a`.`RoleId` = `a0`.`Id`
WHERE `a`.`UserId` = @__userId_0
2025-11-16 17:44:34.265 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ClaimType`, `a`.`ClaimValue`, `a`.`UserId`
FROM `AspNetUserClaims` AS `a`
WHERE `a`.`UserId` = @__user_Id_0
2025-11-16 17:44:34.267 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (DbType = DateTime), @p2='?' (Size = 4000), @p3='?' (DbType = Boolean), @p4='?' (Size = 4000), @p5='?' (DbType = Boolean), @p6='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO `Tokens` (`AccessToken`, `CreatedAt`, `DeviceId`, `Expired`, `RefreshToken`, `Revoked`, `UserId`)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6);
SELECT `Id`
FROM `Tokens`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();
2025-11-16 17:44:34.268 +03:00 [INF] Added Token MappyApplication.Data.Token
2025-11-16 17:44:34.271 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessFailedCount`, `t`.`ConcurrencyStamp`, `t`.`Email`, `t`.`EmailConfirmed`, `t`.`FirstName`, `t`.`LastName`, `t`.`LockoutEnabled`, `t`.`LockoutEnd`, `t`.`NormalizedEmail`, `t`.`NormalizedUserName`, `t`.`PasswordHash`, `t`.`PhoneNumber`, `t`.`PhoneNumberConfirmed`, `t`.`SecurityStamp`, `t`.`TwoFactorEnabled`, `t`.`UserName`, `w`.`Id`, `w`.`Cadence`, `w`.`CityName`, `w`.`Coords`, `w`.`Date`, `w`.`Distance`, `w`.`Duration`, `w`.`Emoji`, `w`.`Pace`, `w`.`Type`, `w`.`UserId`, `c`.`Id`, `c`.`CityName`, `c`.`Country`, `c`.`Date`, `c`.`Emoji`, `c`.`Lat`, `c`.`Lng`, `c`.`Notes`, `c`.`UserId`
FROM (
    SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`FirstName`, `a`.`LastName`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`
    FROM `AspNetUsers` AS `a`
    WHERE `a`.`Id` = @__user_Id_0
    LIMIT 2
) AS `t`
LEFT JOIN `Workouts` AS `w` ON `t`.`Id` = `w`.`UserId`
LEFT JOIN `Cities` AS `c` ON `t`.`Id` = `c`.`UserId`
ORDER BY `t`.`Id`, `w`.`Id`
2025-11-16 17:44:34.271 +03:00 [INF] Executing ObjectResult, writing value of type 'MappyApplication.Models.user.AuthResponse'.
2025-11-16 17:44:34.271 +03:00 [INF] Executed action MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication) in 12.0619ms
2025-11-16 17:44:34.271 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication)'
2025-11-16 17:44:34.271 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:8080/api/v1/auth/refresh-token - 200 null application/json; charset=utf-8 48.1443ms
2025-11-16 17:44:34.805 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:8080/api/v1/auth/refresh-token - null 0
2025-11-16 17:44:34.805 +03:00 [INF] CORS policy execution successful.
2025-11-16 17:44:34.817 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 17:44:34.817 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication)'
2025-11-16 17:44:34.817 +03:00 [INF] Route matched with {action = "RefreshToken", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.user.AuthResponse] RefreshToken() on controller MappyApplication.Controllers.AuthController (MappyApplication).
2025-11-16 17:44:34.819 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__refreshToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`RefreshToken` = @__refreshToken_0
LIMIT 2
2025-11-16 17:44:34.820 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`FirstName`, `a`.`LastName`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`
FROM `AspNetUsers` AS `a`
WHERE `a`.`Id` = @__p_0
LIMIT 1
2025-11-16 17:44:34.823 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']

        UPDATE TOKENS
        SET Revoked = true, Expired = true
        WHERE UserId = @p0
          AND DeviceId = @p1
          AND Revoked = false
          AND Expired = false
2025-11-16 17:44:34.823 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a0`.`Name`
FROM `AspNetUserRoles` AS `a`
INNER JOIN `AspNetRoles` AS `a0` ON `a`.`RoleId` = `a0`.`Id`
WHERE `a`.`UserId` = @__userId_0
2025-11-16 17:44:34.824 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ClaimType`, `a`.`ClaimValue`, `a`.`UserId`
FROM `AspNetUserClaims` AS `a`
WHERE `a`.`UserId` = @__user_Id_0
2025-11-16 17:44:34.824 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a0`.`Name`
FROM `AspNetUserRoles` AS `a`
INNER JOIN `AspNetRoles` AS `a0` ON `a`.`RoleId` = `a0`.`Id`
WHERE `a`.`UserId` = @__userId_0
2025-11-16 17:44:34.825 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ClaimType`, `a`.`ClaimValue`, `a`.`UserId`
FROM `AspNetUserClaims` AS `a`
WHERE `a`.`UserId` = @__user_Id_0
2025-11-16 17:44:34.826 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (DbType = DateTime), @p2='?' (Size = 4000), @p3='?' (DbType = Boolean), @p4='?' (Size = 4000), @p5='?' (DbType = Boolean), @p6='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO `Tokens` (`AccessToken`, `CreatedAt`, `DeviceId`, `Expired`, `RefreshToken`, `Revoked`, `UserId`)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6);
SELECT `Id`
FROM `Tokens`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();
2025-11-16 17:44:34.826 +03:00 [INF] Added Token MappyApplication.Data.Token
2025-11-16 17:44:34.827 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessFailedCount`, `t`.`ConcurrencyStamp`, `t`.`Email`, `t`.`EmailConfirmed`, `t`.`FirstName`, `t`.`LastName`, `t`.`LockoutEnabled`, `t`.`LockoutEnd`, `t`.`NormalizedEmail`, `t`.`NormalizedUserName`, `t`.`PasswordHash`, `t`.`PhoneNumber`, `t`.`PhoneNumberConfirmed`, `t`.`SecurityStamp`, `t`.`TwoFactorEnabled`, `t`.`UserName`, `w`.`Id`, `w`.`Cadence`, `w`.`CityName`, `w`.`Coords`, `w`.`Date`, `w`.`Distance`, `w`.`Duration`, `w`.`Emoji`, `w`.`Pace`, `w`.`Type`, `w`.`UserId`, `c`.`Id`, `c`.`CityName`, `c`.`Country`, `c`.`Date`, `c`.`Emoji`, `c`.`Lat`, `c`.`Lng`, `c`.`Notes`, `c`.`UserId`
FROM (
    SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`FirstName`, `a`.`LastName`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`
    FROM `AspNetUsers` AS `a`
    WHERE `a`.`Id` = @__user_Id_0
    LIMIT 2
) AS `t`
LEFT JOIN `Workouts` AS `w` ON `t`.`Id` = `w`.`UserId`
LEFT JOIN `Cities` AS `c` ON `t`.`Id` = `c`.`UserId`
ORDER BY `t`.`Id`, `w`.`Id`
2025-11-16 17:44:34.827 +03:00 [INF] Executing ObjectResult, writing value of type 'MappyApplication.Models.user.AuthResponse'.
2025-11-16 17:44:34.827 +03:00 [INF] Executed action MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication) in 9.7587ms
2025-11-16 17:44:34.827 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication)'
2025-11-16 17:44:34.827 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:8080/api/v1/auth/refresh-token - 200 null application/json; charset=utf-8 21.9182ms
2025-11-16 17:44:35.591 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:8080/api/v1/auth/refresh-token - null 0
2025-11-16 17:44:35.591 +03:00 [INF] CORS policy execution successful.
2025-11-16 17:44:35.606 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 17:44:35.606 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication)'
2025-11-16 17:44:35.606 +03:00 [INF] Route matched with {action = "RefreshToken", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.user.AuthResponse] RefreshToken() on controller MappyApplication.Controllers.AuthController (MappyApplication).
2025-11-16 17:44:35.607 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__refreshToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`RefreshToken` = @__refreshToken_0
LIMIT 2
2025-11-16 17:44:35.607 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`FirstName`, `a`.`LastName`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`
FROM `AspNetUsers` AS `a`
WHERE `a`.`Id` = @__p_0
LIMIT 1
2025-11-16 17:44:35.608 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']

        UPDATE TOKENS
        SET Revoked = true, Expired = true
        WHERE UserId = @p0
          AND DeviceId = @p1
          AND Revoked = false
          AND Expired = false
2025-11-16 17:44:35.609 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a0`.`Name`
FROM `AspNetUserRoles` AS `a`
INNER JOIN `AspNetRoles` AS `a0` ON `a`.`RoleId` = `a0`.`Id`
WHERE `a`.`UserId` = @__userId_0
2025-11-16 17:44:35.610 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ClaimType`, `a`.`ClaimValue`, `a`.`UserId`
FROM `AspNetUserClaims` AS `a`
WHERE `a`.`UserId` = @__user_Id_0
2025-11-16 17:44:35.610 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a0`.`Name`
FROM `AspNetUserRoles` AS `a`
INNER JOIN `AspNetRoles` AS `a0` ON `a`.`RoleId` = `a0`.`Id`
WHERE `a`.`UserId` = @__userId_0
2025-11-16 17:44:35.610 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ClaimType`, `a`.`ClaimValue`, `a`.`UserId`
FROM `AspNetUserClaims` AS `a`
WHERE `a`.`UserId` = @__user_Id_0
2025-11-16 17:44:35.612 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (DbType = DateTime), @p2='?' (Size = 4000), @p3='?' (DbType = Boolean), @p4='?' (Size = 4000), @p5='?' (DbType = Boolean), @p6='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO `Tokens` (`AccessToken`, `CreatedAt`, `DeviceId`, `Expired`, `RefreshToken`, `Revoked`, `UserId`)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6);
SELECT `Id`
FROM `Tokens`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();
2025-11-16 17:44:35.612 +03:00 [INF] Added Token MappyApplication.Data.Token
2025-11-16 17:44:35.614 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessFailedCount`, `t`.`ConcurrencyStamp`, `t`.`Email`, `t`.`EmailConfirmed`, `t`.`FirstName`, `t`.`LastName`, `t`.`LockoutEnabled`, `t`.`LockoutEnd`, `t`.`NormalizedEmail`, `t`.`NormalizedUserName`, `t`.`PasswordHash`, `t`.`PhoneNumber`, `t`.`PhoneNumberConfirmed`, `t`.`SecurityStamp`, `t`.`TwoFactorEnabled`, `t`.`UserName`, `w`.`Id`, `w`.`Cadence`, `w`.`CityName`, `w`.`Coords`, `w`.`Date`, `w`.`Distance`, `w`.`Duration`, `w`.`Emoji`, `w`.`Pace`, `w`.`Type`, `w`.`UserId`, `c`.`Id`, `c`.`CityName`, `c`.`Country`, `c`.`Date`, `c`.`Emoji`, `c`.`Lat`, `c`.`Lng`, `c`.`Notes`, `c`.`UserId`
FROM (
    SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`FirstName`, `a`.`LastName`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`
    FROM `AspNetUsers` AS `a`
    WHERE `a`.`Id` = @__user_Id_0
    LIMIT 2
) AS `t`
LEFT JOIN `Workouts` AS `w` ON `t`.`Id` = `w`.`UserId`
LEFT JOIN `Cities` AS `c` ON `t`.`Id` = `c`.`UserId`
ORDER BY `t`.`Id`, `w`.`Id`
2025-11-16 17:44:35.614 +03:00 [INF] Executing ObjectResult, writing value of type 'MappyApplication.Models.user.AuthResponse'.
2025-11-16 17:44:35.614 +03:00 [INF] Executed action MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication) in 8.085ms
2025-11-16 17:44:35.614 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication)'
2025-11-16 17:44:35.614 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:8080/api/v1/auth/refresh-token - 200 null application/json; charset=utf-8 23.2289ms
2025-11-16 17:44:37.697 +03:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:8080/api/v1/auth/logout - null null
2025-11-16 17:44:37.697 +03:00 [INF] CORS policy execution successful.
2025-11-16 17:44:37.698 +03:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:8080/api/v1/auth/logout - 204 null null 0.8308ms
2025-11-16 17:44:37.699 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:8080/api/v1/auth/logout - null null
2025-11-16 17:44:37.700 +03:00 [INF] CORS policy execution successful.
2025-11-16 17:44:37.729 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 17:44:37.730 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.AuthController.Logout (MappyApplication)'
2025-11-16 17:44:37.730 +03:00 [INF] Route matched with {action = "Logout", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Logout() on controller MappyApplication.Controllers.AuthController (MappyApplication).
2025-11-16 17:44:37.733 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__refreshToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`RefreshToken` = @__refreshToken_0
LIMIT 2
2025-11-16 17:44:37.737 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']

        UPDATE TOKENS
        SET Revoked = true, Expired = true
        WHERE UserId = @p0
          AND DeviceId = @p1
          AND Revoked = false
          AND Expired = false
2025-11-16 17:44:37.739 +03:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType0`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-11-16 17:44:37.739 +03:00 [INF] Executed action MappyApplication.Controllers.AuthController.Logout (MappyApplication) in 8.8707ms
2025-11-16 17:44:37.739 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.AuthController.Logout (MappyApplication)'
2025-11-16 17:44:37.739 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:8080/api/v1/auth/logout - 200 null application/json; charset=utf-8 39.9012ms
2025-11-16 17:44:48.260 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:8080/api/v1/auth/logout - null null
2025-11-16 17:44:48.262 +03:00 [INF] CORS policy execution successful.
2025-11-16 17:44:48.265 +03:00 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2025-11-16 17:44:48.271 +03:00 [INF] AuthenticationScheme: Bearer was challenged.
2025-11-16 17:44:48.272 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:8080/api/v1/auth/logout - 401 null application/json; charset=utf-8 11.6538ms
2025-11-16 17:46:48.739 +03:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:8080/api/v1/auth/login - null null
2025-11-16 17:46:48.744 +03:00 [INF] CORS policy execution successful.
2025-11-16 17:46:48.746 +03:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:8080/api/v1/auth/login - 204 null null 6.9613ms
2025-11-16 17:46:48.749 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:8080/api/v1/auth/login - application/json 51
2025-11-16 17:46:48.750 +03:00 [INF] CORS policy execution successful.
2025-11-16 17:46:48.754 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.AuthController.Login (MappyApplication)'
2025-11-16 17:46:48.756 +03:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.user.AuthResponse] Login(MappyApplication.Models.user.AuthLogin) on controller MappyApplication.Controllers.AuthController (MappyApplication).
2025-11-16 17:46:48.830 +03:00 [INF] Executed DbCommand (6ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`FirstName`, `a`.`LastName`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`
FROM `AspNetUsers` AS `a`
WHERE `a`.`NormalizedEmail` = @__normalizedEmail_0
LIMIT 2
2025-11-16 17:46:48.871 +03:00 [INF] Executed DbCommand (4ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']

        UPDATE TOKENS
        SET Revoked = true, Expired = true
        WHERE UserId = @p0
          AND DeviceId = @p1
          AND Revoked = false
          AND Expired = false
2025-11-16 17:46:48.873 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a0`.`Name`
FROM `AspNetUserRoles` AS `a`
INNER JOIN `AspNetRoles` AS `a0` ON `a`.`RoleId` = `a0`.`Id`
WHERE `a`.`UserId` = @__userId_0
2025-11-16 17:46:48.874 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ClaimType`, `a`.`ClaimValue`, `a`.`UserId`
FROM `AspNetUserClaims` AS `a`
WHERE `a`.`UserId` = @__user_Id_0
2025-11-16 17:46:48.874 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a0`.`Name`
FROM `AspNetUserRoles` AS `a`
INNER JOIN `AspNetRoles` AS `a0` ON `a`.`RoleId` = `a0`.`Id`
WHERE `a`.`UserId` = @__userId_0
2025-11-16 17:46:48.874 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ClaimType`, `a`.`ClaimValue`, `a`.`UserId`
FROM `AspNetUserClaims` AS `a`
WHERE `a`.`UserId` = @__user_Id_0
2025-11-16 17:46:48.877 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (DbType = DateTime), @p2='?' (Size = 4000), @p3='?' (DbType = Boolean), @p4='?' (Size = 4000), @p5='?' (DbType = Boolean), @p6='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO `Tokens` (`AccessToken`, `CreatedAt`, `DeviceId`, `Expired`, `RefreshToken`, `Revoked`, `UserId`)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6);
SELECT `Id`
FROM `Tokens`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();
2025-11-16 17:46:48.879 +03:00 [INF] Added Token MappyApplication.Data.Token
2025-11-16 17:46:48.881 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessFailedCount`, `t`.`ConcurrencyStamp`, `t`.`Email`, `t`.`EmailConfirmed`, `t`.`FirstName`, `t`.`LastName`, `t`.`LockoutEnabled`, `t`.`LockoutEnd`, `t`.`NormalizedEmail`, `t`.`NormalizedUserName`, `t`.`PasswordHash`, `t`.`PhoneNumber`, `t`.`PhoneNumberConfirmed`, `t`.`SecurityStamp`, `t`.`TwoFactorEnabled`, `t`.`UserName`, `w`.`Id`, `w`.`Cadence`, `w`.`CityName`, `w`.`Coords`, `w`.`Date`, `w`.`Distance`, `w`.`Duration`, `w`.`Emoji`, `w`.`Pace`, `w`.`Type`, `w`.`UserId`, `c`.`Id`, `c`.`CityName`, `c`.`Country`, `c`.`Date`, `c`.`Emoji`, `c`.`Lat`, `c`.`Lng`, `c`.`Notes`, `c`.`UserId`
FROM (
    SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`FirstName`, `a`.`LastName`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`
    FROM `AspNetUsers` AS `a`
    WHERE `a`.`Id` = @__user_Id_0
    LIMIT 2
) AS `t`
LEFT JOIN `Workouts` AS `w` ON `t`.`Id` = `w`.`UserId`
LEFT JOIN `Cities` AS `c` ON `t`.`Id` = `c`.`UserId`
ORDER BY `t`.`Id`, `w`.`Id`
2025-11-16 17:46:48.881 +03:00 [INF] Executing ObjectResult, writing value of type 'MappyApplication.Models.user.AuthResponse'.
2025-11-16 17:46:48.881 +03:00 [INF] Executed action MappyApplication.Controllers.AuthController.Login (MappyApplication) in 124.6627ms
2025-11-16 17:46:48.881 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.AuthController.Login (MappyApplication)'
2025-11-16 17:46:48.881 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:8080/api/v1/auth/login - 200 null application/json; charset=utf-8 132.6744ms
2025-11-16 17:46:53.606 +03:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:8080/api/v1/auth/refresh-token - null null
2025-11-16 17:46:53.616 +03:00 [INF] CORS policy execution successful.
2025-11-16 17:46:53.616 +03:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:8080/api/v1/auth/refresh-token - 204 null null 13.9547ms
2025-11-16 17:46:53.617 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:8080/api/v1/auth/refresh-token - null 0
2025-11-16 17:46:53.617 +03:00 [INF] CORS policy execution successful.
2025-11-16 17:46:53.686 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 17:46:53.687 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication)'
2025-11-16 17:46:53.687 +03:00 [INF] Route matched with {action = "RefreshToken", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.user.AuthResponse] RefreshToken() on controller MappyApplication.Controllers.AuthController (MappyApplication).
2025-11-16 17:46:53.688 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__refreshToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`RefreshToken` = @__refreshToken_0
LIMIT 2
2025-11-16 17:46:53.689 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`FirstName`, `a`.`LastName`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`
FROM `AspNetUsers` AS `a`
WHERE `a`.`Id` = @__p_0
LIMIT 1
2025-11-16 17:46:53.694 +03:00 [INF] Executed DbCommand (5ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']

        UPDATE TOKENS
        SET Revoked = true, Expired = true
        WHERE UserId = @p0
          AND DeviceId = @p1
          AND Revoked = false
          AND Expired = false
2025-11-16 17:46:53.696 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a0`.`Name`
FROM `AspNetUserRoles` AS `a`
INNER JOIN `AspNetRoles` AS `a0` ON `a`.`RoleId` = `a0`.`Id`
WHERE `a`.`UserId` = @__userId_0
2025-11-16 17:46:53.697 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ClaimType`, `a`.`ClaimValue`, `a`.`UserId`
FROM `AspNetUserClaims` AS `a`
WHERE `a`.`UserId` = @__user_Id_0
2025-11-16 17:46:53.697 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a0`.`Name`
FROM `AspNetUserRoles` AS `a`
INNER JOIN `AspNetRoles` AS `a0` ON `a`.`RoleId` = `a0`.`Id`
WHERE `a`.`UserId` = @__userId_0
2025-11-16 17:46:53.697 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ClaimType`, `a`.`ClaimValue`, `a`.`UserId`
FROM `AspNetUserClaims` AS `a`
WHERE `a`.`UserId` = @__user_Id_0
2025-11-16 17:46:53.700 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (DbType = DateTime), @p2='?' (Size = 4000), @p3='?' (DbType = Boolean), @p4='?' (Size = 4000), @p5='?' (DbType = Boolean), @p6='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO `Tokens` (`AccessToken`, `CreatedAt`, `DeviceId`, `Expired`, `RefreshToken`, `Revoked`, `UserId`)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6);
SELECT `Id`
FROM `Tokens`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();
2025-11-16 17:46:53.701 +03:00 [INF] Added Token MappyApplication.Data.Token
2025-11-16 17:46:53.703 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessFailedCount`, `t`.`ConcurrencyStamp`, `t`.`Email`, `t`.`EmailConfirmed`, `t`.`FirstName`, `t`.`LastName`, `t`.`LockoutEnabled`, `t`.`LockoutEnd`, `t`.`NormalizedEmail`, `t`.`NormalizedUserName`, `t`.`PasswordHash`, `t`.`PhoneNumber`, `t`.`PhoneNumberConfirmed`, `t`.`SecurityStamp`, `t`.`TwoFactorEnabled`, `t`.`UserName`, `w`.`Id`, `w`.`Cadence`, `w`.`CityName`, `w`.`Coords`, `w`.`Date`, `w`.`Distance`, `w`.`Duration`, `w`.`Emoji`, `w`.`Pace`, `w`.`Type`, `w`.`UserId`, `c`.`Id`, `c`.`CityName`, `c`.`Country`, `c`.`Date`, `c`.`Emoji`, `c`.`Lat`, `c`.`Lng`, `c`.`Notes`, `c`.`UserId`
FROM (
    SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`FirstName`, `a`.`LastName`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`
    FROM `AspNetUsers` AS `a`
    WHERE `a`.`Id` = @__user_Id_0
    LIMIT 2
) AS `t`
LEFT JOIN `Workouts` AS `w` ON `t`.`Id` = `w`.`UserId`
LEFT JOIN `Cities` AS `c` ON `t`.`Id` = `c`.`UserId`
ORDER BY `t`.`Id`, `w`.`Id`
2025-11-16 17:46:53.704 +03:00 [INF] Executing ObjectResult, writing value of type 'MappyApplication.Models.user.AuthResponse'.
2025-11-16 17:46:53.704 +03:00 [INF] Executed action MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication) in 17.154ms
2025-11-16 17:46:53.704 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication)'
2025-11-16 17:46:53.704 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:8080/api/v1/auth/refresh-token - 200 null application/json; charset=utf-8 86.809ms
2025-11-16 17:46:55.432 +03:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:8080/api/v1/auth/logout - null null
2025-11-16 17:46:55.433 +03:00 [INF] CORS policy execution successful.
2025-11-16 17:46:55.433 +03:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:8080/api/v1/auth/logout - 204 null null 0.997ms
2025-11-16 17:46:55.435 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:8080/api/v1/auth/logout - null null
2025-11-16 17:46:55.435 +03:00 [INF] CORS policy execution successful.
2025-11-16 17:46:55.466 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 17:46:55.466 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.AuthController.Logout (MappyApplication)'
2025-11-16 17:46:55.466 +03:00 [INF] Route matched with {action = "Logout", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Logout() on controller MappyApplication.Controllers.AuthController (MappyApplication).
2025-11-16 17:46:55.468 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__refreshToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`RefreshToken` = @__refreshToken_0
LIMIT 2
2025-11-16 17:46:55.472 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']

        UPDATE TOKENS
        SET Revoked = true, Expired = true
        WHERE UserId = @p0
          AND DeviceId = @p1
          AND Revoked = false
          AND Expired = false
2025-11-16 17:46:55.472 +03:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType0`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-11-16 17:46:55.472 +03:00 [INF] Executed action MappyApplication.Controllers.AuthController.Logout (MappyApplication) in 5.6885ms
2025-11-16 17:46:55.472 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.AuthController.Logout (MappyApplication)'
2025-11-16 17:46:55.473 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:8080/api/v1/auth/logout - 200 null application/json; charset=utf-8 38.1916ms
2025-11-16 17:47:00.940 +03:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:8080/api/v1/auth/login - null null
2025-11-16 17:47:00.940 +03:00 [INF] CORS policy execution successful.
2025-11-16 17:47:00.941 +03:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:8080/api/v1/auth/login - 204 null null 0.7712ms
2025-11-16 17:47:00.943 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:8080/api/v1/auth/login - application/json 51
2025-11-16 17:47:00.943 +03:00 [INF] CORS policy execution successful.
2025-11-16 17:47:00.943 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.AuthController.Login (MappyApplication)'
2025-11-16 17:47:00.944 +03:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.user.AuthResponse] Login(MappyApplication.Models.user.AuthLogin) on controller MappyApplication.Controllers.AuthController (MappyApplication).
2025-11-16 17:47:00.968 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`FirstName`, `a`.`LastName`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`
FROM `AspNetUsers` AS `a`
WHERE `a`.`NormalizedEmail` = @__normalizedEmail_0
LIMIT 2
2025-11-16 17:47:01.021 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']

        UPDATE TOKENS
        SET Revoked = true, Expired = true
        WHERE UserId = @p0
          AND DeviceId = @p1
          AND Revoked = false
          AND Expired = false
2025-11-16 17:47:01.022 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a0`.`Name`
FROM `AspNetUserRoles` AS `a`
INNER JOIN `AspNetRoles` AS `a0` ON `a`.`RoleId` = `a0`.`Id`
WHERE `a`.`UserId` = @__userId_0
2025-11-16 17:47:01.022 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ClaimType`, `a`.`ClaimValue`, `a`.`UserId`
FROM `AspNetUserClaims` AS `a`
WHERE `a`.`UserId` = @__user_Id_0
2025-11-16 17:47:01.023 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a0`.`Name`
FROM `AspNetUserRoles` AS `a`
INNER JOIN `AspNetRoles` AS `a0` ON `a`.`RoleId` = `a0`.`Id`
WHERE `a`.`UserId` = @__userId_0
2025-11-16 17:47:01.023 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ClaimType`, `a`.`ClaimValue`, `a`.`UserId`
FROM `AspNetUserClaims` AS `a`
WHERE `a`.`UserId` = @__user_Id_0
2025-11-16 17:47:01.024 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (DbType = DateTime), @p2='?' (Size = 4000), @p3='?' (DbType = Boolean), @p4='?' (Size = 4000), @p5='?' (DbType = Boolean), @p6='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO `Tokens` (`AccessToken`, `CreatedAt`, `DeviceId`, `Expired`, `RefreshToken`, `Revoked`, `UserId`)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6);
SELECT `Id`
FROM `Tokens`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();
2025-11-16 17:47:01.026 +03:00 [INF] Added Token MappyApplication.Data.Token
2025-11-16 17:47:01.028 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessFailedCount`, `t`.`ConcurrencyStamp`, `t`.`Email`, `t`.`EmailConfirmed`, `t`.`FirstName`, `t`.`LastName`, `t`.`LockoutEnabled`, `t`.`LockoutEnd`, `t`.`NormalizedEmail`, `t`.`NormalizedUserName`, `t`.`PasswordHash`, `t`.`PhoneNumber`, `t`.`PhoneNumberConfirmed`, `t`.`SecurityStamp`, `t`.`TwoFactorEnabled`, `t`.`UserName`, `w`.`Id`, `w`.`Cadence`, `w`.`CityName`, `w`.`Coords`, `w`.`Date`, `w`.`Distance`, `w`.`Duration`, `w`.`Emoji`, `w`.`Pace`, `w`.`Type`, `w`.`UserId`, `c`.`Id`, `c`.`CityName`, `c`.`Country`, `c`.`Date`, `c`.`Emoji`, `c`.`Lat`, `c`.`Lng`, `c`.`Notes`, `c`.`UserId`
FROM (
    SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`FirstName`, `a`.`LastName`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`
    FROM `AspNetUsers` AS `a`
    WHERE `a`.`Id` = @__user_Id_0
    LIMIT 2
) AS `t`
LEFT JOIN `Workouts` AS `w` ON `t`.`Id` = `w`.`UserId`
LEFT JOIN `Cities` AS `c` ON `t`.`Id` = `c`.`UserId`
ORDER BY `t`.`Id`, `w`.`Id`
2025-11-16 17:47:01.028 +03:00 [INF] Executing ObjectResult, writing value of type 'MappyApplication.Models.user.AuthResponse'.
2025-11-16 17:47:01.028 +03:00 [INF] Executed action MappyApplication.Controllers.AuthController.Login (MappyApplication) in 84.3965ms
2025-11-16 17:47:01.028 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.AuthController.Login (MappyApplication)'
2025-11-16 17:47:01.028 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:8080/api/v1/auth/login - 200 null application/json; charset=utf-8 85.3015ms
2025-11-16 17:48:03.179 +03:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:8080/api/v1/auth/refresh-token - null null
2025-11-16 17:48:03.182 +03:00 [INF] CORS policy execution successful.
2025-11-16 17:48:03.183 +03:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:8080/api/v1/auth/refresh-token - 204 null null 4.5442ms
2025-11-16 17:48:03.188 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:8080/api/v1/auth/refresh-token - null 0
2025-11-16 17:48:03.189 +03:00 [INF] CORS policy execution successful.
2025-11-16 17:48:03.223 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 17:48:03.223 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication)'
2025-11-16 17:48:03.223 +03:00 [INF] Route matched with {action = "RefreshToken", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.user.AuthResponse] RefreshToken() on controller MappyApplication.Controllers.AuthController (MappyApplication).
2025-11-16 17:48:03.224 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__refreshToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`RefreshToken` = @__refreshToken_0
LIMIT 2
2025-11-16 17:48:03.226 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`FirstName`, `a`.`LastName`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`
FROM `AspNetUsers` AS `a`
WHERE `a`.`Id` = @__p_0
LIMIT 1
2025-11-16 17:48:03.229 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']

        UPDATE TOKENS
        SET Revoked = true, Expired = true
        WHERE UserId = @p0
          AND DeviceId = @p1
          AND Revoked = false
          AND Expired = false
2025-11-16 17:48:03.230 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a0`.`Name`
FROM `AspNetUserRoles` AS `a`
INNER JOIN `AspNetRoles` AS `a0` ON `a`.`RoleId` = `a0`.`Id`
WHERE `a`.`UserId` = @__userId_0
2025-11-16 17:48:03.232 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ClaimType`, `a`.`ClaimValue`, `a`.`UserId`
FROM `AspNetUserClaims` AS `a`
WHERE `a`.`UserId` = @__user_Id_0
2025-11-16 17:48:03.233 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a0`.`Name`
FROM `AspNetUserRoles` AS `a`
INNER JOIN `AspNetRoles` AS `a0` ON `a`.`RoleId` = `a0`.`Id`
WHERE `a`.`UserId` = @__userId_0
2025-11-16 17:48:03.233 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ClaimType`, `a`.`ClaimValue`, `a`.`UserId`
FROM `AspNetUserClaims` AS `a`
WHERE `a`.`UserId` = @__user_Id_0
2025-11-16 17:48:03.235 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (DbType = DateTime), @p2='?' (Size = 4000), @p3='?' (DbType = Boolean), @p4='?' (Size = 4000), @p5='?' (DbType = Boolean), @p6='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO `Tokens` (`AccessToken`, `CreatedAt`, `DeviceId`, `Expired`, `RefreshToken`, `Revoked`, `UserId`)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6);
SELECT `Id`
FROM `Tokens`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();
2025-11-16 17:48:03.235 +03:00 [INF] Added Token MappyApplication.Data.Token
2025-11-16 17:48:03.238 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessFailedCount`, `t`.`ConcurrencyStamp`, `t`.`Email`, `t`.`EmailConfirmed`, `t`.`FirstName`, `t`.`LastName`, `t`.`LockoutEnabled`, `t`.`LockoutEnd`, `t`.`NormalizedEmail`, `t`.`NormalizedUserName`, `t`.`PasswordHash`, `t`.`PhoneNumber`, `t`.`PhoneNumberConfirmed`, `t`.`SecurityStamp`, `t`.`TwoFactorEnabled`, `t`.`UserName`, `w`.`Id`, `w`.`Cadence`, `w`.`CityName`, `w`.`Coords`, `w`.`Date`, `w`.`Distance`, `w`.`Duration`, `w`.`Emoji`, `w`.`Pace`, `w`.`Type`, `w`.`UserId`, `c`.`Id`, `c`.`CityName`, `c`.`Country`, `c`.`Date`, `c`.`Emoji`, `c`.`Lat`, `c`.`Lng`, `c`.`Notes`, `c`.`UserId`
FROM (
    SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`FirstName`, `a`.`LastName`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`
    FROM `AspNetUsers` AS `a`
    WHERE `a`.`Id` = @__user_Id_0
    LIMIT 2
) AS `t`
LEFT JOIN `Workouts` AS `w` ON `t`.`Id` = `w`.`UserId`
LEFT JOIN `Cities` AS `c` ON `t`.`Id` = `c`.`UserId`
ORDER BY `t`.`Id`, `w`.`Id`
2025-11-16 17:48:03.238 +03:00 [INF] Executing ObjectResult, writing value of type 'MappyApplication.Models.user.AuthResponse'.
2025-11-16 17:48:03.238 +03:00 [INF] Executed action MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication) in 14.8255ms
2025-11-16 17:48:03.238 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication)'
2025-11-16 17:48:03.238 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:8080/api/v1/auth/refresh-token - 200 null application/json; charset=utf-8 50.2331ms
2025-11-16 17:50:05.471 +03:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:8080/api/v1/auth/refresh-token - null null
2025-11-16 17:50:05.474 +03:00 [INF] CORS policy execution successful.
2025-11-16 17:50:05.475 +03:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:8080/api/v1/auth/refresh-token - 204 null null 4.2196ms
2025-11-16 17:50:05.477 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:8080/api/v1/auth/refresh-token - null 0
2025-11-16 17:50:05.477 +03:00 [INF] CORS policy execution successful.
2025-11-16 17:50:05.543 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 17:50:05.544 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication)'
2025-11-16 17:50:05.544 +03:00 [INF] Route matched with {action = "RefreshToken", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.user.AuthResponse] RefreshToken() on controller MappyApplication.Controllers.AuthController (MappyApplication).
2025-11-16 17:50:05.545 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__refreshToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`RefreshToken` = @__refreshToken_0
LIMIT 2
2025-11-16 17:50:05.550 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`FirstName`, `a`.`LastName`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`
FROM `AspNetUsers` AS `a`
WHERE `a`.`Id` = @__p_0
LIMIT 1
2025-11-16 17:50:05.570 +03:00 [INF] Executed DbCommand (19ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']

        UPDATE TOKENS
        SET Revoked = true, Expired = true
        WHERE UserId = @p0
          AND DeviceId = @p1
          AND Revoked = false
          AND Expired = false
2025-11-16 17:50:05.595 +03:00 [INF] Executed DbCommand (15ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a0`.`Name`
FROM `AspNetUserRoles` AS `a`
INNER JOIN `AspNetRoles` AS `a0` ON `a`.`RoleId` = `a0`.`Id`
WHERE `a`.`UserId` = @__userId_0
2025-11-16 17:50:05.607 +03:00 [INF] Executed DbCommand (4ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ClaimType`, `a`.`ClaimValue`, `a`.`UserId`
FROM `AspNetUserClaims` AS `a`
WHERE `a`.`UserId` = @__user_Id_0
2025-11-16 17:50:05.615 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a0`.`Name`
FROM `AspNetUserRoles` AS `a`
INNER JOIN `AspNetRoles` AS `a0` ON `a`.`RoleId` = `a0`.`Id`
WHERE `a`.`UserId` = @__userId_0
2025-11-16 17:50:05.624 +03:00 [INF] Executed DbCommand (4ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ClaimType`, `a`.`ClaimValue`, `a`.`UserId`
FROM `AspNetUserClaims` AS `a`
WHERE `a`.`UserId` = @__user_Id_0
2025-11-16 17:50:05.636 +03:00 [INF] Executed DbCommand (9ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (DbType = DateTime), @p2='?' (Size = 4000), @p3='?' (DbType = Boolean), @p4='?' (Size = 4000), @p5='?' (DbType = Boolean), @p6='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO `Tokens` (`AccessToken`, `CreatedAt`, `DeviceId`, `Expired`, `RefreshToken`, `Revoked`, `UserId`)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6);
SELECT `Id`
FROM `Tokens`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();
2025-11-16 17:50:05.637 +03:00 [INF] Added Token MappyApplication.Data.Token
2025-11-16 17:50:05.657 +03:00 [INF] Executed DbCommand (18ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessFailedCount`, `t`.`ConcurrencyStamp`, `t`.`Email`, `t`.`EmailConfirmed`, `t`.`FirstName`, `t`.`LastName`, `t`.`LockoutEnabled`, `t`.`LockoutEnd`, `t`.`NormalizedEmail`, `t`.`NormalizedUserName`, `t`.`PasswordHash`, `t`.`PhoneNumber`, `t`.`PhoneNumberConfirmed`, `t`.`SecurityStamp`, `t`.`TwoFactorEnabled`, `t`.`UserName`, `w`.`Id`, `w`.`Cadence`, `w`.`CityName`, `w`.`Coords`, `w`.`Date`, `w`.`Distance`, `w`.`Duration`, `w`.`Emoji`, `w`.`Pace`, `w`.`Type`, `w`.`UserId`, `c`.`Id`, `c`.`CityName`, `c`.`Country`, `c`.`Date`, `c`.`Emoji`, `c`.`Lat`, `c`.`Lng`, `c`.`Notes`, `c`.`UserId`
FROM (
    SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`FirstName`, `a`.`LastName`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`
    FROM `AspNetUsers` AS `a`
    WHERE `a`.`Id` = @__user_Id_0
    LIMIT 2
) AS `t`
LEFT JOIN `Workouts` AS `w` ON `t`.`Id` = `w`.`UserId`
LEFT JOIN `Cities` AS `c` ON `t`.`Id` = `c`.`UserId`
ORDER BY `t`.`Id`, `w`.`Id`
2025-11-16 17:50:05.657 +03:00 [INF] Executing ObjectResult, writing value of type 'MappyApplication.Models.user.AuthResponse'.
2025-11-16 17:50:05.658 +03:00 [INF] Executed action MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication) in 114.0857ms
2025-11-16 17:50:05.658 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication)'
2025-11-16 17:50:05.658 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:8080/api/v1/auth/refresh-token - 200 null application/json; charset=utf-8 181.348ms
2025-11-16 17:50:07.711 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:8080/api/v1/auth/refresh-token - null 0
2025-11-16 17:50:07.719 +03:00 [INF] CORS policy execution successful.
2025-11-16 17:50:07.772 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 17:50:07.773 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication)'
2025-11-16 17:50:07.773 +03:00 [INF] Route matched with {action = "RefreshToken", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.user.AuthResponse] RefreshToken() on controller MappyApplication.Controllers.AuthController (MappyApplication).
2025-11-16 17:50:07.774 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__refreshToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`RefreshToken` = @__refreshToken_0
LIMIT 2
2025-11-16 17:50:07.781 +03:00 [INF] Executed DbCommand (4ms) [Parameters=[@__p_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`FirstName`, `a`.`LastName`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`
FROM `AspNetUsers` AS `a`
WHERE `a`.`Id` = @__p_0
LIMIT 1
2025-11-16 17:50:07.789 +03:00 [INF] Executed DbCommand (8ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']

        UPDATE TOKENS
        SET Revoked = true, Expired = true
        WHERE UserId = @p0
          AND DeviceId = @p1
          AND Revoked = false
          AND Expired = false
2025-11-16 17:50:07.796 +03:00 [INF] Executed DbCommand (6ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a0`.`Name`
FROM `AspNetUserRoles` AS `a`
INNER JOIN `AspNetRoles` AS `a0` ON `a`.`RoleId` = `a0`.`Id`
WHERE `a`.`UserId` = @__userId_0
2025-11-16 17:50:07.799 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ClaimType`, `a`.`ClaimValue`, `a`.`UserId`
FROM `AspNetUserClaims` AS `a`
WHERE `a`.`UserId` = @__user_Id_0
2025-11-16 17:50:07.807 +03:00 [INF] Executed DbCommand (5ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a0`.`Name`
FROM `AspNetUserRoles` AS `a`
INNER JOIN `AspNetRoles` AS `a0` ON `a`.`RoleId` = `a0`.`Id`
WHERE `a`.`UserId` = @__userId_0
2025-11-16 17:50:07.808 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ClaimType`, `a`.`ClaimValue`, `a`.`UserId`
FROM `AspNetUserClaims` AS `a`
WHERE `a`.`UserId` = @__user_Id_0
2025-11-16 17:50:07.817 +03:00 [INF] Executed DbCommand (8ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (DbType = DateTime), @p2='?' (Size = 4000), @p3='?' (DbType = Boolean), @p4='?' (Size = 4000), @p5='?' (DbType = Boolean), @p6='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO `Tokens` (`AccessToken`, `CreatedAt`, `DeviceId`, `Expired`, `RefreshToken`, `Revoked`, `UserId`)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6);
SELECT `Id`
FROM `Tokens`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();
2025-11-16 17:50:07.817 +03:00 [INF] Added Token MappyApplication.Data.Token
2025-11-16 17:50:07.837 +03:00 [INF] Executed DbCommand (20ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessFailedCount`, `t`.`ConcurrencyStamp`, `t`.`Email`, `t`.`EmailConfirmed`, `t`.`FirstName`, `t`.`LastName`, `t`.`LockoutEnabled`, `t`.`LockoutEnd`, `t`.`NormalizedEmail`, `t`.`NormalizedUserName`, `t`.`PasswordHash`, `t`.`PhoneNumber`, `t`.`PhoneNumberConfirmed`, `t`.`SecurityStamp`, `t`.`TwoFactorEnabled`, `t`.`UserName`, `w`.`Id`, `w`.`Cadence`, `w`.`CityName`, `w`.`Coords`, `w`.`Date`, `w`.`Distance`, `w`.`Duration`, `w`.`Emoji`, `w`.`Pace`, `w`.`Type`, `w`.`UserId`, `c`.`Id`, `c`.`CityName`, `c`.`Country`, `c`.`Date`, `c`.`Emoji`, `c`.`Lat`, `c`.`Lng`, `c`.`Notes`, `c`.`UserId`
FROM (
    SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`FirstName`, `a`.`LastName`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`
    FROM `AspNetUsers` AS `a`
    WHERE `a`.`Id` = @__user_Id_0
    LIMIT 2
) AS `t`
LEFT JOIN `Workouts` AS `w` ON `t`.`Id` = `w`.`UserId`
LEFT JOIN `Cities` AS `c` ON `t`.`Id` = `c`.`UserId`
ORDER BY `t`.`Id`, `w`.`Id`
2025-11-16 17:50:07.837 +03:00 [INF] Executing ObjectResult, writing value of type 'MappyApplication.Models.user.AuthResponse'.
2025-11-16 17:50:07.838 +03:00 [INF] Executed action MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication) in 64.604ms
2025-11-16 17:50:07.838 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication)'
2025-11-16 17:50:07.838 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:8080/api/v1/auth/refresh-token - 200 null application/json; charset=utf-8 126.7194ms
2025-11-16 17:50:08.884 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:8080/api/v1/auth/refresh-token - null 0
2025-11-16 17:50:08.884 +03:00 [INF] CORS policy execution successful.
2025-11-16 17:50:08.903 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 17:50:08.903 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication)'
2025-11-16 17:50:08.903 +03:00 [INF] Route matched with {action = "RefreshToken", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.user.AuthResponse] RefreshToken() on controller MappyApplication.Controllers.AuthController (MappyApplication).
2025-11-16 17:50:08.906 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__refreshToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`RefreshToken` = @__refreshToken_0
LIMIT 2
2025-11-16 17:50:08.907 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`FirstName`, `a`.`LastName`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`
FROM `AspNetUsers` AS `a`
WHERE `a`.`Id` = @__p_0
LIMIT 1
2025-11-16 17:50:08.914 +03:00 [INF] Executed DbCommand (6ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']

        UPDATE TOKENS
        SET Revoked = true, Expired = true
        WHERE UserId = @p0
          AND DeviceId = @p1
          AND Revoked = false
          AND Expired = false
2025-11-16 17:50:08.915 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a0`.`Name`
FROM `AspNetUserRoles` AS `a`
INNER JOIN `AspNetRoles` AS `a0` ON `a`.`RoleId` = `a0`.`Id`
WHERE `a`.`UserId` = @__userId_0
2025-11-16 17:50:08.915 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ClaimType`, `a`.`ClaimValue`, `a`.`UserId`
FROM `AspNetUserClaims` AS `a`
WHERE `a`.`UserId` = @__user_Id_0
2025-11-16 17:50:08.916 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a0`.`Name`
FROM `AspNetUserRoles` AS `a`
INNER JOIN `AspNetRoles` AS `a0` ON `a`.`RoleId` = `a0`.`Id`
WHERE `a`.`UserId` = @__userId_0
2025-11-16 17:50:08.916 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ClaimType`, `a`.`ClaimValue`, `a`.`UserId`
FROM `AspNetUserClaims` AS `a`
WHERE `a`.`UserId` = @__user_Id_0
2025-11-16 17:50:08.921 +03:00 [INF] Executed DbCommand (4ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (DbType = DateTime), @p2='?' (Size = 4000), @p3='?' (DbType = Boolean), @p4='?' (Size = 4000), @p5='?' (DbType = Boolean), @p6='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO `Tokens` (`AccessToken`, `CreatedAt`, `DeviceId`, `Expired`, `RefreshToken`, `Revoked`, `UserId`)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6);
SELECT `Id`
FROM `Tokens`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();
2025-11-16 17:50:08.921 +03:00 [INF] Added Token MappyApplication.Data.Token
2025-11-16 17:50:08.924 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessFailedCount`, `t`.`ConcurrencyStamp`, `t`.`Email`, `t`.`EmailConfirmed`, `t`.`FirstName`, `t`.`LastName`, `t`.`LockoutEnabled`, `t`.`LockoutEnd`, `t`.`NormalizedEmail`, `t`.`NormalizedUserName`, `t`.`PasswordHash`, `t`.`PhoneNumber`, `t`.`PhoneNumberConfirmed`, `t`.`SecurityStamp`, `t`.`TwoFactorEnabled`, `t`.`UserName`, `w`.`Id`, `w`.`Cadence`, `w`.`CityName`, `w`.`Coords`, `w`.`Date`, `w`.`Distance`, `w`.`Duration`, `w`.`Emoji`, `w`.`Pace`, `w`.`Type`, `w`.`UserId`, `c`.`Id`, `c`.`CityName`, `c`.`Country`, `c`.`Date`, `c`.`Emoji`, `c`.`Lat`, `c`.`Lng`, `c`.`Notes`, `c`.`UserId`
FROM (
    SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`FirstName`, `a`.`LastName`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`
    FROM `AspNetUsers` AS `a`
    WHERE `a`.`Id` = @__user_Id_0
    LIMIT 2
) AS `t`
LEFT JOIN `Workouts` AS `w` ON `t`.`Id` = `w`.`UserId`
LEFT JOIN `Cities` AS `c` ON `t`.`Id` = `c`.`UserId`
ORDER BY `t`.`Id`, `w`.`Id`
2025-11-16 17:50:08.924 +03:00 [INF] Executing ObjectResult, writing value of type 'MappyApplication.Models.user.AuthResponse'.
2025-11-16 17:50:08.925 +03:00 [INF] Executed action MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication) in 21.0005ms
2025-11-16 17:50:08.925 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication)'
2025-11-16 17:50:08.925 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:8080/api/v1/auth/refresh-token - 200 null application/json; charset=utf-8 40.9208ms
2025-11-16 17:51:09.118 +03:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:8080/api/v1/auth/refresh-token - null null
2025-11-16 17:51:09.128 +03:00 [INF] CORS policy execution successful.
2025-11-16 17:51:09.128 +03:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:8080/api/v1/auth/refresh-token - 204 null null 10.383ms
2025-11-16 17:51:09.129 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:8080/api/v1/auth/refresh-token - null 0
2025-11-16 17:51:09.129 +03:00 [INF] CORS policy execution successful.
2025-11-16 17:51:09.155 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 17:51:09.156 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication)'
2025-11-16 17:51:09.156 +03:00 [INF] Route matched with {action = "RefreshToken", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.user.AuthResponse] RefreshToken() on controller MappyApplication.Controllers.AuthController (MappyApplication).
2025-11-16 17:51:09.157 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__refreshToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`RefreshToken` = @__refreshToken_0
LIMIT 2
2025-11-16 17:51:09.159 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`FirstName`, `a`.`LastName`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`
FROM `AspNetUsers` AS `a`
WHERE `a`.`Id` = @__p_0
LIMIT 1
2025-11-16 17:51:09.162 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']

        UPDATE TOKENS
        SET Revoked = true, Expired = true
        WHERE UserId = @p0
          AND DeviceId = @p1
          AND Revoked = false
          AND Expired = false
2025-11-16 17:51:09.162 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a0`.`Name`
FROM `AspNetUserRoles` AS `a`
INNER JOIN `AspNetRoles` AS `a0` ON `a`.`RoleId` = `a0`.`Id`
WHERE `a`.`UserId` = @__userId_0
2025-11-16 17:51:09.163 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ClaimType`, `a`.`ClaimValue`, `a`.`UserId`
FROM `AspNetUserClaims` AS `a`
WHERE `a`.`UserId` = @__user_Id_0
2025-11-16 17:51:09.163 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a0`.`Name`
FROM `AspNetUserRoles` AS `a`
INNER JOIN `AspNetRoles` AS `a0` ON `a`.`RoleId` = `a0`.`Id`
WHERE `a`.`UserId` = @__userId_0
2025-11-16 17:51:09.164 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ClaimType`, `a`.`ClaimValue`, `a`.`UserId`
FROM `AspNetUserClaims` AS `a`
WHERE `a`.`UserId` = @__user_Id_0
2025-11-16 17:51:09.166 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (DbType = DateTime), @p2='?' (Size = 4000), @p3='?' (DbType = Boolean), @p4='?' (Size = 4000), @p5='?' (DbType = Boolean), @p6='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO `Tokens` (`AccessToken`, `CreatedAt`, `DeviceId`, `Expired`, `RefreshToken`, `Revoked`, `UserId`)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6);
SELECT `Id`
FROM `Tokens`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();
2025-11-16 17:51:09.166 +03:00 [INF] Added Token MappyApplication.Data.Token
2025-11-16 17:51:09.167 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessFailedCount`, `t`.`ConcurrencyStamp`, `t`.`Email`, `t`.`EmailConfirmed`, `t`.`FirstName`, `t`.`LastName`, `t`.`LockoutEnabled`, `t`.`LockoutEnd`, `t`.`NormalizedEmail`, `t`.`NormalizedUserName`, `t`.`PasswordHash`, `t`.`PhoneNumber`, `t`.`PhoneNumberConfirmed`, `t`.`SecurityStamp`, `t`.`TwoFactorEnabled`, `t`.`UserName`, `w`.`Id`, `w`.`Cadence`, `w`.`CityName`, `w`.`Coords`, `w`.`Date`, `w`.`Distance`, `w`.`Duration`, `w`.`Emoji`, `w`.`Pace`, `w`.`Type`, `w`.`UserId`, `c`.`Id`, `c`.`CityName`, `c`.`Country`, `c`.`Date`, `c`.`Emoji`, `c`.`Lat`, `c`.`Lng`, `c`.`Notes`, `c`.`UserId`
FROM (
    SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`FirstName`, `a`.`LastName`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`
    FROM `AspNetUsers` AS `a`
    WHERE `a`.`Id` = @__user_Id_0
    LIMIT 2
) AS `t`
LEFT JOIN `Workouts` AS `w` ON `t`.`Id` = `w`.`UserId`
LEFT JOIN `Cities` AS `c` ON `t`.`Id` = `c`.`UserId`
ORDER BY `t`.`Id`, `w`.`Id`
2025-11-16 17:51:09.168 +03:00 [INF] Executing ObjectResult, writing value of type 'MappyApplication.Models.user.AuthResponse'.
2025-11-16 17:51:09.168 +03:00 [INF] Executed action MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication) in 11.6047ms
2025-11-16 17:51:09.168 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication)'
2025-11-16 17:51:09.168 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:8080/api/v1/auth/refresh-token - 200 null application/json; charset=utf-8 38.6145ms
2025-11-16 17:51:10.158 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:8080/api/v1/auth/refresh-token - null 0
2025-11-16 17:51:10.158 +03:00 [INF] CORS policy execution successful.
2025-11-16 17:51:10.171 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 17:51:10.172 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication)'
2025-11-16 17:51:10.172 +03:00 [INF] Route matched with {action = "RefreshToken", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.user.AuthResponse] RefreshToken() on controller MappyApplication.Controllers.AuthController (MappyApplication).
2025-11-16 17:51:10.174 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__refreshToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`RefreshToken` = @__refreshToken_0
LIMIT 2
2025-11-16 17:51:10.176 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`FirstName`, `a`.`LastName`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`
FROM `AspNetUsers` AS `a`
WHERE `a`.`Id` = @__p_0
LIMIT 1
2025-11-16 17:51:10.179 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']

        UPDATE TOKENS
        SET Revoked = true, Expired = true
        WHERE UserId = @p0
          AND DeviceId = @p1
          AND Revoked = false
          AND Expired = false
2025-11-16 17:51:10.180 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a0`.`Name`
FROM `AspNetUserRoles` AS `a`
INNER JOIN `AspNetRoles` AS `a0` ON `a`.`RoleId` = `a0`.`Id`
WHERE `a`.`UserId` = @__userId_0
2025-11-16 17:51:10.181 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ClaimType`, `a`.`ClaimValue`, `a`.`UserId`
FROM `AspNetUserClaims` AS `a`
WHERE `a`.`UserId` = @__user_Id_0
2025-11-16 17:51:10.181 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a0`.`Name`
FROM `AspNetUserRoles` AS `a`
INNER JOIN `AspNetRoles` AS `a0` ON `a`.`RoleId` = `a0`.`Id`
WHERE `a`.`UserId` = @__userId_0
2025-11-16 17:51:10.182 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ClaimType`, `a`.`ClaimValue`, `a`.`UserId`
FROM `AspNetUserClaims` AS `a`
WHERE `a`.`UserId` = @__user_Id_0
2025-11-16 17:51:10.183 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (DbType = DateTime), @p2='?' (Size = 4000), @p3='?' (DbType = Boolean), @p4='?' (Size = 4000), @p5='?' (DbType = Boolean), @p6='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO `Tokens` (`AccessToken`, `CreatedAt`, `DeviceId`, `Expired`, `RefreshToken`, `Revoked`, `UserId`)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6);
SELECT `Id`
FROM `Tokens`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();
2025-11-16 17:51:10.183 +03:00 [INF] Added Token MappyApplication.Data.Token
2025-11-16 17:51:10.186 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessFailedCount`, `t`.`ConcurrencyStamp`, `t`.`Email`, `t`.`EmailConfirmed`, `t`.`FirstName`, `t`.`LastName`, `t`.`LockoutEnabled`, `t`.`LockoutEnd`, `t`.`NormalizedEmail`, `t`.`NormalizedUserName`, `t`.`PasswordHash`, `t`.`PhoneNumber`, `t`.`PhoneNumberConfirmed`, `t`.`SecurityStamp`, `t`.`TwoFactorEnabled`, `t`.`UserName`, `w`.`Id`, `w`.`Cadence`, `w`.`CityName`, `w`.`Coords`, `w`.`Date`, `w`.`Distance`, `w`.`Duration`, `w`.`Emoji`, `w`.`Pace`, `w`.`Type`, `w`.`UserId`, `c`.`Id`, `c`.`CityName`, `c`.`Country`, `c`.`Date`, `c`.`Emoji`, `c`.`Lat`, `c`.`Lng`, `c`.`Notes`, `c`.`UserId`
FROM (
    SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`FirstName`, `a`.`LastName`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`
    FROM `AspNetUsers` AS `a`
    WHERE `a`.`Id` = @__user_Id_0
    LIMIT 2
) AS `t`
LEFT JOIN `Workouts` AS `w` ON `t`.`Id` = `w`.`UserId`
LEFT JOIN `Cities` AS `c` ON `t`.`Id` = `c`.`UserId`
ORDER BY `t`.`Id`, `w`.`Id`
2025-11-16 17:51:10.186 +03:00 [INF] Executing ObjectResult, writing value of type 'MappyApplication.Models.user.AuthResponse'.
2025-11-16 17:51:10.186 +03:00 [INF] Executed action MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication) in 13.7821ms
2025-11-16 17:51:10.186 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication)'
2025-11-16 17:51:10.186 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:8080/api/v1/auth/refresh-token - 200 null application/json; charset=utf-8 28.17ms
2025-11-16 17:51:10.871 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:8080/api/v1/auth/refresh-token - null 0
2025-11-16 17:51:10.871 +03:00 [INF] CORS policy execution successful.
2025-11-16 17:51:10.885 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 17:51:10.886 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication)'
2025-11-16 17:51:10.886 +03:00 [INF] Route matched with {action = "RefreshToken", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.user.AuthResponse] RefreshToken() on controller MappyApplication.Controllers.AuthController (MappyApplication).
2025-11-16 17:51:10.887 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__refreshToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`RefreshToken` = @__refreshToken_0
LIMIT 2
2025-11-16 17:51:10.887 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`FirstName`, `a`.`LastName`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`
FROM `AspNetUsers` AS `a`
WHERE `a`.`Id` = @__p_0
LIMIT 1
2025-11-16 17:51:10.891 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']

        UPDATE TOKENS
        SET Revoked = true, Expired = true
        WHERE UserId = @p0
          AND DeviceId = @p1
          AND Revoked = false
          AND Expired = false
2025-11-16 17:51:10.892 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a0`.`Name`
FROM `AspNetUserRoles` AS `a`
INNER JOIN `AspNetRoles` AS `a0` ON `a`.`RoleId` = `a0`.`Id`
WHERE `a`.`UserId` = @__userId_0
2025-11-16 17:51:10.893 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ClaimType`, `a`.`ClaimValue`, `a`.`UserId`
FROM `AspNetUserClaims` AS `a`
WHERE `a`.`UserId` = @__user_Id_0
2025-11-16 17:51:10.893 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a0`.`Name`
FROM `AspNetUserRoles` AS `a`
INNER JOIN `AspNetRoles` AS `a0` ON `a`.`RoleId` = `a0`.`Id`
WHERE `a`.`UserId` = @__userId_0
2025-11-16 17:51:10.894 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ClaimType`, `a`.`ClaimValue`, `a`.`UserId`
FROM `AspNetUserClaims` AS `a`
WHERE `a`.`UserId` = @__user_Id_0
2025-11-16 17:51:10.896 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (DbType = DateTime), @p2='?' (Size = 4000), @p3='?' (DbType = Boolean), @p4='?' (Size = 4000), @p5='?' (DbType = Boolean), @p6='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO `Tokens` (`AccessToken`, `CreatedAt`, `DeviceId`, `Expired`, `RefreshToken`, `Revoked`, `UserId`)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6);
SELECT `Id`
FROM `Tokens`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();
2025-11-16 17:51:10.896 +03:00 [INF] Added Token MappyApplication.Data.Token
2025-11-16 17:51:10.898 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessFailedCount`, `t`.`ConcurrencyStamp`, `t`.`Email`, `t`.`EmailConfirmed`, `t`.`FirstName`, `t`.`LastName`, `t`.`LockoutEnabled`, `t`.`LockoutEnd`, `t`.`NormalizedEmail`, `t`.`NormalizedUserName`, `t`.`PasswordHash`, `t`.`PhoneNumber`, `t`.`PhoneNumberConfirmed`, `t`.`SecurityStamp`, `t`.`TwoFactorEnabled`, `t`.`UserName`, `w`.`Id`, `w`.`Cadence`, `w`.`CityName`, `w`.`Coords`, `w`.`Date`, `w`.`Distance`, `w`.`Duration`, `w`.`Emoji`, `w`.`Pace`, `w`.`Type`, `w`.`UserId`, `c`.`Id`, `c`.`CityName`, `c`.`Country`, `c`.`Date`, `c`.`Emoji`, `c`.`Lat`, `c`.`Lng`, `c`.`Notes`, `c`.`UserId`
FROM (
    SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`FirstName`, `a`.`LastName`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`
    FROM `AspNetUsers` AS `a`
    WHERE `a`.`Id` = @__user_Id_0
    LIMIT 2
) AS `t`
LEFT JOIN `Workouts` AS `w` ON `t`.`Id` = `w`.`UserId`
LEFT JOIN `Cities` AS `c` ON `t`.`Id` = `c`.`UserId`
ORDER BY `t`.`Id`, `w`.`Id`
2025-11-16 17:51:10.898 +03:00 [INF] Executing ObjectResult, writing value of type 'MappyApplication.Models.user.AuthResponse'.
2025-11-16 17:51:10.898 +03:00 [INF] Executed action MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication) in 12.8566ms
2025-11-16 17:51:10.899 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication)'
2025-11-16 17:51:10.899 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:8080/api/v1/auth/refresh-token - 200 null application/json; charset=utf-8 27.6207ms
2025-11-16 17:51:11.515 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:8080/api/v1/auth/refresh-token - null 0
2025-11-16 17:51:11.515 +03:00 [INF] CORS policy execution successful.
2025-11-16 17:51:11.535 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 17:51:11.535 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication)'
2025-11-16 17:51:11.535 +03:00 [INF] Route matched with {action = "RefreshToken", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.user.AuthResponse] RefreshToken() on controller MappyApplication.Controllers.AuthController (MappyApplication).
2025-11-16 17:51:11.536 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__refreshToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`RefreshToken` = @__refreshToken_0
LIMIT 2
2025-11-16 17:51:11.537 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`FirstName`, `a`.`LastName`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`
FROM `AspNetUsers` AS `a`
WHERE `a`.`Id` = @__p_0
LIMIT 1
2025-11-16 17:51:11.540 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']

        UPDATE TOKENS
        SET Revoked = true, Expired = true
        WHERE UserId = @p0
          AND DeviceId = @p1
          AND Revoked = false
          AND Expired = false
2025-11-16 17:51:11.541 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a0`.`Name`
FROM `AspNetUserRoles` AS `a`
INNER JOIN `AspNetRoles` AS `a0` ON `a`.`RoleId` = `a0`.`Id`
WHERE `a`.`UserId` = @__userId_0
2025-11-16 17:51:11.542 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ClaimType`, `a`.`ClaimValue`, `a`.`UserId`
FROM `AspNetUserClaims` AS `a`
WHERE `a`.`UserId` = @__user_Id_0
2025-11-16 17:51:11.542 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a0`.`Name`
FROM `AspNetUserRoles` AS `a`
INNER JOIN `AspNetRoles` AS `a0` ON `a`.`RoleId` = `a0`.`Id`
WHERE `a`.`UserId` = @__userId_0
2025-11-16 17:51:11.542 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ClaimType`, `a`.`ClaimValue`, `a`.`UserId`
FROM `AspNetUserClaims` AS `a`
WHERE `a`.`UserId` = @__user_Id_0
2025-11-16 17:51:11.548 +03:00 [INF] Executed DbCommand (5ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (DbType = DateTime), @p2='?' (Size = 4000), @p3='?' (DbType = Boolean), @p4='?' (Size = 4000), @p5='?' (DbType = Boolean), @p6='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO `Tokens` (`AccessToken`, `CreatedAt`, `DeviceId`, `Expired`, `RefreshToken`, `Revoked`, `UserId`)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6);
SELECT `Id`
FROM `Tokens`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();
2025-11-16 17:51:11.548 +03:00 [INF] Added Token MappyApplication.Data.Token
2025-11-16 17:51:11.550 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessFailedCount`, `t`.`ConcurrencyStamp`, `t`.`Email`, `t`.`EmailConfirmed`, `t`.`FirstName`, `t`.`LastName`, `t`.`LockoutEnabled`, `t`.`LockoutEnd`, `t`.`NormalizedEmail`, `t`.`NormalizedUserName`, `t`.`PasswordHash`, `t`.`PhoneNumber`, `t`.`PhoneNumberConfirmed`, `t`.`SecurityStamp`, `t`.`TwoFactorEnabled`, `t`.`UserName`, `w`.`Id`, `w`.`Cadence`, `w`.`CityName`, `w`.`Coords`, `w`.`Date`, `w`.`Distance`, `w`.`Duration`, `w`.`Emoji`, `w`.`Pace`, `w`.`Type`, `w`.`UserId`, `c`.`Id`, `c`.`CityName`, `c`.`Country`, `c`.`Date`, `c`.`Emoji`, `c`.`Lat`, `c`.`Lng`, `c`.`Notes`, `c`.`UserId`
FROM (
    SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`FirstName`, `a`.`LastName`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`
    FROM `AspNetUsers` AS `a`
    WHERE `a`.`Id` = @__user_Id_0
    LIMIT 2
) AS `t`
LEFT JOIN `Workouts` AS `w` ON `t`.`Id` = `w`.`UserId`
LEFT JOIN `Cities` AS `c` ON `t`.`Id` = `c`.`UserId`
ORDER BY `t`.`Id`, `w`.`Id`
2025-11-16 17:51:11.550 +03:00 [INF] Executing ObjectResult, writing value of type 'MappyApplication.Models.user.AuthResponse'.
2025-11-16 17:51:11.550 +03:00 [INF] Executed action MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication) in 15.3769ms
2025-11-16 17:51:11.550 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication)'
2025-11-16 17:51:11.550 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:8080/api/v1/auth/refresh-token - 200 null application/json; charset=utf-8 35.7013ms
2025-11-16 17:51:21.072 +03:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:8080/api/v1/auth/refresh-token - null null
2025-11-16 17:51:21.075 +03:00 [INF] CORS policy execution successful.
2025-11-16 17:51:21.076 +03:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:8080/api/v1/auth/refresh-token - 204 null null 3.9849ms
2025-11-16 17:51:21.076 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:8080/api/v1/auth/refresh-token - null 0
2025-11-16 17:51:21.077 +03:00 [INF] CORS policy execution successful.
2025-11-16 17:51:21.102 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 17:51:21.102 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication)'
2025-11-16 17:51:21.102 +03:00 [INF] Route matched with {action = "RefreshToken", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.user.AuthResponse] RefreshToken() on controller MappyApplication.Controllers.AuthController (MappyApplication).
2025-11-16 17:51:21.103 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__refreshToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`RefreshToken` = @__refreshToken_0
LIMIT 2
2025-11-16 17:51:21.104 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`FirstName`, `a`.`LastName`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`
FROM `AspNetUsers` AS `a`
WHERE `a`.`Id` = @__p_0
LIMIT 1
2025-11-16 17:51:21.107 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']

        UPDATE TOKENS
        SET Revoked = true, Expired = true
        WHERE UserId = @p0
          AND DeviceId = @p1
          AND Revoked = false
          AND Expired = false
2025-11-16 17:51:21.108 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a0`.`Name`
FROM `AspNetUserRoles` AS `a`
INNER JOIN `AspNetRoles` AS `a0` ON `a`.`RoleId` = `a0`.`Id`
WHERE `a`.`UserId` = @__userId_0
2025-11-16 17:51:21.108 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ClaimType`, `a`.`ClaimValue`, `a`.`UserId`
FROM `AspNetUserClaims` AS `a`
WHERE `a`.`UserId` = @__user_Id_0
2025-11-16 17:51:21.109 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a0`.`Name`
FROM `AspNetUserRoles` AS `a`
INNER JOIN `AspNetRoles` AS `a0` ON `a`.`RoleId` = `a0`.`Id`
WHERE `a`.`UserId` = @__userId_0
2025-11-16 17:51:21.109 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ClaimType`, `a`.`ClaimValue`, `a`.`UserId`
FROM `AspNetUserClaims` AS `a`
WHERE `a`.`UserId` = @__user_Id_0
2025-11-16 17:51:21.111 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (DbType = DateTime), @p2='?' (Size = 4000), @p3='?' (DbType = Boolean), @p4='?' (Size = 4000), @p5='?' (DbType = Boolean), @p6='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO `Tokens` (`AccessToken`, `CreatedAt`, `DeviceId`, `Expired`, `RefreshToken`, `Revoked`, `UserId`)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6);
SELECT `Id`
FROM `Tokens`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();
2025-11-16 17:51:21.361 +03:00 [INF] Added Token MappyApplication.Data.Token
2025-11-16 17:51:21.366 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessFailedCount`, `t`.`ConcurrencyStamp`, `t`.`Email`, `t`.`EmailConfirmed`, `t`.`FirstName`, `t`.`LastName`, `t`.`LockoutEnabled`, `t`.`LockoutEnd`, `t`.`NormalizedEmail`, `t`.`NormalizedUserName`, `t`.`PasswordHash`, `t`.`PhoneNumber`, `t`.`PhoneNumberConfirmed`, `t`.`SecurityStamp`, `t`.`TwoFactorEnabled`, `t`.`UserName`, `w`.`Id`, `w`.`Cadence`, `w`.`CityName`, `w`.`Coords`, `w`.`Date`, `w`.`Distance`, `w`.`Duration`, `w`.`Emoji`, `w`.`Pace`, `w`.`Type`, `w`.`UserId`, `c`.`Id`, `c`.`CityName`, `c`.`Country`, `c`.`Date`, `c`.`Emoji`, `c`.`Lat`, `c`.`Lng`, `c`.`Notes`, `c`.`UserId`
FROM (
    SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`FirstName`, `a`.`LastName`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`
    FROM `AspNetUsers` AS `a`
    WHERE `a`.`Id` = @__user_Id_0
    LIMIT 2
) AS `t`
LEFT JOIN `Workouts` AS `w` ON `t`.`Id` = `w`.`UserId`
LEFT JOIN `Cities` AS `c` ON `t`.`Id` = `c`.`UserId`
ORDER BY `t`.`Id`, `w`.`Id`
2025-11-16 17:51:21.368 +03:00 [INF] Executing ObjectResult, writing value of type 'MappyApplication.Models.user.AuthResponse'.
2025-11-16 17:51:21.368 +03:00 [INF] Executed action MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication) in 265.652ms
2025-11-16 17:51:21.368 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication)'
2025-11-16 17:51:21.368 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:8080/api/v1/auth/refresh-token - 200 null application/json; charset=utf-8 291.446ms
2025-11-16 17:51:21.831 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:8080/api/v1/auth/refresh-token - null 0
2025-11-16 17:51:21.832 +03:00 [INF] CORS policy execution successful.
2025-11-16 17:51:21.854 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 17:51:21.854 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication)'
2025-11-16 17:51:21.854 +03:00 [INF] Route matched with {action = "RefreshToken", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.user.AuthResponse] RefreshToken() on controller MappyApplication.Controllers.AuthController (MappyApplication).
2025-11-16 17:51:21.855 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__refreshToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`RefreshToken` = @__refreshToken_0
LIMIT 2
2025-11-16 17:51:21.857 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`FirstName`, `a`.`LastName`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`
FROM `AspNetUsers` AS `a`
WHERE `a`.`Id` = @__p_0
LIMIT 1
2025-11-16 17:51:21.859 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']

        UPDATE TOKENS
        SET Revoked = true, Expired = true
        WHERE UserId = @p0
          AND DeviceId = @p1
          AND Revoked = false
          AND Expired = false
2025-11-16 17:51:21.860 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a0`.`Name`
FROM `AspNetUserRoles` AS `a`
INNER JOIN `AspNetRoles` AS `a0` ON `a`.`RoleId` = `a0`.`Id`
WHERE `a`.`UserId` = @__userId_0
2025-11-16 17:51:21.861 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ClaimType`, `a`.`ClaimValue`, `a`.`UserId`
FROM `AspNetUserClaims` AS `a`
WHERE `a`.`UserId` = @__user_Id_0
2025-11-16 17:51:21.863 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a0`.`Name`
FROM `AspNetUserRoles` AS `a`
INNER JOIN `AspNetRoles` AS `a0` ON `a`.`RoleId` = `a0`.`Id`
WHERE `a`.`UserId` = @__userId_0
2025-11-16 17:51:21.868 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ClaimType`, `a`.`ClaimValue`, `a`.`UserId`
FROM `AspNetUserClaims` AS `a`
WHERE `a`.`UserId` = @__user_Id_0
2025-11-16 17:51:21.873 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (DbType = DateTime), @p2='?' (Size = 4000), @p3='?' (DbType = Boolean), @p4='?' (Size = 4000), @p5='?' (DbType = Boolean), @p6='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO `Tokens` (`AccessToken`, `CreatedAt`, `DeviceId`, `Expired`, `RefreshToken`, `Revoked`, `UserId`)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6);
SELECT `Id`
FROM `Tokens`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();
2025-11-16 17:51:21.874 +03:00 [INF] Added Token MappyApplication.Data.Token
2025-11-16 17:51:21.875 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessFailedCount`, `t`.`ConcurrencyStamp`, `t`.`Email`, `t`.`EmailConfirmed`, `t`.`FirstName`, `t`.`LastName`, `t`.`LockoutEnabled`, `t`.`LockoutEnd`, `t`.`NormalizedEmail`, `t`.`NormalizedUserName`, `t`.`PasswordHash`, `t`.`PhoneNumber`, `t`.`PhoneNumberConfirmed`, `t`.`SecurityStamp`, `t`.`TwoFactorEnabled`, `t`.`UserName`, `w`.`Id`, `w`.`Cadence`, `w`.`CityName`, `w`.`Coords`, `w`.`Date`, `w`.`Distance`, `w`.`Duration`, `w`.`Emoji`, `w`.`Pace`, `w`.`Type`, `w`.`UserId`, `c`.`Id`, `c`.`CityName`, `c`.`Country`, `c`.`Date`, `c`.`Emoji`, `c`.`Lat`, `c`.`Lng`, `c`.`Notes`, `c`.`UserId`
FROM (
    SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`FirstName`, `a`.`LastName`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`
    FROM `AspNetUsers` AS `a`
    WHERE `a`.`Id` = @__user_Id_0
    LIMIT 2
) AS `t`
LEFT JOIN `Workouts` AS `w` ON `t`.`Id` = `w`.`UserId`
LEFT JOIN `Cities` AS `c` ON `t`.`Id` = `c`.`UserId`
ORDER BY `t`.`Id`, `w`.`Id`
2025-11-16 17:51:21.875 +03:00 [INF] Executing ObjectResult, writing value of type 'MappyApplication.Models.user.AuthResponse'.
2025-11-16 17:51:21.875 +03:00 [INF] Executed action MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication) in 20.9674ms
2025-11-16 17:51:21.875 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication)'
2025-11-16 17:51:21.875 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:8080/api/v1/auth/refresh-token - 200 null application/json; charset=utf-8 44.0679ms
2025-11-16 17:51:22.525 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:8080/api/v1/auth/refresh-token - null 0
2025-11-16 17:51:22.525 +03:00 [INF] CORS policy execution successful.
2025-11-16 17:51:22.554 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 17:51:22.554 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication)'
2025-11-16 17:51:22.554 +03:00 [INF] Route matched with {action = "RefreshToken", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.user.AuthResponse] RefreshToken() on controller MappyApplication.Controllers.AuthController (MappyApplication).
2025-11-16 17:51:22.556 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__refreshToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`RefreshToken` = @__refreshToken_0
LIMIT 2
2025-11-16 17:51:22.557 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`FirstName`, `a`.`LastName`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`
FROM `AspNetUsers` AS `a`
WHERE `a`.`Id` = @__p_0
LIMIT 1
2025-11-16 17:51:22.562 +03:00 [INF] Executed DbCommand (4ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']

        UPDATE TOKENS
        SET Revoked = true, Expired = true
        WHERE UserId = @p0
          AND DeviceId = @p1
          AND Revoked = false
          AND Expired = false
2025-11-16 17:51:22.563 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a0`.`Name`
FROM `AspNetUserRoles` AS `a`
INNER JOIN `AspNetRoles` AS `a0` ON `a`.`RoleId` = `a0`.`Id`
WHERE `a`.`UserId` = @__userId_0
2025-11-16 17:51:22.563 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ClaimType`, `a`.`ClaimValue`, `a`.`UserId`
FROM `AspNetUserClaims` AS `a`
WHERE `a`.`UserId` = @__user_Id_0
2025-11-16 17:51:22.564 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a0`.`Name`
FROM `AspNetUserRoles` AS `a`
INNER JOIN `AspNetRoles` AS `a0` ON `a`.`RoleId` = `a0`.`Id`
WHERE `a`.`UserId` = @__userId_0
2025-11-16 17:51:22.564 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ClaimType`, `a`.`ClaimValue`, `a`.`UserId`
FROM `AspNetUserClaims` AS `a`
WHERE `a`.`UserId` = @__user_Id_0
2025-11-16 17:51:22.566 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (DbType = DateTime), @p2='?' (Size = 4000), @p3='?' (DbType = Boolean), @p4='?' (Size = 4000), @p5='?' (DbType = Boolean), @p6='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO `Tokens` (`AccessToken`, `CreatedAt`, `DeviceId`, `Expired`, `RefreshToken`, `Revoked`, `UserId`)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6);
SELECT `Id`
FROM `Tokens`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();
2025-11-16 17:51:22.566 +03:00 [INF] Added Token MappyApplication.Data.Token
2025-11-16 17:51:22.567 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessFailedCount`, `t`.`ConcurrencyStamp`, `t`.`Email`, `t`.`EmailConfirmed`, `t`.`FirstName`, `t`.`LastName`, `t`.`LockoutEnabled`, `t`.`LockoutEnd`, `t`.`NormalizedEmail`, `t`.`NormalizedUserName`, `t`.`PasswordHash`, `t`.`PhoneNumber`, `t`.`PhoneNumberConfirmed`, `t`.`SecurityStamp`, `t`.`TwoFactorEnabled`, `t`.`UserName`, `w`.`Id`, `w`.`Cadence`, `w`.`CityName`, `w`.`Coords`, `w`.`Date`, `w`.`Distance`, `w`.`Duration`, `w`.`Emoji`, `w`.`Pace`, `w`.`Type`, `w`.`UserId`, `c`.`Id`, `c`.`CityName`, `c`.`Country`, `c`.`Date`, `c`.`Emoji`, `c`.`Lat`, `c`.`Lng`, `c`.`Notes`, `c`.`UserId`
FROM (
    SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`FirstName`, `a`.`LastName`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`
    FROM `AspNetUsers` AS `a`
    WHERE `a`.`Id` = @__user_Id_0
    LIMIT 2
) AS `t`
LEFT JOIN `Workouts` AS `w` ON `t`.`Id` = `w`.`UserId`
LEFT JOIN `Cities` AS `c` ON `t`.`Id` = `c`.`UserId`
ORDER BY `t`.`Id`, `w`.`Id`
2025-11-16 17:51:22.567 +03:00 [INF] Executing ObjectResult, writing value of type 'MappyApplication.Models.user.AuthResponse'.
2025-11-16 17:51:22.567 +03:00 [INF] Executed action MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication) in 13.6024ms
2025-11-16 17:51:22.568 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication)'
2025-11-16 17:51:22.568 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:8080/api/v1/auth/refresh-token - 200 null application/json; charset=utf-8 43.2765ms
2025-11-16 17:51:23.151 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:8080/api/v1/auth/refresh-token - null 0
2025-11-16 17:51:23.152 +03:00 [INF] CORS policy execution successful.
2025-11-16 17:51:23.186 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 17:51:23.186 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication)'
2025-11-16 17:51:23.187 +03:00 [INF] Route matched with {action = "RefreshToken", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.user.AuthResponse] RefreshToken() on controller MappyApplication.Controllers.AuthController (MappyApplication).
2025-11-16 17:51:23.188 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__refreshToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`RefreshToken` = @__refreshToken_0
LIMIT 2
2025-11-16 17:51:23.189 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`FirstName`, `a`.`LastName`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`
FROM `AspNetUsers` AS `a`
WHERE `a`.`Id` = @__p_0
LIMIT 1
2025-11-16 17:51:23.195 +03:00 [INF] Executed DbCommand (5ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']

        UPDATE TOKENS
        SET Revoked = true, Expired = true
        WHERE UserId = @p0
          AND DeviceId = @p1
          AND Revoked = false
          AND Expired = false
2025-11-16 17:51:23.197 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a0`.`Name`
FROM `AspNetUserRoles` AS `a`
INNER JOIN `AspNetRoles` AS `a0` ON `a`.`RoleId` = `a0`.`Id`
WHERE `a`.`UserId` = @__userId_0
2025-11-16 17:51:23.197 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ClaimType`, `a`.`ClaimValue`, `a`.`UserId`
FROM `AspNetUserClaims` AS `a`
WHERE `a`.`UserId` = @__user_Id_0
2025-11-16 17:51:23.198 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a0`.`Name`
FROM `AspNetUserRoles` AS `a`
INNER JOIN `AspNetRoles` AS `a0` ON `a`.`RoleId` = `a0`.`Id`
WHERE `a`.`UserId` = @__userId_0
2025-11-16 17:51:23.198 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ClaimType`, `a`.`ClaimValue`, `a`.`UserId`
FROM `AspNetUserClaims` AS `a`
WHERE `a`.`UserId` = @__user_Id_0
2025-11-16 17:51:23.200 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (DbType = DateTime), @p2='?' (Size = 4000), @p3='?' (DbType = Boolean), @p4='?' (Size = 4000), @p5='?' (DbType = Boolean), @p6='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO `Tokens` (`AccessToken`, `CreatedAt`, `DeviceId`, `Expired`, `RefreshToken`, `Revoked`, `UserId`)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6);
SELECT `Id`
FROM `Tokens`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();
2025-11-16 17:51:23.201 +03:00 [INF] Added Token MappyApplication.Data.Token
2025-11-16 17:51:23.204 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessFailedCount`, `t`.`ConcurrencyStamp`, `t`.`Email`, `t`.`EmailConfirmed`, `t`.`FirstName`, `t`.`LastName`, `t`.`LockoutEnabled`, `t`.`LockoutEnd`, `t`.`NormalizedEmail`, `t`.`NormalizedUserName`, `t`.`PasswordHash`, `t`.`PhoneNumber`, `t`.`PhoneNumberConfirmed`, `t`.`SecurityStamp`, `t`.`TwoFactorEnabled`, `t`.`UserName`, `w`.`Id`, `w`.`Cadence`, `w`.`CityName`, `w`.`Coords`, `w`.`Date`, `w`.`Distance`, `w`.`Duration`, `w`.`Emoji`, `w`.`Pace`, `w`.`Type`, `w`.`UserId`, `c`.`Id`, `c`.`CityName`, `c`.`Country`, `c`.`Date`, `c`.`Emoji`, `c`.`Lat`, `c`.`Lng`, `c`.`Notes`, `c`.`UserId`
FROM (
    SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`FirstName`, `a`.`LastName`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`
    FROM `AspNetUsers` AS `a`
    WHERE `a`.`Id` = @__user_Id_0
    LIMIT 2
) AS `t`
LEFT JOIN `Workouts` AS `w` ON `t`.`Id` = `w`.`UserId`
LEFT JOIN `Cities` AS `c` ON `t`.`Id` = `c`.`UserId`
ORDER BY `t`.`Id`, `w`.`Id`
2025-11-16 17:51:23.204 +03:00 [INF] Executing ObjectResult, writing value of type 'MappyApplication.Models.user.AuthResponse'.
2025-11-16 17:51:23.204 +03:00 [INF] Executed action MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication) in 17.9315ms
2025-11-16 17:51:23.205 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication)'
2025-11-16 17:51:23.205 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:8080/api/v1/auth/refresh-token - 200 null application/json; charset=utf-8 53.5481ms
2025-11-16 17:51:23.796 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:8080/api/v1/auth/refresh-token - null 0
2025-11-16 17:51:23.797 +03:00 [INF] CORS policy execution successful.
2025-11-16 17:51:23.811 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 17:51:23.811 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication)'
2025-11-16 17:51:23.812 +03:00 [INF] Route matched with {action = "RefreshToken", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.user.AuthResponse] RefreshToken() on controller MappyApplication.Controllers.AuthController (MappyApplication).
2025-11-16 17:51:23.813 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__refreshToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`RefreshToken` = @__refreshToken_0
LIMIT 2
2025-11-16 17:51:23.813 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`FirstName`, `a`.`LastName`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`
FROM `AspNetUsers` AS `a`
WHERE `a`.`Id` = @__p_0
LIMIT 1
2025-11-16 17:51:23.816 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']

        UPDATE TOKENS
        SET Revoked = true, Expired = true
        WHERE UserId = @p0
          AND DeviceId = @p1
          AND Revoked = false
          AND Expired = false
2025-11-16 17:51:23.817 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a0`.`Name`
FROM `AspNetUserRoles` AS `a`
INNER JOIN `AspNetRoles` AS `a0` ON `a`.`RoleId` = `a0`.`Id`
WHERE `a`.`UserId` = @__userId_0
2025-11-16 17:51:23.818 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ClaimType`, `a`.`ClaimValue`, `a`.`UserId`
FROM `AspNetUserClaims` AS `a`
WHERE `a`.`UserId` = @__user_Id_0
2025-11-16 17:51:23.818 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a0`.`Name`
FROM `AspNetUserRoles` AS `a`
INNER JOIN `AspNetRoles` AS `a0` ON `a`.`RoleId` = `a0`.`Id`
WHERE `a`.`UserId` = @__userId_0
2025-11-16 17:51:23.819 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ClaimType`, `a`.`ClaimValue`, `a`.`UserId`
FROM `AspNetUserClaims` AS `a`
WHERE `a`.`UserId` = @__user_Id_0
2025-11-16 17:51:23.820 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (DbType = DateTime), @p2='?' (Size = 4000), @p3='?' (DbType = Boolean), @p4='?' (Size = 4000), @p5='?' (DbType = Boolean), @p6='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO `Tokens` (`AccessToken`, `CreatedAt`, `DeviceId`, `Expired`, `RefreshToken`, `Revoked`, `UserId`)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6);
SELECT `Id`
FROM `Tokens`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();
2025-11-16 17:51:23.821 +03:00 [INF] Added Token MappyApplication.Data.Token
2025-11-16 17:51:23.822 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessFailedCount`, `t`.`ConcurrencyStamp`, `t`.`Email`, `t`.`EmailConfirmed`, `t`.`FirstName`, `t`.`LastName`, `t`.`LockoutEnabled`, `t`.`LockoutEnd`, `t`.`NormalizedEmail`, `t`.`NormalizedUserName`, `t`.`PasswordHash`, `t`.`PhoneNumber`, `t`.`PhoneNumberConfirmed`, `t`.`SecurityStamp`, `t`.`TwoFactorEnabled`, `t`.`UserName`, `w`.`Id`, `w`.`Cadence`, `w`.`CityName`, `w`.`Coords`, `w`.`Date`, `w`.`Distance`, `w`.`Duration`, `w`.`Emoji`, `w`.`Pace`, `w`.`Type`, `w`.`UserId`, `c`.`Id`, `c`.`CityName`, `c`.`Country`, `c`.`Date`, `c`.`Emoji`, `c`.`Lat`, `c`.`Lng`, `c`.`Notes`, `c`.`UserId`
FROM (
    SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`FirstName`, `a`.`LastName`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`
    FROM `AspNetUsers` AS `a`
    WHERE `a`.`Id` = @__user_Id_0
    LIMIT 2
) AS `t`
LEFT JOIN `Workouts` AS `w` ON `t`.`Id` = `w`.`UserId`
LEFT JOIN `Cities` AS `c` ON `t`.`Id` = `c`.`UserId`
ORDER BY `t`.`Id`, `w`.`Id`
2025-11-16 17:51:23.822 +03:00 [INF] Executing ObjectResult, writing value of type 'MappyApplication.Models.user.AuthResponse'.
2025-11-16 17:51:23.822 +03:00 [INF] Executed action MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication) in 10.6591ms
2025-11-16 17:51:23.822 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication)'
2025-11-16 17:51:23.823 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:8080/api/v1/auth/refresh-token - 200 null application/json; charset=utf-8 27.1647ms
2025-11-16 17:52:28.523 +03:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:8080/api/v1/auth/logout - null null
2025-11-16 17:52:28.525 +03:00 [INF] CORS policy execution successful.
2025-11-16 17:52:28.525 +03:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:8080/api/v1/auth/logout - 204 null null 2.6342ms
2025-11-16 17:52:28.527 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:8080/api/v1/auth/logout - null null
2025-11-16 17:52:28.528 +03:00 [INF] CORS policy execution successful.
2025-11-16 17:52:28.565 +03:00 [INF] Executed DbCommand (4ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 17:52:28.566 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.AuthController.Logout (MappyApplication)'
2025-11-16 17:52:28.566 +03:00 [INF] Route matched with {action = "Logout", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Logout() on controller MappyApplication.Controllers.AuthController (MappyApplication).
2025-11-16 17:52:28.569 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__refreshToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`RefreshToken` = @__refreshToken_0
LIMIT 2
2025-11-16 17:52:28.575 +03:00 [INF] Executed DbCommand (5ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']

        UPDATE TOKENS
        SET Revoked = true, Expired = true
        WHERE UserId = @p0
          AND DeviceId = @p1
          AND Revoked = false
          AND Expired = false
2025-11-16 17:52:28.577 +03:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType0`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-11-16 17:52:28.577 +03:00 [INF] Executed action MappyApplication.Controllers.AuthController.Logout (MappyApplication) in 11.1335ms
2025-11-16 17:52:28.577 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.AuthController.Logout (MappyApplication)'
2025-11-16 17:52:28.577 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:8080/api/v1/auth/logout - 200 null application/json; charset=utf-8 50.3632ms
2025-11-16 17:52:31.933 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:8080/api/v1/auth/logout - null null
2025-11-16 17:52:31.934 +03:00 [INF] CORS policy execution successful.
2025-11-16 17:52:31.939 +03:00 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2025-11-16 17:52:31.948 +03:00 [INF] AuthenticationScheme: Bearer was challenged.
2025-11-16 17:52:31.948 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:8080/api/v1/auth/logout - 401 null application/json; charset=utf-8 14.7165ms
2025-11-16 17:52:32.617 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:8080/api/v1/auth/logout - null null
2025-11-16 17:52:32.618 +03:00 [INF] CORS policy execution successful.
2025-11-16 17:52:32.619 +03:00 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2025-11-16 17:52:32.622 +03:00 [INF] AuthenticationScheme: Bearer was challenged.
2025-11-16 17:52:32.622 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:8080/api/v1/auth/logout - 401 null application/json; charset=utf-8 4.3601ms
2025-11-16 17:52:33.322 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:8080/api/v1/auth/logout - null null
2025-11-16 17:52:33.326 +03:00 [INF] CORS policy execution successful.
2025-11-16 17:52:33.329 +03:00 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2025-11-16 17:52:33.331 +03:00 [INF] AuthenticationScheme: Bearer was challenged.
2025-11-16 17:52:33.331 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:8080/api/v1/auth/logout - 401 null application/json; charset=utf-8 9.6955ms
2025-11-16 17:52:33.700 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:8080/api/v1/auth/logout - null null
2025-11-16 17:52:33.700 +03:00 [INF] CORS policy execution successful.
2025-11-16 17:52:33.701 +03:00 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2025-11-16 17:52:33.701 +03:00 [INF] AuthenticationScheme: Bearer was challenged.
2025-11-16 17:52:33.701 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:8080/api/v1/auth/logout - 401 null application/json; charset=utf-8 1.2272ms
2025-11-16 17:52:50.994 +03:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:8080/api/v1/auth/login - null null
2025-11-16 17:52:50.996 +03:00 [INF] CORS policy execution successful.
2025-11-16 17:52:50.996 +03:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:8080/api/v1/auth/login - 204 null null 2.8487ms
2025-11-16 17:52:50.998 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:8080/api/v1/auth/login - application/json 51
2025-11-16 17:52:50.998 +03:00 [INF] CORS policy execution successful.
2025-11-16 17:52:51.000 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.AuthController.Login (MappyApplication)'
2025-11-16 17:52:51.000 +03:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.user.AuthResponse] Login(MappyApplication.Models.user.AuthLogin) on controller MappyApplication.Controllers.AuthController (MappyApplication).
2025-11-16 17:52:51.049 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`FirstName`, `a`.`LastName`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`
FROM `AspNetUsers` AS `a`
WHERE `a`.`NormalizedEmail` = @__normalizedEmail_0
LIMIT 2
2025-11-16 17:52:51.102 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']

        UPDATE TOKENS
        SET Revoked = true, Expired = true
        WHERE UserId = @p0
          AND DeviceId = @p1
          AND Revoked = false
          AND Expired = false
2025-11-16 17:52:51.104 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a0`.`Name`
FROM `AspNetUserRoles` AS `a`
INNER JOIN `AspNetRoles` AS `a0` ON `a`.`RoleId` = `a0`.`Id`
WHERE `a`.`UserId` = @__userId_0
2025-11-16 17:52:51.105 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ClaimType`, `a`.`ClaimValue`, `a`.`UserId`
FROM `AspNetUserClaims` AS `a`
WHERE `a`.`UserId` = @__user_Id_0
2025-11-16 17:52:51.105 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a0`.`Name`
FROM `AspNetUserRoles` AS `a`
INNER JOIN `AspNetRoles` AS `a0` ON `a`.`RoleId` = `a0`.`Id`
WHERE `a`.`UserId` = @__userId_0
2025-11-16 17:52:51.106 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ClaimType`, `a`.`ClaimValue`, `a`.`UserId`
FROM `AspNetUserClaims` AS `a`
WHERE `a`.`UserId` = @__user_Id_0
2025-11-16 17:52:51.116 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (DbType = DateTime), @p2='?' (Size = 4000), @p3='?' (DbType = Boolean), @p4='?' (Size = 4000), @p5='?' (DbType = Boolean), @p6='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO `Tokens` (`AccessToken`, `CreatedAt`, `DeviceId`, `Expired`, `RefreshToken`, `Revoked`, `UserId`)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6);
SELECT `Id`
FROM `Tokens`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();
2025-11-16 17:52:51.117 +03:00 [INF] Added Token MappyApplication.Data.Token
2025-11-16 17:52:51.120 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessFailedCount`, `t`.`ConcurrencyStamp`, `t`.`Email`, `t`.`EmailConfirmed`, `t`.`FirstName`, `t`.`LastName`, `t`.`LockoutEnabled`, `t`.`LockoutEnd`, `t`.`NormalizedEmail`, `t`.`NormalizedUserName`, `t`.`PasswordHash`, `t`.`PhoneNumber`, `t`.`PhoneNumberConfirmed`, `t`.`SecurityStamp`, `t`.`TwoFactorEnabled`, `t`.`UserName`, `w`.`Id`, `w`.`Cadence`, `w`.`CityName`, `w`.`Coords`, `w`.`Date`, `w`.`Distance`, `w`.`Duration`, `w`.`Emoji`, `w`.`Pace`, `w`.`Type`, `w`.`UserId`, `c`.`Id`, `c`.`CityName`, `c`.`Country`, `c`.`Date`, `c`.`Emoji`, `c`.`Lat`, `c`.`Lng`, `c`.`Notes`, `c`.`UserId`
FROM (
    SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`FirstName`, `a`.`LastName`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`
    FROM `AspNetUsers` AS `a`
    WHERE `a`.`Id` = @__user_Id_0
    LIMIT 2
) AS `t`
LEFT JOIN `Workouts` AS `w` ON `t`.`Id` = `w`.`UserId`
LEFT JOIN `Cities` AS `c` ON `t`.`Id` = `c`.`UserId`
ORDER BY `t`.`Id`, `w`.`Id`
2025-11-16 17:52:51.120 +03:00 [INF] Executing ObjectResult, writing value of type 'MappyApplication.Models.user.AuthResponse'.
2025-11-16 17:52:51.121 +03:00 [INF] Executed action MappyApplication.Controllers.AuthController.Login (MappyApplication) in 120.527ms
2025-11-16 17:52:51.121 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.AuthController.Login (MappyApplication)'
2025-11-16 17:52:51.121 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:8080/api/v1/auth/login - 200 null application/json; charset=utf-8 123.0168ms
2025-11-16 17:52:54.836 +03:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:8080/api/v1/auth/logout - null null
2025-11-16 17:52:54.836 +03:00 [INF] CORS policy execution successful.
2025-11-16 17:52:54.836 +03:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:8080/api/v1/auth/logout - 204 null null 0.4924ms
2025-11-16 17:52:54.841 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:8080/api/v1/auth/logout - null null
2025-11-16 17:52:54.842 +03:00 [INF] CORS policy execution successful.
2025-11-16 17:52:54.871 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 17:52:54.871 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.AuthController.Logout (MappyApplication)'
2025-11-16 17:52:54.871 +03:00 [INF] Route matched with {action = "Logout", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Logout() on controller MappyApplication.Controllers.AuthController (MappyApplication).
2025-11-16 17:52:54.873 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__refreshToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`RefreshToken` = @__refreshToken_0
LIMIT 2
2025-11-16 17:52:54.877 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']

        UPDATE TOKENS
        SET Revoked = true, Expired = true
        WHERE UserId = @p0
          AND DeviceId = @p1
          AND Revoked = false
          AND Expired = false
2025-11-16 17:52:54.877 +03:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType0`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-11-16 17:52:54.877 +03:00 [INF] Executed action MappyApplication.Controllers.AuthController.Logout (MappyApplication) in 6.1436ms
2025-11-16 17:52:54.877 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.AuthController.Logout (MappyApplication)'
2025-11-16 17:52:54.877 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:8080/api/v1/auth/logout - 200 null application/json; charset=utf-8 36.2874ms
2025-11-16 17:53:06.922 +03:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:8080/api/v1/auth/login - null null
2025-11-16 17:53:06.923 +03:00 [INF] CORS policy execution successful.
2025-11-16 17:53:06.924 +03:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:8080/api/v1/auth/login - 204 null null 1.3365ms
2025-11-16 17:53:06.927 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:8080/api/v1/auth/login - application/json 51
2025-11-16 17:53:06.927 +03:00 [INF] CORS policy execution successful.
2025-11-16 17:53:06.927 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.AuthController.Login (MappyApplication)'
2025-11-16 17:53:06.927 +03:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.user.AuthResponse] Login(MappyApplication.Models.user.AuthLogin) on controller MappyApplication.Controllers.AuthController (MappyApplication).
2025-11-16 17:53:06.952 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`FirstName`, `a`.`LastName`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`
FROM `AspNetUsers` AS `a`
WHERE `a`.`NormalizedEmail` = @__normalizedEmail_0
LIMIT 2
2025-11-16 17:53:07.000 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']

        UPDATE TOKENS
        SET Revoked = true, Expired = true
        WHERE UserId = @p0
          AND DeviceId = @p1
          AND Revoked = false
          AND Expired = false
2025-11-16 17:53:07.001 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a0`.`Name`
FROM `AspNetUserRoles` AS `a`
INNER JOIN `AspNetRoles` AS `a0` ON `a`.`RoleId` = `a0`.`Id`
WHERE `a`.`UserId` = @__userId_0
2025-11-16 17:53:07.001 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ClaimType`, `a`.`ClaimValue`, `a`.`UserId`
FROM `AspNetUserClaims` AS `a`
WHERE `a`.`UserId` = @__user_Id_0
2025-11-16 17:53:07.002 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a0`.`Name`
FROM `AspNetUserRoles` AS `a`
INNER JOIN `AspNetRoles` AS `a0` ON `a`.`RoleId` = `a0`.`Id`
WHERE `a`.`UserId` = @__userId_0
2025-11-16 17:53:07.002 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ClaimType`, `a`.`ClaimValue`, `a`.`UserId`
FROM `AspNetUserClaims` AS `a`
WHERE `a`.`UserId` = @__user_Id_0
2025-11-16 17:53:07.005 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (DbType = DateTime), @p2='?' (Size = 4000), @p3='?' (DbType = Boolean), @p4='?' (Size = 4000), @p5='?' (DbType = Boolean), @p6='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO `Tokens` (`AccessToken`, `CreatedAt`, `DeviceId`, `Expired`, `RefreshToken`, `Revoked`, `UserId`)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6);
SELECT `Id`
FROM `Tokens`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();
2025-11-16 17:53:07.006 +03:00 [INF] Added Token MappyApplication.Data.Token
2025-11-16 17:53:07.008 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessFailedCount`, `t`.`ConcurrencyStamp`, `t`.`Email`, `t`.`EmailConfirmed`, `t`.`FirstName`, `t`.`LastName`, `t`.`LockoutEnabled`, `t`.`LockoutEnd`, `t`.`NormalizedEmail`, `t`.`NormalizedUserName`, `t`.`PasswordHash`, `t`.`PhoneNumber`, `t`.`PhoneNumberConfirmed`, `t`.`SecurityStamp`, `t`.`TwoFactorEnabled`, `t`.`UserName`, `w`.`Id`, `w`.`Cadence`, `w`.`CityName`, `w`.`Coords`, `w`.`Date`, `w`.`Distance`, `w`.`Duration`, `w`.`Emoji`, `w`.`Pace`, `w`.`Type`, `w`.`UserId`, `c`.`Id`, `c`.`CityName`, `c`.`Country`, `c`.`Date`, `c`.`Emoji`, `c`.`Lat`, `c`.`Lng`, `c`.`Notes`, `c`.`UserId`
FROM (
    SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`FirstName`, `a`.`LastName`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`
    FROM `AspNetUsers` AS `a`
    WHERE `a`.`Id` = @__user_Id_0
    LIMIT 2
) AS `t`
LEFT JOIN `Workouts` AS `w` ON `t`.`Id` = `w`.`UserId`
LEFT JOIN `Cities` AS `c` ON `t`.`Id` = `c`.`UserId`
ORDER BY `t`.`Id`, `w`.`Id`
2025-11-16 17:53:07.008 +03:00 [INF] Executing ObjectResult, writing value of type 'MappyApplication.Models.user.AuthResponse'.
2025-11-16 17:53:07.008 +03:00 [INF] Executed action MappyApplication.Controllers.AuthController.Login (MappyApplication) in 80.1617ms
2025-11-16 17:53:07.008 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.AuthController.Login (MappyApplication)'
2025-11-16 17:53:07.008 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:8080/api/v1/auth/login - 200 null application/json; charset=utf-8 81.5753ms
2025-11-16 17:53:10.332 +03:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:8080/api/v1/auth/refresh-token - null null
2025-11-16 17:53:10.333 +03:00 [INF] CORS policy execution successful.
2025-11-16 17:53:10.333 +03:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:8080/api/v1/auth/refresh-token - 204 null null 0.406ms
2025-11-16 17:53:10.334 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:8080/api/v1/auth/refresh-token - null 0
2025-11-16 17:53:10.334 +03:00 [INF] CORS policy execution successful.
2025-11-16 17:53:10.350 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 17:53:10.350 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication)'
2025-11-16 17:53:10.350 +03:00 [INF] Route matched with {action = "RefreshToken", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.user.AuthResponse] RefreshToken() on controller MappyApplication.Controllers.AuthController (MappyApplication).
2025-11-16 17:53:10.351 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__refreshToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`RefreshToken` = @__refreshToken_0
LIMIT 2
2025-11-16 17:53:10.352 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`FirstName`, `a`.`LastName`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`
FROM `AspNetUsers` AS `a`
WHERE `a`.`Id` = @__p_0
LIMIT 1
2025-11-16 17:53:10.355 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']

        UPDATE TOKENS
        SET Revoked = true, Expired = true
        WHERE UserId = @p0
          AND DeviceId = @p1
          AND Revoked = false
          AND Expired = false
2025-11-16 17:53:10.356 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a0`.`Name`
FROM `AspNetUserRoles` AS `a`
INNER JOIN `AspNetRoles` AS `a0` ON `a`.`RoleId` = `a0`.`Id`
WHERE `a`.`UserId` = @__userId_0
2025-11-16 17:53:10.356 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ClaimType`, `a`.`ClaimValue`, `a`.`UserId`
FROM `AspNetUserClaims` AS `a`
WHERE `a`.`UserId` = @__user_Id_0
2025-11-16 17:53:10.357 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a0`.`Name`
FROM `AspNetUserRoles` AS `a`
INNER JOIN `AspNetRoles` AS `a0` ON `a`.`RoleId` = `a0`.`Id`
WHERE `a`.`UserId` = @__userId_0
2025-11-16 17:53:10.358 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ClaimType`, `a`.`ClaimValue`, `a`.`UserId`
FROM `AspNetUserClaims` AS `a`
WHERE `a`.`UserId` = @__user_Id_0
2025-11-16 17:53:10.360 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (DbType = DateTime), @p2='?' (Size = 4000), @p3='?' (DbType = Boolean), @p4='?' (Size = 4000), @p5='?' (DbType = Boolean), @p6='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO `Tokens` (`AccessToken`, `CreatedAt`, `DeviceId`, `Expired`, `RefreshToken`, `Revoked`, `UserId`)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6);
SELECT `Id`
FROM `Tokens`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();
2025-11-16 17:53:10.360 +03:00 [INF] Added Token MappyApplication.Data.Token
2025-11-16 17:53:10.361 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessFailedCount`, `t`.`ConcurrencyStamp`, `t`.`Email`, `t`.`EmailConfirmed`, `t`.`FirstName`, `t`.`LastName`, `t`.`LockoutEnabled`, `t`.`LockoutEnd`, `t`.`NormalizedEmail`, `t`.`NormalizedUserName`, `t`.`PasswordHash`, `t`.`PhoneNumber`, `t`.`PhoneNumberConfirmed`, `t`.`SecurityStamp`, `t`.`TwoFactorEnabled`, `t`.`UserName`, `w`.`Id`, `w`.`Cadence`, `w`.`CityName`, `w`.`Coords`, `w`.`Date`, `w`.`Distance`, `w`.`Duration`, `w`.`Emoji`, `w`.`Pace`, `w`.`Type`, `w`.`UserId`, `c`.`Id`, `c`.`CityName`, `c`.`Country`, `c`.`Date`, `c`.`Emoji`, `c`.`Lat`, `c`.`Lng`, `c`.`Notes`, `c`.`UserId`
FROM (
    SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`FirstName`, `a`.`LastName`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`
    FROM `AspNetUsers` AS `a`
    WHERE `a`.`Id` = @__user_Id_0
    LIMIT 2
) AS `t`
LEFT JOIN `Workouts` AS `w` ON `t`.`Id` = `w`.`UserId`
LEFT JOIN `Cities` AS `c` ON `t`.`Id` = `c`.`UserId`
ORDER BY `t`.`Id`, `w`.`Id`
2025-11-16 17:53:10.361 +03:00 [INF] Executing ObjectResult, writing value of type 'MappyApplication.Models.user.AuthResponse'.
2025-11-16 17:53:10.361 +03:00 [INF] Executed action MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication) in 10.882ms
2025-11-16 17:53:10.361 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication)'
2025-11-16 17:53:10.361 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:8080/api/v1/auth/refresh-token - 200 null application/json; charset=utf-8 27.0924ms
2025-11-16 17:53:12.184 +03:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:8080/api/v1/auth/logout - null null
2025-11-16 17:53:12.185 +03:00 [INF] CORS policy execution successful.
2025-11-16 17:53:12.185 +03:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:8080/api/v1/auth/logout - 204 null null 0.9ms
2025-11-16 17:53:12.187 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:8080/api/v1/auth/logout - null null
2025-11-16 17:53:12.187 +03:00 [INF] CORS policy execution successful.
2025-11-16 17:53:12.205 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 17:53:12.206 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.AuthController.Logout (MappyApplication)'
2025-11-16 17:53:12.206 +03:00 [INF] Route matched with {action = "Logout", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Logout() on controller MappyApplication.Controllers.AuthController (MappyApplication).
2025-11-16 17:53:12.207 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__refreshToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`RefreshToken` = @__refreshToken_0
LIMIT 2
2025-11-16 17:53:12.211 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']

        UPDATE TOKENS
        SET Revoked = true, Expired = true
        WHERE UserId = @p0
          AND DeviceId = @p1
          AND Revoked = false
          AND Expired = false
2025-11-16 17:53:12.211 +03:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType0`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-11-16 17:53:12.211 +03:00 [INF] Executed action MappyApplication.Controllers.AuthController.Logout (MappyApplication) in 5.3325ms
2025-11-16 17:53:12.211 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.AuthController.Logout (MappyApplication)'
2025-11-16 17:53:12.211 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:8080/api/v1/auth/logout - 200 null application/json; charset=utf-8 24.6088ms
2025-11-16 17:53:45.528 +03:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:8080/api/v1/auth/login - null null
2025-11-16 17:53:45.532 +03:00 [INF] CORS policy execution successful.
2025-11-16 17:53:45.536 +03:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:8080/api/v1/auth/login - 204 null null 7.0892ms
2025-11-16 17:53:45.559 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:8080/api/v1/auth/login - application/json 51
2025-11-16 17:53:45.560 +03:00 [INF] CORS policy execution successful.
2025-11-16 17:53:45.562 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.AuthController.Login (MappyApplication)'
2025-11-16 17:53:45.563 +03:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.user.AuthResponse] Login(MappyApplication.Models.user.AuthLogin) on controller MappyApplication.Controllers.AuthController (MappyApplication).
2025-11-16 17:53:45.658 +03:00 [INF] Executed DbCommand (4ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`FirstName`, `a`.`LastName`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`
FROM `AspNetUsers` AS `a`
WHERE `a`.`NormalizedEmail` = @__normalizedEmail_0
LIMIT 2
2025-11-16 17:53:45.701 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']

        UPDATE TOKENS
        SET Revoked = true, Expired = true
        WHERE UserId = @p0
          AND DeviceId = @p1
          AND Revoked = false
          AND Expired = false
2025-11-16 17:53:45.703 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a0`.`Name`
FROM `AspNetUserRoles` AS `a`
INNER JOIN `AspNetRoles` AS `a0` ON `a`.`RoleId` = `a0`.`Id`
WHERE `a`.`UserId` = @__userId_0
2025-11-16 17:53:45.705 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ClaimType`, `a`.`ClaimValue`, `a`.`UserId`
FROM `AspNetUserClaims` AS `a`
WHERE `a`.`UserId` = @__user_Id_0
2025-11-16 17:53:45.707 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a0`.`Name`
FROM `AspNetUserRoles` AS `a`
INNER JOIN `AspNetRoles` AS `a0` ON `a`.`RoleId` = `a0`.`Id`
WHERE `a`.`UserId` = @__userId_0
2025-11-16 17:53:45.708 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ClaimType`, `a`.`ClaimValue`, `a`.`UserId`
FROM `AspNetUserClaims` AS `a`
WHERE `a`.`UserId` = @__user_Id_0
2025-11-16 17:53:45.713 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (DbType = DateTime), @p2='?' (Size = 4000), @p3='?' (DbType = Boolean), @p4='?' (Size = 4000), @p5='?' (DbType = Boolean), @p6='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO `Tokens` (`AccessToken`, `CreatedAt`, `DeviceId`, `Expired`, `RefreshToken`, `Revoked`, `UserId`)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6);
SELECT `Id`
FROM `Tokens`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();
2025-11-16 17:53:45.716 +03:00 [INF] Added Token MappyApplication.Data.Token
2025-11-16 17:53:45.719 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessFailedCount`, `t`.`ConcurrencyStamp`, `t`.`Email`, `t`.`EmailConfirmed`, `t`.`FirstName`, `t`.`LastName`, `t`.`LockoutEnabled`, `t`.`LockoutEnd`, `t`.`NormalizedEmail`, `t`.`NormalizedUserName`, `t`.`PasswordHash`, `t`.`PhoneNumber`, `t`.`PhoneNumberConfirmed`, `t`.`SecurityStamp`, `t`.`TwoFactorEnabled`, `t`.`UserName`, `w`.`Id`, `w`.`Cadence`, `w`.`CityName`, `w`.`Coords`, `w`.`Date`, `w`.`Distance`, `w`.`Duration`, `w`.`Emoji`, `w`.`Pace`, `w`.`Type`, `w`.`UserId`, `c`.`Id`, `c`.`CityName`, `c`.`Country`, `c`.`Date`, `c`.`Emoji`, `c`.`Lat`, `c`.`Lng`, `c`.`Notes`, `c`.`UserId`
FROM (
    SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`FirstName`, `a`.`LastName`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`
    FROM `AspNetUsers` AS `a`
    WHERE `a`.`Id` = @__user_Id_0
    LIMIT 2
) AS `t`
LEFT JOIN `Workouts` AS `w` ON `t`.`Id` = `w`.`UserId`
LEFT JOIN `Cities` AS `c` ON `t`.`Id` = `c`.`UserId`
ORDER BY `t`.`Id`, `w`.`Id`
2025-11-16 17:53:45.719 +03:00 [INF] Executing ObjectResult, writing value of type 'MappyApplication.Models.user.AuthResponse'.
2025-11-16 17:53:45.719 +03:00 [INF] Executed action MappyApplication.Controllers.AuthController.Login (MappyApplication) in 156.4505ms
2025-11-16 17:53:45.720 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.AuthController.Login (MappyApplication)'
2025-11-16 17:53:45.720 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:8080/api/v1/auth/login - 200 null application/json; charset=utf-8 160.274ms
2025-11-16 17:53:54.039 +03:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:8080/api/v1/auth/logout - null null
2025-11-16 17:53:54.042 +03:00 [INF] CORS policy execution successful.
2025-11-16 17:53:54.042 +03:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:8080/api/v1/auth/logout - 204 null null 3.1315ms
2025-11-16 17:53:54.044 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:8080/api/v1/auth/logout - null null
2025-11-16 17:53:54.045 +03:00 [INF] CORS policy execution successful.
2025-11-16 17:53:54.078 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 17:53:54.079 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.AuthController.Logout (MappyApplication)'
2025-11-16 17:53:54.079 +03:00 [INF] Route matched with {action = "Logout", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Logout() on controller MappyApplication.Controllers.AuthController (MappyApplication).
2025-11-16 17:53:54.081 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__refreshToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`RefreshToken` = @__refreshToken_0
LIMIT 2
2025-11-16 17:53:54.087 +03:00 [INF] Executed DbCommand (4ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']

        UPDATE TOKENS
        SET Revoked = true, Expired = true
        WHERE UserId = @p0
          AND DeviceId = @p1
          AND Revoked = false
          AND Expired = false
2025-11-16 17:53:54.087 +03:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType0`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-11-16 17:53:54.087 +03:00 [INF] Executed action MappyApplication.Controllers.AuthController.Logout (MappyApplication) in 8.2014ms
2025-11-16 17:53:54.087 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.AuthController.Logout (MappyApplication)'
2025-11-16 17:53:54.088 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:8080/api/v1/auth/logout - 200 null application/json; charset=utf-8 43.5075ms
2025-11-16 17:54:51.859 +03:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:8080/api/v1/auth/login - null null
2025-11-16 17:54:51.871 +03:00 [INF] CORS policy execution successful.
2025-11-16 17:54:51.880 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:8080/api/v1/auth/login - application/json 51
2025-11-16 17:54:51.881 +03:00 [INF] CORS policy execution successful.
2025-11-16 17:54:51.876 +03:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:8080/api/v1/auth/login - 204 null null 18.5343ms
2025-11-16 17:54:51.889 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.AuthController.Login (MappyApplication)'
2025-11-16 17:54:51.892 +03:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.user.AuthResponse] Login(MappyApplication.Models.user.AuthLogin) on controller MappyApplication.Controllers.AuthController (MappyApplication).
2025-11-16 17:54:52.003 +03:00 [INF] Executed DbCommand (4ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`FirstName`, `a`.`LastName`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`
FROM `AspNetUsers` AS `a`
WHERE `a`.`NormalizedEmail` = @__normalizedEmail_0
LIMIT 2
2025-11-16 17:54:52.049 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']

        UPDATE TOKENS
        SET Revoked = true, Expired = true
        WHERE UserId = @p0
          AND DeviceId = @p1
          AND Revoked = false
          AND Expired = false
2025-11-16 17:54:52.052 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a0`.`Name`
FROM `AspNetUserRoles` AS `a`
INNER JOIN `AspNetRoles` AS `a0` ON `a`.`RoleId` = `a0`.`Id`
WHERE `a`.`UserId` = @__userId_0
2025-11-16 17:54:52.055 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ClaimType`, `a`.`ClaimValue`, `a`.`UserId`
FROM `AspNetUserClaims` AS `a`
WHERE `a`.`UserId` = @__user_Id_0
2025-11-16 17:54:52.057 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a0`.`Name`
FROM `AspNetUserRoles` AS `a`
INNER JOIN `AspNetRoles` AS `a0` ON `a`.`RoleId` = `a0`.`Id`
WHERE `a`.`UserId` = @__userId_0
2025-11-16 17:54:52.058 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ClaimType`, `a`.`ClaimValue`, `a`.`UserId`
FROM `AspNetUserClaims` AS `a`
WHERE `a`.`UserId` = @__user_Id_0
2025-11-16 17:54:52.067 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (DbType = DateTime), @p2='?' (Size = 4000), @p3='?' (DbType = Boolean), @p4='?' (Size = 4000), @p5='?' (DbType = Boolean), @p6='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO `Tokens` (`AccessToken`, `CreatedAt`, `DeviceId`, `Expired`, `RefreshToken`, `Revoked`, `UserId`)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6);
SELECT `Id`
FROM `Tokens`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();
2025-11-16 17:54:52.069 +03:00 [INF] Added Token MappyApplication.Data.Token
2025-11-16 17:54:52.072 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessFailedCount`, `t`.`ConcurrencyStamp`, `t`.`Email`, `t`.`EmailConfirmed`, `t`.`FirstName`, `t`.`LastName`, `t`.`LockoutEnabled`, `t`.`LockoutEnd`, `t`.`NormalizedEmail`, `t`.`NormalizedUserName`, `t`.`PasswordHash`, `t`.`PhoneNumber`, `t`.`PhoneNumberConfirmed`, `t`.`SecurityStamp`, `t`.`TwoFactorEnabled`, `t`.`UserName`, `w`.`Id`, `w`.`Cadence`, `w`.`CityName`, `w`.`Coords`, `w`.`Date`, `w`.`Distance`, `w`.`Duration`, `w`.`Emoji`, `w`.`Pace`, `w`.`Type`, `w`.`UserId`, `c`.`Id`, `c`.`CityName`, `c`.`Country`, `c`.`Date`, `c`.`Emoji`, `c`.`Lat`, `c`.`Lng`, `c`.`Notes`, `c`.`UserId`
FROM (
    SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`FirstName`, `a`.`LastName`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`
    FROM `AspNetUsers` AS `a`
    WHERE `a`.`Id` = @__user_Id_0
    LIMIT 2
) AS `t`
LEFT JOIN `Workouts` AS `w` ON `t`.`Id` = `w`.`UserId`
LEFT JOIN `Cities` AS `c` ON `t`.`Id` = `c`.`UserId`
ORDER BY `t`.`Id`, `w`.`Id`
2025-11-16 17:54:52.073 +03:00 [INF] Executing ObjectResult, writing value of type 'MappyApplication.Models.user.AuthResponse'.
2025-11-16 17:54:52.073 +03:00 [INF] Executed action MappyApplication.Controllers.AuthController.Login (MappyApplication) in 178.9103ms
2025-11-16 17:54:52.073 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.AuthController.Login (MappyApplication)'
2025-11-16 17:54:52.073 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:8080/api/v1/auth/login - 200 null application/json; charset=utf-8 193.6605ms
2025-11-16 17:54:55.804 +03:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:8080/api/v1/auth/logout - null null
2025-11-16 17:54:55.805 +03:00 [INF] CORS policy execution successful.
2025-11-16 17:54:55.805 +03:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:8080/api/v1/auth/logout - 204 null null 1.9535ms
2025-11-16 17:54:55.807 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:8080/api/v1/auth/logout - null null
2025-11-16 17:54:55.809 +03:00 [INF] CORS policy execution successful.
2025-11-16 17:54:55.890 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 17:54:55.892 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.AuthController.Logout (MappyApplication)'
2025-11-16 17:54:55.893 +03:00 [INF] Route matched with {action = "Logout", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Logout() on controller MappyApplication.Controllers.AuthController (MappyApplication).
2025-11-16 17:54:55.895 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__refreshToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`RefreshToken` = @__refreshToken_0
LIMIT 2
2025-11-16 17:54:55.898 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']

        UPDATE TOKENS
        SET Revoked = true, Expired = true
        WHERE UserId = @p0
          AND DeviceId = @p1
          AND Revoked = false
          AND Expired = false
2025-11-16 17:54:55.898 +03:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType0`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-11-16 17:54:55.898 +03:00 [INF] Executed action MappyApplication.Controllers.AuthController.Logout (MappyApplication) in 5.3847ms
2025-11-16 17:54:55.898 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.AuthController.Logout (MappyApplication)'
2025-11-16 17:54:55.898 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:8080/api/v1/auth/logout - 200 null application/json; charset=utf-8 91.0434ms
2025-11-16 17:55:00.995 +03:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:8080/api/v1/auth/login - null null
2025-11-16 17:55:00.995 +03:00 [INF] CORS policy execution successful.
2025-11-16 17:55:00.996 +03:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:8080/api/v1/auth/login - 204 null null 0.8273ms
2025-11-16 17:55:00.997 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:8080/api/v1/auth/login - application/json 51
2025-11-16 17:55:00.997 +03:00 [INF] CORS policy execution successful.
2025-11-16 17:55:01.000 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.AuthController.Login (MappyApplication)'
2025-11-16 17:55:01.001 +03:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.user.AuthResponse] Login(MappyApplication.Models.user.AuthLogin) on controller MappyApplication.Controllers.AuthController (MappyApplication).
2025-11-16 17:55:01.041 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`FirstName`, `a`.`LastName`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`
FROM `AspNetUsers` AS `a`
WHERE `a`.`NormalizedEmail` = @__normalizedEmail_0
LIMIT 2
2025-11-16 17:55:01.089 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']

        UPDATE TOKENS
        SET Revoked = true, Expired = true
        WHERE UserId = @p0
          AND DeviceId = @p1
          AND Revoked = false
          AND Expired = false
2025-11-16 17:55:01.091 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a0`.`Name`
FROM `AspNetUserRoles` AS `a`
INNER JOIN `AspNetRoles` AS `a0` ON `a`.`RoleId` = `a0`.`Id`
WHERE `a`.`UserId` = @__userId_0
2025-11-16 17:55:01.092 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ClaimType`, `a`.`ClaimValue`, `a`.`UserId`
FROM `AspNetUserClaims` AS `a`
WHERE `a`.`UserId` = @__user_Id_0
2025-11-16 17:55:01.092 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a0`.`Name`
FROM `AspNetUserRoles` AS `a`
INNER JOIN `AspNetRoles` AS `a0` ON `a`.`RoleId` = `a0`.`Id`
WHERE `a`.`UserId` = @__userId_0
2025-11-16 17:55:01.093 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ClaimType`, `a`.`ClaimValue`, `a`.`UserId`
FROM `AspNetUserClaims` AS `a`
WHERE `a`.`UserId` = @__user_Id_0
2025-11-16 17:55:01.098 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (DbType = DateTime), @p2='?' (Size = 4000), @p3='?' (DbType = Boolean), @p4='?' (Size = 4000), @p5='?' (DbType = Boolean), @p6='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO `Tokens` (`AccessToken`, `CreatedAt`, `DeviceId`, `Expired`, `RefreshToken`, `Revoked`, `UserId`)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6);
SELECT `Id`
FROM `Tokens`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();
2025-11-16 17:55:01.099 +03:00 [INF] Added Token MappyApplication.Data.Token
2025-11-16 17:55:01.100 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessFailedCount`, `t`.`ConcurrencyStamp`, `t`.`Email`, `t`.`EmailConfirmed`, `t`.`FirstName`, `t`.`LastName`, `t`.`LockoutEnabled`, `t`.`LockoutEnd`, `t`.`NormalizedEmail`, `t`.`NormalizedUserName`, `t`.`PasswordHash`, `t`.`PhoneNumber`, `t`.`PhoneNumberConfirmed`, `t`.`SecurityStamp`, `t`.`TwoFactorEnabled`, `t`.`UserName`, `w`.`Id`, `w`.`Cadence`, `w`.`CityName`, `w`.`Coords`, `w`.`Date`, `w`.`Distance`, `w`.`Duration`, `w`.`Emoji`, `w`.`Pace`, `w`.`Type`, `w`.`UserId`, `c`.`Id`, `c`.`CityName`, `c`.`Country`, `c`.`Date`, `c`.`Emoji`, `c`.`Lat`, `c`.`Lng`, `c`.`Notes`, `c`.`UserId`
FROM (
    SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`FirstName`, `a`.`LastName`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`
    FROM `AspNetUsers` AS `a`
    WHERE `a`.`Id` = @__user_Id_0
    LIMIT 2
) AS `t`
LEFT JOIN `Workouts` AS `w` ON `t`.`Id` = `w`.`UserId`
LEFT JOIN `Cities` AS `c` ON `t`.`Id` = `c`.`UserId`
ORDER BY `t`.`Id`, `w`.`Id`
2025-11-16 17:55:01.100 +03:00 [INF] Executing ObjectResult, writing value of type 'MappyApplication.Models.user.AuthResponse'.
2025-11-16 17:55:01.101 +03:00 [INF] Executed action MappyApplication.Controllers.AuthController.Login (MappyApplication) in 99.7323ms
2025-11-16 17:55:01.101 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.AuthController.Login (MappyApplication)'
2025-11-16 17:55:01.101 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:8080/api/v1/auth/login - 200 null application/json; charset=utf-8 103.9857ms
2025-11-16 17:55:03.601 +03:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:8080/api/v1/auth/logout - null null
2025-11-16 17:55:03.601 +03:00 [INF] CORS policy execution successful.
2025-11-16 17:55:03.601 +03:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:8080/api/v1/auth/logout - 204 null null 0.4467ms
2025-11-16 17:55:03.604 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:8080/api/v1/auth/logout - null null
2025-11-16 17:55:03.605 +03:00 [INF] CORS policy execution successful.
2025-11-16 17:55:03.640 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 17:55:03.641 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.AuthController.Logout (MappyApplication)'
2025-11-16 17:55:03.641 +03:00 [INF] Route matched with {action = "Logout", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Logout() on controller MappyApplication.Controllers.AuthController (MappyApplication).
2025-11-16 17:55:03.645 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__refreshToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`RefreshToken` = @__refreshToken_0
LIMIT 2
2025-11-16 17:55:03.649 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']

        UPDATE TOKENS
        SET Revoked = true, Expired = true
        WHERE UserId = @p0
          AND DeviceId = @p1
          AND Revoked = false
          AND Expired = false
2025-11-16 17:55:03.649 +03:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType0`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-11-16 17:55:03.649 +03:00 [INF] Executed action MappyApplication.Controllers.AuthController.Logout (MappyApplication) in 8.1939ms
2025-11-16 17:55:03.650 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.AuthController.Logout (MappyApplication)'
2025-11-16 17:55:03.650 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:8080/api/v1/auth/logout - 200 null application/json; charset=utf-8 46.157ms
2025-11-16 17:55:53.730 +03:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:8080/api/v1/auth/login - null null
2025-11-16 17:55:53.732 +03:00 [INF] CORS policy execution successful.
2025-11-16 17:55:53.733 +03:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:8080/api/v1/auth/login - 204 null null 3.1652ms
2025-11-16 17:55:53.734 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:8080/api/v1/auth/login - application/json 51
2025-11-16 17:55:53.734 +03:00 [INF] CORS policy execution successful.
2025-11-16 17:55:53.746 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.AuthController.Login (MappyApplication)'
2025-11-16 17:55:53.747 +03:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.user.AuthResponse] Login(MappyApplication.Models.user.AuthLogin) on controller MappyApplication.Controllers.AuthController (MappyApplication).
2025-11-16 17:55:53.804 +03:00 [INF] Executed DbCommand (5ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`FirstName`, `a`.`LastName`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`
FROM `AspNetUsers` AS `a`
WHERE `a`.`NormalizedEmail` = @__normalizedEmail_0
LIMIT 2
2025-11-16 17:55:53.847 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']

        UPDATE TOKENS
        SET Revoked = true, Expired = true
        WHERE UserId = @p0
          AND DeviceId = @p1
          AND Revoked = false
          AND Expired = false
2025-11-16 17:55:53.849 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a0`.`Name`
FROM `AspNetUserRoles` AS `a`
INNER JOIN `AspNetRoles` AS `a0` ON `a`.`RoleId` = `a0`.`Id`
WHERE `a`.`UserId` = @__userId_0
2025-11-16 17:55:53.851 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ClaimType`, `a`.`ClaimValue`, `a`.`UserId`
FROM `AspNetUserClaims` AS `a`
WHERE `a`.`UserId` = @__user_Id_0
2025-11-16 17:55:53.853 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a0`.`Name`
FROM `AspNetUserRoles` AS `a`
INNER JOIN `AspNetRoles` AS `a0` ON `a`.`RoleId` = `a0`.`Id`
WHERE `a`.`UserId` = @__userId_0
2025-11-16 17:55:53.854 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ClaimType`, `a`.`ClaimValue`, `a`.`UserId`
FROM `AspNetUserClaims` AS `a`
WHERE `a`.`UserId` = @__user_Id_0
2025-11-16 17:55:53.860 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (DbType = DateTime), @p2='?' (Size = 4000), @p3='?' (DbType = Boolean), @p4='?' (Size = 4000), @p5='?' (DbType = Boolean), @p6='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO `Tokens` (`AccessToken`, `CreatedAt`, `DeviceId`, `Expired`, `RefreshToken`, `Revoked`, `UserId`)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6);
SELECT `Id`
FROM `Tokens`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();
2025-11-16 17:55:53.862 +03:00 [INF] Added Token MappyApplication.Data.Token
2025-11-16 17:55:53.864 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessFailedCount`, `t`.`ConcurrencyStamp`, `t`.`Email`, `t`.`EmailConfirmed`, `t`.`FirstName`, `t`.`LastName`, `t`.`LockoutEnabled`, `t`.`LockoutEnd`, `t`.`NormalizedEmail`, `t`.`NormalizedUserName`, `t`.`PasswordHash`, `t`.`PhoneNumber`, `t`.`PhoneNumberConfirmed`, `t`.`SecurityStamp`, `t`.`TwoFactorEnabled`, `t`.`UserName`, `w`.`Id`, `w`.`Cadence`, `w`.`CityName`, `w`.`Coords`, `w`.`Date`, `w`.`Distance`, `w`.`Duration`, `w`.`Emoji`, `w`.`Pace`, `w`.`Type`, `w`.`UserId`, `c`.`Id`, `c`.`CityName`, `c`.`Country`, `c`.`Date`, `c`.`Emoji`, `c`.`Lat`, `c`.`Lng`, `c`.`Notes`, `c`.`UserId`
FROM (
    SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`FirstName`, `a`.`LastName`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`
    FROM `AspNetUsers` AS `a`
    WHERE `a`.`Id` = @__user_Id_0
    LIMIT 2
) AS `t`
LEFT JOIN `Workouts` AS `w` ON `t`.`Id` = `w`.`UserId`
LEFT JOIN `Cities` AS `c` ON `t`.`Id` = `c`.`UserId`
ORDER BY `t`.`Id`, `w`.`Id`
2025-11-16 17:55:53.865 +03:00 [INF] Executing ObjectResult, writing value of type 'MappyApplication.Models.user.AuthResponse'.
2025-11-16 17:55:53.865 +03:00 [INF] Executed action MappyApplication.Controllers.AuthController.Login (MappyApplication) in 118.7582ms
2025-11-16 17:55:53.866 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.AuthController.Login (MappyApplication)'
2025-11-16 17:55:53.866 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:8080/api/v1/auth/login - 200 null application/json; charset=utf-8 131.4042ms
2025-11-16 17:55:57.470 +03:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:8080/api/v1/auth/logout - null null
2025-11-16 17:55:57.471 +03:00 [INF] CORS policy execution successful.
2025-11-16 17:55:57.471 +03:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:8080/api/v1/auth/logout - 204 null null 0.79ms
2025-11-16 17:55:57.473 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:8080/api/v1/auth/logout - null null
2025-11-16 17:55:57.479 +03:00 [INF] CORS policy execution successful.
2025-11-16 17:55:57.515 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 17:55:57.516 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.AuthController.Logout (MappyApplication)'
2025-11-16 17:55:57.516 +03:00 [INF] Route matched with {action = "Logout", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Logout() on controller MappyApplication.Controllers.AuthController (MappyApplication).
2025-11-16 17:55:57.518 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__refreshToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`RefreshToken` = @__refreshToken_0
LIMIT 2
2025-11-16 17:55:57.524 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']

        UPDATE TOKENS
        SET Revoked = true, Expired = true
        WHERE UserId = @p0
          AND DeviceId = @p1
          AND Revoked = false
          AND Expired = false
2025-11-16 17:55:57.524 +03:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType0`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-11-16 17:55:57.526 +03:00 [INF] Executed action MappyApplication.Controllers.AuthController.Logout (MappyApplication) in 9.6527ms
2025-11-16 17:55:57.526 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.AuthController.Logout (MappyApplication)'
2025-11-16 17:55:57.526 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:8080/api/v1/auth/logout - 200 null application/json; charset=utf-8 53.0428ms
2025-11-16 17:56:07.392 +03:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:8080/api/v1/auth/login - null null
2025-11-16 17:56:07.394 +03:00 [INF] CORS policy execution successful.
2025-11-16 17:56:07.395 +03:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:8080/api/v1/auth/login - 204 null null 3.0291ms
2025-11-16 17:56:07.397 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:8080/api/v1/auth/login - application/json 51
2025-11-16 17:56:07.397 +03:00 [INF] CORS policy execution successful.
2025-11-16 17:56:07.399 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.AuthController.Login (MappyApplication)'
2025-11-16 17:56:07.399 +03:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.user.AuthResponse] Login(MappyApplication.Models.user.AuthLogin) on controller MappyApplication.Controllers.AuthController (MappyApplication).
2025-11-16 17:56:07.464 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`FirstName`, `a`.`LastName`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`
FROM `AspNetUsers` AS `a`
WHERE `a`.`NormalizedEmail` = @__normalizedEmail_0
LIMIT 2
2025-11-16 17:56:07.508 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']

        UPDATE TOKENS
        SET Revoked = true, Expired = true
        WHERE UserId = @p0
          AND DeviceId = @p1
          AND Revoked = false
          AND Expired = false
2025-11-16 17:56:07.509 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a0`.`Name`
FROM `AspNetUserRoles` AS `a`
INNER JOIN `AspNetRoles` AS `a0` ON `a`.`RoleId` = `a0`.`Id`
WHERE `a`.`UserId` = @__userId_0
2025-11-16 17:56:07.510 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ClaimType`, `a`.`ClaimValue`, `a`.`UserId`
FROM `AspNetUserClaims` AS `a`
WHERE `a`.`UserId` = @__user_Id_0
2025-11-16 17:56:07.512 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a0`.`Name`
FROM `AspNetUserRoles` AS `a`
INNER JOIN `AspNetRoles` AS `a0` ON `a`.`RoleId` = `a0`.`Id`
WHERE `a`.`UserId` = @__userId_0
2025-11-16 17:56:07.513 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ClaimType`, `a`.`ClaimValue`, `a`.`UserId`
FROM `AspNetUserClaims` AS `a`
WHERE `a`.`UserId` = @__user_Id_0
2025-11-16 17:56:07.514 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (DbType = DateTime), @p2='?' (Size = 4000), @p3='?' (DbType = Boolean), @p4='?' (Size = 4000), @p5='?' (DbType = Boolean), @p6='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO `Tokens` (`AccessToken`, `CreatedAt`, `DeviceId`, `Expired`, `RefreshToken`, `Revoked`, `UserId`)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6);
SELECT `Id`
FROM `Tokens`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();
2025-11-16 17:56:07.515 +03:00 [INF] Added Token MappyApplication.Data.Token
2025-11-16 17:56:07.519 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessFailedCount`, `t`.`ConcurrencyStamp`, `t`.`Email`, `t`.`EmailConfirmed`, `t`.`FirstName`, `t`.`LastName`, `t`.`LockoutEnabled`, `t`.`LockoutEnd`, `t`.`NormalizedEmail`, `t`.`NormalizedUserName`, `t`.`PasswordHash`, `t`.`PhoneNumber`, `t`.`PhoneNumberConfirmed`, `t`.`SecurityStamp`, `t`.`TwoFactorEnabled`, `t`.`UserName`, `w`.`Id`, `w`.`Cadence`, `w`.`CityName`, `w`.`Coords`, `w`.`Date`, `w`.`Distance`, `w`.`Duration`, `w`.`Emoji`, `w`.`Pace`, `w`.`Type`, `w`.`UserId`, `c`.`Id`, `c`.`CityName`, `c`.`Country`, `c`.`Date`, `c`.`Emoji`, `c`.`Lat`, `c`.`Lng`, `c`.`Notes`, `c`.`UserId`
FROM (
    SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`FirstName`, `a`.`LastName`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`
    FROM `AspNetUsers` AS `a`
    WHERE `a`.`Id` = @__user_Id_0
    LIMIT 2
) AS `t`
LEFT JOIN `Workouts` AS `w` ON `t`.`Id` = `w`.`UserId`
LEFT JOIN `Cities` AS `c` ON `t`.`Id` = `c`.`UserId`
ORDER BY `t`.`Id`, `w`.`Id`
2025-11-16 17:56:07.519 +03:00 [INF] Executing ObjectResult, writing value of type 'MappyApplication.Models.user.AuthResponse'.
2025-11-16 17:56:07.519 +03:00 [INF] Executed action MappyApplication.Controllers.AuthController.Login (MappyApplication) in 120.2123ms
2025-11-16 17:56:07.519 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.AuthController.Login (MappyApplication)'
2025-11-16 17:56:07.519 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:8080/api/v1/auth/login - 200 null application/json; charset=utf-8 122.7402ms
2025-11-16 17:56:11.034 +03:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:8080/api/v1/auth/logout - null null
2025-11-16 17:56:11.034 +03:00 [INF] CORS policy execution successful.
2025-11-16 17:56:11.034 +03:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:8080/api/v1/auth/logout - 204 null null 0.4585ms
2025-11-16 17:56:11.040 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:8080/api/v1/auth/logout - null null
2025-11-16 17:56:11.040 +03:00 [INF] CORS policy execution successful.
2025-11-16 17:56:11.059 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 17:56:11.060 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.AuthController.Logout (MappyApplication)'
2025-11-16 17:56:11.060 +03:00 [INF] Route matched with {action = "Logout", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Logout() on controller MappyApplication.Controllers.AuthController (MappyApplication).
2025-11-16 17:56:11.061 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__refreshToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`RefreshToken` = @__refreshToken_0
LIMIT 2
2025-11-16 17:56:11.064 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']

        UPDATE TOKENS
        SET Revoked = true, Expired = true
        WHERE UserId = @p0
          AND DeviceId = @p1
          AND Revoked = false
          AND Expired = false
2025-11-16 17:56:11.064 +03:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType0`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-11-16 17:56:11.065 +03:00 [INF] Executed action MappyApplication.Controllers.AuthController.Logout (MappyApplication) in 4.6065ms
2025-11-16 17:56:11.065 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.AuthController.Logout (MappyApplication)'
2025-11-16 17:56:11.065 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:8080/api/v1/auth/logout - 200 null application/json; charset=utf-8 25.1468ms
2025-11-16 17:56:20.286 +03:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:8080/api/v1/auth/login - null null
2025-11-16 17:56:20.288 +03:00 [INF] CORS policy execution successful.
2025-11-16 17:56:20.289 +03:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:8080/api/v1/auth/login - 204 null null 3.0885ms
2025-11-16 17:56:20.295 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:8080/api/v1/auth/login - application/json 51
2025-11-16 17:56:20.295 +03:00 [INF] CORS policy execution successful.
2025-11-16 17:56:20.297 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.AuthController.Login (MappyApplication)'
2025-11-16 17:56:20.298 +03:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.user.AuthResponse] Login(MappyApplication.Models.user.AuthLogin) on controller MappyApplication.Controllers.AuthController (MappyApplication).
2025-11-16 17:56:20.344 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`FirstName`, `a`.`LastName`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`
FROM `AspNetUsers` AS `a`
WHERE `a`.`NormalizedEmail` = @__normalizedEmail_0
LIMIT 2
2025-11-16 17:56:20.393 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']

        UPDATE TOKENS
        SET Revoked = true, Expired = true
        WHERE UserId = @p0
          AND DeviceId = @p1
          AND Revoked = false
          AND Expired = false
2025-11-16 17:56:20.394 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a0`.`Name`
FROM `AspNetUserRoles` AS `a`
INNER JOIN `AspNetRoles` AS `a0` ON `a`.`RoleId` = `a0`.`Id`
WHERE `a`.`UserId` = @__userId_0
2025-11-16 17:56:20.396 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ClaimType`, `a`.`ClaimValue`, `a`.`UserId`
FROM `AspNetUserClaims` AS `a`
WHERE `a`.`UserId` = @__user_Id_0
2025-11-16 17:56:20.396 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a0`.`Name`
FROM `AspNetUserRoles` AS `a`
INNER JOIN `AspNetRoles` AS `a0` ON `a`.`RoleId` = `a0`.`Id`
WHERE `a`.`UserId` = @__userId_0
2025-11-16 17:56:20.397 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ClaimType`, `a`.`ClaimValue`, `a`.`UserId`
FROM `AspNetUserClaims` AS `a`
WHERE `a`.`UserId` = @__user_Id_0
2025-11-16 17:56:20.399 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (DbType = DateTime), @p2='?' (Size = 4000), @p3='?' (DbType = Boolean), @p4='?' (Size = 4000), @p5='?' (DbType = Boolean), @p6='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO `Tokens` (`AccessToken`, `CreatedAt`, `DeviceId`, `Expired`, `RefreshToken`, `Revoked`, `UserId`)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6);
SELECT `Id`
FROM `Tokens`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();
2025-11-16 17:56:20.400 +03:00 [INF] Added Token MappyApplication.Data.Token
2025-11-16 17:56:20.401 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessFailedCount`, `t`.`ConcurrencyStamp`, `t`.`Email`, `t`.`EmailConfirmed`, `t`.`FirstName`, `t`.`LastName`, `t`.`LockoutEnabled`, `t`.`LockoutEnd`, `t`.`NormalizedEmail`, `t`.`NormalizedUserName`, `t`.`PasswordHash`, `t`.`PhoneNumber`, `t`.`PhoneNumberConfirmed`, `t`.`SecurityStamp`, `t`.`TwoFactorEnabled`, `t`.`UserName`, `w`.`Id`, `w`.`Cadence`, `w`.`CityName`, `w`.`Coords`, `w`.`Date`, `w`.`Distance`, `w`.`Duration`, `w`.`Emoji`, `w`.`Pace`, `w`.`Type`, `w`.`UserId`, `c`.`Id`, `c`.`CityName`, `c`.`Country`, `c`.`Date`, `c`.`Emoji`, `c`.`Lat`, `c`.`Lng`, `c`.`Notes`, `c`.`UserId`
FROM (
    SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`FirstName`, `a`.`LastName`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`
    FROM `AspNetUsers` AS `a`
    WHERE `a`.`Id` = @__user_Id_0
    LIMIT 2
) AS `t`
LEFT JOIN `Workouts` AS `w` ON `t`.`Id` = `w`.`UserId`
LEFT JOIN `Cities` AS `c` ON `t`.`Id` = `c`.`UserId`
ORDER BY `t`.`Id`, `w`.`Id`
2025-11-16 17:56:20.401 +03:00 [INF] Executing ObjectResult, writing value of type 'MappyApplication.Models.user.AuthResponse'.
2025-11-16 17:56:20.402 +03:00 [INF] Executed action MappyApplication.Controllers.AuthController.Login (MappyApplication) in 103.4794ms
2025-11-16 17:56:20.402 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.AuthController.Login (MappyApplication)'
2025-11-16 17:56:20.402 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:8080/api/v1/auth/login - 200 null application/json; charset=utf-8 107.3051ms
2025-11-16 17:56:51.520 +03:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:8080/api/v1/auth/logout - null null
2025-11-16 17:56:51.522 +03:00 [INF] CORS policy execution successful.
2025-11-16 17:56:51.522 +03:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:8080/api/v1/auth/logout - 204 null null 2.529ms
2025-11-16 17:56:51.524 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:8080/api/v1/auth/logout - null null
2025-11-16 17:56:51.525 +03:00 [INF] CORS policy execution successful.
2025-11-16 17:56:51.566 +03:00 [INF] Executed DbCommand (4ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 17:56:51.568 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.AuthController.Logout (MappyApplication)'
2025-11-16 17:56:51.568 +03:00 [INF] Route matched with {action = "Logout", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Logout() on controller MappyApplication.Controllers.AuthController (MappyApplication).
2025-11-16 17:56:51.571 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__refreshToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`RefreshToken` = @__refreshToken_0
LIMIT 2
2025-11-16 17:56:51.578 +03:00 [INF] Executed DbCommand (5ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']

        UPDATE TOKENS
        SET Revoked = true, Expired = true
        WHERE UserId = @p0
          AND DeviceId = @p1
          AND Revoked = false
          AND Expired = false
2025-11-16 17:56:51.579 +03:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType0`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-11-16 17:56:51.579 +03:00 [INF] Executed action MappyApplication.Controllers.AuthController.Logout (MappyApplication) in 11.085ms
2025-11-16 17:56:51.580 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.AuthController.Logout (MappyApplication)'
2025-11-16 17:56:51.580 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:8080/api/v1/auth/logout - 200 null application/json; charset=utf-8 55.7795ms
2025-11-16 17:56:59.390 +03:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:8080/api/v1/auth/login - null null
2025-11-16 17:56:59.391 +03:00 [INF] CORS policy execution successful.
2025-11-16 17:56:59.391 +03:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:8080/api/v1/auth/login - 204 null null 0.5054ms
2025-11-16 17:56:59.392 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:8080/api/v1/auth/login - application/json 51
2025-11-16 17:56:59.392 +03:00 [INF] CORS policy execution successful.
2025-11-16 17:56:59.392 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.AuthController.Login (MappyApplication)'
2025-11-16 17:56:59.392 +03:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.user.AuthResponse] Login(MappyApplication.Models.user.AuthLogin) on controller MappyApplication.Controllers.AuthController (MappyApplication).
2025-11-16 17:56:59.413 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`FirstName`, `a`.`LastName`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`
FROM `AspNetUsers` AS `a`
WHERE `a`.`NormalizedEmail` = @__normalizedEmail_0
LIMIT 2
2025-11-16 17:56:59.465 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']

        UPDATE TOKENS
        SET Revoked = true, Expired = true
        WHERE UserId = @p0
          AND DeviceId = @p1
          AND Revoked = false
          AND Expired = false
2025-11-16 17:56:59.468 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a0`.`Name`
FROM `AspNetUserRoles` AS `a`
INNER JOIN `AspNetRoles` AS `a0` ON `a`.`RoleId` = `a0`.`Id`
WHERE `a`.`UserId` = @__userId_0
2025-11-16 17:56:59.470 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ClaimType`, `a`.`ClaimValue`, `a`.`UserId`
FROM `AspNetUserClaims` AS `a`
WHERE `a`.`UserId` = @__user_Id_0
2025-11-16 17:56:59.470 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a0`.`Name`
FROM `AspNetUserRoles` AS `a`
INNER JOIN `AspNetRoles` AS `a0` ON `a`.`RoleId` = `a0`.`Id`
WHERE `a`.`UserId` = @__userId_0
2025-11-16 17:56:59.471 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ClaimType`, `a`.`ClaimValue`, `a`.`UserId`
FROM `AspNetUserClaims` AS `a`
WHERE `a`.`UserId` = @__user_Id_0
2025-11-16 17:56:59.474 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (DbType = DateTime), @p2='?' (Size = 4000), @p3='?' (DbType = Boolean), @p4='?' (Size = 4000), @p5='?' (DbType = Boolean), @p6='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO `Tokens` (`AccessToken`, `CreatedAt`, `DeviceId`, `Expired`, `RefreshToken`, `Revoked`, `UserId`)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6);
SELECT `Id`
FROM `Tokens`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();
2025-11-16 17:56:59.475 +03:00 [INF] Added Token MappyApplication.Data.Token
2025-11-16 17:56:59.477 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessFailedCount`, `t`.`ConcurrencyStamp`, `t`.`Email`, `t`.`EmailConfirmed`, `t`.`FirstName`, `t`.`LastName`, `t`.`LockoutEnabled`, `t`.`LockoutEnd`, `t`.`NormalizedEmail`, `t`.`NormalizedUserName`, `t`.`PasswordHash`, `t`.`PhoneNumber`, `t`.`PhoneNumberConfirmed`, `t`.`SecurityStamp`, `t`.`TwoFactorEnabled`, `t`.`UserName`, `w`.`Id`, `w`.`Cadence`, `w`.`CityName`, `w`.`Coords`, `w`.`Date`, `w`.`Distance`, `w`.`Duration`, `w`.`Emoji`, `w`.`Pace`, `w`.`Type`, `w`.`UserId`, `c`.`Id`, `c`.`CityName`, `c`.`Country`, `c`.`Date`, `c`.`Emoji`, `c`.`Lat`, `c`.`Lng`, `c`.`Notes`, `c`.`UserId`
FROM (
    SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`FirstName`, `a`.`LastName`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`
    FROM `AspNetUsers` AS `a`
    WHERE `a`.`Id` = @__user_Id_0
    LIMIT 2
) AS `t`
LEFT JOIN `Workouts` AS `w` ON `t`.`Id` = `w`.`UserId`
LEFT JOIN `Cities` AS `c` ON `t`.`Id` = `c`.`UserId`
ORDER BY `t`.`Id`, `w`.`Id`
2025-11-16 17:56:59.478 +03:00 [INF] Executing ObjectResult, writing value of type 'MappyApplication.Models.user.AuthResponse'.
2025-11-16 17:56:59.478 +03:00 [INF] Executed action MappyApplication.Controllers.AuthController.Login (MappyApplication) in 85.1572ms
2025-11-16 17:56:59.478 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.AuthController.Login (MappyApplication)'
2025-11-16 17:56:59.478 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:8080/api/v1/auth/login - 200 null application/json; charset=utf-8 85.6328ms
2025-11-16 17:57:02.745 +03:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:8080/api/v1/auth/refresh-token - null null
2025-11-16 17:57:02.745 +03:00 [INF] CORS policy execution successful.
2025-11-16 17:57:02.745 +03:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:8080/api/v1/auth/refresh-token - 204 null null 0.298ms
2025-11-16 17:57:02.747 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:8080/api/v1/auth/refresh-token - null 0
2025-11-16 17:57:02.748 +03:00 [INF] CORS policy execution successful.
2025-11-16 17:57:02.766 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 17:57:02.766 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication)'
2025-11-16 17:57:02.766 +03:00 [INF] Route matched with {action = "RefreshToken", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.user.AuthResponse] RefreshToken() on controller MappyApplication.Controllers.AuthController (MappyApplication).
2025-11-16 17:57:02.768 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__refreshToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`RefreshToken` = @__refreshToken_0
LIMIT 2
2025-11-16 17:57:02.775 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`FirstName`, `a`.`LastName`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`
FROM `AspNetUsers` AS `a`
WHERE `a`.`Id` = @__p_0
LIMIT 1
2025-11-16 17:57:02.778 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']

        UPDATE TOKENS
        SET Revoked = true, Expired = true
        WHERE UserId = @p0
          AND DeviceId = @p1
          AND Revoked = false
          AND Expired = false
2025-11-16 17:57:02.779 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a0`.`Name`
FROM `AspNetUserRoles` AS `a`
INNER JOIN `AspNetRoles` AS `a0` ON `a`.`RoleId` = `a0`.`Id`
WHERE `a`.`UserId` = @__userId_0
2025-11-16 17:57:02.779 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ClaimType`, `a`.`ClaimValue`, `a`.`UserId`
FROM `AspNetUserClaims` AS `a`
WHERE `a`.`UserId` = @__user_Id_0
2025-11-16 17:57:02.781 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a0`.`Name`
FROM `AspNetUserRoles` AS `a`
INNER JOIN `AspNetRoles` AS `a0` ON `a`.`RoleId` = `a0`.`Id`
WHERE `a`.`UserId` = @__userId_0
2025-11-16 17:57:02.781 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ClaimType`, `a`.`ClaimValue`, `a`.`UserId`
FROM `AspNetUserClaims` AS `a`
WHERE `a`.`UserId` = @__user_Id_0
2025-11-16 17:57:02.783 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (DbType = DateTime), @p2='?' (Size = 4000), @p3='?' (DbType = Boolean), @p4='?' (Size = 4000), @p5='?' (DbType = Boolean), @p6='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO `Tokens` (`AccessToken`, `CreatedAt`, `DeviceId`, `Expired`, `RefreshToken`, `Revoked`, `UserId`)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6);
SELECT `Id`
FROM `Tokens`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();
2025-11-16 17:57:02.783 +03:00 [INF] Added Token MappyApplication.Data.Token
2025-11-16 17:57:02.786 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessFailedCount`, `t`.`ConcurrencyStamp`, `t`.`Email`, `t`.`EmailConfirmed`, `t`.`FirstName`, `t`.`LastName`, `t`.`LockoutEnabled`, `t`.`LockoutEnd`, `t`.`NormalizedEmail`, `t`.`NormalizedUserName`, `t`.`PasswordHash`, `t`.`PhoneNumber`, `t`.`PhoneNumberConfirmed`, `t`.`SecurityStamp`, `t`.`TwoFactorEnabled`, `t`.`UserName`, `w`.`Id`, `w`.`Cadence`, `w`.`CityName`, `w`.`Coords`, `w`.`Date`, `w`.`Distance`, `w`.`Duration`, `w`.`Emoji`, `w`.`Pace`, `w`.`Type`, `w`.`UserId`, `c`.`Id`, `c`.`CityName`, `c`.`Country`, `c`.`Date`, `c`.`Emoji`, `c`.`Lat`, `c`.`Lng`, `c`.`Notes`, `c`.`UserId`
FROM (
    SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`FirstName`, `a`.`LastName`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`
    FROM `AspNetUsers` AS `a`
    WHERE `a`.`Id` = @__user_Id_0
    LIMIT 2
) AS `t`
LEFT JOIN `Workouts` AS `w` ON `t`.`Id` = `w`.`UserId`
LEFT JOIN `Cities` AS `c` ON `t`.`Id` = `c`.`UserId`
ORDER BY `t`.`Id`, `w`.`Id`
2025-11-16 17:57:02.786 +03:00 [INF] Executing ObjectResult, writing value of type 'MappyApplication.Models.user.AuthResponse'.
2025-11-16 17:57:02.786 +03:00 [INF] Executed action MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication) in 19.8545ms
2025-11-16 17:57:02.786 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication)'
2025-11-16 17:57:02.786 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:8080/api/v1/auth/refresh-token - 200 null application/json; charset=utf-8 39.0935ms
2025-11-16 17:57:03.351 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:8080/api/v1/auth/refresh-token - null 0
2025-11-16 17:57:03.351 +03:00 [INF] CORS policy execution successful.
2025-11-16 17:57:03.368 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 17:57:03.368 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication)'
2025-11-16 17:57:03.368 +03:00 [INF] Route matched with {action = "RefreshToken", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.user.AuthResponse] RefreshToken() on controller MappyApplication.Controllers.AuthController (MappyApplication).
2025-11-16 17:57:03.369 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__refreshToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`RefreshToken` = @__refreshToken_0
LIMIT 2
2025-11-16 17:57:03.371 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`FirstName`, `a`.`LastName`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`
FROM `AspNetUsers` AS `a`
WHERE `a`.`Id` = @__p_0
LIMIT 1
2025-11-16 17:57:03.374 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']

        UPDATE TOKENS
        SET Revoked = true, Expired = true
        WHERE UserId = @p0
          AND DeviceId = @p1
          AND Revoked = false
          AND Expired = false
2025-11-16 17:57:03.377 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a0`.`Name`
FROM `AspNetUserRoles` AS `a`
INNER JOIN `AspNetRoles` AS `a0` ON `a`.`RoleId` = `a0`.`Id`
WHERE `a`.`UserId` = @__userId_0
2025-11-16 17:57:03.378 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ClaimType`, `a`.`ClaimValue`, `a`.`UserId`
FROM `AspNetUserClaims` AS `a`
WHERE `a`.`UserId` = @__user_Id_0
2025-11-16 17:57:03.379 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a0`.`Name`
FROM `AspNetUserRoles` AS `a`
INNER JOIN `AspNetRoles` AS `a0` ON `a`.`RoleId` = `a0`.`Id`
WHERE `a`.`UserId` = @__userId_0
2025-11-16 17:57:03.380 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ClaimType`, `a`.`ClaimValue`, `a`.`UserId`
FROM `AspNetUserClaims` AS `a`
WHERE `a`.`UserId` = @__user_Id_0
2025-11-16 17:57:03.382 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (DbType = DateTime), @p2='?' (Size = 4000), @p3='?' (DbType = Boolean), @p4='?' (Size = 4000), @p5='?' (DbType = Boolean), @p6='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO `Tokens` (`AccessToken`, `CreatedAt`, `DeviceId`, `Expired`, `RefreshToken`, `Revoked`, `UserId`)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6);
SELECT `Id`
FROM `Tokens`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();
2025-11-16 17:57:03.382 +03:00 [INF] Added Token MappyApplication.Data.Token
2025-11-16 17:57:03.384 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessFailedCount`, `t`.`ConcurrencyStamp`, `t`.`Email`, `t`.`EmailConfirmed`, `t`.`FirstName`, `t`.`LastName`, `t`.`LockoutEnabled`, `t`.`LockoutEnd`, `t`.`NormalizedEmail`, `t`.`NormalizedUserName`, `t`.`PasswordHash`, `t`.`PhoneNumber`, `t`.`PhoneNumberConfirmed`, `t`.`SecurityStamp`, `t`.`TwoFactorEnabled`, `t`.`UserName`, `w`.`Id`, `w`.`Cadence`, `w`.`CityName`, `w`.`Coords`, `w`.`Date`, `w`.`Distance`, `w`.`Duration`, `w`.`Emoji`, `w`.`Pace`, `w`.`Type`, `w`.`UserId`, `c`.`Id`, `c`.`CityName`, `c`.`Country`, `c`.`Date`, `c`.`Emoji`, `c`.`Lat`, `c`.`Lng`, `c`.`Notes`, `c`.`UserId`
FROM (
    SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`FirstName`, `a`.`LastName`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`
    FROM `AspNetUsers` AS `a`
    WHERE `a`.`Id` = @__user_Id_0
    LIMIT 2
) AS `t`
LEFT JOIN `Workouts` AS `w` ON `t`.`Id` = `w`.`UserId`
LEFT JOIN `Cities` AS `c` ON `t`.`Id` = `c`.`UserId`
ORDER BY `t`.`Id`, `w`.`Id`
2025-11-16 17:57:03.384 +03:00 [INF] Executing ObjectResult, writing value of type 'MappyApplication.Models.user.AuthResponse'.
2025-11-16 17:57:03.384 +03:00 [INF] Executed action MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication) in 15.493ms
2025-11-16 17:57:03.384 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication)'
2025-11-16 17:57:03.384 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:8080/api/v1/auth/refresh-token - 200 null application/json; charset=utf-8 33.3196ms
2025-11-16 17:57:03.884 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:8080/api/v1/auth/refresh-token - null 0
2025-11-16 17:57:03.885 +03:00 [INF] CORS policy execution successful.
2025-11-16 17:57:03.903 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 17:57:03.903 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication)'
2025-11-16 17:57:03.903 +03:00 [INF] Route matched with {action = "RefreshToken", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.user.AuthResponse] RefreshToken() on controller MappyApplication.Controllers.AuthController (MappyApplication).
2025-11-16 17:57:03.904 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__refreshToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`RefreshToken` = @__refreshToken_0
LIMIT 2
2025-11-16 17:57:03.905 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`FirstName`, `a`.`LastName`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`
FROM `AspNetUsers` AS `a`
WHERE `a`.`Id` = @__p_0
LIMIT 1
2025-11-16 17:57:03.907 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']

        UPDATE TOKENS
        SET Revoked = true, Expired = true
        WHERE UserId = @p0
          AND DeviceId = @p1
          AND Revoked = false
          AND Expired = false
2025-11-16 17:57:03.908 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a0`.`Name`
FROM `AspNetUserRoles` AS `a`
INNER JOIN `AspNetRoles` AS `a0` ON `a`.`RoleId` = `a0`.`Id`
WHERE `a`.`UserId` = @__userId_0
2025-11-16 17:57:03.911 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ClaimType`, `a`.`ClaimValue`, `a`.`UserId`
FROM `AspNetUserClaims` AS `a`
WHERE `a`.`UserId` = @__user_Id_0
2025-11-16 17:57:03.912 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a0`.`Name`
FROM `AspNetUserRoles` AS `a`
INNER JOIN `AspNetRoles` AS `a0` ON `a`.`RoleId` = `a0`.`Id`
WHERE `a`.`UserId` = @__userId_0
2025-11-16 17:57:03.912 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ClaimType`, `a`.`ClaimValue`, `a`.`UserId`
FROM `AspNetUserClaims` AS `a`
WHERE `a`.`UserId` = @__user_Id_0
2025-11-16 17:57:03.917 +03:00 [INF] Executed DbCommand (4ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (DbType = DateTime), @p2='?' (Size = 4000), @p3='?' (DbType = Boolean), @p4='?' (Size = 4000), @p5='?' (DbType = Boolean), @p6='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO `Tokens` (`AccessToken`, `CreatedAt`, `DeviceId`, `Expired`, `RefreshToken`, `Revoked`, `UserId`)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6);
SELECT `Id`
FROM `Tokens`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();
2025-11-16 17:57:03.918 +03:00 [INF] Added Token MappyApplication.Data.Token
2025-11-16 17:57:03.920 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessFailedCount`, `t`.`ConcurrencyStamp`, `t`.`Email`, `t`.`EmailConfirmed`, `t`.`FirstName`, `t`.`LastName`, `t`.`LockoutEnabled`, `t`.`LockoutEnd`, `t`.`NormalizedEmail`, `t`.`NormalizedUserName`, `t`.`PasswordHash`, `t`.`PhoneNumber`, `t`.`PhoneNumberConfirmed`, `t`.`SecurityStamp`, `t`.`TwoFactorEnabled`, `t`.`UserName`, `w`.`Id`, `w`.`Cadence`, `w`.`CityName`, `w`.`Coords`, `w`.`Date`, `w`.`Distance`, `w`.`Duration`, `w`.`Emoji`, `w`.`Pace`, `w`.`Type`, `w`.`UserId`, `c`.`Id`, `c`.`CityName`, `c`.`Country`, `c`.`Date`, `c`.`Emoji`, `c`.`Lat`, `c`.`Lng`, `c`.`Notes`, `c`.`UserId`
FROM (
    SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`FirstName`, `a`.`LastName`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`
    FROM `AspNetUsers` AS `a`
    WHERE `a`.`Id` = @__user_Id_0
    LIMIT 2
) AS `t`
LEFT JOIN `Workouts` AS `w` ON `t`.`Id` = `w`.`UserId`
LEFT JOIN `Cities` AS `c` ON `t`.`Id` = `c`.`UserId`
ORDER BY `t`.`Id`, `w`.`Id`
2025-11-16 17:57:03.920 +03:00 [INF] Executing ObjectResult, writing value of type 'MappyApplication.Models.user.AuthResponse'.
2025-11-16 17:57:03.920 +03:00 [INF] Executed action MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication) in 16.941ms
2025-11-16 17:57:03.920 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication)'
2025-11-16 17:57:03.920 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:8080/api/v1/auth/refresh-token - 200 null application/json; charset=utf-8 35.4978ms
2025-11-16 17:57:18.993 +03:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:8080/api/v1/auth/logout - null null
2025-11-16 17:57:18.995 +03:00 [INF] CORS policy execution successful.
2025-11-16 17:57:18.996 +03:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:8080/api/v1/auth/logout - 204 null null 3.5657ms
2025-11-16 17:57:18.997 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:8080/api/v1/auth/logout - null null
2025-11-16 17:57:18.998 +03:00 [INF] CORS policy execution successful.
2025-11-16 17:57:19.050 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 17:57:19.053 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.AuthController.Logout (MappyApplication)'
2025-11-16 17:57:19.054 +03:00 [INF] Route matched with {action = "Logout", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Logout() on controller MappyApplication.Controllers.AuthController (MappyApplication).
2025-11-16 17:57:19.057 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__refreshToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`RefreshToken` = @__refreshToken_0
LIMIT 2
2025-11-16 17:57:19.061 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']

        UPDATE TOKENS
        SET Revoked = true, Expired = true
        WHERE UserId = @p0
          AND DeviceId = @p1
          AND Revoked = false
          AND Expired = false
2025-11-16 17:57:19.061 +03:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType0`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-11-16 17:57:19.062 +03:00 [INF] Executed action MappyApplication.Controllers.AuthController.Logout (MappyApplication) in 7.503ms
2025-11-16 17:57:19.062 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.AuthController.Logout (MappyApplication)'
2025-11-16 17:57:19.062 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:8080/api/v1/auth/logout - 200 null application/json; charset=utf-8 64.3634ms
2025-11-16 18:06:12.948 +03:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:8080/api/v1/auth/login - null null
2025-11-16 18:06:12.950 +03:00 [INF] CORS policy execution successful.
2025-11-16 18:06:12.951 +03:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:8080/api/v1/auth/login - 204 null null 3.3435ms
2025-11-16 18:06:12.953 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:8080/api/v1/auth/login - application/json 51
2025-11-16 18:06:12.954 +03:00 [INF] CORS policy execution successful.
2025-11-16 18:06:12.956 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.AuthController.Login (MappyApplication)'
2025-11-16 18:06:12.959 +03:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.user.AuthResponse] Login(MappyApplication.Models.user.AuthLogin) on controller MappyApplication.Controllers.AuthController (MappyApplication).
2025-11-16 18:06:13.091 +03:00 [INF] Executed DbCommand (28ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`FirstName`, `a`.`LastName`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`
FROM `AspNetUsers` AS `a`
WHERE `a`.`NormalizedEmail` = @__normalizedEmail_0
LIMIT 2
2025-11-16 18:06:13.151 +03:00 [INF] Executed DbCommand (4ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']

        UPDATE TOKENS
        SET Revoked = true, Expired = true
        WHERE UserId = @p0
          AND DeviceId = @p1
          AND Revoked = false
          AND Expired = false
2025-11-16 18:06:13.154 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a0`.`Name`
FROM `AspNetUserRoles` AS `a`
INNER JOIN `AspNetRoles` AS `a0` ON `a`.`RoleId` = `a0`.`Id`
WHERE `a`.`UserId` = @__userId_0
2025-11-16 18:06:13.155 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ClaimType`, `a`.`ClaimValue`, `a`.`UserId`
FROM `AspNetUserClaims` AS `a`
WHERE `a`.`UserId` = @__user_Id_0
2025-11-16 18:06:13.157 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a0`.`Name`
FROM `AspNetUserRoles` AS `a`
INNER JOIN `AspNetRoles` AS `a0` ON `a`.`RoleId` = `a0`.`Id`
WHERE `a`.`UserId` = @__userId_0
2025-11-16 18:06:13.158 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ClaimType`, `a`.`ClaimValue`, `a`.`UserId`
FROM `AspNetUserClaims` AS `a`
WHERE `a`.`UserId` = @__user_Id_0
2025-11-16 18:06:13.171 +03:00 [INF] Executed DbCommand (10ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (DbType = DateTime), @p2='?' (Size = 4000), @p3='?' (DbType = Boolean), @p4='?' (Size = 4000), @p5='?' (DbType = Boolean), @p6='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO `Tokens` (`AccessToken`, `CreatedAt`, `DeviceId`, `Expired`, `RefreshToken`, `Revoked`, `UserId`)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6);
SELECT `Id`
FROM `Tokens`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();
2025-11-16 18:06:13.174 +03:00 [INF] Added Token MappyApplication.Data.Token
2025-11-16 18:06:13.182 +03:00 [INF] Executed DbCommand (8ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessFailedCount`, `t`.`ConcurrencyStamp`, `t`.`Email`, `t`.`EmailConfirmed`, `t`.`FirstName`, `t`.`LastName`, `t`.`LockoutEnabled`, `t`.`LockoutEnd`, `t`.`NormalizedEmail`, `t`.`NormalizedUserName`, `t`.`PasswordHash`, `t`.`PhoneNumber`, `t`.`PhoneNumberConfirmed`, `t`.`SecurityStamp`, `t`.`TwoFactorEnabled`, `t`.`UserName`, `w`.`Id`, `w`.`Cadence`, `w`.`CityName`, `w`.`Coords`, `w`.`Date`, `w`.`Distance`, `w`.`Duration`, `w`.`Emoji`, `w`.`Pace`, `w`.`Type`, `w`.`UserId`, `c`.`Id`, `c`.`CityName`, `c`.`Country`, `c`.`Date`, `c`.`Emoji`, `c`.`Lat`, `c`.`Lng`, `c`.`Notes`, `c`.`UserId`
FROM (
    SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`FirstName`, `a`.`LastName`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`
    FROM `AspNetUsers` AS `a`
    WHERE `a`.`Id` = @__user_Id_0
    LIMIT 2
) AS `t`
LEFT JOIN `Workouts` AS `w` ON `t`.`Id` = `w`.`UserId`
LEFT JOIN `Cities` AS `c` ON `t`.`Id` = `c`.`UserId`
ORDER BY `t`.`Id`, `w`.`Id`
2025-11-16 18:06:13.183 +03:00 [INF] Executing ObjectResult, writing value of type 'MappyApplication.Models.user.AuthResponse'.
2025-11-16 18:06:13.183 +03:00 [INF] Executed action MappyApplication.Controllers.AuthController.Login (MappyApplication) in 223.6192ms
2025-11-16 18:06:13.183 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.AuthController.Login (MappyApplication)'
2025-11-16 18:06:13.183 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:8080/api/v1/auth/login - 200 null application/json; charset=utf-8 230.1627ms
2025-11-16 18:06:23.682 +03:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:8080/api/v1/auth/logout - null null
2025-11-16 18:06:23.684 +03:00 [INF] CORS policy execution successful.
2025-11-16 18:06:23.684 +03:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:8080/api/v1/auth/logout - 204 null null 3.6561ms
2025-11-16 18:06:23.686 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:8080/api/v1/auth/logout - null null
2025-11-16 18:06:23.687 +03:00 [INF] CORS policy execution successful.
2025-11-16 18:06:23.719 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 18:06:23.720 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.AuthController.Logout (MappyApplication)'
2025-11-16 18:06:23.720 +03:00 [INF] Route matched with {action = "Logout", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Logout() on controller MappyApplication.Controllers.AuthController (MappyApplication).
2025-11-16 18:06:23.723 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__refreshToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`RefreshToken` = @__refreshToken_0
LIMIT 2
2025-11-16 18:06:23.727 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']

        UPDATE TOKENS
        SET Revoked = true, Expired = true
        WHERE UserId = @p0
          AND DeviceId = @p1
          AND Revoked = false
          AND Expired = false
2025-11-16 18:06:23.727 +03:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType0`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-11-16 18:06:23.728 +03:00 [INF] Executed action MappyApplication.Controllers.AuthController.Logout (MappyApplication) in 7.9677ms
2025-11-16 18:06:23.728 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.AuthController.Logout (MappyApplication)'
2025-11-16 18:06:23.728 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:8080/api/v1/auth/logout - 200 null application/json; charset=utf-8 41.8782ms
2025-11-16 18:06:30.534 +03:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:8080/api/v1/auth/login - null null
2025-11-16 18:06:30.535 +03:00 [INF] CORS policy execution successful.
2025-11-16 18:06:30.535 +03:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:8080/api/v1/auth/login - 204 null null 0.2538ms
2025-11-16 18:06:30.536 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:8080/api/v1/auth/login - application/json 51
2025-11-16 18:06:30.536 +03:00 [INF] CORS policy execution successful.
2025-11-16 18:06:30.536 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.AuthController.Login (MappyApplication)'
2025-11-16 18:06:30.536 +03:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.user.AuthResponse] Login(MappyApplication.Models.user.AuthLogin) on controller MappyApplication.Controllers.AuthController (MappyApplication).
2025-11-16 18:06:30.551 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`FirstName`, `a`.`LastName`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`
FROM `AspNetUsers` AS `a`
WHERE `a`.`NormalizedEmail` = @__normalizedEmail_0
LIMIT 2
2025-11-16 18:06:30.589 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']

        UPDATE TOKENS
        SET Revoked = true, Expired = true
        WHERE UserId = @p0
          AND DeviceId = @p1
          AND Revoked = false
          AND Expired = false
2025-11-16 18:06:30.590 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a0`.`Name`
FROM `AspNetUserRoles` AS `a`
INNER JOIN `AspNetRoles` AS `a0` ON `a`.`RoleId` = `a0`.`Id`
WHERE `a`.`UserId` = @__userId_0
2025-11-16 18:06:30.592 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ClaimType`, `a`.`ClaimValue`, `a`.`UserId`
FROM `AspNetUserClaims` AS `a`
WHERE `a`.`UserId` = @__user_Id_0
2025-11-16 18:06:30.592 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a0`.`Name`
FROM `AspNetUserRoles` AS `a`
INNER JOIN `AspNetRoles` AS `a0` ON `a`.`RoleId` = `a0`.`Id`
WHERE `a`.`UserId` = @__userId_0
2025-11-16 18:06:30.593 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ClaimType`, `a`.`ClaimValue`, `a`.`UserId`
FROM `AspNetUserClaims` AS `a`
WHERE `a`.`UserId` = @__user_Id_0
2025-11-16 18:06:30.595 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (DbType = DateTime), @p2='?' (Size = 4000), @p3='?' (DbType = Boolean), @p4='?' (Size = 4000), @p5='?' (DbType = Boolean), @p6='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO `Tokens` (`AccessToken`, `CreatedAt`, `DeviceId`, `Expired`, `RefreshToken`, `Revoked`, `UserId`)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6);
SELECT `Id`
FROM `Tokens`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();
2025-11-16 18:06:30.595 +03:00 [INF] Added Token MappyApplication.Data.Token
2025-11-16 18:06:30.596 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessFailedCount`, `t`.`ConcurrencyStamp`, `t`.`Email`, `t`.`EmailConfirmed`, `t`.`FirstName`, `t`.`LastName`, `t`.`LockoutEnabled`, `t`.`LockoutEnd`, `t`.`NormalizedEmail`, `t`.`NormalizedUserName`, `t`.`PasswordHash`, `t`.`PhoneNumber`, `t`.`PhoneNumberConfirmed`, `t`.`SecurityStamp`, `t`.`TwoFactorEnabled`, `t`.`UserName`, `w`.`Id`, `w`.`Cadence`, `w`.`CityName`, `w`.`Coords`, `w`.`Date`, `w`.`Distance`, `w`.`Duration`, `w`.`Emoji`, `w`.`Pace`, `w`.`Type`, `w`.`UserId`, `c`.`Id`, `c`.`CityName`, `c`.`Country`, `c`.`Date`, `c`.`Emoji`, `c`.`Lat`, `c`.`Lng`, `c`.`Notes`, `c`.`UserId`
FROM (
    SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`FirstName`, `a`.`LastName`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`
    FROM `AspNetUsers` AS `a`
    WHERE `a`.`Id` = @__user_Id_0
    LIMIT 2
) AS `t`
LEFT JOIN `Workouts` AS `w` ON `t`.`Id` = `w`.`UserId`
LEFT JOIN `Cities` AS `c` ON `t`.`Id` = `c`.`UserId`
ORDER BY `t`.`Id`, `w`.`Id`
2025-11-16 18:06:30.596 +03:00 [INF] Executing ObjectResult, writing value of type 'MappyApplication.Models.user.AuthResponse'.
2025-11-16 18:06:30.596 +03:00 [INF] Executed action MappyApplication.Controllers.AuthController.Login (MappyApplication) in 60.1916ms
2025-11-16 18:06:30.597 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.AuthController.Login (MappyApplication)'
2025-11-16 18:06:30.597 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:8080/api/v1/auth/login - 200 null application/json; charset=utf-8 60.7556ms
2025-11-16 18:07:24.557 +03:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:8080/api/v1/auth/refresh-token - null null
2025-11-16 18:07:24.558 +03:00 [INF] CORS policy execution successful.
2025-11-16 18:07:24.558 +03:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:8080/api/v1/auth/refresh-token - 204 null null 1.5624ms
2025-11-16 18:07:24.563 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:8080/api/v1/auth/refresh-token - null 0
2025-11-16 18:07:24.563 +03:00 [INF] CORS policy execution successful.
2025-11-16 18:07:24.589 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 18:07:24.590 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication)'
2025-11-16 18:07:24.591 +03:00 [INF] Route matched with {action = "RefreshToken", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.user.AuthResponse] RefreshToken() on controller MappyApplication.Controllers.AuthController (MappyApplication).
2025-11-16 18:07:24.593 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__refreshToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`RefreshToken` = @__refreshToken_0
LIMIT 2
2025-11-16 18:07:24.599 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`FirstName`, `a`.`LastName`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`
FROM `AspNetUsers` AS `a`
WHERE `a`.`Id` = @__p_0
LIMIT 1
2025-11-16 18:07:24.604 +03:00 [INF] Executed DbCommand (4ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']

        UPDATE TOKENS
        SET Revoked = true, Expired = true
        WHERE UserId = @p0
          AND DeviceId = @p1
          AND Revoked = false
          AND Expired = false
2025-11-16 18:07:24.606 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a0`.`Name`
FROM `AspNetUserRoles` AS `a`
INNER JOIN `AspNetRoles` AS `a0` ON `a`.`RoleId` = `a0`.`Id`
WHERE `a`.`UserId` = @__userId_0
2025-11-16 18:07:24.606 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ClaimType`, `a`.`ClaimValue`, `a`.`UserId`
FROM `AspNetUserClaims` AS `a`
WHERE `a`.`UserId` = @__user_Id_0
2025-11-16 18:07:24.607 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a0`.`Name`
FROM `AspNetUserRoles` AS `a`
INNER JOIN `AspNetRoles` AS `a0` ON `a`.`RoleId` = `a0`.`Id`
WHERE `a`.`UserId` = @__userId_0
2025-11-16 18:07:24.607 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ClaimType`, `a`.`ClaimValue`, `a`.`UserId`
FROM `AspNetUserClaims` AS `a`
WHERE `a`.`UserId` = @__user_Id_0
2025-11-16 18:07:24.612 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (DbType = DateTime), @p2='?' (Size = 4000), @p3='?' (DbType = Boolean), @p4='?' (Size = 4000), @p5='?' (DbType = Boolean), @p6='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO `Tokens` (`AccessToken`, `CreatedAt`, `DeviceId`, `Expired`, `RefreshToken`, `Revoked`, `UserId`)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6);
SELECT `Id`
FROM `Tokens`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();
2025-11-16 18:07:24.613 +03:00 [INF] Added Token MappyApplication.Data.Token
2025-11-16 18:07:24.614 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessFailedCount`, `t`.`ConcurrencyStamp`, `t`.`Email`, `t`.`EmailConfirmed`, `t`.`FirstName`, `t`.`LastName`, `t`.`LockoutEnabled`, `t`.`LockoutEnd`, `t`.`NormalizedEmail`, `t`.`NormalizedUserName`, `t`.`PasswordHash`, `t`.`PhoneNumber`, `t`.`PhoneNumberConfirmed`, `t`.`SecurityStamp`, `t`.`TwoFactorEnabled`, `t`.`UserName`, `w`.`Id`, `w`.`Cadence`, `w`.`CityName`, `w`.`Coords`, `w`.`Date`, `w`.`Distance`, `w`.`Duration`, `w`.`Emoji`, `w`.`Pace`, `w`.`Type`, `w`.`UserId`, `c`.`Id`, `c`.`CityName`, `c`.`Country`, `c`.`Date`, `c`.`Emoji`, `c`.`Lat`, `c`.`Lng`, `c`.`Notes`, `c`.`UserId`
FROM (
    SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`FirstName`, `a`.`LastName`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`
    FROM `AspNetUsers` AS `a`
    WHERE `a`.`Id` = @__user_Id_0
    LIMIT 2
) AS `t`
LEFT JOIN `Workouts` AS `w` ON `t`.`Id` = `w`.`UserId`
LEFT JOIN `Cities` AS `c` ON `t`.`Id` = `c`.`UserId`
ORDER BY `t`.`Id`, `w`.`Id`
2025-11-16 18:07:24.615 +03:00 [INF] Executing ObjectResult, writing value of type 'MappyApplication.Models.user.AuthResponse'.
2025-11-16 18:07:24.615 +03:00 [INF] Executed action MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication) in 24.1898ms
2025-11-16 18:07:24.615 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication)'
2025-11-16 18:07:24.615 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:8080/api/v1/auth/refresh-token - 200 null application/json; charset=utf-8 51.6768ms
2025-11-16 18:07:31.928 +03:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:8080/api/v1/auth/refresh-token - null null
2025-11-16 18:07:31.928 +03:00 [INF] CORS policy execution successful.
2025-11-16 18:07:31.928 +03:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:8080/api/v1/auth/refresh-token - 204 null null 0.3992ms
2025-11-16 18:07:31.929 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:8080/api/v1/auth/refresh-token - null 0
2025-11-16 18:07:31.929 +03:00 [INF] CORS policy execution successful.
2025-11-16 18:07:31.948 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 18:07:31.948 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication)'
2025-11-16 18:07:31.948 +03:00 [INF] Route matched with {action = "RefreshToken", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.user.AuthResponse] RefreshToken() on controller MappyApplication.Controllers.AuthController (MappyApplication).
2025-11-16 18:07:31.949 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__refreshToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`RefreshToken` = @__refreshToken_0
LIMIT 2
2025-11-16 18:07:31.950 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`FirstName`, `a`.`LastName`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`
FROM `AspNetUsers` AS `a`
WHERE `a`.`Id` = @__p_0
LIMIT 1
2025-11-16 18:07:31.953 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']

        UPDATE TOKENS
        SET Revoked = true, Expired = true
        WHERE UserId = @p0
          AND DeviceId = @p1
          AND Revoked = false
          AND Expired = false
2025-11-16 18:07:31.954 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a0`.`Name`
FROM `AspNetUserRoles` AS `a`
INNER JOIN `AspNetRoles` AS `a0` ON `a`.`RoleId` = `a0`.`Id`
WHERE `a`.`UserId` = @__userId_0
2025-11-16 18:07:31.955 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ClaimType`, `a`.`ClaimValue`, `a`.`UserId`
FROM `AspNetUserClaims` AS `a`
WHERE `a`.`UserId` = @__user_Id_0
2025-11-16 18:07:31.956 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a0`.`Name`
FROM `AspNetUserRoles` AS `a`
INNER JOIN `AspNetRoles` AS `a0` ON `a`.`RoleId` = `a0`.`Id`
WHERE `a`.`UserId` = @__userId_0
2025-11-16 18:07:31.956 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ClaimType`, `a`.`ClaimValue`, `a`.`UserId`
FROM `AspNetUserClaims` AS `a`
WHERE `a`.`UserId` = @__user_Id_0
2025-11-16 18:07:31.959 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (DbType = DateTime), @p2='?' (Size = 4000), @p3='?' (DbType = Boolean), @p4='?' (Size = 4000), @p5='?' (DbType = Boolean), @p6='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO `Tokens` (`AccessToken`, `CreatedAt`, `DeviceId`, `Expired`, `RefreshToken`, `Revoked`, `UserId`)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6);
SELECT `Id`
FROM `Tokens`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();
2025-11-16 18:07:31.959 +03:00 [INF] Added Token MappyApplication.Data.Token
2025-11-16 18:07:31.960 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessFailedCount`, `t`.`ConcurrencyStamp`, `t`.`Email`, `t`.`EmailConfirmed`, `t`.`FirstName`, `t`.`LastName`, `t`.`LockoutEnabled`, `t`.`LockoutEnd`, `t`.`NormalizedEmail`, `t`.`NormalizedUserName`, `t`.`PasswordHash`, `t`.`PhoneNumber`, `t`.`PhoneNumberConfirmed`, `t`.`SecurityStamp`, `t`.`TwoFactorEnabled`, `t`.`UserName`, `w`.`Id`, `w`.`Cadence`, `w`.`CityName`, `w`.`Coords`, `w`.`Date`, `w`.`Distance`, `w`.`Duration`, `w`.`Emoji`, `w`.`Pace`, `w`.`Type`, `w`.`UserId`, `c`.`Id`, `c`.`CityName`, `c`.`Country`, `c`.`Date`, `c`.`Emoji`, `c`.`Lat`, `c`.`Lng`, `c`.`Notes`, `c`.`UserId`
FROM (
    SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`FirstName`, `a`.`LastName`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`
    FROM `AspNetUsers` AS `a`
    WHERE `a`.`Id` = @__user_Id_0
    LIMIT 2
) AS `t`
LEFT JOIN `Workouts` AS `w` ON `t`.`Id` = `w`.`UserId`
LEFT JOIN `Cities` AS `c` ON `t`.`Id` = `c`.`UserId`
ORDER BY `t`.`Id`, `w`.`Id`
2025-11-16 18:07:31.960 +03:00 [INF] Executing ObjectResult, writing value of type 'MappyApplication.Models.user.AuthResponse'.
2025-11-16 18:07:31.960 +03:00 [INF] Executed action MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication) in 12.173ms
2025-11-16 18:07:31.960 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication)'
2025-11-16 18:07:31.960 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:8080/api/v1/auth/refresh-token - 200 null application/json; charset=utf-8 31.025ms
2025-11-16 18:07:33.047 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:8080/api/v1/auth/refresh-token - null 0
2025-11-16 18:07:33.047 +03:00 [INF] CORS policy execution successful.
2025-11-16 18:07:33.063 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 18:07:33.063 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication)'
2025-11-16 18:07:33.063 +03:00 [INF] Route matched with {action = "RefreshToken", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.user.AuthResponse] RefreshToken() on controller MappyApplication.Controllers.AuthController (MappyApplication).
2025-11-16 18:07:33.064 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__refreshToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`RefreshToken` = @__refreshToken_0
LIMIT 2
2025-11-16 18:07:33.066 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`FirstName`, `a`.`LastName`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`
FROM `AspNetUsers` AS `a`
WHERE `a`.`Id` = @__p_0
LIMIT 1
2025-11-16 18:07:33.068 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']

        UPDATE TOKENS
        SET Revoked = true, Expired = true
        WHERE UserId = @p0
          AND DeviceId = @p1
          AND Revoked = false
          AND Expired = false
2025-11-16 18:07:33.069 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a0`.`Name`
FROM `AspNetUserRoles` AS `a`
INNER JOIN `AspNetRoles` AS `a0` ON `a`.`RoleId` = `a0`.`Id`
WHERE `a`.`UserId` = @__userId_0
2025-11-16 18:07:33.070 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ClaimType`, `a`.`ClaimValue`, `a`.`UserId`
FROM `AspNetUserClaims` AS `a`
WHERE `a`.`UserId` = @__user_Id_0
2025-11-16 18:07:33.071 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a0`.`Name`
FROM `AspNetUserRoles` AS `a`
INNER JOIN `AspNetRoles` AS `a0` ON `a`.`RoleId` = `a0`.`Id`
WHERE `a`.`UserId` = @__userId_0
2025-11-16 18:07:33.072 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ClaimType`, `a`.`ClaimValue`, `a`.`UserId`
FROM `AspNetUserClaims` AS `a`
WHERE `a`.`UserId` = @__user_Id_0
2025-11-16 18:07:33.074 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (DbType = DateTime), @p2='?' (Size = 4000), @p3='?' (DbType = Boolean), @p4='?' (Size = 4000), @p5='?' (DbType = Boolean), @p6='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO `Tokens` (`AccessToken`, `CreatedAt`, `DeviceId`, `Expired`, `RefreshToken`, `Revoked`, `UserId`)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6);
SELECT `Id`
FROM `Tokens`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();
2025-11-16 18:07:33.074 +03:00 [INF] Added Token MappyApplication.Data.Token
2025-11-16 18:07:33.075 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessFailedCount`, `t`.`ConcurrencyStamp`, `t`.`Email`, `t`.`EmailConfirmed`, `t`.`FirstName`, `t`.`LastName`, `t`.`LockoutEnabled`, `t`.`LockoutEnd`, `t`.`NormalizedEmail`, `t`.`NormalizedUserName`, `t`.`PasswordHash`, `t`.`PhoneNumber`, `t`.`PhoneNumberConfirmed`, `t`.`SecurityStamp`, `t`.`TwoFactorEnabled`, `t`.`UserName`, `w`.`Id`, `w`.`Cadence`, `w`.`CityName`, `w`.`Coords`, `w`.`Date`, `w`.`Distance`, `w`.`Duration`, `w`.`Emoji`, `w`.`Pace`, `w`.`Type`, `w`.`UserId`, `c`.`Id`, `c`.`CityName`, `c`.`Country`, `c`.`Date`, `c`.`Emoji`, `c`.`Lat`, `c`.`Lng`, `c`.`Notes`, `c`.`UserId`
FROM (
    SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`FirstName`, `a`.`LastName`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`
    FROM `AspNetUsers` AS `a`
    WHERE `a`.`Id` = @__user_Id_0
    LIMIT 2
) AS `t`
LEFT JOIN `Workouts` AS `w` ON `t`.`Id` = `w`.`UserId`
LEFT JOIN `Cities` AS `c` ON `t`.`Id` = `c`.`UserId`
ORDER BY `t`.`Id`, `w`.`Id`
2025-11-16 18:07:33.075 +03:00 [INF] Executing ObjectResult, writing value of type 'MappyApplication.Models.user.AuthResponse'.
2025-11-16 18:07:33.076 +03:00 [INF] Executed action MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication) in 12.3508ms
2025-11-16 18:07:33.076 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication)'
2025-11-16 18:07:33.076 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:8080/api/v1/auth/refresh-token - 200 null application/json; charset=utf-8 28.315ms
2025-11-16 18:07:35.447 +03:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:8080/api/v1/auth/logout - null null
2025-11-16 18:07:35.447 +03:00 [INF] CORS policy execution successful.
2025-11-16 18:07:35.449 +03:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:8080/api/v1/auth/logout - 204 null null 2.1943ms
2025-11-16 18:07:35.451 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:8080/api/v1/auth/logout - null null
2025-11-16 18:07:35.454 +03:00 [INF] CORS policy execution successful.
2025-11-16 18:07:35.475 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 18:07:35.475 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.AuthController.Logout (MappyApplication)'
2025-11-16 18:07:35.475 +03:00 [INF] Route matched with {action = "Logout", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Logout() on controller MappyApplication.Controllers.AuthController (MappyApplication).
2025-11-16 18:07:35.477 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__refreshToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`RefreshToken` = @__refreshToken_0
LIMIT 2
2025-11-16 18:07:35.480 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']

        UPDATE TOKENS
        SET Revoked = true, Expired = true
        WHERE UserId = @p0
          AND DeviceId = @p1
          AND Revoked = false
          AND Expired = false
2025-11-16 18:07:35.480 +03:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType0`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-11-16 18:07:35.480 +03:00 [INF] Executed action MappyApplication.Controllers.AuthController.Logout (MappyApplication) in 5.001ms
2025-11-16 18:07:35.480 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.AuthController.Logout (MappyApplication)'
2025-11-16 18:07:35.480 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:8080/api/v1/auth/logout - 200 null application/json; charset=utf-8 29.4072ms
2025-11-16 18:07:41.771 +03:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:8080/api/v1/auth/login - null null
2025-11-16 18:07:41.771 +03:00 [INF] CORS policy execution successful.
2025-11-16 18:07:41.771 +03:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:8080/api/v1/auth/login - 204 null null 0.4801ms
2025-11-16 18:07:41.773 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:8080/api/v1/auth/login - application/json 51
2025-11-16 18:07:41.773 +03:00 [INF] CORS policy execution successful.
2025-11-16 18:07:41.773 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.AuthController.Login (MappyApplication)'
2025-11-16 18:07:41.773 +03:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.user.AuthResponse] Login(MappyApplication.Models.user.AuthLogin) on controller MappyApplication.Controllers.AuthController (MappyApplication).
2025-11-16 18:07:41.793 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`FirstName`, `a`.`LastName`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`
FROM `AspNetUsers` AS `a`
WHERE `a`.`NormalizedEmail` = @__normalizedEmail_0
LIMIT 2
2025-11-16 18:07:41.853 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']

        UPDATE TOKENS
        SET Revoked = true, Expired = true
        WHERE UserId = @p0
          AND DeviceId = @p1
          AND Revoked = false
          AND Expired = false
2025-11-16 18:07:41.854 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a0`.`Name`
FROM `AspNetUserRoles` AS `a`
INNER JOIN `AspNetRoles` AS `a0` ON `a`.`RoleId` = `a0`.`Id`
WHERE `a`.`UserId` = @__userId_0
2025-11-16 18:07:41.854 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ClaimType`, `a`.`ClaimValue`, `a`.`UserId`
FROM `AspNetUserClaims` AS `a`
WHERE `a`.`UserId` = @__user_Id_0
2025-11-16 18:07:41.856 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a0`.`Name`
FROM `AspNetUserRoles` AS `a`
INNER JOIN `AspNetRoles` AS `a0` ON `a`.`RoleId` = `a0`.`Id`
WHERE `a`.`UserId` = @__userId_0
2025-11-16 18:07:41.856 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ClaimType`, `a`.`ClaimValue`, `a`.`UserId`
FROM `AspNetUserClaims` AS `a`
WHERE `a`.`UserId` = @__user_Id_0
2025-11-16 18:07:41.857 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (DbType = DateTime), @p2='?' (Size = 4000), @p3='?' (DbType = Boolean), @p4='?' (Size = 4000), @p5='?' (DbType = Boolean), @p6='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO `Tokens` (`AccessToken`, `CreatedAt`, `DeviceId`, `Expired`, `RefreshToken`, `Revoked`, `UserId`)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6);
SELECT `Id`
FROM `Tokens`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();
2025-11-16 18:07:41.858 +03:00 [INF] Added Token MappyApplication.Data.Token
2025-11-16 18:07:41.859 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessFailedCount`, `t`.`ConcurrencyStamp`, `t`.`Email`, `t`.`EmailConfirmed`, `t`.`FirstName`, `t`.`LastName`, `t`.`LockoutEnabled`, `t`.`LockoutEnd`, `t`.`NormalizedEmail`, `t`.`NormalizedUserName`, `t`.`PasswordHash`, `t`.`PhoneNumber`, `t`.`PhoneNumberConfirmed`, `t`.`SecurityStamp`, `t`.`TwoFactorEnabled`, `t`.`UserName`, `w`.`Id`, `w`.`Cadence`, `w`.`CityName`, `w`.`Coords`, `w`.`Date`, `w`.`Distance`, `w`.`Duration`, `w`.`Emoji`, `w`.`Pace`, `w`.`Type`, `w`.`UserId`, `c`.`Id`, `c`.`CityName`, `c`.`Country`, `c`.`Date`, `c`.`Emoji`, `c`.`Lat`, `c`.`Lng`, `c`.`Notes`, `c`.`UserId`
FROM (
    SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`FirstName`, `a`.`LastName`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`
    FROM `AspNetUsers` AS `a`
    WHERE `a`.`Id` = @__user_Id_0
    LIMIT 2
) AS `t`
LEFT JOIN `Workouts` AS `w` ON `t`.`Id` = `w`.`UserId`
LEFT JOIN `Cities` AS `c` ON `t`.`Id` = `c`.`UserId`
ORDER BY `t`.`Id`, `w`.`Id`
2025-11-16 18:07:41.859 +03:00 [INF] Executing ObjectResult, writing value of type 'MappyApplication.Models.user.AuthResponse'.
2025-11-16 18:07:41.859 +03:00 [INF] Executed action MappyApplication.Controllers.AuthController.Login (MappyApplication) in 86.2825ms
2025-11-16 18:07:41.859 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.AuthController.Login (MappyApplication)'
2025-11-16 18:07:41.859 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:8080/api/v1/auth/login - 200 null application/json; charset=utf-8 86.7815ms
2025-11-16 18:07:45.393 +03:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:8080/api/v1/auth/logout - null null
2025-11-16 18:07:45.393 +03:00 [INF] CORS policy execution successful.
2025-11-16 18:07:45.395 +03:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:8080/api/v1/auth/logout - 204 null null 2.7234ms
2025-11-16 18:07:45.399 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:8080/api/v1/auth/logout - null null
2025-11-16 18:07:45.400 +03:00 [INF] CORS policy execution successful.
2025-11-16 18:07:45.420 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 18:07:45.420 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.AuthController.Logout (MappyApplication)'
2025-11-16 18:07:45.420 +03:00 [INF] Route matched with {action = "Logout", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Logout() on controller MappyApplication.Controllers.AuthController (MappyApplication).
2025-11-16 18:07:45.422 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__refreshToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`RefreshToken` = @__refreshToken_0
LIMIT 2
2025-11-16 18:07:45.424 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']

        UPDATE TOKENS
        SET Revoked = true, Expired = true
        WHERE UserId = @p0
          AND DeviceId = @p1
          AND Revoked = false
          AND Expired = false
2025-11-16 18:07:45.424 +03:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType0`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-11-16 18:07:45.424 +03:00 [INF] Executed action MappyApplication.Controllers.AuthController.Logout (MappyApplication) in 3.7056ms
2025-11-16 18:07:45.424 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.AuthController.Logout (MappyApplication)'
2025-11-16 18:07:45.424 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:8080/api/v1/auth/logout - 200 null application/json; charset=utf-8 25.2029ms
2025-11-16 18:07:53.537 +03:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:8080/api/v1/auth/login - null null
2025-11-16 18:07:53.538 +03:00 [INF] CORS policy execution successful.
2025-11-16 18:07:53.538 +03:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:8080/api/v1/auth/login - 204 null null 0.6542ms
2025-11-16 18:07:53.540 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:8080/api/v1/auth/login - application/json 51
2025-11-16 18:07:53.540 +03:00 [INF] CORS policy execution successful.
2025-11-16 18:07:53.540 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.AuthController.Login (MappyApplication)'
2025-11-16 18:07:53.540 +03:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.user.AuthResponse] Login(MappyApplication.Models.user.AuthLogin) on controller MappyApplication.Controllers.AuthController (MappyApplication).
2025-11-16 18:07:53.569 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`FirstName`, `a`.`LastName`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`
FROM `AspNetUsers` AS `a`
WHERE `a`.`NormalizedEmail` = @__normalizedEmail_0
LIMIT 2
2025-11-16 18:07:53.624 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']

        UPDATE TOKENS
        SET Revoked = true, Expired = true
        WHERE UserId = @p0
          AND DeviceId = @p1
          AND Revoked = false
          AND Expired = false
2025-11-16 18:07:53.625 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a0`.`Name`
FROM `AspNetUserRoles` AS `a`
INNER JOIN `AspNetRoles` AS `a0` ON `a`.`RoleId` = `a0`.`Id`
WHERE `a`.`UserId` = @__userId_0
2025-11-16 18:07:53.625 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ClaimType`, `a`.`ClaimValue`, `a`.`UserId`
FROM `AspNetUserClaims` AS `a`
WHERE `a`.`UserId` = @__user_Id_0
2025-11-16 18:07:53.626 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a0`.`Name`
FROM `AspNetUserRoles` AS `a`
INNER JOIN `AspNetRoles` AS `a0` ON `a`.`RoleId` = `a0`.`Id`
WHERE `a`.`UserId` = @__userId_0
2025-11-16 18:07:53.626 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ClaimType`, `a`.`ClaimValue`, `a`.`UserId`
FROM `AspNetUserClaims` AS `a`
WHERE `a`.`UserId` = @__user_Id_0
2025-11-16 18:07:53.628 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (DbType = DateTime), @p2='?' (Size = 4000), @p3='?' (DbType = Boolean), @p4='?' (Size = 4000), @p5='?' (DbType = Boolean), @p6='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO `Tokens` (`AccessToken`, `CreatedAt`, `DeviceId`, `Expired`, `RefreshToken`, `Revoked`, `UserId`)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6);
SELECT `Id`
FROM `Tokens`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();
2025-11-16 18:07:53.628 +03:00 [INF] Added Token MappyApplication.Data.Token
2025-11-16 18:07:53.629 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessFailedCount`, `t`.`ConcurrencyStamp`, `t`.`Email`, `t`.`EmailConfirmed`, `t`.`FirstName`, `t`.`LastName`, `t`.`LockoutEnabled`, `t`.`LockoutEnd`, `t`.`NormalizedEmail`, `t`.`NormalizedUserName`, `t`.`PasswordHash`, `t`.`PhoneNumber`, `t`.`PhoneNumberConfirmed`, `t`.`SecurityStamp`, `t`.`TwoFactorEnabled`, `t`.`UserName`, `w`.`Id`, `w`.`Cadence`, `w`.`CityName`, `w`.`Coords`, `w`.`Date`, `w`.`Distance`, `w`.`Duration`, `w`.`Emoji`, `w`.`Pace`, `w`.`Type`, `w`.`UserId`, `c`.`Id`, `c`.`CityName`, `c`.`Country`, `c`.`Date`, `c`.`Emoji`, `c`.`Lat`, `c`.`Lng`, `c`.`Notes`, `c`.`UserId`
FROM (
    SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`FirstName`, `a`.`LastName`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`
    FROM `AspNetUsers` AS `a`
    WHERE `a`.`Id` = @__user_Id_0
    LIMIT 2
) AS `t`
LEFT JOIN `Workouts` AS `w` ON `t`.`Id` = `w`.`UserId`
LEFT JOIN `Cities` AS `c` ON `t`.`Id` = `c`.`UserId`
ORDER BY `t`.`Id`, `w`.`Id`
2025-11-16 18:07:53.629 +03:00 [INF] Executing ObjectResult, writing value of type 'MappyApplication.Models.user.AuthResponse'.
2025-11-16 18:07:53.629 +03:00 [INF] Executed action MappyApplication.Controllers.AuthController.Login (MappyApplication) in 88.5057ms
2025-11-16 18:07:53.629 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.AuthController.Login (MappyApplication)'
2025-11-16 18:07:53.629 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:8080/api/v1/auth/login - 200 null application/json; charset=utf-8 89.2348ms
2025-11-16 18:08:13.575 +03:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:8080/api/v1/auth/logout - null null
2025-11-16 18:08:13.577 +03:00 [INF] CORS policy execution successful.
2025-11-16 18:08:13.577 +03:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:8080/api/v1/auth/logout - 204 null null 1.735ms
2025-11-16 18:08:13.579 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:8080/api/v1/auth/logout - null null
2025-11-16 18:08:13.579 +03:00 [INF] CORS policy execution successful.
2025-11-16 18:08:13.600 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 18:08:13.601 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.AuthController.Logout (MappyApplication)'
2025-11-16 18:08:13.601 +03:00 [INF] Route matched with {action = "Logout", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Logout() on controller MappyApplication.Controllers.AuthController (MappyApplication).
2025-11-16 18:08:13.603 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__refreshToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`RefreshToken` = @__refreshToken_0
LIMIT 2
2025-11-16 18:08:13.606 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']

        UPDATE TOKENS
        SET Revoked = true, Expired = true
        WHERE UserId = @p0
          AND DeviceId = @p1
          AND Revoked = false
          AND Expired = false
2025-11-16 18:08:13.606 +03:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType0`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-11-16 18:08:13.606 +03:00 [INF] Executed action MappyApplication.Controllers.AuthController.Logout (MappyApplication) in 4.8591ms
2025-11-16 18:08:13.606 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.AuthController.Logout (MappyApplication)'
2025-11-16 18:08:13.606 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:8080/api/v1/auth/logout - 200 null application/json; charset=utf-8 27.4317ms
2025-11-16 18:08:26.313 +03:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:8080/api/v1/auth/login - null null
2025-11-16 18:08:26.315 +03:00 [INF] CORS policy execution successful.
2025-11-16 18:08:26.316 +03:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:8080/api/v1/auth/login - 204 null null 3.06ms
2025-11-16 18:08:26.318 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:8080/api/v1/auth/login - application/json 51
2025-11-16 18:08:26.318 +03:00 [INF] CORS policy execution successful.
2025-11-16 18:08:26.320 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.AuthController.Login (MappyApplication)'
2025-11-16 18:08:26.321 +03:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.user.AuthResponse] Login(MappyApplication.Models.user.AuthLogin) on controller MappyApplication.Controllers.AuthController (MappyApplication).
2025-11-16 18:08:26.357 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`FirstName`, `a`.`LastName`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`
FROM `AspNetUsers` AS `a`
WHERE `a`.`NormalizedEmail` = @__normalizedEmail_0
LIMIT 2
2025-11-16 18:08:26.409 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']

        UPDATE TOKENS
        SET Revoked = true, Expired = true
        WHERE UserId = @p0
          AND DeviceId = @p1
          AND Revoked = false
          AND Expired = false
2025-11-16 18:08:26.412 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a0`.`Name`
FROM `AspNetUserRoles` AS `a`
INNER JOIN `AspNetRoles` AS `a0` ON `a`.`RoleId` = `a0`.`Id`
WHERE `a`.`UserId` = @__userId_0
2025-11-16 18:08:26.412 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ClaimType`, `a`.`ClaimValue`, `a`.`UserId`
FROM `AspNetUserClaims` AS `a`
WHERE `a`.`UserId` = @__user_Id_0
2025-11-16 18:08:26.413 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a0`.`Name`
FROM `AspNetUserRoles` AS `a`
INNER JOIN `AspNetRoles` AS `a0` ON `a`.`RoleId` = `a0`.`Id`
WHERE `a`.`UserId` = @__userId_0
2025-11-16 18:08:26.413 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ClaimType`, `a`.`ClaimValue`, `a`.`UserId`
FROM `AspNetUserClaims` AS `a`
WHERE `a`.`UserId` = @__user_Id_0
2025-11-16 18:08:26.415 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (DbType = DateTime), @p2='?' (Size = 4000), @p3='?' (DbType = Boolean), @p4='?' (Size = 4000), @p5='?' (DbType = Boolean), @p6='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO `Tokens` (`AccessToken`, `CreatedAt`, `DeviceId`, `Expired`, `RefreshToken`, `Revoked`, `UserId`)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6);
SELECT `Id`
FROM `Tokens`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();
2025-11-16 18:08:26.416 +03:00 [INF] Added Token MappyApplication.Data.Token
2025-11-16 18:08:26.418 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessFailedCount`, `t`.`ConcurrencyStamp`, `t`.`Email`, `t`.`EmailConfirmed`, `t`.`FirstName`, `t`.`LastName`, `t`.`LockoutEnabled`, `t`.`LockoutEnd`, `t`.`NormalizedEmail`, `t`.`NormalizedUserName`, `t`.`PasswordHash`, `t`.`PhoneNumber`, `t`.`PhoneNumberConfirmed`, `t`.`SecurityStamp`, `t`.`TwoFactorEnabled`, `t`.`UserName`, `w`.`Id`, `w`.`Cadence`, `w`.`CityName`, `w`.`Coords`, `w`.`Date`, `w`.`Distance`, `w`.`Duration`, `w`.`Emoji`, `w`.`Pace`, `w`.`Type`, `w`.`UserId`, `c`.`Id`, `c`.`CityName`, `c`.`Country`, `c`.`Date`, `c`.`Emoji`, `c`.`Lat`, `c`.`Lng`, `c`.`Notes`, `c`.`UserId`
FROM (
    SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`FirstName`, `a`.`LastName`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`
    FROM `AspNetUsers` AS `a`
    WHERE `a`.`Id` = @__user_Id_0
    LIMIT 2
) AS `t`
LEFT JOIN `Workouts` AS `w` ON `t`.`Id` = `w`.`UserId`
LEFT JOIN `Cities` AS `c` ON `t`.`Id` = `c`.`UserId`
ORDER BY `t`.`Id`, `w`.`Id`
2025-11-16 18:08:26.418 +03:00 [INF] Executing ObjectResult, writing value of type 'MappyApplication.Models.user.AuthResponse'.
2025-11-16 18:08:26.418 +03:00 [INF] Executed action MappyApplication.Controllers.AuthController.Login (MappyApplication) in 96.5204ms
2025-11-16 18:08:26.418 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.AuthController.Login (MappyApplication)'
2025-11-16 18:08:26.418 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:8080/api/v1/auth/login - 200 null application/json; charset=utf-8 99.9544ms
2025-11-16 18:08:30.055 +03:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:8080/api/v1/auth/refresh-token - null null
2025-11-16 18:08:30.055 +03:00 [INF] CORS policy execution successful.
2025-11-16 18:08:30.055 +03:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:8080/api/v1/auth/refresh-token - 204 null null 0.1974ms
2025-11-16 18:08:30.056 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:8080/api/v1/auth/refresh-token - null 0
2025-11-16 18:08:30.056 +03:00 [INF] CORS policy execution successful.
2025-11-16 18:08:30.075 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 18:08:30.076 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication)'
2025-11-16 18:08:30.076 +03:00 [INF] Route matched with {action = "RefreshToken", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.user.AuthResponse] RefreshToken() on controller MappyApplication.Controllers.AuthController (MappyApplication).
2025-11-16 18:08:30.077 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__refreshToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`RefreshToken` = @__refreshToken_0
LIMIT 2
2025-11-16 18:08:30.078 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`FirstName`, `a`.`LastName`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`
FROM `AspNetUsers` AS `a`
WHERE `a`.`Id` = @__p_0
LIMIT 1
2025-11-16 18:08:30.080 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']

        UPDATE TOKENS
        SET Revoked = true, Expired = true
        WHERE UserId = @p0
          AND DeviceId = @p1
          AND Revoked = false
          AND Expired = false
2025-11-16 18:08:30.081 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a0`.`Name`
FROM `AspNetUserRoles` AS `a`
INNER JOIN `AspNetRoles` AS `a0` ON `a`.`RoleId` = `a0`.`Id`
WHERE `a`.`UserId` = @__userId_0
2025-11-16 18:08:30.082 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ClaimType`, `a`.`ClaimValue`, `a`.`UserId`
FROM `AspNetUserClaims` AS `a`
WHERE `a`.`UserId` = @__user_Id_0
2025-11-16 18:08:30.083 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a0`.`Name`
FROM `AspNetUserRoles` AS `a`
INNER JOIN `AspNetRoles` AS `a0` ON `a`.`RoleId` = `a0`.`Id`
WHERE `a`.`UserId` = @__userId_0
2025-11-16 18:08:30.083 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ClaimType`, `a`.`ClaimValue`, `a`.`UserId`
FROM `AspNetUserClaims` AS `a`
WHERE `a`.`UserId` = @__user_Id_0
2025-11-16 18:08:30.085 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (DbType = DateTime), @p2='?' (Size = 4000), @p3='?' (DbType = Boolean), @p4='?' (Size = 4000), @p5='?' (DbType = Boolean), @p6='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO `Tokens` (`AccessToken`, `CreatedAt`, `DeviceId`, `Expired`, `RefreshToken`, `Revoked`, `UserId`)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6);
SELECT `Id`
FROM `Tokens`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();
2025-11-16 18:08:30.086 +03:00 [INF] Added Token MappyApplication.Data.Token
2025-11-16 18:08:30.087 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessFailedCount`, `t`.`ConcurrencyStamp`, `t`.`Email`, `t`.`EmailConfirmed`, `t`.`FirstName`, `t`.`LastName`, `t`.`LockoutEnabled`, `t`.`LockoutEnd`, `t`.`NormalizedEmail`, `t`.`NormalizedUserName`, `t`.`PasswordHash`, `t`.`PhoneNumber`, `t`.`PhoneNumberConfirmed`, `t`.`SecurityStamp`, `t`.`TwoFactorEnabled`, `t`.`UserName`, `w`.`Id`, `w`.`Cadence`, `w`.`CityName`, `w`.`Coords`, `w`.`Date`, `w`.`Distance`, `w`.`Duration`, `w`.`Emoji`, `w`.`Pace`, `w`.`Type`, `w`.`UserId`, `c`.`Id`, `c`.`CityName`, `c`.`Country`, `c`.`Date`, `c`.`Emoji`, `c`.`Lat`, `c`.`Lng`, `c`.`Notes`, `c`.`UserId`
FROM (
    SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`FirstName`, `a`.`LastName`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`
    FROM `AspNetUsers` AS `a`
    WHERE `a`.`Id` = @__user_Id_0
    LIMIT 2
) AS `t`
LEFT JOIN `Workouts` AS `w` ON `t`.`Id` = `w`.`UserId`
LEFT JOIN `Cities` AS `c` ON `t`.`Id` = `c`.`UserId`
ORDER BY `t`.`Id`, `w`.`Id`
2025-11-16 18:08:30.087 +03:00 [INF] Executing ObjectResult, writing value of type 'MappyApplication.Models.user.AuthResponse'.
2025-11-16 18:08:30.087 +03:00 [INF] Executed action MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication) in 11.6394ms
2025-11-16 18:08:30.087 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication)'
2025-11-16 18:08:30.087 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:8080/api/v1/auth/refresh-token - 200 null application/json; charset=utf-8 31.7125ms
2025-11-16 18:08:33.684 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:8080/api/v1/auth/refresh-token - null 0
2025-11-16 18:08:33.684 +03:00 [INF] CORS policy execution successful.
2025-11-16 18:08:33.701 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 18:08:33.701 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication)'
2025-11-16 18:08:33.701 +03:00 [INF] Route matched with {action = "RefreshToken", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.user.AuthResponse] RefreshToken() on controller MappyApplication.Controllers.AuthController (MappyApplication).
2025-11-16 18:08:33.702 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__refreshToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`RefreshToken` = @__refreshToken_0
LIMIT 2
2025-11-16 18:08:33.703 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`FirstName`, `a`.`LastName`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`
FROM `AspNetUsers` AS `a`
WHERE `a`.`Id` = @__p_0
LIMIT 1
2025-11-16 18:08:33.705 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']

        UPDATE TOKENS
        SET Revoked = true, Expired = true
        WHERE UserId = @p0
          AND DeviceId = @p1
          AND Revoked = false
          AND Expired = false
2025-11-16 18:08:33.707 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a0`.`Name`
FROM `AspNetUserRoles` AS `a`
INNER JOIN `AspNetRoles` AS `a0` ON `a`.`RoleId` = `a0`.`Id`
WHERE `a`.`UserId` = @__userId_0
2025-11-16 18:08:33.707 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ClaimType`, `a`.`ClaimValue`, `a`.`UserId`
FROM `AspNetUserClaims` AS `a`
WHERE `a`.`UserId` = @__user_Id_0
2025-11-16 18:08:33.708 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a0`.`Name`
FROM `AspNetUserRoles` AS `a`
INNER JOIN `AspNetRoles` AS `a0` ON `a`.`RoleId` = `a0`.`Id`
WHERE `a`.`UserId` = @__userId_0
2025-11-16 18:08:33.708 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ClaimType`, `a`.`ClaimValue`, `a`.`UserId`
FROM `AspNetUserClaims` AS `a`
WHERE `a`.`UserId` = @__user_Id_0
2025-11-16 18:08:33.710 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (DbType = DateTime), @p2='?' (Size = 4000), @p3='?' (DbType = Boolean), @p4='?' (Size = 4000), @p5='?' (DbType = Boolean), @p6='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO `Tokens` (`AccessToken`, `CreatedAt`, `DeviceId`, `Expired`, `RefreshToken`, `Revoked`, `UserId`)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6);
SELECT `Id`
FROM `Tokens`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();
2025-11-16 18:08:33.711 +03:00 [INF] Added Token MappyApplication.Data.Token
2025-11-16 18:08:33.712 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessFailedCount`, `t`.`ConcurrencyStamp`, `t`.`Email`, `t`.`EmailConfirmed`, `t`.`FirstName`, `t`.`LastName`, `t`.`LockoutEnabled`, `t`.`LockoutEnd`, `t`.`NormalizedEmail`, `t`.`NormalizedUserName`, `t`.`PasswordHash`, `t`.`PhoneNumber`, `t`.`PhoneNumberConfirmed`, `t`.`SecurityStamp`, `t`.`TwoFactorEnabled`, `t`.`UserName`, `w`.`Id`, `w`.`Cadence`, `w`.`CityName`, `w`.`Coords`, `w`.`Date`, `w`.`Distance`, `w`.`Duration`, `w`.`Emoji`, `w`.`Pace`, `w`.`Type`, `w`.`UserId`, `c`.`Id`, `c`.`CityName`, `c`.`Country`, `c`.`Date`, `c`.`Emoji`, `c`.`Lat`, `c`.`Lng`, `c`.`Notes`, `c`.`UserId`
FROM (
    SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`FirstName`, `a`.`LastName`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`
    FROM `AspNetUsers` AS `a`
    WHERE `a`.`Id` = @__user_Id_0
    LIMIT 2
) AS `t`
LEFT JOIN `Workouts` AS `w` ON `t`.`Id` = `w`.`UserId`
LEFT JOIN `Cities` AS `c` ON `t`.`Id` = `c`.`UserId`
ORDER BY `t`.`Id`, `w`.`Id`
2025-11-16 18:08:33.712 +03:00 [INF] Executing ObjectResult, writing value of type 'MappyApplication.Models.user.AuthResponse'.
2025-11-16 18:08:33.712 +03:00 [INF] Executed action MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication) in 11.2131ms
2025-11-16 18:08:33.712 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication)'
2025-11-16 18:08:33.712 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:8080/api/v1/auth/refresh-token - 200 null application/json; charset=utf-8 28.4942ms
2025-11-16 18:08:40.707 +03:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:8080/api/v1/auth/refresh-token - null null
2025-11-16 18:08:40.708 +03:00 [INF] CORS policy execution successful.
2025-11-16 18:08:40.708 +03:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:8080/api/v1/auth/refresh-token - 204 null null 0.9683ms
2025-11-16 18:08:40.712 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:8080/api/v1/auth/refresh-token - null 0
2025-11-16 18:08:40.712 +03:00 [INF] CORS policy execution successful.
2025-11-16 18:08:40.726 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 18:08:40.726 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication)'
2025-11-16 18:08:40.726 +03:00 [INF] Route matched with {action = "RefreshToken", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.user.AuthResponse] RefreshToken() on controller MappyApplication.Controllers.AuthController (MappyApplication).
2025-11-16 18:08:40.727 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__refreshToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`RefreshToken` = @__refreshToken_0
LIMIT 2
2025-11-16 18:08:40.728 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`FirstName`, `a`.`LastName`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`
FROM `AspNetUsers` AS `a`
WHERE `a`.`Id` = @__p_0
LIMIT 1
2025-11-16 18:08:40.730 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']

        UPDATE TOKENS
        SET Revoked = true, Expired = true
        WHERE UserId = @p0
          AND DeviceId = @p1
          AND Revoked = false
          AND Expired = false
2025-11-16 18:08:40.731 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a0`.`Name`
FROM `AspNetUserRoles` AS `a`
INNER JOIN `AspNetRoles` AS `a0` ON `a`.`RoleId` = `a0`.`Id`
WHERE `a`.`UserId` = @__userId_0
2025-11-16 18:08:40.731 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ClaimType`, `a`.`ClaimValue`, `a`.`UserId`
FROM `AspNetUserClaims` AS `a`
WHERE `a`.`UserId` = @__user_Id_0
2025-11-16 18:08:40.732 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a0`.`Name`
FROM `AspNetUserRoles` AS `a`
INNER JOIN `AspNetRoles` AS `a0` ON `a`.`RoleId` = `a0`.`Id`
WHERE `a`.`UserId` = @__userId_0
2025-11-16 18:08:40.733 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ClaimType`, `a`.`ClaimValue`, `a`.`UserId`
FROM `AspNetUserClaims` AS `a`
WHERE `a`.`UserId` = @__user_Id_0
2025-11-16 18:08:40.734 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (DbType = DateTime), @p2='?' (Size = 4000), @p3='?' (DbType = Boolean), @p4='?' (Size = 4000), @p5='?' (DbType = Boolean), @p6='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO `Tokens` (`AccessToken`, `CreatedAt`, `DeviceId`, `Expired`, `RefreshToken`, `Revoked`, `UserId`)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6);
SELECT `Id`
FROM `Tokens`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();
2025-11-16 18:08:40.734 +03:00 [INF] Added Token MappyApplication.Data.Token
2025-11-16 18:08:40.735 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessFailedCount`, `t`.`ConcurrencyStamp`, `t`.`Email`, `t`.`EmailConfirmed`, `t`.`FirstName`, `t`.`LastName`, `t`.`LockoutEnabled`, `t`.`LockoutEnd`, `t`.`NormalizedEmail`, `t`.`NormalizedUserName`, `t`.`PasswordHash`, `t`.`PhoneNumber`, `t`.`PhoneNumberConfirmed`, `t`.`SecurityStamp`, `t`.`TwoFactorEnabled`, `t`.`UserName`, `w`.`Id`, `w`.`Cadence`, `w`.`CityName`, `w`.`Coords`, `w`.`Date`, `w`.`Distance`, `w`.`Duration`, `w`.`Emoji`, `w`.`Pace`, `w`.`Type`, `w`.`UserId`, `c`.`Id`, `c`.`CityName`, `c`.`Country`, `c`.`Date`, `c`.`Emoji`, `c`.`Lat`, `c`.`Lng`, `c`.`Notes`, `c`.`UserId`
FROM (
    SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`FirstName`, `a`.`LastName`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`
    FROM `AspNetUsers` AS `a`
    WHERE `a`.`Id` = @__user_Id_0
    LIMIT 2
) AS `t`
LEFT JOIN `Workouts` AS `w` ON `t`.`Id` = `w`.`UserId`
LEFT JOIN `Cities` AS `c` ON `t`.`Id` = `c`.`UserId`
ORDER BY `t`.`Id`, `w`.`Id`
2025-11-16 18:08:40.735 +03:00 [INF] Executing ObjectResult, writing value of type 'MappyApplication.Models.user.AuthResponse'.
2025-11-16 18:08:40.735 +03:00 [INF] Executed action MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication) in 8.6396ms
2025-11-16 18:08:40.735 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication)'
2025-11-16 18:08:40.735 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:8080/api/v1/auth/refresh-token - 200 null application/json; charset=utf-8 23.1763ms
2025-11-16 18:08:44.284 +03:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:8080/api/v1/auth/logout - null null
2025-11-16 18:08:44.284 +03:00 [INF] CORS policy execution successful.
2025-11-16 18:08:44.285 +03:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:8080/api/v1/auth/logout - 204 null null 0.5755ms
2025-11-16 18:08:44.286 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:8080/api/v1/auth/logout - null null
2025-11-16 18:08:44.287 +03:00 [INF] CORS policy execution successful.
2025-11-16 18:08:44.307 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 18:08:44.308 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.AuthController.Logout (MappyApplication)'
2025-11-16 18:08:44.308 +03:00 [INF] Route matched with {action = "Logout", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Logout() on controller MappyApplication.Controllers.AuthController (MappyApplication).
2025-11-16 18:08:44.310 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__refreshToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`RefreshToken` = @__refreshToken_0
LIMIT 2
2025-11-16 18:08:44.313 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']

        UPDATE TOKENS
        SET Revoked = true, Expired = true
        WHERE UserId = @p0
          AND DeviceId = @p1
          AND Revoked = false
          AND Expired = false
2025-11-16 18:08:44.313 +03:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType0`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-11-16 18:08:44.314 +03:00 [INF] Executed action MappyApplication.Controllers.AuthController.Logout (MappyApplication) in 5.335ms
2025-11-16 18:08:44.314 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.AuthController.Logout (MappyApplication)'
2025-11-16 18:08:44.314 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:8080/api/v1/auth/logout - 200 null application/json; charset=utf-8 27.2954ms
2025-11-16 18:40:36.394 +03:00 [INF] User profile is available. Using '/Users/salah/.aspnet/DataProtection-Keys' as key repository; keys will not be encrypted at rest.
2025-11-16 18:40:36.441 +03:00 [INF] Now listening on: http://localhost:8080
2025-11-16 18:40:36.442 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2025-11-16 18:40:36.442 +03:00 [INF] Hosting environment: Development
2025-11-16 18:40:36.442 +03:00 [INF] Content root path: /Users/salah/Desktop/MappyApplication/MappyApplication
2025-11-16 18:40:40.465 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:8080/swagger/index.html - null null
2025-11-16 18:40:40.531 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:8080/swagger/index.html - 200 null text/html;charset=utf-8 66.9403ms
2025-11-16 18:40:40.548 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:8080/_framework/aspnetcore-browser-refresh.js - null null
2025-11-16 18:40:40.554 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:8080/_framework/aspnetcore-browser-refresh.js - 200 13732 application/javascript; charset=utf-8 9.2495ms
2025-11-16 18:40:40.655 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:8080/swagger/v1/swagger.json - null null
2025-11-16 18:40:40.722 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:8080/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 66.7351ms
2025-11-16 18:41:49.954 +03:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:8080/api/v1/auth/login - null null
2025-11-16 18:41:49.969 +03:00 [WRN] Failed to determine the https port for redirect.
2025-11-16 18:41:49.972 +03:00 [INF] CORS policy execution successful.
2025-11-16 18:41:49.974 +03:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:8080/api/v1/auth/login - 204 null null 20.407ms
2025-11-16 18:41:49.975 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:8080/api/v1/auth/login - application/json 51
2025-11-16 18:41:49.978 +03:00 [INF] CORS policy execution successful.
2025-11-16 18:41:50.008 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.AuthController.Login (MappyApplication)'
2025-11-16 18:41:50.030 +03:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.user.AuthResponse] Login(MappyApplication.Models.user.AuthLogin) on controller MappyApplication.Controllers.AuthController (MappyApplication).
2025-11-16 18:41:50.751 +03:00 [INF] Executed DbCommand (56ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`FirstName`, `a`.`LastName`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`
FROM `AspNetUsers` AS `a`
WHERE `a`.`NormalizedEmail` = @__normalizedEmail_0
LIMIT 2
2025-11-16 18:41:50.828 +03:00 [INF] Executed DbCommand (10ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']

        UPDATE TOKENS
        SET Revoked = true, Expired = true
        WHERE UserId = @p0
          AND DeviceId = @p1
          AND Revoked = false
          AND Expired = false
2025-11-16 18:41:50.856 +03:00 [INF] Executed DbCommand (6ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a0`.`Name`
FROM `AspNetUserRoles` AS `a`
INNER JOIN `AspNetRoles` AS `a0` ON `a`.`RoleId` = `a0`.`Id`
WHERE `a`.`UserId` = @__userId_0
2025-11-16 18:41:50.862 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ClaimType`, `a`.`ClaimValue`, `a`.`UserId`
FROM `AspNetUserClaims` AS `a`
WHERE `a`.`UserId` = @__user_Id_0
2025-11-16 18:41:50.874 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a0`.`Name`
FROM `AspNetUserRoles` AS `a`
INNER JOIN `AspNetRoles` AS `a0` ON `a`.`RoleId` = `a0`.`Id`
WHERE `a`.`UserId` = @__userId_0
2025-11-16 18:41:50.875 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ClaimType`, `a`.`ClaimValue`, `a`.`UserId`
FROM `AspNetUserClaims` AS `a`
WHERE `a`.`UserId` = @__user_Id_0
2025-11-16 18:41:50.929 +03:00 [INF] Executed DbCommand (11ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (DbType = DateTime), @p2='?' (Size = 4000), @p3='?' (DbType = Boolean), @p4='?' (Size = 4000), @p5='?' (DbType = Boolean), @p6='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO `Tokens` (`AccessToken`, `CreatedAt`, `DeviceId`, `Expired`, `RefreshToken`, `Revoked`, `UserId`)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6);
SELECT `Id`
FROM `Tokens`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();
2025-11-16 18:41:50.943 +03:00 [INF] Added Token MappyApplication.Data.Token
2025-11-16 18:41:50.961 +03:00 [WRN] Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.
2025-11-16 18:41:50.975 +03:00 [INF] Executed DbCommand (9ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessFailedCount`, `t`.`ConcurrencyStamp`, `t`.`Email`, `t`.`EmailConfirmed`, `t`.`FirstName`, `t`.`LastName`, `t`.`LockoutEnabled`, `t`.`LockoutEnd`, `t`.`NormalizedEmail`, `t`.`NormalizedUserName`, `t`.`PasswordHash`, `t`.`PhoneNumber`, `t`.`PhoneNumberConfirmed`, `t`.`SecurityStamp`, `t`.`TwoFactorEnabled`, `t`.`UserName`, `w`.`Id`, `w`.`Cadence`, `w`.`CityName`, `w`.`Coords`, `w`.`Date`, `w`.`Distance`, `w`.`Duration`, `w`.`Emoji`, `w`.`Pace`, `w`.`Type`, `w`.`UserId`, `c`.`Id`, `c`.`CityName`, `c`.`Country`, `c`.`Date`, `c`.`Emoji`, `c`.`Lat`, `c`.`Lng`, `c`.`Notes`, `c`.`UserId`
FROM (
    SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`FirstName`, `a`.`LastName`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`
    FROM `AspNetUsers` AS `a`
    WHERE `a`.`Id` = @__user_Id_0
    LIMIT 2
) AS `t`
LEFT JOIN `Workouts` AS `w` ON `t`.`Id` = `w`.`UserId`
LEFT JOIN `Cities` AS `c` ON `t`.`Id` = `c`.`UserId`
ORDER BY `t`.`Id`, `w`.`Id`
2025-11-16 18:41:50.983 +03:00 [INF] Executing ObjectResult, writing value of type 'MappyApplication.Models.user.AuthResponse'.
2025-11-16 18:41:50.993 +03:00 [INF] Executed action MappyApplication.Controllers.AuthController.Login (MappyApplication) in 961.5521ms
2025-11-16 18:41:50.993 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.AuthController.Login (MappyApplication)'
2025-11-16 18:41:51.000 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:8080/api/v1/auth/login - 200 null application/json; charset=utf-8 1024.7762ms
2025-11-16 18:41:55.557 +03:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:8080/api/v1/auth/logout - null null
2025-11-16 18:41:55.561 +03:00 [INF] CORS policy execution successful.
2025-11-16 18:41:55.562 +03:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:8080/api/v1/auth/logout - 204 null null 5.1062ms
2025-11-16 18:41:55.565 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:8080/api/v1/auth/logout - null null
2025-11-16 18:41:55.568 +03:00 [INF] CORS policy execution successful.
2025-11-16 18:41:55.653 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 18:41:55.657 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.AuthController.Logout (MappyApplication)'
2025-11-16 18:41:55.660 +03:00 [INF] Route matched with {action = "Logout", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Logout() on controller MappyApplication.Controllers.AuthController (MappyApplication).
2025-11-16 18:41:55.665 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__refreshToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`RefreshToken` = @__refreshToken_0
LIMIT 2
2025-11-16 18:41:55.680 +03:00 [INF] Executed DbCommand (6ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']

        UPDATE TOKENS
        SET Revoked = true, Expired = true
        WHERE UserId = @p0
          AND DeviceId = @p1
          AND Revoked = false
          AND Expired = false
2025-11-16 18:41:55.681 +03:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType0`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-11-16 18:41:55.685 +03:00 [INF] Executed action MappyApplication.Controllers.AuthController.Logout (MappyApplication) in 24.9939ms
2025-11-16 18:41:55.685 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.AuthController.Logout (MappyApplication)'
2025-11-16 18:41:55.685 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:8080/api/v1/auth/logout - 200 null application/json; charset=utf-8 120.3973ms
2025-11-16 19:06:24.049 +03:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:8080/api/v1/auth/login - null null
2025-11-16 19:06:24.059 +03:00 [INF] CORS policy execution successful.
2025-11-16 19:06:24.060 +03:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:8080/api/v1/auth/login - 204 null null 10.9126ms
2025-11-16 19:06:24.062 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:8080/api/v1/auth/login - application/json 51
2025-11-16 19:06:24.063 +03:00 [INF] CORS policy execution successful.
2025-11-16 19:06:24.071 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.AuthController.Login (MappyApplication)'
2025-11-16 19:06:24.074 +03:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.user.AuthResponse] Login(MappyApplication.Models.user.AuthLogin) on controller MappyApplication.Controllers.AuthController (MappyApplication).
2025-11-16 19:06:24.269 +03:00 [INF] Executed DbCommand (31ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`FirstName`, `a`.`LastName`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`
FROM `AspNetUsers` AS `a`
WHERE `a`.`NormalizedEmail` = @__normalizedEmail_0
LIMIT 2
2025-11-16 19:06:24.322 +03:00 [INF] Executed DbCommand (4ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']

        UPDATE TOKENS
        SET Revoked = true, Expired = true
        WHERE UserId = @p0
          AND DeviceId = @p1
          AND Revoked = false
          AND Expired = false
2025-11-16 19:06:24.326 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a0`.`Name`
FROM `AspNetUserRoles` AS `a`
INNER JOIN `AspNetRoles` AS `a0` ON `a`.`RoleId` = `a0`.`Id`
WHERE `a`.`UserId` = @__userId_0
2025-11-16 19:06:24.328 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ClaimType`, `a`.`ClaimValue`, `a`.`UserId`
FROM `AspNetUserClaims` AS `a`
WHERE `a`.`UserId` = @__user_Id_0
2025-11-16 19:06:24.330 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a0`.`Name`
FROM `AspNetUserRoles` AS `a`
INNER JOIN `AspNetRoles` AS `a0` ON `a`.`RoleId` = `a0`.`Id`
WHERE `a`.`UserId` = @__userId_0
2025-11-16 19:06:24.331 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ClaimType`, `a`.`ClaimValue`, `a`.`UserId`
FROM `AspNetUserClaims` AS `a`
WHERE `a`.`UserId` = @__user_Id_0
2025-11-16 19:06:24.348 +03:00 [INF] Executed DbCommand (12ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (DbType = DateTime), @p2='?' (Size = 4000), @p3='?' (DbType = Boolean), @p4='?' (Size = 4000), @p5='?' (DbType = Boolean), @p6='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO `Tokens` (`AccessToken`, `CreatedAt`, `DeviceId`, `Expired`, `RefreshToken`, `Revoked`, `UserId`)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6);
SELECT `Id`
FROM `Tokens`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();
2025-11-16 19:06:24.352 +03:00 [INF] Added Token MappyApplication.Data.Token
2025-11-16 19:06:24.359 +03:00 [INF] Executed DbCommand (7ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessFailedCount`, `t`.`ConcurrencyStamp`, `t`.`Email`, `t`.`EmailConfirmed`, `t`.`FirstName`, `t`.`LastName`, `t`.`LockoutEnabled`, `t`.`LockoutEnd`, `t`.`NormalizedEmail`, `t`.`NormalizedUserName`, `t`.`PasswordHash`, `t`.`PhoneNumber`, `t`.`PhoneNumberConfirmed`, `t`.`SecurityStamp`, `t`.`TwoFactorEnabled`, `t`.`UserName`, `w`.`Id`, `w`.`Cadence`, `w`.`CityName`, `w`.`Coords`, `w`.`Date`, `w`.`Distance`, `w`.`Duration`, `w`.`Emoji`, `w`.`Pace`, `w`.`Type`, `w`.`UserId`, `c`.`Id`, `c`.`CityName`, `c`.`Country`, `c`.`Date`, `c`.`Emoji`, `c`.`Lat`, `c`.`Lng`, `c`.`Notes`, `c`.`UserId`
FROM (
    SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`FirstName`, `a`.`LastName`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`
    FROM `AspNetUsers` AS `a`
    WHERE `a`.`Id` = @__user_Id_0
    LIMIT 2
) AS `t`
LEFT JOIN `Workouts` AS `w` ON `t`.`Id` = `w`.`UserId`
LEFT JOIN `Cities` AS `c` ON `t`.`Id` = `c`.`UserId`
ORDER BY `t`.`Id`, `w`.`Id`
2025-11-16 19:06:24.361 +03:00 [INF] Executing ObjectResult, writing value of type 'MappyApplication.Models.user.AuthResponse'.
2025-11-16 19:06:24.361 +03:00 [INF] Executed action MappyApplication.Controllers.AuthController.Login (MappyApplication) in 286.1447ms
2025-11-16 19:06:24.361 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.AuthController.Login (MappyApplication)'
2025-11-16 19:06:24.361 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:8080/api/v1/auth/login - 200 null application/json; charset=utf-8 298.7272ms
2025-11-16 19:06:27.272 +03:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:8080/api/v1/auth/logout - null null
2025-11-16 19:06:27.272 +03:00 [INF] CORS policy execution successful.
2025-11-16 19:06:27.273 +03:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:8080/api/v1/auth/logout - 204 null null 0.9951ms
2025-11-16 19:06:27.279 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:8080/api/v1/auth/logout - null null
2025-11-16 19:06:27.280 +03:00 [INF] CORS policy execution successful.
2025-11-16 19:06:27.308 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 19:06:27.312 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.AuthController.Logout (MappyApplication)'
2025-11-16 19:06:27.312 +03:00 [INF] Route matched with {action = "Logout", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Logout() on controller MappyApplication.Controllers.AuthController (MappyApplication).
2025-11-16 19:06:27.315 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__refreshToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`RefreshToken` = @__refreshToken_0
LIMIT 2
2025-11-16 19:06:27.320 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']

        UPDATE TOKENS
        SET Revoked = true, Expired = true
        WHERE UserId = @p0
          AND DeviceId = @p1
          AND Revoked = false
          AND Expired = false
2025-11-16 19:06:27.320 +03:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType0`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-11-16 19:06:27.320 +03:00 [INF] Executed action MappyApplication.Controllers.AuthController.Logout (MappyApplication) in 8.3963ms
2025-11-16 19:06:27.320 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.AuthController.Logout (MappyApplication)'
2025-11-16 19:06:27.321 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:8080/api/v1/auth/logout - 200 null application/json; charset=utf-8 41.2727ms
2025-11-16 19:11:09.356 +03:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:8080/api/v1/auth/register - null null
2025-11-16 19:11:09.361 +03:00 [INF] CORS policy execution successful.
2025-11-16 19:11:09.365 +03:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:8080/api/v1/auth/register - 204 null null 7.9992ms
2025-11-16 19:11:09.366 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:8080/api/v1/auth/register - application/json 149
2025-11-16 19:11:09.367 +03:00 [INF] CORS policy execution successful.
2025-11-16 19:11:09.368 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.AuthController.Register (MappyApplication)'
2025-11-16 19:11:09.389 +03:00 [INF] Route matched with {action = "Register", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.user.AuthResponse] Register(MappyApplication.Models.user.AuthRegister) on controller MappyApplication.Controllers.AuthController (MappyApplication).
2025-11-16 19:11:09.486 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-11-16 19:11:09.503 +03:00 [INF] Executed action MappyApplication.Controllers.AuthController.Register (MappyApplication) in 113.6866ms
2025-11-16 19:11:09.503 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.AuthController.Register (MappyApplication)'
2025-11-16 19:11:09.503 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:8080/api/v1/auth/register - 400 null application/problem+json; charset=utf-8 137.2513ms
2025-11-16 19:13:39.935 +03:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:8080/api/v1/auth/register - null null
2025-11-16 19:13:39.938 +03:00 [INF] CORS policy execution successful.
2025-11-16 19:13:39.939 +03:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:8080/api/v1/auth/register - 204 null null 4.0243ms
2025-11-16 19:13:39.941 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:8080/api/v1/auth/register - application/json 149
2025-11-16 19:13:39.941 +03:00 [INF] CORS policy execution successful.
2025-11-16 19:13:39.942 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.AuthController.Register (MappyApplication)'
2025-11-16 19:13:39.943 +03:00 [INF] Route matched with {action = "Register", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.user.AuthResponse] Register(MappyApplication.Models.user.AuthRegister) on controller MappyApplication.Controllers.AuthController (MappyApplication).
2025-11-16 19:13:39.976 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-11-16 19:13:39.976 +03:00 [INF] Executed action MappyApplication.Controllers.AuthController.Register (MappyApplication) in 32.8722ms
2025-11-16 19:13:39.976 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.AuthController.Register (MappyApplication)'
2025-11-16 19:13:39.977 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:8080/api/v1/auth/register - 400 null application/problem+json; charset=utf-8 35.7135ms
2025-11-16 19:14:01.058 +03:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:8080/api/v1/auth/register - null null
2025-11-16 19:14:01.061 +03:00 [INF] CORS policy execution successful.
2025-11-16 19:14:01.062 +03:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:8080/api/v1/auth/register - 204 null null 5.0316ms
2025-11-16 19:14:01.064 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:8080/api/v1/auth/register - application/json 149
2025-11-16 19:14:01.064 +03:00 [INF] CORS policy execution successful.
2025-11-16 19:14:01.066 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.AuthController.Register (MappyApplication)'
2025-11-16 19:14:01.067 +03:00 [INF] Route matched with {action = "Register", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.user.AuthResponse] Register(MappyApplication.Models.user.AuthRegister) on controller MappyApplication.Controllers.AuthController (MappyApplication).
2025-11-16 19:14:01.104 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-11-16 19:14:01.105 +03:00 [INF] Executed action MappyApplication.Controllers.AuthController.Register (MappyApplication) in 37.9397ms
2025-11-16 19:14:01.105 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.AuthController.Register (MappyApplication)'
2025-11-16 19:14:01.106 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:8080/api/v1/auth/register - 400 null application/problem+json; charset=utf-8 41.5591ms
2025-11-16 19:15:08.694 +03:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:8080/api/v1/auth/register - null null
2025-11-16 19:15:08.697 +03:00 [INF] CORS policy execution successful.
2025-11-16 19:15:08.699 +03:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:8080/api/v1/auth/register - 204 null null 5.3616ms
2025-11-16 19:15:08.701 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:8080/api/v1/auth/register - application/json 149
2025-11-16 19:15:08.701 +03:00 [INF] CORS policy execution successful.
2025-11-16 19:15:08.702 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.AuthController.Register (MappyApplication)'
2025-11-16 19:15:08.704 +03:00 [INF] Route matched with {action = "Register", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.user.AuthResponse] Register(MappyApplication.Models.user.AuthRegister) on controller MappyApplication.Controllers.AuthController (MappyApplication).
2025-11-16 19:15:08.743 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-11-16 19:15:08.744 +03:00 [INF] Executed action MappyApplication.Controllers.AuthController.Register (MappyApplication) in 40.1885ms
2025-11-16 19:15:08.744 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.AuthController.Register (MappyApplication)'
2025-11-16 19:15:08.744 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:8080/api/v1/auth/register - 400 null application/problem+json; charset=utf-8 43.5101ms
2025-11-16 19:15:12.339 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:8080/api/v1/auth/register - application/json 149
2025-11-16 19:15:12.340 +03:00 [INF] CORS policy execution successful.
2025-11-16 19:15:12.340 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.AuthController.Register (MappyApplication)'
2025-11-16 19:15:12.340 +03:00 [INF] Route matched with {action = "Register", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.user.AuthResponse] Register(MappyApplication.Models.user.AuthRegister) on controller MappyApplication.Controllers.AuthController (MappyApplication).
2025-11-16 19:15:12.363 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-11-16 19:15:12.363 +03:00 [INF] Executed action MappyApplication.Controllers.AuthController.Register (MappyApplication) in 22.867ms
2025-11-16 19:15:12.364 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.AuthController.Register (MappyApplication)'
2025-11-16 19:15:12.364 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:8080/api/v1/auth/register - 400 null application/problem+json; charset=utf-8 24.362ms
2025-11-16 19:15:15.920 +03:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:8080/api/v1/auth/register - null null
2025-11-16 19:15:15.921 +03:00 [INF] CORS policy execution successful.
2025-11-16 19:15:15.921 +03:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:8080/api/v1/auth/register - 204 null null 0.9205ms
2025-11-16 19:15:15.924 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:8080/api/v1/auth/register - application/json 149
2025-11-16 19:15:15.924 +03:00 [INF] CORS policy execution successful.
2025-11-16 19:15:15.924 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.AuthController.Register (MappyApplication)'
2025-11-16 19:15:15.924 +03:00 [INF] Route matched with {action = "Register", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.user.AuthResponse] Register(MappyApplication.Models.user.AuthRegister) on controller MappyApplication.Controllers.AuthController (MappyApplication).
2025-11-16 19:15:15.956 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-11-16 19:15:15.957 +03:00 [INF] Executed action MappyApplication.Controllers.AuthController.Register (MappyApplication) in 32.115ms
2025-11-16 19:15:15.957 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.AuthController.Register (MappyApplication)'
2025-11-16 19:15:15.957 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:8080/api/v1/auth/register - 400 null application/problem+json; charset=utf-8 33.1539ms
2025-11-16 19:15:17.487 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:8080/api/v1/auth/register - application/json 149
2025-11-16 19:15:17.488 +03:00 [INF] CORS policy execution successful.
2025-11-16 19:15:17.488 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.AuthController.Register (MappyApplication)'
2025-11-16 19:15:17.488 +03:00 [INF] Route matched with {action = "Register", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.user.AuthResponse] Register(MappyApplication.Models.user.AuthRegister) on controller MappyApplication.Controllers.AuthController (MappyApplication).
2025-11-16 19:15:17.501 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-11-16 19:15:17.501 +03:00 [INF] Executed action MappyApplication.Controllers.AuthController.Register (MappyApplication) in 12.7075ms
2025-11-16 19:15:17.501 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.AuthController.Register (MappyApplication)'
2025-11-16 19:15:17.501 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:8080/api/v1/auth/register - 400 null application/problem+json; charset=utf-8 13.6396ms
2025-11-16 19:15:18.603 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:8080/api/v1/auth/register - application/json 149
2025-11-16 19:15:18.604 +03:00 [INF] CORS policy execution successful.
2025-11-16 19:15:18.605 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.AuthController.Register (MappyApplication)'
2025-11-16 19:15:18.605 +03:00 [INF] Route matched with {action = "Register", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.user.AuthResponse] Register(MappyApplication.Models.user.AuthRegister) on controller MappyApplication.Controllers.AuthController (MappyApplication).
2025-11-16 19:15:18.631 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-11-16 19:15:18.631 +03:00 [INF] Executed action MappyApplication.Controllers.AuthController.Register (MappyApplication) in 26.5501ms
2025-11-16 19:15:18.632 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.AuthController.Register (MappyApplication)'
2025-11-16 19:15:18.632 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:8080/api/v1/auth/register - 400 null application/problem+json; charset=utf-8 28.2279ms
2025-11-16 19:15:28.734 +03:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:8080/api/v1/auth/register - null null
2025-11-16 19:15:28.736 +03:00 [INF] CORS policy execution successful.
2025-11-16 19:15:28.737 +03:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:8080/api/v1/auth/register - 204 null null 2.9693ms
2025-11-16 19:15:28.740 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:8080/api/v1/auth/register - application/json 148
2025-11-16 19:15:28.742 +03:00 [INF] CORS policy execution successful.
2025-11-16 19:15:28.743 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.AuthController.Register (MappyApplication)'
2025-11-16 19:15:28.743 +03:00 [INF] Route matched with {action = "Register", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.user.AuthResponse] Register(MappyApplication.Models.user.AuthRegister) on controller MappyApplication.Controllers.AuthController (MappyApplication).
2025-11-16 19:15:28.816 +03:00 [INF] Executed DbCommand (30ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`FirstName`, `a`.`LastName`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`
FROM `AspNetUsers` AS `a`
WHERE `a`.`NormalizedEmail` = @__normalizedEmail_0
LIMIT 2
2025-11-16 19:15:28.818 +03:00 [ERR] Email address already exists
MappyApplication.Exceptions.AppErrorResponse: Email address already exists
   at MappyApplication.Repository.AuthManager.Register(AuthRegister authRegister) in /Users/salah/Desktop/MappyApplication/MappyApplication/Repository/AuthManager.cs:line 45
2025-11-16 19:15:28.836 +03:00 [INF] Executed action MappyApplication.Controllers.AuthController.Register (MappyApplication) in 92.0399ms
2025-11-16 19:15:28.837 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.AuthController.Register (MappyApplication)'
2025-11-16 19:15:28.837 +03:00 [ERR] An error occured
MappyApplication.Exceptions.AppErrorResponse: Email address already exists
   at MappyApplication.Repository.AuthManager.Register(AuthRegister authRegister) in /Users/salah/Desktop/MappyApplication/MappyApplication/Repository/AuthManager.cs:line 58
   at MappyApplication.Controllers.AuthController.Register(AuthRegister authRegister) in /Users/salah/Desktop/MappyApplication/MappyApplication/Controllers/AuthController.cs:line 24
   at lambda_method370(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Program.<>c.<<<Main>$>b__0_6>d.MoveNext() in /Users/salah/Desktop/MappyApplication/MappyApplication/Program.cs:line 140
--- End of stack trace from previous location ---
   at MappyApplication.MiddleWare.ExceptionMiddleWare.InvokeAsync(HttpContext ctx) in /Users/salah/Desktop/MappyApplication/MappyApplication/MiddleWare/ExceptionMiddleWare.cs:line 21
2025-11-16 19:15:28.849 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:8080/api/v1/auth/register - 400 null application/json; charset=utf-8 108.9035ms
2025-11-16 19:16:21.364 +03:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:8080/api/v1/auth/register - null null
2025-11-16 19:16:21.368 +03:00 [INF] CORS policy execution successful.
2025-11-16 19:16:21.369 +03:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:8080/api/v1/auth/register - 204 null null 5.0272ms
2025-11-16 19:16:21.371 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:8080/api/v1/auth/register - application/json 148
2025-11-16 19:16:21.372 +03:00 [INF] CORS policy execution successful.
2025-11-16 19:16:21.373 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.AuthController.Register (MappyApplication)'
2025-11-16 19:16:21.376 +03:00 [INF] Route matched with {action = "Register", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.user.AuthResponse] Register(MappyApplication.Models.user.AuthRegister) on controller MappyApplication.Controllers.AuthController (MappyApplication).
2025-11-16 19:16:21.408 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`FirstName`, `a`.`LastName`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`
FROM `AspNetUsers` AS `a`
WHERE `a`.`NormalizedEmail` = @__normalizedEmail_0
LIMIT 2
2025-11-16 19:16:21.409 +03:00 [ERR] Email address already exists
MappyApplication.Exceptions.AppErrorResponse: Email address already exists
   at MappyApplication.Repository.AuthManager.Register(AuthRegister authRegister) in /Users/salah/Desktop/MappyApplication/MappyApplication/Repository/AuthManager.cs:line 45
2025-11-16 19:16:21.409 +03:00 [INF] Executed action MappyApplication.Controllers.AuthController.Register (MappyApplication) in 32.7549ms
2025-11-16 19:16:21.409 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.AuthController.Register (MappyApplication)'
2025-11-16 19:16:21.410 +03:00 [ERR] An error occured
MappyApplication.Exceptions.AppErrorResponse: Email address already exists
   at MappyApplication.Repository.AuthManager.Register(AuthRegister authRegister) in /Users/salah/Desktop/MappyApplication/MappyApplication/Repository/AuthManager.cs:line 58
   at MappyApplication.Controllers.AuthController.Register(AuthRegister authRegister) in /Users/salah/Desktop/MappyApplication/MappyApplication/Controllers/AuthController.cs:line 24
   at lambda_method370(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Program.<>c.<<<Main>$>b__0_6>d.MoveNext() in /Users/salah/Desktop/MappyApplication/MappyApplication/Program.cs:line 140
--- End of stack trace from previous location ---
   at MappyApplication.MiddleWare.ExceptionMiddleWare.InvokeAsync(HttpContext ctx) in /Users/salah/Desktop/MappyApplication/MappyApplication/MiddleWare/ExceptionMiddleWare.cs:line 21
2025-11-16 19:16:21.410 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:8080/api/v1/auth/register - 400 null application/json; charset=utf-8 39.2767ms
2025-11-16 19:16:22.822 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:8080/api/v1/auth/register - application/json 148
2025-11-16 19:16:22.823 +03:00 [INF] CORS policy execution successful.
2025-11-16 19:16:22.824 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.AuthController.Register (MappyApplication)'
2025-11-16 19:16:22.824 +03:00 [INF] Route matched with {action = "Register", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.user.AuthResponse] Register(MappyApplication.Models.user.AuthRegister) on controller MappyApplication.Controllers.AuthController (MappyApplication).
2025-11-16 19:16:22.849 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`FirstName`, `a`.`LastName`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`
FROM `AspNetUsers` AS `a`
WHERE `a`.`NormalizedEmail` = @__normalizedEmail_0
LIMIT 2
2025-11-16 19:16:22.849 +03:00 [ERR] Email address already exists
MappyApplication.Exceptions.AppErrorResponse: Email address already exists
   at MappyApplication.Repository.AuthManager.Register(AuthRegister authRegister) in /Users/salah/Desktop/MappyApplication/MappyApplication/Repository/AuthManager.cs:line 45
2025-11-16 19:16:22.850 +03:00 [INF] Executed action MappyApplication.Controllers.AuthController.Register (MappyApplication) in 26.2811ms
2025-11-16 19:16:22.850 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.AuthController.Register (MappyApplication)'
2025-11-16 19:16:22.850 +03:00 [ERR] An error occured
MappyApplication.Exceptions.AppErrorResponse: Email address already exists
   at MappyApplication.Repository.AuthManager.Register(AuthRegister authRegister) in /Users/salah/Desktop/MappyApplication/MappyApplication/Repository/AuthManager.cs:line 58
   at MappyApplication.Controllers.AuthController.Register(AuthRegister authRegister) in /Users/salah/Desktop/MappyApplication/MappyApplication/Controllers/AuthController.cs:line 24
   at lambda_method370(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Program.<>c.<<<Main>$>b__0_6>d.MoveNext() in /Users/salah/Desktop/MappyApplication/MappyApplication/Program.cs:line 140
--- End of stack trace from previous location ---
   at MappyApplication.MiddleWare.ExceptionMiddleWare.InvokeAsync(HttpContext ctx) in /Users/salah/Desktop/MappyApplication/MappyApplication/MiddleWare/ExceptionMiddleWare.cs:line 21
2025-11-16 19:16:22.852 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:8080/api/v1/auth/register - 400 null application/json; charset=utf-8 29.3206ms
2025-11-16 19:16:55.958 +03:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:8080/api/v1/auth/register - null null
2025-11-16 19:16:55.961 +03:00 [INF] CORS policy execution successful.
2025-11-16 19:16:55.962 +03:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:8080/api/v1/auth/register - 204 null null 4.0508ms
2025-11-16 19:16:55.965 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:8080/api/v1/auth/register - application/json 148
2025-11-16 19:16:55.966 +03:00 [INF] CORS policy execution successful.
2025-11-16 19:16:55.970 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.AuthController.Register (MappyApplication)'
2025-11-16 19:16:55.972 +03:00 [INF] Route matched with {action = "Register", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.user.AuthResponse] Register(MappyApplication.Models.user.AuthRegister) on controller MappyApplication.Controllers.AuthController (MappyApplication).
2025-11-16 19:16:56.013 +03:00 [INF] Executed DbCommand (11ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`FirstName`, `a`.`LastName`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`
FROM `AspNetUsers` AS `a`
WHERE `a`.`NormalizedEmail` = @__normalizedEmail_0
LIMIT 2
2025-11-16 19:16:56.015 +03:00 [ERR] Email address already exists
MappyApplication.Exceptions.AppErrorResponse: Email address already exists
   at MappyApplication.Repository.AuthManager.Register(AuthRegister authRegister) in /Users/salah/Desktop/MappyApplication/MappyApplication/Repository/AuthManager.cs:line 45
2025-11-16 19:16:56.016 +03:00 [INF] Executed action MappyApplication.Controllers.AuthController.Register (MappyApplication) in 43.9942ms
2025-11-16 19:16:56.016 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.AuthController.Register (MappyApplication)'
2025-11-16 19:16:56.016 +03:00 [ERR] An error occured
MappyApplication.Exceptions.AppErrorResponse: Email address already exists
   at MappyApplication.Repository.AuthManager.Register(AuthRegister authRegister) in /Users/salah/Desktop/MappyApplication/MappyApplication/Repository/AuthManager.cs:line 58
   at MappyApplication.Controllers.AuthController.Register(AuthRegister authRegister) in /Users/salah/Desktop/MappyApplication/MappyApplication/Controllers/AuthController.cs:line 24
   at lambda_method370(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Program.<>c.<<<Main>$>b__0_6>d.MoveNext() in /Users/salah/Desktop/MappyApplication/MappyApplication/Program.cs:line 140
--- End of stack trace from previous location ---
   at MappyApplication.MiddleWare.ExceptionMiddleWare.InvokeAsync(HttpContext ctx) in /Users/salah/Desktop/MappyApplication/MappyApplication/MiddleWare/ExceptionMiddleWare.cs:line 21
2025-11-16 19:16:56.017 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:8080/api/v1/auth/register - 400 null application/json; charset=utf-8 52.1076ms
2025-11-16 19:17:01.431 +03:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:8080/api/v1/auth/register - null null
2025-11-16 19:17:01.432 +03:00 [INF] CORS policy execution successful.
2025-11-16 19:17:01.432 +03:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:8080/api/v1/auth/register - 204 null null 0.8065ms
2025-11-16 19:17:01.434 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:8080/api/v1/auth/register - application/json 149
2025-11-16 19:17:01.434 +03:00 [INF] CORS policy execution successful.
2025-11-16 19:17:01.435 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.AuthController.Register (MappyApplication)'
2025-11-16 19:17:01.439 +03:00 [INF] Route matched with {action = "Register", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.user.AuthResponse] Register(MappyApplication.Models.user.AuthRegister) on controller MappyApplication.Controllers.AuthController (MappyApplication).
2025-11-16 19:17:01.461 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`FirstName`, `a`.`LastName`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`
FROM `AspNetUsers` AS `a`
WHERE `a`.`NormalizedEmail` = @__normalizedEmail_0
LIMIT 2
2025-11-16 19:17:01.462 +03:00 [ERR] Email address already exists
MappyApplication.Exceptions.AppErrorResponse: Email address already exists
   at MappyApplication.Repository.AuthManager.Register(AuthRegister authRegister) in /Users/salah/Desktop/MappyApplication/MappyApplication/Repository/AuthManager.cs:line 45
2025-11-16 19:17:01.462 +03:00 [INF] Executed action MappyApplication.Controllers.AuthController.Register (MappyApplication) in 22.498ms
2025-11-16 19:17:01.462 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.AuthController.Register (MappyApplication)'
2025-11-16 19:17:01.462 +03:00 [ERR] An error occured
MappyApplication.Exceptions.AppErrorResponse: Email address already exists
   at MappyApplication.Repository.AuthManager.Register(AuthRegister authRegister) in /Users/salah/Desktop/MappyApplication/MappyApplication/Repository/AuthManager.cs:line 58
   at MappyApplication.Controllers.AuthController.Register(AuthRegister authRegister) in /Users/salah/Desktop/MappyApplication/MappyApplication/Controllers/AuthController.cs:line 24
   at lambda_method370(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Program.<>c.<<<Main>$>b__0_6>d.MoveNext() in /Users/salah/Desktop/MappyApplication/MappyApplication/Program.cs:line 140
--- End of stack trace from previous location ---
   at MappyApplication.MiddleWare.ExceptionMiddleWare.InvokeAsync(HttpContext ctx) in /Users/salah/Desktop/MappyApplication/MappyApplication/MiddleWare/ExceptionMiddleWare.cs:line 21
2025-11-16 19:17:01.463 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:8080/api/v1/auth/register - 400 null application/json; charset=utf-8 29.235ms
2025-11-16 19:17:05.550 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:8080/api/v1/auth/register - application/json 149
2025-11-16 19:17:05.551 +03:00 [INF] CORS policy execution successful.
2025-11-16 19:17:05.551 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.AuthController.Register (MappyApplication)'
2025-11-16 19:17:05.551 +03:00 [INF] Route matched with {action = "Register", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.user.AuthResponse] Register(MappyApplication.Models.user.AuthRegister) on controller MappyApplication.Controllers.AuthController (MappyApplication).
2025-11-16 19:17:05.576 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`FirstName`, `a`.`LastName`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`
FROM `AspNetUsers` AS `a`
WHERE `a`.`NormalizedEmail` = @__normalizedEmail_0
LIMIT 2
2025-11-16 19:17:05.654 +03:00 [INF] Executed DbCommand (16ms) [Parameters=[@__normalizedUserName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`FirstName`, `a`.`LastName`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`
FROM `AspNetUsers` AS `a`
WHERE `a`.`NormalizedUserName` = @__normalizedUserName_0
LIMIT 1
2025-11-16 19:17:05.656 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`FirstName`, `a`.`LastName`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`
FROM `AspNetUsers` AS `a`
WHERE `a`.`NormalizedEmail` = @__normalizedEmail_0
LIMIT 2
2025-11-16 19:17:05.687 +03:00 [INF] Executed DbCommand (21ms) [Parameters=[@p0='?' (Size = 255), @p1='?' (DbType = Int32), @p2='?' (Size = 4000), @p3='?' (Size = 256), @p4='?' (DbType = Boolean), @p5='?' (Size = 4000), @p6='?' (Size = 4000), @p7='?' (DbType = Boolean), @p8='?' (DbType = DateTimeOffset), @p9='?' (Size = 256), @p10='?' (Size = 256), @p11='?' (Size = 4000), @p12='?' (Size = 4000), @p13='?' (DbType = Boolean), @p14='?' (Size = 4000), @p15='?' (DbType = Boolean), @p16='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SET AUTOCOMMIT = 1;
INSERT INTO `AspNetUsers` (`Id`, `AccessFailedCount`, `ConcurrencyStamp`, `Email`, `EmailConfirmed`, `FirstName`, `LastName`, `LockoutEnabled`, `LockoutEnd`, `NormalizedEmail`, `NormalizedUserName`, `PasswordHash`, `PhoneNumber`, `PhoneNumberConfirmed`, `SecurityStamp`, `TwoFactorEnabled`, `UserName`)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16);
2025-11-16 19:17:05.701 +03:00 [INF] Executed DbCommand (10ms) [Parameters=[@__normalizedRoleName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ConcurrencyStamp`, `a`.`Name`, `a`.`NormalizedName`
FROM `AspNetRoles` AS `a`
WHERE `a`.`NormalizedName` = @__normalizedRoleName_0
LIMIT 2
2025-11-16 19:17:05.716 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (Size = 255), @__p_1='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`UserId`, `a`.`RoleId`
FROM `AspNetUserRoles` AS `a`
WHERE (`a`.`UserId` = @__p_0) AND (`a`.`RoleId` = @__p_1)
LIMIT 1
2025-11-16 19:17:05.717 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__normalizedRoleName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ConcurrencyStamp`, `a`.`Name`, `a`.`NormalizedName`
FROM `AspNetRoles` AS `a`
WHERE `a`.`NormalizedName` = @__normalizedRoleName_0
LIMIT 2
2025-11-16 19:17:05.722 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__normalizedUserName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`FirstName`, `a`.`LastName`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`
FROM `AspNetUsers` AS `a`
WHERE `a`.`NormalizedUserName` = @__normalizedUserName_0
LIMIT 1
2025-11-16 19:17:05.722 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`FirstName`, `a`.`LastName`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`
FROM `AspNetUsers` AS `a`
WHERE `a`.`NormalizedEmail` = @__normalizedEmail_0
LIMIT 2
2025-11-16 19:17:05.740 +03:00 [INF] Executed DbCommand (9ms) [Parameters=[@p0='?' (Size = 255), @p1='?' (Size = 255), @p18='?' (Size = 255), @p2='?' (DbType = Int32), @p3='?' (Size = 4000), @p19='?' (Size = 4000), @p4='?' (Size = 256), @p5='?' (DbType = Boolean), @p6='?' (Size = 4000), @p7='?' (Size = 4000), @p8='?' (DbType = Boolean), @p9='?' (DbType = DateTimeOffset), @p10='?' (Size = 256), @p11='?' (Size = 256), @p12='?' (Size = 4000), @p13='?' (Size = 4000), @p14='?' (DbType = Boolean), @p15='?' (Size = 4000), @p16='?' (DbType = Boolean), @p17='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO `AspNetUserRoles` (`RoleId`, `UserId`)
VALUES (@p0, @p1);
UPDATE `AspNetUsers` SET `AccessFailedCount` = @p2, `ConcurrencyStamp` = @p3, `Email` = @p4, `EmailConfirmed` = @p5, `FirstName` = @p6, `LastName` = @p7, `LockoutEnabled` = @p8, `LockoutEnd` = @p9, `NormalizedEmail` = @p10, `NormalizedUserName` = @p11, `PasswordHash` = @p12, `PhoneNumber` = @p13, `PhoneNumberConfirmed` = @p14, `SecurityStamp` = @p15, `TwoFactorEnabled` = @p16, `UserName` = @p17
WHERE `Id` = @p18 AND `ConcurrencyStamp` = @p19;
SELECT ROW_COUNT();
2025-11-16 19:17:05.745 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']

        UPDATE TOKENS
        SET Revoked = true, Expired = true
        WHERE UserId = @p0
          AND DeviceId = @p1
          AND Revoked = false
          AND Expired = false
2025-11-16 19:17:05.746 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a0`.`Name`
FROM `AspNetUserRoles` AS `a`
INNER JOIN `AspNetRoles` AS `a0` ON `a`.`RoleId` = `a0`.`Id`
WHERE `a`.`UserId` = @__userId_0
2025-11-16 19:17:05.747 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ClaimType`, `a`.`ClaimValue`, `a`.`UserId`
FROM `AspNetUserClaims` AS `a`
WHERE `a`.`UserId` = @__user_Id_0
2025-11-16 19:17:05.749 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a0`.`Name`
FROM `AspNetUserRoles` AS `a`
INNER JOIN `AspNetRoles` AS `a0` ON `a`.`RoleId` = `a0`.`Id`
WHERE `a`.`UserId` = @__userId_0
2025-11-16 19:17:05.749 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ClaimType`, `a`.`ClaimValue`, `a`.`UserId`
FROM `AspNetUserClaims` AS `a`
WHERE `a`.`UserId` = @__user_Id_0
2025-11-16 19:17:05.752 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (DbType = DateTime), @p2='?' (Size = 4000), @p3='?' (DbType = Boolean), @p4='?' (Size = 4000), @p5='?' (DbType = Boolean), @p6='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO `Tokens` (`AccessToken`, `CreatedAt`, `DeviceId`, `Expired`, `RefreshToken`, `Revoked`, `UserId`)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6);
SELECT `Id`
FROM `Tokens`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();
2025-11-16 19:17:05.753 +03:00 [INF] Added Token MappyApplication.Data.Token
2025-11-16 19:17:05.760 +03:00 [INF] Executed DbCommand (7ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessFailedCount`, `t`.`ConcurrencyStamp`, `t`.`Email`, `t`.`EmailConfirmed`, `t`.`FirstName`, `t`.`LastName`, `t`.`LockoutEnabled`, `t`.`LockoutEnd`, `t`.`NormalizedEmail`, `t`.`NormalizedUserName`, `t`.`PasswordHash`, `t`.`PhoneNumber`, `t`.`PhoneNumberConfirmed`, `t`.`SecurityStamp`, `t`.`TwoFactorEnabled`, `t`.`UserName`, `w`.`Id`, `w`.`Cadence`, `w`.`CityName`, `w`.`Coords`, `w`.`Date`, `w`.`Distance`, `w`.`Duration`, `w`.`Emoji`, `w`.`Pace`, `w`.`Type`, `w`.`UserId`, `c`.`Id`, `c`.`CityName`, `c`.`Country`, `c`.`Date`, `c`.`Emoji`, `c`.`Lat`, `c`.`Lng`, `c`.`Notes`, `c`.`UserId`
FROM (
    SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`FirstName`, `a`.`LastName`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`
    FROM `AspNetUsers` AS `a`
    WHERE `a`.`Id` = @__user_Id_0
    LIMIT 2
) AS `t`
LEFT JOIN `Workouts` AS `w` ON `t`.`Id` = `w`.`UserId`
LEFT JOIN `Cities` AS `c` ON `t`.`Id` = `c`.`UserId`
ORDER BY `t`.`Id`, `w`.`Id`
2025-11-16 19:17:05.760 +03:00 [INF] Executing ObjectResult, writing value of type 'MappyApplication.Models.user.AuthResponse'.
2025-11-16 19:17:05.760 +03:00 [INF] Executed action MappyApplication.Controllers.AuthController.Register (MappyApplication) in 208.6155ms
2025-11-16 19:17:05.760 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.AuthController.Register (MappyApplication)'
2025-11-16 19:17:05.760 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:8080/api/v1/auth/register - 200 null application/json; charset=utf-8 209.972ms
2025-11-16 19:18:52.959 +03:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:8080/api/v1/auth/login - null null
2025-11-16 19:18:52.962 +03:00 [INF] CORS policy execution successful.
2025-11-16 19:18:52.963 +03:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:8080/api/v1/auth/login - 204 null null 4.5632ms
2025-11-16 19:18:52.966 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:8080/api/v1/auth/login - application/json 51
2025-11-16 19:18:52.966 +03:00 [INF] CORS policy execution successful.
2025-11-16 19:18:52.971 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.AuthController.Login (MappyApplication)'
2025-11-16 19:18:52.972 +03:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.user.AuthResponse] Login(MappyApplication.Models.user.AuthLogin) on controller MappyApplication.Controllers.AuthController (MappyApplication).
2025-11-16 19:18:53.012 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`FirstName`, `a`.`LastName`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`
FROM `AspNetUsers` AS `a`
WHERE `a`.`NormalizedEmail` = @__normalizedEmail_0
LIMIT 2
2025-11-16 19:18:53.057 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']

        UPDATE TOKENS
        SET Revoked = true, Expired = true
        WHERE UserId = @p0
          AND DeviceId = @p1
          AND Revoked = false
          AND Expired = false
2025-11-16 19:18:53.058 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a0`.`Name`
FROM `AspNetUserRoles` AS `a`
INNER JOIN `AspNetRoles` AS `a0` ON `a`.`RoleId` = `a0`.`Id`
WHERE `a`.`UserId` = @__userId_0
2025-11-16 19:18:53.059 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ClaimType`, `a`.`ClaimValue`, `a`.`UserId`
FROM `AspNetUserClaims` AS `a`
WHERE `a`.`UserId` = @__user_Id_0
2025-11-16 19:18:53.059 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a0`.`Name`
FROM `AspNetUserRoles` AS `a`
INNER JOIN `AspNetRoles` AS `a0` ON `a`.`RoleId` = `a0`.`Id`
WHERE `a`.`UserId` = @__userId_0
2025-11-16 19:18:53.060 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ClaimType`, `a`.`ClaimValue`, `a`.`UserId`
FROM `AspNetUserClaims` AS `a`
WHERE `a`.`UserId` = @__user_Id_0
2025-11-16 19:18:53.063 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (DbType = DateTime), @p2='?' (Size = 4000), @p3='?' (DbType = Boolean), @p4='?' (Size = 4000), @p5='?' (DbType = Boolean), @p6='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO `Tokens` (`AccessToken`, `CreatedAt`, `DeviceId`, `Expired`, `RefreshToken`, `Revoked`, `UserId`)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6);
SELECT `Id`
FROM `Tokens`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();
2025-11-16 19:18:53.064 +03:00 [INF] Added Token MappyApplication.Data.Token
2025-11-16 19:18:53.066 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessFailedCount`, `t`.`ConcurrencyStamp`, `t`.`Email`, `t`.`EmailConfirmed`, `t`.`FirstName`, `t`.`LastName`, `t`.`LockoutEnabled`, `t`.`LockoutEnd`, `t`.`NormalizedEmail`, `t`.`NormalizedUserName`, `t`.`PasswordHash`, `t`.`PhoneNumber`, `t`.`PhoneNumberConfirmed`, `t`.`SecurityStamp`, `t`.`TwoFactorEnabled`, `t`.`UserName`, `w`.`Id`, `w`.`Cadence`, `w`.`CityName`, `w`.`Coords`, `w`.`Date`, `w`.`Distance`, `w`.`Duration`, `w`.`Emoji`, `w`.`Pace`, `w`.`Type`, `w`.`UserId`, `c`.`Id`, `c`.`CityName`, `c`.`Country`, `c`.`Date`, `c`.`Emoji`, `c`.`Lat`, `c`.`Lng`, `c`.`Notes`, `c`.`UserId`
FROM (
    SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`FirstName`, `a`.`LastName`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`
    FROM `AspNetUsers` AS `a`
    WHERE `a`.`Id` = @__user_Id_0
    LIMIT 2
) AS `t`
LEFT JOIN `Workouts` AS `w` ON `t`.`Id` = `w`.`UserId`
LEFT JOIN `Cities` AS `c` ON `t`.`Id` = `c`.`UserId`
ORDER BY `t`.`Id`, `w`.`Id`
2025-11-16 19:18:53.066 +03:00 [INF] Executing ObjectResult, writing value of type 'MappyApplication.Models.user.AuthResponse'.
2025-11-16 19:18:53.067 +03:00 [INF] Executed action MappyApplication.Controllers.AuthController.Login (MappyApplication) in 94.3295ms
2025-11-16 19:18:53.067 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.AuthController.Login (MappyApplication)'
2025-11-16 19:18:53.067 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:8080/api/v1/auth/login - 200 null application/json; charset=utf-8 101.0894ms
2025-11-16 19:18:56.284 +03:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:8080/api/v1/auth/refresh-token - null null
2025-11-16 19:18:56.284 +03:00 [INF] CORS policy execution successful.
2025-11-16 19:18:56.284 +03:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:8080/api/v1/auth/refresh-token - 204 null null 0.4358ms
2025-11-16 19:18:56.285 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:8080/api/v1/auth/refresh-token - null 0
2025-11-16 19:18:56.285 +03:00 [INF] CORS policy execution successful.
2025-11-16 19:18:56.302 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 19:18:56.304 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication)'
2025-11-16 19:18:56.306 +03:00 [INF] Route matched with {action = "RefreshToken", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.user.AuthResponse] RefreshToken() on controller MappyApplication.Controllers.AuthController (MappyApplication).
2025-11-16 19:18:56.308 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__refreshToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`RefreshToken` = @__refreshToken_0
LIMIT 2
2025-11-16 19:18:56.315 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`FirstName`, `a`.`LastName`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`
FROM `AspNetUsers` AS `a`
WHERE `a`.`Id` = @__p_0
LIMIT 1
2025-11-16 19:18:56.340 +03:00 [INF] Executed DbCommand (10ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']

        UPDATE TOKENS
        SET Revoked = true, Expired = true
        WHERE UserId = @p0
          AND DeviceId = @p1
          AND Revoked = false
          AND Expired = false
2025-11-16 19:18:56.342 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a0`.`Name`
FROM `AspNetUserRoles` AS `a`
INNER JOIN `AspNetRoles` AS `a0` ON `a`.`RoleId` = `a0`.`Id`
WHERE `a`.`UserId` = @__userId_0
2025-11-16 19:18:56.343 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ClaimType`, `a`.`ClaimValue`, `a`.`UserId`
FROM `AspNetUserClaims` AS `a`
WHERE `a`.`UserId` = @__user_Id_0
2025-11-16 19:18:56.344 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a0`.`Name`
FROM `AspNetUserRoles` AS `a`
INNER JOIN `AspNetRoles` AS `a0` ON `a`.`RoleId` = `a0`.`Id`
WHERE `a`.`UserId` = @__userId_0
2025-11-16 19:18:56.344 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ClaimType`, `a`.`ClaimValue`, `a`.`UserId`
FROM `AspNetUserClaims` AS `a`
WHERE `a`.`UserId` = @__user_Id_0
2025-11-16 19:18:56.346 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (DbType = DateTime), @p2='?' (Size = 4000), @p3='?' (DbType = Boolean), @p4='?' (Size = 4000), @p5='?' (DbType = Boolean), @p6='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO `Tokens` (`AccessToken`, `CreatedAt`, `DeviceId`, `Expired`, `RefreshToken`, `Revoked`, `UserId`)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6);
SELECT `Id`
FROM `Tokens`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();
2025-11-16 19:18:56.347 +03:00 [INF] Added Token MappyApplication.Data.Token
2025-11-16 19:18:56.351 +03:00 [INF] Executed DbCommand (4ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessFailedCount`, `t`.`ConcurrencyStamp`, `t`.`Email`, `t`.`EmailConfirmed`, `t`.`FirstName`, `t`.`LastName`, `t`.`LockoutEnabled`, `t`.`LockoutEnd`, `t`.`NormalizedEmail`, `t`.`NormalizedUserName`, `t`.`PasswordHash`, `t`.`PhoneNumber`, `t`.`PhoneNumberConfirmed`, `t`.`SecurityStamp`, `t`.`TwoFactorEnabled`, `t`.`UserName`, `w`.`Id`, `w`.`Cadence`, `w`.`CityName`, `w`.`Coords`, `w`.`Date`, `w`.`Distance`, `w`.`Duration`, `w`.`Emoji`, `w`.`Pace`, `w`.`Type`, `w`.`UserId`, `c`.`Id`, `c`.`CityName`, `c`.`Country`, `c`.`Date`, `c`.`Emoji`, `c`.`Lat`, `c`.`Lng`, `c`.`Notes`, `c`.`UserId`
FROM (
    SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`FirstName`, `a`.`LastName`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`
    FROM `AspNetUsers` AS `a`
    WHERE `a`.`Id` = @__user_Id_0
    LIMIT 2
) AS `t`
LEFT JOIN `Workouts` AS `w` ON `t`.`Id` = `w`.`UserId`
LEFT JOIN `Cities` AS `c` ON `t`.`Id` = `c`.`UserId`
ORDER BY `t`.`Id`, `w`.`Id`
2025-11-16 19:18:56.351 +03:00 [INF] Executing ObjectResult, writing value of type 'MappyApplication.Models.user.AuthResponse'.
2025-11-16 19:18:56.352 +03:00 [INF] Executed action MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication) in 45.2257ms
2025-11-16 19:18:56.352 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication)'
2025-11-16 19:18:56.352 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:8080/api/v1/auth/refresh-token - 200 null application/json; charset=utf-8 66.4017ms
2025-11-16 19:19:00.605 +03:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:8080/api/v1/auth/logout - null null
2025-11-16 19:19:00.607 +03:00 [INF] CORS policy execution successful.
2025-11-16 19:19:00.608 +03:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:8080/api/v1/auth/logout - 204 null null 3.1855ms
2025-11-16 19:19:00.610 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:8080/api/v1/auth/logout - null null
2025-11-16 19:19:00.611 +03:00 [INF] CORS policy execution successful.
2025-11-16 19:19:00.636 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 19:19:00.637 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.AuthController.Logout (MappyApplication)'
2025-11-16 19:19:00.637 +03:00 [INF] Route matched with {action = "Logout", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Logout() on controller MappyApplication.Controllers.AuthController (MappyApplication).
2025-11-16 19:19:00.639 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__refreshToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`RefreshToken` = @__refreshToken_0
LIMIT 2
2025-11-16 19:19:00.643 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']

        UPDATE TOKENS
        SET Revoked = true, Expired = true
        WHERE UserId = @p0
          AND DeviceId = @p1
          AND Revoked = false
          AND Expired = false
2025-11-16 19:19:00.643 +03:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType0`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-11-16 19:19:00.644 +03:00 [INF] Executed action MappyApplication.Controllers.AuthController.Logout (MappyApplication) in 6.2602ms
2025-11-16 19:19:00.644 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.AuthController.Logout (MappyApplication)'
2025-11-16 19:19:00.644 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:8080/api/v1/auth/logout - 200 null application/json; charset=utf-8 33.9833ms
2025-11-16 19:31:30.172 +03:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:8080/api/v1/auth/login - null null
2025-11-16 19:31:30.175 +03:00 [INF] CORS policy execution successful.
2025-11-16 19:31:30.177 +03:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:8080/api/v1/auth/login - 204 null null 4.0812ms
2025-11-16 19:31:30.179 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:8080/api/v1/auth/login - application/json 51
2025-11-16 19:31:30.179 +03:00 [INF] CORS policy execution successful.
2025-11-16 19:31:30.181 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.AuthController.Login (MappyApplication)'
2025-11-16 19:31:30.184 +03:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.user.AuthResponse] Login(MappyApplication.Models.user.AuthLogin) on controller MappyApplication.Controllers.AuthController (MappyApplication).
2025-11-16 19:31:30.310 +03:00 [INF] Executed DbCommand (29ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`FirstName`, `a`.`LastName`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`
FROM `AspNetUsers` AS `a`
WHERE `a`.`NormalizedEmail` = @__normalizedEmail_0
LIMIT 2
2025-11-16 19:31:30.349 +03:00 [INF] Executed DbCommand (4ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']

        UPDATE TOKENS
        SET Revoked = true, Expired = true
        WHERE UserId = @p0
          AND DeviceId = @p1
          AND Revoked = false
          AND Expired = false
2025-11-16 19:31:30.353 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a0`.`Name`
FROM `AspNetUserRoles` AS `a`
INNER JOIN `AspNetRoles` AS `a0` ON `a`.`RoleId` = `a0`.`Id`
WHERE `a`.`UserId` = @__userId_0
2025-11-16 19:31:30.353 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ClaimType`, `a`.`ClaimValue`, `a`.`UserId`
FROM `AspNetUserClaims` AS `a`
WHERE `a`.`UserId` = @__user_Id_0
2025-11-16 19:31:30.355 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a0`.`Name`
FROM `AspNetUserRoles` AS `a`
INNER JOIN `AspNetRoles` AS `a0` ON `a`.`RoleId` = `a0`.`Id`
WHERE `a`.`UserId` = @__userId_0
2025-11-16 19:31:30.355 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ClaimType`, `a`.`ClaimValue`, `a`.`UserId`
FROM `AspNetUserClaims` AS `a`
WHERE `a`.`UserId` = @__user_Id_0
2025-11-16 19:31:30.375 +03:00 [INF] Executed DbCommand (16ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (DbType = DateTime), @p2='?' (Size = 4000), @p3='?' (DbType = Boolean), @p4='?' (Size = 4000), @p5='?' (DbType = Boolean), @p6='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO `Tokens` (`AccessToken`, `CreatedAt`, `DeviceId`, `Expired`, `RefreshToken`, `Revoked`, `UserId`)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6);
SELECT `Id`
FROM `Tokens`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();
2025-11-16 19:31:30.381 +03:00 [INF] Added Token MappyApplication.Data.Token
2025-11-16 19:31:30.387 +03:00 [INF] Executed DbCommand (6ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessFailedCount`, `t`.`ConcurrencyStamp`, `t`.`Email`, `t`.`EmailConfirmed`, `t`.`FirstName`, `t`.`LastName`, `t`.`LockoutEnabled`, `t`.`LockoutEnd`, `t`.`NormalizedEmail`, `t`.`NormalizedUserName`, `t`.`PasswordHash`, `t`.`PhoneNumber`, `t`.`PhoneNumberConfirmed`, `t`.`SecurityStamp`, `t`.`TwoFactorEnabled`, `t`.`UserName`, `w`.`Id`, `w`.`Cadence`, `w`.`CityName`, `w`.`Coords`, `w`.`Date`, `w`.`Distance`, `w`.`Duration`, `w`.`Emoji`, `w`.`Pace`, `w`.`Type`, `w`.`UserId`, `c`.`Id`, `c`.`CityName`, `c`.`Country`, `c`.`Date`, `c`.`Emoji`, `c`.`Lat`, `c`.`Lng`, `c`.`Notes`, `c`.`UserId`
FROM (
    SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`FirstName`, `a`.`LastName`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`
    FROM `AspNetUsers` AS `a`
    WHERE `a`.`Id` = @__user_Id_0
    LIMIT 2
) AS `t`
LEFT JOIN `Workouts` AS `w` ON `t`.`Id` = `w`.`UserId`
LEFT JOIN `Cities` AS `c` ON `t`.`Id` = `c`.`UserId`
ORDER BY `t`.`Id`, `w`.`Id`
2025-11-16 19:31:30.387 +03:00 [INF] Executing ObjectResult, writing value of type 'MappyApplication.Models.user.AuthResponse'.
2025-11-16 19:31:30.388 +03:00 [INF] Executed action MappyApplication.Controllers.AuthController.Login (MappyApplication) in 203.7548ms
2025-11-16 19:31:30.388 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.AuthController.Login (MappyApplication)'
2025-11-16 19:31:30.388 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:8080/api/v1/auth/login - 200 null application/json; charset=utf-8 208.9061ms
2025-11-16 19:32:24.853 +03:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:8080/api/v1/auth/refresh-token - null null
2025-11-16 19:32:24.857 +03:00 [INF] CORS policy execution successful.
2025-11-16 19:32:24.857 +03:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:8080/api/v1/auth/refresh-token - 204 null null 3.8296ms
2025-11-16 19:32:24.858 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:8080/api/v1/auth/refresh-token - null 0
2025-11-16 19:32:24.859 +03:00 [INF] CORS policy execution successful.
2025-11-16 19:32:24.885 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 19:32:24.886 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication)'
2025-11-16 19:32:24.887 +03:00 [INF] Route matched with {action = "RefreshToken", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.user.AuthResponse] RefreshToken() on controller MappyApplication.Controllers.AuthController (MappyApplication).
2025-11-16 19:32:24.888 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__refreshToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`RefreshToken` = @__refreshToken_0
LIMIT 2
2025-11-16 19:32:24.894 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`FirstName`, `a`.`LastName`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`
FROM `AspNetUsers` AS `a`
WHERE `a`.`Id` = @__p_0
LIMIT 1
2025-11-16 19:32:24.900 +03:00 [INF] Executed DbCommand (5ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']

        UPDATE TOKENS
        SET Revoked = true, Expired = true
        WHERE UserId = @p0
          AND DeviceId = @p1
          AND Revoked = false
          AND Expired = false
2025-11-16 19:32:24.902 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a0`.`Name`
FROM `AspNetUserRoles` AS `a`
INNER JOIN `AspNetRoles` AS `a0` ON `a`.`RoleId` = `a0`.`Id`
WHERE `a`.`UserId` = @__userId_0
2025-11-16 19:32:24.903 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ClaimType`, `a`.`ClaimValue`, `a`.`UserId`
FROM `AspNetUserClaims` AS `a`
WHERE `a`.`UserId` = @__user_Id_0
2025-11-16 19:32:24.904 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a0`.`Name`
FROM `AspNetUserRoles` AS `a`
INNER JOIN `AspNetRoles` AS `a0` ON `a`.`RoleId` = `a0`.`Id`
WHERE `a`.`UserId` = @__userId_0
2025-11-16 19:32:24.904 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ClaimType`, `a`.`ClaimValue`, `a`.`UserId`
FROM `AspNetUserClaims` AS `a`
WHERE `a`.`UserId` = @__user_Id_0
2025-11-16 19:32:24.907 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (DbType = DateTime), @p2='?' (Size = 4000), @p3='?' (DbType = Boolean), @p4='?' (Size = 4000), @p5='?' (DbType = Boolean), @p6='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO `Tokens` (`AccessToken`, `CreatedAt`, `DeviceId`, `Expired`, `RefreshToken`, `Revoked`, `UserId`)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6);
SELECT `Id`
FROM `Tokens`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();
2025-11-16 19:32:24.907 +03:00 [INF] Added Token MappyApplication.Data.Token
2025-11-16 19:32:24.910 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessFailedCount`, `t`.`ConcurrencyStamp`, `t`.`Email`, `t`.`EmailConfirmed`, `t`.`FirstName`, `t`.`LastName`, `t`.`LockoutEnabled`, `t`.`LockoutEnd`, `t`.`NormalizedEmail`, `t`.`NormalizedUserName`, `t`.`PasswordHash`, `t`.`PhoneNumber`, `t`.`PhoneNumberConfirmed`, `t`.`SecurityStamp`, `t`.`TwoFactorEnabled`, `t`.`UserName`, `w`.`Id`, `w`.`Cadence`, `w`.`CityName`, `w`.`Coords`, `w`.`Date`, `w`.`Distance`, `w`.`Duration`, `w`.`Emoji`, `w`.`Pace`, `w`.`Type`, `w`.`UserId`, `c`.`Id`, `c`.`CityName`, `c`.`Country`, `c`.`Date`, `c`.`Emoji`, `c`.`Lat`, `c`.`Lng`, `c`.`Notes`, `c`.`UserId`
FROM (
    SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`FirstName`, `a`.`LastName`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`
    FROM `AspNetUsers` AS `a`
    WHERE `a`.`Id` = @__user_Id_0
    LIMIT 2
) AS `t`
LEFT JOIN `Workouts` AS `w` ON `t`.`Id` = `w`.`UserId`
LEFT JOIN `Cities` AS `c` ON `t`.`Id` = `c`.`UserId`
ORDER BY `t`.`Id`, `w`.`Id`
2025-11-16 19:32:24.910 +03:00 [INF] Executing ObjectResult, writing value of type 'MappyApplication.Models.user.AuthResponse'.
2025-11-16 19:32:24.911 +03:00 [INF] Executed action MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication) in 23.9467ms
2025-11-16 19:32:24.911 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication)'
2025-11-16 19:32:24.911 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:8080/api/v1/auth/refresh-token - 200 null application/json; charset=utf-8 52.9738ms
2025-11-16 19:32:26.039 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:8080/api/v1/auth/refresh-token - null 0
2025-11-16 19:32:26.040 +03:00 [INF] CORS policy execution successful.
2025-11-16 19:32:26.061 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 19:32:26.061 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication)'
2025-11-16 19:32:26.062 +03:00 [INF] Route matched with {action = "RefreshToken", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.user.AuthResponse] RefreshToken() on controller MappyApplication.Controllers.AuthController (MappyApplication).
2025-11-16 19:32:26.063 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__refreshToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`RefreshToken` = @__refreshToken_0
LIMIT 2
2025-11-16 19:32:26.063 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`FirstName`, `a`.`LastName`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`
FROM `AspNetUsers` AS `a`
WHERE `a`.`Id` = @__p_0
LIMIT 1
2025-11-16 19:32:26.066 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']

        UPDATE TOKENS
        SET Revoked = true, Expired = true
        WHERE UserId = @p0
          AND DeviceId = @p1
          AND Revoked = false
          AND Expired = false
2025-11-16 19:32:26.068 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a0`.`Name`
FROM `AspNetUserRoles` AS `a`
INNER JOIN `AspNetRoles` AS `a0` ON `a`.`RoleId` = `a0`.`Id`
WHERE `a`.`UserId` = @__userId_0
2025-11-16 19:32:26.068 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ClaimType`, `a`.`ClaimValue`, `a`.`UserId`
FROM `AspNetUserClaims` AS `a`
WHERE `a`.`UserId` = @__user_Id_0
2025-11-16 19:32:26.069 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a0`.`Name`
FROM `AspNetUserRoles` AS `a`
INNER JOIN `AspNetRoles` AS `a0` ON `a`.`RoleId` = `a0`.`Id`
WHERE `a`.`UserId` = @__userId_0
2025-11-16 19:32:26.069 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ClaimType`, `a`.`ClaimValue`, `a`.`UserId`
FROM `AspNetUserClaims` AS `a`
WHERE `a`.`UserId` = @__user_Id_0
2025-11-16 19:32:26.072 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (DbType = DateTime), @p2='?' (Size = 4000), @p3='?' (DbType = Boolean), @p4='?' (Size = 4000), @p5='?' (DbType = Boolean), @p6='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO `Tokens` (`AccessToken`, `CreatedAt`, `DeviceId`, `Expired`, `RefreshToken`, `Revoked`, `UserId`)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6);
SELECT `Id`
FROM `Tokens`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();
2025-11-16 19:32:26.072 +03:00 [INF] Added Token MappyApplication.Data.Token
2025-11-16 19:32:26.074 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessFailedCount`, `t`.`ConcurrencyStamp`, `t`.`Email`, `t`.`EmailConfirmed`, `t`.`FirstName`, `t`.`LastName`, `t`.`LockoutEnabled`, `t`.`LockoutEnd`, `t`.`NormalizedEmail`, `t`.`NormalizedUserName`, `t`.`PasswordHash`, `t`.`PhoneNumber`, `t`.`PhoneNumberConfirmed`, `t`.`SecurityStamp`, `t`.`TwoFactorEnabled`, `t`.`UserName`, `w`.`Id`, `w`.`Cadence`, `w`.`CityName`, `w`.`Coords`, `w`.`Date`, `w`.`Distance`, `w`.`Duration`, `w`.`Emoji`, `w`.`Pace`, `w`.`Type`, `w`.`UserId`, `c`.`Id`, `c`.`CityName`, `c`.`Country`, `c`.`Date`, `c`.`Emoji`, `c`.`Lat`, `c`.`Lng`, `c`.`Notes`, `c`.`UserId`
FROM (
    SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`FirstName`, `a`.`LastName`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`
    FROM `AspNetUsers` AS `a`
    WHERE `a`.`Id` = @__user_Id_0
    LIMIT 2
) AS `t`
LEFT JOIN `Workouts` AS `w` ON `t`.`Id` = `w`.`UserId`
LEFT JOIN `Cities` AS `c` ON `t`.`Id` = `c`.`UserId`
ORDER BY `t`.`Id`, `w`.`Id`
2025-11-16 19:32:26.074 +03:00 [INF] Executing ObjectResult, writing value of type 'MappyApplication.Models.user.AuthResponse'.
2025-11-16 19:32:26.075 +03:00 [INF] Executed action MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication) in 12.9968ms
2025-11-16 19:32:26.075 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication)'
2025-11-16 19:32:26.075 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:8080/api/v1/auth/refresh-token - 200 null application/json; charset=utf-8 35.6297ms
2025-11-16 19:32:28.135 +03:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:8080/api/v1/auth/logout - null null
2025-11-16 19:32:28.135 +03:00 [INF] CORS policy execution successful.
2025-11-16 19:32:28.135 +03:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:8080/api/v1/auth/logout - 204 null null 0.7818ms
2025-11-16 19:32:28.137 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:8080/api/v1/auth/logout - null null
2025-11-16 19:32:28.138 +03:00 [INF] CORS policy execution successful.
2025-11-16 19:32:28.160 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 19:32:28.161 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.AuthController.Logout (MappyApplication)'
2025-11-16 19:32:28.161 +03:00 [INF] Route matched with {action = "Logout", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Logout() on controller MappyApplication.Controllers.AuthController (MappyApplication).
2025-11-16 19:32:28.163 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__refreshToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`RefreshToken` = @__refreshToken_0
LIMIT 2
2025-11-16 19:32:28.167 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']

        UPDATE TOKENS
        SET Revoked = true, Expired = true
        WHERE UserId = @p0
          AND DeviceId = @p1
          AND Revoked = false
          AND Expired = false
2025-11-16 19:32:28.168 +03:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType0`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-11-16 19:32:28.168 +03:00 [INF] Executed action MappyApplication.Controllers.AuthController.Logout (MappyApplication) in 6.7105ms
2025-11-16 19:32:28.168 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.AuthController.Logout (MappyApplication)'
2025-11-16 19:32:28.168 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:8080/api/v1/auth/logout - 200 null application/json; charset=utf-8 30.8615ms
2025-11-16 19:32:31.868 +03:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:8080/api/v1/auth/login - null null
2025-11-16 19:32:31.868 +03:00 [INF] CORS policy execution successful.
2025-11-16 19:32:31.868 +03:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:8080/api/v1/auth/login - 204 null null 0.6939ms
2025-11-16 19:32:31.872 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:8080/api/v1/auth/login - application/json 51
2025-11-16 19:32:31.872 +03:00 [INF] CORS policy execution successful.
2025-11-16 19:32:31.872 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.AuthController.Login (MappyApplication)'
2025-11-16 19:32:31.873 +03:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.user.AuthResponse] Login(MappyApplication.Models.user.AuthLogin) on controller MappyApplication.Controllers.AuthController (MappyApplication).
2025-11-16 19:32:31.899 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`FirstName`, `a`.`LastName`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`
FROM `AspNetUsers` AS `a`
WHERE `a`.`NormalizedEmail` = @__normalizedEmail_0
LIMIT 2
2025-11-16 19:32:31.950 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']

        UPDATE TOKENS
        SET Revoked = true, Expired = true
        WHERE UserId = @p0
          AND DeviceId = @p1
          AND Revoked = false
          AND Expired = false
2025-11-16 19:32:31.951 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a0`.`Name`
FROM `AspNetUserRoles` AS `a`
INNER JOIN `AspNetRoles` AS `a0` ON `a`.`RoleId` = `a0`.`Id`
WHERE `a`.`UserId` = @__userId_0
2025-11-16 19:32:31.952 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ClaimType`, `a`.`ClaimValue`, `a`.`UserId`
FROM `AspNetUserClaims` AS `a`
WHERE `a`.`UserId` = @__user_Id_0
2025-11-16 19:32:31.953 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a0`.`Name`
FROM `AspNetUserRoles` AS `a`
INNER JOIN `AspNetRoles` AS `a0` ON `a`.`RoleId` = `a0`.`Id`
WHERE `a`.`UserId` = @__userId_0
2025-11-16 19:32:31.954 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ClaimType`, `a`.`ClaimValue`, `a`.`UserId`
FROM `AspNetUserClaims` AS `a`
WHERE `a`.`UserId` = @__user_Id_0
2025-11-16 19:32:31.956 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (DbType = DateTime), @p2='?' (Size = 4000), @p3='?' (DbType = Boolean), @p4='?' (Size = 4000), @p5='?' (DbType = Boolean), @p6='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO `Tokens` (`AccessToken`, `CreatedAt`, `DeviceId`, `Expired`, `RefreshToken`, `Revoked`, `UserId`)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6);
SELECT `Id`
FROM `Tokens`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();
2025-11-16 19:32:31.957 +03:00 [INF] Added Token MappyApplication.Data.Token
2025-11-16 19:32:31.959 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessFailedCount`, `t`.`ConcurrencyStamp`, `t`.`Email`, `t`.`EmailConfirmed`, `t`.`FirstName`, `t`.`LastName`, `t`.`LockoutEnabled`, `t`.`LockoutEnd`, `t`.`NormalizedEmail`, `t`.`NormalizedUserName`, `t`.`PasswordHash`, `t`.`PhoneNumber`, `t`.`PhoneNumberConfirmed`, `t`.`SecurityStamp`, `t`.`TwoFactorEnabled`, `t`.`UserName`, `w`.`Id`, `w`.`Cadence`, `w`.`CityName`, `w`.`Coords`, `w`.`Date`, `w`.`Distance`, `w`.`Duration`, `w`.`Emoji`, `w`.`Pace`, `w`.`Type`, `w`.`UserId`, `c`.`Id`, `c`.`CityName`, `c`.`Country`, `c`.`Date`, `c`.`Emoji`, `c`.`Lat`, `c`.`Lng`, `c`.`Notes`, `c`.`UserId`
FROM (
    SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`FirstName`, `a`.`LastName`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`
    FROM `AspNetUsers` AS `a`
    WHERE `a`.`Id` = @__user_Id_0
    LIMIT 2
) AS `t`
LEFT JOIN `Workouts` AS `w` ON `t`.`Id` = `w`.`UserId`
LEFT JOIN `Cities` AS `c` ON `t`.`Id` = `c`.`UserId`
ORDER BY `t`.`Id`, `w`.`Id`
2025-11-16 19:32:31.959 +03:00 [INF] Executing ObjectResult, writing value of type 'MappyApplication.Models.user.AuthResponse'.
2025-11-16 19:32:31.959 +03:00 [INF] Executed action MappyApplication.Controllers.AuthController.Login (MappyApplication) in 86.7194ms
2025-11-16 19:32:31.959 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.AuthController.Login (MappyApplication)'
2025-11-16 19:32:31.960 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:8080/api/v1/auth/login - 200 null application/json; charset=utf-8 88.003ms
2025-11-16 19:34:39.415 +03:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:8080/api/v1/auth/refresh-token - null null
2025-11-16 19:34:39.422 +03:00 [INF] CORS policy execution successful.
2025-11-16 19:34:39.433 +03:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:8080/api/v1/auth/refresh-token - 204 null null 18.7372ms
2025-11-16 19:34:39.435 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:8080/api/v1/auth/refresh-token - null 0
2025-11-16 19:34:39.436 +03:00 [INF] CORS policy execution successful.
2025-11-16 19:34:39.482 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 19:34:39.483 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication)'
2025-11-16 19:34:39.483 +03:00 [INF] Route matched with {action = "RefreshToken", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.user.AuthResponse] RefreshToken() on controller MappyApplication.Controllers.AuthController (MappyApplication).
2025-11-16 19:34:39.486 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__refreshToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`RefreshToken` = @__refreshToken_0
LIMIT 2
2025-11-16 19:34:39.492 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`FirstName`, `a`.`LastName`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`
FROM `AspNetUsers` AS `a`
WHERE `a`.`Id` = @__p_0
LIMIT 1
2025-11-16 19:34:39.502 +03:00 [INF] Executed DbCommand (9ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']

        UPDATE TOKENS
        SET Revoked = true, Expired = true
        WHERE UserId = @p0
          AND DeviceId = @p1
          AND Revoked = false
          AND Expired = false
2025-11-16 19:34:39.505 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a0`.`Name`
FROM `AspNetUserRoles` AS `a`
INNER JOIN `AspNetRoles` AS `a0` ON `a`.`RoleId` = `a0`.`Id`
WHERE `a`.`UserId` = @__userId_0
2025-11-16 19:34:39.506 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ClaimType`, `a`.`ClaimValue`, `a`.`UserId`
FROM `AspNetUserClaims` AS `a`
WHERE `a`.`UserId` = @__user_Id_0
2025-11-16 19:34:39.507 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a0`.`Name`
FROM `AspNetUserRoles` AS `a`
INNER JOIN `AspNetRoles` AS `a0` ON `a`.`RoleId` = `a0`.`Id`
WHERE `a`.`UserId` = @__userId_0
2025-11-16 19:34:39.507 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ClaimType`, `a`.`ClaimValue`, `a`.`UserId`
FROM `AspNetUserClaims` AS `a`
WHERE `a`.`UserId` = @__user_Id_0
2025-11-16 19:34:39.510 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (DbType = DateTime), @p2='?' (Size = 4000), @p3='?' (DbType = Boolean), @p4='?' (Size = 4000), @p5='?' (DbType = Boolean), @p6='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO `Tokens` (`AccessToken`, `CreatedAt`, `DeviceId`, `Expired`, `RefreshToken`, `Revoked`, `UserId`)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6);
SELECT `Id`
FROM `Tokens`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();
2025-11-16 19:34:39.511 +03:00 [INF] Added Token MappyApplication.Data.Token
2025-11-16 19:34:39.513 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessFailedCount`, `t`.`ConcurrencyStamp`, `t`.`Email`, `t`.`EmailConfirmed`, `t`.`FirstName`, `t`.`LastName`, `t`.`LockoutEnabled`, `t`.`LockoutEnd`, `t`.`NormalizedEmail`, `t`.`NormalizedUserName`, `t`.`PasswordHash`, `t`.`PhoneNumber`, `t`.`PhoneNumberConfirmed`, `t`.`SecurityStamp`, `t`.`TwoFactorEnabled`, `t`.`UserName`, `w`.`Id`, `w`.`Cadence`, `w`.`CityName`, `w`.`Coords`, `w`.`Date`, `w`.`Distance`, `w`.`Duration`, `w`.`Emoji`, `w`.`Pace`, `w`.`Type`, `w`.`UserId`, `c`.`Id`, `c`.`CityName`, `c`.`Country`, `c`.`Date`, `c`.`Emoji`, `c`.`Lat`, `c`.`Lng`, `c`.`Notes`, `c`.`UserId`
FROM (
    SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`FirstName`, `a`.`LastName`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`
    FROM `AspNetUsers` AS `a`
    WHERE `a`.`Id` = @__user_Id_0
    LIMIT 2
) AS `t`
LEFT JOIN `Workouts` AS `w` ON `t`.`Id` = `w`.`UserId`
LEFT JOIN `Cities` AS `c` ON `t`.`Id` = `c`.`UserId`
ORDER BY `t`.`Id`, `w`.`Id`
2025-11-16 19:34:39.513 +03:00 [INF] Executing ObjectResult, writing value of type 'MappyApplication.Models.user.AuthResponse'.
2025-11-16 19:34:39.513 +03:00 [INF] Executed action MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication) in 29.8513ms
2025-11-16 19:34:39.513 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication)'
2025-11-16 19:34:39.513 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:8080/api/v1/auth/refresh-token - 200 null application/json; charset=utf-8 78.4345ms
2025-11-16 19:35:58.271 +03:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:8080/api/v1/auth/refresh-token - null null
2025-11-16 19:35:58.273 +03:00 [INF] CORS policy execution successful.
2025-11-16 19:35:58.274 +03:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:8080/api/v1/auth/refresh-token - 204 null null 2.7639ms
2025-11-16 19:35:58.274 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:8080/api/v1/auth/refresh-token - null 0
2025-11-16 19:35:58.274 +03:00 [INF] CORS policy execution successful.
2025-11-16 19:35:58.307 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 19:35:58.308 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication)'
2025-11-16 19:35:58.309 +03:00 [INF] Route matched with {action = "RefreshToken", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.user.AuthResponse] RefreshToken() on controller MappyApplication.Controllers.AuthController (MappyApplication).
2025-11-16 19:35:58.311 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__refreshToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`RefreshToken` = @__refreshToken_0
LIMIT 2
2025-11-16 19:35:58.313 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`FirstName`, `a`.`LastName`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`
FROM `AspNetUsers` AS `a`
WHERE `a`.`Id` = @__p_0
LIMIT 1
2025-11-16 19:35:58.317 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']

        UPDATE TOKENS
        SET Revoked = true, Expired = true
        WHERE UserId = @p0
          AND DeviceId = @p1
          AND Revoked = false
          AND Expired = false
2025-11-16 19:35:58.319 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a0`.`Name`
FROM `AspNetUserRoles` AS `a`
INNER JOIN `AspNetRoles` AS `a0` ON `a`.`RoleId` = `a0`.`Id`
WHERE `a`.`UserId` = @__userId_0
2025-11-16 19:35:58.320 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ClaimType`, `a`.`ClaimValue`, `a`.`UserId`
FROM `AspNetUserClaims` AS `a`
WHERE `a`.`UserId` = @__user_Id_0
2025-11-16 19:35:58.321 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a0`.`Name`
FROM `AspNetUserRoles` AS `a`
INNER JOIN `AspNetRoles` AS `a0` ON `a`.`RoleId` = `a0`.`Id`
WHERE `a`.`UserId` = @__userId_0
2025-11-16 19:35:58.322 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ClaimType`, `a`.`ClaimValue`, `a`.`UserId`
FROM `AspNetUserClaims` AS `a`
WHERE `a`.`UserId` = @__user_Id_0
2025-11-16 19:35:58.328 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (DbType = DateTime), @p2='?' (Size = 4000), @p3='?' (DbType = Boolean), @p4='?' (Size = 4000), @p5='?' (DbType = Boolean), @p6='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO `Tokens` (`AccessToken`, `CreatedAt`, `DeviceId`, `Expired`, `RefreshToken`, `Revoked`, `UserId`)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6);
SELECT `Id`
FROM `Tokens`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();
2025-11-16 19:35:58.329 +03:00 [INF] Added Token MappyApplication.Data.Token
2025-11-16 19:35:58.332 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessFailedCount`, `t`.`ConcurrencyStamp`, `t`.`Email`, `t`.`EmailConfirmed`, `t`.`FirstName`, `t`.`LastName`, `t`.`LockoutEnabled`, `t`.`LockoutEnd`, `t`.`NormalizedEmail`, `t`.`NormalizedUserName`, `t`.`PasswordHash`, `t`.`PhoneNumber`, `t`.`PhoneNumberConfirmed`, `t`.`SecurityStamp`, `t`.`TwoFactorEnabled`, `t`.`UserName`, `w`.`Id`, `w`.`Cadence`, `w`.`CityName`, `w`.`Coords`, `w`.`Date`, `w`.`Distance`, `w`.`Duration`, `w`.`Emoji`, `w`.`Pace`, `w`.`Type`, `w`.`UserId`, `c`.`Id`, `c`.`CityName`, `c`.`Country`, `c`.`Date`, `c`.`Emoji`, `c`.`Lat`, `c`.`Lng`, `c`.`Notes`, `c`.`UserId`
FROM (
    SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`FirstName`, `a`.`LastName`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`
    FROM `AspNetUsers` AS `a`
    WHERE `a`.`Id` = @__user_Id_0
    LIMIT 2
) AS `t`
LEFT JOIN `Workouts` AS `w` ON `t`.`Id` = `w`.`UserId`
LEFT JOIN `Cities` AS `c` ON `t`.`Id` = `c`.`UserId`
ORDER BY `t`.`Id`, `w`.`Id`
2025-11-16 19:35:58.332 +03:00 [INF] Executing ObjectResult, writing value of type 'MappyApplication.Models.user.AuthResponse'.
2025-11-16 19:35:58.332 +03:00 [INF] Executed action MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication) in 23.3314ms
2025-11-16 19:35:58.332 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication)'
2025-11-16 19:35:58.332 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:8080/api/v1/auth/refresh-token - 200 null application/json; charset=utf-8 58.131ms
2025-11-16 19:36:00.938 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:8080/api/v1/auth/refresh-token - null 0
2025-11-16 19:36:00.938 +03:00 [INF] CORS policy execution successful.
2025-11-16 19:36:00.961 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 19:36:00.962 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication)'
2025-11-16 19:36:00.962 +03:00 [INF] Route matched with {action = "RefreshToken", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.user.AuthResponse] RefreshToken() on controller MappyApplication.Controllers.AuthController (MappyApplication).
2025-11-16 19:36:00.963 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__refreshToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`RefreshToken` = @__refreshToken_0
LIMIT 2
2025-11-16 19:36:00.964 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`FirstName`, `a`.`LastName`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`
FROM `AspNetUsers` AS `a`
WHERE `a`.`Id` = @__p_0
LIMIT 1
2025-11-16 19:36:00.967 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']

        UPDATE TOKENS
        SET Revoked = true, Expired = true
        WHERE UserId = @p0
          AND DeviceId = @p1
          AND Revoked = false
          AND Expired = false
2025-11-16 19:36:00.968 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a0`.`Name`
FROM `AspNetUserRoles` AS `a`
INNER JOIN `AspNetRoles` AS `a0` ON `a`.`RoleId` = `a0`.`Id`
WHERE `a`.`UserId` = @__userId_0
2025-11-16 19:36:00.969 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ClaimType`, `a`.`ClaimValue`, `a`.`UserId`
FROM `AspNetUserClaims` AS `a`
WHERE `a`.`UserId` = @__user_Id_0
2025-11-16 19:36:00.970 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a0`.`Name`
FROM `AspNetUserRoles` AS `a`
INNER JOIN `AspNetRoles` AS `a0` ON `a`.`RoleId` = `a0`.`Id`
WHERE `a`.`UserId` = @__userId_0
2025-11-16 19:36:00.970 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ClaimType`, `a`.`ClaimValue`, `a`.`UserId`
FROM `AspNetUserClaims` AS `a`
WHERE `a`.`UserId` = @__user_Id_0
2025-11-16 19:36:00.971 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (DbType = DateTime), @p2='?' (Size = 4000), @p3='?' (DbType = Boolean), @p4='?' (Size = 4000), @p5='?' (DbType = Boolean), @p6='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO `Tokens` (`AccessToken`, `CreatedAt`, `DeviceId`, `Expired`, `RefreshToken`, `Revoked`, `UserId`)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6);
SELECT `Id`
FROM `Tokens`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();
2025-11-16 19:36:00.971 +03:00 [INF] Added Token MappyApplication.Data.Token
2025-11-16 19:36:00.973 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessFailedCount`, `t`.`ConcurrencyStamp`, `t`.`Email`, `t`.`EmailConfirmed`, `t`.`FirstName`, `t`.`LastName`, `t`.`LockoutEnabled`, `t`.`LockoutEnd`, `t`.`NormalizedEmail`, `t`.`NormalizedUserName`, `t`.`PasswordHash`, `t`.`PhoneNumber`, `t`.`PhoneNumberConfirmed`, `t`.`SecurityStamp`, `t`.`TwoFactorEnabled`, `t`.`UserName`, `w`.`Id`, `w`.`Cadence`, `w`.`CityName`, `w`.`Coords`, `w`.`Date`, `w`.`Distance`, `w`.`Duration`, `w`.`Emoji`, `w`.`Pace`, `w`.`Type`, `w`.`UserId`, `c`.`Id`, `c`.`CityName`, `c`.`Country`, `c`.`Date`, `c`.`Emoji`, `c`.`Lat`, `c`.`Lng`, `c`.`Notes`, `c`.`UserId`
FROM (
    SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`FirstName`, `a`.`LastName`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`
    FROM `AspNetUsers` AS `a`
    WHERE `a`.`Id` = @__user_Id_0
    LIMIT 2
) AS `t`
LEFT JOIN `Workouts` AS `w` ON `t`.`Id` = `w`.`UserId`
LEFT JOIN `Cities` AS `c` ON `t`.`Id` = `c`.`UserId`
ORDER BY `t`.`Id`, `w`.`Id`
2025-11-16 19:36:00.973 +03:00 [INF] Executing ObjectResult, writing value of type 'MappyApplication.Models.user.AuthResponse'.
2025-11-16 19:36:00.973 +03:00 [INF] Executed action MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication) in 11.4417ms
2025-11-16 19:36:00.973 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication)'
2025-11-16 19:36:00.973 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:8080/api/v1/auth/refresh-token - 200 null application/json; charset=utf-8 35.9625ms
2025-11-16 19:36:03.200 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:8080/api/v1/auth/refresh-token - null 0
2025-11-16 19:36:03.201 +03:00 [INF] CORS policy execution successful.
2025-11-16 19:36:03.239 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 19:36:03.240 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication)'
2025-11-16 19:36:03.240 +03:00 [INF] Route matched with {action = "RefreshToken", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.user.AuthResponse] RefreshToken() on controller MappyApplication.Controllers.AuthController (MappyApplication).
2025-11-16 19:36:03.241 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__refreshToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`RefreshToken` = @__refreshToken_0
LIMIT 2
2025-11-16 19:36:03.242 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`FirstName`, `a`.`LastName`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`
FROM `AspNetUsers` AS `a`
WHERE `a`.`Id` = @__p_0
LIMIT 1
2025-11-16 19:36:03.245 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']

        UPDATE TOKENS
        SET Revoked = true, Expired = true
        WHERE UserId = @p0
          AND DeviceId = @p1
          AND Revoked = false
          AND Expired = false
2025-11-16 19:36:03.246 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a0`.`Name`
FROM `AspNetUserRoles` AS `a`
INNER JOIN `AspNetRoles` AS `a0` ON `a`.`RoleId` = `a0`.`Id`
WHERE `a`.`UserId` = @__userId_0
2025-11-16 19:36:03.246 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ClaimType`, `a`.`ClaimValue`, `a`.`UserId`
FROM `AspNetUserClaims` AS `a`
WHERE `a`.`UserId` = @__user_Id_0
2025-11-16 19:36:03.247 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a0`.`Name`
FROM `AspNetUserRoles` AS `a`
INNER JOIN `AspNetRoles` AS `a0` ON `a`.`RoleId` = `a0`.`Id`
WHERE `a`.`UserId` = @__userId_0
2025-11-16 19:36:03.247 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ClaimType`, `a`.`ClaimValue`, `a`.`UserId`
FROM `AspNetUserClaims` AS `a`
WHERE `a`.`UserId` = @__user_Id_0
2025-11-16 19:36:03.256 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (DbType = DateTime), @p2='?' (Size = 4000), @p3='?' (DbType = Boolean), @p4='?' (Size = 4000), @p5='?' (DbType = Boolean), @p6='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO `Tokens` (`AccessToken`, `CreatedAt`, `DeviceId`, `Expired`, `RefreshToken`, `Revoked`, `UserId`)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6);
SELECT `Id`
FROM `Tokens`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();
2025-11-16 19:36:03.257 +03:00 [INF] Added Token MappyApplication.Data.Token
2025-11-16 19:36:03.258 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessFailedCount`, `t`.`ConcurrencyStamp`, `t`.`Email`, `t`.`EmailConfirmed`, `t`.`FirstName`, `t`.`LastName`, `t`.`LockoutEnabled`, `t`.`LockoutEnd`, `t`.`NormalizedEmail`, `t`.`NormalizedUserName`, `t`.`PasswordHash`, `t`.`PhoneNumber`, `t`.`PhoneNumberConfirmed`, `t`.`SecurityStamp`, `t`.`TwoFactorEnabled`, `t`.`UserName`, `w`.`Id`, `w`.`Cadence`, `w`.`CityName`, `w`.`Coords`, `w`.`Date`, `w`.`Distance`, `w`.`Duration`, `w`.`Emoji`, `w`.`Pace`, `w`.`Type`, `w`.`UserId`, `c`.`Id`, `c`.`CityName`, `c`.`Country`, `c`.`Date`, `c`.`Emoji`, `c`.`Lat`, `c`.`Lng`, `c`.`Notes`, `c`.`UserId`
FROM (
    SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`FirstName`, `a`.`LastName`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`
    FROM `AspNetUsers` AS `a`
    WHERE `a`.`Id` = @__user_Id_0
    LIMIT 2
) AS `t`
LEFT JOIN `Workouts` AS `w` ON `t`.`Id` = `w`.`UserId`
LEFT JOIN `Cities` AS `c` ON `t`.`Id` = `c`.`UserId`
ORDER BY `t`.`Id`, `w`.`Id`
2025-11-16 19:36:03.258 +03:00 [INF] Executing ObjectResult, writing value of type 'MappyApplication.Models.user.AuthResponse'.
2025-11-16 19:36:03.259 +03:00 [INF] Executed action MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication) in 18.4973ms
2025-11-16 19:36:03.259 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication)'
2025-11-16 19:36:03.259 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:8080/api/v1/auth/refresh-token - 200 null application/json; charset=utf-8 58.5152ms
2025-11-16 19:36:06.379 +03:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:8080/api/v1/auth/refresh-token - null null
2025-11-16 19:36:06.384 +03:00 [INF] CORS policy execution successful.
2025-11-16 19:36:06.387 +03:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:8080/api/v1/auth/refresh-token - 204 null null 7.4577ms
2025-11-16 19:36:06.387 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:8080/api/v1/auth/refresh-token - null 0
2025-11-16 19:36:06.388 +03:00 [INF] CORS policy execution successful.
2025-11-16 19:36:06.424 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 19:36:06.424 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication)'
2025-11-16 19:36:06.425 +03:00 [INF] Route matched with {action = "RefreshToken", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.user.AuthResponse] RefreshToken() on controller MappyApplication.Controllers.AuthController (MappyApplication).
2025-11-16 19:36:06.427 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__refreshToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`RefreshToken` = @__refreshToken_0
LIMIT 2
2025-11-16 19:36:06.428 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`FirstName`, `a`.`LastName`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`
FROM `AspNetUsers` AS `a`
WHERE `a`.`Id` = @__p_0
LIMIT 1
2025-11-16 19:36:06.431 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']

        UPDATE TOKENS
        SET Revoked = true, Expired = true
        WHERE UserId = @p0
          AND DeviceId = @p1
          AND Revoked = false
          AND Expired = false
2025-11-16 19:36:06.433 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a0`.`Name`
FROM `AspNetUserRoles` AS `a`
INNER JOIN `AspNetRoles` AS `a0` ON `a`.`RoleId` = `a0`.`Id`
WHERE `a`.`UserId` = @__userId_0
2025-11-16 19:36:06.436 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ClaimType`, `a`.`ClaimValue`, `a`.`UserId`
FROM `AspNetUserClaims` AS `a`
WHERE `a`.`UserId` = @__user_Id_0
2025-11-16 19:36:06.437 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a0`.`Name`
FROM `AspNetUserRoles` AS `a`
INNER JOIN `AspNetRoles` AS `a0` ON `a`.`RoleId` = `a0`.`Id`
WHERE `a`.`UserId` = @__userId_0
2025-11-16 19:36:06.438 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ClaimType`, `a`.`ClaimValue`, `a`.`UserId`
FROM `AspNetUserClaims` AS `a`
WHERE `a`.`UserId` = @__user_Id_0
2025-11-16 19:36:06.440 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (DbType = DateTime), @p2='?' (Size = 4000), @p3='?' (DbType = Boolean), @p4='?' (Size = 4000), @p5='?' (DbType = Boolean), @p6='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO `Tokens` (`AccessToken`, `CreatedAt`, `DeviceId`, `Expired`, `RefreshToken`, `Revoked`, `UserId`)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6);
SELECT `Id`
FROM `Tokens`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();
2025-11-16 19:36:06.440 +03:00 [INF] Added Token MappyApplication.Data.Token
2025-11-16 19:36:06.442 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessFailedCount`, `t`.`ConcurrencyStamp`, `t`.`Email`, `t`.`EmailConfirmed`, `t`.`FirstName`, `t`.`LastName`, `t`.`LockoutEnabled`, `t`.`LockoutEnd`, `t`.`NormalizedEmail`, `t`.`NormalizedUserName`, `t`.`PasswordHash`, `t`.`PhoneNumber`, `t`.`PhoneNumberConfirmed`, `t`.`SecurityStamp`, `t`.`TwoFactorEnabled`, `t`.`UserName`, `w`.`Id`, `w`.`Cadence`, `w`.`CityName`, `w`.`Coords`, `w`.`Date`, `w`.`Distance`, `w`.`Duration`, `w`.`Emoji`, `w`.`Pace`, `w`.`Type`, `w`.`UserId`, `c`.`Id`, `c`.`CityName`, `c`.`Country`, `c`.`Date`, `c`.`Emoji`, `c`.`Lat`, `c`.`Lng`, `c`.`Notes`, `c`.`UserId`
FROM (
    SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`FirstName`, `a`.`LastName`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`
    FROM `AspNetUsers` AS `a`
    WHERE `a`.`Id` = @__user_Id_0
    LIMIT 2
) AS `t`
LEFT JOIN `Workouts` AS `w` ON `t`.`Id` = `w`.`UserId`
LEFT JOIN `Cities` AS `c` ON `t`.`Id` = `c`.`UserId`
ORDER BY `t`.`Id`, `w`.`Id`
2025-11-16 19:36:06.442 +03:00 [INF] Executing ObjectResult, writing value of type 'MappyApplication.Models.user.AuthResponse'.
2025-11-16 19:36:06.442 +03:00 [INF] Executed action MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication) in 17.0929ms
2025-11-16 19:36:06.442 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication)'
2025-11-16 19:36:06.442 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:8080/api/v1/auth/refresh-token - 200 null application/json; charset=utf-8 54.9947ms
2025-11-16 19:36:08.783 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:8080/api/v1/auth/refresh-token - null 0
2025-11-16 19:36:08.787 +03:00 [INF] CORS policy execution successful.
2025-11-16 19:36:08.815 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 19:36:08.815 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication)'
2025-11-16 19:36:08.815 +03:00 [INF] Route matched with {action = "RefreshToken", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.user.AuthResponse] RefreshToken() on controller MappyApplication.Controllers.AuthController (MappyApplication).
2025-11-16 19:36:08.817 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__refreshToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`RefreshToken` = @__refreshToken_0
LIMIT 2
2025-11-16 19:36:08.818 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`FirstName`, `a`.`LastName`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`
FROM `AspNetUsers` AS `a`
WHERE `a`.`Id` = @__p_0
LIMIT 1
2025-11-16 19:36:08.821 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']

        UPDATE TOKENS
        SET Revoked = true, Expired = true
        WHERE UserId = @p0
          AND DeviceId = @p1
          AND Revoked = false
          AND Expired = false
2025-11-16 19:36:08.822 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a0`.`Name`
FROM `AspNetUserRoles` AS `a`
INNER JOIN `AspNetRoles` AS `a0` ON `a`.`RoleId` = `a0`.`Id`
WHERE `a`.`UserId` = @__userId_0
2025-11-16 19:36:08.823 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ClaimType`, `a`.`ClaimValue`, `a`.`UserId`
FROM `AspNetUserClaims` AS `a`
WHERE `a`.`UserId` = @__user_Id_0
2025-11-16 19:36:08.823 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a0`.`Name`
FROM `AspNetUserRoles` AS `a`
INNER JOIN `AspNetRoles` AS `a0` ON `a`.`RoleId` = `a0`.`Id`
WHERE `a`.`UserId` = @__userId_0
2025-11-16 19:36:08.823 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ClaimType`, `a`.`ClaimValue`, `a`.`UserId`
FROM `AspNetUserClaims` AS `a`
WHERE `a`.`UserId` = @__user_Id_0
2025-11-16 19:36:08.826 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (DbType = DateTime), @p2='?' (Size = 4000), @p3='?' (DbType = Boolean), @p4='?' (Size = 4000), @p5='?' (DbType = Boolean), @p6='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO `Tokens` (`AccessToken`, `CreatedAt`, `DeviceId`, `Expired`, `RefreshToken`, `Revoked`, `UserId`)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6);
SELECT `Id`
FROM `Tokens`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();
2025-11-16 19:36:08.827 +03:00 [INF] Added Token MappyApplication.Data.Token
2025-11-16 19:36:08.829 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessFailedCount`, `t`.`ConcurrencyStamp`, `t`.`Email`, `t`.`EmailConfirmed`, `t`.`FirstName`, `t`.`LastName`, `t`.`LockoutEnabled`, `t`.`LockoutEnd`, `t`.`NormalizedEmail`, `t`.`NormalizedUserName`, `t`.`PasswordHash`, `t`.`PhoneNumber`, `t`.`PhoneNumberConfirmed`, `t`.`SecurityStamp`, `t`.`TwoFactorEnabled`, `t`.`UserName`, `w`.`Id`, `w`.`Cadence`, `w`.`CityName`, `w`.`Coords`, `w`.`Date`, `w`.`Distance`, `w`.`Duration`, `w`.`Emoji`, `w`.`Pace`, `w`.`Type`, `w`.`UserId`, `c`.`Id`, `c`.`CityName`, `c`.`Country`, `c`.`Date`, `c`.`Emoji`, `c`.`Lat`, `c`.`Lng`, `c`.`Notes`, `c`.`UserId`
FROM (
    SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`FirstName`, `a`.`LastName`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`
    FROM `AspNetUsers` AS `a`
    WHERE `a`.`Id` = @__user_Id_0
    LIMIT 2
) AS `t`
LEFT JOIN `Workouts` AS `w` ON `t`.`Id` = `w`.`UserId`
LEFT JOIN `Cities` AS `c` ON `t`.`Id` = `c`.`UserId`
ORDER BY `t`.`Id`, `w`.`Id`
2025-11-16 19:36:08.829 +03:00 [INF] Executing ObjectResult, writing value of type 'MappyApplication.Models.user.AuthResponse'.
2025-11-16 19:36:08.829 +03:00 [INF] Executed action MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication) in 13.7341ms
2025-11-16 19:36:08.829 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication)'
2025-11-16 19:36:08.829 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:8080/api/v1/auth/refresh-token - 200 null application/json; charset=utf-8 46.7011ms
2025-11-16 19:36:10.765 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:8080/api/v1/auth/refresh-token - null 0
2025-11-16 19:36:10.765 +03:00 [INF] CORS policy execution successful.
2025-11-16 19:36:10.784 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 19:36:10.785 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication)'
2025-11-16 19:36:10.785 +03:00 [INF] Route matched with {action = "RefreshToken", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.user.AuthResponse] RefreshToken() on controller MappyApplication.Controllers.AuthController (MappyApplication).
2025-11-16 19:36:10.788 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__refreshToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`RefreshToken` = @__refreshToken_0
LIMIT 2
2025-11-16 19:36:10.789 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`FirstName`, `a`.`LastName`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`
FROM `AspNetUsers` AS `a`
WHERE `a`.`Id` = @__p_0
LIMIT 1
2025-11-16 19:36:10.792 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']

        UPDATE TOKENS
        SET Revoked = true, Expired = true
        WHERE UserId = @p0
          AND DeviceId = @p1
          AND Revoked = false
          AND Expired = false
2025-11-16 19:36:10.793 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a0`.`Name`
FROM `AspNetUserRoles` AS `a`
INNER JOIN `AspNetRoles` AS `a0` ON `a`.`RoleId` = `a0`.`Id`
WHERE `a`.`UserId` = @__userId_0
2025-11-16 19:36:10.793 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ClaimType`, `a`.`ClaimValue`, `a`.`UserId`
FROM `AspNetUserClaims` AS `a`
WHERE `a`.`UserId` = @__user_Id_0
2025-11-16 19:36:10.794 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a0`.`Name`
FROM `AspNetUserRoles` AS `a`
INNER JOIN `AspNetRoles` AS `a0` ON `a`.`RoleId` = `a0`.`Id`
WHERE `a`.`UserId` = @__userId_0
2025-11-16 19:36:10.794 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ClaimType`, `a`.`ClaimValue`, `a`.`UserId`
FROM `AspNetUserClaims` AS `a`
WHERE `a`.`UserId` = @__user_Id_0
2025-11-16 19:36:10.796 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (DbType = DateTime), @p2='?' (Size = 4000), @p3='?' (DbType = Boolean), @p4='?' (Size = 4000), @p5='?' (DbType = Boolean), @p6='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO `Tokens` (`AccessToken`, `CreatedAt`, `DeviceId`, `Expired`, `RefreshToken`, `Revoked`, `UserId`)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6);
SELECT `Id`
FROM `Tokens`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();
2025-11-16 19:36:10.796 +03:00 [INF] Added Token MappyApplication.Data.Token
2025-11-16 19:36:10.798 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessFailedCount`, `t`.`ConcurrencyStamp`, `t`.`Email`, `t`.`EmailConfirmed`, `t`.`FirstName`, `t`.`LastName`, `t`.`LockoutEnabled`, `t`.`LockoutEnd`, `t`.`NormalizedEmail`, `t`.`NormalizedUserName`, `t`.`PasswordHash`, `t`.`PhoneNumber`, `t`.`PhoneNumberConfirmed`, `t`.`SecurityStamp`, `t`.`TwoFactorEnabled`, `t`.`UserName`, `w`.`Id`, `w`.`Cadence`, `w`.`CityName`, `w`.`Coords`, `w`.`Date`, `w`.`Distance`, `w`.`Duration`, `w`.`Emoji`, `w`.`Pace`, `w`.`Type`, `w`.`UserId`, `c`.`Id`, `c`.`CityName`, `c`.`Country`, `c`.`Date`, `c`.`Emoji`, `c`.`Lat`, `c`.`Lng`, `c`.`Notes`, `c`.`UserId`
FROM (
    SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`FirstName`, `a`.`LastName`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`
    FROM `AspNetUsers` AS `a`
    WHERE `a`.`Id` = @__user_Id_0
    LIMIT 2
) AS `t`
LEFT JOIN `Workouts` AS `w` ON `t`.`Id` = `w`.`UserId`
LEFT JOIN `Cities` AS `c` ON `t`.`Id` = `c`.`UserId`
ORDER BY `t`.`Id`, `w`.`Id`
2025-11-16 19:36:10.798 +03:00 [INF] Executing ObjectResult, writing value of type 'MappyApplication.Models.user.AuthResponse'.
2025-11-16 19:36:10.798 +03:00 [INF] Executed action MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication) in 13.5104ms
2025-11-16 19:36:10.798 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication)'
2025-11-16 19:36:10.798 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:8080/api/v1/auth/refresh-token - 200 null application/json; charset=utf-8 33.7227ms
2025-11-16 19:36:13.634 +03:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:8080/api/v1/auth/refresh-token - null null
2025-11-16 19:36:13.636 +03:00 [INF] CORS policy execution successful.
2025-11-16 19:36:13.639 +03:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:8080/api/v1/auth/refresh-token - 204 null null 4.4345ms
2025-11-16 19:36:13.640 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:8080/api/v1/auth/refresh-token - null 0
2025-11-16 19:36:13.641 +03:00 [INF] CORS policy execution successful.
2025-11-16 19:36:13.663 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 19:36:13.663 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication)'
2025-11-16 19:36:13.663 +03:00 [INF] Route matched with {action = "RefreshToken", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.user.AuthResponse] RefreshToken() on controller MappyApplication.Controllers.AuthController (MappyApplication).
2025-11-16 19:36:13.664 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__refreshToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`RefreshToken` = @__refreshToken_0
LIMIT 2
2025-11-16 19:36:13.665 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`FirstName`, `a`.`LastName`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`
FROM `AspNetUsers` AS `a`
WHERE `a`.`Id` = @__p_0
LIMIT 1
2025-11-16 19:36:13.669 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']

        UPDATE TOKENS
        SET Revoked = true, Expired = true
        WHERE UserId = @p0
          AND DeviceId = @p1
          AND Revoked = false
          AND Expired = false
2025-11-16 19:36:13.671 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a0`.`Name`
FROM `AspNetUserRoles` AS `a`
INNER JOIN `AspNetRoles` AS `a0` ON `a`.`RoleId` = `a0`.`Id`
WHERE `a`.`UserId` = @__userId_0
2025-11-16 19:36:13.671 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ClaimType`, `a`.`ClaimValue`, `a`.`UserId`
FROM `AspNetUserClaims` AS `a`
WHERE `a`.`UserId` = @__user_Id_0
2025-11-16 19:36:13.672 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a0`.`Name`
FROM `AspNetUserRoles` AS `a`
INNER JOIN `AspNetRoles` AS `a0` ON `a`.`RoleId` = `a0`.`Id`
WHERE `a`.`UserId` = @__userId_0
2025-11-16 19:36:13.672 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ClaimType`, `a`.`ClaimValue`, `a`.`UserId`
FROM `AspNetUserClaims` AS `a`
WHERE `a`.`UserId` = @__user_Id_0
2025-11-16 19:36:13.674 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (DbType = DateTime), @p2='?' (Size = 4000), @p3='?' (DbType = Boolean), @p4='?' (Size = 4000), @p5='?' (DbType = Boolean), @p6='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO `Tokens` (`AccessToken`, `CreatedAt`, `DeviceId`, `Expired`, `RefreshToken`, `Revoked`, `UserId`)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6);
SELECT `Id`
FROM `Tokens`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();
2025-11-16 19:36:13.675 +03:00 [INF] Added Token MappyApplication.Data.Token
2025-11-16 19:36:13.677 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessFailedCount`, `t`.`ConcurrencyStamp`, `t`.`Email`, `t`.`EmailConfirmed`, `t`.`FirstName`, `t`.`LastName`, `t`.`LockoutEnabled`, `t`.`LockoutEnd`, `t`.`NormalizedEmail`, `t`.`NormalizedUserName`, `t`.`PasswordHash`, `t`.`PhoneNumber`, `t`.`PhoneNumberConfirmed`, `t`.`SecurityStamp`, `t`.`TwoFactorEnabled`, `t`.`UserName`, `w`.`Id`, `w`.`Cadence`, `w`.`CityName`, `w`.`Coords`, `w`.`Date`, `w`.`Distance`, `w`.`Duration`, `w`.`Emoji`, `w`.`Pace`, `w`.`Type`, `w`.`UserId`, `c`.`Id`, `c`.`CityName`, `c`.`Country`, `c`.`Date`, `c`.`Emoji`, `c`.`Lat`, `c`.`Lng`, `c`.`Notes`, `c`.`UserId`
FROM (
    SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`FirstName`, `a`.`LastName`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`
    FROM `AspNetUsers` AS `a`
    WHERE `a`.`Id` = @__user_Id_0
    LIMIT 2
) AS `t`
LEFT JOIN `Workouts` AS `w` ON `t`.`Id` = `w`.`UserId`
LEFT JOIN `Cities` AS `c` ON `t`.`Id` = `c`.`UserId`
ORDER BY `t`.`Id`, `w`.`Id`
2025-11-16 19:36:13.678 +03:00 [INF] Executing ObjectResult, writing value of type 'MappyApplication.Models.user.AuthResponse'.
2025-11-16 19:36:13.678 +03:00 [INF] Executed action MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication) in 14.957ms
2025-11-16 19:36:13.678 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication)'
2025-11-16 19:36:13.678 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:8080/api/v1/auth/refresh-token - 200 null application/json; charset=utf-8 37.9623ms
2025-11-16 19:36:14.921 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:8080/api/v1/auth/refresh-token - null 0
2025-11-16 19:36:14.921 +03:00 [INF] CORS policy execution successful.
2025-11-16 19:36:14.942 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 19:36:14.942 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication)'
2025-11-16 19:36:14.942 +03:00 [INF] Route matched with {action = "RefreshToken", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.user.AuthResponse] RefreshToken() on controller MappyApplication.Controllers.AuthController (MappyApplication).
2025-11-16 19:36:14.943 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__refreshToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`RefreshToken` = @__refreshToken_0
LIMIT 2
2025-11-16 19:36:14.944 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`FirstName`, `a`.`LastName`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`
FROM `AspNetUsers` AS `a`
WHERE `a`.`Id` = @__p_0
LIMIT 1
2025-11-16 19:36:14.946 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']

        UPDATE TOKENS
        SET Revoked = true, Expired = true
        WHERE UserId = @p0
          AND DeviceId = @p1
          AND Revoked = false
          AND Expired = false
2025-11-16 19:36:14.949 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a0`.`Name`
FROM `AspNetUserRoles` AS `a`
INNER JOIN `AspNetRoles` AS `a0` ON `a`.`RoleId` = `a0`.`Id`
WHERE `a`.`UserId` = @__userId_0
2025-11-16 19:36:14.951 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ClaimType`, `a`.`ClaimValue`, `a`.`UserId`
FROM `AspNetUserClaims` AS `a`
WHERE `a`.`UserId` = @__user_Id_0
2025-11-16 19:36:14.953 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a0`.`Name`
FROM `AspNetUserRoles` AS `a`
INNER JOIN `AspNetRoles` AS `a0` ON `a`.`RoleId` = `a0`.`Id`
WHERE `a`.`UserId` = @__userId_0
2025-11-16 19:36:14.959 +03:00 [INF] Executed DbCommand (4ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ClaimType`, `a`.`ClaimValue`, `a`.`UserId`
FROM `AspNetUserClaims` AS `a`
WHERE `a`.`UserId` = @__user_Id_0
2025-11-16 19:36:14.994 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (DbType = DateTime), @p2='?' (Size = 4000), @p3='?' (DbType = Boolean), @p4='?' (Size = 4000), @p5='?' (DbType = Boolean), @p6='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO `Tokens` (`AccessToken`, `CreatedAt`, `DeviceId`, `Expired`, `RefreshToken`, `Revoked`, `UserId`)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6);
SELECT `Id`
FROM `Tokens`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();
2025-11-16 19:36:14.995 +03:00 [INF] Added Token MappyApplication.Data.Token
2025-11-16 19:36:14.996 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessFailedCount`, `t`.`ConcurrencyStamp`, `t`.`Email`, `t`.`EmailConfirmed`, `t`.`FirstName`, `t`.`LastName`, `t`.`LockoutEnabled`, `t`.`LockoutEnd`, `t`.`NormalizedEmail`, `t`.`NormalizedUserName`, `t`.`PasswordHash`, `t`.`PhoneNumber`, `t`.`PhoneNumberConfirmed`, `t`.`SecurityStamp`, `t`.`TwoFactorEnabled`, `t`.`UserName`, `w`.`Id`, `w`.`Cadence`, `w`.`CityName`, `w`.`Coords`, `w`.`Date`, `w`.`Distance`, `w`.`Duration`, `w`.`Emoji`, `w`.`Pace`, `w`.`Type`, `w`.`UserId`, `c`.`Id`, `c`.`CityName`, `c`.`Country`, `c`.`Date`, `c`.`Emoji`, `c`.`Lat`, `c`.`Lng`, `c`.`Notes`, `c`.`UserId`
FROM (
    SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`FirstName`, `a`.`LastName`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`
    FROM `AspNetUsers` AS `a`
    WHERE `a`.`Id` = @__user_Id_0
    LIMIT 2
) AS `t`
LEFT JOIN `Workouts` AS `w` ON `t`.`Id` = `w`.`UserId`
LEFT JOIN `Cities` AS `c` ON `t`.`Id` = `c`.`UserId`
ORDER BY `t`.`Id`, `w`.`Id`
2025-11-16 19:36:14.996 +03:00 [INF] Executing ObjectResult, writing value of type 'MappyApplication.Models.user.AuthResponse'.
2025-11-16 19:36:14.996 +03:00 [INF] Executed action MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication) in 54.2333ms
2025-11-16 19:36:14.996 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication)'
2025-11-16 19:36:14.997 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:8080/api/v1/auth/refresh-token - 200 null application/json; charset=utf-8 75.3158ms
2025-11-16 19:36:24.138 +03:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:8080/api/v1/auth/refresh-token - null null
2025-11-16 19:36:24.144 +03:00 [INF] CORS policy execution successful.
2025-11-16 19:36:24.144 +03:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:8080/api/v1/auth/refresh-token - 204 null null 6.8277ms
2025-11-16 19:36:24.145 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:8080/api/v1/auth/refresh-token - null 0
2025-11-16 19:36:24.146 +03:00 [INF] CORS policy execution successful.
2025-11-16 19:36:24.180 +03:00 [INF] Executed DbCommand (7ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 19:36:24.181 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication)'
2025-11-16 19:36:24.181 +03:00 [INF] Route matched with {action = "RefreshToken", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.user.AuthResponse] RefreshToken() on controller MappyApplication.Controllers.AuthController (MappyApplication).
2025-11-16 19:36:24.183 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__refreshToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`RefreshToken` = @__refreshToken_0
LIMIT 2
2025-11-16 19:36:24.184 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`FirstName`, `a`.`LastName`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`
FROM `AspNetUsers` AS `a`
WHERE `a`.`Id` = @__p_0
LIMIT 1
2025-11-16 19:36:24.189 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']

        UPDATE TOKENS
        SET Revoked = true, Expired = true
        WHERE UserId = @p0
          AND DeviceId = @p1
          AND Revoked = false
          AND Expired = false
2025-11-16 19:36:24.190 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a0`.`Name`
FROM `AspNetUserRoles` AS `a`
INNER JOIN `AspNetRoles` AS `a0` ON `a`.`RoleId` = `a0`.`Id`
WHERE `a`.`UserId` = @__userId_0
2025-11-16 19:36:24.191 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ClaimType`, `a`.`ClaimValue`, `a`.`UserId`
FROM `AspNetUserClaims` AS `a`
WHERE `a`.`UserId` = @__user_Id_0
2025-11-16 19:36:24.191 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a0`.`Name`
FROM `AspNetUserRoles` AS `a`
INNER JOIN `AspNetRoles` AS `a0` ON `a`.`RoleId` = `a0`.`Id`
WHERE `a`.`UserId` = @__userId_0
2025-11-16 19:36:24.192 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ClaimType`, `a`.`ClaimValue`, `a`.`UserId`
FROM `AspNetUserClaims` AS `a`
WHERE `a`.`UserId` = @__user_Id_0
2025-11-16 19:36:24.196 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (DbType = DateTime), @p2='?' (Size = 4000), @p3='?' (DbType = Boolean), @p4='?' (Size = 4000), @p5='?' (DbType = Boolean), @p6='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO `Tokens` (`AccessToken`, `CreatedAt`, `DeviceId`, `Expired`, `RefreshToken`, `Revoked`, `UserId`)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6);
SELECT `Id`
FROM `Tokens`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();
2025-11-16 19:36:24.197 +03:00 [INF] Added Token MappyApplication.Data.Token
2025-11-16 19:36:24.200 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessFailedCount`, `t`.`ConcurrencyStamp`, `t`.`Email`, `t`.`EmailConfirmed`, `t`.`FirstName`, `t`.`LastName`, `t`.`LockoutEnabled`, `t`.`LockoutEnd`, `t`.`NormalizedEmail`, `t`.`NormalizedUserName`, `t`.`PasswordHash`, `t`.`PhoneNumber`, `t`.`PhoneNumberConfirmed`, `t`.`SecurityStamp`, `t`.`TwoFactorEnabled`, `t`.`UserName`, `w`.`Id`, `w`.`Cadence`, `w`.`CityName`, `w`.`Coords`, `w`.`Date`, `w`.`Distance`, `w`.`Duration`, `w`.`Emoji`, `w`.`Pace`, `w`.`Type`, `w`.`UserId`, `c`.`Id`, `c`.`CityName`, `c`.`Country`, `c`.`Date`, `c`.`Emoji`, `c`.`Lat`, `c`.`Lng`, `c`.`Notes`, `c`.`UserId`
FROM (
    SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`FirstName`, `a`.`LastName`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`
    FROM `AspNetUsers` AS `a`
    WHERE `a`.`Id` = @__user_Id_0
    LIMIT 2
) AS `t`
LEFT JOIN `Workouts` AS `w` ON `t`.`Id` = `w`.`UserId`
LEFT JOIN `Cities` AS `c` ON `t`.`Id` = `c`.`UserId`
ORDER BY `t`.`Id`, `w`.`Id`
2025-11-16 19:36:24.200 +03:00 [INF] Executing ObjectResult, writing value of type 'MappyApplication.Models.user.AuthResponse'.
2025-11-16 19:36:24.200 +03:00 [INF] Executed action MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication) in 19.2643ms
2025-11-16 19:36:24.200 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication)'
2025-11-16 19:36:24.200 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:8080/api/v1/auth/refresh-token - 200 null application/json; charset=utf-8 55.0256ms
2025-11-16 19:36:27.779 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:8080/api/v1/auth/refresh-token - null 0
2025-11-16 19:36:27.783 +03:00 [INF] CORS policy execution successful.
2025-11-16 19:36:27.852 +03:00 [INF] Executed DbCommand (4ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 19:36:27.856 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication)'
2025-11-16 19:36:27.859 +03:00 [INF] Route matched with {action = "RefreshToken", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.user.AuthResponse] RefreshToken() on controller MappyApplication.Controllers.AuthController (MappyApplication).
2025-11-16 19:36:27.862 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__refreshToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`RefreshToken` = @__refreshToken_0
LIMIT 2
2025-11-16 19:36:27.865 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`FirstName`, `a`.`LastName`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`
FROM `AspNetUsers` AS `a`
WHERE `a`.`Id` = @__p_0
LIMIT 1
2025-11-16 19:36:27.873 +03:00 [INF] Executed DbCommand (4ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']

        UPDATE TOKENS
        SET Revoked = true, Expired = true
        WHERE UserId = @p0
          AND DeviceId = @p1
          AND Revoked = false
          AND Expired = false
2025-11-16 19:36:27.877 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a0`.`Name`
FROM `AspNetUserRoles` AS `a`
INNER JOIN `AspNetRoles` AS `a0` ON `a`.`RoleId` = `a0`.`Id`
WHERE `a`.`UserId` = @__userId_0
2025-11-16 19:36:27.878 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ClaimType`, `a`.`ClaimValue`, `a`.`UserId`
FROM `AspNetUserClaims` AS `a`
WHERE `a`.`UserId` = @__user_Id_0
2025-11-16 19:36:27.879 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a0`.`Name`
FROM `AspNetUserRoles` AS `a`
INNER JOIN `AspNetRoles` AS `a0` ON `a`.`RoleId` = `a0`.`Id`
WHERE `a`.`UserId` = @__userId_0
2025-11-16 19:36:27.881 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ClaimType`, `a`.`ClaimValue`, `a`.`UserId`
FROM `AspNetUserClaims` AS `a`
WHERE `a`.`UserId` = @__user_Id_0
2025-11-16 19:36:27.891 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (DbType = DateTime), @p2='?' (Size = 4000), @p3='?' (DbType = Boolean), @p4='?' (Size = 4000), @p5='?' (DbType = Boolean), @p6='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO `Tokens` (`AccessToken`, `CreatedAt`, `DeviceId`, `Expired`, `RefreshToken`, `Revoked`, `UserId`)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6);
SELECT `Id`
FROM `Tokens`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();
2025-11-16 19:36:27.893 +03:00 [INF] Added Token MappyApplication.Data.Token
2025-11-16 19:36:27.895 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessFailedCount`, `t`.`ConcurrencyStamp`, `t`.`Email`, `t`.`EmailConfirmed`, `t`.`FirstName`, `t`.`LastName`, `t`.`LockoutEnabled`, `t`.`LockoutEnd`, `t`.`NormalizedEmail`, `t`.`NormalizedUserName`, `t`.`PasswordHash`, `t`.`PhoneNumber`, `t`.`PhoneNumberConfirmed`, `t`.`SecurityStamp`, `t`.`TwoFactorEnabled`, `t`.`UserName`, `w`.`Id`, `w`.`Cadence`, `w`.`CityName`, `w`.`Coords`, `w`.`Date`, `w`.`Distance`, `w`.`Duration`, `w`.`Emoji`, `w`.`Pace`, `w`.`Type`, `w`.`UserId`, `c`.`Id`, `c`.`CityName`, `c`.`Country`, `c`.`Date`, `c`.`Emoji`, `c`.`Lat`, `c`.`Lng`, `c`.`Notes`, `c`.`UserId`
FROM (
    SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`FirstName`, `a`.`LastName`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`
    FROM `AspNetUsers` AS `a`
    WHERE `a`.`Id` = @__user_Id_0
    LIMIT 2
) AS `t`
LEFT JOIN `Workouts` AS `w` ON `t`.`Id` = `w`.`UserId`
LEFT JOIN `Cities` AS `c` ON `t`.`Id` = `c`.`UserId`
ORDER BY `t`.`Id`, `w`.`Id`
2025-11-16 19:36:27.896 +03:00 [INF] Executing ObjectResult, writing value of type 'MappyApplication.Models.user.AuthResponse'.
2025-11-16 19:36:27.897 +03:00 [INF] Executed action MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication) in 37.4172ms
2025-11-16 19:36:27.897 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication)'
2025-11-16 19:36:27.897 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:8080/api/v1/auth/refresh-token - 200 null application/json; charset=utf-8 118.6058ms
2025-11-16 19:36:34.983 +03:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:8080/api/v1/auth/refresh-token - null null
2025-11-16 19:36:34.997 +03:00 [INF] CORS policy execution successful.
2025-11-16 19:36:34.998 +03:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:8080/api/v1/auth/refresh-token - 204 null null 15.3242ms
2025-11-16 19:36:34.999 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:8080/api/v1/auth/refresh-token - null 0
2025-11-16 19:36:35.000 +03:00 [INF] CORS policy execution successful.
2025-11-16 19:36:35.043 +03:00 [INF] Executed DbCommand (4ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 19:36:35.043 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication)'
2025-11-16 19:36:35.043 +03:00 [INF] Route matched with {action = "RefreshToken", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.user.AuthResponse] RefreshToken() on controller MappyApplication.Controllers.AuthController (MappyApplication).
2025-11-16 19:36:35.044 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__refreshToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`RefreshToken` = @__refreshToken_0
LIMIT 2
2025-11-16 19:36:35.048 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`FirstName`, `a`.`LastName`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`
FROM `AspNetUsers` AS `a`
WHERE `a`.`Id` = @__p_0
LIMIT 1
2025-11-16 19:36:35.054 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']

        UPDATE TOKENS
        SET Revoked = true, Expired = true
        WHERE UserId = @p0
          AND DeviceId = @p1
          AND Revoked = false
          AND Expired = false
2025-11-16 19:36:35.055 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a0`.`Name`
FROM `AspNetUserRoles` AS `a`
INNER JOIN `AspNetRoles` AS `a0` ON `a`.`RoleId` = `a0`.`Id`
WHERE `a`.`UserId` = @__userId_0
2025-11-16 19:36:35.056 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ClaimType`, `a`.`ClaimValue`, `a`.`UserId`
FROM `AspNetUserClaims` AS `a`
WHERE `a`.`UserId` = @__user_Id_0
2025-11-16 19:36:35.058 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a0`.`Name`
FROM `AspNetUserRoles` AS `a`
INNER JOIN `AspNetRoles` AS `a0` ON `a`.`RoleId` = `a0`.`Id`
WHERE `a`.`UserId` = @__userId_0
2025-11-16 19:36:35.059 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ClaimType`, `a`.`ClaimValue`, `a`.`UserId`
FROM `AspNetUserClaims` AS `a`
WHERE `a`.`UserId` = @__user_Id_0
2025-11-16 19:36:35.062 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (DbType = DateTime), @p2='?' (Size = 4000), @p3='?' (DbType = Boolean), @p4='?' (Size = 4000), @p5='?' (DbType = Boolean), @p6='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO `Tokens` (`AccessToken`, `CreatedAt`, `DeviceId`, `Expired`, `RefreshToken`, `Revoked`, `UserId`)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6);
SELECT `Id`
FROM `Tokens`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();
2025-11-16 19:36:35.062 +03:00 [INF] Added Token MappyApplication.Data.Token
2025-11-16 19:36:35.064 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessFailedCount`, `t`.`ConcurrencyStamp`, `t`.`Email`, `t`.`EmailConfirmed`, `t`.`FirstName`, `t`.`LastName`, `t`.`LockoutEnabled`, `t`.`LockoutEnd`, `t`.`NormalizedEmail`, `t`.`NormalizedUserName`, `t`.`PasswordHash`, `t`.`PhoneNumber`, `t`.`PhoneNumberConfirmed`, `t`.`SecurityStamp`, `t`.`TwoFactorEnabled`, `t`.`UserName`, `w`.`Id`, `w`.`Cadence`, `w`.`CityName`, `w`.`Coords`, `w`.`Date`, `w`.`Distance`, `w`.`Duration`, `w`.`Emoji`, `w`.`Pace`, `w`.`Type`, `w`.`UserId`, `c`.`Id`, `c`.`CityName`, `c`.`Country`, `c`.`Date`, `c`.`Emoji`, `c`.`Lat`, `c`.`Lng`, `c`.`Notes`, `c`.`UserId`
FROM (
    SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`FirstName`, `a`.`LastName`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`
    FROM `AspNetUsers` AS `a`
    WHERE `a`.`Id` = @__user_Id_0
    LIMIT 2
) AS `t`
LEFT JOIN `Workouts` AS `w` ON `t`.`Id` = `w`.`UserId`
LEFT JOIN `Cities` AS `c` ON `t`.`Id` = `c`.`UserId`
ORDER BY `t`.`Id`, `w`.`Id`
2025-11-16 19:36:35.064 +03:00 [INF] Executing ObjectResult, writing value of type 'MappyApplication.Models.user.AuthResponse'.
2025-11-16 19:36:35.065 +03:00 [INF] Executed action MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication) in 21.3112ms
2025-11-16 19:36:35.065 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication)'
2025-11-16 19:36:35.065 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:8080/api/v1/auth/refresh-token - 200 null application/json; charset=utf-8 65.7274ms
2025-11-16 19:36:35.809 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:8080/api/v1/auth/refresh-token - null 0
2025-11-16 19:36:35.812 +03:00 [INF] CORS policy execution successful.
2025-11-16 19:36:35.847 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 19:36:35.847 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication)'
2025-11-16 19:36:35.847 +03:00 [INF] Route matched with {action = "RefreshToken", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.user.AuthResponse] RefreshToken() on controller MappyApplication.Controllers.AuthController (MappyApplication).
2025-11-16 19:36:35.849 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__refreshToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`RefreshToken` = @__refreshToken_0
LIMIT 2
2025-11-16 19:36:35.850 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`FirstName`, `a`.`LastName`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`
FROM `AspNetUsers` AS `a`
WHERE `a`.`Id` = @__p_0
LIMIT 1
2025-11-16 19:36:35.854 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']

        UPDATE TOKENS
        SET Revoked = true, Expired = true
        WHERE UserId = @p0
          AND DeviceId = @p1
          AND Revoked = false
          AND Expired = false
2025-11-16 19:36:35.855 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a0`.`Name`
FROM `AspNetUserRoles` AS `a`
INNER JOIN `AspNetRoles` AS `a0` ON `a`.`RoleId` = `a0`.`Id`
WHERE `a`.`UserId` = @__userId_0
2025-11-16 19:36:35.856 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ClaimType`, `a`.`ClaimValue`, `a`.`UserId`
FROM `AspNetUserClaims` AS `a`
WHERE `a`.`UserId` = @__user_Id_0
2025-11-16 19:36:35.857 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a0`.`Name`
FROM `AspNetUserRoles` AS `a`
INNER JOIN `AspNetRoles` AS `a0` ON `a`.`RoleId` = `a0`.`Id`
WHERE `a`.`UserId` = @__userId_0
2025-11-16 19:36:35.857 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ClaimType`, `a`.`ClaimValue`, `a`.`UserId`
FROM `AspNetUserClaims` AS `a`
WHERE `a`.`UserId` = @__user_Id_0
2025-11-16 19:36:35.860 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (DbType = DateTime), @p2='?' (Size = 4000), @p3='?' (DbType = Boolean), @p4='?' (Size = 4000), @p5='?' (DbType = Boolean), @p6='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO `Tokens` (`AccessToken`, `CreatedAt`, `DeviceId`, `Expired`, `RefreshToken`, `Revoked`, `UserId`)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6);
SELECT `Id`
FROM `Tokens`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();
2025-11-16 19:36:35.861 +03:00 [INF] Added Token MappyApplication.Data.Token
2025-11-16 19:36:35.862 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessFailedCount`, `t`.`ConcurrencyStamp`, `t`.`Email`, `t`.`EmailConfirmed`, `t`.`FirstName`, `t`.`LastName`, `t`.`LockoutEnabled`, `t`.`LockoutEnd`, `t`.`NormalizedEmail`, `t`.`NormalizedUserName`, `t`.`PasswordHash`, `t`.`PhoneNumber`, `t`.`PhoneNumberConfirmed`, `t`.`SecurityStamp`, `t`.`TwoFactorEnabled`, `t`.`UserName`, `w`.`Id`, `w`.`Cadence`, `w`.`CityName`, `w`.`Coords`, `w`.`Date`, `w`.`Distance`, `w`.`Duration`, `w`.`Emoji`, `w`.`Pace`, `w`.`Type`, `w`.`UserId`, `c`.`Id`, `c`.`CityName`, `c`.`Country`, `c`.`Date`, `c`.`Emoji`, `c`.`Lat`, `c`.`Lng`, `c`.`Notes`, `c`.`UserId`
FROM (
    SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`FirstName`, `a`.`LastName`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`
    FROM `AspNetUsers` AS `a`
    WHERE `a`.`Id` = @__user_Id_0
    LIMIT 2
) AS `t`
LEFT JOIN `Workouts` AS `w` ON `t`.`Id` = `w`.`UserId`
LEFT JOIN `Cities` AS `c` ON `t`.`Id` = `c`.`UserId`
ORDER BY `t`.`Id`, `w`.`Id`
2025-11-16 19:36:35.863 +03:00 [INF] Executing ObjectResult, writing value of type 'MappyApplication.Models.user.AuthResponse'.
2025-11-16 19:36:35.863 +03:00 [INF] Executed action MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication) in 15.7689ms
2025-11-16 19:36:35.863 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication)'
2025-11-16 19:36:35.863 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:8080/api/v1/auth/refresh-token - 200 null application/json; charset=utf-8 54.0727ms
2025-11-16 19:36:47.913 +03:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:8080/api/v1/auth/refresh-token - null null
2025-11-16 19:36:47.916 +03:00 [INF] CORS policy execution successful.
2025-11-16 19:36:47.917 +03:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:8080/api/v1/auth/refresh-token - 204 null null 3.7262ms
2025-11-16 19:36:47.920 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:8080/api/v1/auth/refresh-token - null 0
2025-11-16 19:36:47.920 +03:00 [INF] CORS policy execution successful.
2025-11-16 19:36:47.958 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 19:36:47.959 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication)'
2025-11-16 19:36:47.959 +03:00 [INF] Route matched with {action = "RefreshToken", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.user.AuthResponse] RefreshToken() on controller MappyApplication.Controllers.AuthController (MappyApplication).
2025-11-16 19:36:47.960 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__refreshToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`RefreshToken` = @__refreshToken_0
LIMIT 2
2025-11-16 19:36:47.961 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`FirstName`, `a`.`LastName`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`
FROM `AspNetUsers` AS `a`
WHERE `a`.`Id` = @__p_0
LIMIT 1
2025-11-16 19:36:47.964 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']

        UPDATE TOKENS
        SET Revoked = true, Expired = true
        WHERE UserId = @p0
          AND DeviceId = @p1
          AND Revoked = false
          AND Expired = false
2025-11-16 19:36:47.965 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a0`.`Name`
FROM `AspNetUserRoles` AS `a`
INNER JOIN `AspNetRoles` AS `a0` ON `a`.`RoleId` = `a0`.`Id`
WHERE `a`.`UserId` = @__userId_0
2025-11-16 19:36:47.966 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ClaimType`, `a`.`ClaimValue`, `a`.`UserId`
FROM `AspNetUserClaims` AS `a`
WHERE `a`.`UserId` = @__user_Id_0
2025-11-16 19:36:47.966 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a0`.`Name`
FROM `AspNetUserRoles` AS `a`
INNER JOIN `AspNetRoles` AS `a0` ON `a`.`RoleId` = `a0`.`Id`
WHERE `a`.`UserId` = @__userId_0
2025-11-16 19:36:47.966 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ClaimType`, `a`.`ClaimValue`, `a`.`UserId`
FROM `AspNetUserClaims` AS `a`
WHERE `a`.`UserId` = @__user_Id_0
2025-11-16 19:36:47.973 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (DbType = DateTime), @p2='?' (Size = 4000), @p3='?' (DbType = Boolean), @p4='?' (Size = 4000), @p5='?' (DbType = Boolean), @p6='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO `Tokens` (`AccessToken`, `CreatedAt`, `DeviceId`, `Expired`, `RefreshToken`, `Revoked`, `UserId`)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6);
SELECT `Id`
FROM `Tokens`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();
2025-11-16 19:36:47.973 +03:00 [INF] Added Token MappyApplication.Data.Token
2025-11-16 19:36:47.975 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessFailedCount`, `t`.`ConcurrencyStamp`, `t`.`Email`, `t`.`EmailConfirmed`, `t`.`FirstName`, `t`.`LastName`, `t`.`LockoutEnabled`, `t`.`LockoutEnd`, `t`.`NormalizedEmail`, `t`.`NormalizedUserName`, `t`.`PasswordHash`, `t`.`PhoneNumber`, `t`.`PhoneNumberConfirmed`, `t`.`SecurityStamp`, `t`.`TwoFactorEnabled`, `t`.`UserName`, `w`.`Id`, `w`.`Cadence`, `w`.`CityName`, `w`.`Coords`, `w`.`Date`, `w`.`Distance`, `w`.`Duration`, `w`.`Emoji`, `w`.`Pace`, `w`.`Type`, `w`.`UserId`, `c`.`Id`, `c`.`CityName`, `c`.`Country`, `c`.`Date`, `c`.`Emoji`, `c`.`Lat`, `c`.`Lng`, `c`.`Notes`, `c`.`UserId`
FROM (
    SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`FirstName`, `a`.`LastName`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`
    FROM `AspNetUsers` AS `a`
    WHERE `a`.`Id` = @__user_Id_0
    LIMIT 2
) AS `t`
LEFT JOIN `Workouts` AS `w` ON `t`.`Id` = `w`.`UserId`
LEFT JOIN `Cities` AS `c` ON `t`.`Id` = `c`.`UserId`
ORDER BY `t`.`Id`, `w`.`Id`
2025-11-16 19:36:47.975 +03:00 [INF] Executing ObjectResult, writing value of type 'MappyApplication.Models.user.AuthResponse'.
2025-11-16 19:36:47.975 +03:00 [INF] Executed action MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication) in 16.4945ms
2025-11-16 19:36:47.975 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication)'
2025-11-16 19:36:47.976 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:8080/api/v1/auth/refresh-token - 200 null application/json; charset=utf-8 56.0819ms
2025-11-16 19:36:49.384 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:8080/api/v1/auth/refresh-token - null 0
2025-11-16 19:36:49.385 +03:00 [INF] CORS policy execution successful.
2025-11-16 19:36:49.401 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 19:36:49.402 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication)'
2025-11-16 19:36:49.402 +03:00 [INF] Route matched with {action = "RefreshToken", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.user.AuthResponse] RefreshToken() on controller MappyApplication.Controllers.AuthController (MappyApplication).
2025-11-16 19:36:49.404 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__refreshToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`RefreshToken` = @__refreshToken_0
LIMIT 2
2025-11-16 19:36:49.405 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`FirstName`, `a`.`LastName`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`
FROM `AspNetUsers` AS `a`
WHERE `a`.`Id` = @__p_0
LIMIT 1
2025-11-16 19:36:49.407 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']

        UPDATE TOKENS
        SET Revoked = true, Expired = true
        WHERE UserId = @p0
          AND DeviceId = @p1
          AND Revoked = false
          AND Expired = false
2025-11-16 19:36:49.408 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a0`.`Name`
FROM `AspNetUserRoles` AS `a`
INNER JOIN `AspNetRoles` AS `a0` ON `a`.`RoleId` = `a0`.`Id`
WHERE `a`.`UserId` = @__userId_0
2025-11-16 19:36:49.408 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ClaimType`, `a`.`ClaimValue`, `a`.`UserId`
FROM `AspNetUserClaims` AS `a`
WHERE `a`.`UserId` = @__user_Id_0
2025-11-16 19:36:49.409 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a0`.`Name`
FROM `AspNetUserRoles` AS `a`
INNER JOIN `AspNetRoles` AS `a0` ON `a`.`RoleId` = `a0`.`Id`
WHERE `a`.`UserId` = @__userId_0
2025-11-16 19:36:49.410 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ClaimType`, `a`.`ClaimValue`, `a`.`UserId`
FROM `AspNetUserClaims` AS `a`
WHERE `a`.`UserId` = @__user_Id_0
2025-11-16 19:36:49.416 +03:00 [INF] Executed DbCommand (5ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (DbType = DateTime), @p2='?' (Size = 4000), @p3='?' (DbType = Boolean), @p4='?' (Size = 4000), @p5='?' (DbType = Boolean), @p6='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO `Tokens` (`AccessToken`, `CreatedAt`, `DeviceId`, `Expired`, `RefreshToken`, `Revoked`, `UserId`)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6);
SELECT `Id`
FROM `Tokens`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();
2025-11-16 19:36:49.416 +03:00 [INF] Added Token MappyApplication.Data.Token
2025-11-16 19:36:49.418 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessFailedCount`, `t`.`ConcurrencyStamp`, `t`.`Email`, `t`.`EmailConfirmed`, `t`.`FirstName`, `t`.`LastName`, `t`.`LockoutEnabled`, `t`.`LockoutEnd`, `t`.`NormalizedEmail`, `t`.`NormalizedUserName`, `t`.`PasswordHash`, `t`.`PhoneNumber`, `t`.`PhoneNumberConfirmed`, `t`.`SecurityStamp`, `t`.`TwoFactorEnabled`, `t`.`UserName`, `w`.`Id`, `w`.`Cadence`, `w`.`CityName`, `w`.`Coords`, `w`.`Date`, `w`.`Distance`, `w`.`Duration`, `w`.`Emoji`, `w`.`Pace`, `w`.`Type`, `w`.`UserId`, `c`.`Id`, `c`.`CityName`, `c`.`Country`, `c`.`Date`, `c`.`Emoji`, `c`.`Lat`, `c`.`Lng`, `c`.`Notes`, `c`.`UserId`
FROM (
    SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`FirstName`, `a`.`LastName`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`
    FROM `AspNetUsers` AS `a`
    WHERE `a`.`Id` = @__user_Id_0
    LIMIT 2
) AS `t`
LEFT JOIN `Workouts` AS `w` ON `t`.`Id` = `w`.`UserId`
LEFT JOIN `Cities` AS `c` ON `t`.`Id` = `c`.`UserId`
ORDER BY `t`.`Id`, `w`.`Id`
2025-11-16 19:36:49.418 +03:00 [INF] Executing ObjectResult, writing value of type 'MappyApplication.Models.user.AuthResponse'.
2025-11-16 19:36:49.418 +03:00 [INF] Executed action MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication) in 16.3118ms
2025-11-16 19:36:49.418 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication)'
2025-11-16 19:36:49.418 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:8080/api/v1/auth/refresh-token - 200 null application/json; charset=utf-8 33.6638ms
2025-11-16 19:36:55.095 +03:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:8080/api/v1/auth/refresh-token - null null
2025-11-16 19:36:55.098 +03:00 [INF] CORS policy execution successful.
2025-11-16 19:36:55.099 +03:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:8080/api/v1/auth/refresh-token - 204 null null 5.3102ms
2025-11-16 19:36:55.099 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:8080/api/v1/auth/refresh-token - null 0
2025-11-16 19:36:55.100 +03:00 [INF] CORS policy execution successful.
2025-11-16 19:36:55.138 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 19:36:55.139 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication)'
2025-11-16 19:36:55.139 +03:00 [INF] Route matched with {action = "RefreshToken", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.user.AuthResponse] RefreshToken() on controller MappyApplication.Controllers.AuthController (MappyApplication).
2025-11-16 19:36:55.140 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__refreshToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`RefreshToken` = @__refreshToken_0
LIMIT 2
2025-11-16 19:36:55.141 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`FirstName`, `a`.`LastName`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`
FROM `AspNetUsers` AS `a`
WHERE `a`.`Id` = @__p_0
LIMIT 1
2025-11-16 19:36:55.144 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']

        UPDATE TOKENS
        SET Revoked = true, Expired = true
        WHERE UserId = @p0
          AND DeviceId = @p1
          AND Revoked = false
          AND Expired = false
2025-11-16 19:36:55.145 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a0`.`Name`
FROM `AspNetUserRoles` AS `a`
INNER JOIN `AspNetRoles` AS `a0` ON `a`.`RoleId` = `a0`.`Id`
WHERE `a`.`UserId` = @__userId_0
2025-11-16 19:36:55.146 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ClaimType`, `a`.`ClaimValue`, `a`.`UserId`
FROM `AspNetUserClaims` AS `a`
WHERE `a`.`UserId` = @__user_Id_0
2025-11-16 19:36:55.147 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a0`.`Name`
FROM `AspNetUserRoles` AS `a`
INNER JOIN `AspNetRoles` AS `a0` ON `a`.`RoleId` = `a0`.`Id`
WHERE `a`.`UserId` = @__userId_0
2025-11-16 19:36:55.148 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ClaimType`, `a`.`ClaimValue`, `a`.`UserId`
FROM `AspNetUserClaims` AS `a`
WHERE `a`.`UserId` = @__user_Id_0
2025-11-16 19:36:55.155 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (DbType = DateTime), @p2='?' (Size = 4000), @p3='?' (DbType = Boolean), @p4='?' (Size = 4000), @p5='?' (DbType = Boolean), @p6='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO `Tokens` (`AccessToken`, `CreatedAt`, `DeviceId`, `Expired`, `RefreshToken`, `Revoked`, `UserId`)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6);
SELECT `Id`
FROM `Tokens`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();
2025-11-16 19:36:55.156 +03:00 [INF] Added Token MappyApplication.Data.Token
2025-11-16 19:36:55.157 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessFailedCount`, `t`.`ConcurrencyStamp`, `t`.`Email`, `t`.`EmailConfirmed`, `t`.`FirstName`, `t`.`LastName`, `t`.`LockoutEnabled`, `t`.`LockoutEnd`, `t`.`NormalizedEmail`, `t`.`NormalizedUserName`, `t`.`PasswordHash`, `t`.`PhoneNumber`, `t`.`PhoneNumberConfirmed`, `t`.`SecurityStamp`, `t`.`TwoFactorEnabled`, `t`.`UserName`, `w`.`Id`, `w`.`Cadence`, `w`.`CityName`, `w`.`Coords`, `w`.`Date`, `w`.`Distance`, `w`.`Duration`, `w`.`Emoji`, `w`.`Pace`, `w`.`Type`, `w`.`UserId`, `c`.`Id`, `c`.`CityName`, `c`.`Country`, `c`.`Date`, `c`.`Emoji`, `c`.`Lat`, `c`.`Lng`, `c`.`Notes`, `c`.`UserId`
FROM (
    SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`FirstName`, `a`.`LastName`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`
    FROM `AspNetUsers` AS `a`
    WHERE `a`.`Id` = @__user_Id_0
    LIMIT 2
) AS `t`
LEFT JOIN `Workouts` AS `w` ON `t`.`Id` = `w`.`UserId`
LEFT JOIN `Cities` AS `c` ON `t`.`Id` = `c`.`UserId`
ORDER BY `t`.`Id`, `w`.`Id`
2025-11-16 19:36:55.157 +03:00 [INF] Executing ObjectResult, writing value of type 'MappyApplication.Models.user.AuthResponse'.
2025-11-16 19:36:55.158 +03:00 [INF] Executed action MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication) in 18.7665ms
2025-11-16 19:36:55.158 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication)'
2025-11-16 19:36:55.158 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:8080/api/v1/auth/refresh-token - 200 null application/json; charset=utf-8 58.2098ms
2025-11-16 19:37:11.798 +03:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:8080/api/v1/auth/refresh-token - null null
2025-11-16 19:37:11.800 +03:00 [INF] CORS policy execution successful.
2025-11-16 19:37:11.801 +03:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:8080/api/v1/auth/refresh-token - 204 null null 3.0532ms
2025-11-16 19:37:11.801 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:8080/api/v1/auth/refresh-token - null 0
2025-11-16 19:37:11.802 +03:00 [INF] CORS policy execution successful.
2025-11-16 19:37:11.833 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 19:37:11.834 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication)'
2025-11-16 19:37:11.834 +03:00 [INF] Route matched with {action = "RefreshToken", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.user.AuthResponse] RefreshToken() on controller MappyApplication.Controllers.AuthController (MappyApplication).
2025-11-16 19:37:11.835 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__refreshToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`RefreshToken` = @__refreshToken_0
LIMIT 2
2025-11-16 19:37:11.838 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`FirstName`, `a`.`LastName`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`
FROM `AspNetUsers` AS `a`
WHERE `a`.`Id` = @__p_0
LIMIT 1
2025-11-16 19:37:11.841 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']

        UPDATE TOKENS
        SET Revoked = true, Expired = true
        WHERE UserId = @p0
          AND DeviceId = @p1
          AND Revoked = false
          AND Expired = false
2025-11-16 19:37:11.842 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a0`.`Name`
FROM `AspNetUserRoles` AS `a`
INNER JOIN `AspNetRoles` AS `a0` ON `a`.`RoleId` = `a0`.`Id`
WHERE `a`.`UserId` = @__userId_0
2025-11-16 19:37:11.843 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ClaimType`, `a`.`ClaimValue`, `a`.`UserId`
FROM `AspNetUserClaims` AS `a`
WHERE `a`.`UserId` = @__user_Id_0
2025-11-16 19:37:11.843 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a0`.`Name`
FROM `AspNetUserRoles` AS `a`
INNER JOIN `AspNetRoles` AS `a0` ON `a`.`RoleId` = `a0`.`Id`
WHERE `a`.`UserId` = @__userId_0
2025-11-16 19:37:11.843 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ClaimType`, `a`.`ClaimValue`, `a`.`UserId`
FROM `AspNetUserClaims` AS `a`
WHERE `a`.`UserId` = @__user_Id_0
2025-11-16 19:37:11.847 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (DbType = DateTime), @p2='?' (Size = 4000), @p3='?' (DbType = Boolean), @p4='?' (Size = 4000), @p5='?' (DbType = Boolean), @p6='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO `Tokens` (`AccessToken`, `CreatedAt`, `DeviceId`, `Expired`, `RefreshToken`, `Revoked`, `UserId`)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6);
SELECT `Id`
FROM `Tokens`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();
2025-11-16 19:37:11.848 +03:00 [INF] Added Token MappyApplication.Data.Token
2025-11-16 19:37:11.850 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessFailedCount`, `t`.`ConcurrencyStamp`, `t`.`Email`, `t`.`EmailConfirmed`, `t`.`FirstName`, `t`.`LastName`, `t`.`LockoutEnabled`, `t`.`LockoutEnd`, `t`.`NormalizedEmail`, `t`.`NormalizedUserName`, `t`.`PasswordHash`, `t`.`PhoneNumber`, `t`.`PhoneNumberConfirmed`, `t`.`SecurityStamp`, `t`.`TwoFactorEnabled`, `t`.`UserName`, `w`.`Id`, `w`.`Cadence`, `w`.`CityName`, `w`.`Coords`, `w`.`Date`, `w`.`Distance`, `w`.`Duration`, `w`.`Emoji`, `w`.`Pace`, `w`.`Type`, `w`.`UserId`, `c`.`Id`, `c`.`CityName`, `c`.`Country`, `c`.`Date`, `c`.`Emoji`, `c`.`Lat`, `c`.`Lng`, `c`.`Notes`, `c`.`UserId`
FROM (
    SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`FirstName`, `a`.`LastName`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`
    FROM `AspNetUsers` AS `a`
    WHERE `a`.`Id` = @__user_Id_0
    LIMIT 2
) AS `t`
LEFT JOIN `Workouts` AS `w` ON `t`.`Id` = `w`.`UserId`
LEFT JOIN `Cities` AS `c` ON `t`.`Id` = `c`.`UserId`
ORDER BY `t`.`Id`, `w`.`Id`
2025-11-16 19:37:11.850 +03:00 [INF] Executing ObjectResult, writing value of type 'MappyApplication.Models.user.AuthResponse'.
2025-11-16 19:37:11.851 +03:00 [INF] Executed action MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication) in 17.1432ms
2025-11-16 19:37:11.851 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication)'
2025-11-16 19:37:11.851 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:8080/api/v1/auth/refresh-token - 200 null application/json; charset=utf-8 49.7415ms
2025-11-16 19:37:27.619 +03:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:8080/api/v1/auth/refresh-token - null null
2025-11-16 19:37:27.623 +03:00 [INF] CORS policy execution successful.
2025-11-16 19:37:27.624 +03:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:8080/api/v1/auth/refresh-token - 204 null null 6.3304ms
2025-11-16 19:37:27.625 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:8080/api/v1/auth/refresh-token - null 0
2025-11-16 19:37:27.625 +03:00 [INF] CORS policy execution successful.
2025-11-16 19:37:27.657 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 19:37:27.657 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication)'
2025-11-16 19:37:27.658 +03:00 [INF] Route matched with {action = "RefreshToken", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.user.AuthResponse] RefreshToken() on controller MappyApplication.Controllers.AuthController (MappyApplication).
2025-11-16 19:37:27.659 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__refreshToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`RefreshToken` = @__refreshToken_0
LIMIT 2
2025-11-16 19:37:27.663 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[@__p_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`FirstName`, `a`.`LastName`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`
FROM `AspNetUsers` AS `a`
WHERE `a`.`Id` = @__p_0
LIMIT 1
2025-11-16 19:37:27.668 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']

        UPDATE TOKENS
        SET Revoked = true, Expired = true
        WHERE UserId = @p0
          AND DeviceId = @p1
          AND Revoked = false
          AND Expired = false
2025-11-16 19:37:27.672 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a0`.`Name`
FROM `AspNetUserRoles` AS `a`
INNER JOIN `AspNetRoles` AS `a0` ON `a`.`RoleId` = `a0`.`Id`
WHERE `a`.`UserId` = @__userId_0
2025-11-16 19:37:27.673 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ClaimType`, `a`.`ClaimValue`, `a`.`UserId`
FROM `AspNetUserClaims` AS `a`
WHERE `a`.`UserId` = @__user_Id_0
2025-11-16 19:37:27.674 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a0`.`Name`
FROM `AspNetUserRoles` AS `a`
INNER JOIN `AspNetRoles` AS `a0` ON `a`.`RoleId` = `a0`.`Id`
WHERE `a`.`UserId` = @__userId_0
2025-11-16 19:37:27.674 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ClaimType`, `a`.`ClaimValue`, `a`.`UserId`
FROM `AspNetUserClaims` AS `a`
WHERE `a`.`UserId` = @__user_Id_0
2025-11-16 19:37:27.677 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (DbType = DateTime), @p2='?' (Size = 4000), @p3='?' (DbType = Boolean), @p4='?' (Size = 4000), @p5='?' (DbType = Boolean), @p6='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO `Tokens` (`AccessToken`, `CreatedAt`, `DeviceId`, `Expired`, `RefreshToken`, `Revoked`, `UserId`)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6);
SELECT `Id`
FROM `Tokens`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();
2025-11-16 19:37:27.678 +03:00 [INF] Added Token MappyApplication.Data.Token
2025-11-16 19:37:27.680 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessFailedCount`, `t`.`ConcurrencyStamp`, `t`.`Email`, `t`.`EmailConfirmed`, `t`.`FirstName`, `t`.`LastName`, `t`.`LockoutEnabled`, `t`.`LockoutEnd`, `t`.`NormalizedEmail`, `t`.`NormalizedUserName`, `t`.`PasswordHash`, `t`.`PhoneNumber`, `t`.`PhoneNumberConfirmed`, `t`.`SecurityStamp`, `t`.`TwoFactorEnabled`, `t`.`UserName`, `w`.`Id`, `w`.`Cadence`, `w`.`CityName`, `w`.`Coords`, `w`.`Date`, `w`.`Distance`, `w`.`Duration`, `w`.`Emoji`, `w`.`Pace`, `w`.`Type`, `w`.`UserId`, `c`.`Id`, `c`.`CityName`, `c`.`Country`, `c`.`Date`, `c`.`Emoji`, `c`.`Lat`, `c`.`Lng`, `c`.`Notes`, `c`.`UserId`
FROM (
    SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`FirstName`, `a`.`LastName`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`
    FROM `AspNetUsers` AS `a`
    WHERE `a`.`Id` = @__user_Id_0
    LIMIT 2
) AS `t`
LEFT JOIN `Workouts` AS `w` ON `t`.`Id` = `w`.`UserId`
LEFT JOIN `Cities` AS `c` ON `t`.`Id` = `c`.`UserId`
ORDER BY `t`.`Id`, `w`.`Id`
2025-11-16 19:37:27.680 +03:00 [INF] Executing ObjectResult, writing value of type 'MappyApplication.Models.user.AuthResponse'.
2025-11-16 19:37:27.680 +03:00 [INF] Executed action MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication) in 22.5059ms
2025-11-16 19:37:27.680 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication)'
2025-11-16 19:37:27.680 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:8080/api/v1/auth/refresh-token - 200 null application/json; charset=utf-8 55.3087ms
2025-11-16 19:37:29.485 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:8080/api/v1/auth/refresh-token - null 0
2025-11-16 19:37:29.485 +03:00 [INF] CORS policy execution successful.
2025-11-16 19:37:29.509 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 19:37:29.510 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication)'
2025-11-16 19:37:29.510 +03:00 [INF] Route matched with {action = "RefreshToken", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.user.AuthResponse] RefreshToken() on controller MappyApplication.Controllers.AuthController (MappyApplication).
2025-11-16 19:37:29.511 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__refreshToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`RefreshToken` = @__refreshToken_0
LIMIT 2
2025-11-16 19:37:29.513 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`FirstName`, `a`.`LastName`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`
FROM `AspNetUsers` AS `a`
WHERE `a`.`Id` = @__p_0
LIMIT 1
2025-11-16 19:37:29.517 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']

        UPDATE TOKENS
        SET Revoked = true, Expired = true
        WHERE UserId = @p0
          AND DeviceId = @p1
          AND Revoked = false
          AND Expired = false
2025-11-16 19:37:29.518 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a0`.`Name`
FROM `AspNetUserRoles` AS `a`
INNER JOIN `AspNetRoles` AS `a0` ON `a`.`RoleId` = `a0`.`Id`
WHERE `a`.`UserId` = @__userId_0
2025-11-16 19:37:29.518 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ClaimType`, `a`.`ClaimValue`, `a`.`UserId`
FROM `AspNetUserClaims` AS `a`
WHERE `a`.`UserId` = @__user_Id_0
2025-11-16 19:37:29.519 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a0`.`Name`
FROM `AspNetUserRoles` AS `a`
INNER JOIN `AspNetRoles` AS `a0` ON `a`.`RoleId` = `a0`.`Id`
WHERE `a`.`UserId` = @__userId_0
2025-11-16 19:37:29.520 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ClaimType`, `a`.`ClaimValue`, `a`.`UserId`
FROM `AspNetUserClaims` AS `a`
WHERE `a`.`UserId` = @__user_Id_0
2025-11-16 19:37:29.522 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (DbType = DateTime), @p2='?' (Size = 4000), @p3='?' (DbType = Boolean), @p4='?' (Size = 4000), @p5='?' (DbType = Boolean), @p6='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO `Tokens` (`AccessToken`, `CreatedAt`, `DeviceId`, `Expired`, `RefreshToken`, `Revoked`, `UserId`)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6);
SELECT `Id`
FROM `Tokens`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();
2025-11-16 19:37:29.523 +03:00 [INF] Added Token MappyApplication.Data.Token
2025-11-16 19:37:29.524 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessFailedCount`, `t`.`ConcurrencyStamp`, `t`.`Email`, `t`.`EmailConfirmed`, `t`.`FirstName`, `t`.`LastName`, `t`.`LockoutEnabled`, `t`.`LockoutEnd`, `t`.`NormalizedEmail`, `t`.`NormalizedUserName`, `t`.`PasswordHash`, `t`.`PhoneNumber`, `t`.`PhoneNumberConfirmed`, `t`.`SecurityStamp`, `t`.`TwoFactorEnabled`, `t`.`UserName`, `w`.`Id`, `w`.`Cadence`, `w`.`CityName`, `w`.`Coords`, `w`.`Date`, `w`.`Distance`, `w`.`Duration`, `w`.`Emoji`, `w`.`Pace`, `w`.`Type`, `w`.`UserId`, `c`.`Id`, `c`.`CityName`, `c`.`Country`, `c`.`Date`, `c`.`Emoji`, `c`.`Lat`, `c`.`Lng`, `c`.`Notes`, `c`.`UserId`
FROM (
    SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`FirstName`, `a`.`LastName`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`
    FROM `AspNetUsers` AS `a`
    WHERE `a`.`Id` = @__user_Id_0
    LIMIT 2
) AS `t`
LEFT JOIN `Workouts` AS `w` ON `t`.`Id` = `w`.`UserId`
LEFT JOIN `Cities` AS `c` ON `t`.`Id` = `c`.`UserId`
ORDER BY `t`.`Id`, `w`.`Id`
2025-11-16 19:37:29.524 +03:00 [INF] Executing ObjectResult, writing value of type 'MappyApplication.Models.user.AuthResponse'.
2025-11-16 19:37:29.524 +03:00 [INF] Executed action MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication) in 14.4305ms
2025-11-16 19:37:29.524 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication)'
2025-11-16 19:37:29.524 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:8080/api/v1/auth/refresh-token - 200 null application/json; charset=utf-8 39.6299ms
2025-11-16 19:37:30.126 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:8080/api/v1/auth/refresh-token - null 0
2025-11-16 19:37:30.127 +03:00 [INF] CORS policy execution successful.
2025-11-16 19:37:30.153 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 19:37:30.154 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication)'
2025-11-16 19:37:30.154 +03:00 [INF] Route matched with {action = "RefreshToken", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.user.AuthResponse] RefreshToken() on controller MappyApplication.Controllers.AuthController (MappyApplication).
2025-11-16 19:37:30.156 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__refreshToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`RefreshToken` = @__refreshToken_0
LIMIT 2
2025-11-16 19:37:30.159 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`FirstName`, `a`.`LastName`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`
FROM `AspNetUsers` AS `a`
WHERE `a`.`Id` = @__p_0
LIMIT 1
2025-11-16 19:37:30.164 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']

        UPDATE TOKENS
        SET Revoked = true, Expired = true
        WHERE UserId = @p0
          AND DeviceId = @p1
          AND Revoked = false
          AND Expired = false
2025-11-16 19:37:30.165 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a0`.`Name`
FROM `AspNetUserRoles` AS `a`
INNER JOIN `AspNetRoles` AS `a0` ON `a`.`RoleId` = `a0`.`Id`
WHERE `a`.`UserId` = @__userId_0
2025-11-16 19:37:30.166 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ClaimType`, `a`.`ClaimValue`, `a`.`UserId`
FROM `AspNetUserClaims` AS `a`
WHERE `a`.`UserId` = @__user_Id_0
2025-11-16 19:37:30.167 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a0`.`Name`
FROM `AspNetUserRoles` AS `a`
INNER JOIN `AspNetRoles` AS `a0` ON `a`.`RoleId` = `a0`.`Id`
WHERE `a`.`UserId` = @__userId_0
2025-11-16 19:37:30.167 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ClaimType`, `a`.`ClaimValue`, `a`.`UserId`
FROM `AspNetUserClaims` AS `a`
WHERE `a`.`UserId` = @__user_Id_0
2025-11-16 19:37:30.170 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (DbType = DateTime), @p2='?' (Size = 4000), @p3='?' (DbType = Boolean), @p4='?' (Size = 4000), @p5='?' (DbType = Boolean), @p6='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO `Tokens` (`AccessToken`, `CreatedAt`, `DeviceId`, `Expired`, `RefreshToken`, `Revoked`, `UserId`)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6);
SELECT `Id`
FROM `Tokens`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();
2025-11-16 19:37:30.171 +03:00 [INF] Added Token MappyApplication.Data.Token
2025-11-16 19:37:30.173 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessFailedCount`, `t`.`ConcurrencyStamp`, `t`.`Email`, `t`.`EmailConfirmed`, `t`.`FirstName`, `t`.`LastName`, `t`.`LockoutEnabled`, `t`.`LockoutEnd`, `t`.`NormalizedEmail`, `t`.`NormalizedUserName`, `t`.`PasswordHash`, `t`.`PhoneNumber`, `t`.`PhoneNumberConfirmed`, `t`.`SecurityStamp`, `t`.`TwoFactorEnabled`, `t`.`UserName`, `w`.`Id`, `w`.`Cadence`, `w`.`CityName`, `w`.`Coords`, `w`.`Date`, `w`.`Distance`, `w`.`Duration`, `w`.`Emoji`, `w`.`Pace`, `w`.`Type`, `w`.`UserId`, `c`.`Id`, `c`.`CityName`, `c`.`Country`, `c`.`Date`, `c`.`Emoji`, `c`.`Lat`, `c`.`Lng`, `c`.`Notes`, `c`.`UserId`
FROM (
    SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`FirstName`, `a`.`LastName`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`
    FROM `AspNetUsers` AS `a`
    WHERE `a`.`Id` = @__user_Id_0
    LIMIT 2
) AS `t`
LEFT JOIN `Workouts` AS `w` ON `t`.`Id` = `w`.`UserId`
LEFT JOIN `Cities` AS `c` ON `t`.`Id` = `c`.`UserId`
ORDER BY `t`.`Id`, `w`.`Id`
2025-11-16 19:37:30.174 +03:00 [INF] Executing ObjectResult, writing value of type 'MappyApplication.Models.user.AuthResponse'.
2025-11-16 19:37:30.174 +03:00 [INF] Executed action MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication) in 19.6975ms
2025-11-16 19:37:30.174 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication)'
2025-11-16 19:37:30.174 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:8080/api/v1/auth/refresh-token - 200 null application/json; charset=utf-8 48.4886ms
2025-11-16 19:37:35.441 +03:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:8080/api/v1/auth/refresh-token - null null
2025-11-16 19:37:35.442 +03:00 [INF] CORS policy execution successful.
2025-11-16 19:37:35.444 +03:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:8080/api/v1/auth/refresh-token - 204 null null 2.6378ms
2025-11-16 19:37:35.445 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:8080/api/v1/auth/refresh-token - null 0
2025-11-16 19:37:35.445 +03:00 [INF] CORS policy execution successful.
2025-11-16 19:37:35.462 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 19:37:35.463 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication)'
2025-11-16 19:37:35.463 +03:00 [INF] Route matched with {action = "RefreshToken", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.user.AuthResponse] RefreshToken() on controller MappyApplication.Controllers.AuthController (MappyApplication).
2025-11-16 19:37:35.464 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__refreshToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`RefreshToken` = @__refreshToken_0
LIMIT 2
2025-11-16 19:37:35.471 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`FirstName`, `a`.`LastName`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`
FROM `AspNetUsers` AS `a`
WHERE `a`.`Id` = @__p_0
LIMIT 1
2025-11-16 19:37:35.473 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']

        UPDATE TOKENS
        SET Revoked = true, Expired = true
        WHERE UserId = @p0
          AND DeviceId = @p1
          AND Revoked = false
          AND Expired = false
2025-11-16 19:37:35.474 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a0`.`Name`
FROM `AspNetUserRoles` AS `a`
INNER JOIN `AspNetRoles` AS `a0` ON `a`.`RoleId` = `a0`.`Id`
WHERE `a`.`UserId` = @__userId_0
2025-11-16 19:37:35.475 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ClaimType`, `a`.`ClaimValue`, `a`.`UserId`
FROM `AspNetUserClaims` AS `a`
WHERE `a`.`UserId` = @__user_Id_0
2025-11-16 19:37:35.475 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a0`.`Name`
FROM `AspNetUserRoles` AS `a`
INNER JOIN `AspNetRoles` AS `a0` ON `a`.`RoleId` = `a0`.`Id`
WHERE `a`.`UserId` = @__userId_0
2025-11-16 19:37:35.476 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ClaimType`, `a`.`ClaimValue`, `a`.`UserId`
FROM `AspNetUserClaims` AS `a`
WHERE `a`.`UserId` = @__user_Id_0
2025-11-16 19:37:35.477 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (DbType = DateTime), @p2='?' (Size = 4000), @p3='?' (DbType = Boolean), @p4='?' (Size = 4000), @p5='?' (DbType = Boolean), @p6='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO `Tokens` (`AccessToken`, `CreatedAt`, `DeviceId`, `Expired`, `RefreshToken`, `Revoked`, `UserId`)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6);
SELECT `Id`
FROM `Tokens`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();
2025-11-16 19:37:35.478 +03:00 [INF] Added Token MappyApplication.Data.Token
2025-11-16 19:37:35.479 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessFailedCount`, `t`.`ConcurrencyStamp`, `t`.`Email`, `t`.`EmailConfirmed`, `t`.`FirstName`, `t`.`LastName`, `t`.`LockoutEnabled`, `t`.`LockoutEnd`, `t`.`NormalizedEmail`, `t`.`NormalizedUserName`, `t`.`PasswordHash`, `t`.`PhoneNumber`, `t`.`PhoneNumberConfirmed`, `t`.`SecurityStamp`, `t`.`TwoFactorEnabled`, `t`.`UserName`, `w`.`Id`, `w`.`Cadence`, `w`.`CityName`, `w`.`Coords`, `w`.`Date`, `w`.`Distance`, `w`.`Duration`, `w`.`Emoji`, `w`.`Pace`, `w`.`Type`, `w`.`UserId`, `c`.`Id`, `c`.`CityName`, `c`.`Country`, `c`.`Date`, `c`.`Emoji`, `c`.`Lat`, `c`.`Lng`, `c`.`Notes`, `c`.`UserId`
FROM (
    SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`FirstName`, `a`.`LastName`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`
    FROM `AspNetUsers` AS `a`
    WHERE `a`.`Id` = @__user_Id_0
    LIMIT 2
) AS `t`
LEFT JOIN `Workouts` AS `w` ON `t`.`Id` = `w`.`UserId`
LEFT JOIN `Cities` AS `c` ON `t`.`Id` = `c`.`UserId`
ORDER BY `t`.`Id`, `w`.`Id`
2025-11-16 19:37:35.479 +03:00 [INF] Executing ObjectResult, writing value of type 'MappyApplication.Models.user.AuthResponse'.
2025-11-16 19:37:35.479 +03:00 [INF] Executed action MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication) in 16.2376ms
2025-11-16 19:37:35.479 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication)'
2025-11-16 19:37:35.479 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:8080/api/v1/auth/refresh-token - 200 null application/json; charset=utf-8 34.3142ms
2025-11-16 19:37:37.607 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:8080/api/v1/auth/refresh-token - null 0
2025-11-16 19:37:37.610 +03:00 [INF] CORS policy execution successful.
2025-11-16 19:37:37.648 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 19:37:37.650 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication)'
2025-11-16 19:37:37.650 +03:00 [INF] Route matched with {action = "RefreshToken", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.user.AuthResponse] RefreshToken() on controller MappyApplication.Controllers.AuthController (MappyApplication).
2025-11-16 19:37:37.651 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__refreshToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`RefreshToken` = @__refreshToken_0
LIMIT 2
2025-11-16 19:37:37.653 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`FirstName`, `a`.`LastName`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`
FROM `AspNetUsers` AS `a`
WHERE `a`.`Id` = @__p_0
LIMIT 1
2025-11-16 19:37:37.656 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']

        UPDATE TOKENS
        SET Revoked = true, Expired = true
        WHERE UserId = @p0
          AND DeviceId = @p1
          AND Revoked = false
          AND Expired = false
2025-11-16 19:37:37.657 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a0`.`Name`
FROM `AspNetUserRoles` AS `a`
INNER JOIN `AspNetRoles` AS `a0` ON `a`.`RoleId` = `a0`.`Id`
WHERE `a`.`UserId` = @__userId_0
2025-11-16 19:37:37.657 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ClaimType`, `a`.`ClaimValue`, `a`.`UserId`
FROM `AspNetUserClaims` AS `a`
WHERE `a`.`UserId` = @__user_Id_0
2025-11-16 19:37:37.658 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a0`.`Name`
FROM `AspNetUserRoles` AS `a`
INNER JOIN `AspNetRoles` AS `a0` ON `a`.`RoleId` = `a0`.`Id`
WHERE `a`.`UserId` = @__userId_0
2025-11-16 19:37:37.658 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ClaimType`, `a`.`ClaimValue`, `a`.`UserId`
FROM `AspNetUserClaims` AS `a`
WHERE `a`.`UserId` = @__user_Id_0
2025-11-16 19:37:37.660 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (DbType = DateTime), @p2='?' (Size = 4000), @p3='?' (DbType = Boolean), @p4='?' (Size = 4000), @p5='?' (DbType = Boolean), @p6='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO `Tokens` (`AccessToken`, `CreatedAt`, `DeviceId`, `Expired`, `RefreshToken`, `Revoked`, `UserId`)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6);
SELECT `Id`
FROM `Tokens`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();
2025-11-16 19:37:37.661 +03:00 [INF] Added Token MappyApplication.Data.Token
2025-11-16 19:37:37.662 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessFailedCount`, `t`.`ConcurrencyStamp`, `t`.`Email`, `t`.`EmailConfirmed`, `t`.`FirstName`, `t`.`LastName`, `t`.`LockoutEnabled`, `t`.`LockoutEnd`, `t`.`NormalizedEmail`, `t`.`NormalizedUserName`, `t`.`PasswordHash`, `t`.`PhoneNumber`, `t`.`PhoneNumberConfirmed`, `t`.`SecurityStamp`, `t`.`TwoFactorEnabled`, `t`.`UserName`, `w`.`Id`, `w`.`Cadence`, `w`.`CityName`, `w`.`Coords`, `w`.`Date`, `w`.`Distance`, `w`.`Duration`, `w`.`Emoji`, `w`.`Pace`, `w`.`Type`, `w`.`UserId`, `c`.`Id`, `c`.`CityName`, `c`.`Country`, `c`.`Date`, `c`.`Emoji`, `c`.`Lat`, `c`.`Lng`, `c`.`Notes`, `c`.`UserId`
FROM (
    SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`FirstName`, `a`.`LastName`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`
    FROM `AspNetUsers` AS `a`
    WHERE `a`.`Id` = @__user_Id_0
    LIMIT 2
) AS `t`
LEFT JOIN `Workouts` AS `w` ON `t`.`Id` = `w`.`UserId`
LEFT JOIN `Cities` AS `c` ON `t`.`Id` = `c`.`UserId`
ORDER BY `t`.`Id`, `w`.`Id`
2025-11-16 19:37:37.662 +03:00 [INF] Executing ObjectResult, writing value of type 'MappyApplication.Models.user.AuthResponse'.
2025-11-16 19:37:37.662 +03:00 [INF] Executed action MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication) in 12.4585ms
2025-11-16 19:37:37.662 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication)'
2025-11-16 19:37:37.662 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:8080/api/v1/auth/refresh-token - 200 null application/json; charset=utf-8 55.5365ms
2025-11-16 19:37:45.969 +03:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:8080/api/v1/auth/refresh-token - null null
2025-11-16 19:37:45.971 +03:00 [INF] CORS policy execution successful.
2025-11-16 19:37:45.971 +03:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:8080/api/v1/auth/refresh-token - 204 null null 2.1653ms
2025-11-16 19:37:45.972 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:8080/api/v1/auth/refresh-token - null 0
2025-11-16 19:37:45.973 +03:00 [INF] CORS policy execution successful.
2025-11-16 19:37:46.004 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 19:37:46.005 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication)'
2025-11-16 19:37:46.005 +03:00 [INF] Route matched with {action = "RefreshToken", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.user.AuthResponse] RefreshToken() on controller MappyApplication.Controllers.AuthController (MappyApplication).
2025-11-16 19:37:46.007 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__refreshToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`RefreshToken` = @__refreshToken_0
LIMIT 2
2025-11-16 19:37:46.008 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`FirstName`, `a`.`LastName`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`
FROM `AspNetUsers` AS `a`
WHERE `a`.`Id` = @__p_0
LIMIT 1
2025-11-16 19:37:46.011 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']

        UPDATE TOKENS
        SET Revoked = true, Expired = true
        WHERE UserId = @p0
          AND DeviceId = @p1
          AND Revoked = false
          AND Expired = false
2025-11-16 19:37:46.012 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a0`.`Name`
FROM `AspNetUserRoles` AS `a`
INNER JOIN `AspNetRoles` AS `a0` ON `a`.`RoleId` = `a0`.`Id`
WHERE `a`.`UserId` = @__userId_0
2025-11-16 19:37:46.012 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ClaimType`, `a`.`ClaimValue`, `a`.`UserId`
FROM `AspNetUserClaims` AS `a`
WHERE `a`.`UserId` = @__user_Id_0
2025-11-16 19:37:46.013 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a0`.`Name`
FROM `AspNetUserRoles` AS `a`
INNER JOIN `AspNetRoles` AS `a0` ON `a`.`RoleId` = `a0`.`Id`
WHERE `a`.`UserId` = @__userId_0
2025-11-16 19:37:46.014 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ClaimType`, `a`.`ClaimValue`, `a`.`UserId`
FROM `AspNetUserClaims` AS `a`
WHERE `a`.`UserId` = @__user_Id_0
2025-11-16 19:37:46.016 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (DbType = DateTime), @p2='?' (Size = 4000), @p3='?' (DbType = Boolean), @p4='?' (Size = 4000), @p5='?' (DbType = Boolean), @p6='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO `Tokens` (`AccessToken`, `CreatedAt`, `DeviceId`, `Expired`, `RefreshToken`, `Revoked`, `UserId`)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6);
SELECT `Id`
FROM `Tokens`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();
2025-11-16 19:37:46.017 +03:00 [INF] Added Token MappyApplication.Data.Token
2025-11-16 19:37:46.018 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessFailedCount`, `t`.`ConcurrencyStamp`, `t`.`Email`, `t`.`EmailConfirmed`, `t`.`FirstName`, `t`.`LastName`, `t`.`LockoutEnabled`, `t`.`LockoutEnd`, `t`.`NormalizedEmail`, `t`.`NormalizedUserName`, `t`.`PasswordHash`, `t`.`PhoneNumber`, `t`.`PhoneNumberConfirmed`, `t`.`SecurityStamp`, `t`.`TwoFactorEnabled`, `t`.`UserName`, `w`.`Id`, `w`.`Cadence`, `w`.`CityName`, `w`.`Coords`, `w`.`Date`, `w`.`Distance`, `w`.`Duration`, `w`.`Emoji`, `w`.`Pace`, `w`.`Type`, `w`.`UserId`, `c`.`Id`, `c`.`CityName`, `c`.`Country`, `c`.`Date`, `c`.`Emoji`, `c`.`Lat`, `c`.`Lng`, `c`.`Notes`, `c`.`UserId`
FROM (
    SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`FirstName`, `a`.`LastName`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`
    FROM `AspNetUsers` AS `a`
    WHERE `a`.`Id` = @__user_Id_0
    LIMIT 2
) AS `t`
LEFT JOIN `Workouts` AS `w` ON `t`.`Id` = `w`.`UserId`
LEFT JOIN `Cities` AS `c` ON `t`.`Id` = `c`.`UserId`
ORDER BY `t`.`Id`, `w`.`Id`
2025-11-16 19:37:46.018 +03:00 [INF] Executing ObjectResult, writing value of type 'MappyApplication.Models.user.AuthResponse'.
2025-11-16 19:37:46.019 +03:00 [INF] Executed action MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication) in 13.4582ms
2025-11-16 19:37:46.019 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication)'
2025-11-16 19:37:46.019 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:8080/api/v1/auth/refresh-token - 200 null application/json; charset=utf-8 46.4004ms
2025-11-16 19:37:47.487 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:8080/api/v1/auth/refresh-token - null 0
2025-11-16 19:37:47.487 +03:00 [INF] CORS policy execution successful.
2025-11-16 19:37:47.500 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 19:37:47.500 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication)'
2025-11-16 19:37:47.500 +03:00 [INF] Route matched with {action = "RefreshToken", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.user.AuthResponse] RefreshToken() on controller MappyApplication.Controllers.AuthController (MappyApplication).
2025-11-16 19:37:47.502 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__refreshToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`RefreshToken` = @__refreshToken_0
LIMIT 2
2025-11-16 19:37:47.503 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`FirstName`, `a`.`LastName`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`
FROM `AspNetUsers` AS `a`
WHERE `a`.`Id` = @__p_0
LIMIT 1
2025-11-16 19:37:47.506 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']

        UPDATE TOKENS
        SET Revoked = true, Expired = true
        WHERE UserId = @p0
          AND DeviceId = @p1
          AND Revoked = false
          AND Expired = false
2025-11-16 19:37:47.507 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a0`.`Name`
FROM `AspNetUserRoles` AS `a`
INNER JOIN `AspNetRoles` AS `a0` ON `a`.`RoleId` = `a0`.`Id`
WHERE `a`.`UserId` = @__userId_0
2025-11-16 19:37:47.507 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ClaimType`, `a`.`ClaimValue`, `a`.`UserId`
FROM `AspNetUserClaims` AS `a`
WHERE `a`.`UserId` = @__user_Id_0
2025-11-16 19:37:47.508 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a0`.`Name`
FROM `AspNetUserRoles` AS `a`
INNER JOIN `AspNetRoles` AS `a0` ON `a`.`RoleId` = `a0`.`Id`
WHERE `a`.`UserId` = @__userId_0
2025-11-16 19:37:47.508 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ClaimType`, `a`.`ClaimValue`, `a`.`UserId`
FROM `AspNetUserClaims` AS `a`
WHERE `a`.`UserId` = @__user_Id_0
2025-11-16 19:37:47.509 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (DbType = DateTime), @p2='?' (Size = 4000), @p3='?' (DbType = Boolean), @p4='?' (Size = 4000), @p5='?' (DbType = Boolean), @p6='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO `Tokens` (`AccessToken`, `CreatedAt`, `DeviceId`, `Expired`, `RefreshToken`, `Revoked`, `UserId`)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6);
SELECT `Id`
FROM `Tokens`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();
2025-11-16 19:37:47.509 +03:00 [INF] Added Token MappyApplication.Data.Token
2025-11-16 19:37:47.510 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessFailedCount`, `t`.`ConcurrencyStamp`, `t`.`Email`, `t`.`EmailConfirmed`, `t`.`FirstName`, `t`.`LastName`, `t`.`LockoutEnabled`, `t`.`LockoutEnd`, `t`.`NormalizedEmail`, `t`.`NormalizedUserName`, `t`.`PasswordHash`, `t`.`PhoneNumber`, `t`.`PhoneNumberConfirmed`, `t`.`SecurityStamp`, `t`.`TwoFactorEnabled`, `t`.`UserName`, `w`.`Id`, `w`.`Cadence`, `w`.`CityName`, `w`.`Coords`, `w`.`Date`, `w`.`Distance`, `w`.`Duration`, `w`.`Emoji`, `w`.`Pace`, `w`.`Type`, `w`.`UserId`, `c`.`Id`, `c`.`CityName`, `c`.`Country`, `c`.`Date`, `c`.`Emoji`, `c`.`Lat`, `c`.`Lng`, `c`.`Notes`, `c`.`UserId`
FROM (
    SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`FirstName`, `a`.`LastName`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`
    FROM `AspNetUsers` AS `a`
    WHERE `a`.`Id` = @__user_Id_0
    LIMIT 2
) AS `t`
LEFT JOIN `Workouts` AS `w` ON `t`.`Id` = `w`.`UserId`
LEFT JOIN `Cities` AS `c` ON `t`.`Id` = `c`.`UserId`
ORDER BY `t`.`Id`, `w`.`Id`
2025-11-16 19:37:47.510 +03:00 [INF] Executing ObjectResult, writing value of type 'MappyApplication.Models.user.AuthResponse'.
2025-11-16 19:37:47.510 +03:00 [INF] Executed action MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication) in 9.4991ms
2025-11-16 19:37:47.510 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication)'
2025-11-16 19:37:47.510 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:8080/api/v1/auth/refresh-token - 200 null application/json; charset=utf-8 22.88ms
2025-11-16 19:37:50.013 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:8080/api/v1/auth/refresh-token - null 0
2025-11-16 19:37:50.015 +03:00 [INF] CORS policy execution successful.
2025-11-16 19:37:50.046 +03:00 [INF] Executed DbCommand (4ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 19:37:50.047 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication)'
2025-11-16 19:37:50.047 +03:00 [INF] Route matched with {action = "RefreshToken", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.user.AuthResponse] RefreshToken() on controller MappyApplication.Controllers.AuthController (MappyApplication).
2025-11-16 19:37:50.048 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__refreshToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`RefreshToken` = @__refreshToken_0
LIMIT 2
2025-11-16 19:37:50.050 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`FirstName`, `a`.`LastName`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`
FROM `AspNetUsers` AS `a`
WHERE `a`.`Id` = @__p_0
LIMIT 1
2025-11-16 19:37:50.052 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']

        UPDATE TOKENS
        SET Revoked = true, Expired = true
        WHERE UserId = @p0
          AND DeviceId = @p1
          AND Revoked = false
          AND Expired = false
2025-11-16 19:37:50.053 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a0`.`Name`
FROM `AspNetUserRoles` AS `a`
INNER JOIN `AspNetRoles` AS `a0` ON `a`.`RoleId` = `a0`.`Id`
WHERE `a`.`UserId` = @__userId_0
2025-11-16 19:37:50.054 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ClaimType`, `a`.`ClaimValue`, `a`.`UserId`
FROM `AspNetUserClaims` AS `a`
WHERE `a`.`UserId` = @__user_Id_0
2025-11-16 19:37:50.054 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a0`.`Name`
FROM `AspNetUserRoles` AS `a`
INNER JOIN `AspNetRoles` AS `a0` ON `a`.`RoleId` = `a0`.`Id`
WHERE `a`.`UserId` = @__userId_0
2025-11-16 19:37:50.055 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ClaimType`, `a`.`ClaimValue`, `a`.`UserId`
FROM `AspNetUserClaims` AS `a`
WHERE `a`.`UserId` = @__user_Id_0
2025-11-16 19:37:50.057 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (DbType = DateTime), @p2='?' (Size = 4000), @p3='?' (DbType = Boolean), @p4='?' (Size = 4000), @p5='?' (DbType = Boolean), @p6='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO `Tokens` (`AccessToken`, `CreatedAt`, `DeviceId`, `Expired`, `RefreshToken`, `Revoked`, `UserId`)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6);
SELECT `Id`
FROM `Tokens`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();
2025-11-16 19:37:50.057 +03:00 [INF] Added Token MappyApplication.Data.Token
2025-11-16 19:37:50.058 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessFailedCount`, `t`.`ConcurrencyStamp`, `t`.`Email`, `t`.`EmailConfirmed`, `t`.`FirstName`, `t`.`LastName`, `t`.`LockoutEnabled`, `t`.`LockoutEnd`, `t`.`NormalizedEmail`, `t`.`NormalizedUserName`, `t`.`PasswordHash`, `t`.`PhoneNumber`, `t`.`PhoneNumberConfirmed`, `t`.`SecurityStamp`, `t`.`TwoFactorEnabled`, `t`.`UserName`, `w`.`Id`, `w`.`Cadence`, `w`.`CityName`, `w`.`Coords`, `w`.`Date`, `w`.`Distance`, `w`.`Duration`, `w`.`Emoji`, `w`.`Pace`, `w`.`Type`, `w`.`UserId`, `c`.`Id`, `c`.`CityName`, `c`.`Country`, `c`.`Date`, `c`.`Emoji`, `c`.`Lat`, `c`.`Lng`, `c`.`Notes`, `c`.`UserId`
FROM (
    SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`FirstName`, `a`.`LastName`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`
    FROM `AspNetUsers` AS `a`
    WHERE `a`.`Id` = @__user_Id_0
    LIMIT 2
) AS `t`
LEFT JOIN `Workouts` AS `w` ON `t`.`Id` = `w`.`UserId`
LEFT JOIN `Cities` AS `c` ON `t`.`Id` = `c`.`UserId`
ORDER BY `t`.`Id`, `w`.`Id`
2025-11-16 19:37:50.058 +03:00 [INF] Executing ObjectResult, writing value of type 'MappyApplication.Models.user.AuthResponse'.
2025-11-16 19:37:50.059 +03:00 [INF] Executed action MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication) in 11.5623ms
2025-11-16 19:37:50.059 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication)'
2025-11-16 19:37:50.059 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:8080/api/v1/auth/refresh-token - 200 null application/json; charset=utf-8 46.3412ms
2025-11-16 19:38:07.783 +03:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:8080/api/v1/auth/refresh-token - null null
2025-11-16 19:38:07.784 +03:00 [INF] CORS policy execution successful.
2025-11-16 19:38:07.785 +03:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:8080/api/v1/auth/refresh-token - 204 null null 2.3131ms
2025-11-16 19:38:07.785 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:8080/api/v1/auth/refresh-token - null 0
2025-11-16 19:38:07.786 +03:00 [INF] CORS policy execution successful.
2025-11-16 19:38:07.818 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 19:38:07.820 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication)'
2025-11-16 19:38:07.820 +03:00 [INF] Route matched with {action = "RefreshToken", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.user.AuthResponse] RefreshToken() on controller MappyApplication.Controllers.AuthController (MappyApplication).
2025-11-16 19:38:07.821 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__refreshToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`RefreshToken` = @__refreshToken_0
LIMIT 2
2025-11-16 19:38:07.823 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`FirstName`, `a`.`LastName`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`
FROM `AspNetUsers` AS `a`
WHERE `a`.`Id` = @__p_0
LIMIT 1
2025-11-16 19:38:07.827 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']

        UPDATE TOKENS
        SET Revoked = true, Expired = true
        WHERE UserId = @p0
          AND DeviceId = @p1
          AND Revoked = false
          AND Expired = false
2025-11-16 19:38:07.828 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a0`.`Name`
FROM `AspNetUserRoles` AS `a`
INNER JOIN `AspNetRoles` AS `a0` ON `a`.`RoleId` = `a0`.`Id`
WHERE `a`.`UserId` = @__userId_0
2025-11-16 19:38:07.828 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ClaimType`, `a`.`ClaimValue`, `a`.`UserId`
FROM `AspNetUserClaims` AS `a`
WHERE `a`.`UserId` = @__user_Id_0
2025-11-16 19:38:07.829 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a0`.`Name`
FROM `AspNetUserRoles` AS `a`
INNER JOIN `AspNetRoles` AS `a0` ON `a`.`RoleId` = `a0`.`Id`
WHERE `a`.`UserId` = @__userId_0
2025-11-16 19:38:07.829 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ClaimType`, `a`.`ClaimValue`, `a`.`UserId`
FROM `AspNetUserClaims` AS `a`
WHERE `a`.`UserId` = @__user_Id_0
2025-11-16 19:38:07.831 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (DbType = DateTime), @p2='?' (Size = 4000), @p3='?' (DbType = Boolean), @p4='?' (Size = 4000), @p5='?' (DbType = Boolean), @p6='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO `Tokens` (`AccessToken`, `CreatedAt`, `DeviceId`, `Expired`, `RefreshToken`, `Revoked`, `UserId`)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6);
SELECT `Id`
FROM `Tokens`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();
2025-11-16 19:38:07.832 +03:00 [INF] Added Token MappyApplication.Data.Token
2025-11-16 19:38:07.834 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessFailedCount`, `t`.`ConcurrencyStamp`, `t`.`Email`, `t`.`EmailConfirmed`, `t`.`FirstName`, `t`.`LastName`, `t`.`LockoutEnabled`, `t`.`LockoutEnd`, `t`.`NormalizedEmail`, `t`.`NormalizedUserName`, `t`.`PasswordHash`, `t`.`PhoneNumber`, `t`.`PhoneNumberConfirmed`, `t`.`SecurityStamp`, `t`.`TwoFactorEnabled`, `t`.`UserName`, `w`.`Id`, `w`.`Cadence`, `w`.`CityName`, `w`.`Coords`, `w`.`Date`, `w`.`Distance`, `w`.`Duration`, `w`.`Emoji`, `w`.`Pace`, `w`.`Type`, `w`.`UserId`, `c`.`Id`, `c`.`CityName`, `c`.`Country`, `c`.`Date`, `c`.`Emoji`, `c`.`Lat`, `c`.`Lng`, `c`.`Notes`, `c`.`UserId`
FROM (
    SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`FirstName`, `a`.`LastName`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`
    FROM `AspNetUsers` AS `a`
    WHERE `a`.`Id` = @__user_Id_0
    LIMIT 2
) AS `t`
LEFT JOIN `Workouts` AS `w` ON `t`.`Id` = `w`.`UserId`
LEFT JOIN `Cities` AS `c` ON `t`.`Id` = `c`.`UserId`
ORDER BY `t`.`Id`, `w`.`Id`
2025-11-16 19:38:07.834 +03:00 [INF] Executing ObjectResult, writing value of type 'MappyApplication.Models.user.AuthResponse'.
2025-11-16 19:38:07.834 +03:00 [INF] Executed action MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication) in 14.448ms
2025-11-16 19:38:07.834 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication)'
2025-11-16 19:38:07.834 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:8080/api/v1/auth/refresh-token - 200 null application/json; charset=utf-8 48.9792ms
2025-11-16 19:38:32.082 +03:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:8080/api/v1/cities - null null
2025-11-16 19:38:32.085 +03:00 [INF] CORS policy execution successful.
2025-11-16 19:38:32.088 +03:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:8080/api/v1/cities - 204 null null 6.3278ms
2025-11-16 19:38:32.092 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:8080/api/v1/cities - application/json 216
2025-11-16 19:38:32.097 +03:00 [INF] CORS policy execution successful.
2025-11-16 19:38:32.153 +03:00 [INF] Executed DbCommand (4ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 19:38:32.154 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.CitiesController.AddAsynch (MappyApplication)'
2025-11-16 19:38:32.167 +03:00 [INF] Route matched with {action = "AddAsynch", controller = "Cities"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] AddAsynch(MappyApplication.Data.Cities) on controller MappyApplication.Controllers.CitiesController (MappyApplication).
2025-11-16 19:38:32.195 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`FirstName`, `a`.`LastName`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`
FROM `AspNetUsers` AS `a`
WHERE `a`.`Id` = @__p_0
LIMIT 1
2025-11-16 19:38:32.218 +03:00 [INF] Executed DbCommand (6ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (Size = 4000), @p2='?' (DbType = DateTime), @p3='?' (Size = 4000), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (Size = 4000), @p7='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO `Cities` (`CityName`, `Country`, `Date`, `Emoji`, `Lat`, `Lng`, `Notes`, `UserId`)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7);
SELECT `Id`
FROM `Cities`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();
2025-11-16 19:38:32.221 +03:00 [INF] Added Cities MappyApplication.Data.Cities
2025-11-16 19:38:32.221 +03:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType0`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-11-16 19:38:32.221 +03:00 [INF] Executed action MappyApplication.Controllers.CitiesController.AddAsynch (MappyApplication) in 53.9739ms
2025-11-16 19:38:32.221 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.CitiesController.AddAsynch (MappyApplication)'
2025-11-16 19:38:32.221 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:8080/api/v1/cities - 200 null application/json; charset=utf-8 129.7729ms
2025-11-16 19:38:34.748 +03:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:8080/api/v1/auth/refresh-token - null null
2025-11-16 19:38:34.748 +03:00 [INF] CORS policy execution successful.
2025-11-16 19:38:34.748 +03:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:8080/api/v1/auth/refresh-token - 204 null null 0.4503ms
2025-11-16 19:38:34.751 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:8080/api/v1/auth/refresh-token - null 0
2025-11-16 19:38:34.751 +03:00 [INF] CORS policy execution successful.
2025-11-16 19:38:34.767 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 19:38:34.767 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication)'
2025-11-16 19:38:34.767 +03:00 [INF] Route matched with {action = "RefreshToken", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.user.AuthResponse] RefreshToken() on controller MappyApplication.Controllers.AuthController (MappyApplication).
2025-11-16 19:38:34.768 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__refreshToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`RefreshToken` = @__refreshToken_0
LIMIT 2
2025-11-16 19:38:34.769 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`FirstName`, `a`.`LastName`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`
FROM `AspNetUsers` AS `a`
WHERE `a`.`Id` = @__p_0
LIMIT 1
2025-11-16 19:38:34.772 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']

        UPDATE TOKENS
        SET Revoked = true, Expired = true
        WHERE UserId = @p0
          AND DeviceId = @p1
          AND Revoked = false
          AND Expired = false
2025-11-16 19:38:34.773 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a0`.`Name`
FROM `AspNetUserRoles` AS `a`
INNER JOIN `AspNetRoles` AS `a0` ON `a`.`RoleId` = `a0`.`Id`
WHERE `a`.`UserId` = @__userId_0
2025-11-16 19:38:34.774 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ClaimType`, `a`.`ClaimValue`, `a`.`UserId`
FROM `AspNetUserClaims` AS `a`
WHERE `a`.`UserId` = @__user_Id_0
2025-11-16 19:38:34.774 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a0`.`Name`
FROM `AspNetUserRoles` AS `a`
INNER JOIN `AspNetRoles` AS `a0` ON `a`.`RoleId` = `a0`.`Id`
WHERE `a`.`UserId` = @__userId_0
2025-11-16 19:38:34.774 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ClaimType`, `a`.`ClaimValue`, `a`.`UserId`
FROM `AspNetUserClaims` AS `a`
WHERE `a`.`UserId` = @__user_Id_0
2025-11-16 19:38:34.776 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (DbType = DateTime), @p2='?' (Size = 4000), @p3='?' (DbType = Boolean), @p4='?' (Size = 4000), @p5='?' (DbType = Boolean), @p6='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO `Tokens` (`AccessToken`, `CreatedAt`, `DeviceId`, `Expired`, `RefreshToken`, `Revoked`, `UserId`)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6);
SELECT `Id`
FROM `Tokens`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();
2025-11-16 19:38:34.776 +03:00 [INF] Added Token MappyApplication.Data.Token
2025-11-16 19:38:34.783 +03:00 [INF] Executed DbCommand (7ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessFailedCount`, `t`.`ConcurrencyStamp`, `t`.`Email`, `t`.`EmailConfirmed`, `t`.`FirstName`, `t`.`LastName`, `t`.`LockoutEnabled`, `t`.`LockoutEnd`, `t`.`NormalizedEmail`, `t`.`NormalizedUserName`, `t`.`PasswordHash`, `t`.`PhoneNumber`, `t`.`PhoneNumberConfirmed`, `t`.`SecurityStamp`, `t`.`TwoFactorEnabled`, `t`.`UserName`, `w`.`Id`, `w`.`Cadence`, `w`.`CityName`, `w`.`Coords`, `w`.`Date`, `w`.`Distance`, `w`.`Duration`, `w`.`Emoji`, `w`.`Pace`, `w`.`Type`, `w`.`UserId`, `c`.`Id`, `c`.`CityName`, `c`.`Country`, `c`.`Date`, `c`.`Emoji`, `c`.`Lat`, `c`.`Lng`, `c`.`Notes`, `c`.`UserId`
FROM (
    SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`FirstName`, `a`.`LastName`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`
    FROM `AspNetUsers` AS `a`
    WHERE `a`.`Id` = @__user_Id_0
    LIMIT 2
) AS `t`
LEFT JOIN `Workouts` AS `w` ON `t`.`Id` = `w`.`UserId`
LEFT JOIN `Cities` AS `c` ON `t`.`Id` = `c`.`UserId`
ORDER BY `t`.`Id`, `w`.`Id`
2025-11-16 19:38:34.786 +03:00 [INF] Executing ObjectResult, writing value of type 'MappyApplication.Models.user.AuthResponse'.
2025-11-16 19:38:34.790 +03:00 [INF] Executed action MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication) in 23.3734ms
2025-11-16 19:38:34.790 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication)'
2025-11-16 19:38:34.790 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:8080/api/v1/auth/refresh-token - 200 null application/json; charset=utf-8 39.7973ms
2025-11-16 19:38:46.597 +03:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:8080/api/v1/auth/refresh-token - null null
2025-11-16 19:38:46.601 +03:00 [INF] CORS policy execution successful.
2025-11-16 19:38:46.601 +03:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:8080/api/v1/auth/refresh-token - 204 null null 4.2158ms
2025-11-16 19:38:46.603 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:8080/api/v1/auth/refresh-token - null 0
2025-11-16 19:38:46.603 +03:00 [INF] CORS policy execution successful.
2025-11-16 19:38:46.636 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 19:38:46.638 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication)'
2025-11-16 19:38:46.639 +03:00 [INF] Route matched with {action = "RefreshToken", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.user.AuthResponse] RefreshToken() on controller MappyApplication.Controllers.AuthController (MappyApplication).
2025-11-16 19:38:46.641 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__refreshToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`RefreshToken` = @__refreshToken_0
LIMIT 2
2025-11-16 19:38:46.643 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`FirstName`, `a`.`LastName`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`
FROM `AspNetUsers` AS `a`
WHERE `a`.`Id` = @__p_0
LIMIT 1
2025-11-16 19:38:46.648 +03:00 [INF] Executed DbCommand (5ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']

        UPDATE TOKENS
        SET Revoked = true, Expired = true
        WHERE UserId = @p0
          AND DeviceId = @p1
          AND Revoked = false
          AND Expired = false
2025-11-16 19:38:46.651 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a0`.`Name`
FROM `AspNetUserRoles` AS `a`
INNER JOIN `AspNetRoles` AS `a0` ON `a`.`RoleId` = `a0`.`Id`
WHERE `a`.`UserId` = @__userId_0
2025-11-16 19:38:46.652 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ClaimType`, `a`.`ClaimValue`, `a`.`UserId`
FROM `AspNetUserClaims` AS `a`
WHERE `a`.`UserId` = @__user_Id_0
2025-11-16 19:38:46.652 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a0`.`Name`
FROM `AspNetUserRoles` AS `a`
INNER JOIN `AspNetRoles` AS `a0` ON `a`.`RoleId` = `a0`.`Id`
WHERE `a`.`UserId` = @__userId_0
2025-11-16 19:38:46.653 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ClaimType`, `a`.`ClaimValue`, `a`.`UserId`
FROM `AspNetUserClaims` AS `a`
WHERE `a`.`UserId` = @__user_Id_0
2025-11-16 19:38:46.655 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (DbType = DateTime), @p2='?' (Size = 4000), @p3='?' (DbType = Boolean), @p4='?' (Size = 4000), @p5='?' (DbType = Boolean), @p6='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO `Tokens` (`AccessToken`, `CreatedAt`, `DeviceId`, `Expired`, `RefreshToken`, `Revoked`, `UserId`)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6);
SELECT `Id`
FROM `Tokens`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();
2025-11-16 19:38:46.656 +03:00 [INF] Added Token MappyApplication.Data.Token
2025-11-16 19:38:46.657 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessFailedCount`, `t`.`ConcurrencyStamp`, `t`.`Email`, `t`.`EmailConfirmed`, `t`.`FirstName`, `t`.`LastName`, `t`.`LockoutEnabled`, `t`.`LockoutEnd`, `t`.`NormalizedEmail`, `t`.`NormalizedUserName`, `t`.`PasswordHash`, `t`.`PhoneNumber`, `t`.`PhoneNumberConfirmed`, `t`.`SecurityStamp`, `t`.`TwoFactorEnabled`, `t`.`UserName`, `w`.`Id`, `w`.`Cadence`, `w`.`CityName`, `w`.`Coords`, `w`.`Date`, `w`.`Distance`, `w`.`Duration`, `w`.`Emoji`, `w`.`Pace`, `w`.`Type`, `w`.`UserId`, `c`.`Id`, `c`.`CityName`, `c`.`Country`, `c`.`Date`, `c`.`Emoji`, `c`.`Lat`, `c`.`Lng`, `c`.`Notes`, `c`.`UserId`
FROM (
    SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`FirstName`, `a`.`LastName`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`
    FROM `AspNetUsers` AS `a`
    WHERE `a`.`Id` = @__user_Id_0
    LIMIT 2
) AS `t`
LEFT JOIN `Workouts` AS `w` ON `t`.`Id` = `w`.`UserId`
LEFT JOIN `Cities` AS `c` ON `t`.`Id` = `c`.`UserId`
ORDER BY `t`.`Id`, `w`.`Id`
2025-11-16 19:38:46.658 +03:00 [INF] Executing ObjectResult, writing value of type 'MappyApplication.Models.user.AuthResponse'.
2025-11-16 19:38:46.658 +03:00 [INF] Executed action MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication) in 19.2343ms
2025-11-16 19:38:46.658 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication)'
2025-11-16 19:38:46.658 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:8080/api/v1/auth/refresh-token - 200 null application/json; charset=utf-8 55.3888ms
2025-11-16 19:39:23.731 +03:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:8080/api/v1/auth/refresh-token - null null
2025-11-16 19:39:23.733 +03:00 [INF] CORS policy execution successful.
2025-11-16 19:39:23.734 +03:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:8080/api/v1/auth/refresh-token - 204 null null 2.687ms
2025-11-16 19:39:23.734 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:8080/api/v1/auth/refresh-token - null 0
2025-11-16 19:39:23.734 +03:00 [INF] CORS policy execution successful.
2025-11-16 19:39:23.763 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 19:39:23.763 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication)'
2025-11-16 19:39:23.763 +03:00 [INF] Route matched with {action = "RefreshToken", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.user.AuthResponse] RefreshToken() on controller MappyApplication.Controllers.AuthController (MappyApplication).
2025-11-16 19:39:23.765 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__refreshToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`RefreshToken` = @__refreshToken_0
LIMIT 2
2025-11-16 19:39:23.767 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`FirstName`, `a`.`LastName`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`
FROM `AspNetUsers` AS `a`
WHERE `a`.`Id` = @__p_0
LIMIT 1
2025-11-16 19:39:23.770 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']

        UPDATE TOKENS
        SET Revoked = true, Expired = true
        WHERE UserId = @p0
          AND DeviceId = @p1
          AND Revoked = false
          AND Expired = false
2025-11-16 19:39:23.772 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a0`.`Name`
FROM `AspNetUserRoles` AS `a`
INNER JOIN `AspNetRoles` AS `a0` ON `a`.`RoleId` = `a0`.`Id`
WHERE `a`.`UserId` = @__userId_0
2025-11-16 19:39:23.773 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ClaimType`, `a`.`ClaimValue`, `a`.`UserId`
FROM `AspNetUserClaims` AS `a`
WHERE `a`.`UserId` = @__user_Id_0
2025-11-16 19:39:23.773 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a0`.`Name`
FROM `AspNetUserRoles` AS `a`
INNER JOIN `AspNetRoles` AS `a0` ON `a`.`RoleId` = `a0`.`Id`
WHERE `a`.`UserId` = @__userId_0
2025-11-16 19:39:23.774 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ClaimType`, `a`.`ClaimValue`, `a`.`UserId`
FROM `AspNetUserClaims` AS `a`
WHERE `a`.`UserId` = @__user_Id_0
2025-11-16 19:39:23.777 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (DbType = DateTime), @p2='?' (Size = 4000), @p3='?' (DbType = Boolean), @p4='?' (Size = 4000), @p5='?' (DbType = Boolean), @p6='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO `Tokens` (`AccessToken`, `CreatedAt`, `DeviceId`, `Expired`, `RefreshToken`, `Revoked`, `UserId`)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6);
SELECT `Id`
FROM `Tokens`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();
2025-11-16 19:39:23.778 +03:00 [INF] Added Token MappyApplication.Data.Token
2025-11-16 19:39:23.780 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessFailedCount`, `t`.`ConcurrencyStamp`, `t`.`Email`, `t`.`EmailConfirmed`, `t`.`FirstName`, `t`.`LastName`, `t`.`LockoutEnabled`, `t`.`LockoutEnd`, `t`.`NormalizedEmail`, `t`.`NormalizedUserName`, `t`.`PasswordHash`, `t`.`PhoneNumber`, `t`.`PhoneNumberConfirmed`, `t`.`SecurityStamp`, `t`.`TwoFactorEnabled`, `t`.`UserName`, `w`.`Id`, `w`.`Cadence`, `w`.`CityName`, `w`.`Coords`, `w`.`Date`, `w`.`Distance`, `w`.`Duration`, `w`.`Emoji`, `w`.`Pace`, `w`.`Type`, `w`.`UserId`, `c`.`Id`, `c`.`CityName`, `c`.`Country`, `c`.`Date`, `c`.`Emoji`, `c`.`Lat`, `c`.`Lng`, `c`.`Notes`, `c`.`UserId`
FROM (
    SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`FirstName`, `a`.`LastName`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`
    FROM `AspNetUsers` AS `a`
    WHERE `a`.`Id` = @__user_Id_0
    LIMIT 2
) AS `t`
LEFT JOIN `Workouts` AS `w` ON `t`.`Id` = `w`.`UserId`
LEFT JOIN `Cities` AS `c` ON `t`.`Id` = `c`.`UserId`
ORDER BY `t`.`Id`, `w`.`Id`
2025-11-16 19:39:23.781 +03:00 [INF] Executing ObjectResult, writing value of type 'MappyApplication.Models.user.AuthResponse'.
2025-11-16 19:39:23.781 +03:00 [INF] Executed action MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication) in 18.0952ms
2025-11-16 19:39:23.781 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication)'
2025-11-16 19:39:23.781 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:8080/api/v1/auth/refresh-token - 200 null application/json; charset=utf-8 47.1203ms
2025-11-16 19:39:24.758 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:8080/api/v1/auth/refresh-token - null 0
2025-11-16 19:39:24.759 +03:00 [INF] CORS policy execution successful.
2025-11-16 19:39:24.808 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 19:39:24.809 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication)'
2025-11-16 19:39:24.809 +03:00 [INF] Route matched with {action = "RefreshToken", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.user.AuthResponse] RefreshToken() on controller MappyApplication.Controllers.AuthController (MappyApplication).
2025-11-16 19:39:24.811 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__refreshToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`RefreshToken` = @__refreshToken_0
LIMIT 2
2025-11-16 19:39:24.814 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`FirstName`, `a`.`LastName`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`
FROM `AspNetUsers` AS `a`
WHERE `a`.`Id` = @__p_0
LIMIT 1
2025-11-16 19:39:24.817 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']

        UPDATE TOKENS
        SET Revoked = true, Expired = true
        WHERE UserId = @p0
          AND DeviceId = @p1
          AND Revoked = false
          AND Expired = false
2025-11-16 19:39:24.819 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a0`.`Name`
FROM `AspNetUserRoles` AS `a`
INNER JOIN `AspNetRoles` AS `a0` ON `a`.`RoleId` = `a0`.`Id`
WHERE `a`.`UserId` = @__userId_0
2025-11-16 19:39:24.820 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ClaimType`, `a`.`ClaimValue`, `a`.`UserId`
FROM `AspNetUserClaims` AS `a`
WHERE `a`.`UserId` = @__user_Id_0
2025-11-16 19:39:24.821 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a0`.`Name`
FROM `AspNetUserRoles` AS `a`
INNER JOIN `AspNetRoles` AS `a0` ON `a`.`RoleId` = `a0`.`Id`
WHERE `a`.`UserId` = @__userId_0
2025-11-16 19:39:24.822 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ClaimType`, `a`.`ClaimValue`, `a`.`UserId`
FROM `AspNetUserClaims` AS `a`
WHERE `a`.`UserId` = @__user_Id_0
2025-11-16 19:39:24.824 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (DbType = DateTime), @p2='?' (Size = 4000), @p3='?' (DbType = Boolean), @p4='?' (Size = 4000), @p5='?' (DbType = Boolean), @p6='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO `Tokens` (`AccessToken`, `CreatedAt`, `DeviceId`, `Expired`, `RefreshToken`, `Revoked`, `UserId`)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6);
SELECT `Id`
FROM `Tokens`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();
2025-11-16 19:39:24.824 +03:00 [INF] Added Token MappyApplication.Data.Token
2025-11-16 19:39:24.825 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessFailedCount`, `t`.`ConcurrencyStamp`, `t`.`Email`, `t`.`EmailConfirmed`, `t`.`FirstName`, `t`.`LastName`, `t`.`LockoutEnabled`, `t`.`LockoutEnd`, `t`.`NormalizedEmail`, `t`.`NormalizedUserName`, `t`.`PasswordHash`, `t`.`PhoneNumber`, `t`.`PhoneNumberConfirmed`, `t`.`SecurityStamp`, `t`.`TwoFactorEnabled`, `t`.`UserName`, `w`.`Id`, `w`.`Cadence`, `w`.`CityName`, `w`.`Coords`, `w`.`Date`, `w`.`Distance`, `w`.`Duration`, `w`.`Emoji`, `w`.`Pace`, `w`.`Type`, `w`.`UserId`, `c`.`Id`, `c`.`CityName`, `c`.`Country`, `c`.`Date`, `c`.`Emoji`, `c`.`Lat`, `c`.`Lng`, `c`.`Notes`, `c`.`UserId`
FROM (
    SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`FirstName`, `a`.`LastName`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`
    FROM `AspNetUsers` AS `a`
    WHERE `a`.`Id` = @__user_Id_0
    LIMIT 2
) AS `t`
LEFT JOIN `Workouts` AS `w` ON `t`.`Id` = `w`.`UserId`
LEFT JOIN `Cities` AS `c` ON `t`.`Id` = `c`.`UserId`
ORDER BY `t`.`Id`, `w`.`Id`
2025-11-16 19:39:24.826 +03:00 [INF] Executing ObjectResult, writing value of type 'MappyApplication.Models.user.AuthResponse'.
2025-11-16 19:39:24.830 +03:00 [INF] Executed action MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication) in 20.9646ms
2025-11-16 19:39:24.830 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication)'
2025-11-16 19:39:24.831 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:8080/api/v1/auth/refresh-token - 200 null application/json; charset=utf-8 73.4458ms
2025-11-16 19:40:14.457 +03:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:8080/api/v1/cities/3 - null null
2025-11-16 19:40:14.460 +03:00 [INF] CORS policy execution successful.
2025-11-16 19:40:14.460 +03:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:8080/api/v1/cities/3 - 204 null null 3.6991ms
2025-11-16 19:40:14.463 +03:00 [INF] Request starting HTTP/1.1 DELETE http://localhost:8080/api/v1/cities/3 - null null
2025-11-16 19:40:14.465 +03:00 [INF] CORS policy execution successful.
2025-11-16 19:40:14.500 +03:00 [INF] Executed DbCommand (4ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 19:40:14.501 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.CitiesController.DeleteById (MappyApplication)'
2025-11-16 19:40:14.514 +03:00 [INF] Route matched with {action = "DeleteById", controller = "Cities"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] DeleteById(Int32) on controller MappyApplication.Controllers.CitiesController (MappyApplication).
2025-11-16 19:40:14.537 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT `c`.`Id`, `c`.`CityName`, `c`.`Country`, `c`.`Date`, `c`.`Emoji`, `c`.`Lat`, `c`.`Lng`, `c`.`Notes`, `c`.`UserId`
FROM `Cities` AS `c`
WHERE `c`.`Id` = @__p_0
LIMIT 1
2025-11-16 19:40:14.563 +03:00 [INF] Executed DbCommand (17ms) [Parameters=[@p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET AUTOCOMMIT = 1;
DELETE FROM `Cities`
WHERE `Id` = @p0;
SELECT ROW_COUNT();
2025-11-16 19:40:14.565 +03:00 [INF] Deleted Cities MappyApplication.Data.Cities
2025-11-16 19:40:14.565 +03:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType0`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-11-16 19:40:14.566 +03:00 [INF] Executed action MappyApplication.Controllers.CitiesController.DeleteById (MappyApplication) in 51.2002ms
2025-11-16 19:40:14.566 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.CitiesController.DeleteById (MappyApplication)'
2025-11-16 19:40:14.566 +03:00 [INF] Request finished HTTP/1.1 DELETE http://localhost:8080/api/v1/cities/3 - 200 null application/json; charset=utf-8 103.0558ms
2025-11-16 19:40:16.571 +03:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:8080/api/v1/auth/refresh-token - null null
2025-11-16 19:40:16.571 +03:00 [INF] CORS policy execution successful.
2025-11-16 19:40:16.571 +03:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:8080/api/v1/auth/refresh-token - 204 null null 0.3258ms
2025-11-16 19:40:16.572 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:8080/api/v1/auth/refresh-token - null 0
2025-11-16 19:40:16.573 +03:00 [INF] CORS policy execution successful.
2025-11-16 19:40:16.602 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 19:40:16.603 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication)'
2025-11-16 19:40:16.603 +03:00 [INF] Route matched with {action = "RefreshToken", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.user.AuthResponse] RefreshToken() on controller MappyApplication.Controllers.AuthController (MappyApplication).
2025-11-16 19:40:16.605 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__refreshToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`RefreshToken` = @__refreshToken_0
LIMIT 2
2025-11-16 19:40:16.607 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`FirstName`, `a`.`LastName`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`
FROM `AspNetUsers` AS `a`
WHERE `a`.`Id` = @__p_0
LIMIT 1
2025-11-16 19:40:16.609 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']

        UPDATE TOKENS
        SET Revoked = true, Expired = true
        WHERE UserId = @p0
          AND DeviceId = @p1
          AND Revoked = false
          AND Expired = false
2025-11-16 19:40:16.612 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a0`.`Name`
FROM `AspNetUserRoles` AS `a`
INNER JOIN `AspNetRoles` AS `a0` ON `a`.`RoleId` = `a0`.`Id`
WHERE `a`.`UserId` = @__userId_0
2025-11-16 19:40:16.614 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ClaimType`, `a`.`ClaimValue`, `a`.`UserId`
FROM `AspNetUserClaims` AS `a`
WHERE `a`.`UserId` = @__user_Id_0
2025-11-16 19:40:16.616 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a0`.`Name`
FROM `AspNetUserRoles` AS `a`
INNER JOIN `AspNetRoles` AS `a0` ON `a`.`RoleId` = `a0`.`Id`
WHERE `a`.`UserId` = @__userId_0
2025-11-16 19:40:16.617 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ClaimType`, `a`.`ClaimValue`, `a`.`UserId`
FROM `AspNetUserClaims` AS `a`
WHERE `a`.`UserId` = @__user_Id_0
2025-11-16 19:40:16.621 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (DbType = DateTime), @p2='?' (Size = 4000), @p3='?' (DbType = Boolean), @p4='?' (Size = 4000), @p5='?' (DbType = Boolean), @p6='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO `Tokens` (`AccessToken`, `CreatedAt`, `DeviceId`, `Expired`, `RefreshToken`, `Revoked`, `UserId`)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6);
SELECT `Id`
FROM `Tokens`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();
2025-11-16 19:40:16.622 +03:00 [INF] Added Token MappyApplication.Data.Token
2025-11-16 19:40:16.625 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessFailedCount`, `t`.`ConcurrencyStamp`, `t`.`Email`, `t`.`EmailConfirmed`, `t`.`FirstName`, `t`.`LastName`, `t`.`LockoutEnabled`, `t`.`LockoutEnd`, `t`.`NormalizedEmail`, `t`.`NormalizedUserName`, `t`.`PasswordHash`, `t`.`PhoneNumber`, `t`.`PhoneNumberConfirmed`, `t`.`SecurityStamp`, `t`.`TwoFactorEnabled`, `t`.`UserName`, `w`.`Id`, `w`.`Cadence`, `w`.`CityName`, `w`.`Coords`, `w`.`Date`, `w`.`Distance`, `w`.`Duration`, `w`.`Emoji`, `w`.`Pace`, `w`.`Type`, `w`.`UserId`, `c`.`Id`, `c`.`CityName`, `c`.`Country`, `c`.`Date`, `c`.`Emoji`, `c`.`Lat`, `c`.`Lng`, `c`.`Notes`, `c`.`UserId`
FROM (
    SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`FirstName`, `a`.`LastName`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`
    FROM `AspNetUsers` AS `a`
    WHERE `a`.`Id` = @__user_Id_0
    LIMIT 2
) AS `t`
LEFT JOIN `Workouts` AS `w` ON `t`.`Id` = `w`.`UserId`
LEFT JOIN `Cities` AS `c` ON `t`.`Id` = `c`.`UserId`
ORDER BY `t`.`Id`, `w`.`Id`
2025-11-16 19:40:16.625 +03:00 [INF] Executing ObjectResult, writing value of type 'MappyApplication.Models.user.AuthResponse'.
2025-11-16 19:40:16.625 +03:00 [INF] Executed action MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication) in 22.334ms
2025-11-16 19:40:16.625 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication)'
2025-11-16 19:40:16.625 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:8080/api/v1/auth/refresh-token - 200 null application/json; charset=utf-8 52.9565ms
2025-11-16 19:40:25.227 +03:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:8080/api/v1/auth/refresh-token - null null
2025-11-16 19:40:25.228 +03:00 [INF] CORS policy execution successful.
2025-11-16 19:40:25.228 +03:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:8080/api/v1/auth/refresh-token - 204 null null 1.8216ms
2025-11-16 19:40:25.229 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:8080/api/v1/auth/refresh-token - null 0
2025-11-16 19:40:25.230 +03:00 [INF] CORS policy execution successful.
2025-11-16 19:40:25.265 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 19:40:25.266 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication)'
2025-11-16 19:40:25.266 +03:00 [INF] Route matched with {action = "RefreshToken", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.user.AuthResponse] RefreshToken() on controller MappyApplication.Controllers.AuthController (MappyApplication).
2025-11-16 19:40:25.268 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__refreshToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`RefreshToken` = @__refreshToken_0
LIMIT 2
2025-11-16 19:40:25.270 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`FirstName`, `a`.`LastName`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`
FROM `AspNetUsers` AS `a`
WHERE `a`.`Id` = @__p_0
LIMIT 1
2025-11-16 19:40:25.276 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']

        UPDATE TOKENS
        SET Revoked = true, Expired = true
        WHERE UserId = @p0
          AND DeviceId = @p1
          AND Revoked = false
          AND Expired = false
2025-11-16 19:40:25.278 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a0`.`Name`
FROM `AspNetUserRoles` AS `a`
INNER JOIN `AspNetRoles` AS `a0` ON `a`.`RoleId` = `a0`.`Id`
WHERE `a`.`UserId` = @__userId_0
2025-11-16 19:40:25.278 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ClaimType`, `a`.`ClaimValue`, `a`.`UserId`
FROM `AspNetUserClaims` AS `a`
WHERE `a`.`UserId` = @__user_Id_0
2025-11-16 19:40:25.279 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a0`.`Name`
FROM `AspNetUserRoles` AS `a`
INNER JOIN `AspNetRoles` AS `a0` ON `a`.`RoleId` = `a0`.`Id`
WHERE `a`.`UserId` = @__userId_0
2025-11-16 19:40:25.279 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ClaimType`, `a`.`ClaimValue`, `a`.`UserId`
FROM `AspNetUserClaims` AS `a`
WHERE `a`.`UserId` = @__user_Id_0
2025-11-16 19:40:25.282 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (DbType = DateTime), @p2='?' (Size = 4000), @p3='?' (DbType = Boolean), @p4='?' (Size = 4000), @p5='?' (DbType = Boolean), @p6='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO `Tokens` (`AccessToken`, `CreatedAt`, `DeviceId`, `Expired`, `RefreshToken`, `Revoked`, `UserId`)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6);
SELECT `Id`
FROM `Tokens`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();
2025-11-16 19:40:25.284 +03:00 [INF] Added Token MappyApplication.Data.Token
2025-11-16 19:40:25.286 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessFailedCount`, `t`.`ConcurrencyStamp`, `t`.`Email`, `t`.`EmailConfirmed`, `t`.`FirstName`, `t`.`LastName`, `t`.`LockoutEnabled`, `t`.`LockoutEnd`, `t`.`NormalizedEmail`, `t`.`NormalizedUserName`, `t`.`PasswordHash`, `t`.`PhoneNumber`, `t`.`PhoneNumberConfirmed`, `t`.`SecurityStamp`, `t`.`TwoFactorEnabled`, `t`.`UserName`, `w`.`Id`, `w`.`Cadence`, `w`.`CityName`, `w`.`Coords`, `w`.`Date`, `w`.`Distance`, `w`.`Duration`, `w`.`Emoji`, `w`.`Pace`, `w`.`Type`, `w`.`UserId`, `c`.`Id`, `c`.`CityName`, `c`.`Country`, `c`.`Date`, `c`.`Emoji`, `c`.`Lat`, `c`.`Lng`, `c`.`Notes`, `c`.`UserId`
FROM (
    SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`FirstName`, `a`.`LastName`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`
    FROM `AspNetUsers` AS `a`
    WHERE `a`.`Id` = @__user_Id_0
    LIMIT 2
) AS `t`
LEFT JOIN `Workouts` AS `w` ON `t`.`Id` = `w`.`UserId`
LEFT JOIN `Cities` AS `c` ON `t`.`Id` = `c`.`UserId`
ORDER BY `t`.`Id`, `w`.`Id`
2025-11-16 19:40:25.286 +03:00 [INF] Executing ObjectResult, writing value of type 'MappyApplication.Models.user.AuthResponse'.
2025-11-16 19:40:25.287 +03:00 [INF] Executed action MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication) in 21.0893ms
2025-11-16 19:40:25.287 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication)'
2025-11-16 19:40:25.287 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:8080/api/v1/auth/refresh-token - 200 null application/json; charset=utf-8 57.6206ms
2025-11-16 19:41:29.984 +03:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:8080/api/v1/auth/refresh-token - null null
2025-11-16 19:41:29.985 +03:00 [INF] CORS policy execution successful.
2025-11-16 19:41:29.986 +03:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:8080/api/v1/auth/refresh-token - 204 null null 1.6914ms
2025-11-16 19:41:29.988 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:8080/api/v1/auth/refresh-token - null 0
2025-11-16 19:41:29.988 +03:00 [INF] CORS policy execution successful.
2025-11-16 19:41:30.013 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 19:41:30.013 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication)'
2025-11-16 19:41:30.014 +03:00 [INF] Route matched with {action = "RefreshToken", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.user.AuthResponse] RefreshToken() on controller MappyApplication.Controllers.AuthController (MappyApplication).
2025-11-16 19:41:30.015 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__refreshToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`RefreshToken` = @__refreshToken_0
LIMIT 2
2025-11-16 19:41:30.016 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`FirstName`, `a`.`LastName`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`
FROM `AspNetUsers` AS `a`
WHERE `a`.`Id` = @__p_0
LIMIT 1
2025-11-16 19:41:30.019 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']

        UPDATE TOKENS
        SET Revoked = true, Expired = true
        WHERE UserId = @p0
          AND DeviceId = @p1
          AND Revoked = false
          AND Expired = false
2025-11-16 19:41:30.020 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a0`.`Name`
FROM `AspNetUserRoles` AS `a`
INNER JOIN `AspNetRoles` AS `a0` ON `a`.`RoleId` = `a0`.`Id`
WHERE `a`.`UserId` = @__userId_0
2025-11-16 19:41:30.021 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ClaimType`, `a`.`ClaimValue`, `a`.`UserId`
FROM `AspNetUserClaims` AS `a`
WHERE `a`.`UserId` = @__user_Id_0
2025-11-16 19:41:30.022 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a0`.`Name`
FROM `AspNetUserRoles` AS `a`
INNER JOIN `AspNetRoles` AS `a0` ON `a`.`RoleId` = `a0`.`Id`
WHERE `a`.`UserId` = @__userId_0
2025-11-16 19:41:30.023 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ClaimType`, `a`.`ClaimValue`, `a`.`UserId`
FROM `AspNetUserClaims` AS `a`
WHERE `a`.`UserId` = @__user_Id_0
2025-11-16 19:41:30.028 +03:00 [INF] Executed DbCommand (4ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (DbType = DateTime), @p2='?' (Size = 4000), @p3='?' (DbType = Boolean), @p4='?' (Size = 4000), @p5='?' (DbType = Boolean), @p6='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO `Tokens` (`AccessToken`, `CreatedAt`, `DeviceId`, `Expired`, `RefreshToken`, `Revoked`, `UserId`)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6);
SELECT `Id`
FROM `Tokens`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();
2025-11-16 19:41:30.028 +03:00 [INF] Added Token MappyApplication.Data.Token
2025-11-16 19:41:30.030 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessFailedCount`, `t`.`ConcurrencyStamp`, `t`.`Email`, `t`.`EmailConfirmed`, `t`.`FirstName`, `t`.`LastName`, `t`.`LockoutEnabled`, `t`.`LockoutEnd`, `t`.`NormalizedEmail`, `t`.`NormalizedUserName`, `t`.`PasswordHash`, `t`.`PhoneNumber`, `t`.`PhoneNumberConfirmed`, `t`.`SecurityStamp`, `t`.`TwoFactorEnabled`, `t`.`UserName`, `w`.`Id`, `w`.`Cadence`, `w`.`CityName`, `w`.`Coords`, `w`.`Date`, `w`.`Distance`, `w`.`Duration`, `w`.`Emoji`, `w`.`Pace`, `w`.`Type`, `w`.`UserId`, `c`.`Id`, `c`.`CityName`, `c`.`Country`, `c`.`Date`, `c`.`Emoji`, `c`.`Lat`, `c`.`Lng`, `c`.`Notes`, `c`.`UserId`
FROM (
    SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`FirstName`, `a`.`LastName`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`
    FROM `AspNetUsers` AS `a`
    WHERE `a`.`Id` = @__user_Id_0
    LIMIT 2
) AS `t`
LEFT JOIN `Workouts` AS `w` ON `t`.`Id` = `w`.`UserId`
LEFT JOIN `Cities` AS `c` ON `t`.`Id` = `c`.`UserId`
ORDER BY `t`.`Id`, `w`.`Id`
2025-11-16 19:41:30.030 +03:00 [INF] Executing ObjectResult, writing value of type 'MappyApplication.Models.user.AuthResponse'.
2025-11-16 19:41:30.031 +03:00 [INF] Executed action MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication) in 17.0729ms
2025-11-16 19:41:30.031 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication)'
2025-11-16 19:41:30.031 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:8080/api/v1/auth/refresh-token - 200 null application/json; charset=utf-8 43.156ms
2025-11-16 19:41:33.553 +03:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:8080/api/v1/auth/login - null null
2025-11-16 19:41:33.553 +03:00 [INF] CORS policy execution successful.
2025-11-16 19:41:33.553 +03:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:8080/api/v1/auth/login - 204 null null 0.4396ms
2025-11-16 19:41:33.555 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:8080/api/v1/auth/login - application/json 51
2025-11-16 19:41:33.556 +03:00 [INF] CORS policy execution successful.
2025-11-16 19:41:33.579 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 19:41:33.579 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.AuthController.Login (MappyApplication)'
2025-11-16 19:41:33.579 +03:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.user.AuthResponse] Login(MappyApplication.Models.user.AuthLogin) on controller MappyApplication.Controllers.AuthController (MappyApplication).
2025-11-16 19:41:33.583 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`FirstName`, `a`.`LastName`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`
FROM `AspNetUsers` AS `a`
WHERE `a`.`NormalizedEmail` = @__normalizedEmail_0
LIMIT 2
2025-11-16 19:41:33.640 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']

        UPDATE TOKENS
        SET Revoked = true, Expired = true
        WHERE UserId = @p0
          AND DeviceId = @p1
          AND Revoked = false
          AND Expired = false
2025-11-16 19:41:33.641 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a0`.`Name`
FROM `AspNetUserRoles` AS `a`
INNER JOIN `AspNetRoles` AS `a0` ON `a`.`RoleId` = `a0`.`Id`
WHERE `a`.`UserId` = @__userId_0
2025-11-16 19:41:33.642 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ClaimType`, `a`.`ClaimValue`, `a`.`UserId`
FROM `AspNetUserClaims` AS `a`
WHERE `a`.`UserId` = @__user_Id_0
2025-11-16 19:41:33.642 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a0`.`Name`
FROM `AspNetUserRoles` AS `a`
INNER JOIN `AspNetRoles` AS `a0` ON `a`.`RoleId` = `a0`.`Id`
WHERE `a`.`UserId` = @__userId_0
2025-11-16 19:41:33.642 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ClaimType`, `a`.`ClaimValue`, `a`.`UserId`
FROM `AspNetUserClaims` AS `a`
WHERE `a`.`UserId` = @__user_Id_0
2025-11-16 19:41:33.644 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (DbType = DateTime), @p2='?' (Size = 4000), @p3='?' (DbType = Boolean), @p4='?' (Size = 4000), @p5='?' (DbType = Boolean), @p6='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO `Tokens` (`AccessToken`, `CreatedAt`, `DeviceId`, `Expired`, `RefreshToken`, `Revoked`, `UserId`)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6);
SELECT `Id`
FROM `Tokens`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();
2025-11-16 19:41:33.645 +03:00 [INF] Added Token MappyApplication.Data.Token
2025-11-16 19:41:33.646 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessFailedCount`, `t`.`ConcurrencyStamp`, `t`.`Email`, `t`.`EmailConfirmed`, `t`.`FirstName`, `t`.`LastName`, `t`.`LockoutEnabled`, `t`.`LockoutEnd`, `t`.`NormalizedEmail`, `t`.`NormalizedUserName`, `t`.`PasswordHash`, `t`.`PhoneNumber`, `t`.`PhoneNumberConfirmed`, `t`.`SecurityStamp`, `t`.`TwoFactorEnabled`, `t`.`UserName`, `w`.`Id`, `w`.`Cadence`, `w`.`CityName`, `w`.`Coords`, `w`.`Date`, `w`.`Distance`, `w`.`Duration`, `w`.`Emoji`, `w`.`Pace`, `w`.`Type`, `w`.`UserId`, `c`.`Id`, `c`.`CityName`, `c`.`Country`, `c`.`Date`, `c`.`Emoji`, `c`.`Lat`, `c`.`Lng`, `c`.`Notes`, `c`.`UserId`
FROM (
    SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`FirstName`, `a`.`LastName`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`
    FROM `AspNetUsers` AS `a`
    WHERE `a`.`Id` = @__user_Id_0
    LIMIT 2
) AS `t`
LEFT JOIN `Workouts` AS `w` ON `t`.`Id` = `w`.`UserId`
LEFT JOIN `Cities` AS `c` ON `t`.`Id` = `c`.`UserId`
ORDER BY `t`.`Id`, `w`.`Id`
2025-11-16 19:41:33.646 +03:00 [INF] Executing ObjectResult, writing value of type 'MappyApplication.Models.user.AuthResponse'.
2025-11-16 19:41:33.647 +03:00 [INF] Executed action MappyApplication.Controllers.AuthController.Login (MappyApplication) in 67.026ms
2025-11-16 19:41:33.647 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.AuthController.Login (MappyApplication)'
2025-11-16 19:41:33.647 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:8080/api/v1/auth/login - 200 null application/json; charset=utf-8 91.2908ms
2025-11-16 19:41:52.622 +03:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:8080/api/v1/auth/refresh-token - null null
2025-11-16 19:41:52.623 +03:00 [INF] CORS policy execution successful.
2025-11-16 19:41:52.623 +03:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:8080/api/v1/auth/refresh-token - 204 null null 1.4406ms
2025-11-16 19:41:52.624 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:8080/api/v1/auth/refresh-token - null 0
2025-11-16 19:41:52.624 +03:00 [INF] CORS policy execution successful.
2025-11-16 19:41:52.656 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 19:41:52.657 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication)'
2025-11-16 19:41:52.657 +03:00 [INF] Route matched with {action = "RefreshToken", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.user.AuthResponse] RefreshToken() on controller MappyApplication.Controllers.AuthController (MappyApplication).
2025-11-16 19:41:52.658 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__refreshToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`RefreshToken` = @__refreshToken_0
LIMIT 2
2025-11-16 19:41:52.660 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`FirstName`, `a`.`LastName`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`
FROM `AspNetUsers` AS `a`
WHERE `a`.`Id` = @__p_0
LIMIT 1
2025-11-16 19:41:52.665 +03:00 [INF] Executed DbCommand (4ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']

        UPDATE TOKENS
        SET Revoked = true, Expired = true
        WHERE UserId = @p0
          AND DeviceId = @p1
          AND Revoked = false
          AND Expired = false
2025-11-16 19:41:52.667 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a0`.`Name`
FROM `AspNetUserRoles` AS `a`
INNER JOIN `AspNetRoles` AS `a0` ON `a`.`RoleId` = `a0`.`Id`
WHERE `a`.`UserId` = @__userId_0
2025-11-16 19:41:52.668 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ClaimType`, `a`.`ClaimValue`, `a`.`UserId`
FROM `AspNetUserClaims` AS `a`
WHERE `a`.`UserId` = @__user_Id_0
2025-11-16 19:41:52.669 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a0`.`Name`
FROM `AspNetUserRoles` AS `a`
INNER JOIN `AspNetRoles` AS `a0` ON `a`.`RoleId` = `a0`.`Id`
WHERE `a`.`UserId` = @__userId_0
2025-11-16 19:41:52.669 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ClaimType`, `a`.`ClaimValue`, `a`.`UserId`
FROM `AspNetUserClaims` AS `a`
WHERE `a`.`UserId` = @__user_Id_0
2025-11-16 19:41:52.673 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (DbType = DateTime), @p2='?' (Size = 4000), @p3='?' (DbType = Boolean), @p4='?' (Size = 4000), @p5='?' (DbType = Boolean), @p6='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO `Tokens` (`AccessToken`, `CreatedAt`, `DeviceId`, `Expired`, `RefreshToken`, `Revoked`, `UserId`)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6);
SELECT `Id`
FROM `Tokens`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();
2025-11-16 19:41:52.674 +03:00 [INF] Added Token MappyApplication.Data.Token
2025-11-16 19:41:52.675 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessFailedCount`, `t`.`ConcurrencyStamp`, `t`.`Email`, `t`.`EmailConfirmed`, `t`.`FirstName`, `t`.`LastName`, `t`.`LockoutEnabled`, `t`.`LockoutEnd`, `t`.`NormalizedEmail`, `t`.`NormalizedUserName`, `t`.`PasswordHash`, `t`.`PhoneNumber`, `t`.`PhoneNumberConfirmed`, `t`.`SecurityStamp`, `t`.`TwoFactorEnabled`, `t`.`UserName`, `w`.`Id`, `w`.`Cadence`, `w`.`CityName`, `w`.`Coords`, `w`.`Date`, `w`.`Distance`, `w`.`Duration`, `w`.`Emoji`, `w`.`Pace`, `w`.`Type`, `w`.`UserId`, `c`.`Id`, `c`.`CityName`, `c`.`Country`, `c`.`Date`, `c`.`Emoji`, `c`.`Lat`, `c`.`Lng`, `c`.`Notes`, `c`.`UserId`
FROM (
    SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`FirstName`, `a`.`LastName`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`
    FROM `AspNetUsers` AS `a`
    WHERE `a`.`Id` = @__user_Id_0
    LIMIT 2
) AS `t`
LEFT JOIN `Workouts` AS `w` ON `t`.`Id` = `w`.`UserId`
LEFT JOIN `Cities` AS `c` ON `t`.`Id` = `c`.`UserId`
ORDER BY `t`.`Id`, `w`.`Id`
2025-11-16 19:41:52.676 +03:00 [INF] Executing ObjectResult, writing value of type 'MappyApplication.Models.user.AuthResponse'.
2025-11-16 19:41:52.676 +03:00 [INF] Executed action MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication) in 18.7909ms
2025-11-16 19:41:52.676 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication)'
2025-11-16 19:41:52.676 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:8080/api/v1/auth/refresh-token - 200 null application/json; charset=utf-8 51.6979ms
2025-11-16 19:46:21.261 +03:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:8080/api/v1/auth/refresh-token - null null
2025-11-16 19:46:21.262 +03:00 [INF] CORS policy execution successful.
2025-11-16 19:46:21.263 +03:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:8080/api/v1/auth/refresh-token - 204 null null 1.5476ms
2025-11-16 19:46:21.264 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:8080/api/v1/auth/refresh-token - null 0
2025-11-16 19:46:21.265 +03:00 [INF] CORS policy execution successful.
2025-11-16 19:46:21.387 +03:00 [INF] Executed DbCommand (29ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 19:46:21.387 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication)'
2025-11-16 19:46:21.388 +03:00 [INF] Route matched with {action = "RefreshToken", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.user.AuthResponse] RefreshToken() on controller MappyApplication.Controllers.AuthController (MappyApplication).
2025-11-16 19:46:21.389 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__refreshToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`RefreshToken` = @__refreshToken_0
LIMIT 2
2025-11-16 19:46:21.400 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__p_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`FirstName`, `a`.`LastName`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`
FROM `AspNetUsers` AS `a`
WHERE `a`.`Id` = @__p_0
LIMIT 1
2025-11-16 19:46:21.414 +03:00 [INF] Executed DbCommand (13ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']

        UPDATE TOKENS
        SET Revoked = true, Expired = true
        WHERE UserId = @p0
          AND DeviceId = @p1
          AND Revoked = false
          AND Expired = false
2025-11-16 19:46:21.418 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a0`.`Name`
FROM `AspNetUserRoles` AS `a`
INNER JOIN `AspNetRoles` AS `a0` ON `a`.`RoleId` = `a0`.`Id`
WHERE `a`.`UserId` = @__userId_0
2025-11-16 19:46:21.419 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ClaimType`, `a`.`ClaimValue`, `a`.`UserId`
FROM `AspNetUserClaims` AS `a`
WHERE `a`.`UserId` = @__user_Id_0
2025-11-16 19:46:21.420 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a0`.`Name`
FROM `AspNetUserRoles` AS `a`
INNER JOIN `AspNetRoles` AS `a0` ON `a`.`RoleId` = `a0`.`Id`
WHERE `a`.`UserId` = @__userId_0
2025-11-16 19:46:21.420 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ClaimType`, `a`.`ClaimValue`, `a`.`UserId`
FROM `AspNetUserClaims` AS `a`
WHERE `a`.`UserId` = @__user_Id_0
2025-11-16 19:46:21.426 +03:00 [INF] Executed DbCommand (4ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (DbType = DateTime), @p2='?' (Size = 4000), @p3='?' (DbType = Boolean), @p4='?' (Size = 4000), @p5='?' (DbType = Boolean), @p6='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO `Tokens` (`AccessToken`, `CreatedAt`, `DeviceId`, `Expired`, `RefreshToken`, `Revoked`, `UserId`)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6);
SELECT `Id`
FROM `Tokens`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();
2025-11-16 19:46:21.427 +03:00 [INF] Added Token MappyApplication.Data.Token
2025-11-16 19:46:21.433 +03:00 [INF] Executed DbCommand (6ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessFailedCount`, `t`.`ConcurrencyStamp`, `t`.`Email`, `t`.`EmailConfirmed`, `t`.`FirstName`, `t`.`LastName`, `t`.`LockoutEnabled`, `t`.`LockoutEnd`, `t`.`NormalizedEmail`, `t`.`NormalizedUserName`, `t`.`PasswordHash`, `t`.`PhoneNumber`, `t`.`PhoneNumberConfirmed`, `t`.`SecurityStamp`, `t`.`TwoFactorEnabled`, `t`.`UserName`, `w`.`Id`, `w`.`Cadence`, `w`.`CityName`, `w`.`Coords`, `w`.`Date`, `w`.`Distance`, `w`.`Duration`, `w`.`Emoji`, `w`.`Pace`, `w`.`Type`, `w`.`UserId`, `c`.`Id`, `c`.`CityName`, `c`.`Country`, `c`.`Date`, `c`.`Emoji`, `c`.`Lat`, `c`.`Lng`, `c`.`Notes`, `c`.`UserId`
FROM (
    SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`FirstName`, `a`.`LastName`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`
    FROM `AspNetUsers` AS `a`
    WHERE `a`.`Id` = @__user_Id_0
    LIMIT 2
) AS `t`
LEFT JOIN `Workouts` AS `w` ON `t`.`Id` = `w`.`UserId`
LEFT JOIN `Cities` AS `c` ON `t`.`Id` = `c`.`UserId`
ORDER BY `t`.`Id`, `w`.`Id`
2025-11-16 19:46:21.433 +03:00 [INF] Executing ObjectResult, writing value of type 'MappyApplication.Models.user.AuthResponse'.
2025-11-16 19:46:21.434 +03:00 [INF] Executed action MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication) in 45.5972ms
2025-11-16 19:46:21.434 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication)'
2025-11-16 19:46:21.434 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:8080/api/v1/auth/refresh-token - 200 null application/json; charset=utf-8 169.546ms
2025-11-16 19:46:25.240 +03:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:8080/api/v1/auth/login - null null
2025-11-16 19:46:25.241 +03:00 [INF] CORS policy execution successful.
2025-11-16 19:46:25.241 +03:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:8080/api/v1/auth/login - 204 null null 0.7686ms
2025-11-16 19:46:25.242 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:8080/api/v1/auth/login - application/json 51
2025-11-16 19:46:25.243 +03:00 [INF] CORS policy execution successful.
2025-11-16 19:46:25.267 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 19:46:25.268 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.AuthController.Login (MappyApplication)'
2025-11-16 19:46:25.268 +03:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.user.AuthResponse] Login(MappyApplication.Models.user.AuthLogin) on controller MappyApplication.Controllers.AuthController (MappyApplication).
2025-11-16 19:46:25.272 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`FirstName`, `a`.`LastName`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`
FROM `AspNetUsers` AS `a`
WHERE `a`.`NormalizedEmail` = @__normalizedEmail_0
LIMIT 2
2025-11-16 19:46:25.331 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']

        UPDATE TOKENS
        SET Revoked = true, Expired = true
        WHERE UserId = @p0
          AND DeviceId = @p1
          AND Revoked = false
          AND Expired = false
2025-11-16 19:46:25.333 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a0`.`Name`
FROM `AspNetUserRoles` AS `a`
INNER JOIN `AspNetRoles` AS `a0` ON `a`.`RoleId` = `a0`.`Id`
WHERE `a`.`UserId` = @__userId_0
2025-11-16 19:46:25.333 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ClaimType`, `a`.`ClaimValue`, `a`.`UserId`
FROM `AspNetUserClaims` AS `a`
WHERE `a`.`UserId` = @__user_Id_0
2025-11-16 19:46:25.334 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a0`.`Name`
FROM `AspNetUserRoles` AS `a`
INNER JOIN `AspNetRoles` AS `a0` ON `a`.`RoleId` = `a0`.`Id`
WHERE `a`.`UserId` = @__userId_0
2025-11-16 19:46:25.334 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ClaimType`, `a`.`ClaimValue`, `a`.`UserId`
FROM `AspNetUserClaims` AS `a`
WHERE `a`.`UserId` = @__user_Id_0
2025-11-16 19:46:25.336 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (DbType = DateTime), @p2='?' (Size = 4000), @p3='?' (DbType = Boolean), @p4='?' (Size = 4000), @p5='?' (DbType = Boolean), @p6='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO `Tokens` (`AccessToken`, `CreatedAt`, `DeviceId`, `Expired`, `RefreshToken`, `Revoked`, `UserId`)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6);
SELECT `Id`
FROM `Tokens`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();
2025-11-16 19:46:25.338 +03:00 [INF] Added Token MappyApplication.Data.Token
2025-11-16 19:46:25.339 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessFailedCount`, `t`.`ConcurrencyStamp`, `t`.`Email`, `t`.`EmailConfirmed`, `t`.`FirstName`, `t`.`LastName`, `t`.`LockoutEnabled`, `t`.`LockoutEnd`, `t`.`NormalizedEmail`, `t`.`NormalizedUserName`, `t`.`PasswordHash`, `t`.`PhoneNumber`, `t`.`PhoneNumberConfirmed`, `t`.`SecurityStamp`, `t`.`TwoFactorEnabled`, `t`.`UserName`, `w`.`Id`, `w`.`Cadence`, `w`.`CityName`, `w`.`Coords`, `w`.`Date`, `w`.`Distance`, `w`.`Duration`, `w`.`Emoji`, `w`.`Pace`, `w`.`Type`, `w`.`UserId`, `c`.`Id`, `c`.`CityName`, `c`.`Country`, `c`.`Date`, `c`.`Emoji`, `c`.`Lat`, `c`.`Lng`, `c`.`Notes`, `c`.`UserId`
FROM (
    SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`FirstName`, `a`.`LastName`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`
    FROM `AspNetUsers` AS `a`
    WHERE `a`.`Id` = @__user_Id_0
    LIMIT 2
) AS `t`
LEFT JOIN `Workouts` AS `w` ON `t`.`Id` = `w`.`UserId`
LEFT JOIN `Cities` AS `c` ON `t`.`Id` = `c`.`UserId`
ORDER BY `t`.`Id`, `w`.`Id`
2025-11-16 19:46:25.341 +03:00 [INF] Executing ObjectResult, writing value of type 'MappyApplication.Models.user.AuthResponse'.
2025-11-16 19:46:25.342 +03:00 [INF] Executed action MappyApplication.Controllers.AuthController.Login (MappyApplication) in 73.4088ms
2025-11-16 19:46:25.342 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.AuthController.Login (MappyApplication)'
2025-11-16 19:46:25.342 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:8080/api/v1/auth/login - 200 null application/json; charset=utf-8 99.3303ms
2025-11-16 19:46:29.284 +03:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:8080/api/v1/auth/logout - null null
2025-11-16 19:46:29.285 +03:00 [INF] CORS policy execution successful.
2025-11-16 19:46:29.286 +03:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:8080/api/v1/auth/logout - 204 null null 0.9568ms
2025-11-16 19:46:29.288 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:8080/api/v1/auth/logout - null null
2025-11-16 19:46:29.291 +03:00 [INF] CORS policy execution successful.
2025-11-16 19:46:29.314 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 19:46:29.314 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.AuthController.Logout (MappyApplication)'
2025-11-16 19:46:29.314 +03:00 [INF] Route matched with {action = "Logout", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Logout() on controller MappyApplication.Controllers.AuthController (MappyApplication).
2025-11-16 19:46:29.316 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__refreshToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`RefreshToken` = @__refreshToken_0
LIMIT 2
2025-11-16 19:46:29.320 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']

        UPDATE TOKENS
        SET Revoked = true, Expired = true
        WHERE UserId = @p0
          AND DeviceId = @p1
          AND Revoked = false
          AND Expired = false
2025-11-16 19:46:29.320 +03:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType0`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-11-16 19:46:29.321 +03:00 [INF] Executed action MappyApplication.Controllers.AuthController.Logout (MappyApplication) in 6.2417ms
2025-11-16 19:46:29.321 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.AuthController.Logout (MappyApplication)'
2025-11-16 19:46:29.321 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:8080/api/v1/auth/logout - 200 null application/json; charset=utf-8 32.8125ms
2025-11-16 19:47:05.680 +03:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:8080/api/v1/auth/login - null null
2025-11-16 19:47:05.681 +03:00 [INF] CORS policy execution successful.
2025-11-16 19:47:05.682 +03:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:8080/api/v1/auth/login - 204 null null 1.7692ms
2025-11-16 19:47:05.684 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:8080/api/v1/auth/login - application/json 51
2025-11-16 19:47:05.684 +03:00 [INF] CORS policy execution successful.
2025-11-16 19:47:05.686 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.AuthController.Login (MappyApplication)'
2025-11-16 19:47:05.686 +03:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.user.AuthResponse] Login(MappyApplication.Models.user.AuthLogin) on controller MappyApplication.Controllers.AuthController (MappyApplication).
2025-11-16 19:47:05.718 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`FirstName`, `a`.`LastName`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`
FROM `AspNetUsers` AS `a`
WHERE `a`.`NormalizedEmail` = @__normalizedEmail_0
LIMIT 2
2025-11-16 19:47:05.770 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']

        UPDATE TOKENS
        SET Revoked = true, Expired = true
        WHERE UserId = @p0
          AND DeviceId = @p1
          AND Revoked = false
          AND Expired = false
2025-11-16 19:47:05.771 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a0`.`Name`
FROM `AspNetUserRoles` AS `a`
INNER JOIN `AspNetRoles` AS `a0` ON `a`.`RoleId` = `a0`.`Id`
WHERE `a`.`UserId` = @__userId_0
2025-11-16 19:47:05.772 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ClaimType`, `a`.`ClaimValue`, `a`.`UserId`
FROM `AspNetUserClaims` AS `a`
WHERE `a`.`UserId` = @__user_Id_0
2025-11-16 19:47:05.772 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a0`.`Name`
FROM `AspNetUserRoles` AS `a`
INNER JOIN `AspNetRoles` AS `a0` ON `a`.`RoleId` = `a0`.`Id`
WHERE `a`.`UserId` = @__userId_0
2025-11-16 19:47:05.773 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ClaimType`, `a`.`ClaimValue`, `a`.`UserId`
FROM `AspNetUserClaims` AS `a`
WHERE `a`.`UserId` = @__user_Id_0
2025-11-16 19:47:05.775 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (DbType = DateTime), @p2='?' (Size = 4000), @p3='?' (DbType = Boolean), @p4='?' (Size = 4000), @p5='?' (DbType = Boolean), @p6='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO `Tokens` (`AccessToken`, `CreatedAt`, `DeviceId`, `Expired`, `RefreshToken`, `Revoked`, `UserId`)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6);
SELECT `Id`
FROM `Tokens`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();
2025-11-16 19:47:05.777 +03:00 [INF] Added Token MappyApplication.Data.Token
2025-11-16 19:47:05.780 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessFailedCount`, `t`.`ConcurrencyStamp`, `t`.`Email`, `t`.`EmailConfirmed`, `t`.`FirstName`, `t`.`LastName`, `t`.`LockoutEnabled`, `t`.`LockoutEnd`, `t`.`NormalizedEmail`, `t`.`NormalizedUserName`, `t`.`PasswordHash`, `t`.`PhoneNumber`, `t`.`PhoneNumberConfirmed`, `t`.`SecurityStamp`, `t`.`TwoFactorEnabled`, `t`.`UserName`, `w`.`Id`, `w`.`Cadence`, `w`.`CityName`, `w`.`Coords`, `w`.`Date`, `w`.`Distance`, `w`.`Duration`, `w`.`Emoji`, `w`.`Pace`, `w`.`Type`, `w`.`UserId`, `c`.`Id`, `c`.`CityName`, `c`.`Country`, `c`.`Date`, `c`.`Emoji`, `c`.`Lat`, `c`.`Lng`, `c`.`Notes`, `c`.`UserId`
FROM (
    SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`FirstName`, `a`.`LastName`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`
    FROM `AspNetUsers` AS `a`
    WHERE `a`.`Id` = @__user_Id_0
    LIMIT 2
) AS `t`
LEFT JOIN `Workouts` AS `w` ON `t`.`Id` = `w`.`UserId`
LEFT JOIN `Cities` AS `c` ON `t`.`Id` = `c`.`UserId`
ORDER BY `t`.`Id`, `w`.`Id`
2025-11-16 19:47:05.780 +03:00 [INF] Executing ObjectResult, writing value of type 'MappyApplication.Models.user.AuthResponse'.
2025-11-16 19:47:05.780 +03:00 [INF] Executed action MappyApplication.Controllers.AuthController.Login (MappyApplication) in 93.6901ms
2025-11-16 19:47:05.780 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.AuthController.Login (MappyApplication)'
2025-11-16 19:47:05.780 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:8080/api/v1/auth/login - 200 null application/json; charset=utf-8 96.2237ms
2025-11-16 19:47:19.981 +03:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:8080/api/v1/auth/logout - null null
2025-11-16 19:47:19.982 +03:00 [INF] CORS policy execution successful.
2025-11-16 19:47:19.982 +03:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:8080/api/v1/auth/logout - 204 null null 1.5873ms
2025-11-16 19:47:19.984 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:8080/api/v1/auth/logout - null null
2025-11-16 19:47:19.984 +03:00 [INF] CORS policy execution successful.
2025-11-16 19:47:20.013 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 19:47:20.013 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.AuthController.Logout (MappyApplication)'
2025-11-16 19:47:20.013 +03:00 [INF] Route matched with {action = "Logout", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Logout() on controller MappyApplication.Controllers.AuthController (MappyApplication).
2025-11-16 19:47:20.015 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__refreshToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`RefreshToken` = @__refreshToken_0
LIMIT 2
2025-11-16 19:47:20.020 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']

        UPDATE TOKENS
        SET Revoked = true, Expired = true
        WHERE UserId = @p0
          AND DeviceId = @p1
          AND Revoked = false
          AND Expired = false
2025-11-16 19:47:20.020 +03:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType0`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-11-16 19:47:20.020 +03:00 [INF] Executed action MappyApplication.Controllers.AuthController.Logout (MappyApplication) in 6.7992ms
2025-11-16 19:47:20.020 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.AuthController.Logout (MappyApplication)'
2025-11-16 19:47:20.020 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:8080/api/v1/auth/logout - 200 null application/json; charset=utf-8 36.5291ms
2025-11-16 19:47:32.357 +03:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:8080/api/v1/auth/login - null null
2025-11-16 19:47:32.358 +03:00 [INF] CORS policy execution successful.
2025-11-16 19:47:32.358 +03:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:8080/api/v1/auth/login - 204 null null 0.781ms
2025-11-16 19:47:32.360 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:8080/api/v1/auth/login - application/json 51
2025-11-16 19:47:32.360 +03:00 [INF] CORS policy execution successful.
2025-11-16 19:47:32.360 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.AuthController.Login (MappyApplication)'
2025-11-16 19:47:32.360 +03:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.user.AuthResponse] Login(MappyApplication.Models.user.AuthLogin) on controller MappyApplication.Controllers.AuthController (MappyApplication).
2025-11-16 19:47:32.381 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`FirstName`, `a`.`LastName`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`
FROM `AspNetUsers` AS `a`
WHERE `a`.`NormalizedEmail` = @__normalizedEmail_0
LIMIT 2
2025-11-16 19:47:32.436 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']

        UPDATE TOKENS
        SET Revoked = true, Expired = true
        WHERE UserId = @p0
          AND DeviceId = @p1
          AND Revoked = false
          AND Expired = false
2025-11-16 19:47:32.436 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a0`.`Name`
FROM `AspNetUserRoles` AS `a`
INNER JOIN `AspNetRoles` AS `a0` ON `a`.`RoleId` = `a0`.`Id`
WHERE `a`.`UserId` = @__userId_0
2025-11-16 19:47:32.438 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ClaimType`, `a`.`ClaimValue`, `a`.`UserId`
FROM `AspNetUserClaims` AS `a`
WHERE `a`.`UserId` = @__user_Id_0
2025-11-16 19:47:32.439 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a0`.`Name`
FROM `AspNetUserRoles` AS `a`
INNER JOIN `AspNetRoles` AS `a0` ON `a`.`RoleId` = `a0`.`Id`
WHERE `a`.`UserId` = @__userId_0
2025-11-16 19:47:32.439 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ClaimType`, `a`.`ClaimValue`, `a`.`UserId`
FROM `AspNetUserClaims` AS `a`
WHERE `a`.`UserId` = @__user_Id_0
2025-11-16 19:47:32.441 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (DbType = DateTime), @p2='?' (Size = 4000), @p3='?' (DbType = Boolean), @p4='?' (Size = 4000), @p5='?' (DbType = Boolean), @p6='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO `Tokens` (`AccessToken`, `CreatedAt`, `DeviceId`, `Expired`, `RefreshToken`, `Revoked`, `UserId`)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6);
SELECT `Id`
FROM `Tokens`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();
2025-11-16 19:47:32.441 +03:00 [INF] Added Token MappyApplication.Data.Token
2025-11-16 19:47:32.442 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessFailedCount`, `t`.`ConcurrencyStamp`, `t`.`Email`, `t`.`EmailConfirmed`, `t`.`FirstName`, `t`.`LastName`, `t`.`LockoutEnabled`, `t`.`LockoutEnd`, `t`.`NormalizedEmail`, `t`.`NormalizedUserName`, `t`.`PasswordHash`, `t`.`PhoneNumber`, `t`.`PhoneNumberConfirmed`, `t`.`SecurityStamp`, `t`.`TwoFactorEnabled`, `t`.`UserName`, `w`.`Id`, `w`.`Cadence`, `w`.`CityName`, `w`.`Coords`, `w`.`Date`, `w`.`Distance`, `w`.`Duration`, `w`.`Emoji`, `w`.`Pace`, `w`.`Type`, `w`.`UserId`, `c`.`Id`, `c`.`CityName`, `c`.`Country`, `c`.`Date`, `c`.`Emoji`, `c`.`Lat`, `c`.`Lng`, `c`.`Notes`, `c`.`UserId`
FROM (
    SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`FirstName`, `a`.`LastName`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`
    FROM `AspNetUsers` AS `a`
    WHERE `a`.`Id` = @__user_Id_0
    LIMIT 2
) AS `t`
LEFT JOIN `Workouts` AS `w` ON `t`.`Id` = `w`.`UserId`
LEFT JOIN `Cities` AS `c` ON `t`.`Id` = `c`.`UserId`
ORDER BY `t`.`Id`, `w`.`Id`
2025-11-16 19:47:32.442 +03:00 [INF] Executing ObjectResult, writing value of type 'MappyApplication.Models.user.AuthResponse'.
2025-11-16 19:47:32.442 +03:00 [INF] Executed action MappyApplication.Controllers.AuthController.Login (MappyApplication) in 82.1672ms
2025-11-16 19:47:32.442 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.AuthController.Login (MappyApplication)'
2025-11-16 19:47:32.442 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:8080/api/v1/auth/login - 200 null application/json; charset=utf-8 82.7752ms
2025-11-16 19:47:42.999 +03:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:8080/api/v1/auth/logout - null null
2025-11-16 19:47:43.001 +03:00 [INF] CORS policy execution successful.
2025-11-16 19:47:43.001 +03:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:8080/api/v1/auth/logout - 204 null null 2.0779ms
2025-11-16 19:47:43.004 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:8080/api/v1/auth/logout - null null
2025-11-16 19:47:43.004 +03:00 [INF] CORS policy execution successful.
2025-11-16 19:47:43.025 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 19:47:43.025 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.AuthController.Logout (MappyApplication)'
2025-11-16 19:47:43.025 +03:00 [INF] Route matched with {action = "Logout", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Logout() on controller MappyApplication.Controllers.AuthController (MappyApplication).
2025-11-16 19:47:43.027 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__refreshToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`RefreshToken` = @__refreshToken_0
LIMIT 2
2025-11-16 19:47:43.030 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']

        UPDATE TOKENS
        SET Revoked = true, Expired = true
        WHERE UserId = @p0
          AND DeviceId = @p1
          AND Revoked = false
          AND Expired = false
2025-11-16 19:47:43.030 +03:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType0`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-11-16 19:47:43.030 +03:00 [INF] Executed action MappyApplication.Controllers.AuthController.Logout (MappyApplication) in 5.179ms
2025-11-16 19:47:43.030 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.AuthController.Logout (MappyApplication)'
2025-11-16 19:47:43.031 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:8080/api/v1/auth/logout - 200 null application/json; charset=utf-8 26.3436ms
2025-11-16 19:55:45.156 +03:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:8080/api/v1/auth/login - null null
2025-11-16 19:55:45.158 +03:00 [INF] CORS policy execution successful.
2025-11-16 19:55:45.158 +03:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:8080/api/v1/auth/login - 204 null null 2.6805ms
2025-11-16 19:55:45.162 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:8080/api/v1/auth/login - application/json 51
2025-11-16 19:55:45.162 +03:00 [INF] CORS policy execution successful.
2025-11-16 19:55:45.166 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.AuthController.Login (MappyApplication)'
2025-11-16 19:55:45.167 +03:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.user.AuthResponse] Login(MappyApplication.Models.user.AuthLogin) on controller MappyApplication.Controllers.AuthController (MappyApplication).
2025-11-16 19:55:45.326 +03:00 [INF] Executed DbCommand (32ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`FirstName`, `a`.`LastName`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`
FROM `AspNetUsers` AS `a`
WHERE `a`.`NormalizedEmail` = @__normalizedEmail_0
LIMIT 2
2025-11-16 19:55:45.370 +03:00 [INF] Executed DbCommand (5ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']

        UPDATE TOKENS
        SET Revoked = true, Expired = true
        WHERE UserId = @p0
          AND DeviceId = @p1
          AND Revoked = false
          AND Expired = false
2025-11-16 19:55:45.373 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a0`.`Name`
FROM `AspNetUserRoles` AS `a`
INNER JOIN `AspNetRoles` AS `a0` ON `a`.`RoleId` = `a0`.`Id`
WHERE `a`.`UserId` = @__userId_0
2025-11-16 19:55:45.374 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ClaimType`, `a`.`ClaimValue`, `a`.`UserId`
FROM `AspNetUserClaims` AS `a`
WHERE `a`.`UserId` = @__user_Id_0
2025-11-16 19:55:45.375 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a0`.`Name`
FROM `AspNetUserRoles` AS `a`
INNER JOIN `AspNetRoles` AS `a0` ON `a`.`RoleId` = `a0`.`Id`
WHERE `a`.`UserId` = @__userId_0
2025-11-16 19:55:45.375 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ClaimType`, `a`.`ClaimValue`, `a`.`UserId`
FROM `AspNetUserClaims` AS `a`
WHERE `a`.`UserId` = @__user_Id_0
2025-11-16 19:55:45.391 +03:00 [INF] Executed DbCommand (13ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (DbType = DateTime), @p2='?' (Size = 4000), @p3='?' (DbType = Boolean), @p4='?' (Size = 4000), @p5='?' (DbType = Boolean), @p6='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO `Tokens` (`AccessToken`, `CreatedAt`, `DeviceId`, `Expired`, `RefreshToken`, `Revoked`, `UserId`)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6);
SELECT `Id`
FROM `Tokens`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();
2025-11-16 19:55:45.396 +03:00 [INF] Added Token MappyApplication.Data.Token
2025-11-16 19:55:45.404 +03:00 [INF] Executed DbCommand (7ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessFailedCount`, `t`.`ConcurrencyStamp`, `t`.`Email`, `t`.`EmailConfirmed`, `t`.`FirstName`, `t`.`LastName`, `t`.`LockoutEnabled`, `t`.`LockoutEnd`, `t`.`NormalizedEmail`, `t`.`NormalizedUserName`, `t`.`PasswordHash`, `t`.`PhoneNumber`, `t`.`PhoneNumberConfirmed`, `t`.`SecurityStamp`, `t`.`TwoFactorEnabled`, `t`.`UserName`, `w`.`Id`, `w`.`Cadence`, `w`.`CityName`, `w`.`Coords`, `w`.`Date`, `w`.`Distance`, `w`.`Duration`, `w`.`Emoji`, `w`.`Pace`, `w`.`Type`, `w`.`UserId`, `c`.`Id`, `c`.`CityName`, `c`.`Country`, `c`.`Date`, `c`.`Emoji`, `c`.`Lat`, `c`.`Lng`, `c`.`Notes`, `c`.`UserId`
FROM (
    SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`FirstName`, `a`.`LastName`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`
    FROM `AspNetUsers` AS `a`
    WHERE `a`.`Id` = @__user_Id_0
    LIMIT 2
) AS `t`
LEFT JOIN `Workouts` AS `w` ON `t`.`Id` = `w`.`UserId`
LEFT JOIN `Cities` AS `c` ON `t`.`Id` = `c`.`UserId`
ORDER BY `t`.`Id`, `w`.`Id`
2025-11-16 19:55:45.405 +03:00 [INF] Executing ObjectResult, writing value of type 'MappyApplication.Models.user.AuthResponse'.
2025-11-16 19:55:45.405 +03:00 [INF] Executed action MappyApplication.Controllers.AuthController.Login (MappyApplication) in 237.6551ms
2025-11-16 19:55:45.405 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.AuthController.Login (MappyApplication)'
2025-11-16 19:55:45.405 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:8080/api/v1/auth/login - 200 null application/json; charset=utf-8 243.0145ms
2025-11-16 19:56:19.456 +03:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:8080/api/v1/auth/refresh-token - null null
2025-11-16 19:56:19.457 +03:00 [INF] CORS policy execution successful.
2025-11-16 19:56:19.458 +03:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:8080/api/v1/auth/refresh-token - 204 null null 2.5782ms
2025-11-16 19:56:19.461 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:8080/api/v1/auth/refresh-token - null 0
2025-11-16 19:56:19.461 +03:00 [INF] CORS policy execution successful.
2025-11-16 19:56:19.597 +03:00 [INF] Executed DbCommand (22ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 19:56:19.600 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication)'
2025-11-16 19:56:19.600 +03:00 [INF] Route matched with {action = "RefreshToken", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.user.AuthResponse] RefreshToken() on controller MappyApplication.Controllers.AuthController (MappyApplication).
2025-11-16 19:56:19.601 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__refreshToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`RefreshToken` = @__refreshToken_0
LIMIT 2
2025-11-16 19:56:19.608 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__p_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`FirstName`, `a`.`LastName`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`
FROM `AspNetUsers` AS `a`
WHERE `a`.`Id` = @__p_0
LIMIT 1
2025-11-16 19:56:19.623 +03:00 [INF] Executed DbCommand (14ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']

        UPDATE TOKENS
        SET Revoked = true, Expired = true
        WHERE UserId = @p0
          AND DeviceId = @p1
          AND Revoked = false
          AND Expired = false
2025-11-16 19:56:19.626 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a0`.`Name`
FROM `AspNetUserRoles` AS `a`
INNER JOIN `AspNetRoles` AS `a0` ON `a`.`RoleId` = `a0`.`Id`
WHERE `a`.`UserId` = @__userId_0
2025-11-16 19:56:19.627 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ClaimType`, `a`.`ClaimValue`, `a`.`UserId`
FROM `AspNetUserClaims` AS `a`
WHERE `a`.`UserId` = @__user_Id_0
2025-11-16 19:56:19.627 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a0`.`Name`
FROM `AspNetUserRoles` AS `a`
INNER JOIN `AspNetRoles` AS `a0` ON `a`.`RoleId` = `a0`.`Id`
WHERE `a`.`UserId` = @__userId_0
2025-11-16 19:56:19.627 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ClaimType`, `a`.`ClaimValue`, `a`.`UserId`
FROM `AspNetUserClaims` AS `a`
WHERE `a`.`UserId` = @__user_Id_0
2025-11-16 19:56:19.634 +03:00 [INF] Executed DbCommand (4ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (DbType = DateTime), @p2='?' (Size = 4000), @p3='?' (DbType = Boolean), @p4='?' (Size = 4000), @p5='?' (DbType = Boolean), @p6='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO `Tokens` (`AccessToken`, `CreatedAt`, `DeviceId`, `Expired`, `RefreshToken`, `Revoked`, `UserId`)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6);
SELECT `Id`
FROM `Tokens`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();
2025-11-16 19:56:19.636 +03:00 [INF] Added Token MappyApplication.Data.Token
2025-11-16 19:56:19.642 +03:00 [INF] Executed DbCommand (6ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessFailedCount`, `t`.`ConcurrencyStamp`, `t`.`Email`, `t`.`EmailConfirmed`, `t`.`FirstName`, `t`.`LastName`, `t`.`LockoutEnabled`, `t`.`LockoutEnd`, `t`.`NormalizedEmail`, `t`.`NormalizedUserName`, `t`.`PasswordHash`, `t`.`PhoneNumber`, `t`.`PhoneNumberConfirmed`, `t`.`SecurityStamp`, `t`.`TwoFactorEnabled`, `t`.`UserName`, `w`.`Id`, `w`.`Cadence`, `w`.`CityName`, `w`.`Coords`, `w`.`Date`, `w`.`Distance`, `w`.`Duration`, `w`.`Emoji`, `w`.`Pace`, `w`.`Type`, `w`.`UserId`, `c`.`Id`, `c`.`CityName`, `c`.`Country`, `c`.`Date`, `c`.`Emoji`, `c`.`Lat`, `c`.`Lng`, `c`.`Notes`, `c`.`UserId`
FROM (
    SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`FirstName`, `a`.`LastName`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`
    FROM `AspNetUsers` AS `a`
    WHERE `a`.`Id` = @__user_Id_0
    LIMIT 2
) AS `t`
LEFT JOIN `Workouts` AS `w` ON `t`.`Id` = `w`.`UserId`
LEFT JOIN `Cities` AS `c` ON `t`.`Id` = `c`.`UserId`
ORDER BY `t`.`Id`, `w`.`Id`
2025-11-16 19:56:19.643 +03:00 [INF] Executing ObjectResult, writing value of type 'MappyApplication.Models.user.AuthResponse'.
2025-11-16 19:56:19.643 +03:00 [INF] Executed action MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication) in 42.8745ms
2025-11-16 19:56:19.643 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication)'
2025-11-16 19:56:19.643 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:8080/api/v1/auth/refresh-token - 200 null application/json; charset=utf-8 182.4026ms
2025-11-16 19:56:29.958 +03:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:8080/api/v1/auth/refresh-token - null null
2025-11-16 19:56:29.959 +03:00 [INF] CORS policy execution successful.
2025-11-16 19:56:29.960 +03:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:8080/api/v1/auth/refresh-token - 204 null null 1.5809ms
2025-11-16 19:56:29.961 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:8080/api/v1/auth/refresh-token - null 0
2025-11-16 19:56:29.961 +03:00 [INF] CORS policy execution successful.
2025-11-16 19:56:29.986 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 19:56:29.986 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication)'
2025-11-16 19:56:29.986 +03:00 [INF] Route matched with {action = "RefreshToken", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.user.AuthResponse] RefreshToken() on controller MappyApplication.Controllers.AuthController (MappyApplication).
2025-11-16 19:56:29.987 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__refreshToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`RefreshToken` = @__refreshToken_0
LIMIT 2
2025-11-16 19:56:29.989 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`FirstName`, `a`.`LastName`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`
FROM `AspNetUsers` AS `a`
WHERE `a`.`Id` = @__p_0
LIMIT 1
2025-11-16 19:56:29.992 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']

        UPDATE TOKENS
        SET Revoked = true, Expired = true
        WHERE UserId = @p0
          AND DeviceId = @p1
          AND Revoked = false
          AND Expired = false
2025-11-16 19:56:29.993 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a0`.`Name`
FROM `AspNetUserRoles` AS `a`
INNER JOIN `AspNetRoles` AS `a0` ON `a`.`RoleId` = `a0`.`Id`
WHERE `a`.`UserId` = @__userId_0
2025-11-16 19:56:29.994 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ClaimType`, `a`.`ClaimValue`, `a`.`UserId`
FROM `AspNetUserClaims` AS `a`
WHERE `a`.`UserId` = @__user_Id_0
2025-11-16 19:56:29.995 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a0`.`Name`
FROM `AspNetUserRoles` AS `a`
INNER JOIN `AspNetRoles` AS `a0` ON `a`.`RoleId` = `a0`.`Id`
WHERE `a`.`UserId` = @__userId_0
2025-11-16 19:56:29.995 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ClaimType`, `a`.`ClaimValue`, `a`.`UserId`
FROM `AspNetUserClaims` AS `a`
WHERE `a`.`UserId` = @__user_Id_0
2025-11-16 19:56:29.998 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (DbType = DateTime), @p2='?' (Size = 4000), @p3='?' (DbType = Boolean), @p4='?' (Size = 4000), @p5='?' (DbType = Boolean), @p6='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO `Tokens` (`AccessToken`, `CreatedAt`, `DeviceId`, `Expired`, `RefreshToken`, `Revoked`, `UserId`)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6);
SELECT `Id`
FROM `Tokens`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();
2025-11-16 19:56:29.999 +03:00 [INF] Added Token MappyApplication.Data.Token
2025-11-16 19:56:30.000 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessFailedCount`, `t`.`ConcurrencyStamp`, `t`.`Email`, `t`.`EmailConfirmed`, `t`.`FirstName`, `t`.`LastName`, `t`.`LockoutEnabled`, `t`.`LockoutEnd`, `t`.`NormalizedEmail`, `t`.`NormalizedUserName`, `t`.`PasswordHash`, `t`.`PhoneNumber`, `t`.`PhoneNumberConfirmed`, `t`.`SecurityStamp`, `t`.`TwoFactorEnabled`, `t`.`UserName`, `w`.`Id`, `w`.`Cadence`, `w`.`CityName`, `w`.`Coords`, `w`.`Date`, `w`.`Distance`, `w`.`Duration`, `w`.`Emoji`, `w`.`Pace`, `w`.`Type`, `w`.`UserId`, `c`.`Id`, `c`.`CityName`, `c`.`Country`, `c`.`Date`, `c`.`Emoji`, `c`.`Lat`, `c`.`Lng`, `c`.`Notes`, `c`.`UserId`
FROM (
    SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`FirstName`, `a`.`LastName`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`
    FROM `AspNetUsers` AS `a`
    WHERE `a`.`Id` = @__user_Id_0
    LIMIT 2
) AS `t`
LEFT JOIN `Workouts` AS `w` ON `t`.`Id` = `w`.`UserId`
LEFT JOIN `Cities` AS `c` ON `t`.`Id` = `c`.`UserId`
ORDER BY `t`.`Id`, `w`.`Id`
2025-11-16 19:56:30.000 +03:00 [INF] Executing ObjectResult, writing value of type 'MappyApplication.Models.user.AuthResponse'.
2025-11-16 19:56:30.000 +03:00 [INF] Executed action MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication) in 14.1191ms
2025-11-16 19:56:30.000 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication)'
2025-11-16 19:56:30.000 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:8080/api/v1/auth/refresh-token - 200 null application/json; charset=utf-8 39.8016ms
2025-11-16 19:56:33.827 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:8080/api/v1/auth/refresh-token - null 0
2025-11-16 19:56:33.829 +03:00 [INF] CORS policy execution successful.
2025-11-16 19:56:33.860 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 19:56:33.861 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication)'
2025-11-16 19:56:33.861 +03:00 [INF] Route matched with {action = "RefreshToken", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.user.AuthResponse] RefreshToken() on controller MappyApplication.Controllers.AuthController (MappyApplication).
2025-11-16 19:56:33.862 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__refreshToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`RefreshToken` = @__refreshToken_0
LIMIT 2
2025-11-16 19:56:33.864 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`FirstName`, `a`.`LastName`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`
FROM `AspNetUsers` AS `a`
WHERE `a`.`Id` = @__p_0
LIMIT 1
2025-11-16 19:56:33.868 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']

        UPDATE TOKENS
        SET Revoked = true, Expired = true
        WHERE UserId = @p0
          AND DeviceId = @p1
          AND Revoked = false
          AND Expired = false
2025-11-16 19:56:33.870 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a0`.`Name`
FROM `AspNetUserRoles` AS `a`
INNER JOIN `AspNetRoles` AS `a0` ON `a`.`RoleId` = `a0`.`Id`
WHERE `a`.`UserId` = @__userId_0
2025-11-16 19:56:33.871 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ClaimType`, `a`.`ClaimValue`, `a`.`UserId`
FROM `AspNetUserClaims` AS `a`
WHERE `a`.`UserId` = @__user_Id_0
2025-11-16 19:56:33.871 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a0`.`Name`
FROM `AspNetUserRoles` AS `a`
INNER JOIN `AspNetRoles` AS `a0` ON `a`.`RoleId` = `a0`.`Id`
WHERE `a`.`UserId` = @__userId_0
2025-11-16 19:56:33.872 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ClaimType`, `a`.`ClaimValue`, `a`.`UserId`
FROM `AspNetUserClaims` AS `a`
WHERE `a`.`UserId` = @__user_Id_0
2025-11-16 19:56:33.874 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (DbType = DateTime), @p2='?' (Size = 4000), @p3='?' (DbType = Boolean), @p4='?' (Size = 4000), @p5='?' (DbType = Boolean), @p6='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO `Tokens` (`AccessToken`, `CreatedAt`, `DeviceId`, `Expired`, `RefreshToken`, `Revoked`, `UserId`)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6);
SELECT `Id`
FROM `Tokens`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();
2025-11-16 19:56:33.874 +03:00 [INF] Added Token MappyApplication.Data.Token
2025-11-16 19:56:33.877 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessFailedCount`, `t`.`ConcurrencyStamp`, `t`.`Email`, `t`.`EmailConfirmed`, `t`.`FirstName`, `t`.`LastName`, `t`.`LockoutEnabled`, `t`.`LockoutEnd`, `t`.`NormalizedEmail`, `t`.`NormalizedUserName`, `t`.`PasswordHash`, `t`.`PhoneNumber`, `t`.`PhoneNumberConfirmed`, `t`.`SecurityStamp`, `t`.`TwoFactorEnabled`, `t`.`UserName`, `w`.`Id`, `w`.`Cadence`, `w`.`CityName`, `w`.`Coords`, `w`.`Date`, `w`.`Distance`, `w`.`Duration`, `w`.`Emoji`, `w`.`Pace`, `w`.`Type`, `w`.`UserId`, `c`.`Id`, `c`.`CityName`, `c`.`Country`, `c`.`Date`, `c`.`Emoji`, `c`.`Lat`, `c`.`Lng`, `c`.`Notes`, `c`.`UserId`
FROM (
    SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`FirstName`, `a`.`LastName`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`
    FROM `AspNetUsers` AS `a`
    WHERE `a`.`Id` = @__user_Id_0
    LIMIT 2
) AS `t`
LEFT JOIN `Workouts` AS `w` ON `t`.`Id` = `w`.`UserId`
LEFT JOIN `Cities` AS `c` ON `t`.`Id` = `c`.`UserId`
ORDER BY `t`.`Id`, `w`.`Id`
2025-11-16 19:56:33.877 +03:00 [INF] Executing ObjectResult, writing value of type 'MappyApplication.Models.user.AuthResponse'.
2025-11-16 19:56:33.877 +03:00 [INF] Executed action MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication) in 16.2644ms
2025-11-16 19:56:33.877 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication)'
2025-11-16 19:56:33.877 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:8080/api/v1/auth/refresh-token - 200 null application/json; charset=utf-8 49.7852ms
2025-11-16 19:56:36.889 +03:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:8080/api/v1/auth/refresh-token - null null
2025-11-16 19:56:36.895 +03:00 [INF] CORS policy execution successful.
2025-11-16 19:56:36.896 +03:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:8080/api/v1/auth/refresh-token - 204 null null 6.5909ms
2025-11-16 19:56:36.910 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:8080/api/v1/auth/refresh-token - null 0
2025-11-16 19:56:36.911 +03:00 [INF] CORS policy execution successful.
2025-11-16 19:56:36.947 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 19:56:36.948 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication)'
2025-11-16 19:56:36.948 +03:00 [INF] Route matched with {action = "RefreshToken", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.user.AuthResponse] RefreshToken() on controller MappyApplication.Controllers.AuthController (MappyApplication).
2025-11-16 19:56:36.950 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__refreshToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`RefreshToken` = @__refreshToken_0
LIMIT 2
2025-11-16 19:56:36.951 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`FirstName`, `a`.`LastName`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`
FROM `AspNetUsers` AS `a`
WHERE `a`.`Id` = @__p_0
LIMIT 1
2025-11-16 19:56:36.953 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']

        UPDATE TOKENS
        SET Revoked = true, Expired = true
        WHERE UserId = @p0
          AND DeviceId = @p1
          AND Revoked = false
          AND Expired = false
2025-11-16 19:56:36.955 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a0`.`Name`
FROM `AspNetUserRoles` AS `a`
INNER JOIN `AspNetRoles` AS `a0` ON `a`.`RoleId` = `a0`.`Id`
WHERE `a`.`UserId` = @__userId_0
2025-11-16 19:56:36.957 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ClaimType`, `a`.`ClaimValue`, `a`.`UserId`
FROM `AspNetUserClaims` AS `a`
WHERE `a`.`UserId` = @__user_Id_0
2025-11-16 19:56:36.958 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a0`.`Name`
FROM `AspNetUserRoles` AS `a`
INNER JOIN `AspNetRoles` AS `a0` ON `a`.`RoleId` = `a0`.`Id`
WHERE `a`.`UserId` = @__userId_0
2025-11-16 19:56:36.960 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ClaimType`, `a`.`ClaimValue`, `a`.`UserId`
FROM `AspNetUserClaims` AS `a`
WHERE `a`.`UserId` = @__user_Id_0
2025-11-16 19:56:36.962 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (DbType = DateTime), @p2='?' (Size = 4000), @p3='?' (DbType = Boolean), @p4='?' (Size = 4000), @p5='?' (DbType = Boolean), @p6='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO `Tokens` (`AccessToken`, `CreatedAt`, `DeviceId`, `Expired`, `RefreshToken`, `Revoked`, `UserId`)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6);
SELECT `Id`
FROM `Tokens`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();
2025-11-16 19:56:36.963 +03:00 [INF] Added Token MappyApplication.Data.Token
2025-11-16 19:56:36.967 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessFailedCount`, `t`.`ConcurrencyStamp`, `t`.`Email`, `t`.`EmailConfirmed`, `t`.`FirstName`, `t`.`LastName`, `t`.`LockoutEnabled`, `t`.`LockoutEnd`, `t`.`NormalizedEmail`, `t`.`NormalizedUserName`, `t`.`PasswordHash`, `t`.`PhoneNumber`, `t`.`PhoneNumberConfirmed`, `t`.`SecurityStamp`, `t`.`TwoFactorEnabled`, `t`.`UserName`, `w`.`Id`, `w`.`Cadence`, `w`.`CityName`, `w`.`Coords`, `w`.`Date`, `w`.`Distance`, `w`.`Duration`, `w`.`Emoji`, `w`.`Pace`, `w`.`Type`, `w`.`UserId`, `c`.`Id`, `c`.`CityName`, `c`.`Country`, `c`.`Date`, `c`.`Emoji`, `c`.`Lat`, `c`.`Lng`, `c`.`Notes`, `c`.`UserId`
FROM (
    SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`FirstName`, `a`.`LastName`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`
    FROM `AspNetUsers` AS `a`
    WHERE `a`.`Id` = @__user_Id_0
    LIMIT 2
) AS `t`
LEFT JOIN `Workouts` AS `w` ON `t`.`Id` = `w`.`UserId`
LEFT JOIN `Cities` AS `c` ON `t`.`Id` = `c`.`UserId`
ORDER BY `t`.`Id`, `w`.`Id`
2025-11-16 19:56:36.967 +03:00 [INF] Executing ObjectResult, writing value of type 'MappyApplication.Models.user.AuthResponse'.
2025-11-16 19:56:36.967 +03:00 [INF] Executed action MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication) in 18.8909ms
2025-11-16 19:56:36.967 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication)'
2025-11-16 19:56:36.967 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:8080/api/v1/auth/refresh-token - 200 null application/json; charset=utf-8 56.6747ms
2025-11-16 19:56:37.784 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:8080/api/v1/auth/refresh-token - null 0
2025-11-16 19:56:37.787 +03:00 [INF] CORS policy execution successful.
2025-11-16 19:56:37.819 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 19:56:37.821 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication)'
2025-11-16 19:56:37.821 +03:00 [INF] Route matched with {action = "RefreshToken", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.user.AuthResponse] RefreshToken() on controller MappyApplication.Controllers.AuthController (MappyApplication).
2025-11-16 19:56:37.824 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__refreshToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`RefreshToken` = @__refreshToken_0
LIMIT 2
2025-11-16 19:56:37.833 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`FirstName`, `a`.`LastName`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`
FROM `AspNetUsers` AS `a`
WHERE `a`.`Id` = @__p_0
LIMIT 1
2025-11-16 19:56:37.843 +03:00 [INF] Executed DbCommand (4ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']

        UPDATE TOKENS
        SET Revoked = true, Expired = true
        WHERE UserId = @p0
          AND DeviceId = @p1
          AND Revoked = false
          AND Expired = false
2025-11-16 19:56:37.853 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a0`.`Name`
FROM `AspNetUserRoles` AS `a`
INNER JOIN `AspNetRoles` AS `a0` ON `a`.`RoleId` = `a0`.`Id`
WHERE `a`.`UserId` = @__userId_0
2025-11-16 19:56:37.861 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ClaimType`, `a`.`ClaimValue`, `a`.`UserId`
FROM `AspNetUserClaims` AS `a`
WHERE `a`.`UserId` = @__user_Id_0
2025-11-16 19:56:37.866 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a0`.`Name`
FROM `AspNetUserRoles` AS `a`
INNER JOIN `AspNetRoles` AS `a0` ON `a`.`RoleId` = `a0`.`Id`
WHERE `a`.`UserId` = @__userId_0
2025-11-16 19:56:37.870 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ClaimType`, `a`.`ClaimValue`, `a`.`UserId`
FROM `AspNetUserClaims` AS `a`
WHERE `a`.`UserId` = @__user_Id_0
2025-11-16 19:56:37.874 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (DbType = DateTime), @p2='?' (Size = 4000), @p3='?' (DbType = Boolean), @p4='?' (Size = 4000), @p5='?' (DbType = Boolean), @p6='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO `Tokens` (`AccessToken`, `CreatedAt`, `DeviceId`, `Expired`, `RefreshToken`, `Revoked`, `UserId`)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6);
SELECT `Id`
FROM `Tokens`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();
2025-11-16 19:56:37.875 +03:00 [INF] Added Token MappyApplication.Data.Token
2025-11-16 19:56:37.882 +03:00 [INF] Executed DbCommand (4ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessFailedCount`, `t`.`ConcurrencyStamp`, `t`.`Email`, `t`.`EmailConfirmed`, `t`.`FirstName`, `t`.`LastName`, `t`.`LockoutEnabled`, `t`.`LockoutEnd`, `t`.`NormalizedEmail`, `t`.`NormalizedUserName`, `t`.`PasswordHash`, `t`.`PhoneNumber`, `t`.`PhoneNumberConfirmed`, `t`.`SecurityStamp`, `t`.`TwoFactorEnabled`, `t`.`UserName`, `w`.`Id`, `w`.`Cadence`, `w`.`CityName`, `w`.`Coords`, `w`.`Date`, `w`.`Distance`, `w`.`Duration`, `w`.`Emoji`, `w`.`Pace`, `w`.`Type`, `w`.`UserId`, `c`.`Id`, `c`.`CityName`, `c`.`Country`, `c`.`Date`, `c`.`Emoji`, `c`.`Lat`, `c`.`Lng`, `c`.`Notes`, `c`.`UserId`
FROM (
    SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`FirstName`, `a`.`LastName`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`
    FROM `AspNetUsers` AS `a`
    WHERE `a`.`Id` = @__user_Id_0
    LIMIT 2
) AS `t`
LEFT JOIN `Workouts` AS `w` ON `t`.`Id` = `w`.`UserId`
LEFT JOIN `Cities` AS `c` ON `t`.`Id` = `c`.`UserId`
ORDER BY `t`.`Id`, `w`.`Id`
2025-11-16 19:56:37.882 +03:00 [INF] Executing ObjectResult, writing value of type 'MappyApplication.Models.user.AuthResponse'.
2025-11-16 19:56:37.882 +03:00 [INF] Executed action MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication) in 61.3902ms
2025-11-16 19:56:37.883 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication)'
2025-11-16 19:56:37.883 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:8080/api/v1/auth/refresh-token - 200 null application/json; charset=utf-8 101.0791ms
2025-11-16 19:56:43.501 +03:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:8080/api/v1/auth/refresh-token - null null
2025-11-16 19:56:43.502 +03:00 [INF] CORS policy execution successful.
2025-11-16 19:56:43.502 +03:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:8080/api/v1/auth/refresh-token - 204 null null 1.7513ms
2025-11-16 19:56:43.505 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:8080/api/v1/auth/refresh-token - null 0
2025-11-16 19:56:43.505 +03:00 [INF] CORS policy execution successful.
2025-11-16 19:56:43.550 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 19:56:43.550 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication)'
2025-11-16 19:56:43.550 +03:00 [INF] Route matched with {action = "RefreshToken", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.user.AuthResponse] RefreshToken() on controller MappyApplication.Controllers.AuthController (MappyApplication).
2025-11-16 19:56:43.551 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__refreshToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`RefreshToken` = @__refreshToken_0
LIMIT 2
2025-11-16 19:56:43.552 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`FirstName`, `a`.`LastName`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`
FROM `AspNetUsers` AS `a`
WHERE `a`.`Id` = @__p_0
LIMIT 1
2025-11-16 19:56:43.556 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']

        UPDATE TOKENS
        SET Revoked = true, Expired = true
        WHERE UserId = @p0
          AND DeviceId = @p1
          AND Revoked = false
          AND Expired = false
2025-11-16 19:56:43.557 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a0`.`Name`
FROM `AspNetUserRoles` AS `a`
INNER JOIN `AspNetRoles` AS `a0` ON `a`.`RoleId` = `a0`.`Id`
WHERE `a`.`UserId` = @__userId_0
2025-11-16 19:56:43.559 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ClaimType`, `a`.`ClaimValue`, `a`.`UserId`
FROM `AspNetUserClaims` AS `a`
WHERE `a`.`UserId` = @__user_Id_0
2025-11-16 19:56:43.560 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a0`.`Name`
FROM `AspNetUserRoles` AS `a`
INNER JOIN `AspNetRoles` AS `a0` ON `a`.`RoleId` = `a0`.`Id`
WHERE `a`.`UserId` = @__userId_0
2025-11-16 19:56:43.561 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ClaimType`, `a`.`ClaimValue`, `a`.`UserId`
FROM `AspNetUserClaims` AS `a`
WHERE `a`.`UserId` = @__user_Id_0
2025-11-16 19:56:43.563 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (DbType = DateTime), @p2='?' (Size = 4000), @p3='?' (DbType = Boolean), @p4='?' (Size = 4000), @p5='?' (DbType = Boolean), @p6='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO `Tokens` (`AccessToken`, `CreatedAt`, `DeviceId`, `Expired`, `RefreshToken`, `Revoked`, `UserId`)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6);
SELECT `Id`
FROM `Tokens`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();
2025-11-16 19:56:43.564 +03:00 [INF] Added Token MappyApplication.Data.Token
2025-11-16 19:56:43.567 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessFailedCount`, `t`.`ConcurrencyStamp`, `t`.`Email`, `t`.`EmailConfirmed`, `t`.`FirstName`, `t`.`LastName`, `t`.`LockoutEnabled`, `t`.`LockoutEnd`, `t`.`NormalizedEmail`, `t`.`NormalizedUserName`, `t`.`PasswordHash`, `t`.`PhoneNumber`, `t`.`PhoneNumberConfirmed`, `t`.`SecurityStamp`, `t`.`TwoFactorEnabled`, `t`.`UserName`, `w`.`Id`, `w`.`Cadence`, `w`.`CityName`, `w`.`Coords`, `w`.`Date`, `w`.`Distance`, `w`.`Duration`, `w`.`Emoji`, `w`.`Pace`, `w`.`Type`, `w`.`UserId`, `c`.`Id`, `c`.`CityName`, `c`.`Country`, `c`.`Date`, `c`.`Emoji`, `c`.`Lat`, `c`.`Lng`, `c`.`Notes`, `c`.`UserId`
FROM (
    SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`FirstName`, `a`.`LastName`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`
    FROM `AspNetUsers` AS `a`
    WHERE `a`.`Id` = @__user_Id_0
    LIMIT 2
) AS `t`
LEFT JOIN `Workouts` AS `w` ON `t`.`Id` = `w`.`UserId`
LEFT JOIN `Cities` AS `c` ON `t`.`Id` = `c`.`UserId`
ORDER BY `t`.`Id`, `w`.`Id`
2025-11-16 19:56:43.567 +03:00 [INF] Executing ObjectResult, writing value of type 'MappyApplication.Models.user.AuthResponse'.
2025-11-16 19:56:43.568 +03:00 [INF] Executed action MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication) in 17.5422ms
2025-11-16 19:56:43.568 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication)'
2025-11-16 19:56:43.568 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:8080/api/v1/auth/refresh-token - 200 null application/json; charset=utf-8 62.7578ms
2025-11-16 19:56:49.740 +03:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:8080/api/v1/auth/refresh-token - null null
2025-11-16 19:56:49.741 +03:00 [INF] CORS policy execution successful.
2025-11-16 19:56:49.741 +03:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:8080/api/v1/auth/refresh-token - 204 null null 1.1958ms
2025-11-16 19:56:49.742 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:8080/api/v1/auth/refresh-token - null 0
2025-11-16 19:56:49.743 +03:00 [INF] CORS policy execution successful.
2025-11-16 19:56:49.774 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 19:56:49.775 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication)'
2025-11-16 19:56:49.775 +03:00 [INF] Route matched with {action = "RefreshToken", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.user.AuthResponse] RefreshToken() on controller MappyApplication.Controllers.AuthController (MappyApplication).
2025-11-16 19:56:49.777 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__refreshToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`RefreshToken` = @__refreshToken_0
LIMIT 2
2025-11-16 19:56:49.778 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`FirstName`, `a`.`LastName`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`
FROM `AspNetUsers` AS `a`
WHERE `a`.`Id` = @__p_0
LIMIT 1
2025-11-16 19:56:49.785 +03:00 [INF] Executed DbCommand (6ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']

        UPDATE TOKENS
        SET Revoked = true, Expired = true
        WHERE UserId = @p0
          AND DeviceId = @p1
          AND Revoked = false
          AND Expired = false
2025-11-16 19:56:49.787 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a0`.`Name`
FROM `AspNetUserRoles` AS `a`
INNER JOIN `AspNetRoles` AS `a0` ON `a`.`RoleId` = `a0`.`Id`
WHERE `a`.`UserId` = @__userId_0
2025-11-16 19:56:49.787 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ClaimType`, `a`.`ClaimValue`, `a`.`UserId`
FROM `AspNetUserClaims` AS `a`
WHERE `a`.`UserId` = @__user_Id_0
2025-11-16 19:56:49.788 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a0`.`Name`
FROM `AspNetUserRoles` AS `a`
INNER JOIN `AspNetRoles` AS `a0` ON `a`.`RoleId` = `a0`.`Id`
WHERE `a`.`UserId` = @__userId_0
2025-11-16 19:56:49.788 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ClaimType`, `a`.`ClaimValue`, `a`.`UserId`
FROM `AspNetUserClaims` AS `a`
WHERE `a`.`UserId` = @__user_Id_0
2025-11-16 19:56:49.790 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (DbType = DateTime), @p2='?' (Size = 4000), @p3='?' (DbType = Boolean), @p4='?' (Size = 4000), @p5='?' (DbType = Boolean), @p6='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO `Tokens` (`AccessToken`, `CreatedAt`, `DeviceId`, `Expired`, `RefreshToken`, `Revoked`, `UserId`)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6);
SELECT `Id`
FROM `Tokens`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();
2025-11-16 19:56:49.790 +03:00 [INF] Added Token MappyApplication.Data.Token
2025-11-16 19:56:49.792 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessFailedCount`, `t`.`ConcurrencyStamp`, `t`.`Email`, `t`.`EmailConfirmed`, `t`.`FirstName`, `t`.`LastName`, `t`.`LockoutEnabled`, `t`.`LockoutEnd`, `t`.`NormalizedEmail`, `t`.`NormalizedUserName`, `t`.`PasswordHash`, `t`.`PhoneNumber`, `t`.`PhoneNumberConfirmed`, `t`.`SecurityStamp`, `t`.`TwoFactorEnabled`, `t`.`UserName`, `w`.`Id`, `w`.`Cadence`, `w`.`CityName`, `w`.`Coords`, `w`.`Date`, `w`.`Distance`, `w`.`Duration`, `w`.`Emoji`, `w`.`Pace`, `w`.`Type`, `w`.`UserId`, `c`.`Id`, `c`.`CityName`, `c`.`Country`, `c`.`Date`, `c`.`Emoji`, `c`.`Lat`, `c`.`Lng`, `c`.`Notes`, `c`.`UserId`
FROM (
    SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`FirstName`, `a`.`LastName`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`
    FROM `AspNetUsers` AS `a`
    WHERE `a`.`Id` = @__user_Id_0
    LIMIT 2
) AS `t`
LEFT JOIN `Workouts` AS `w` ON `t`.`Id` = `w`.`UserId`
LEFT JOIN `Cities` AS `c` ON `t`.`Id` = `c`.`UserId`
ORDER BY `t`.`Id`, `w`.`Id`
2025-11-16 19:56:49.792 +03:00 [INF] Executing ObjectResult, writing value of type 'MappyApplication.Models.user.AuthResponse'.
2025-11-16 19:56:49.792 +03:00 [INF] Executed action MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication) in 17.2902ms
2025-11-16 19:56:49.792 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication)'
2025-11-16 19:56:49.792 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:8080/api/v1/auth/refresh-token - 200 null application/json; charset=utf-8 50.0049ms
2025-11-16 19:56:56.427 +03:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:8080/api/v1/auth/refresh-token - null null
2025-11-16 19:56:56.428 +03:00 [INF] CORS policy execution successful.
2025-11-16 19:56:56.429 +03:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:8080/api/v1/auth/refresh-token - 204 null null 1.6006ms
2025-11-16 19:56:56.429 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:8080/api/v1/auth/refresh-token - null 0
2025-11-16 19:56:56.429 +03:00 [INF] CORS policy execution successful.
2025-11-16 19:56:56.457 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 19:56:56.458 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication)'
2025-11-16 19:56:56.458 +03:00 [INF] Route matched with {action = "RefreshToken", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.user.AuthResponse] RefreshToken() on controller MappyApplication.Controllers.AuthController (MappyApplication).
2025-11-16 19:56:56.460 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__refreshToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`RefreshToken` = @__refreshToken_0
LIMIT 2
2025-11-16 19:56:56.464 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`FirstName`, `a`.`LastName`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`
FROM `AspNetUsers` AS `a`
WHERE `a`.`Id` = @__p_0
LIMIT 1
2025-11-16 19:56:56.467 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']

        UPDATE TOKENS
        SET Revoked = true, Expired = true
        WHERE UserId = @p0
          AND DeviceId = @p1
          AND Revoked = false
          AND Expired = false
2025-11-16 19:56:56.468 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a0`.`Name`
FROM `AspNetUserRoles` AS `a`
INNER JOIN `AspNetRoles` AS `a0` ON `a`.`RoleId` = `a0`.`Id`
WHERE `a`.`UserId` = @__userId_0
2025-11-16 19:56:56.469 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ClaimType`, `a`.`ClaimValue`, `a`.`UserId`
FROM `AspNetUserClaims` AS `a`
WHERE `a`.`UserId` = @__user_Id_0
2025-11-16 19:56:56.470 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a0`.`Name`
FROM `AspNetUserRoles` AS `a`
INNER JOIN `AspNetRoles` AS `a0` ON `a`.`RoleId` = `a0`.`Id`
WHERE `a`.`UserId` = @__userId_0
2025-11-16 19:56:56.470 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ClaimType`, `a`.`ClaimValue`, `a`.`UserId`
FROM `AspNetUserClaims` AS `a`
WHERE `a`.`UserId` = @__user_Id_0
2025-11-16 19:56:56.473 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (DbType = DateTime), @p2='?' (Size = 4000), @p3='?' (DbType = Boolean), @p4='?' (Size = 4000), @p5='?' (DbType = Boolean), @p6='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO `Tokens` (`AccessToken`, `CreatedAt`, `DeviceId`, `Expired`, `RefreshToken`, `Revoked`, `UserId`)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6);
SELECT `Id`
FROM `Tokens`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();
2025-11-16 19:56:56.474 +03:00 [INF] Added Token MappyApplication.Data.Token
2025-11-16 19:56:56.475 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessFailedCount`, `t`.`ConcurrencyStamp`, `t`.`Email`, `t`.`EmailConfirmed`, `t`.`FirstName`, `t`.`LastName`, `t`.`LockoutEnabled`, `t`.`LockoutEnd`, `t`.`NormalizedEmail`, `t`.`NormalizedUserName`, `t`.`PasswordHash`, `t`.`PhoneNumber`, `t`.`PhoneNumberConfirmed`, `t`.`SecurityStamp`, `t`.`TwoFactorEnabled`, `t`.`UserName`, `w`.`Id`, `w`.`Cadence`, `w`.`CityName`, `w`.`Coords`, `w`.`Date`, `w`.`Distance`, `w`.`Duration`, `w`.`Emoji`, `w`.`Pace`, `w`.`Type`, `w`.`UserId`, `c`.`Id`, `c`.`CityName`, `c`.`Country`, `c`.`Date`, `c`.`Emoji`, `c`.`Lat`, `c`.`Lng`, `c`.`Notes`, `c`.`UserId`
FROM (
    SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`FirstName`, `a`.`LastName`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`
    FROM `AspNetUsers` AS `a`
    WHERE `a`.`Id` = @__user_Id_0
    LIMIT 2
) AS `t`
LEFT JOIN `Workouts` AS `w` ON `t`.`Id` = `w`.`UserId`
LEFT JOIN `Cities` AS `c` ON `t`.`Id` = `c`.`UserId`
ORDER BY `t`.`Id`, `w`.`Id`
2025-11-16 19:56:56.475 +03:00 [INF] Executing ObjectResult, writing value of type 'MappyApplication.Models.user.AuthResponse'.
2025-11-16 19:56:56.475 +03:00 [INF] Executed action MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication) in 17.1479ms
2025-11-16 19:56:56.475 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication)'
2025-11-16 19:56:56.475 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:8080/api/v1/auth/refresh-token - 200 null application/json; charset=utf-8 45.902ms
2025-11-16 19:57:11.683 +03:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:8080/api/v1/auth/refresh-token - null null
2025-11-16 19:57:11.684 +03:00 [INF] CORS policy execution successful.
2025-11-16 19:57:11.684 +03:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:8080/api/v1/auth/refresh-token - 204 null null 1.9179ms
2025-11-16 19:57:11.686 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:8080/api/v1/auth/refresh-token - null 0
2025-11-16 19:57:11.687 +03:00 [INF] CORS policy execution successful.
2025-11-16 19:57:11.715 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 19:57:11.717 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication)'
2025-11-16 19:57:11.717 +03:00 [INF] Route matched with {action = "RefreshToken", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.user.AuthResponse] RefreshToken() on controller MappyApplication.Controllers.AuthController (MappyApplication).
2025-11-16 19:57:11.719 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__refreshToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`RefreshToken` = @__refreshToken_0
LIMIT 2
2025-11-16 19:57:11.720 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`FirstName`, `a`.`LastName`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`
FROM `AspNetUsers` AS `a`
WHERE `a`.`Id` = @__p_0
LIMIT 1
2025-11-16 19:57:11.722 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']

        UPDATE TOKENS
        SET Revoked = true, Expired = true
        WHERE UserId = @p0
          AND DeviceId = @p1
          AND Revoked = false
          AND Expired = false
2025-11-16 19:57:11.723 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a0`.`Name`
FROM `AspNetUserRoles` AS `a`
INNER JOIN `AspNetRoles` AS `a0` ON `a`.`RoleId` = `a0`.`Id`
WHERE `a`.`UserId` = @__userId_0
2025-11-16 19:57:11.724 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ClaimType`, `a`.`ClaimValue`, `a`.`UserId`
FROM `AspNetUserClaims` AS `a`
WHERE `a`.`UserId` = @__user_Id_0
2025-11-16 19:57:11.725 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a0`.`Name`
FROM `AspNetUserRoles` AS `a`
INNER JOIN `AspNetRoles` AS `a0` ON `a`.`RoleId` = `a0`.`Id`
WHERE `a`.`UserId` = @__userId_0
2025-11-16 19:57:11.725 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ClaimType`, `a`.`ClaimValue`, `a`.`UserId`
FROM `AspNetUserClaims` AS `a`
WHERE `a`.`UserId` = @__user_Id_0
2025-11-16 19:57:11.730 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (DbType = DateTime), @p2='?' (Size = 4000), @p3='?' (DbType = Boolean), @p4='?' (Size = 4000), @p5='?' (DbType = Boolean), @p6='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO `Tokens` (`AccessToken`, `CreatedAt`, `DeviceId`, `Expired`, `RefreshToken`, `Revoked`, `UserId`)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6);
SELECT `Id`
FROM `Tokens`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();
2025-11-16 19:57:11.730 +03:00 [INF] Added Token MappyApplication.Data.Token
2025-11-16 19:57:11.732 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessFailedCount`, `t`.`ConcurrencyStamp`, `t`.`Email`, `t`.`EmailConfirmed`, `t`.`FirstName`, `t`.`LastName`, `t`.`LockoutEnabled`, `t`.`LockoutEnd`, `t`.`NormalizedEmail`, `t`.`NormalizedUserName`, `t`.`PasswordHash`, `t`.`PhoneNumber`, `t`.`PhoneNumberConfirmed`, `t`.`SecurityStamp`, `t`.`TwoFactorEnabled`, `t`.`UserName`, `w`.`Id`, `w`.`Cadence`, `w`.`CityName`, `w`.`Coords`, `w`.`Date`, `w`.`Distance`, `w`.`Duration`, `w`.`Emoji`, `w`.`Pace`, `w`.`Type`, `w`.`UserId`, `c`.`Id`, `c`.`CityName`, `c`.`Country`, `c`.`Date`, `c`.`Emoji`, `c`.`Lat`, `c`.`Lng`, `c`.`Notes`, `c`.`UserId`
FROM (
    SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`FirstName`, `a`.`LastName`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`
    FROM `AspNetUsers` AS `a`
    WHERE `a`.`Id` = @__user_Id_0
    LIMIT 2
) AS `t`
LEFT JOIN `Workouts` AS `w` ON `t`.`Id` = `w`.`UserId`
LEFT JOIN `Cities` AS `c` ON `t`.`Id` = `c`.`UserId`
ORDER BY `t`.`Id`, `w`.`Id`
2025-11-16 19:57:11.732 +03:00 [INF] Executing ObjectResult, writing value of type 'MappyApplication.Models.user.AuthResponse'.
2025-11-16 19:57:11.732 +03:00 [INF] Executed action MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication) in 14.7595ms
2025-11-16 19:57:11.732 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication)'
2025-11-16 19:57:11.732 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:8080/api/v1/auth/refresh-token - 200 null application/json; charset=utf-8 46.4211ms
2025-11-16 19:57:14.022 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:8080/api/v1/auth/refresh-token - null 0
2025-11-16 19:57:14.027 +03:00 [INF] CORS policy execution successful.
2025-11-16 19:57:14.080 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 19:57:14.080 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication)'
2025-11-16 19:57:14.081 +03:00 [INF] Route matched with {action = "RefreshToken", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.user.AuthResponse] RefreshToken() on controller MappyApplication.Controllers.AuthController (MappyApplication).
2025-11-16 19:57:14.082 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__refreshToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`RefreshToken` = @__refreshToken_0
LIMIT 2
2025-11-16 19:57:14.099 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[@__p_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`FirstName`, `a`.`LastName`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`
FROM `AspNetUsers` AS `a`
WHERE `a`.`Id` = @__p_0
LIMIT 1
2025-11-16 19:57:14.105 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']

        UPDATE TOKENS
        SET Revoked = true, Expired = true
        WHERE UserId = @p0
          AND DeviceId = @p1
          AND Revoked = false
          AND Expired = false
2025-11-16 19:57:14.107 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a0`.`Name`
FROM `AspNetUserRoles` AS `a`
INNER JOIN `AspNetRoles` AS `a0` ON `a`.`RoleId` = `a0`.`Id`
WHERE `a`.`UserId` = @__userId_0
2025-11-16 19:57:14.107 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ClaimType`, `a`.`ClaimValue`, `a`.`UserId`
FROM `AspNetUserClaims` AS `a`
WHERE `a`.`UserId` = @__user_Id_0
2025-11-16 19:57:14.108 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a0`.`Name`
FROM `AspNetUserRoles` AS `a`
INNER JOIN `AspNetRoles` AS `a0` ON `a`.`RoleId` = `a0`.`Id`
WHERE `a`.`UserId` = @__userId_0
2025-11-16 19:57:14.108 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ClaimType`, `a`.`ClaimValue`, `a`.`UserId`
FROM `AspNetUserClaims` AS `a`
WHERE `a`.`UserId` = @__user_Id_0
2025-11-16 19:57:14.110 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (DbType = DateTime), @p2='?' (Size = 4000), @p3='?' (DbType = Boolean), @p4='?' (Size = 4000), @p5='?' (DbType = Boolean), @p6='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO `Tokens` (`AccessToken`, `CreatedAt`, `DeviceId`, `Expired`, `RefreshToken`, `Revoked`, `UserId`)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6);
SELECT `Id`
FROM `Tokens`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();
2025-11-16 19:57:14.113 +03:00 [INF] Added Token MappyApplication.Data.Token
2025-11-16 19:57:14.117 +03:00 [INF] Executed DbCommand (4ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessFailedCount`, `t`.`ConcurrencyStamp`, `t`.`Email`, `t`.`EmailConfirmed`, `t`.`FirstName`, `t`.`LastName`, `t`.`LockoutEnabled`, `t`.`LockoutEnd`, `t`.`NormalizedEmail`, `t`.`NormalizedUserName`, `t`.`PasswordHash`, `t`.`PhoneNumber`, `t`.`PhoneNumberConfirmed`, `t`.`SecurityStamp`, `t`.`TwoFactorEnabled`, `t`.`UserName`, `w`.`Id`, `w`.`Cadence`, `w`.`CityName`, `w`.`Coords`, `w`.`Date`, `w`.`Distance`, `w`.`Duration`, `w`.`Emoji`, `w`.`Pace`, `w`.`Type`, `w`.`UserId`, `c`.`Id`, `c`.`CityName`, `c`.`Country`, `c`.`Date`, `c`.`Emoji`, `c`.`Lat`, `c`.`Lng`, `c`.`Notes`, `c`.`UserId`
FROM (
    SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`FirstName`, `a`.`LastName`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`
    FROM `AspNetUsers` AS `a`
    WHERE `a`.`Id` = @__user_Id_0
    LIMIT 2
) AS `t`
LEFT JOIN `Workouts` AS `w` ON `t`.`Id` = `w`.`UserId`
LEFT JOIN `Cities` AS `c` ON `t`.`Id` = `c`.`UserId`
ORDER BY `t`.`Id`, `w`.`Id`
2025-11-16 19:57:14.117 +03:00 [INF] Executing ObjectResult, writing value of type 'MappyApplication.Models.user.AuthResponse'.
2025-11-16 19:57:14.118 +03:00 [INF] Executed action MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication) in 36.8921ms
2025-11-16 19:57:14.118 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication)'
2025-11-16 19:57:14.118 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:8080/api/v1/auth/refresh-token - 200 null application/json; charset=utf-8 98.8417ms
2025-11-16 19:57:17.194 +03:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:8080/api/v1/auth/refresh-token - null null
2025-11-16 19:57:17.200 +03:00 [INF] CORS policy execution successful.
2025-11-16 19:57:17.201 +03:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:8080/api/v1/auth/refresh-token - 204 null null 8.5303ms
2025-11-16 19:57:17.202 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:8080/api/v1/auth/refresh-token - null 0
2025-11-16 19:57:17.202 +03:00 [INF] CORS policy execution successful.
2025-11-16 19:57:17.236 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 19:57:17.237 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication)'
2025-11-16 19:57:17.237 +03:00 [INF] Route matched with {action = "RefreshToken", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.user.AuthResponse] RefreshToken() on controller MappyApplication.Controllers.AuthController (MappyApplication).
2025-11-16 19:57:17.238 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__refreshToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`RefreshToken` = @__refreshToken_0
LIMIT 2
2025-11-16 19:57:17.242 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`FirstName`, `a`.`LastName`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`
FROM `AspNetUsers` AS `a`
WHERE `a`.`Id` = @__p_0
LIMIT 1
2025-11-16 19:57:17.246 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']

        UPDATE TOKENS
        SET Revoked = true, Expired = true
        WHERE UserId = @p0
          AND DeviceId = @p1
          AND Revoked = false
          AND Expired = false
2025-11-16 19:57:17.247 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a0`.`Name`
FROM `AspNetUserRoles` AS `a`
INNER JOIN `AspNetRoles` AS `a0` ON `a`.`RoleId` = `a0`.`Id`
WHERE `a`.`UserId` = @__userId_0
2025-11-16 19:57:17.247 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ClaimType`, `a`.`ClaimValue`, `a`.`UserId`
FROM `AspNetUserClaims` AS `a`
WHERE `a`.`UserId` = @__user_Id_0
2025-11-16 19:57:17.248 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a0`.`Name`
FROM `AspNetUserRoles` AS `a`
INNER JOIN `AspNetRoles` AS `a0` ON `a`.`RoleId` = `a0`.`Id`
WHERE `a`.`UserId` = @__userId_0
2025-11-16 19:57:17.248 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ClaimType`, `a`.`ClaimValue`, `a`.`UserId`
FROM `AspNetUserClaims` AS `a`
WHERE `a`.`UserId` = @__user_Id_0
2025-11-16 19:57:17.255 +03:00 [INF] Executed DbCommand (5ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (DbType = DateTime), @p2='?' (Size = 4000), @p3='?' (DbType = Boolean), @p4='?' (Size = 4000), @p5='?' (DbType = Boolean), @p6='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO `Tokens` (`AccessToken`, `CreatedAt`, `DeviceId`, `Expired`, `RefreshToken`, `Revoked`, `UserId`)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6);
SELECT `Id`
FROM `Tokens`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();
2025-11-16 19:57:17.256 +03:00 [INF] Added Token MappyApplication.Data.Token
2025-11-16 19:57:17.259 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessFailedCount`, `t`.`ConcurrencyStamp`, `t`.`Email`, `t`.`EmailConfirmed`, `t`.`FirstName`, `t`.`LastName`, `t`.`LockoutEnabled`, `t`.`LockoutEnd`, `t`.`NormalizedEmail`, `t`.`NormalizedUserName`, `t`.`PasswordHash`, `t`.`PhoneNumber`, `t`.`PhoneNumberConfirmed`, `t`.`SecurityStamp`, `t`.`TwoFactorEnabled`, `t`.`UserName`, `w`.`Id`, `w`.`Cadence`, `w`.`CityName`, `w`.`Coords`, `w`.`Date`, `w`.`Distance`, `w`.`Duration`, `w`.`Emoji`, `w`.`Pace`, `w`.`Type`, `w`.`UserId`, `c`.`Id`, `c`.`CityName`, `c`.`Country`, `c`.`Date`, `c`.`Emoji`, `c`.`Lat`, `c`.`Lng`, `c`.`Notes`, `c`.`UserId`
FROM (
    SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`FirstName`, `a`.`LastName`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`
    FROM `AspNetUsers` AS `a`
    WHERE `a`.`Id` = @__user_Id_0
    LIMIT 2
) AS `t`
LEFT JOIN `Workouts` AS `w` ON `t`.`Id` = `w`.`UserId`
LEFT JOIN `Cities` AS `c` ON `t`.`Id` = `c`.`UserId`
ORDER BY `t`.`Id`, `w`.`Id`
2025-11-16 19:57:17.259 +03:00 [INF] Executing ObjectResult, writing value of type 'MappyApplication.Models.user.AuthResponse'.
2025-11-16 19:57:17.259 +03:00 [INF] Executed action MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication) in 22.5422ms
2025-11-16 19:57:17.259 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication)'
2025-11-16 19:57:17.259 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:8080/api/v1/auth/refresh-token - 200 null application/json; charset=utf-8 57.4139ms
2025-11-16 19:57:18.442 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:8080/api/v1/auth/refresh-token - null 0
2025-11-16 19:57:18.443 +03:00 [INF] CORS policy execution successful.
2025-11-16 19:57:18.480 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 19:57:18.483 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication)'
2025-11-16 19:57:18.484 +03:00 [INF] Route matched with {action = "RefreshToken", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.user.AuthResponse] RefreshToken() on controller MappyApplication.Controllers.AuthController (MappyApplication).
2025-11-16 19:57:18.485 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__refreshToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`RefreshToken` = @__refreshToken_0
LIMIT 2
2025-11-16 19:57:18.487 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`FirstName`, `a`.`LastName`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`
FROM `AspNetUsers` AS `a`
WHERE `a`.`Id` = @__p_0
LIMIT 1
2025-11-16 19:57:18.491 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']

        UPDATE TOKENS
        SET Revoked = true, Expired = true
        WHERE UserId = @p0
          AND DeviceId = @p1
          AND Revoked = false
          AND Expired = false
2025-11-16 19:57:18.492 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a0`.`Name`
FROM `AspNetUserRoles` AS `a`
INNER JOIN `AspNetRoles` AS `a0` ON `a`.`RoleId` = `a0`.`Id`
WHERE `a`.`UserId` = @__userId_0
2025-11-16 19:57:18.494 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ClaimType`, `a`.`ClaimValue`, `a`.`UserId`
FROM `AspNetUserClaims` AS `a`
WHERE `a`.`UserId` = @__user_Id_0
2025-11-16 19:57:18.497 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a0`.`Name`
FROM `AspNetUserRoles` AS `a`
INNER JOIN `AspNetRoles` AS `a0` ON `a`.`RoleId` = `a0`.`Id`
WHERE `a`.`UserId` = @__userId_0
2025-11-16 19:57:18.498 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ClaimType`, `a`.`ClaimValue`, `a`.`UserId`
FROM `AspNetUserClaims` AS `a`
WHERE `a`.`UserId` = @__user_Id_0
2025-11-16 19:57:18.502 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (DbType = DateTime), @p2='?' (Size = 4000), @p3='?' (DbType = Boolean), @p4='?' (Size = 4000), @p5='?' (DbType = Boolean), @p6='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO `Tokens` (`AccessToken`, `CreatedAt`, `DeviceId`, `Expired`, `RefreshToken`, `Revoked`, `UserId`)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6);
SELECT `Id`
FROM `Tokens`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();
2025-11-16 19:57:18.503 +03:00 [INF] Added Token MappyApplication.Data.Token
2025-11-16 19:57:18.504 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessFailedCount`, `t`.`ConcurrencyStamp`, `t`.`Email`, `t`.`EmailConfirmed`, `t`.`FirstName`, `t`.`LastName`, `t`.`LockoutEnabled`, `t`.`LockoutEnd`, `t`.`NormalizedEmail`, `t`.`NormalizedUserName`, `t`.`PasswordHash`, `t`.`PhoneNumber`, `t`.`PhoneNumberConfirmed`, `t`.`SecurityStamp`, `t`.`TwoFactorEnabled`, `t`.`UserName`, `w`.`Id`, `w`.`Cadence`, `w`.`CityName`, `w`.`Coords`, `w`.`Date`, `w`.`Distance`, `w`.`Duration`, `w`.`Emoji`, `w`.`Pace`, `w`.`Type`, `w`.`UserId`, `c`.`Id`, `c`.`CityName`, `c`.`Country`, `c`.`Date`, `c`.`Emoji`, `c`.`Lat`, `c`.`Lng`, `c`.`Notes`, `c`.`UserId`
FROM (
    SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`FirstName`, `a`.`LastName`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`
    FROM `AspNetUsers` AS `a`
    WHERE `a`.`Id` = @__user_Id_0
    LIMIT 2
) AS `t`
LEFT JOIN `Workouts` AS `w` ON `t`.`Id` = `w`.`UserId`
LEFT JOIN `Cities` AS `c` ON `t`.`Id` = `c`.`UserId`
ORDER BY `t`.`Id`, `w`.`Id`
2025-11-16 19:57:18.505 +03:00 [INF] Executing ObjectResult, writing value of type 'MappyApplication.Models.user.AuthResponse'.
2025-11-16 19:57:18.506 +03:00 [INF] Executed action MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication) in 22.1422ms
2025-11-16 19:57:18.507 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication)'
2025-11-16 19:57:18.507 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:8080/api/v1/auth/refresh-token - 200 null application/json; charset=utf-8 65.0394ms
2025-11-16 19:57:20.111 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:8080/api/v1/auth/refresh-token - null 0
2025-11-16 19:57:20.122 +03:00 [INF] CORS policy execution successful.
2025-11-16 19:57:20.153 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 19:57:20.154 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication)'
2025-11-16 19:57:20.154 +03:00 [INF] Route matched with {action = "RefreshToken", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.user.AuthResponse] RefreshToken() on controller MappyApplication.Controllers.AuthController (MappyApplication).
2025-11-16 19:57:20.155 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__refreshToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`RefreshToken` = @__refreshToken_0
LIMIT 2
2025-11-16 19:57:20.157 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`FirstName`, `a`.`LastName`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`
FROM `AspNetUsers` AS `a`
WHERE `a`.`Id` = @__p_0
LIMIT 1
2025-11-16 19:57:20.161 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']

        UPDATE TOKENS
        SET Revoked = true, Expired = true
        WHERE UserId = @p0
          AND DeviceId = @p1
          AND Revoked = false
          AND Expired = false
2025-11-16 19:57:20.162 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a0`.`Name`
FROM `AspNetUserRoles` AS `a`
INNER JOIN `AspNetRoles` AS `a0` ON `a`.`RoleId` = `a0`.`Id`
WHERE `a`.`UserId` = @__userId_0
2025-11-16 19:57:20.164 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ClaimType`, `a`.`ClaimValue`, `a`.`UserId`
FROM `AspNetUserClaims` AS `a`
WHERE `a`.`UserId` = @__user_Id_0
2025-11-16 19:57:20.165 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a0`.`Name`
FROM `AspNetUserRoles` AS `a`
INNER JOIN `AspNetRoles` AS `a0` ON `a`.`RoleId` = `a0`.`Id`
WHERE `a`.`UserId` = @__userId_0
2025-11-16 19:57:20.165 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ClaimType`, `a`.`ClaimValue`, `a`.`UserId`
FROM `AspNetUserClaims` AS `a`
WHERE `a`.`UserId` = @__user_Id_0
2025-11-16 19:57:20.169 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (DbType = DateTime), @p2='?' (Size = 4000), @p3='?' (DbType = Boolean), @p4='?' (Size = 4000), @p5='?' (DbType = Boolean), @p6='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO `Tokens` (`AccessToken`, `CreatedAt`, `DeviceId`, `Expired`, `RefreshToken`, `Revoked`, `UserId`)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6);
SELECT `Id`
FROM `Tokens`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();
2025-11-16 19:57:20.169 +03:00 [INF] Added Token MappyApplication.Data.Token
2025-11-16 19:57:20.171 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessFailedCount`, `t`.`ConcurrencyStamp`, `t`.`Email`, `t`.`EmailConfirmed`, `t`.`FirstName`, `t`.`LastName`, `t`.`LockoutEnabled`, `t`.`LockoutEnd`, `t`.`NormalizedEmail`, `t`.`NormalizedUserName`, `t`.`PasswordHash`, `t`.`PhoneNumber`, `t`.`PhoneNumberConfirmed`, `t`.`SecurityStamp`, `t`.`TwoFactorEnabled`, `t`.`UserName`, `w`.`Id`, `w`.`Cadence`, `w`.`CityName`, `w`.`Coords`, `w`.`Date`, `w`.`Distance`, `w`.`Duration`, `w`.`Emoji`, `w`.`Pace`, `w`.`Type`, `w`.`UserId`, `c`.`Id`, `c`.`CityName`, `c`.`Country`, `c`.`Date`, `c`.`Emoji`, `c`.`Lat`, `c`.`Lng`, `c`.`Notes`, `c`.`UserId`
FROM (
    SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`FirstName`, `a`.`LastName`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`
    FROM `AspNetUsers` AS `a`
    WHERE `a`.`Id` = @__user_Id_0
    LIMIT 2
) AS `t`
LEFT JOIN `Workouts` AS `w` ON `t`.`Id` = `w`.`UserId`
LEFT JOIN `Cities` AS `c` ON `t`.`Id` = `c`.`UserId`
ORDER BY `t`.`Id`, `w`.`Id`
2025-11-16 19:57:20.171 +03:00 [INF] Executing ObjectResult, writing value of type 'MappyApplication.Models.user.AuthResponse'.
2025-11-16 19:57:20.171 +03:00 [INF] Executed action MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication) in 17.4212ms
2025-11-16 19:57:20.171 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication)'
2025-11-16 19:57:20.171 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:8080/api/v1/auth/refresh-token - 200 null application/json; charset=utf-8 60.5316ms
2025-11-16 19:57:22.478 +03:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:8080/api/v1/auth/refresh-token - null null
2025-11-16 19:57:22.481 +03:00 [INF] CORS policy execution successful.
2025-11-16 19:57:22.482 +03:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:8080/api/v1/auth/refresh-token - 204 null null 3.992ms
2025-11-16 19:57:22.485 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:8080/api/v1/auth/refresh-token - null 0
2025-11-16 19:57:22.485 +03:00 [INF] CORS policy execution successful.
2025-11-16 19:57:22.520 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 19:57:22.521 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication)'
2025-11-16 19:57:22.521 +03:00 [INF] Route matched with {action = "RefreshToken", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.user.AuthResponse] RefreshToken() on controller MappyApplication.Controllers.AuthController (MappyApplication).
2025-11-16 19:57:22.523 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__refreshToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`RefreshToken` = @__refreshToken_0
LIMIT 2
2025-11-16 19:57:22.525 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`FirstName`, `a`.`LastName`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`
FROM `AspNetUsers` AS `a`
WHERE `a`.`Id` = @__p_0
LIMIT 1
2025-11-16 19:57:22.529 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']

        UPDATE TOKENS
        SET Revoked = true, Expired = true
        WHERE UserId = @p0
          AND DeviceId = @p1
          AND Revoked = false
          AND Expired = false
2025-11-16 19:57:22.530 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a0`.`Name`
FROM `AspNetUserRoles` AS `a`
INNER JOIN `AspNetRoles` AS `a0` ON `a`.`RoleId` = `a0`.`Id`
WHERE `a`.`UserId` = @__userId_0
2025-11-16 19:57:22.531 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ClaimType`, `a`.`ClaimValue`, `a`.`UserId`
FROM `AspNetUserClaims` AS `a`
WHERE `a`.`UserId` = @__user_Id_0
2025-11-16 19:57:22.532 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a0`.`Name`
FROM `AspNetUserRoles` AS `a`
INNER JOIN `AspNetRoles` AS `a0` ON `a`.`RoleId` = `a0`.`Id`
WHERE `a`.`UserId` = @__userId_0
2025-11-16 19:57:22.532 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ClaimType`, `a`.`ClaimValue`, `a`.`UserId`
FROM `AspNetUserClaims` AS `a`
WHERE `a`.`UserId` = @__user_Id_0
2025-11-16 19:57:22.535 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (DbType = DateTime), @p2='?' (Size = 4000), @p3='?' (DbType = Boolean), @p4='?' (Size = 4000), @p5='?' (DbType = Boolean), @p6='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO `Tokens` (`AccessToken`, `CreatedAt`, `DeviceId`, `Expired`, `RefreshToken`, `Revoked`, `UserId`)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6);
SELECT `Id`
FROM `Tokens`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();
2025-11-16 19:57:22.535 +03:00 [INF] Added Token MappyApplication.Data.Token
2025-11-16 19:57:22.536 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessFailedCount`, `t`.`ConcurrencyStamp`, `t`.`Email`, `t`.`EmailConfirmed`, `t`.`FirstName`, `t`.`LastName`, `t`.`LockoutEnabled`, `t`.`LockoutEnd`, `t`.`NormalizedEmail`, `t`.`NormalizedUserName`, `t`.`PasswordHash`, `t`.`PhoneNumber`, `t`.`PhoneNumberConfirmed`, `t`.`SecurityStamp`, `t`.`TwoFactorEnabled`, `t`.`UserName`, `w`.`Id`, `w`.`Cadence`, `w`.`CityName`, `w`.`Coords`, `w`.`Date`, `w`.`Distance`, `w`.`Duration`, `w`.`Emoji`, `w`.`Pace`, `w`.`Type`, `w`.`UserId`, `c`.`Id`, `c`.`CityName`, `c`.`Country`, `c`.`Date`, `c`.`Emoji`, `c`.`Lat`, `c`.`Lng`, `c`.`Notes`, `c`.`UserId`
FROM (
    SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`FirstName`, `a`.`LastName`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`
    FROM `AspNetUsers` AS `a`
    WHERE `a`.`Id` = @__user_Id_0
    LIMIT 2
) AS `t`
LEFT JOIN `Workouts` AS `w` ON `t`.`Id` = `w`.`UserId`
LEFT JOIN `Cities` AS `c` ON `t`.`Id` = `c`.`UserId`
ORDER BY `t`.`Id`, `w`.`Id`
2025-11-16 19:57:22.536 +03:00 [INF] Executing ObjectResult, writing value of type 'MappyApplication.Models.user.AuthResponse'.
2025-11-16 19:57:22.537 +03:00 [INF] Executed action MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication) in 15.3945ms
2025-11-16 19:57:22.537 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication)'
2025-11-16 19:57:22.537 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:8080/api/v1/auth/refresh-token - 200 null application/json; charset=utf-8 51.9095ms
2025-11-16 19:57:28.092 +03:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:8080/api/v1/auth/refresh-token - null null
2025-11-16 19:57:28.094 +03:00 [INF] CORS policy execution successful.
2025-11-16 19:57:28.095 +03:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:8080/api/v1/auth/refresh-token - 204 null null 2.87ms
2025-11-16 19:57:28.095 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:8080/api/v1/auth/refresh-token - null 0
2025-11-16 19:57:28.096 +03:00 [INF] CORS policy execution successful.
2025-11-16 19:57:28.129 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 19:57:28.130 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication)'
2025-11-16 19:57:28.131 +03:00 [INF] Route matched with {action = "RefreshToken", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.user.AuthResponse] RefreshToken() on controller MappyApplication.Controllers.AuthController (MappyApplication).
2025-11-16 19:57:28.133 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__refreshToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`RefreshToken` = @__refreshToken_0
LIMIT 2
2025-11-16 19:57:28.134 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`FirstName`, `a`.`LastName`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`
FROM `AspNetUsers` AS `a`
WHERE `a`.`Id` = @__p_0
LIMIT 1
2025-11-16 19:57:28.138 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']

        UPDATE TOKENS
        SET Revoked = true, Expired = true
        WHERE UserId = @p0
          AND DeviceId = @p1
          AND Revoked = false
          AND Expired = false
2025-11-16 19:57:28.140 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a0`.`Name`
FROM `AspNetUserRoles` AS `a`
INNER JOIN `AspNetRoles` AS `a0` ON `a`.`RoleId` = `a0`.`Id`
WHERE `a`.`UserId` = @__userId_0
2025-11-16 19:57:28.140 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ClaimType`, `a`.`ClaimValue`, `a`.`UserId`
FROM `AspNetUserClaims` AS `a`
WHERE `a`.`UserId` = @__user_Id_0
2025-11-16 19:57:28.141 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a0`.`Name`
FROM `AspNetUserRoles` AS `a`
INNER JOIN `AspNetRoles` AS `a0` ON `a`.`RoleId` = `a0`.`Id`
WHERE `a`.`UserId` = @__userId_0
2025-11-16 19:57:28.141 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ClaimType`, `a`.`ClaimValue`, `a`.`UserId`
FROM `AspNetUserClaims` AS `a`
WHERE `a`.`UserId` = @__user_Id_0
2025-11-16 19:57:28.143 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (DbType = DateTime), @p2='?' (Size = 4000), @p3='?' (DbType = Boolean), @p4='?' (Size = 4000), @p5='?' (DbType = Boolean), @p6='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO `Tokens` (`AccessToken`, `CreatedAt`, `DeviceId`, `Expired`, `RefreshToken`, `Revoked`, `UserId`)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6);
SELECT `Id`
FROM `Tokens`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();
2025-11-16 19:57:28.143 +03:00 [INF] Added Token MappyApplication.Data.Token
2025-11-16 19:57:28.147 +03:00 [INF] Executed DbCommand (4ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessFailedCount`, `t`.`ConcurrencyStamp`, `t`.`Email`, `t`.`EmailConfirmed`, `t`.`FirstName`, `t`.`LastName`, `t`.`LockoutEnabled`, `t`.`LockoutEnd`, `t`.`NormalizedEmail`, `t`.`NormalizedUserName`, `t`.`PasswordHash`, `t`.`PhoneNumber`, `t`.`PhoneNumberConfirmed`, `t`.`SecurityStamp`, `t`.`TwoFactorEnabled`, `t`.`UserName`, `w`.`Id`, `w`.`Cadence`, `w`.`CityName`, `w`.`Coords`, `w`.`Date`, `w`.`Distance`, `w`.`Duration`, `w`.`Emoji`, `w`.`Pace`, `w`.`Type`, `w`.`UserId`, `c`.`Id`, `c`.`CityName`, `c`.`Country`, `c`.`Date`, `c`.`Emoji`, `c`.`Lat`, `c`.`Lng`, `c`.`Notes`, `c`.`UserId`
FROM (
    SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`FirstName`, `a`.`LastName`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`
    FROM `AspNetUsers` AS `a`
    WHERE `a`.`Id` = @__user_Id_0
    LIMIT 2
) AS `t`
LEFT JOIN `Workouts` AS `w` ON `t`.`Id` = `w`.`UserId`
LEFT JOIN `Cities` AS `c` ON `t`.`Id` = `c`.`UserId`
ORDER BY `t`.`Id`, `w`.`Id`
2025-11-16 19:57:28.149 +03:00 [INF] Executing ObjectResult, writing value of type 'MappyApplication.Models.user.AuthResponse'.
2025-11-16 19:57:28.150 +03:00 [INF] Executed action MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication) in 18.864ms
2025-11-16 19:57:28.150 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication)'
2025-11-16 19:57:28.150 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:8080/api/v1/auth/refresh-token - 200 null application/json; charset=utf-8 54.143ms
2025-11-16 19:57:31.494 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:8080/api/v1/auth/refresh-token - null 0
2025-11-16 19:57:31.495 +03:00 [INF] CORS policy execution successful.
2025-11-16 19:57:31.521 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 19:57:31.522 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication)'
2025-11-16 19:57:31.522 +03:00 [INF] Route matched with {action = "RefreshToken", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.user.AuthResponse] RefreshToken() on controller MappyApplication.Controllers.AuthController (MappyApplication).
2025-11-16 19:57:31.523 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__refreshToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`RefreshToken` = @__refreshToken_0
LIMIT 2
2025-11-16 19:57:31.524 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`FirstName`, `a`.`LastName`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`
FROM `AspNetUsers` AS `a`
WHERE `a`.`Id` = @__p_0
LIMIT 1
2025-11-16 19:57:31.530 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']

        UPDATE TOKENS
        SET Revoked = true, Expired = true
        WHERE UserId = @p0
          AND DeviceId = @p1
          AND Revoked = false
          AND Expired = false
2025-11-16 19:57:31.533 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a0`.`Name`
FROM `AspNetUserRoles` AS `a`
INNER JOIN `AspNetRoles` AS `a0` ON `a`.`RoleId` = `a0`.`Id`
WHERE `a`.`UserId` = @__userId_0
2025-11-16 19:57:31.534 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ClaimType`, `a`.`ClaimValue`, `a`.`UserId`
FROM `AspNetUserClaims` AS `a`
WHERE `a`.`UserId` = @__user_Id_0
2025-11-16 19:57:31.535 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a0`.`Name`
FROM `AspNetUserRoles` AS `a`
INNER JOIN `AspNetRoles` AS `a0` ON `a`.`RoleId` = `a0`.`Id`
WHERE `a`.`UserId` = @__userId_0
2025-11-16 19:57:31.535 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ClaimType`, `a`.`ClaimValue`, `a`.`UserId`
FROM `AspNetUserClaims` AS `a`
WHERE `a`.`UserId` = @__user_Id_0
2025-11-16 19:57:31.537 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (DbType = DateTime), @p2='?' (Size = 4000), @p3='?' (DbType = Boolean), @p4='?' (Size = 4000), @p5='?' (DbType = Boolean), @p6='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO `Tokens` (`AccessToken`, `CreatedAt`, `DeviceId`, `Expired`, `RefreshToken`, `Revoked`, `UserId`)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6);
SELECT `Id`
FROM `Tokens`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();
2025-11-16 19:57:31.538 +03:00 [INF] Added Token MappyApplication.Data.Token
2025-11-16 19:57:31.539 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessFailedCount`, `t`.`ConcurrencyStamp`, `t`.`Email`, `t`.`EmailConfirmed`, `t`.`FirstName`, `t`.`LastName`, `t`.`LockoutEnabled`, `t`.`LockoutEnd`, `t`.`NormalizedEmail`, `t`.`NormalizedUserName`, `t`.`PasswordHash`, `t`.`PhoneNumber`, `t`.`PhoneNumberConfirmed`, `t`.`SecurityStamp`, `t`.`TwoFactorEnabled`, `t`.`UserName`, `w`.`Id`, `w`.`Cadence`, `w`.`CityName`, `w`.`Coords`, `w`.`Date`, `w`.`Distance`, `w`.`Duration`, `w`.`Emoji`, `w`.`Pace`, `w`.`Type`, `w`.`UserId`, `c`.`Id`, `c`.`CityName`, `c`.`Country`, `c`.`Date`, `c`.`Emoji`, `c`.`Lat`, `c`.`Lng`, `c`.`Notes`, `c`.`UserId`
FROM (
    SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`FirstName`, `a`.`LastName`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`
    FROM `AspNetUsers` AS `a`
    WHERE `a`.`Id` = @__user_Id_0
    LIMIT 2
) AS `t`
LEFT JOIN `Workouts` AS `w` ON `t`.`Id` = `w`.`UserId`
LEFT JOIN `Cities` AS `c` ON `t`.`Id` = `c`.`UserId`
ORDER BY `t`.`Id`, `w`.`Id`
2025-11-16 19:57:31.539 +03:00 [INF] Executing ObjectResult, writing value of type 'MappyApplication.Models.user.AuthResponse'.
2025-11-16 19:57:31.539 +03:00 [INF] Executed action MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication) in 17.198ms
2025-11-16 19:57:31.539 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication)'
2025-11-16 19:57:31.539 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:8080/api/v1/auth/refresh-token - 200 null application/json; charset=utf-8 45.9516ms
2025-11-16 19:57:37.828 +03:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:8080/api/v1/auth/refresh-token - null null
2025-11-16 19:57:37.830 +03:00 [INF] CORS policy execution successful.
2025-11-16 19:57:37.832 +03:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:8080/api/v1/auth/refresh-token - 204 null null 3.4757ms
2025-11-16 19:57:37.833 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:8080/api/v1/auth/refresh-token - null 0
2025-11-16 19:57:37.833 +03:00 [INF] CORS policy execution successful.
2025-11-16 19:57:37.858 +03:00 [INF] Executed DbCommand (5ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 19:57:37.859 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication)'
2025-11-16 19:57:37.859 +03:00 [INF] Route matched with {action = "RefreshToken", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.user.AuthResponse] RefreshToken() on controller MappyApplication.Controllers.AuthController (MappyApplication).
2025-11-16 19:57:37.860 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__refreshToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`RefreshToken` = @__refreshToken_0
LIMIT 2
2025-11-16 19:57:37.861 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`FirstName`, `a`.`LastName`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`
FROM `AspNetUsers` AS `a`
WHERE `a`.`Id` = @__p_0
LIMIT 1
2025-11-16 19:57:37.865 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']

        UPDATE TOKENS
        SET Revoked = true, Expired = true
        WHERE UserId = @p0
          AND DeviceId = @p1
          AND Revoked = false
          AND Expired = false
2025-11-16 19:57:37.866 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a0`.`Name`
FROM `AspNetUserRoles` AS `a`
INNER JOIN `AspNetRoles` AS `a0` ON `a`.`RoleId` = `a0`.`Id`
WHERE `a`.`UserId` = @__userId_0
2025-11-16 19:57:37.866 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ClaimType`, `a`.`ClaimValue`, `a`.`UserId`
FROM `AspNetUserClaims` AS `a`
WHERE `a`.`UserId` = @__user_Id_0
2025-11-16 19:57:37.867 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a0`.`Name`
FROM `AspNetUserRoles` AS `a`
INNER JOIN `AspNetRoles` AS `a0` ON `a`.`RoleId` = `a0`.`Id`
WHERE `a`.`UserId` = @__userId_0
2025-11-16 19:57:37.868 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ClaimType`, `a`.`ClaimValue`, `a`.`UserId`
FROM `AspNetUserClaims` AS `a`
WHERE `a`.`UserId` = @__user_Id_0
2025-11-16 19:57:37.871 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (DbType = DateTime), @p2='?' (Size = 4000), @p3='?' (DbType = Boolean), @p4='?' (Size = 4000), @p5='?' (DbType = Boolean), @p6='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO `Tokens` (`AccessToken`, `CreatedAt`, `DeviceId`, `Expired`, `RefreshToken`, `Revoked`, `UserId`)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6);
SELECT `Id`
FROM `Tokens`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();
2025-11-16 19:57:37.871 +03:00 [INF] Added Token MappyApplication.Data.Token
2025-11-16 19:57:37.873 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessFailedCount`, `t`.`ConcurrencyStamp`, `t`.`Email`, `t`.`EmailConfirmed`, `t`.`FirstName`, `t`.`LastName`, `t`.`LockoutEnabled`, `t`.`LockoutEnd`, `t`.`NormalizedEmail`, `t`.`NormalizedUserName`, `t`.`PasswordHash`, `t`.`PhoneNumber`, `t`.`PhoneNumberConfirmed`, `t`.`SecurityStamp`, `t`.`TwoFactorEnabled`, `t`.`UserName`, `w`.`Id`, `w`.`Cadence`, `w`.`CityName`, `w`.`Coords`, `w`.`Date`, `w`.`Distance`, `w`.`Duration`, `w`.`Emoji`, `w`.`Pace`, `w`.`Type`, `w`.`UserId`, `c`.`Id`, `c`.`CityName`, `c`.`Country`, `c`.`Date`, `c`.`Emoji`, `c`.`Lat`, `c`.`Lng`, `c`.`Notes`, `c`.`UserId`
FROM (
    SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`FirstName`, `a`.`LastName`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`
    FROM `AspNetUsers` AS `a`
    WHERE `a`.`Id` = @__user_Id_0
    LIMIT 2
) AS `t`
LEFT JOIN `Workouts` AS `w` ON `t`.`Id` = `w`.`UserId`
LEFT JOIN `Cities` AS `c` ON `t`.`Id` = `c`.`UserId`
ORDER BY `t`.`Id`, `w`.`Id`
2025-11-16 19:57:37.873 +03:00 [INF] Executing ObjectResult, writing value of type 'MappyApplication.Models.user.AuthResponse'.
2025-11-16 19:57:37.873 +03:00 [INF] Executed action MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication) in 14.116ms
2025-11-16 19:57:37.873 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication)'
2025-11-16 19:57:37.873 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:8080/api/v1/auth/refresh-token - 200 null application/json; charset=utf-8 39.9935ms
2025-11-16 19:57:42.403 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:8080/api/v1/auth/refresh-token - null 0
2025-11-16 19:57:42.406 +03:00 [INF] CORS policy execution successful.
2025-11-16 19:57:42.433 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 19:57:42.434 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication)'
2025-11-16 19:57:42.434 +03:00 [INF] Route matched with {action = "RefreshToken", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.user.AuthResponse] RefreshToken() on controller MappyApplication.Controllers.AuthController (MappyApplication).
2025-11-16 19:57:42.436 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__refreshToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`RefreshToken` = @__refreshToken_0
LIMIT 2
2025-11-16 19:57:42.439 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`FirstName`, `a`.`LastName`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`
FROM `AspNetUsers` AS `a`
WHERE `a`.`Id` = @__p_0
LIMIT 1
2025-11-16 19:57:42.444 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']

        UPDATE TOKENS
        SET Revoked = true, Expired = true
        WHERE UserId = @p0
          AND DeviceId = @p1
          AND Revoked = false
          AND Expired = false
2025-11-16 19:57:42.445 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a0`.`Name`
FROM `AspNetUserRoles` AS `a`
INNER JOIN `AspNetRoles` AS `a0` ON `a`.`RoleId` = `a0`.`Id`
WHERE `a`.`UserId` = @__userId_0
2025-11-16 19:57:42.446 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ClaimType`, `a`.`ClaimValue`, `a`.`UserId`
FROM `AspNetUserClaims` AS `a`
WHERE `a`.`UserId` = @__user_Id_0
2025-11-16 19:57:42.446 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a0`.`Name`
FROM `AspNetUserRoles` AS `a`
INNER JOIN `AspNetRoles` AS `a0` ON `a`.`RoleId` = `a0`.`Id`
WHERE `a`.`UserId` = @__userId_0
2025-11-16 19:57:42.446 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ClaimType`, `a`.`ClaimValue`, `a`.`UserId`
FROM `AspNetUserClaims` AS `a`
WHERE `a`.`UserId` = @__user_Id_0
2025-11-16 19:57:42.449 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (DbType = DateTime), @p2='?' (Size = 4000), @p3='?' (DbType = Boolean), @p4='?' (Size = 4000), @p5='?' (DbType = Boolean), @p6='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO `Tokens` (`AccessToken`, `CreatedAt`, `DeviceId`, `Expired`, `RefreshToken`, `Revoked`, `UserId`)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6);
SELECT `Id`
FROM `Tokens`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();
2025-11-16 19:57:42.450 +03:00 [INF] Added Token MappyApplication.Data.Token
2025-11-16 19:57:42.451 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessFailedCount`, `t`.`ConcurrencyStamp`, `t`.`Email`, `t`.`EmailConfirmed`, `t`.`FirstName`, `t`.`LastName`, `t`.`LockoutEnabled`, `t`.`LockoutEnd`, `t`.`NormalizedEmail`, `t`.`NormalizedUserName`, `t`.`PasswordHash`, `t`.`PhoneNumber`, `t`.`PhoneNumberConfirmed`, `t`.`SecurityStamp`, `t`.`TwoFactorEnabled`, `t`.`UserName`, `w`.`Id`, `w`.`Cadence`, `w`.`CityName`, `w`.`Coords`, `w`.`Date`, `w`.`Distance`, `w`.`Duration`, `w`.`Emoji`, `w`.`Pace`, `w`.`Type`, `w`.`UserId`, `c`.`Id`, `c`.`CityName`, `c`.`Country`, `c`.`Date`, `c`.`Emoji`, `c`.`Lat`, `c`.`Lng`, `c`.`Notes`, `c`.`UserId`
FROM (
    SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`FirstName`, `a`.`LastName`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`
    FROM `AspNetUsers` AS `a`
    WHERE `a`.`Id` = @__user_Id_0
    LIMIT 2
) AS `t`
LEFT JOIN `Workouts` AS `w` ON `t`.`Id` = `w`.`UserId`
LEFT JOIN `Cities` AS `c` ON `t`.`Id` = `c`.`UserId`
ORDER BY `t`.`Id`, `w`.`Id`
2025-11-16 19:57:42.451 +03:00 [INF] Executing ObjectResult, writing value of type 'MappyApplication.Models.user.AuthResponse'.
2025-11-16 19:57:42.451 +03:00 [INF] Executed action MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication) in 17.033ms
2025-11-16 19:57:42.451 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication)'
2025-11-16 19:57:42.451 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:8080/api/v1/auth/refresh-token - 200 null application/json; charset=utf-8 50.859ms
2025-11-16 19:57:43.355 +03:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:8080/api/v1/auth/refresh-token - null null
2025-11-16 19:57:43.357 +03:00 [INF] CORS policy execution successful.
2025-11-16 19:57:43.357 +03:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:8080/api/v1/auth/refresh-token - 204 null null 2.0585ms
2025-11-16 19:57:43.358 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:8080/api/v1/auth/refresh-token - null 0
2025-11-16 19:57:43.358 +03:00 [INF] CORS policy execution successful.
2025-11-16 19:57:43.384 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 19:57:43.385 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication)'
2025-11-16 19:57:43.385 +03:00 [INF] Route matched with {action = "RefreshToken", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.user.AuthResponse] RefreshToken() on controller MappyApplication.Controllers.AuthController (MappyApplication).
2025-11-16 19:57:43.386 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__refreshToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`RefreshToken` = @__refreshToken_0
LIMIT 2
2025-11-16 19:57:43.387 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`FirstName`, `a`.`LastName`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`
FROM `AspNetUsers` AS `a`
WHERE `a`.`Id` = @__p_0
LIMIT 1
2025-11-16 19:57:43.391 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']

        UPDATE TOKENS
        SET Revoked = true, Expired = true
        WHERE UserId = @p0
          AND DeviceId = @p1
          AND Revoked = false
          AND Expired = false
2025-11-16 19:57:43.392 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a0`.`Name`
FROM `AspNetUserRoles` AS `a`
INNER JOIN `AspNetRoles` AS `a0` ON `a`.`RoleId` = `a0`.`Id`
WHERE `a`.`UserId` = @__userId_0
2025-11-16 19:57:43.393 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ClaimType`, `a`.`ClaimValue`, `a`.`UserId`
FROM `AspNetUserClaims` AS `a`
WHERE `a`.`UserId` = @__user_Id_0
2025-11-16 19:57:43.393 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a0`.`Name`
FROM `AspNetUserRoles` AS `a`
INNER JOIN `AspNetRoles` AS `a0` ON `a`.`RoleId` = `a0`.`Id`
WHERE `a`.`UserId` = @__userId_0
2025-11-16 19:57:43.394 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ClaimType`, `a`.`ClaimValue`, `a`.`UserId`
FROM `AspNetUserClaims` AS `a`
WHERE `a`.`UserId` = @__user_Id_0
2025-11-16 19:57:43.396 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (DbType = DateTime), @p2='?' (Size = 4000), @p3='?' (DbType = Boolean), @p4='?' (Size = 4000), @p5='?' (DbType = Boolean), @p6='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO `Tokens` (`AccessToken`, `CreatedAt`, `DeviceId`, `Expired`, `RefreshToken`, `Revoked`, `UserId`)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6);
SELECT `Id`
FROM `Tokens`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();
2025-11-16 19:57:43.396 +03:00 [INF] Added Token MappyApplication.Data.Token
2025-11-16 19:57:43.398 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessFailedCount`, `t`.`ConcurrencyStamp`, `t`.`Email`, `t`.`EmailConfirmed`, `t`.`FirstName`, `t`.`LastName`, `t`.`LockoutEnabled`, `t`.`LockoutEnd`, `t`.`NormalizedEmail`, `t`.`NormalizedUserName`, `t`.`PasswordHash`, `t`.`PhoneNumber`, `t`.`PhoneNumberConfirmed`, `t`.`SecurityStamp`, `t`.`TwoFactorEnabled`, `t`.`UserName`, `w`.`Id`, `w`.`Cadence`, `w`.`CityName`, `w`.`Coords`, `w`.`Date`, `w`.`Distance`, `w`.`Duration`, `w`.`Emoji`, `w`.`Pace`, `w`.`Type`, `w`.`UserId`, `c`.`Id`, `c`.`CityName`, `c`.`Country`, `c`.`Date`, `c`.`Emoji`, `c`.`Lat`, `c`.`Lng`, `c`.`Notes`, `c`.`UserId`
FROM (
    SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`FirstName`, `a`.`LastName`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`
    FROM `AspNetUsers` AS `a`
    WHERE `a`.`Id` = @__user_Id_0
    LIMIT 2
) AS `t`
LEFT JOIN `Workouts` AS `w` ON `t`.`Id` = `w`.`UserId`
LEFT JOIN `Cities` AS `c` ON `t`.`Id` = `c`.`UserId`
ORDER BY `t`.`Id`, `w`.`Id`
2025-11-16 19:57:43.398 +03:00 [INF] Executing ObjectResult, writing value of type 'MappyApplication.Models.user.AuthResponse'.
2025-11-16 19:57:43.398 +03:00 [INF] Executed action MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication) in 13.3483ms
2025-11-16 19:57:43.398 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication)'
2025-11-16 19:57:43.398 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:8080/api/v1/auth/refresh-token - 200 null application/json; charset=utf-8 40.6378ms
2025-11-16 19:57:50.847 +03:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:8080/api/v1/auth/refresh-token - null null
2025-11-16 19:57:50.849 +03:00 [INF] CORS policy execution successful.
2025-11-16 19:57:50.849 +03:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:8080/api/v1/auth/refresh-token - 204 null null 1.805ms
2025-11-16 19:57:50.852 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:8080/api/v1/auth/refresh-token - null 0
2025-11-16 19:57:50.852 +03:00 [INF] CORS policy execution successful.
2025-11-16 19:57:50.881 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 19:57:50.881 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication)'
2025-11-16 19:57:50.881 +03:00 [INF] Route matched with {action = "RefreshToken", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.user.AuthResponse] RefreshToken() on controller MappyApplication.Controllers.AuthController (MappyApplication).
2025-11-16 19:57:50.883 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__refreshToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`RefreshToken` = @__refreshToken_0
LIMIT 2
2025-11-16 19:57:50.885 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`FirstName`, `a`.`LastName`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`
FROM `AspNetUsers` AS `a`
WHERE `a`.`Id` = @__p_0
LIMIT 1
2025-11-16 19:57:50.890 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']

        UPDATE TOKENS
        SET Revoked = true, Expired = true
        WHERE UserId = @p0
          AND DeviceId = @p1
          AND Revoked = false
          AND Expired = false
2025-11-16 19:57:50.891 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a0`.`Name`
FROM `AspNetUserRoles` AS `a`
INNER JOIN `AspNetRoles` AS `a0` ON `a`.`RoleId` = `a0`.`Id`
WHERE `a`.`UserId` = @__userId_0
2025-11-16 19:57:50.891 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ClaimType`, `a`.`ClaimValue`, `a`.`UserId`
FROM `AspNetUserClaims` AS `a`
WHERE `a`.`UserId` = @__user_Id_0
2025-11-16 19:57:50.892 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a0`.`Name`
FROM `AspNetUserRoles` AS `a`
INNER JOIN `AspNetRoles` AS `a0` ON `a`.`RoleId` = `a0`.`Id`
WHERE `a`.`UserId` = @__userId_0
2025-11-16 19:57:50.892 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ClaimType`, `a`.`ClaimValue`, `a`.`UserId`
FROM `AspNetUserClaims` AS `a`
WHERE `a`.`UserId` = @__user_Id_0
2025-11-16 19:57:50.894 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (DbType = DateTime), @p2='?' (Size = 4000), @p3='?' (DbType = Boolean), @p4='?' (Size = 4000), @p5='?' (DbType = Boolean), @p6='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO `Tokens` (`AccessToken`, `CreatedAt`, `DeviceId`, `Expired`, `RefreshToken`, `Revoked`, `UserId`)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6);
SELECT `Id`
FROM `Tokens`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();
2025-11-16 19:57:50.894 +03:00 [INF] Added Token MappyApplication.Data.Token
2025-11-16 19:57:50.895 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessFailedCount`, `t`.`ConcurrencyStamp`, `t`.`Email`, `t`.`EmailConfirmed`, `t`.`FirstName`, `t`.`LastName`, `t`.`LockoutEnabled`, `t`.`LockoutEnd`, `t`.`NormalizedEmail`, `t`.`NormalizedUserName`, `t`.`PasswordHash`, `t`.`PhoneNumber`, `t`.`PhoneNumberConfirmed`, `t`.`SecurityStamp`, `t`.`TwoFactorEnabled`, `t`.`UserName`, `w`.`Id`, `w`.`Cadence`, `w`.`CityName`, `w`.`Coords`, `w`.`Date`, `w`.`Distance`, `w`.`Duration`, `w`.`Emoji`, `w`.`Pace`, `w`.`Type`, `w`.`UserId`, `c`.`Id`, `c`.`CityName`, `c`.`Country`, `c`.`Date`, `c`.`Emoji`, `c`.`Lat`, `c`.`Lng`, `c`.`Notes`, `c`.`UserId`
FROM (
    SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`FirstName`, `a`.`LastName`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`
    FROM `AspNetUsers` AS `a`
    WHERE `a`.`Id` = @__user_Id_0
    LIMIT 2
) AS `t`
LEFT JOIN `Workouts` AS `w` ON `t`.`Id` = `w`.`UserId`
LEFT JOIN `Cities` AS `c` ON `t`.`Id` = `c`.`UserId`
ORDER BY `t`.`Id`, `w`.`Id`
2025-11-16 19:57:50.895 +03:00 [INF] Executing ObjectResult, writing value of type 'MappyApplication.Models.user.AuthResponse'.
2025-11-16 19:57:50.896 +03:00 [INF] Executed action MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication) in 14.4777ms
2025-11-16 19:57:50.896 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication)'
2025-11-16 19:57:50.896 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:8080/api/v1/auth/refresh-token - 200 null application/json; charset=utf-8 44.1454ms
2025-11-16 19:57:54.483 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:8080/api/v1/auth/refresh-token - null 0
2025-11-16 19:57:54.487 +03:00 [INF] CORS policy execution successful.
2025-11-16 19:57:54.517 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 19:57:54.521 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication)'
2025-11-16 19:57:54.522 +03:00 [INF] Route matched with {action = "RefreshToken", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.user.AuthResponse] RefreshToken() on controller MappyApplication.Controllers.AuthController (MappyApplication).
2025-11-16 19:57:54.524 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__refreshToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`RefreshToken` = @__refreshToken_0
LIMIT 2
2025-11-16 19:57:54.526 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`FirstName`, `a`.`LastName`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`
FROM `AspNetUsers` AS `a`
WHERE `a`.`Id` = @__p_0
LIMIT 1
2025-11-16 19:57:54.529 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']

        UPDATE TOKENS
        SET Revoked = true, Expired = true
        WHERE UserId = @p0
          AND DeviceId = @p1
          AND Revoked = false
          AND Expired = false
2025-11-16 19:57:54.531 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a0`.`Name`
FROM `AspNetUserRoles` AS `a`
INNER JOIN `AspNetRoles` AS `a0` ON `a`.`RoleId` = `a0`.`Id`
WHERE `a`.`UserId` = @__userId_0
2025-11-16 19:57:54.532 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ClaimType`, `a`.`ClaimValue`, `a`.`UserId`
FROM `AspNetUserClaims` AS `a`
WHERE `a`.`UserId` = @__user_Id_0
2025-11-16 19:57:54.532 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a0`.`Name`
FROM `AspNetUserRoles` AS `a`
INNER JOIN `AspNetRoles` AS `a0` ON `a`.`RoleId` = `a0`.`Id`
WHERE `a`.`UserId` = @__userId_0
2025-11-16 19:57:54.533 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ClaimType`, `a`.`ClaimValue`, `a`.`UserId`
FROM `AspNetUserClaims` AS `a`
WHERE `a`.`UserId` = @__user_Id_0
2025-11-16 19:57:54.535 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (DbType = DateTime), @p2='?' (Size = 4000), @p3='?' (DbType = Boolean), @p4='?' (Size = 4000), @p5='?' (DbType = Boolean), @p6='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO `Tokens` (`AccessToken`, `CreatedAt`, `DeviceId`, `Expired`, `RefreshToken`, `Revoked`, `UserId`)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6);
SELECT `Id`
FROM `Tokens`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();
2025-11-16 19:57:54.535 +03:00 [INF] Added Token MappyApplication.Data.Token
2025-11-16 19:57:54.537 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessFailedCount`, `t`.`ConcurrencyStamp`, `t`.`Email`, `t`.`EmailConfirmed`, `t`.`FirstName`, `t`.`LastName`, `t`.`LockoutEnabled`, `t`.`LockoutEnd`, `t`.`NormalizedEmail`, `t`.`NormalizedUserName`, `t`.`PasswordHash`, `t`.`PhoneNumber`, `t`.`PhoneNumberConfirmed`, `t`.`SecurityStamp`, `t`.`TwoFactorEnabled`, `t`.`UserName`, `w`.`Id`, `w`.`Cadence`, `w`.`CityName`, `w`.`Coords`, `w`.`Date`, `w`.`Distance`, `w`.`Duration`, `w`.`Emoji`, `w`.`Pace`, `w`.`Type`, `w`.`UserId`, `c`.`Id`, `c`.`CityName`, `c`.`Country`, `c`.`Date`, `c`.`Emoji`, `c`.`Lat`, `c`.`Lng`, `c`.`Notes`, `c`.`UserId`
FROM (
    SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`FirstName`, `a`.`LastName`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`
    FROM `AspNetUsers` AS `a`
    WHERE `a`.`Id` = @__user_Id_0
    LIMIT 2
) AS `t`
LEFT JOIN `Workouts` AS `w` ON `t`.`Id` = `w`.`UserId`
LEFT JOIN `Cities` AS `c` ON `t`.`Id` = `c`.`UserId`
ORDER BY `t`.`Id`, `w`.`Id`
2025-11-16 19:57:54.537 +03:00 [INF] Executing ObjectResult, writing value of type 'MappyApplication.Models.user.AuthResponse'.
2025-11-16 19:57:54.537 +03:00 [INF] Executed action MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication) in 15.0186ms
2025-11-16 19:57:54.537 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication)'
2025-11-16 19:57:54.537 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:8080/api/v1/auth/refresh-token - 200 null application/json; charset=utf-8 53.9687ms
2025-11-16 19:57:56.594 +03:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:8080/api/v1/auth/refresh-token - null null
2025-11-16 19:57:56.595 +03:00 [INF] CORS policy execution successful.
2025-11-16 19:57:56.595 +03:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:8080/api/v1/auth/refresh-token - 204 null null 1.1417ms
2025-11-16 19:57:56.595 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:8080/api/v1/auth/refresh-token - null 0
2025-11-16 19:57:56.596 +03:00 [INF] CORS policy execution successful.
2025-11-16 19:57:56.623 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 19:57:56.624 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication)'
2025-11-16 19:57:56.624 +03:00 [INF] Route matched with {action = "RefreshToken", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.user.AuthResponse] RefreshToken() on controller MappyApplication.Controllers.AuthController (MappyApplication).
2025-11-16 19:57:56.627 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__refreshToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`RefreshToken` = @__refreshToken_0
LIMIT 2
2025-11-16 19:57:56.629 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`FirstName`, `a`.`LastName`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`
FROM `AspNetUsers` AS `a`
WHERE `a`.`Id` = @__p_0
LIMIT 1
2025-11-16 19:57:56.633 +03:00 [INF] Executed DbCommand (4ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']

        UPDATE TOKENS
        SET Revoked = true, Expired = true
        WHERE UserId = @p0
          AND DeviceId = @p1
          AND Revoked = false
          AND Expired = false
2025-11-16 19:57:56.634 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a0`.`Name`
FROM `AspNetUserRoles` AS `a`
INNER JOIN `AspNetRoles` AS `a0` ON `a`.`RoleId` = `a0`.`Id`
WHERE `a`.`UserId` = @__userId_0
2025-11-16 19:57:56.635 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ClaimType`, `a`.`ClaimValue`, `a`.`UserId`
FROM `AspNetUserClaims` AS `a`
WHERE `a`.`UserId` = @__user_Id_0
2025-11-16 19:57:56.636 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a0`.`Name`
FROM `AspNetUserRoles` AS `a`
INNER JOIN `AspNetRoles` AS `a0` ON `a`.`RoleId` = `a0`.`Id`
WHERE `a`.`UserId` = @__userId_0
2025-11-16 19:57:56.637 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ClaimType`, `a`.`ClaimValue`, `a`.`UserId`
FROM `AspNetUserClaims` AS `a`
WHERE `a`.`UserId` = @__user_Id_0
2025-11-16 19:57:56.640 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (DbType = DateTime), @p2='?' (Size = 4000), @p3='?' (DbType = Boolean), @p4='?' (Size = 4000), @p5='?' (DbType = Boolean), @p6='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO `Tokens` (`AccessToken`, `CreatedAt`, `DeviceId`, `Expired`, `RefreshToken`, `Revoked`, `UserId`)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6);
SELECT `Id`
FROM `Tokens`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();
2025-11-16 19:57:56.641 +03:00 [INF] Added Token MappyApplication.Data.Token
2025-11-16 19:57:56.643 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessFailedCount`, `t`.`ConcurrencyStamp`, `t`.`Email`, `t`.`EmailConfirmed`, `t`.`FirstName`, `t`.`LastName`, `t`.`LockoutEnabled`, `t`.`LockoutEnd`, `t`.`NormalizedEmail`, `t`.`NormalizedUserName`, `t`.`PasswordHash`, `t`.`PhoneNumber`, `t`.`PhoneNumberConfirmed`, `t`.`SecurityStamp`, `t`.`TwoFactorEnabled`, `t`.`UserName`, `w`.`Id`, `w`.`Cadence`, `w`.`CityName`, `w`.`Coords`, `w`.`Date`, `w`.`Distance`, `w`.`Duration`, `w`.`Emoji`, `w`.`Pace`, `w`.`Type`, `w`.`UserId`, `c`.`Id`, `c`.`CityName`, `c`.`Country`, `c`.`Date`, `c`.`Emoji`, `c`.`Lat`, `c`.`Lng`, `c`.`Notes`, `c`.`UserId`
FROM (
    SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`FirstName`, `a`.`LastName`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`
    FROM `AspNetUsers` AS `a`
    WHERE `a`.`Id` = @__user_Id_0
    LIMIT 2
) AS `t`
LEFT JOIN `Workouts` AS `w` ON `t`.`Id` = `w`.`UserId`
LEFT JOIN `Cities` AS `c` ON `t`.`Id` = `c`.`UserId`
ORDER BY `t`.`Id`, `w`.`Id`
2025-11-16 19:57:56.643 +03:00 [INF] Executing ObjectResult, writing value of type 'MappyApplication.Models.user.AuthResponse'.
2025-11-16 19:57:56.643 +03:00 [INF] Executed action MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication) in 19.3848ms
2025-11-16 19:57:56.643 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication)'
2025-11-16 19:57:56.644 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:8080/api/v1/auth/refresh-token - 200 null application/json; charset=utf-8 48.0825ms
2025-11-16 19:57:59.061 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:8080/api/v1/auth/refresh-token - null 0
2025-11-16 19:57:59.067 +03:00 [INF] CORS policy execution successful.
2025-11-16 19:57:59.104 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 19:57:59.105 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication)'
2025-11-16 19:57:59.105 +03:00 [INF] Route matched with {action = "RefreshToken", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.user.AuthResponse] RefreshToken() on controller MappyApplication.Controllers.AuthController (MappyApplication).
2025-11-16 19:57:59.107 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__refreshToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`RefreshToken` = @__refreshToken_0
LIMIT 2
2025-11-16 19:57:59.109 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`FirstName`, `a`.`LastName`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`
FROM `AspNetUsers` AS `a`
WHERE `a`.`Id` = @__p_0
LIMIT 1
2025-11-16 19:57:59.115 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']

        UPDATE TOKENS
        SET Revoked = true, Expired = true
        WHERE UserId = @p0
          AND DeviceId = @p1
          AND Revoked = false
          AND Expired = false
2025-11-16 19:57:59.117 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a0`.`Name`
FROM `AspNetUserRoles` AS `a`
INNER JOIN `AspNetRoles` AS `a0` ON `a`.`RoleId` = `a0`.`Id`
WHERE `a`.`UserId` = @__userId_0
2025-11-16 19:57:59.118 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ClaimType`, `a`.`ClaimValue`, `a`.`UserId`
FROM `AspNetUserClaims` AS `a`
WHERE `a`.`UserId` = @__user_Id_0
2025-11-16 19:57:59.120 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a0`.`Name`
FROM `AspNetUserRoles` AS `a`
INNER JOIN `AspNetRoles` AS `a0` ON `a`.`RoleId` = `a0`.`Id`
WHERE `a`.`UserId` = @__userId_0
2025-11-16 19:57:59.120 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ClaimType`, `a`.`ClaimValue`, `a`.`UserId`
FROM `AspNetUserClaims` AS `a`
WHERE `a`.`UserId` = @__user_Id_0
2025-11-16 19:57:59.123 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (DbType = DateTime), @p2='?' (Size = 4000), @p3='?' (DbType = Boolean), @p4='?' (Size = 4000), @p5='?' (DbType = Boolean), @p6='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO `Tokens` (`AccessToken`, `CreatedAt`, `DeviceId`, `Expired`, `RefreshToken`, `Revoked`, `UserId`)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6);
SELECT `Id`
FROM `Tokens`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();
2025-11-16 19:57:59.124 +03:00 [INF] Added Token MappyApplication.Data.Token
2025-11-16 19:57:59.125 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessFailedCount`, `t`.`ConcurrencyStamp`, `t`.`Email`, `t`.`EmailConfirmed`, `t`.`FirstName`, `t`.`LastName`, `t`.`LockoutEnabled`, `t`.`LockoutEnd`, `t`.`NormalizedEmail`, `t`.`NormalizedUserName`, `t`.`PasswordHash`, `t`.`PhoneNumber`, `t`.`PhoneNumberConfirmed`, `t`.`SecurityStamp`, `t`.`TwoFactorEnabled`, `t`.`UserName`, `w`.`Id`, `w`.`Cadence`, `w`.`CityName`, `w`.`Coords`, `w`.`Date`, `w`.`Distance`, `w`.`Duration`, `w`.`Emoji`, `w`.`Pace`, `w`.`Type`, `w`.`UserId`, `c`.`Id`, `c`.`CityName`, `c`.`Country`, `c`.`Date`, `c`.`Emoji`, `c`.`Lat`, `c`.`Lng`, `c`.`Notes`, `c`.`UserId`
FROM (
    SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`FirstName`, `a`.`LastName`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`
    FROM `AspNetUsers` AS `a`
    WHERE `a`.`Id` = @__user_Id_0
    LIMIT 2
) AS `t`
LEFT JOIN `Workouts` AS `w` ON `t`.`Id` = `w`.`UserId`
LEFT JOIN `Cities` AS `c` ON `t`.`Id` = `c`.`UserId`
ORDER BY `t`.`Id`, `w`.`Id`
2025-11-16 19:57:59.127 +03:00 [INF] Executing ObjectResult, writing value of type 'MappyApplication.Models.user.AuthResponse'.
2025-11-16 19:57:59.130 +03:00 [INF] Executed action MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication) in 24.5835ms
2025-11-16 19:57:59.130 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication)'
2025-11-16 19:57:59.130 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:8080/api/v1/auth/refresh-token - 200 null application/json; charset=utf-8 73.2033ms
2025-11-16 19:58:14.762 +03:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:8080/api/v1/auth/refresh-token - null null
2025-11-16 19:58:14.764 +03:00 [INF] CORS policy execution successful.
2025-11-16 19:58:14.764 +03:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:8080/api/v1/auth/refresh-token - 204 null null 2.0092ms
2025-11-16 19:58:14.766 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:8080/api/v1/auth/refresh-token - null 0
2025-11-16 19:58:14.766 +03:00 [INF] CORS policy execution successful.
2025-11-16 19:58:14.804 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 19:58:14.805 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication)'
2025-11-16 19:58:14.805 +03:00 [INF] Route matched with {action = "RefreshToken", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.user.AuthResponse] RefreshToken() on controller MappyApplication.Controllers.AuthController (MappyApplication).
2025-11-16 19:58:14.806 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__refreshToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`RefreshToken` = @__refreshToken_0
LIMIT 2
2025-11-16 19:58:14.807 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`FirstName`, `a`.`LastName`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`
FROM `AspNetUsers` AS `a`
WHERE `a`.`Id` = @__p_0
LIMIT 1
2025-11-16 19:58:14.811 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']

        UPDATE TOKENS
        SET Revoked = true, Expired = true
        WHERE UserId = @p0
          AND DeviceId = @p1
          AND Revoked = false
          AND Expired = false
2025-11-16 19:58:14.812 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a0`.`Name`
FROM `AspNetUserRoles` AS `a`
INNER JOIN `AspNetRoles` AS `a0` ON `a`.`RoleId` = `a0`.`Id`
WHERE `a`.`UserId` = @__userId_0
2025-11-16 19:58:14.814 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ClaimType`, `a`.`ClaimValue`, `a`.`UserId`
FROM `AspNetUserClaims` AS `a`
WHERE `a`.`UserId` = @__user_Id_0
2025-11-16 19:58:14.815 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a0`.`Name`
FROM `AspNetUserRoles` AS `a`
INNER JOIN `AspNetRoles` AS `a0` ON `a`.`RoleId` = `a0`.`Id`
WHERE `a`.`UserId` = @__userId_0
2025-11-16 19:58:14.815 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ClaimType`, `a`.`ClaimValue`, `a`.`UserId`
FROM `AspNetUserClaims` AS `a`
WHERE `a`.`UserId` = @__user_Id_0
2025-11-16 19:58:14.818 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (DbType = DateTime), @p2='?' (Size = 4000), @p3='?' (DbType = Boolean), @p4='?' (Size = 4000), @p5='?' (DbType = Boolean), @p6='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO `Tokens` (`AccessToken`, `CreatedAt`, `DeviceId`, `Expired`, `RefreshToken`, `Revoked`, `UserId`)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6);
SELECT `Id`
FROM `Tokens`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();
2025-11-16 19:58:14.818 +03:00 [INF] Added Token MappyApplication.Data.Token
2025-11-16 19:58:14.820 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessFailedCount`, `t`.`ConcurrencyStamp`, `t`.`Email`, `t`.`EmailConfirmed`, `t`.`FirstName`, `t`.`LastName`, `t`.`LockoutEnabled`, `t`.`LockoutEnd`, `t`.`NormalizedEmail`, `t`.`NormalizedUserName`, `t`.`PasswordHash`, `t`.`PhoneNumber`, `t`.`PhoneNumberConfirmed`, `t`.`SecurityStamp`, `t`.`TwoFactorEnabled`, `t`.`UserName`, `w`.`Id`, `w`.`Cadence`, `w`.`CityName`, `w`.`Coords`, `w`.`Date`, `w`.`Distance`, `w`.`Duration`, `w`.`Emoji`, `w`.`Pace`, `w`.`Type`, `w`.`UserId`, `c`.`Id`, `c`.`CityName`, `c`.`Country`, `c`.`Date`, `c`.`Emoji`, `c`.`Lat`, `c`.`Lng`, `c`.`Notes`, `c`.`UserId`
FROM (
    SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`FirstName`, `a`.`LastName`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`
    FROM `AspNetUsers` AS `a`
    WHERE `a`.`Id` = @__user_Id_0
    LIMIT 2
) AS `t`
LEFT JOIN `Workouts` AS `w` ON `t`.`Id` = `w`.`UserId`
LEFT JOIN `Cities` AS `c` ON `t`.`Id` = `c`.`UserId`
ORDER BY `t`.`Id`, `w`.`Id`
2025-11-16 19:58:14.820 +03:00 [INF] Executing ObjectResult, writing value of type 'MappyApplication.Models.user.AuthResponse'.
2025-11-16 19:58:14.820 +03:00 [INF] Executed action MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication) in 15.2452ms
2025-11-16 19:58:14.820 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication)'
2025-11-16 19:58:14.820 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:8080/api/v1/auth/refresh-token - 200 null application/json; charset=utf-8 54.2809ms
2025-11-16 19:58:29.462 +03:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:8080/api/v1/auth/refresh-token - null null
2025-11-16 19:58:29.467 +03:00 [INF] CORS policy execution successful.
2025-11-16 19:58:29.467 +03:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:8080/api/v1/auth/refresh-token - 204 null null 5.1371ms
2025-11-16 19:58:29.468 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:8080/api/v1/auth/refresh-token - null 0
2025-11-16 19:58:29.468 +03:00 [INF] CORS policy execution successful.
2025-11-16 19:58:29.502 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 19:58:29.503 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication)'
2025-11-16 19:58:29.503 +03:00 [INF] Route matched with {action = "RefreshToken", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.user.AuthResponse] RefreshToken() on controller MappyApplication.Controllers.AuthController (MappyApplication).
2025-11-16 19:58:29.507 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__refreshToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`RefreshToken` = @__refreshToken_0
LIMIT 2
2025-11-16 19:58:29.511 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`FirstName`, `a`.`LastName`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`
FROM `AspNetUsers` AS `a`
WHERE `a`.`Id` = @__p_0
LIMIT 1
2025-11-16 19:58:29.515 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']

        UPDATE TOKENS
        SET Revoked = true, Expired = true
        WHERE UserId = @p0
          AND DeviceId = @p1
          AND Revoked = false
          AND Expired = false
2025-11-16 19:58:29.517 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a0`.`Name`
FROM `AspNetUserRoles` AS `a`
INNER JOIN `AspNetRoles` AS `a0` ON `a`.`RoleId` = `a0`.`Id`
WHERE `a`.`UserId` = @__userId_0
2025-11-16 19:58:29.518 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ClaimType`, `a`.`ClaimValue`, `a`.`UserId`
FROM `AspNetUserClaims` AS `a`
WHERE `a`.`UserId` = @__user_Id_0
2025-11-16 19:58:29.519 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a0`.`Name`
FROM `AspNetUserRoles` AS `a`
INNER JOIN `AspNetRoles` AS `a0` ON `a`.`RoleId` = `a0`.`Id`
WHERE `a`.`UserId` = @__userId_0
2025-11-16 19:58:29.519 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ClaimType`, `a`.`ClaimValue`, `a`.`UserId`
FROM `AspNetUserClaims` AS `a`
WHERE `a`.`UserId` = @__user_Id_0
2025-11-16 19:58:29.521 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (DbType = DateTime), @p2='?' (Size = 4000), @p3='?' (DbType = Boolean), @p4='?' (Size = 4000), @p5='?' (DbType = Boolean), @p6='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO `Tokens` (`AccessToken`, `CreatedAt`, `DeviceId`, `Expired`, `RefreshToken`, `Revoked`, `UserId`)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6);
SELECT `Id`
FROM `Tokens`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();
2025-11-16 19:58:29.521 +03:00 [INF] Added Token MappyApplication.Data.Token
2025-11-16 19:58:29.524 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessFailedCount`, `t`.`ConcurrencyStamp`, `t`.`Email`, `t`.`EmailConfirmed`, `t`.`FirstName`, `t`.`LastName`, `t`.`LockoutEnabled`, `t`.`LockoutEnd`, `t`.`NormalizedEmail`, `t`.`NormalizedUserName`, `t`.`PasswordHash`, `t`.`PhoneNumber`, `t`.`PhoneNumberConfirmed`, `t`.`SecurityStamp`, `t`.`TwoFactorEnabled`, `t`.`UserName`, `w`.`Id`, `w`.`Cadence`, `w`.`CityName`, `w`.`Coords`, `w`.`Date`, `w`.`Distance`, `w`.`Duration`, `w`.`Emoji`, `w`.`Pace`, `w`.`Type`, `w`.`UserId`, `c`.`Id`, `c`.`CityName`, `c`.`Country`, `c`.`Date`, `c`.`Emoji`, `c`.`Lat`, `c`.`Lng`, `c`.`Notes`, `c`.`UserId`
FROM (
    SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`FirstName`, `a`.`LastName`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`
    FROM `AspNetUsers` AS `a`
    WHERE `a`.`Id` = @__user_Id_0
    LIMIT 2
) AS `t`
LEFT JOIN `Workouts` AS `w` ON `t`.`Id` = `w`.`UserId`
LEFT JOIN `Cities` AS `c` ON `t`.`Id` = `c`.`UserId`
ORDER BY `t`.`Id`, `w`.`Id`
2025-11-16 19:58:29.524 +03:00 [INF] Executing ObjectResult, writing value of type 'MappyApplication.Models.user.AuthResponse'.
2025-11-16 19:58:29.524 +03:00 [INF] Executed action MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication) in 20.8314ms
2025-11-16 19:58:29.524 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication)'
2025-11-16 19:58:29.524 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:8080/api/v1/auth/refresh-token - 200 null application/json; charset=utf-8 56.2171ms
2025-11-16 19:58:36.262 +03:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:8080/api/v1/auth/refresh-token - null null
2025-11-16 19:58:36.264 +03:00 [INF] CORS policy execution successful.
2025-11-16 19:58:36.265 +03:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:8080/api/v1/auth/refresh-token - 204 null null 2.1637ms
2025-11-16 19:58:36.266 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:8080/api/v1/auth/refresh-token - null 0
2025-11-16 19:58:36.266 +03:00 [INF] CORS policy execution successful.
2025-11-16 19:58:36.300 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 19:58:36.300 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication)'
2025-11-16 19:58:36.300 +03:00 [INF] Route matched with {action = "RefreshToken", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.user.AuthResponse] RefreshToken() on controller MappyApplication.Controllers.AuthController (MappyApplication).
2025-11-16 19:58:36.301 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__refreshToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`RefreshToken` = @__refreshToken_0
LIMIT 2
2025-11-16 19:58:36.302 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`FirstName`, `a`.`LastName`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`
FROM `AspNetUsers` AS `a`
WHERE `a`.`Id` = @__p_0
LIMIT 1
2025-11-16 19:58:36.307 +03:00 [INF] Executed DbCommand (4ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']

        UPDATE TOKENS
        SET Revoked = true, Expired = true
        WHERE UserId = @p0
          AND DeviceId = @p1
          AND Revoked = false
          AND Expired = false
2025-11-16 19:58:36.310 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a0`.`Name`
FROM `AspNetUserRoles` AS `a`
INNER JOIN `AspNetRoles` AS `a0` ON `a`.`RoleId` = `a0`.`Id`
WHERE `a`.`UserId` = @__userId_0
2025-11-16 19:58:36.312 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ClaimType`, `a`.`ClaimValue`, `a`.`UserId`
FROM `AspNetUserClaims` AS `a`
WHERE `a`.`UserId` = @__user_Id_0
2025-11-16 19:58:36.312 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a0`.`Name`
FROM `AspNetUserRoles` AS `a`
INNER JOIN `AspNetRoles` AS `a0` ON `a`.`RoleId` = `a0`.`Id`
WHERE `a`.`UserId` = @__userId_0
2025-11-16 19:58:36.313 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ClaimType`, `a`.`ClaimValue`, `a`.`UserId`
FROM `AspNetUserClaims` AS `a`
WHERE `a`.`UserId` = @__user_Id_0
2025-11-16 19:58:36.315 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (DbType = DateTime), @p2='?' (Size = 4000), @p3='?' (DbType = Boolean), @p4='?' (Size = 4000), @p5='?' (DbType = Boolean), @p6='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO `Tokens` (`AccessToken`, `CreatedAt`, `DeviceId`, `Expired`, `RefreshToken`, `Revoked`, `UserId`)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6);
SELECT `Id`
FROM `Tokens`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();
2025-11-16 19:58:36.315 +03:00 [INF] Added Token MappyApplication.Data.Token
2025-11-16 19:58:36.316 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessFailedCount`, `t`.`ConcurrencyStamp`, `t`.`Email`, `t`.`EmailConfirmed`, `t`.`FirstName`, `t`.`LastName`, `t`.`LockoutEnabled`, `t`.`LockoutEnd`, `t`.`NormalizedEmail`, `t`.`NormalizedUserName`, `t`.`PasswordHash`, `t`.`PhoneNumber`, `t`.`PhoneNumberConfirmed`, `t`.`SecurityStamp`, `t`.`TwoFactorEnabled`, `t`.`UserName`, `w`.`Id`, `w`.`Cadence`, `w`.`CityName`, `w`.`Coords`, `w`.`Date`, `w`.`Distance`, `w`.`Duration`, `w`.`Emoji`, `w`.`Pace`, `w`.`Type`, `w`.`UserId`, `c`.`Id`, `c`.`CityName`, `c`.`Country`, `c`.`Date`, `c`.`Emoji`, `c`.`Lat`, `c`.`Lng`, `c`.`Notes`, `c`.`UserId`
FROM (
    SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`FirstName`, `a`.`LastName`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`
    FROM `AspNetUsers` AS `a`
    WHERE `a`.`Id` = @__user_Id_0
    LIMIT 2
) AS `t`
LEFT JOIN `Workouts` AS `w` ON `t`.`Id` = `w`.`UserId`
LEFT JOIN `Cities` AS `c` ON `t`.`Id` = `c`.`UserId`
ORDER BY `t`.`Id`, `w`.`Id`
2025-11-16 19:58:36.316 +03:00 [INF] Executing ObjectResult, writing value of type 'MappyApplication.Models.user.AuthResponse'.
2025-11-16 19:58:36.317 +03:00 [INF] Executed action MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication) in 16.4919ms
2025-11-16 19:58:36.317 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication)'
2025-11-16 19:58:36.317 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:8080/api/v1/auth/refresh-token - 200 null application/json; charset=utf-8 50.868ms
2025-11-16 19:58:37.903 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:8080/api/v1/auth/refresh-token - null 0
2025-11-16 19:58:37.904 +03:00 [INF] CORS policy execution successful.
2025-11-16 19:58:37.922 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 19:58:37.922 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication)'
2025-11-16 19:58:37.922 +03:00 [INF] Route matched with {action = "RefreshToken", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.user.AuthResponse] RefreshToken() on controller MappyApplication.Controllers.AuthController (MappyApplication).
2025-11-16 19:58:37.924 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__refreshToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`RefreshToken` = @__refreshToken_0
LIMIT 2
2025-11-16 19:58:37.925 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`FirstName`, `a`.`LastName`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`
FROM `AspNetUsers` AS `a`
WHERE `a`.`Id` = @__p_0
LIMIT 1
2025-11-16 19:58:37.928 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']

        UPDATE TOKENS
        SET Revoked = true, Expired = true
        WHERE UserId = @p0
          AND DeviceId = @p1
          AND Revoked = false
          AND Expired = false
2025-11-16 19:58:37.929 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a0`.`Name`
FROM `AspNetUserRoles` AS `a`
INNER JOIN `AspNetRoles` AS `a0` ON `a`.`RoleId` = `a0`.`Id`
WHERE `a`.`UserId` = @__userId_0
2025-11-16 19:58:37.929 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ClaimType`, `a`.`ClaimValue`, `a`.`UserId`
FROM `AspNetUserClaims` AS `a`
WHERE `a`.`UserId` = @__user_Id_0
2025-11-16 19:58:37.930 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a0`.`Name`
FROM `AspNetUserRoles` AS `a`
INNER JOIN `AspNetRoles` AS `a0` ON `a`.`RoleId` = `a0`.`Id`
WHERE `a`.`UserId` = @__userId_0
2025-11-16 19:58:37.930 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ClaimType`, `a`.`ClaimValue`, `a`.`UserId`
FROM `AspNetUserClaims` AS `a`
WHERE `a`.`UserId` = @__user_Id_0
2025-11-16 19:58:37.932 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (DbType = DateTime), @p2='?' (Size = 4000), @p3='?' (DbType = Boolean), @p4='?' (Size = 4000), @p5='?' (DbType = Boolean), @p6='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO `Tokens` (`AccessToken`, `CreatedAt`, `DeviceId`, `Expired`, `RefreshToken`, `Revoked`, `UserId`)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6);
SELECT `Id`
FROM `Tokens`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();
2025-11-16 19:58:37.933 +03:00 [INF] Added Token MappyApplication.Data.Token
2025-11-16 19:58:37.934 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessFailedCount`, `t`.`ConcurrencyStamp`, `t`.`Email`, `t`.`EmailConfirmed`, `t`.`FirstName`, `t`.`LastName`, `t`.`LockoutEnabled`, `t`.`LockoutEnd`, `t`.`NormalizedEmail`, `t`.`NormalizedUserName`, `t`.`PasswordHash`, `t`.`PhoneNumber`, `t`.`PhoneNumberConfirmed`, `t`.`SecurityStamp`, `t`.`TwoFactorEnabled`, `t`.`UserName`, `w`.`Id`, `w`.`Cadence`, `w`.`CityName`, `w`.`Coords`, `w`.`Date`, `w`.`Distance`, `w`.`Duration`, `w`.`Emoji`, `w`.`Pace`, `w`.`Type`, `w`.`UserId`, `c`.`Id`, `c`.`CityName`, `c`.`Country`, `c`.`Date`, `c`.`Emoji`, `c`.`Lat`, `c`.`Lng`, `c`.`Notes`, `c`.`UserId`
FROM (
    SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`FirstName`, `a`.`LastName`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`
    FROM `AspNetUsers` AS `a`
    WHERE `a`.`Id` = @__user_Id_0
    LIMIT 2
) AS `t`
LEFT JOIN `Workouts` AS `w` ON `t`.`Id` = `w`.`UserId`
LEFT JOIN `Cities` AS `c` ON `t`.`Id` = `c`.`UserId`
ORDER BY `t`.`Id`, `w`.`Id`
2025-11-16 19:58:37.934 +03:00 [INF] Executing ObjectResult, writing value of type 'MappyApplication.Models.user.AuthResponse'.
2025-11-16 19:58:37.934 +03:00 [INF] Executed action MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication) in 11.2674ms
2025-11-16 19:58:37.934 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication)'
2025-11-16 19:58:37.934 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:8080/api/v1/auth/refresh-token - 200 null application/json; charset=utf-8 31.2648ms
2025-11-16 19:58:39.237 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:8080/api/v1/auth/refresh-token - null 0
2025-11-16 19:58:39.237 +03:00 [INF] CORS policy execution successful.
2025-11-16 19:58:39.250 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 19:58:39.251 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication)'
2025-11-16 19:58:39.251 +03:00 [INF] Route matched with {action = "RefreshToken", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.user.AuthResponse] RefreshToken() on controller MappyApplication.Controllers.AuthController (MappyApplication).
2025-11-16 19:58:39.252 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__refreshToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`RefreshToken` = @__refreshToken_0
LIMIT 2
2025-11-16 19:58:39.252 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`FirstName`, `a`.`LastName`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`
FROM `AspNetUsers` AS `a`
WHERE `a`.`Id` = @__p_0
LIMIT 1
2025-11-16 19:58:39.254 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']

        UPDATE TOKENS
        SET Revoked = true, Expired = true
        WHERE UserId = @p0
          AND DeviceId = @p1
          AND Revoked = false
          AND Expired = false
2025-11-16 19:58:39.255 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a0`.`Name`
FROM `AspNetUserRoles` AS `a`
INNER JOIN `AspNetRoles` AS `a0` ON `a`.`RoleId` = `a0`.`Id`
WHERE `a`.`UserId` = @__userId_0
2025-11-16 19:58:39.256 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ClaimType`, `a`.`ClaimValue`, `a`.`UserId`
FROM `AspNetUserClaims` AS `a`
WHERE `a`.`UserId` = @__user_Id_0
2025-11-16 19:58:39.256 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a0`.`Name`
FROM `AspNetUserRoles` AS `a`
INNER JOIN `AspNetRoles` AS `a0` ON `a`.`RoleId` = `a0`.`Id`
WHERE `a`.`UserId` = @__userId_0
2025-11-16 19:58:39.256 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ClaimType`, `a`.`ClaimValue`, `a`.`UserId`
FROM `AspNetUserClaims` AS `a`
WHERE `a`.`UserId` = @__user_Id_0
2025-11-16 19:58:39.258 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (DbType = DateTime), @p2='?' (Size = 4000), @p3='?' (DbType = Boolean), @p4='?' (Size = 4000), @p5='?' (DbType = Boolean), @p6='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO `Tokens` (`AccessToken`, `CreatedAt`, `DeviceId`, `Expired`, `RefreshToken`, `Revoked`, `UserId`)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6);
SELECT `Id`
FROM `Tokens`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();
2025-11-16 19:58:39.259 +03:00 [INF] Added Token MappyApplication.Data.Token
2025-11-16 19:58:39.260 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessFailedCount`, `t`.`ConcurrencyStamp`, `t`.`Email`, `t`.`EmailConfirmed`, `t`.`FirstName`, `t`.`LastName`, `t`.`LockoutEnabled`, `t`.`LockoutEnd`, `t`.`NormalizedEmail`, `t`.`NormalizedUserName`, `t`.`PasswordHash`, `t`.`PhoneNumber`, `t`.`PhoneNumberConfirmed`, `t`.`SecurityStamp`, `t`.`TwoFactorEnabled`, `t`.`UserName`, `w`.`Id`, `w`.`Cadence`, `w`.`CityName`, `w`.`Coords`, `w`.`Date`, `w`.`Distance`, `w`.`Duration`, `w`.`Emoji`, `w`.`Pace`, `w`.`Type`, `w`.`UserId`, `c`.`Id`, `c`.`CityName`, `c`.`Country`, `c`.`Date`, `c`.`Emoji`, `c`.`Lat`, `c`.`Lng`, `c`.`Notes`, `c`.`UserId`
FROM (
    SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`FirstName`, `a`.`LastName`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`
    FROM `AspNetUsers` AS `a`
    WHERE `a`.`Id` = @__user_Id_0
    LIMIT 2
) AS `t`
LEFT JOIN `Workouts` AS `w` ON `t`.`Id` = `w`.`UserId`
LEFT JOIN `Cities` AS `c` ON `t`.`Id` = `c`.`UserId`
ORDER BY `t`.`Id`, `w`.`Id`
2025-11-16 19:58:39.260 +03:00 [INF] Executing ObjectResult, writing value of type 'MappyApplication.Models.user.AuthResponse'.
2025-11-16 19:58:39.260 +03:00 [INF] Executed action MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication) in 9.6751ms
2025-11-16 19:58:39.260 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication)'
2025-11-16 19:58:39.260 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:8080/api/v1/auth/refresh-token - 200 null application/json; charset=utf-8 23.7107ms
2025-11-16 19:58:41.489 +03:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:8080/api/v1/auth/refresh-token - null null
2025-11-16 19:58:41.492 +03:00 [INF] CORS policy execution successful.
2025-11-16 19:58:41.493 +03:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:8080/api/v1/auth/refresh-token - 204 null null 4.6164ms
2025-11-16 19:58:41.494 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:8080/api/v1/auth/refresh-token - null 0
2025-11-16 19:58:41.494 +03:00 [INF] CORS policy execution successful.
2025-11-16 19:58:41.523 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 19:58:41.524 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication)'
2025-11-16 19:58:41.524 +03:00 [INF] Route matched with {action = "RefreshToken", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.user.AuthResponse] RefreshToken() on controller MappyApplication.Controllers.AuthController (MappyApplication).
2025-11-16 19:58:41.528 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__refreshToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`RefreshToken` = @__refreshToken_0
LIMIT 2
2025-11-16 19:58:41.529 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`FirstName`, `a`.`LastName`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`
FROM `AspNetUsers` AS `a`
WHERE `a`.`Id` = @__p_0
LIMIT 1
2025-11-16 19:58:41.531 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']

        UPDATE TOKENS
        SET Revoked = true, Expired = true
        WHERE UserId = @p0
          AND DeviceId = @p1
          AND Revoked = false
          AND Expired = false
2025-11-16 19:58:41.532 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a0`.`Name`
FROM `AspNetUserRoles` AS `a`
INNER JOIN `AspNetRoles` AS `a0` ON `a`.`RoleId` = `a0`.`Id`
WHERE `a`.`UserId` = @__userId_0
2025-11-16 19:58:41.533 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ClaimType`, `a`.`ClaimValue`, `a`.`UserId`
FROM `AspNetUserClaims` AS `a`
WHERE `a`.`UserId` = @__user_Id_0
2025-11-16 19:58:41.533 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a0`.`Name`
FROM `AspNetUserRoles` AS `a`
INNER JOIN `AspNetRoles` AS `a0` ON `a`.`RoleId` = `a0`.`Id`
WHERE `a`.`UserId` = @__userId_0
2025-11-16 19:58:41.534 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ClaimType`, `a`.`ClaimValue`, `a`.`UserId`
FROM `AspNetUserClaims` AS `a`
WHERE `a`.`UserId` = @__user_Id_0
2025-11-16 19:58:41.536 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (DbType = DateTime), @p2='?' (Size = 4000), @p3='?' (DbType = Boolean), @p4='?' (Size = 4000), @p5='?' (DbType = Boolean), @p6='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO `Tokens` (`AccessToken`, `CreatedAt`, `DeviceId`, `Expired`, `RefreshToken`, `Revoked`, `UserId`)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6);
SELECT `Id`
FROM `Tokens`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();
2025-11-16 19:58:41.537 +03:00 [INF] Added Token MappyApplication.Data.Token
2025-11-16 19:58:41.538 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessFailedCount`, `t`.`ConcurrencyStamp`, `t`.`Email`, `t`.`EmailConfirmed`, `t`.`FirstName`, `t`.`LastName`, `t`.`LockoutEnabled`, `t`.`LockoutEnd`, `t`.`NormalizedEmail`, `t`.`NormalizedUserName`, `t`.`PasswordHash`, `t`.`PhoneNumber`, `t`.`PhoneNumberConfirmed`, `t`.`SecurityStamp`, `t`.`TwoFactorEnabled`, `t`.`UserName`, `w`.`Id`, `w`.`Cadence`, `w`.`CityName`, `w`.`Coords`, `w`.`Date`, `w`.`Distance`, `w`.`Duration`, `w`.`Emoji`, `w`.`Pace`, `w`.`Type`, `w`.`UserId`, `c`.`Id`, `c`.`CityName`, `c`.`Country`, `c`.`Date`, `c`.`Emoji`, `c`.`Lat`, `c`.`Lng`, `c`.`Notes`, `c`.`UserId`
FROM (
    SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`FirstName`, `a`.`LastName`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`
    FROM `AspNetUsers` AS `a`
    WHERE `a`.`Id` = @__user_Id_0
    LIMIT 2
) AS `t`
LEFT JOIN `Workouts` AS `w` ON `t`.`Id` = `w`.`UserId`
LEFT JOIN `Cities` AS `c` ON `t`.`Id` = `c`.`UserId`
ORDER BY `t`.`Id`, `w`.`Id`
2025-11-16 19:58:41.538 +03:00 [INF] Executing ObjectResult, writing value of type 'MappyApplication.Models.user.AuthResponse'.
2025-11-16 19:58:41.538 +03:00 [INF] Executed action MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication) in 13.7298ms
2025-11-16 19:58:41.538 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication)'
2025-11-16 19:58:41.538 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:8080/api/v1/auth/refresh-token - 200 null application/json; charset=utf-8 44.5307ms
2025-11-16 19:58:42.527 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:8080/api/v1/auth/refresh-token - null 0
2025-11-16 19:58:42.528 +03:00 [INF] CORS policy execution successful.
2025-11-16 19:58:42.547 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 19:58:42.547 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication)'
2025-11-16 19:58:42.547 +03:00 [INF] Route matched with {action = "RefreshToken", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.user.AuthResponse] RefreshToken() on controller MappyApplication.Controllers.AuthController (MappyApplication).
2025-11-16 19:58:42.549 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__refreshToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`RefreshToken` = @__refreshToken_0
LIMIT 2
2025-11-16 19:58:42.550 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`FirstName`, `a`.`LastName`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`
FROM `AspNetUsers` AS `a`
WHERE `a`.`Id` = @__p_0
LIMIT 1
2025-11-16 19:58:42.552 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']

        UPDATE TOKENS
        SET Revoked = true, Expired = true
        WHERE UserId = @p0
          AND DeviceId = @p1
          AND Revoked = false
          AND Expired = false
2025-11-16 19:58:42.554 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a0`.`Name`
FROM `AspNetUserRoles` AS `a`
INNER JOIN `AspNetRoles` AS `a0` ON `a`.`RoleId` = `a0`.`Id`
WHERE `a`.`UserId` = @__userId_0
2025-11-16 19:58:42.557 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ClaimType`, `a`.`ClaimValue`, `a`.`UserId`
FROM `AspNetUserClaims` AS `a`
WHERE `a`.`UserId` = @__user_Id_0
2025-11-16 19:58:42.558 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a0`.`Name`
FROM `AspNetUserRoles` AS `a`
INNER JOIN `AspNetRoles` AS `a0` ON `a`.`RoleId` = `a0`.`Id`
WHERE `a`.`UserId` = @__userId_0
2025-11-16 19:58:42.559 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ClaimType`, `a`.`ClaimValue`, `a`.`UserId`
FROM `AspNetUserClaims` AS `a`
WHERE `a`.`UserId` = @__user_Id_0
2025-11-16 19:58:42.561 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (DbType = DateTime), @p2='?' (Size = 4000), @p3='?' (DbType = Boolean), @p4='?' (Size = 4000), @p5='?' (DbType = Boolean), @p6='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO `Tokens` (`AccessToken`, `CreatedAt`, `DeviceId`, `Expired`, `RefreshToken`, `Revoked`, `UserId`)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6);
SELECT `Id`
FROM `Tokens`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();
2025-11-16 19:58:42.562 +03:00 [INF] Added Token MappyApplication.Data.Token
2025-11-16 19:58:42.563 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessFailedCount`, `t`.`ConcurrencyStamp`, `t`.`Email`, `t`.`EmailConfirmed`, `t`.`FirstName`, `t`.`LastName`, `t`.`LockoutEnabled`, `t`.`LockoutEnd`, `t`.`NormalizedEmail`, `t`.`NormalizedUserName`, `t`.`PasswordHash`, `t`.`PhoneNumber`, `t`.`PhoneNumberConfirmed`, `t`.`SecurityStamp`, `t`.`TwoFactorEnabled`, `t`.`UserName`, `w`.`Id`, `w`.`Cadence`, `w`.`CityName`, `w`.`Coords`, `w`.`Date`, `w`.`Distance`, `w`.`Duration`, `w`.`Emoji`, `w`.`Pace`, `w`.`Type`, `w`.`UserId`, `c`.`Id`, `c`.`CityName`, `c`.`Country`, `c`.`Date`, `c`.`Emoji`, `c`.`Lat`, `c`.`Lng`, `c`.`Notes`, `c`.`UserId`
FROM (
    SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`FirstName`, `a`.`LastName`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`
    FROM `AspNetUsers` AS `a`
    WHERE `a`.`Id` = @__user_Id_0
    LIMIT 2
) AS `t`
LEFT JOIN `Workouts` AS `w` ON `t`.`Id` = `w`.`UserId`
LEFT JOIN `Cities` AS `c` ON `t`.`Id` = `c`.`UserId`
ORDER BY `t`.`Id`, `w`.`Id`
2025-11-16 19:58:42.563 +03:00 [INF] Executing ObjectResult, writing value of type 'MappyApplication.Models.user.AuthResponse'.
2025-11-16 19:58:42.564 +03:00 [INF] Executed action MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication) in 16.3659ms
2025-11-16 19:58:42.564 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication)'
2025-11-16 19:58:42.564 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:8080/api/v1/auth/refresh-token - 200 null application/json; charset=utf-8 37.3829ms
2025-11-16 19:58:54.012 +03:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:8080/api/v1/auth/refresh-token - null null
2025-11-16 19:58:54.024 +03:00 [INF] CORS policy execution successful.
2025-11-16 19:58:54.024 +03:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:8080/api/v1/auth/refresh-token - 204 null null 12.0798ms
2025-11-16 19:58:54.026 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:8080/api/v1/auth/refresh-token - null 0
2025-11-16 19:58:54.026 +03:00 [INF] CORS policy execution successful.
2025-11-16 19:58:54.060 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 19:58:54.062 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication)'
2025-11-16 19:58:54.063 +03:00 [INF] Route matched with {action = "RefreshToken", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.user.AuthResponse] RefreshToken() on controller MappyApplication.Controllers.AuthController (MappyApplication).
2025-11-16 19:58:54.065 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__refreshToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`RefreshToken` = @__refreshToken_0
LIMIT 2
2025-11-16 19:58:54.068 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`FirstName`, `a`.`LastName`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`
FROM `AspNetUsers` AS `a`
WHERE `a`.`Id` = @__p_0
LIMIT 1
2025-11-16 19:58:54.071 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']

        UPDATE TOKENS
        SET Revoked = true, Expired = true
        WHERE UserId = @p0
          AND DeviceId = @p1
          AND Revoked = false
          AND Expired = false
2025-11-16 19:58:54.073 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a0`.`Name`
FROM `AspNetUserRoles` AS `a`
INNER JOIN `AspNetRoles` AS `a0` ON `a`.`RoleId` = `a0`.`Id`
WHERE `a`.`UserId` = @__userId_0
2025-11-16 19:58:54.075 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ClaimType`, `a`.`ClaimValue`, `a`.`UserId`
FROM `AspNetUserClaims` AS `a`
WHERE `a`.`UserId` = @__user_Id_0
2025-11-16 19:58:54.077 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a0`.`Name`
FROM `AspNetUserRoles` AS `a`
INNER JOIN `AspNetRoles` AS `a0` ON `a`.`RoleId` = `a0`.`Id`
WHERE `a`.`UserId` = @__userId_0
2025-11-16 19:58:54.078 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ClaimType`, `a`.`ClaimValue`, `a`.`UserId`
FROM `AspNetUserClaims` AS `a`
WHERE `a`.`UserId` = @__user_Id_0
2025-11-16 19:58:54.081 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (DbType = DateTime), @p2='?' (Size = 4000), @p3='?' (DbType = Boolean), @p4='?' (Size = 4000), @p5='?' (DbType = Boolean), @p6='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO `Tokens` (`AccessToken`, `CreatedAt`, `DeviceId`, `Expired`, `RefreshToken`, `Revoked`, `UserId`)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6);
SELECT `Id`
FROM `Tokens`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();
2025-11-16 19:58:54.082 +03:00 [INF] Added Token MappyApplication.Data.Token
2025-11-16 19:58:54.084 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessFailedCount`, `t`.`ConcurrencyStamp`, `t`.`Email`, `t`.`EmailConfirmed`, `t`.`FirstName`, `t`.`LastName`, `t`.`LockoutEnabled`, `t`.`LockoutEnd`, `t`.`NormalizedEmail`, `t`.`NormalizedUserName`, `t`.`PasswordHash`, `t`.`PhoneNumber`, `t`.`PhoneNumberConfirmed`, `t`.`SecurityStamp`, `t`.`TwoFactorEnabled`, `t`.`UserName`, `w`.`Id`, `w`.`Cadence`, `w`.`CityName`, `w`.`Coords`, `w`.`Date`, `w`.`Distance`, `w`.`Duration`, `w`.`Emoji`, `w`.`Pace`, `w`.`Type`, `w`.`UserId`, `c`.`Id`, `c`.`CityName`, `c`.`Country`, `c`.`Date`, `c`.`Emoji`, `c`.`Lat`, `c`.`Lng`, `c`.`Notes`, `c`.`UserId`
FROM (
    SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`FirstName`, `a`.`LastName`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`
    FROM `AspNetUsers` AS `a`
    WHERE `a`.`Id` = @__user_Id_0
    LIMIT 2
) AS `t`
LEFT JOIN `Workouts` AS `w` ON `t`.`Id` = `w`.`UserId`
LEFT JOIN `Cities` AS `c` ON `t`.`Id` = `c`.`UserId`
ORDER BY `t`.`Id`, `w`.`Id`
2025-11-16 19:58:54.084 +03:00 [INF] Executing ObjectResult, writing value of type 'MappyApplication.Models.user.AuthResponse'.
2025-11-16 19:58:54.084 +03:00 [INF] Executed action MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication) in 21.776ms
2025-11-16 19:58:54.084 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication)'
2025-11-16 19:58:54.084 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:8080/api/v1/auth/refresh-token - 200 null application/json; charset=utf-8 58.6129ms
2025-11-16 19:59:01.167 +03:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:8080/api/v1/auth/refresh-token - null null
2025-11-16 19:59:01.169 +03:00 [INF] CORS policy execution successful.
2025-11-16 19:59:01.169 +03:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:8080/api/v1/auth/refresh-token - 204 null null 1.626ms
2025-11-16 19:59:01.170 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:8080/api/v1/auth/refresh-token - null 0
2025-11-16 19:59:01.170 +03:00 [INF] CORS policy execution successful.
2025-11-16 19:59:01.201 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 19:59:01.202 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication)'
2025-11-16 19:59:01.202 +03:00 [INF] Route matched with {action = "RefreshToken", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.user.AuthResponse] RefreshToken() on controller MappyApplication.Controllers.AuthController (MappyApplication).
2025-11-16 19:59:01.203 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__refreshToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`RefreshToken` = @__refreshToken_0
LIMIT 2
2025-11-16 19:59:01.204 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`FirstName`, `a`.`LastName`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`
FROM `AspNetUsers` AS `a`
WHERE `a`.`Id` = @__p_0
LIMIT 1
2025-11-16 19:59:01.207 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']

        UPDATE TOKENS
        SET Revoked = true, Expired = true
        WHERE UserId = @p0
          AND DeviceId = @p1
          AND Revoked = false
          AND Expired = false
2025-11-16 19:59:01.208 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a0`.`Name`
FROM `AspNetUserRoles` AS `a`
INNER JOIN `AspNetRoles` AS `a0` ON `a`.`RoleId` = `a0`.`Id`
WHERE `a`.`UserId` = @__userId_0
2025-11-16 19:59:01.209 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ClaimType`, `a`.`ClaimValue`, `a`.`UserId`
FROM `AspNetUserClaims` AS `a`
WHERE `a`.`UserId` = @__user_Id_0
2025-11-16 19:59:01.210 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a0`.`Name`
FROM `AspNetUserRoles` AS `a`
INNER JOIN `AspNetRoles` AS `a0` ON `a`.`RoleId` = `a0`.`Id`
WHERE `a`.`UserId` = @__userId_0
2025-11-16 19:59:01.210 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ClaimType`, `a`.`ClaimValue`, `a`.`UserId`
FROM `AspNetUserClaims` AS `a`
WHERE `a`.`UserId` = @__user_Id_0
2025-11-16 19:59:01.214 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (DbType = DateTime), @p2='?' (Size = 4000), @p3='?' (DbType = Boolean), @p4='?' (Size = 4000), @p5='?' (DbType = Boolean), @p6='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO `Tokens` (`AccessToken`, `CreatedAt`, `DeviceId`, `Expired`, `RefreshToken`, `Revoked`, `UserId`)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6);
SELECT `Id`
FROM `Tokens`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();
2025-11-16 19:59:01.214 +03:00 [INF] Added Token MappyApplication.Data.Token
2025-11-16 19:59:01.216 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessFailedCount`, `t`.`ConcurrencyStamp`, `t`.`Email`, `t`.`EmailConfirmed`, `t`.`FirstName`, `t`.`LastName`, `t`.`LockoutEnabled`, `t`.`LockoutEnd`, `t`.`NormalizedEmail`, `t`.`NormalizedUserName`, `t`.`PasswordHash`, `t`.`PhoneNumber`, `t`.`PhoneNumberConfirmed`, `t`.`SecurityStamp`, `t`.`TwoFactorEnabled`, `t`.`UserName`, `w`.`Id`, `w`.`Cadence`, `w`.`CityName`, `w`.`Coords`, `w`.`Date`, `w`.`Distance`, `w`.`Duration`, `w`.`Emoji`, `w`.`Pace`, `w`.`Type`, `w`.`UserId`, `c`.`Id`, `c`.`CityName`, `c`.`Country`, `c`.`Date`, `c`.`Emoji`, `c`.`Lat`, `c`.`Lng`, `c`.`Notes`, `c`.`UserId`
FROM (
    SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`FirstName`, `a`.`LastName`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`
    FROM `AspNetUsers` AS `a`
    WHERE `a`.`Id` = @__user_Id_0
    LIMIT 2
) AS `t`
LEFT JOIN `Workouts` AS `w` ON `t`.`Id` = `w`.`UserId`
LEFT JOIN `Cities` AS `c` ON `t`.`Id` = `c`.`UserId`
ORDER BY `t`.`Id`, `w`.`Id`
2025-11-16 19:59:01.216 +03:00 [INF] Executing ObjectResult, writing value of type 'MappyApplication.Models.user.AuthResponse'.
2025-11-16 19:59:01.216 +03:00 [INF] Executed action MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication) in 14.5436ms
2025-11-16 19:59:01.216 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication)'
2025-11-16 19:59:01.217 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:8080/api/v1/auth/refresh-token - 200 null application/json; charset=utf-8 47.0142ms
2025-11-16 19:59:02.295 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:8080/api/v1/auth/refresh-token - null 0
2025-11-16 19:59:02.300 +03:00 [INF] CORS policy execution successful.
2025-11-16 19:59:02.329 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 19:59:02.329 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication)'
2025-11-16 19:59:02.330 +03:00 [INF] Route matched with {action = "RefreshToken", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.user.AuthResponse] RefreshToken() on controller MappyApplication.Controllers.AuthController (MappyApplication).
2025-11-16 19:59:02.332 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__refreshToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`RefreshToken` = @__refreshToken_0
LIMIT 2
2025-11-16 19:59:02.337 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`FirstName`, `a`.`LastName`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`
FROM `AspNetUsers` AS `a`
WHERE `a`.`Id` = @__p_0
LIMIT 1
2025-11-16 19:59:02.340 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']

        UPDATE TOKENS
        SET Revoked = true, Expired = true
        WHERE UserId = @p0
          AND DeviceId = @p1
          AND Revoked = false
          AND Expired = false
2025-11-16 19:59:02.341 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a0`.`Name`
FROM `AspNetUserRoles` AS `a`
INNER JOIN `AspNetRoles` AS `a0` ON `a`.`RoleId` = `a0`.`Id`
WHERE `a`.`UserId` = @__userId_0
2025-11-16 19:59:02.342 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ClaimType`, `a`.`ClaimValue`, `a`.`UserId`
FROM `AspNetUserClaims` AS `a`
WHERE `a`.`UserId` = @__user_Id_0
2025-11-16 19:59:02.343 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a0`.`Name`
FROM `AspNetUserRoles` AS `a`
INNER JOIN `AspNetRoles` AS `a0` ON `a`.`RoleId` = `a0`.`Id`
WHERE `a`.`UserId` = @__userId_0
2025-11-16 19:59:02.343 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ClaimType`, `a`.`ClaimValue`, `a`.`UserId`
FROM `AspNetUserClaims` AS `a`
WHERE `a`.`UserId` = @__user_Id_0
2025-11-16 19:59:02.345 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (DbType = DateTime), @p2='?' (Size = 4000), @p3='?' (DbType = Boolean), @p4='?' (Size = 4000), @p5='?' (DbType = Boolean), @p6='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO `Tokens` (`AccessToken`, `CreatedAt`, `DeviceId`, `Expired`, `RefreshToken`, `Revoked`, `UserId`)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6);
SELECT `Id`
FROM `Tokens`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();
2025-11-16 19:59:02.346 +03:00 [INF] Added Token MappyApplication.Data.Token
2025-11-16 19:59:02.347 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessFailedCount`, `t`.`ConcurrencyStamp`, `t`.`Email`, `t`.`EmailConfirmed`, `t`.`FirstName`, `t`.`LastName`, `t`.`LockoutEnabled`, `t`.`LockoutEnd`, `t`.`NormalizedEmail`, `t`.`NormalizedUserName`, `t`.`PasswordHash`, `t`.`PhoneNumber`, `t`.`PhoneNumberConfirmed`, `t`.`SecurityStamp`, `t`.`TwoFactorEnabled`, `t`.`UserName`, `w`.`Id`, `w`.`Cadence`, `w`.`CityName`, `w`.`Coords`, `w`.`Date`, `w`.`Distance`, `w`.`Duration`, `w`.`Emoji`, `w`.`Pace`, `w`.`Type`, `w`.`UserId`, `c`.`Id`, `c`.`CityName`, `c`.`Country`, `c`.`Date`, `c`.`Emoji`, `c`.`Lat`, `c`.`Lng`, `c`.`Notes`, `c`.`UserId`
FROM (
    SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`FirstName`, `a`.`LastName`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`
    FROM `AspNetUsers` AS `a`
    WHERE `a`.`Id` = @__user_Id_0
    LIMIT 2
) AS `t`
LEFT JOIN `Workouts` AS `w` ON `t`.`Id` = `w`.`UserId`
LEFT JOIN `Cities` AS `c` ON `t`.`Id` = `c`.`UserId`
ORDER BY `t`.`Id`, `w`.`Id`
2025-11-16 19:59:02.347 +03:00 [INF] Executing ObjectResult, writing value of type 'MappyApplication.Models.user.AuthResponse'.
2025-11-16 19:59:02.348 +03:00 [INF] Executed action MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication) in 17.983ms
2025-11-16 19:59:02.348 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication)'
2025-11-16 19:59:02.348 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:8080/api/v1/auth/refresh-token - 200 null application/json; charset=utf-8 53.0422ms
2025-11-16 19:59:06.596 +03:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:8080/api/v1/cities - null null
2025-11-16 19:59:06.598 +03:00 [INF] CORS policy execution successful.
2025-11-16 19:59:06.599 +03:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:8080/api/v1/cities - 204 null null 3.0395ms
2025-11-16 19:59:06.600 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:8080/api/v1/cities - application/json 242
2025-11-16 19:59:06.600 +03:00 [INF] CORS policy execution successful.
2025-11-16 19:59:06.641 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 19:59:06.641 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.CitiesController.AddAsynch (MappyApplication)'
2025-11-16 19:59:06.642 +03:00 [INF] Route matched with {action = "AddAsynch", controller = "Cities"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] AddAsynch(MappyApplication.Data.Cities) on controller MappyApplication.Controllers.CitiesController (MappyApplication).
2025-11-16 19:59:06.651 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`FirstName`, `a`.`LastName`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`
FROM `AspNetUsers` AS `a`
WHERE `a`.`Id` = @__p_0
LIMIT 1
2025-11-16 19:59:06.656 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (Size = 4000), @p2='?' (DbType = DateTime), @p3='?' (Size = 4000), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (Size = 4000), @p7='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO `Cities` (`CityName`, `Country`, `Date`, `Emoji`, `Lat`, `Lng`, `Notes`, `UserId`)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7);
SELECT `Id`
FROM `Cities`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();
2025-11-16 19:59:06.657 +03:00 [INF] Added Cities MappyApplication.Data.Cities
2025-11-16 19:59:06.658 +03:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType0`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-11-16 19:59:06.658 +03:00 [INF] Executed action MappyApplication.Controllers.CitiesController.AddAsynch (MappyApplication) in 15.8556ms
2025-11-16 19:59:06.658 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.CitiesController.AddAsynch (MappyApplication)'
2025-11-16 19:59:06.658 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:8080/api/v1/cities - 200 null application/json; charset=utf-8 58.2792ms
2025-11-16 19:59:06.661 +03:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:8080/api/v1/auth/refresh-token - null null
2025-11-16 19:59:06.661 +03:00 [INF] CORS policy execution successful.
2025-11-16 19:59:06.661 +03:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:8080/api/v1/auth/refresh-token - 204 null null 0.1626ms
2025-11-16 19:59:06.662 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:8080/api/v1/auth/refresh-token - null 0
2025-11-16 19:59:06.662 +03:00 [INF] CORS policy execution successful.
2025-11-16 19:59:06.674 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 19:59:06.674 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication)'
2025-11-16 19:59:06.674 +03:00 [INF] Route matched with {action = "RefreshToken", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.user.AuthResponse] RefreshToken() on controller MappyApplication.Controllers.AuthController (MappyApplication).
2025-11-16 19:59:06.676 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__refreshToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`RefreshToken` = @__refreshToken_0
LIMIT 2
2025-11-16 19:59:06.676 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`FirstName`, `a`.`LastName`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`
FROM `AspNetUsers` AS `a`
WHERE `a`.`Id` = @__p_0
LIMIT 1
2025-11-16 19:59:06.678 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']

        UPDATE TOKENS
        SET Revoked = true, Expired = true
        WHERE UserId = @p0
          AND DeviceId = @p1
          AND Revoked = false
          AND Expired = false
2025-11-16 19:59:06.679 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a0`.`Name`
FROM `AspNetUserRoles` AS `a`
INNER JOIN `AspNetRoles` AS `a0` ON `a`.`RoleId` = `a0`.`Id`
WHERE `a`.`UserId` = @__userId_0
2025-11-16 19:59:06.680 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ClaimType`, `a`.`ClaimValue`, `a`.`UserId`
FROM `AspNetUserClaims` AS `a`
WHERE `a`.`UserId` = @__user_Id_0
2025-11-16 19:59:06.681 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a0`.`Name`
FROM `AspNetUserRoles` AS `a`
INNER JOIN `AspNetRoles` AS `a0` ON `a`.`RoleId` = `a0`.`Id`
WHERE `a`.`UserId` = @__userId_0
2025-11-16 19:59:06.681 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ClaimType`, `a`.`ClaimValue`, `a`.`UserId`
FROM `AspNetUserClaims` AS `a`
WHERE `a`.`UserId` = @__user_Id_0
2025-11-16 19:59:06.683 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (DbType = DateTime), @p2='?' (Size = 4000), @p3='?' (DbType = Boolean), @p4='?' (Size = 4000), @p5='?' (DbType = Boolean), @p6='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO `Tokens` (`AccessToken`, `CreatedAt`, `DeviceId`, `Expired`, `RefreshToken`, `Revoked`, `UserId`)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6);
SELECT `Id`
FROM `Tokens`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();
2025-11-16 19:59:06.683 +03:00 [INF] Added Token MappyApplication.Data.Token
2025-11-16 19:59:06.684 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessFailedCount`, `t`.`ConcurrencyStamp`, `t`.`Email`, `t`.`EmailConfirmed`, `t`.`FirstName`, `t`.`LastName`, `t`.`LockoutEnabled`, `t`.`LockoutEnd`, `t`.`NormalizedEmail`, `t`.`NormalizedUserName`, `t`.`PasswordHash`, `t`.`PhoneNumber`, `t`.`PhoneNumberConfirmed`, `t`.`SecurityStamp`, `t`.`TwoFactorEnabled`, `t`.`UserName`, `w`.`Id`, `w`.`Cadence`, `w`.`CityName`, `w`.`Coords`, `w`.`Date`, `w`.`Distance`, `w`.`Duration`, `w`.`Emoji`, `w`.`Pace`, `w`.`Type`, `w`.`UserId`, `c`.`Id`, `c`.`CityName`, `c`.`Country`, `c`.`Date`, `c`.`Emoji`, `c`.`Lat`, `c`.`Lng`, `c`.`Notes`, `c`.`UserId`
FROM (
    SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`FirstName`, `a`.`LastName`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`
    FROM `AspNetUsers` AS `a`
    WHERE `a`.`Id` = @__user_Id_0
    LIMIT 2
) AS `t`
LEFT JOIN `Workouts` AS `w` ON `t`.`Id` = `w`.`UserId`
LEFT JOIN `Cities` AS `c` ON `t`.`Id` = `c`.`UserId`
ORDER BY `t`.`Id`, `w`.`Id`
2025-11-16 19:59:06.685 +03:00 [INF] Executing ObjectResult, writing value of type 'MappyApplication.Models.user.AuthResponse'.
2025-11-16 19:59:06.685 +03:00 [INF] Executed action MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication) in 10.4312ms
2025-11-16 19:59:06.685 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication)'
2025-11-16 19:59:06.685 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:8080/api/v1/auth/refresh-token - 200 null application/json; charset=utf-8 22.8784ms
2025-11-16 19:59:18.151 +03:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:8080/api/v1/cities/4 - null null
2025-11-16 19:59:18.152 +03:00 [INF] CORS policy execution successful.
2025-11-16 19:59:18.152 +03:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:8080/api/v1/cities/4 - 204 null null 1.4573ms
2025-11-16 19:59:18.154 +03:00 [INF] Request starting HTTP/1.1 DELETE http://localhost:8080/api/v1/cities/4 - null null
2025-11-16 19:59:18.154 +03:00 [INF] CORS policy execution successful.
2025-11-16 19:59:18.187 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 19:59:18.187 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.CitiesController.DeleteById (MappyApplication)'
2025-11-16 19:59:18.187 +03:00 [INF] Route matched with {action = "DeleteById", controller = "Cities"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] DeleteById(Int32) on controller MappyApplication.Controllers.CitiesController (MappyApplication).
2025-11-16 19:59:18.194 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT `c`.`Id`, `c`.`CityName`, `c`.`Country`, `c`.`Date`, `c`.`Emoji`, `c`.`Lat`, `c`.`Lng`, `c`.`Notes`, `c`.`UserId`
FROM `Cities` AS `c`
WHERE `c`.`Id` = @__p_0
LIMIT 1
2025-11-16 19:59:18.198 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[@p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET AUTOCOMMIT = 1;
DELETE FROM `Cities`
WHERE `Id` = @p0;
SELECT ROW_COUNT();
2025-11-16 19:59:18.198 +03:00 [INF] Deleted Cities MappyApplication.Data.Cities
2025-11-16 19:59:18.198 +03:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType0`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-11-16 19:59:18.198 +03:00 [INF] Executed action MappyApplication.Controllers.CitiesController.DeleteById (MappyApplication) in 10.7103ms
2025-11-16 19:59:18.198 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.CitiesController.DeleteById (MappyApplication)'
2025-11-16 19:59:18.198 +03:00 [INF] Request finished HTTP/1.1 DELETE http://localhost:8080/api/v1/cities/4 - 200 null application/json; charset=utf-8 44.088ms
2025-11-16 19:59:18.201 +03:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:8080/api/v1/auth/refresh-token - null null
2025-11-16 19:59:18.201 +03:00 [INF] CORS policy execution successful.
2025-11-16 19:59:18.201 +03:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:8080/api/v1/auth/refresh-token - 204 null null 0.1692ms
2025-11-16 19:59:18.202 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:8080/api/v1/auth/refresh-token - null 0
2025-11-16 19:59:18.202 +03:00 [INF] CORS policy execution successful.
2025-11-16 19:59:18.220 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 19:59:18.220 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication)'
2025-11-16 19:59:18.220 +03:00 [INF] Route matched with {action = "RefreshToken", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.user.AuthResponse] RefreshToken() on controller MappyApplication.Controllers.AuthController (MappyApplication).
2025-11-16 19:59:18.221 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__refreshToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`RefreshToken` = @__refreshToken_0
LIMIT 2
2025-11-16 19:59:18.222 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`FirstName`, `a`.`LastName`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`
FROM `AspNetUsers` AS `a`
WHERE `a`.`Id` = @__p_0
LIMIT 1
2025-11-16 19:59:18.224 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']

        UPDATE TOKENS
        SET Revoked = true, Expired = true
        WHERE UserId = @p0
          AND DeviceId = @p1
          AND Revoked = false
          AND Expired = false
2025-11-16 19:59:18.225 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a0`.`Name`
FROM `AspNetUserRoles` AS `a`
INNER JOIN `AspNetRoles` AS `a0` ON `a`.`RoleId` = `a0`.`Id`
WHERE `a`.`UserId` = @__userId_0
2025-11-16 19:59:18.226 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ClaimType`, `a`.`ClaimValue`, `a`.`UserId`
FROM `AspNetUserClaims` AS `a`
WHERE `a`.`UserId` = @__user_Id_0
2025-11-16 19:59:18.227 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a0`.`Name`
FROM `AspNetUserRoles` AS `a`
INNER JOIN `AspNetRoles` AS `a0` ON `a`.`RoleId` = `a0`.`Id`
WHERE `a`.`UserId` = @__userId_0
2025-11-16 19:59:18.227 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ClaimType`, `a`.`ClaimValue`, `a`.`UserId`
FROM `AspNetUserClaims` AS `a`
WHERE `a`.`UserId` = @__user_Id_0
2025-11-16 19:59:18.228 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (DbType = DateTime), @p2='?' (Size = 4000), @p3='?' (DbType = Boolean), @p4='?' (Size = 4000), @p5='?' (DbType = Boolean), @p6='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO `Tokens` (`AccessToken`, `CreatedAt`, `DeviceId`, `Expired`, `RefreshToken`, `Revoked`, `UserId`)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6);
SELECT `Id`
FROM `Tokens`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();
2025-11-16 19:59:18.229 +03:00 [INF] Added Token MappyApplication.Data.Token
2025-11-16 19:59:18.230 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessFailedCount`, `t`.`ConcurrencyStamp`, `t`.`Email`, `t`.`EmailConfirmed`, `t`.`FirstName`, `t`.`LastName`, `t`.`LockoutEnabled`, `t`.`LockoutEnd`, `t`.`NormalizedEmail`, `t`.`NormalizedUserName`, `t`.`PasswordHash`, `t`.`PhoneNumber`, `t`.`PhoneNumberConfirmed`, `t`.`SecurityStamp`, `t`.`TwoFactorEnabled`, `t`.`UserName`, `w`.`Id`, `w`.`Cadence`, `w`.`CityName`, `w`.`Coords`, `w`.`Date`, `w`.`Distance`, `w`.`Duration`, `w`.`Emoji`, `w`.`Pace`, `w`.`Type`, `w`.`UserId`, `c`.`Id`, `c`.`CityName`, `c`.`Country`, `c`.`Date`, `c`.`Emoji`, `c`.`Lat`, `c`.`Lng`, `c`.`Notes`, `c`.`UserId`
FROM (
    SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`FirstName`, `a`.`LastName`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`
    FROM `AspNetUsers` AS `a`
    WHERE `a`.`Id` = @__user_Id_0
    LIMIT 2
) AS `t`
LEFT JOIN `Workouts` AS `w` ON `t`.`Id` = `w`.`UserId`
LEFT JOIN `Cities` AS `c` ON `t`.`Id` = `c`.`UserId`
ORDER BY `t`.`Id`, `w`.`Id`
2025-11-16 19:59:18.230 +03:00 [INF] Executing ObjectResult, writing value of type 'MappyApplication.Models.user.AuthResponse'.
2025-11-16 19:59:18.230 +03:00 [INF] Executed action MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication) in 10.3604ms
2025-11-16 19:59:18.230 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication)'
2025-11-16 19:59:18.230 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:8080/api/v1/auth/refresh-token - 200 null application/json; charset=utf-8 28.1405ms
2025-11-16 19:59:22.055 +03:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:8080/api/v1/cities - null null
2025-11-16 19:59:22.056 +03:00 [INF] CORS policy execution successful.
2025-11-16 19:59:22.056 +03:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:8080/api/v1/cities - 204 null null 0.5445ms
2025-11-16 19:59:22.058 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:8080/api/v1/cities - application/json 242
2025-11-16 19:59:22.058 +03:00 [INF] CORS policy execution successful.
2025-11-16 19:59:22.076 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 19:59:22.076 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.CitiesController.AddAsynch (MappyApplication)'
2025-11-16 19:59:22.076 +03:00 [INF] Route matched with {action = "AddAsynch", controller = "Cities"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] AddAsynch(MappyApplication.Data.Cities) on controller MappyApplication.Controllers.CitiesController (MappyApplication).
2025-11-16 19:59:22.079 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`FirstName`, `a`.`LastName`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`
FROM `AspNetUsers` AS `a`
WHERE `a`.`Id` = @__p_0
LIMIT 1
2025-11-16 19:59:22.083 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (Size = 4000), @p2='?' (DbType = DateTime), @p3='?' (Size = 4000), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (Size = 4000), @p7='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO `Cities` (`CityName`, `Country`, `Date`, `Emoji`, `Lat`, `Lng`, `Notes`, `UserId`)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7);
SELECT `Id`
FROM `Cities`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();
2025-11-16 19:59:22.084 +03:00 [INF] Added Cities MappyApplication.Data.Cities
2025-11-16 19:59:22.084 +03:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType0`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-11-16 19:59:22.084 +03:00 [INF] Executed action MappyApplication.Controllers.CitiesController.AddAsynch (MappyApplication) in 7.7002ms
2025-11-16 19:59:22.084 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.CitiesController.AddAsynch (MappyApplication)'
2025-11-16 19:59:22.084 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:8080/api/v1/cities - 200 null application/json; charset=utf-8 25.9915ms
2025-11-16 19:59:22.095 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:8080/api/v1/auth/refresh-token - null 0
2025-11-16 19:59:22.095 +03:00 [INF] CORS policy execution successful.
2025-11-16 19:59:22.110 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 19:59:22.110 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication)'
2025-11-16 19:59:22.110 +03:00 [INF] Route matched with {action = "RefreshToken", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.user.AuthResponse] RefreshToken() on controller MappyApplication.Controllers.AuthController (MappyApplication).
2025-11-16 19:59:22.111 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__refreshToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`RefreshToken` = @__refreshToken_0
LIMIT 2
2025-11-16 19:59:22.112 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`FirstName`, `a`.`LastName`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`
FROM `AspNetUsers` AS `a`
WHERE `a`.`Id` = @__p_0
LIMIT 1
2025-11-16 19:59:22.114 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']

        UPDATE TOKENS
        SET Revoked = true, Expired = true
        WHERE UserId = @p0
          AND DeviceId = @p1
          AND Revoked = false
          AND Expired = false
2025-11-16 19:59:22.115 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a0`.`Name`
FROM `AspNetUserRoles` AS `a`
INNER JOIN `AspNetRoles` AS `a0` ON `a`.`RoleId` = `a0`.`Id`
WHERE `a`.`UserId` = @__userId_0
2025-11-16 19:59:22.115 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ClaimType`, `a`.`ClaimValue`, `a`.`UserId`
FROM `AspNetUserClaims` AS `a`
WHERE `a`.`UserId` = @__user_Id_0
2025-11-16 19:59:22.116 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a0`.`Name`
FROM `AspNetUserRoles` AS `a`
INNER JOIN `AspNetRoles` AS `a0` ON `a`.`RoleId` = `a0`.`Id`
WHERE `a`.`UserId` = @__userId_0
2025-11-16 19:59:22.116 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ClaimType`, `a`.`ClaimValue`, `a`.`UserId`
FROM `AspNetUserClaims` AS `a`
WHERE `a`.`UserId` = @__user_Id_0
2025-11-16 19:59:22.117 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (DbType = DateTime), @p2='?' (Size = 4000), @p3='?' (DbType = Boolean), @p4='?' (Size = 4000), @p5='?' (DbType = Boolean), @p6='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO `Tokens` (`AccessToken`, `CreatedAt`, `DeviceId`, `Expired`, `RefreshToken`, `Revoked`, `UserId`)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6);
SELECT `Id`
FROM `Tokens`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();
2025-11-16 19:59:22.117 +03:00 [INF] Added Token MappyApplication.Data.Token
2025-11-16 19:59:22.118 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessFailedCount`, `t`.`ConcurrencyStamp`, `t`.`Email`, `t`.`EmailConfirmed`, `t`.`FirstName`, `t`.`LastName`, `t`.`LockoutEnabled`, `t`.`LockoutEnd`, `t`.`NormalizedEmail`, `t`.`NormalizedUserName`, `t`.`PasswordHash`, `t`.`PhoneNumber`, `t`.`PhoneNumberConfirmed`, `t`.`SecurityStamp`, `t`.`TwoFactorEnabled`, `t`.`UserName`, `w`.`Id`, `w`.`Cadence`, `w`.`CityName`, `w`.`Coords`, `w`.`Date`, `w`.`Distance`, `w`.`Duration`, `w`.`Emoji`, `w`.`Pace`, `w`.`Type`, `w`.`UserId`, `c`.`Id`, `c`.`CityName`, `c`.`Country`, `c`.`Date`, `c`.`Emoji`, `c`.`Lat`, `c`.`Lng`, `c`.`Notes`, `c`.`UserId`
FROM (
    SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`FirstName`, `a`.`LastName`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`
    FROM `AspNetUsers` AS `a`
    WHERE `a`.`Id` = @__user_Id_0
    LIMIT 2
) AS `t`
LEFT JOIN `Workouts` AS `w` ON `t`.`Id` = `w`.`UserId`
LEFT JOIN `Cities` AS `c` ON `t`.`Id` = `c`.`UserId`
ORDER BY `t`.`Id`, `w`.`Id`
2025-11-16 19:59:22.119 +03:00 [INF] Executing ObjectResult, writing value of type 'MappyApplication.Models.user.AuthResponse'.
2025-11-16 19:59:22.119 +03:00 [INF] Executed action MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication) in 8.446ms
2025-11-16 19:59:22.119 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication)'
2025-11-16 19:59:22.119 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:8080/api/v1/auth/refresh-token - 200 null application/json; charset=utf-8 24.0596ms
2025-11-16 19:59:26.120 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:8080/api/v1/cities - application/json 241
2025-11-16 19:59:26.121 +03:00 [INF] CORS policy execution successful.
2025-11-16 19:59:26.141 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 19:59:26.141 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.CitiesController.AddAsynch (MappyApplication)'
2025-11-16 19:59:26.141 +03:00 [INF] Route matched with {action = "AddAsynch", controller = "Cities"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] AddAsynch(MappyApplication.Data.Cities) on controller MappyApplication.Controllers.CitiesController (MappyApplication).
2025-11-16 19:59:26.143 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`FirstName`, `a`.`LastName`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`
FROM `AspNetUsers` AS `a`
WHERE `a`.`Id` = @__p_0
LIMIT 1
2025-11-16 19:59:26.145 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (Size = 4000), @p2='?' (DbType = DateTime), @p3='?' (Size = 4000), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (Size = 4000), @p7='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO `Cities` (`CityName`, `Country`, `Date`, `Emoji`, `Lat`, `Lng`, `Notes`, `UserId`)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7);
SELECT `Id`
FROM `Cities`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();
2025-11-16 19:59:26.146 +03:00 [INF] Added Cities MappyApplication.Data.Cities
2025-11-16 19:59:26.146 +03:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType0`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-11-16 19:59:26.146 +03:00 [INF] Executed action MappyApplication.Controllers.CitiesController.AddAsynch (MappyApplication) in 4.8954ms
2025-11-16 19:59:26.147 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.CitiesController.AddAsynch (MappyApplication)'
2025-11-16 19:59:26.147 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:8080/api/v1/cities - 200 null application/json; charset=utf-8 26.221ms
2025-11-16 19:59:26.157 +03:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:8080/api/v1/auth/refresh-token - null null
2025-11-16 19:59:26.157 +03:00 [INF] CORS policy execution successful.
2025-11-16 19:59:26.157 +03:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:8080/api/v1/auth/refresh-token - 204 null null 0.237ms
2025-11-16 19:59:26.158 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:8080/api/v1/auth/refresh-token - null 0
2025-11-16 19:59:26.158 +03:00 [INF] CORS policy execution successful.
2025-11-16 19:59:26.171 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 19:59:26.171 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication)'
2025-11-16 19:59:26.171 +03:00 [INF] Route matched with {action = "RefreshToken", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.user.AuthResponse] RefreshToken() on controller MappyApplication.Controllers.AuthController (MappyApplication).
2025-11-16 19:59:26.172 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__refreshToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`RefreshToken` = @__refreshToken_0
LIMIT 2
2025-11-16 19:59:26.172 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`FirstName`, `a`.`LastName`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`
FROM `AspNetUsers` AS `a`
WHERE `a`.`Id` = @__p_0
LIMIT 1
2025-11-16 19:59:26.175 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']

        UPDATE TOKENS
        SET Revoked = true, Expired = true
        WHERE UserId = @p0
          AND DeviceId = @p1
          AND Revoked = false
          AND Expired = false
2025-11-16 19:59:26.176 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a0`.`Name`
FROM `AspNetUserRoles` AS `a`
INNER JOIN `AspNetRoles` AS `a0` ON `a`.`RoleId` = `a0`.`Id`
WHERE `a`.`UserId` = @__userId_0
2025-11-16 19:59:26.176 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ClaimType`, `a`.`ClaimValue`, `a`.`UserId`
FROM `AspNetUserClaims` AS `a`
WHERE `a`.`UserId` = @__user_Id_0
2025-11-16 19:59:26.177 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a0`.`Name`
FROM `AspNetUserRoles` AS `a`
INNER JOIN `AspNetRoles` AS `a0` ON `a`.`RoleId` = `a0`.`Id`
WHERE `a`.`UserId` = @__userId_0
2025-11-16 19:59:26.177 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ClaimType`, `a`.`ClaimValue`, `a`.`UserId`
FROM `AspNetUserClaims` AS `a`
WHERE `a`.`UserId` = @__user_Id_0
2025-11-16 19:59:26.179 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (DbType = DateTime), @p2='?' (Size = 4000), @p3='?' (DbType = Boolean), @p4='?' (Size = 4000), @p5='?' (DbType = Boolean), @p6='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO `Tokens` (`AccessToken`, `CreatedAt`, `DeviceId`, `Expired`, `RefreshToken`, `Revoked`, `UserId`)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6);
SELECT `Id`
FROM `Tokens`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();
2025-11-16 19:59:26.180 +03:00 [INF] Added Token MappyApplication.Data.Token
2025-11-16 19:59:26.185 +03:00 [INF] Executed DbCommand (5ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessFailedCount`, `t`.`ConcurrencyStamp`, `t`.`Email`, `t`.`EmailConfirmed`, `t`.`FirstName`, `t`.`LastName`, `t`.`LockoutEnabled`, `t`.`LockoutEnd`, `t`.`NormalizedEmail`, `t`.`NormalizedUserName`, `t`.`PasswordHash`, `t`.`PhoneNumber`, `t`.`PhoneNumberConfirmed`, `t`.`SecurityStamp`, `t`.`TwoFactorEnabled`, `t`.`UserName`, `w`.`Id`, `w`.`Cadence`, `w`.`CityName`, `w`.`Coords`, `w`.`Date`, `w`.`Distance`, `w`.`Duration`, `w`.`Emoji`, `w`.`Pace`, `w`.`Type`, `w`.`UserId`, `c`.`Id`, `c`.`CityName`, `c`.`Country`, `c`.`Date`, `c`.`Emoji`, `c`.`Lat`, `c`.`Lng`, `c`.`Notes`, `c`.`UserId`
FROM (
    SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`FirstName`, `a`.`LastName`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`
    FROM `AspNetUsers` AS `a`
    WHERE `a`.`Id` = @__user_Id_0
    LIMIT 2
) AS `t`
LEFT JOIN `Workouts` AS `w` ON `t`.`Id` = `w`.`UserId`
LEFT JOIN `Cities` AS `c` ON `t`.`Id` = `c`.`UserId`
ORDER BY `t`.`Id`, `w`.`Id`
2025-11-16 19:59:26.185 +03:00 [INF] Executing ObjectResult, writing value of type 'MappyApplication.Models.user.AuthResponse'.
2025-11-16 19:59:26.185 +03:00 [INF] Executed action MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication) in 14.0211ms
2025-11-16 19:59:26.185 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication)'
2025-11-16 19:59:26.185 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:8080/api/v1/auth/refresh-token - 200 null application/json; charset=utf-8 27.0653ms
2025-11-16 19:59:51.901 +03:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:8080/api/v1/auth/refresh-token - null null
2025-11-16 19:59:51.903 +03:00 [INF] CORS policy execution successful.
2025-11-16 19:59:51.906 +03:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:8080/api/v1/auth/refresh-token - 204 null null 2.356ms
2025-11-16 19:59:51.907 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:8080/api/v1/auth/refresh-token - null 0
2025-11-16 19:59:51.907 +03:00 [INF] CORS policy execution successful.
2025-11-16 19:59:51.933 +03:00 [INF] Executed DbCommand (5ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 19:59:51.934 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication)'
2025-11-16 19:59:51.934 +03:00 [INF] Route matched with {action = "RefreshToken", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.user.AuthResponse] RefreshToken() on controller MappyApplication.Controllers.AuthController (MappyApplication).
2025-11-16 19:59:51.935 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__refreshToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`RefreshToken` = @__refreshToken_0
LIMIT 2
2025-11-16 19:59:51.937 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`FirstName`, `a`.`LastName`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`
FROM `AspNetUsers` AS `a`
WHERE `a`.`Id` = @__p_0
LIMIT 1
2025-11-16 19:59:51.940 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']

        UPDATE TOKENS
        SET Revoked = true, Expired = true
        WHERE UserId = @p0
          AND DeviceId = @p1
          AND Revoked = false
          AND Expired = false
2025-11-16 19:59:51.944 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a0`.`Name`
FROM `AspNetUserRoles` AS `a`
INNER JOIN `AspNetRoles` AS `a0` ON `a`.`RoleId` = `a0`.`Id`
WHERE `a`.`UserId` = @__userId_0
2025-11-16 19:59:51.945 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ClaimType`, `a`.`ClaimValue`, `a`.`UserId`
FROM `AspNetUserClaims` AS `a`
WHERE `a`.`UserId` = @__user_Id_0
2025-11-16 19:59:51.946 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a0`.`Name`
FROM `AspNetUserRoles` AS `a`
INNER JOIN `AspNetRoles` AS `a0` ON `a`.`RoleId` = `a0`.`Id`
WHERE `a`.`UserId` = @__userId_0
2025-11-16 19:59:51.946 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ClaimType`, `a`.`ClaimValue`, `a`.`UserId`
FROM `AspNetUserClaims` AS `a`
WHERE `a`.`UserId` = @__user_Id_0
2025-11-16 19:59:51.949 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (DbType = DateTime), @p2='?' (Size = 4000), @p3='?' (DbType = Boolean), @p4='?' (Size = 4000), @p5='?' (DbType = Boolean), @p6='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO `Tokens` (`AccessToken`, `CreatedAt`, `DeviceId`, `Expired`, `RefreshToken`, `Revoked`, `UserId`)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6);
SELECT `Id`
FROM `Tokens`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();
2025-11-16 19:59:51.949 +03:00 [INF] Added Token MappyApplication.Data.Token
2025-11-16 19:59:51.951 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessFailedCount`, `t`.`ConcurrencyStamp`, `t`.`Email`, `t`.`EmailConfirmed`, `t`.`FirstName`, `t`.`LastName`, `t`.`LockoutEnabled`, `t`.`LockoutEnd`, `t`.`NormalizedEmail`, `t`.`NormalizedUserName`, `t`.`PasswordHash`, `t`.`PhoneNumber`, `t`.`PhoneNumberConfirmed`, `t`.`SecurityStamp`, `t`.`TwoFactorEnabled`, `t`.`UserName`, `w`.`Id`, `w`.`Cadence`, `w`.`CityName`, `w`.`Coords`, `w`.`Date`, `w`.`Distance`, `w`.`Duration`, `w`.`Emoji`, `w`.`Pace`, `w`.`Type`, `w`.`UserId`, `c`.`Id`, `c`.`CityName`, `c`.`Country`, `c`.`Date`, `c`.`Emoji`, `c`.`Lat`, `c`.`Lng`, `c`.`Notes`, `c`.`UserId`
FROM (
    SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`FirstName`, `a`.`LastName`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`
    FROM `AspNetUsers` AS `a`
    WHERE `a`.`Id` = @__user_Id_0
    LIMIT 2
) AS `t`
LEFT JOIN `Workouts` AS `w` ON `t`.`Id` = `w`.`UserId`
LEFT JOIN `Cities` AS `c` ON `t`.`Id` = `c`.`UserId`
ORDER BY `t`.`Id`, `w`.`Id`
2025-11-16 19:59:51.952 +03:00 [INF] Executing ObjectResult, writing value of type 'MappyApplication.Models.user.AuthResponse'.
2025-11-16 19:59:51.953 +03:00 [INF] Executed action MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication) in 19.2322ms
2025-11-16 19:59:51.953 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication)'
2025-11-16 19:59:51.953 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:8080/api/v1/auth/refresh-token - 200 null application/json; charset=utf-8 46.0888ms
2025-11-16 19:59:58.066 +03:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:8080/api/v1/auth/refresh-token - null null
2025-11-16 19:59:58.068 +03:00 [INF] CORS policy execution successful.
2025-11-16 19:59:58.069 +03:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:8080/api/v1/auth/refresh-token - 204 null null 5.2666ms
2025-11-16 19:59:58.070 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:8080/api/v1/auth/refresh-token - null 0
2025-11-16 19:59:58.070 +03:00 [INF] CORS policy execution successful.
2025-11-16 19:59:58.106 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 19:59:58.106 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication)'
2025-11-16 19:59:58.106 +03:00 [INF] Route matched with {action = "RefreshToken", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.user.AuthResponse] RefreshToken() on controller MappyApplication.Controllers.AuthController (MappyApplication).
2025-11-16 19:59:58.108 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__refreshToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`RefreshToken` = @__refreshToken_0
LIMIT 2
2025-11-16 19:59:58.110 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`FirstName`, `a`.`LastName`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`
FROM `AspNetUsers` AS `a`
WHERE `a`.`Id` = @__p_0
LIMIT 1
2025-11-16 19:59:58.113 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']

        UPDATE TOKENS
        SET Revoked = true, Expired = true
        WHERE UserId = @p0
          AND DeviceId = @p1
          AND Revoked = false
          AND Expired = false
2025-11-16 19:59:58.115 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a0`.`Name`
FROM `AspNetUserRoles` AS `a`
INNER JOIN `AspNetRoles` AS `a0` ON `a`.`RoleId` = `a0`.`Id`
WHERE `a`.`UserId` = @__userId_0
2025-11-16 19:59:58.118 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ClaimType`, `a`.`ClaimValue`, `a`.`UserId`
FROM `AspNetUserClaims` AS `a`
WHERE `a`.`UserId` = @__user_Id_0
2025-11-16 19:59:58.119 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a0`.`Name`
FROM `AspNetUserRoles` AS `a`
INNER JOIN `AspNetRoles` AS `a0` ON `a`.`RoleId` = `a0`.`Id`
WHERE `a`.`UserId` = @__userId_0
2025-11-16 19:59:58.120 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ClaimType`, `a`.`ClaimValue`, `a`.`UserId`
FROM `AspNetUserClaims` AS `a`
WHERE `a`.`UserId` = @__user_Id_0
2025-11-16 19:59:58.122 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (DbType = DateTime), @p2='?' (Size = 4000), @p3='?' (DbType = Boolean), @p4='?' (Size = 4000), @p5='?' (DbType = Boolean), @p6='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO `Tokens` (`AccessToken`, `CreatedAt`, `DeviceId`, `Expired`, `RefreshToken`, `Revoked`, `UserId`)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6);
SELECT `Id`
FROM `Tokens`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();
2025-11-16 19:59:58.123 +03:00 [INF] Added Token MappyApplication.Data.Token
2025-11-16 19:59:58.124 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessFailedCount`, `t`.`ConcurrencyStamp`, `t`.`Email`, `t`.`EmailConfirmed`, `t`.`FirstName`, `t`.`LastName`, `t`.`LockoutEnabled`, `t`.`LockoutEnd`, `t`.`NormalizedEmail`, `t`.`NormalizedUserName`, `t`.`PasswordHash`, `t`.`PhoneNumber`, `t`.`PhoneNumberConfirmed`, `t`.`SecurityStamp`, `t`.`TwoFactorEnabled`, `t`.`UserName`, `w`.`Id`, `w`.`Cadence`, `w`.`CityName`, `w`.`Coords`, `w`.`Date`, `w`.`Distance`, `w`.`Duration`, `w`.`Emoji`, `w`.`Pace`, `w`.`Type`, `w`.`UserId`, `c`.`Id`, `c`.`CityName`, `c`.`Country`, `c`.`Date`, `c`.`Emoji`, `c`.`Lat`, `c`.`Lng`, `c`.`Notes`, `c`.`UserId`
FROM (
    SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`FirstName`, `a`.`LastName`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`
    FROM `AspNetUsers` AS `a`
    WHERE `a`.`Id` = @__user_Id_0
    LIMIT 2
) AS `t`
LEFT JOIN `Workouts` AS `w` ON `t`.`Id` = `w`.`UserId`
LEFT JOIN `Cities` AS `c` ON `t`.`Id` = `c`.`UserId`
ORDER BY `t`.`Id`, `w`.`Id`
2025-11-16 19:59:58.124 +03:00 [INF] Executing ObjectResult, writing value of type 'MappyApplication.Models.user.AuthResponse'.
2025-11-16 19:59:58.125 +03:00 [INF] Executed action MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication) in 18.4731ms
2025-11-16 19:59:58.125 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication)'
2025-11-16 19:59:58.125 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:8080/api/v1/auth/refresh-token - 200 null application/json; charset=utf-8 54.9473ms
2025-11-16 20:00:00.278 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:8080/api/v1/auth/refresh-token - null 0
2025-11-16 20:00:00.280 +03:00 [INF] CORS policy execution successful.
2025-11-16 20:00:00.304 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 20:00:00.304 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication)'
2025-11-16 20:00:00.304 +03:00 [INF] Route matched with {action = "RefreshToken", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.user.AuthResponse] RefreshToken() on controller MappyApplication.Controllers.AuthController (MappyApplication).
2025-11-16 20:00:00.306 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__refreshToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`RefreshToken` = @__refreshToken_0
LIMIT 2
2025-11-16 20:00:00.307 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`FirstName`, `a`.`LastName`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`
FROM `AspNetUsers` AS `a`
WHERE `a`.`Id` = @__p_0
LIMIT 1
2025-11-16 20:00:00.311 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']

        UPDATE TOKENS
        SET Revoked = true, Expired = true
        WHERE UserId = @p0
          AND DeviceId = @p1
          AND Revoked = false
          AND Expired = false
2025-11-16 20:00:00.312 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a0`.`Name`
FROM `AspNetUserRoles` AS `a`
INNER JOIN `AspNetRoles` AS `a0` ON `a`.`RoleId` = `a0`.`Id`
WHERE `a`.`UserId` = @__userId_0
2025-11-16 20:00:00.315 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ClaimType`, `a`.`ClaimValue`, `a`.`UserId`
FROM `AspNetUserClaims` AS `a`
WHERE `a`.`UserId` = @__user_Id_0
2025-11-16 20:00:00.316 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a0`.`Name`
FROM `AspNetUserRoles` AS `a`
INNER JOIN `AspNetRoles` AS `a0` ON `a`.`RoleId` = `a0`.`Id`
WHERE `a`.`UserId` = @__userId_0
2025-11-16 20:00:00.316 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ClaimType`, `a`.`ClaimValue`, `a`.`UserId`
FROM `AspNetUserClaims` AS `a`
WHERE `a`.`UserId` = @__user_Id_0
2025-11-16 20:00:00.318 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (DbType = DateTime), @p2='?' (Size = 4000), @p3='?' (DbType = Boolean), @p4='?' (Size = 4000), @p5='?' (DbType = Boolean), @p6='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO `Tokens` (`AccessToken`, `CreatedAt`, `DeviceId`, `Expired`, `RefreshToken`, `Revoked`, `UserId`)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6);
SELECT `Id`
FROM `Tokens`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();
2025-11-16 20:00:00.318 +03:00 [INF] Added Token MappyApplication.Data.Token
2025-11-16 20:00:00.319 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessFailedCount`, `t`.`ConcurrencyStamp`, `t`.`Email`, `t`.`EmailConfirmed`, `t`.`FirstName`, `t`.`LastName`, `t`.`LockoutEnabled`, `t`.`LockoutEnd`, `t`.`NormalizedEmail`, `t`.`NormalizedUserName`, `t`.`PasswordHash`, `t`.`PhoneNumber`, `t`.`PhoneNumberConfirmed`, `t`.`SecurityStamp`, `t`.`TwoFactorEnabled`, `t`.`UserName`, `w`.`Id`, `w`.`Cadence`, `w`.`CityName`, `w`.`Coords`, `w`.`Date`, `w`.`Distance`, `w`.`Duration`, `w`.`Emoji`, `w`.`Pace`, `w`.`Type`, `w`.`UserId`, `c`.`Id`, `c`.`CityName`, `c`.`Country`, `c`.`Date`, `c`.`Emoji`, `c`.`Lat`, `c`.`Lng`, `c`.`Notes`, `c`.`UserId`
FROM (
    SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`FirstName`, `a`.`LastName`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`
    FROM `AspNetUsers` AS `a`
    WHERE `a`.`Id` = @__user_Id_0
    LIMIT 2
) AS `t`
LEFT JOIN `Workouts` AS `w` ON `t`.`Id` = `w`.`UserId`
LEFT JOIN `Cities` AS `c` ON `t`.`Id` = `c`.`UserId`
ORDER BY `t`.`Id`, `w`.`Id`
2025-11-16 20:00:00.320 +03:00 [INF] Executing ObjectResult, writing value of type 'MappyApplication.Models.user.AuthResponse'.
2025-11-16 20:00:00.320 +03:00 [INF] Executed action MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication) in 15.8572ms
2025-11-16 20:00:00.320 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication)'
2025-11-16 20:00:00.320 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:8080/api/v1/auth/refresh-token - 200 null application/json; charset=utf-8 42.4904ms
2025-11-16 20:00:06.037 +03:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:8080/api/v1/auth/refresh-token - null null
2025-11-16 20:00:06.043 +03:00 [INF] CORS policy execution successful.
2025-11-16 20:00:06.044 +03:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:8080/api/v1/auth/refresh-token - 204 null null 6.9667ms
2025-11-16 20:00:06.044 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:8080/api/v1/auth/refresh-token - null 0
2025-11-16 20:00:06.044 +03:00 [INF] CORS policy execution successful.
2025-11-16 20:00:06.074 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 20:00:06.074 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication)'
2025-11-16 20:00:06.074 +03:00 [INF] Route matched with {action = "RefreshToken", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.user.AuthResponse] RefreshToken() on controller MappyApplication.Controllers.AuthController (MappyApplication).
2025-11-16 20:00:06.077 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__refreshToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`RefreshToken` = @__refreshToken_0
LIMIT 2
2025-11-16 20:00:06.078 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`FirstName`, `a`.`LastName`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`
FROM `AspNetUsers` AS `a`
WHERE `a`.`Id` = @__p_0
LIMIT 1
2025-11-16 20:00:06.081 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']

        UPDATE TOKENS
        SET Revoked = true, Expired = true
        WHERE UserId = @p0
          AND DeviceId = @p1
          AND Revoked = false
          AND Expired = false
2025-11-16 20:00:06.082 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a0`.`Name`
FROM `AspNetUserRoles` AS `a`
INNER JOIN `AspNetRoles` AS `a0` ON `a`.`RoleId` = `a0`.`Id`
WHERE `a`.`UserId` = @__userId_0
2025-11-16 20:00:06.083 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ClaimType`, `a`.`ClaimValue`, `a`.`UserId`
FROM `AspNetUserClaims` AS `a`
WHERE `a`.`UserId` = @__user_Id_0
2025-11-16 20:00:06.083 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a0`.`Name`
FROM `AspNetUserRoles` AS `a`
INNER JOIN `AspNetRoles` AS `a0` ON `a`.`RoleId` = `a0`.`Id`
WHERE `a`.`UserId` = @__userId_0
2025-11-16 20:00:06.084 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ClaimType`, `a`.`ClaimValue`, `a`.`UserId`
FROM `AspNetUserClaims` AS `a`
WHERE `a`.`UserId` = @__user_Id_0
2025-11-16 20:00:06.086 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (DbType = DateTime), @p2='?' (Size = 4000), @p3='?' (DbType = Boolean), @p4='?' (Size = 4000), @p5='?' (DbType = Boolean), @p6='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO `Tokens` (`AccessToken`, `CreatedAt`, `DeviceId`, `Expired`, `RefreshToken`, `Revoked`, `UserId`)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6);
SELECT `Id`
FROM `Tokens`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();
2025-11-16 20:00:06.086 +03:00 [INF] Added Token MappyApplication.Data.Token
2025-11-16 20:00:06.088 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessFailedCount`, `t`.`ConcurrencyStamp`, `t`.`Email`, `t`.`EmailConfirmed`, `t`.`FirstName`, `t`.`LastName`, `t`.`LockoutEnabled`, `t`.`LockoutEnd`, `t`.`NormalizedEmail`, `t`.`NormalizedUserName`, `t`.`PasswordHash`, `t`.`PhoneNumber`, `t`.`PhoneNumberConfirmed`, `t`.`SecurityStamp`, `t`.`TwoFactorEnabled`, `t`.`UserName`, `w`.`Id`, `w`.`Cadence`, `w`.`CityName`, `w`.`Coords`, `w`.`Date`, `w`.`Distance`, `w`.`Duration`, `w`.`Emoji`, `w`.`Pace`, `w`.`Type`, `w`.`UserId`, `c`.`Id`, `c`.`CityName`, `c`.`Country`, `c`.`Date`, `c`.`Emoji`, `c`.`Lat`, `c`.`Lng`, `c`.`Notes`, `c`.`UserId`
FROM (
    SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`FirstName`, `a`.`LastName`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`
    FROM `AspNetUsers` AS `a`
    WHERE `a`.`Id` = @__user_Id_0
    LIMIT 2
) AS `t`
LEFT JOIN `Workouts` AS `w` ON `t`.`Id` = `w`.`UserId`
LEFT JOIN `Cities` AS `c` ON `t`.`Id` = `c`.`UserId`
ORDER BY `t`.`Id`, `w`.`Id`
2025-11-16 20:00:06.088 +03:00 [INF] Executing ObjectResult, writing value of type 'MappyApplication.Models.user.AuthResponse'.
2025-11-16 20:00:06.089 +03:00 [INF] Executed action MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication) in 14.1325ms
2025-11-16 20:00:06.089 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication)'
2025-11-16 20:00:06.089 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:8080/api/v1/auth/refresh-token - 200 null application/json; charset=utf-8 44.2625ms
2025-11-16 20:00:10.219 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:8080/api/v1/auth/refresh-token - null 0
2025-11-16 20:00:10.222 +03:00 [INF] CORS policy execution successful.
2025-11-16 20:00:10.249 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 20:00:10.250 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication)'
2025-11-16 20:00:10.250 +03:00 [INF] Route matched with {action = "RefreshToken", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.user.AuthResponse] RefreshToken() on controller MappyApplication.Controllers.AuthController (MappyApplication).
2025-11-16 20:00:10.251 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__refreshToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`RefreshToken` = @__refreshToken_0
LIMIT 2
2025-11-16 20:00:10.252 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`FirstName`, `a`.`LastName`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`
FROM `AspNetUsers` AS `a`
WHERE `a`.`Id` = @__p_0
LIMIT 1
2025-11-16 20:00:10.255 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']

        UPDATE TOKENS
        SET Revoked = true, Expired = true
        WHERE UserId = @p0
          AND DeviceId = @p1
          AND Revoked = false
          AND Expired = false
2025-11-16 20:00:10.257 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a0`.`Name`
FROM `AspNetUserRoles` AS `a`
INNER JOIN `AspNetRoles` AS `a0` ON `a`.`RoleId` = `a0`.`Id`
WHERE `a`.`UserId` = @__userId_0
2025-11-16 20:00:10.259 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ClaimType`, `a`.`ClaimValue`, `a`.`UserId`
FROM `AspNetUserClaims` AS `a`
WHERE `a`.`UserId` = @__user_Id_0
2025-11-16 20:00:10.260 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a0`.`Name`
FROM `AspNetUserRoles` AS `a`
INNER JOIN `AspNetRoles` AS `a0` ON `a`.`RoleId` = `a0`.`Id`
WHERE `a`.`UserId` = @__userId_0
2025-11-16 20:00:10.261 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ClaimType`, `a`.`ClaimValue`, `a`.`UserId`
FROM `AspNetUserClaims` AS `a`
WHERE `a`.`UserId` = @__user_Id_0
2025-11-16 20:00:10.263 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (DbType = DateTime), @p2='?' (Size = 4000), @p3='?' (DbType = Boolean), @p4='?' (Size = 4000), @p5='?' (DbType = Boolean), @p6='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO `Tokens` (`AccessToken`, `CreatedAt`, `DeviceId`, `Expired`, `RefreshToken`, `Revoked`, `UserId`)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6);
SELECT `Id`
FROM `Tokens`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();
2025-11-16 20:00:10.263 +03:00 [INF] Added Token MappyApplication.Data.Token
2025-11-16 20:00:10.264 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessFailedCount`, `t`.`ConcurrencyStamp`, `t`.`Email`, `t`.`EmailConfirmed`, `t`.`FirstName`, `t`.`LastName`, `t`.`LockoutEnabled`, `t`.`LockoutEnd`, `t`.`NormalizedEmail`, `t`.`NormalizedUserName`, `t`.`PasswordHash`, `t`.`PhoneNumber`, `t`.`PhoneNumberConfirmed`, `t`.`SecurityStamp`, `t`.`TwoFactorEnabled`, `t`.`UserName`, `w`.`Id`, `w`.`Cadence`, `w`.`CityName`, `w`.`Coords`, `w`.`Date`, `w`.`Distance`, `w`.`Duration`, `w`.`Emoji`, `w`.`Pace`, `w`.`Type`, `w`.`UserId`, `c`.`Id`, `c`.`CityName`, `c`.`Country`, `c`.`Date`, `c`.`Emoji`, `c`.`Lat`, `c`.`Lng`, `c`.`Notes`, `c`.`UserId`
FROM (
    SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`FirstName`, `a`.`LastName`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`
    FROM `AspNetUsers` AS `a`
    WHERE `a`.`Id` = @__user_Id_0
    LIMIT 2
) AS `t`
LEFT JOIN `Workouts` AS `w` ON `t`.`Id` = `w`.`UserId`
LEFT JOIN `Cities` AS `c` ON `t`.`Id` = `c`.`UserId`
ORDER BY `t`.`Id`, `w`.`Id`
2025-11-16 20:00:10.266 +03:00 [INF] Executing ObjectResult, writing value of type 'MappyApplication.Models.user.AuthResponse'.
2025-11-16 20:00:10.266 +03:00 [INF] Executed action MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication) in 16.3622ms
2025-11-16 20:00:10.266 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication)'
2025-11-16 20:00:10.266 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:8080/api/v1/auth/refresh-token - 200 null application/json; charset=utf-8 46.9082ms
2025-11-16 20:01:10.036 +03:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:8080/api/v1/cities/[object Object] - null null
2025-11-16 20:01:10.036 +03:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:8080/api/v1/cities/[object Object] - null null
2025-11-16 20:01:10.040 +03:00 [INF] CORS policy execution successful.
2025-11-16 20:01:10.040 +03:00 [INF] CORS policy execution successful.
2025-11-16 20:01:10.041 +03:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:8080/api/v1/cities/[object Object] - 204 null null 5.1125ms
2025-11-16 20:01:10.041 +03:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:8080/api/v1/cities/[object Object] - 204 null null 5.2326ms
2025-11-16 20:01:10.043 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - null null
2025-11-16 20:01:10.046 +03:00 [INF] CORS policy execution successful.
2025-11-16 20:01:10.077 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 20:01:10.079 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:10.091 +03:00 [INF] Route matched with {action = "GetById", controller = "Cities"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.cities.CitiesDto] GetById(Int32) on controller MappyApplication.Controllers.CitiesController (MappyApplication).
2025-11-16 20:01:10.112 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-11-16 20:01:10.116 +03:00 [INF] Executed action MappyApplication.Controllers.CitiesController.GetById (MappyApplication) in 24.7883ms
2025-11-16 20:01:10.116 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:10.116 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - 400 null application/problem+json; charset=utf-8 73.2452ms
2025-11-16 20:01:10.116 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - null null
2025-11-16 20:01:10.117 +03:00 [INF] CORS policy execution successful.
2025-11-16 20:01:10.129 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 20:01:10.129 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:10.129 +03:00 [INF] Route matched with {action = "GetById", controller = "Cities"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.cities.CitiesDto] GetById(Int32) on controller MappyApplication.Controllers.CitiesController (MappyApplication).
2025-11-16 20:01:10.130 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-11-16 20:01:10.130 +03:00 [INF] Executed action MappyApplication.Controllers.CitiesController.GetById (MappyApplication) in 0.4912ms
2025-11-16 20:01:10.130 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:10.130 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - 400 null application/problem+json; charset=utf-8 13.6512ms
2025-11-16 20:01:10.131 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - null null
2025-11-16 20:01:10.131 +03:00 [INF] CORS policy execution successful.
2025-11-16 20:01:10.143 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 20:01:10.143 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:10.143 +03:00 [INF] Route matched with {action = "GetById", controller = "Cities"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.cities.CitiesDto] GetById(Int32) on controller MappyApplication.Controllers.CitiesController (MappyApplication).
2025-11-16 20:01:10.144 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-11-16 20:01:10.144 +03:00 [INF] Executed action MappyApplication.Controllers.CitiesController.GetById (MappyApplication) in 0.4982ms
2025-11-16 20:01:10.144 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:10.144 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - 400 null application/problem+json; charset=utf-8 13.4602ms
2025-11-16 20:01:10.145 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - null null
2025-11-16 20:01:10.145 +03:00 [INF] CORS policy execution successful.
2025-11-16 20:01:10.160 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 20:01:10.160 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:10.160 +03:00 [INF] Route matched with {action = "GetById", controller = "Cities"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.cities.CitiesDto] GetById(Int32) on controller MappyApplication.Controllers.CitiesController (MappyApplication).
2025-11-16 20:01:10.161 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-11-16 20:01:10.161 +03:00 [INF] Executed action MappyApplication.Controllers.CitiesController.GetById (MappyApplication) in 0.394ms
2025-11-16 20:01:10.161 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:10.161 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - 400 null application/problem+json; charset=utf-8 15.9195ms
2025-11-16 20:01:10.161 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - null null
2025-11-16 20:01:10.161 +03:00 [INF] CORS policy execution successful.
2025-11-16 20:01:10.183 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 20:01:10.184 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:10.184 +03:00 [INF] Route matched with {action = "GetById", controller = "Cities"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.cities.CitiesDto] GetById(Int32) on controller MappyApplication.Controllers.CitiesController (MappyApplication).
2025-11-16 20:01:10.184 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-11-16 20:01:10.184 +03:00 [INF] Executed action MappyApplication.Controllers.CitiesController.GetById (MappyApplication) in 0.4145ms
2025-11-16 20:01:10.184 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:10.184 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - 400 null application/problem+json; charset=utf-8 22.9057ms
2025-11-16 20:01:10.185 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - null null
2025-11-16 20:01:10.185 +03:00 [INF] CORS policy execution successful.
2025-11-16 20:01:10.200 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 20:01:10.200 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:10.200 +03:00 [INF] Route matched with {action = "GetById", controller = "Cities"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.cities.CitiesDto] GetById(Int32) on controller MappyApplication.Controllers.CitiesController (MappyApplication).
2025-11-16 20:01:10.201 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-11-16 20:01:10.201 +03:00 [INF] Executed action MappyApplication.Controllers.CitiesController.GetById (MappyApplication) in 0.5075ms
2025-11-16 20:01:10.201 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:10.201 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - 400 null application/problem+json; charset=utf-8 15.907ms
2025-11-16 20:01:10.201 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - null null
2025-11-16 20:01:10.202 +03:00 [INF] CORS policy execution successful.
2025-11-16 20:01:10.215 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 20:01:10.215 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:10.215 +03:00 [INF] Route matched with {action = "GetById", controller = "Cities"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.cities.CitiesDto] GetById(Int32) on controller MappyApplication.Controllers.CitiesController (MappyApplication).
2025-11-16 20:01:10.216 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-11-16 20:01:10.216 +03:00 [INF] Executed action MappyApplication.Controllers.CitiesController.GetById (MappyApplication) in 0.5175ms
2025-11-16 20:01:10.216 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:10.216 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - 400 null application/problem+json; charset=utf-8 14.3609ms
2025-11-16 20:01:10.216 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - null null
2025-11-16 20:01:10.216 +03:00 [INF] CORS policy execution successful.
2025-11-16 20:01:10.227 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 20:01:10.227 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:10.227 +03:00 [INF] Route matched with {action = "GetById", controller = "Cities"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.cities.CitiesDto] GetById(Int32) on controller MappyApplication.Controllers.CitiesController (MappyApplication).
2025-11-16 20:01:10.228 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-11-16 20:01:10.228 +03:00 [INF] Executed action MappyApplication.Controllers.CitiesController.GetById (MappyApplication) in 0.3417ms
2025-11-16 20:01:10.228 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:10.228 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - 400 null application/problem+json; charset=utf-8 11.5539ms
2025-11-16 20:01:10.228 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - null null
2025-11-16 20:01:10.228 +03:00 [INF] CORS policy execution successful.
2025-11-16 20:01:10.238 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 20:01:10.239 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:10.239 +03:00 [INF] Route matched with {action = "GetById", controller = "Cities"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.cities.CitiesDto] GetById(Int32) on controller MappyApplication.Controllers.CitiesController (MappyApplication).
2025-11-16 20:01:10.239 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-11-16 20:01:10.239 +03:00 [INF] Executed action MappyApplication.Controllers.CitiesController.GetById (MappyApplication) in 0.3781ms
2025-11-16 20:01:10.239 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:10.239 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - 400 null application/problem+json; charset=utf-8 10.7723ms
2025-11-16 20:01:10.239 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - null null
2025-11-16 20:01:10.240 +03:00 [INF] CORS policy execution successful.
2025-11-16 20:01:10.251 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 20:01:10.251 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:10.251 +03:00 [INF] Route matched with {action = "GetById", controller = "Cities"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.cities.CitiesDto] GetById(Int32) on controller MappyApplication.Controllers.CitiesController (MappyApplication).
2025-11-16 20:01:10.251 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-11-16 20:01:10.251 +03:00 [INF] Executed action MappyApplication.Controllers.CitiesController.GetById (MappyApplication) in 0.3205ms
2025-11-16 20:01:10.251 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:10.251 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - 400 null application/problem+json; charset=utf-8 11.9398ms
2025-11-16 20:01:10.252 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - null null
2025-11-16 20:01:10.252 +03:00 [INF] CORS policy execution successful.
2025-11-16 20:01:10.262 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 20:01:10.262 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:10.262 +03:00 [INF] Route matched with {action = "GetById", controller = "Cities"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.cities.CitiesDto] GetById(Int32) on controller MappyApplication.Controllers.CitiesController (MappyApplication).
2025-11-16 20:01:10.262 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-11-16 20:01:10.262 +03:00 [INF] Executed action MappyApplication.Controllers.CitiesController.GetById (MappyApplication) in 0.3728ms
2025-11-16 20:01:10.262 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:10.262 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - 400 null application/problem+json; charset=utf-8 10.7497ms
2025-11-16 20:01:10.263 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - null null
2025-11-16 20:01:10.263 +03:00 [INF] CORS policy execution successful.
2025-11-16 20:01:10.277 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 20:01:10.277 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:10.277 +03:00 [INF] Route matched with {action = "GetById", controller = "Cities"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.cities.CitiesDto] GetById(Int32) on controller MappyApplication.Controllers.CitiesController (MappyApplication).
2025-11-16 20:01:10.277 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-11-16 20:01:10.277 +03:00 [INF] Executed action MappyApplication.Controllers.CitiesController.GetById (MappyApplication) in 0.3026ms
2025-11-16 20:01:10.277 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:10.277 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - 400 null application/problem+json; charset=utf-8 14.1279ms
2025-11-16 20:01:10.277 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - null null
2025-11-16 20:01:10.278 +03:00 [INF] CORS policy execution successful.
2025-11-16 20:01:10.287 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 20:01:10.288 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:10.288 +03:00 [INF] Route matched with {action = "GetById", controller = "Cities"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.cities.CitiesDto] GetById(Int32) on controller MappyApplication.Controllers.CitiesController (MappyApplication).
2025-11-16 20:01:10.288 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-11-16 20:01:10.288 +03:00 [INF] Executed action MappyApplication.Controllers.CitiesController.GetById (MappyApplication) in 0.3778ms
2025-11-16 20:01:10.288 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:10.288 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - 400 null application/problem+json; charset=utf-8 10.7092ms
2025-11-16 20:01:10.289 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - null null
2025-11-16 20:01:10.289 +03:00 [INF] CORS policy execution successful.
2025-11-16 20:01:10.300 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 20:01:10.300 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:10.300 +03:00 [INF] Route matched with {action = "GetById", controller = "Cities"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.cities.CitiesDto] GetById(Int32) on controller MappyApplication.Controllers.CitiesController (MappyApplication).
2025-11-16 20:01:10.300 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-11-16 20:01:10.300 +03:00 [INF] Executed action MappyApplication.Controllers.CitiesController.GetById (MappyApplication) in 0.2665ms
2025-11-16 20:01:10.300 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:10.300 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - 400 null application/problem+json; charset=utf-8 11.7642ms
2025-11-16 20:01:10.303 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - null null
2025-11-16 20:01:10.303 +03:00 [INF] CORS policy execution successful.
2025-11-16 20:01:10.313 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 20:01:10.313 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:10.314 +03:00 [INF] Route matched with {action = "GetById", controller = "Cities"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.cities.CitiesDto] GetById(Int32) on controller MappyApplication.Controllers.CitiesController (MappyApplication).
2025-11-16 20:01:10.314 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-11-16 20:01:10.314 +03:00 [INF] Executed action MappyApplication.Controllers.CitiesController.GetById (MappyApplication) in 0.3014ms
2025-11-16 20:01:10.314 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:10.314 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - 400 null application/problem+json; charset=utf-8 11.1929ms
2025-11-16 20:01:10.316 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - null null
2025-11-16 20:01:10.316 +03:00 [INF] CORS policy execution successful.
2025-11-16 20:01:10.328 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 20:01:10.328 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:10.328 +03:00 [INF] Route matched with {action = "GetById", controller = "Cities"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.cities.CitiesDto] GetById(Int32) on controller MappyApplication.Controllers.CitiesController (MappyApplication).
2025-11-16 20:01:10.328 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-11-16 20:01:10.328 +03:00 [INF] Executed action MappyApplication.Controllers.CitiesController.GetById (MappyApplication) in 0.3128ms
2025-11-16 20:01:10.328 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:10.328 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - 400 null application/problem+json; charset=utf-8 11.6624ms
2025-11-16 20:01:10.331 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - null null
2025-11-16 20:01:10.331 +03:00 [INF] CORS policy execution successful.
2025-11-16 20:01:10.341 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 20:01:10.342 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:10.342 +03:00 [INF] Route matched with {action = "GetById", controller = "Cities"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.cities.CitiesDto] GetById(Int32) on controller MappyApplication.Controllers.CitiesController (MappyApplication).
2025-11-16 20:01:10.342 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-11-16 20:01:10.342 +03:00 [INF] Executed action MappyApplication.Controllers.CitiesController.GetById (MappyApplication) in 0.6684ms
2025-11-16 20:01:10.342 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:10.342 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - 400 null application/problem+json; charset=utf-8 11.7073ms
2025-11-16 20:01:10.345 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - null null
2025-11-16 20:01:10.345 +03:00 [INF] CORS policy execution successful.
2025-11-16 20:01:10.355 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 20:01:10.356 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:10.356 +03:00 [INF] Route matched with {action = "GetById", controller = "Cities"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.cities.CitiesDto] GetById(Int32) on controller MappyApplication.Controllers.CitiesController (MappyApplication).
2025-11-16 20:01:10.356 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-11-16 20:01:10.356 +03:00 [INF] Executed action MappyApplication.Controllers.CitiesController.GetById (MappyApplication) in 0.6302ms
2025-11-16 20:01:10.357 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:10.357 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - 400 null application/problem+json; charset=utf-8 11.6507ms
2025-11-16 20:01:10.360 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - null null
2025-11-16 20:01:10.360 +03:00 [INF] CORS policy execution successful.
2025-11-16 20:01:10.371 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 20:01:10.371 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:10.371 +03:00 [INF] Route matched with {action = "GetById", controller = "Cities"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.cities.CitiesDto] GetById(Int32) on controller MappyApplication.Controllers.CitiesController (MappyApplication).
2025-11-16 20:01:10.372 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-11-16 20:01:10.372 +03:00 [INF] Executed action MappyApplication.Controllers.CitiesController.GetById (MappyApplication) in 0.3832ms
2025-11-16 20:01:10.372 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:10.372 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - 400 null application/problem+json; charset=utf-8 11.6529ms
2025-11-16 20:01:10.375 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - null null
2025-11-16 20:01:10.375 +03:00 [INF] CORS policy execution successful.
2025-11-16 20:01:10.386 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 20:01:10.386 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:10.386 +03:00 [INF] Route matched with {action = "GetById", controller = "Cities"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.cities.CitiesDto] GetById(Int32) on controller MappyApplication.Controllers.CitiesController (MappyApplication).
2025-11-16 20:01:10.386 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-11-16 20:01:10.386 +03:00 [INF] Executed action MappyApplication.Controllers.CitiesController.GetById (MappyApplication) in 0.5227ms
2025-11-16 20:01:10.386 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:10.386 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - 400 null application/problem+json; charset=utf-8 11.4334ms
2025-11-16 20:01:10.389 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - null null
2025-11-16 20:01:10.389 +03:00 [INF] CORS policy execution successful.
2025-11-16 20:01:10.399 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 20:01:10.399 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:10.399 +03:00 [INF] Route matched with {action = "GetById", controller = "Cities"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.cities.CitiesDto] GetById(Int32) on controller MappyApplication.Controllers.CitiesController (MappyApplication).
2025-11-16 20:01:10.399 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-11-16 20:01:10.399 +03:00 [INF] Executed action MappyApplication.Controllers.CitiesController.GetById (MappyApplication) in 0.3157ms
2025-11-16 20:01:10.399 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:10.399 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - 400 null application/problem+json; charset=utf-8 10.2966ms
2025-11-16 20:01:10.402 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - null null
2025-11-16 20:01:10.402 +03:00 [INF] CORS policy execution successful.
2025-11-16 20:01:10.418 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 20:01:10.419 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:10.419 +03:00 [INF] Route matched with {action = "GetById", controller = "Cities"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.cities.CitiesDto] GetById(Int32) on controller MappyApplication.Controllers.CitiesController (MappyApplication).
2025-11-16 20:01:10.419 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-11-16 20:01:10.419 +03:00 [INF] Executed action MappyApplication.Controllers.CitiesController.GetById (MappyApplication) in 0.3889ms
2025-11-16 20:01:10.419 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:10.419 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - 400 null application/problem+json; charset=utf-8 17.1746ms
2025-11-16 20:01:10.422 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - null null
2025-11-16 20:01:10.422 +03:00 [INF] CORS policy execution successful.
2025-11-16 20:01:10.434 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 20:01:10.434 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:10.434 +03:00 [INF] Route matched with {action = "GetById", controller = "Cities"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.cities.CitiesDto] GetById(Int32) on controller MappyApplication.Controllers.CitiesController (MappyApplication).
2025-11-16 20:01:10.434 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-11-16 20:01:10.434 +03:00 [INF] Executed action MappyApplication.Controllers.CitiesController.GetById (MappyApplication) in 0.2939ms
2025-11-16 20:01:10.434 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:10.434 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - 400 null application/problem+json; charset=utf-8 12.5152ms
2025-11-16 20:01:10.437 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - null null
2025-11-16 20:01:10.437 +03:00 [INF] CORS policy execution successful.
2025-11-16 20:01:10.448 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 20:01:10.448 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:10.448 +03:00 [INF] Route matched with {action = "GetById", controller = "Cities"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.cities.CitiesDto] GetById(Int32) on controller MappyApplication.Controllers.CitiesController (MappyApplication).
2025-11-16 20:01:10.448 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-11-16 20:01:10.448 +03:00 [INF] Executed action MappyApplication.Controllers.CitiesController.GetById (MappyApplication) in 0.325ms
2025-11-16 20:01:10.449 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:10.449 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - 400 null application/problem+json; charset=utf-8 11.8571ms
2025-11-16 20:01:10.451 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - null null
2025-11-16 20:01:10.451 +03:00 [INF] CORS policy execution successful.
2025-11-16 20:01:10.461 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 20:01:10.461 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:10.461 +03:00 [INF] Route matched with {action = "GetById", controller = "Cities"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.cities.CitiesDto] GetById(Int32) on controller MappyApplication.Controllers.CitiesController (MappyApplication).
2025-11-16 20:01:10.462 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-11-16 20:01:10.462 +03:00 [INF] Executed action MappyApplication.Controllers.CitiesController.GetById (MappyApplication) in 0.3407ms
2025-11-16 20:01:10.462 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:10.462 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - 400 null application/problem+json; charset=utf-8 10.8813ms
2025-11-16 20:01:10.464 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - null null
2025-11-16 20:01:10.464 +03:00 [INF] CORS policy execution successful.
2025-11-16 20:01:10.474 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 20:01:10.474 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:10.474 +03:00 [INF] Route matched with {action = "GetById", controller = "Cities"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.cities.CitiesDto] GetById(Int32) on controller MappyApplication.Controllers.CitiesController (MappyApplication).
2025-11-16 20:01:10.475 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-11-16 20:01:10.475 +03:00 [INF] Executed action MappyApplication.Controllers.CitiesController.GetById (MappyApplication) in 0.2952ms
2025-11-16 20:01:10.475 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:10.475 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - 400 null application/problem+json; charset=utf-8 10.4503ms
2025-11-16 20:01:10.477 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - null null
2025-11-16 20:01:10.477 +03:00 [INF] CORS policy execution successful.
2025-11-16 20:01:10.488 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 20:01:10.488 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:10.488 +03:00 [INF] Route matched with {action = "GetById", controller = "Cities"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.cities.CitiesDto] GetById(Int32) on controller MappyApplication.Controllers.CitiesController (MappyApplication).
2025-11-16 20:01:10.488 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-11-16 20:01:10.488 +03:00 [INF] Executed action MappyApplication.Controllers.CitiesController.GetById (MappyApplication) in 0.24ms
2025-11-16 20:01:10.488 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:10.488 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - 400 null application/problem+json; charset=utf-8 11.3597ms
2025-11-16 20:01:10.491 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - null null
2025-11-16 20:01:10.491 +03:00 [INF] CORS policy execution successful.
2025-11-16 20:01:10.504 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 20:01:10.504 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:10.504 +03:00 [INF] Route matched with {action = "GetById", controller = "Cities"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.cities.CitiesDto] GetById(Int32) on controller MappyApplication.Controllers.CitiesController (MappyApplication).
2025-11-16 20:01:10.504 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-11-16 20:01:10.504 +03:00 [INF] Executed action MappyApplication.Controllers.CitiesController.GetById (MappyApplication) in 0.2492ms
2025-11-16 20:01:10.504 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:10.504 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - 400 null application/problem+json; charset=utf-8 13.3963ms
2025-11-16 20:01:10.507 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - null null
2025-11-16 20:01:10.507 +03:00 [INF] CORS policy execution successful.
2025-11-16 20:01:10.520 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 20:01:10.521 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:10.521 +03:00 [INF] Route matched with {action = "GetById", controller = "Cities"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.cities.CitiesDto] GetById(Int32) on controller MappyApplication.Controllers.CitiesController (MappyApplication).
2025-11-16 20:01:10.521 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-11-16 20:01:10.521 +03:00 [INF] Executed action MappyApplication.Controllers.CitiesController.GetById (MappyApplication) in 0.2877ms
2025-11-16 20:01:10.521 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:10.521 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - 400 null application/problem+json; charset=utf-8 13.9484ms
2025-11-16 20:01:10.523 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - null null
2025-11-16 20:01:10.523 +03:00 [INF] CORS policy execution successful.
2025-11-16 20:01:10.535 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 20:01:10.535 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:10.535 +03:00 [INF] Route matched with {action = "GetById", controller = "Cities"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.cities.CitiesDto] GetById(Int32) on controller MappyApplication.Controllers.CitiesController (MappyApplication).
2025-11-16 20:01:10.535 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-11-16 20:01:10.535 +03:00 [INF] Executed action MappyApplication.Controllers.CitiesController.GetById (MappyApplication) in 0.2286ms
2025-11-16 20:01:10.535 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:10.535 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - 400 null application/problem+json; charset=utf-8 12.1991ms
2025-11-16 20:01:10.537 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - null null
2025-11-16 20:01:10.538 +03:00 [INF] CORS policy execution successful.
2025-11-16 20:01:10.552 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 20:01:10.552 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:10.552 +03:00 [INF] Route matched with {action = "GetById", controller = "Cities"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.cities.CitiesDto] GetById(Int32) on controller MappyApplication.Controllers.CitiesController (MappyApplication).
2025-11-16 20:01:10.553 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-11-16 20:01:10.553 +03:00 [INF] Executed action MappyApplication.Controllers.CitiesController.GetById (MappyApplication) in 0.2544ms
2025-11-16 20:01:10.553 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:10.553 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - 400 null application/problem+json; charset=utf-8 15.198ms
2025-11-16 20:01:10.555 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - null null
2025-11-16 20:01:10.555 +03:00 [INF] CORS policy execution successful.
2025-11-16 20:01:10.567 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 20:01:10.567 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:10.567 +03:00 [INF] Route matched with {action = "GetById", controller = "Cities"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.cities.CitiesDto] GetById(Int32) on controller MappyApplication.Controllers.CitiesController (MappyApplication).
2025-11-16 20:01:10.567 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-11-16 20:01:10.567 +03:00 [INF] Executed action MappyApplication.Controllers.CitiesController.GetById (MappyApplication) in 0.3189ms
2025-11-16 20:01:10.567 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:10.567 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - 400 null application/problem+json; charset=utf-8 12.549ms
2025-11-16 20:01:10.570 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - null null
2025-11-16 20:01:10.570 +03:00 [INF] CORS policy execution successful.
2025-11-16 20:01:10.584 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 20:01:10.584 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:10.584 +03:00 [INF] Route matched with {action = "GetById", controller = "Cities"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.cities.CitiesDto] GetById(Int32) on controller MappyApplication.Controllers.CitiesController (MappyApplication).
2025-11-16 20:01:10.584 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-11-16 20:01:10.584 +03:00 [INF] Executed action MappyApplication.Controllers.CitiesController.GetById (MappyApplication) in 0.3275ms
2025-11-16 20:01:10.584 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:10.585 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - 400 null application/problem+json; charset=utf-8 14.9323ms
2025-11-16 20:01:10.587 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - null null
2025-11-16 20:01:10.587 +03:00 [INF] CORS policy execution successful.
2025-11-16 20:01:10.602 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 20:01:10.602 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:10.603 +03:00 [INF] Route matched with {action = "GetById", controller = "Cities"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.cities.CitiesDto] GetById(Int32) on controller MappyApplication.Controllers.CitiesController (MappyApplication).
2025-11-16 20:01:10.603 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-11-16 20:01:10.603 +03:00 [INF] Executed action MappyApplication.Controllers.CitiesController.GetById (MappyApplication) in 0.3467ms
2025-11-16 20:01:10.603 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:10.603 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - 400 null application/problem+json; charset=utf-8 15.6262ms
2025-11-16 20:01:10.605 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - null null
2025-11-16 20:01:10.605 +03:00 [INF] CORS policy execution successful.
2025-11-16 20:01:10.619 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 20:01:10.620 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:10.620 +03:00 [INF] Route matched with {action = "GetById", controller = "Cities"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.cities.CitiesDto] GetById(Int32) on controller MappyApplication.Controllers.CitiesController (MappyApplication).
2025-11-16 20:01:10.620 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-11-16 20:01:10.620 +03:00 [INF] Executed action MappyApplication.Controllers.CitiesController.GetById (MappyApplication) in 0.3489ms
2025-11-16 20:01:10.620 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:10.620 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - 400 null application/problem+json; charset=utf-8 14.619ms
2025-11-16 20:01:10.623 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - null null
2025-11-16 20:01:10.623 +03:00 [INF] CORS policy execution successful.
2025-11-16 20:01:10.636 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 20:01:10.637 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:10.637 +03:00 [INF] Route matched with {action = "GetById", controller = "Cities"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.cities.CitiesDto] GetById(Int32) on controller MappyApplication.Controllers.CitiesController (MappyApplication).
2025-11-16 20:01:10.637 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-11-16 20:01:10.637 +03:00 [INF] Executed action MappyApplication.Controllers.CitiesController.GetById (MappyApplication) in 0.3597ms
2025-11-16 20:01:10.637 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:10.637 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - 400 null application/problem+json; charset=utf-8 14.2847ms
2025-11-16 20:01:10.640 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - null null
2025-11-16 20:01:10.640 +03:00 [INF] CORS policy execution successful.
2025-11-16 20:01:10.651 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 20:01:10.651 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:10.651 +03:00 [INF] Route matched with {action = "GetById", controller = "Cities"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.cities.CitiesDto] GetById(Int32) on controller MappyApplication.Controllers.CitiesController (MappyApplication).
2025-11-16 20:01:10.652 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-11-16 20:01:10.652 +03:00 [INF] Executed action MappyApplication.Controllers.CitiesController.GetById (MappyApplication) in 0.3017ms
2025-11-16 20:01:10.652 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:10.652 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - 400 null application/problem+json; charset=utf-8 11.9407ms
2025-11-16 20:01:10.655 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - null null
2025-11-16 20:01:10.655 +03:00 [INF] CORS policy execution successful.
2025-11-16 20:01:10.667 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 20:01:10.667 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:10.667 +03:00 [INF] Route matched with {action = "GetById", controller = "Cities"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.cities.CitiesDto] GetById(Int32) on controller MappyApplication.Controllers.CitiesController (MappyApplication).
2025-11-16 20:01:10.667 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-11-16 20:01:10.668 +03:00 [INF] Executed action MappyApplication.Controllers.CitiesController.GetById (MappyApplication) in 0.3358ms
2025-11-16 20:01:10.668 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:10.668 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - 400 null application/problem+json; charset=utf-8 13.0863ms
2025-11-16 20:01:10.670 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - null null
2025-11-16 20:01:10.670 +03:00 [INF] CORS policy execution successful.
2025-11-16 20:01:10.682 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 20:01:10.683 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:10.683 +03:00 [INF] Route matched with {action = "GetById", controller = "Cities"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.cities.CitiesDto] GetById(Int32) on controller MappyApplication.Controllers.CitiesController (MappyApplication).
2025-11-16 20:01:10.683 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-11-16 20:01:10.683 +03:00 [INF] Executed action MappyApplication.Controllers.CitiesController.GetById (MappyApplication) in 0.3652ms
2025-11-16 20:01:10.683 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:10.683 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - 400 null application/problem+json; charset=utf-8 12.735ms
2025-11-16 20:01:10.686 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - null null
2025-11-16 20:01:10.686 +03:00 [INF] CORS policy execution successful.
2025-11-16 20:01:10.700 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 20:01:10.700 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:10.701 +03:00 [INF] Route matched with {action = "GetById", controller = "Cities"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.cities.CitiesDto] GetById(Int32) on controller MappyApplication.Controllers.CitiesController (MappyApplication).
2025-11-16 20:01:10.701 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-11-16 20:01:10.701 +03:00 [INF] Executed action MappyApplication.Controllers.CitiesController.GetById (MappyApplication) in 0.3137ms
2025-11-16 20:01:10.701 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:10.701 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - 400 null application/problem+json; charset=utf-8 14.6403ms
2025-11-16 20:01:10.704 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - null null
2025-11-16 20:01:10.704 +03:00 [INF] CORS policy execution successful.
2025-11-16 20:01:10.715 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 20:01:10.715 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:10.715 +03:00 [INF] Route matched with {action = "GetById", controller = "Cities"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.cities.CitiesDto] GetById(Int32) on controller MappyApplication.Controllers.CitiesController (MappyApplication).
2025-11-16 20:01:10.715 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-11-16 20:01:10.715 +03:00 [INF] Executed action MappyApplication.Controllers.CitiesController.GetById (MappyApplication) in 0.3422ms
2025-11-16 20:01:10.715 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:10.716 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - 400 null application/problem+json; charset=utf-8 11.7359ms
2025-11-16 20:01:10.719 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - null null
2025-11-16 20:01:10.719 +03:00 [INF] CORS policy execution successful.
2025-11-16 20:01:10.731 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 20:01:10.731 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:10.731 +03:00 [INF] Route matched with {action = "GetById", controller = "Cities"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.cities.CitiesDto] GetById(Int32) on controller MappyApplication.Controllers.CitiesController (MappyApplication).
2025-11-16 20:01:10.731 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-11-16 20:01:10.731 +03:00 [INF] Executed action MappyApplication.Controllers.CitiesController.GetById (MappyApplication) in 0.2689ms
2025-11-16 20:01:10.731 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:10.732 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - 400 null application/problem+json; charset=utf-8 12.6461ms
2025-11-16 20:01:10.735 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - null null
2025-11-16 20:01:10.735 +03:00 [INF] CORS policy execution successful.
2025-11-16 20:01:10.748 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 20:01:10.748 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:10.748 +03:00 [INF] Route matched with {action = "GetById", controller = "Cities"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.cities.CitiesDto] GetById(Int32) on controller MappyApplication.Controllers.CitiesController (MappyApplication).
2025-11-16 20:01:10.748 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-11-16 20:01:10.748 +03:00 [INF] Executed action MappyApplication.Controllers.CitiesController.GetById (MappyApplication) in 0.2598ms
2025-11-16 20:01:10.748 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:10.748 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - 400 null application/problem+json; charset=utf-8 13.5679ms
2025-11-16 20:01:10.751 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - null null
2025-11-16 20:01:10.751 +03:00 [INF] CORS policy execution successful.
2025-11-16 20:01:10.764 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 20:01:10.764 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:10.764 +03:00 [INF] Route matched with {action = "GetById", controller = "Cities"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.cities.CitiesDto] GetById(Int32) on controller MappyApplication.Controllers.CitiesController (MappyApplication).
2025-11-16 20:01:10.764 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-11-16 20:01:10.764 +03:00 [INF] Executed action MappyApplication.Controllers.CitiesController.GetById (MappyApplication) in 0.3001ms
2025-11-16 20:01:10.764 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:10.764 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - 400 null application/problem+json; charset=utf-8 12.8571ms
2025-11-16 20:01:10.767 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - null null
2025-11-16 20:01:10.767 +03:00 [INF] CORS policy execution successful.
2025-11-16 20:01:10.779 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 20:01:10.779 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:10.779 +03:00 [INF] Route matched with {action = "GetById", controller = "Cities"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.cities.CitiesDto] GetById(Int32) on controller MappyApplication.Controllers.CitiesController (MappyApplication).
2025-11-16 20:01:10.779 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-11-16 20:01:10.779 +03:00 [INF] Executed action MappyApplication.Controllers.CitiesController.GetById (MappyApplication) in 0.2921ms
2025-11-16 20:01:10.779 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:10.779 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - 400 null application/problem+json; charset=utf-8 12.0084ms
2025-11-16 20:01:10.783 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - null null
2025-11-16 20:01:10.783 +03:00 [INF] CORS policy execution successful.
2025-11-16 20:01:10.797 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 20:01:10.797 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:10.797 +03:00 [INF] Route matched with {action = "GetById", controller = "Cities"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.cities.CitiesDto] GetById(Int32) on controller MappyApplication.Controllers.CitiesController (MappyApplication).
2025-11-16 20:01:10.797 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-11-16 20:01:10.797 +03:00 [INF] Executed action MappyApplication.Controllers.CitiesController.GetById (MappyApplication) in 0.3087ms
2025-11-16 20:01:10.797 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:10.797 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - 400 null application/problem+json; charset=utf-8 14.5875ms
2025-11-16 20:01:10.800 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - null null
2025-11-16 20:01:10.800 +03:00 [INF] CORS policy execution successful.
2025-11-16 20:01:10.812 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 20:01:10.813 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:10.813 +03:00 [INF] Route matched with {action = "GetById", controller = "Cities"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.cities.CitiesDto] GetById(Int32) on controller MappyApplication.Controllers.CitiesController (MappyApplication).
2025-11-16 20:01:10.813 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-11-16 20:01:10.813 +03:00 [INF] Executed action MappyApplication.Controllers.CitiesController.GetById (MappyApplication) in 0.2792ms
2025-11-16 20:01:10.813 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:10.813 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - 400 null application/problem+json; charset=utf-8 12.8302ms
2025-11-16 20:01:10.816 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - null null
2025-11-16 20:01:10.816 +03:00 [INF] CORS policy execution successful.
2025-11-16 20:01:10.828 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 20:01:10.828 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:10.828 +03:00 [INF] Route matched with {action = "GetById", controller = "Cities"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.cities.CitiesDto] GetById(Int32) on controller MappyApplication.Controllers.CitiesController (MappyApplication).
2025-11-16 20:01:10.829 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-11-16 20:01:10.829 +03:00 [INF] Executed action MappyApplication.Controllers.CitiesController.GetById (MappyApplication) in 0.2678ms
2025-11-16 20:01:10.829 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:10.829 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - 400 null application/problem+json; charset=utf-8 12.4286ms
2025-11-16 20:01:10.832 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - null null
2025-11-16 20:01:10.832 +03:00 [INF] CORS policy execution successful.
2025-11-16 20:01:10.846 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 20:01:10.846 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:10.846 +03:00 [INF] Route matched with {action = "GetById", controller = "Cities"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.cities.CitiesDto] GetById(Int32) on controller MappyApplication.Controllers.CitiesController (MappyApplication).
2025-11-16 20:01:10.846 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-11-16 20:01:10.846 +03:00 [INF] Executed action MappyApplication.Controllers.CitiesController.GetById (MappyApplication) in 0.2595ms
2025-11-16 20:01:10.846 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:10.846 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - 400 null application/problem+json; charset=utf-8 14.5897ms
2025-11-16 20:01:10.850 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - null null
2025-11-16 20:01:10.850 +03:00 [INF] CORS policy execution successful.
2025-11-16 20:01:10.865 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 20:01:10.865 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:10.865 +03:00 [INF] Route matched with {action = "GetById", controller = "Cities"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.cities.CitiesDto] GetById(Int32) on controller MappyApplication.Controllers.CitiesController (MappyApplication).
2025-11-16 20:01:10.865 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-11-16 20:01:10.865 +03:00 [INF] Executed action MappyApplication.Controllers.CitiesController.GetById (MappyApplication) in 0.2862ms
2025-11-16 20:01:10.865 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:10.865 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - 400 null application/problem+json; charset=utf-8 15.5461ms
2025-11-16 20:01:10.871 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - null null
2025-11-16 20:01:10.871 +03:00 [INF] CORS policy execution successful.
2025-11-16 20:01:10.886 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 20:01:10.886 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:10.886 +03:00 [INF] Route matched with {action = "GetById", controller = "Cities"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.cities.CitiesDto] GetById(Int32) on controller MappyApplication.Controllers.CitiesController (MappyApplication).
2025-11-16 20:01:10.887 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-11-16 20:01:10.887 +03:00 [INF] Executed action MappyApplication.Controllers.CitiesController.GetById (MappyApplication) in 0.2911ms
2025-11-16 20:01:10.887 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:10.887 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - 400 null application/problem+json; charset=utf-8 15.6608ms
2025-11-16 20:01:10.892 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - null null
2025-11-16 20:01:10.892 +03:00 [INF] CORS policy execution successful.
2025-11-16 20:01:10.908 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 20:01:10.908 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:10.908 +03:00 [INF] Route matched with {action = "GetById", controller = "Cities"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.cities.CitiesDto] GetById(Int32) on controller MappyApplication.Controllers.CitiesController (MappyApplication).
2025-11-16 20:01:10.909 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-11-16 20:01:10.909 +03:00 [INF] Executed action MappyApplication.Controllers.CitiesController.GetById (MappyApplication) in 0.3018ms
2025-11-16 20:01:10.909 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:10.909 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - 400 null application/problem+json; charset=utf-8 16.6299ms
2025-11-16 20:01:10.914 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - null null
2025-11-16 20:01:10.914 +03:00 [INF] CORS policy execution successful.
2025-11-16 20:01:10.928 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 20:01:10.928 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:10.928 +03:00 [INF] Route matched with {action = "GetById", controller = "Cities"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.cities.CitiesDto] GetById(Int32) on controller MappyApplication.Controllers.CitiesController (MappyApplication).
2025-11-16 20:01:10.929 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-11-16 20:01:10.929 +03:00 [INF] Executed action MappyApplication.Controllers.CitiesController.GetById (MappyApplication) in 0.3303ms
2025-11-16 20:01:10.929 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:10.929 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - 400 null application/problem+json; charset=utf-8 14.7375ms
2025-11-16 20:01:10.934 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - null null
2025-11-16 20:01:10.934 +03:00 [INF] CORS policy execution successful.
2025-11-16 20:01:10.945 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 20:01:10.946 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:10.946 +03:00 [INF] Route matched with {action = "GetById", controller = "Cities"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.cities.CitiesDto] GetById(Int32) on controller MappyApplication.Controllers.CitiesController (MappyApplication).
2025-11-16 20:01:10.946 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-11-16 20:01:10.946 +03:00 [INF] Executed action MappyApplication.Controllers.CitiesController.GetById (MappyApplication) in 0.3387ms
2025-11-16 20:01:10.946 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:10.946 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - 400 null application/problem+json; charset=utf-8 12.2835ms
2025-11-16 20:01:10.953 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - null null
2025-11-16 20:01:10.954 +03:00 [INF] CORS policy execution successful.
2025-11-16 20:01:10.969 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 20:01:10.969 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:10.970 +03:00 [INF] Route matched with {action = "GetById", controller = "Cities"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.cities.CitiesDto] GetById(Int32) on controller MappyApplication.Controllers.CitiesController (MappyApplication).
2025-11-16 20:01:10.970 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-11-16 20:01:10.970 +03:00 [INF] Executed action MappyApplication.Controllers.CitiesController.GetById (MappyApplication) in 0.4569ms
2025-11-16 20:01:10.970 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:10.970 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - 400 null application/problem+json; charset=utf-8 16.7187ms
2025-11-16 20:01:10.973 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - null null
2025-11-16 20:01:10.973 +03:00 [INF] CORS policy execution successful.
2025-11-16 20:01:10.986 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 20:01:10.986 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:10.986 +03:00 [INF] Route matched with {action = "GetById", controller = "Cities"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.cities.CitiesDto] GetById(Int32) on controller MappyApplication.Controllers.CitiesController (MappyApplication).
2025-11-16 20:01:10.986 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-11-16 20:01:10.987 +03:00 [INF] Executed action MappyApplication.Controllers.CitiesController.GetById (MappyApplication) in 0.2849ms
2025-11-16 20:01:10.987 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:10.987 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - 400 null application/problem+json; charset=utf-8 13.587ms
2025-11-16 20:01:10.990 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - null null
2025-11-16 20:01:10.990 +03:00 [INF] CORS policy execution successful.
2025-11-16 20:01:11.002 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 20:01:11.002 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:11.002 +03:00 [INF] Route matched with {action = "GetById", controller = "Cities"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.cities.CitiesDto] GetById(Int32) on controller MappyApplication.Controllers.CitiesController (MappyApplication).
2025-11-16 20:01:11.003 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-11-16 20:01:11.003 +03:00 [INF] Executed action MappyApplication.Controllers.CitiesController.GetById (MappyApplication) in 0.2563ms
2025-11-16 20:01:11.003 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:11.003 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - 400 null application/problem+json; charset=utf-8 12.823ms
2025-11-16 20:01:11.008 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - null null
2025-11-16 20:01:11.008 +03:00 [INF] CORS policy execution successful.
2025-11-16 20:01:11.020 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 20:01:11.021 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:11.021 +03:00 [INF] Route matched with {action = "GetById", controller = "Cities"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.cities.CitiesDto] GetById(Int32) on controller MappyApplication.Controllers.CitiesController (MappyApplication).
2025-11-16 20:01:11.021 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-11-16 20:01:11.021 +03:00 [INF] Executed action MappyApplication.Controllers.CitiesController.GetById (MappyApplication) in 0.2069ms
2025-11-16 20:01:11.021 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:11.021 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - 400 null application/problem+json; charset=utf-8 12.7382ms
2025-11-16 20:01:11.026 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - null null
2025-11-16 20:01:11.026 +03:00 [INF] CORS policy execution successful.
2025-11-16 20:01:11.039 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 20:01:11.039 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:11.039 +03:00 [INF] Route matched with {action = "GetById", controller = "Cities"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.cities.CitiesDto] GetById(Int32) on controller MappyApplication.Controllers.CitiesController (MappyApplication).
2025-11-16 20:01:11.039 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-11-16 20:01:11.039 +03:00 [INF] Executed action MappyApplication.Controllers.CitiesController.GetById (MappyApplication) in 0.1875ms
2025-11-16 20:01:11.039 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:11.040 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - 400 null application/problem+json; charset=utf-8 13.1504ms
2025-11-16 20:01:11.045 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - null null
2025-11-16 20:01:11.045 +03:00 [INF] CORS policy execution successful.
2025-11-16 20:01:11.056 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 20:01:11.056 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:11.056 +03:00 [INF] Route matched with {action = "GetById", controller = "Cities"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.cities.CitiesDto] GetById(Int32) on controller MappyApplication.Controllers.CitiesController (MappyApplication).
2025-11-16 20:01:11.057 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-11-16 20:01:11.057 +03:00 [INF] Executed action MappyApplication.Controllers.CitiesController.GetById (MappyApplication) in 0.2551ms
2025-11-16 20:01:11.057 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:11.057 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - 400 null application/problem+json; charset=utf-8 11.3764ms
2025-11-16 20:01:11.062 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - null null
2025-11-16 20:01:11.062 +03:00 [INF] CORS policy execution successful.
2025-11-16 20:01:11.075 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 20:01:11.075 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:11.075 +03:00 [INF] Route matched with {action = "GetById", controller = "Cities"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.cities.CitiesDto] GetById(Int32) on controller MappyApplication.Controllers.CitiesController (MappyApplication).
2025-11-16 20:01:11.076 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-11-16 20:01:11.076 +03:00 [INF] Executed action MappyApplication.Controllers.CitiesController.GetById (MappyApplication) in 0.248ms
2025-11-16 20:01:11.076 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:11.076 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - 400 null application/problem+json; charset=utf-8 13.314ms
2025-11-16 20:01:11.082 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - null null
2025-11-16 20:01:11.082 +03:00 [INF] CORS policy execution successful.
2025-11-16 20:01:11.095 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 20:01:11.095 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:11.095 +03:00 [INF] Route matched with {action = "GetById", controller = "Cities"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.cities.CitiesDto] GetById(Int32) on controller MappyApplication.Controllers.CitiesController (MappyApplication).
2025-11-16 20:01:11.095 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-11-16 20:01:11.095 +03:00 [INF] Executed action MappyApplication.Controllers.CitiesController.GetById (MappyApplication) in 0.1608ms
2025-11-16 20:01:11.095 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:11.095 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - 400 null application/problem+json; charset=utf-8 13.3844ms
2025-11-16 20:01:11.102 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - null null
2025-11-16 20:01:11.102 +03:00 [INF] CORS policy execution successful.
2025-11-16 20:01:11.113 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 20:01:11.113 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:11.113 +03:00 [INF] Route matched with {action = "GetById", controller = "Cities"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.cities.CitiesDto] GetById(Int32) on controller MappyApplication.Controllers.CitiesController (MappyApplication).
2025-11-16 20:01:11.113 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-11-16 20:01:11.113 +03:00 [INF] Executed action MappyApplication.Controllers.CitiesController.GetById (MappyApplication) in 0.1496ms
2025-11-16 20:01:11.113 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:11.113 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - 400 null application/problem+json; charset=utf-8 11.6853ms
2025-11-16 20:01:11.119 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - null null
2025-11-16 20:01:11.119 +03:00 [INF] CORS policy execution successful.
2025-11-16 20:01:11.132 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 20:01:11.132 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:11.132 +03:00 [INF] Route matched with {action = "GetById", controller = "Cities"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.cities.CitiesDto] GetById(Int32) on controller MappyApplication.Controllers.CitiesController (MappyApplication).
2025-11-16 20:01:11.132 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-11-16 20:01:11.132 +03:00 [INF] Executed action MappyApplication.Controllers.CitiesController.GetById (MappyApplication) in 0.2703ms
2025-11-16 20:01:11.132 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:11.132 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - 400 null application/problem+json; charset=utf-8 13.132ms
2025-11-16 20:01:11.137 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - null null
2025-11-16 20:01:11.138 +03:00 [INF] CORS policy execution successful.
2025-11-16 20:01:11.152 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 20:01:11.152 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:11.152 +03:00 [INF] Route matched with {action = "GetById", controller = "Cities"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.cities.CitiesDto] GetById(Int32) on controller MappyApplication.Controllers.CitiesController (MappyApplication).
2025-11-16 20:01:11.153 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-11-16 20:01:11.153 +03:00 [INF] Executed action MappyApplication.Controllers.CitiesController.GetById (MappyApplication) in 0.2766ms
2025-11-16 20:01:11.153 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:11.153 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - 400 null application/problem+json; charset=utf-8 15.3767ms
2025-11-16 20:01:11.159 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - null null
2025-11-16 20:01:11.159 +03:00 [INF] CORS policy execution successful.
2025-11-16 20:01:11.173 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 20:01:11.173 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:11.173 +03:00 [INF] Route matched with {action = "GetById", controller = "Cities"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.cities.CitiesDto] GetById(Int32) on controller MappyApplication.Controllers.CitiesController (MappyApplication).
2025-11-16 20:01:11.173 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-11-16 20:01:11.173 +03:00 [INF] Executed action MappyApplication.Controllers.CitiesController.GetById (MappyApplication) in 0.2326ms
2025-11-16 20:01:11.173 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:11.173 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - 400 null application/problem+json; charset=utf-8 14.6034ms
2025-11-16 20:01:11.178 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - null null
2025-11-16 20:01:11.178 +03:00 [INF] CORS policy execution successful.
2025-11-16 20:01:11.193 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 20:01:11.193 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:11.193 +03:00 [INF] Route matched with {action = "GetById", controller = "Cities"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.cities.CitiesDto] GetById(Int32) on controller MappyApplication.Controllers.CitiesController (MappyApplication).
2025-11-16 20:01:11.193 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-11-16 20:01:11.193 +03:00 [INF] Executed action MappyApplication.Controllers.CitiesController.GetById (MappyApplication) in 0.2885ms
2025-11-16 20:01:11.193 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:11.193 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - 400 null application/problem+json; charset=utf-8 15.5727ms
2025-11-16 20:01:11.198 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - null null
2025-11-16 20:01:11.198 +03:00 [INF] CORS policy execution successful.
2025-11-16 20:01:11.212 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 20:01:11.212 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:11.212 +03:00 [INF] Route matched with {action = "GetById", controller = "Cities"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.cities.CitiesDto] GetById(Int32) on controller MappyApplication.Controllers.CitiesController (MappyApplication).
2025-11-16 20:01:11.212 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-11-16 20:01:11.212 +03:00 [INF] Executed action MappyApplication.Controllers.CitiesController.GetById (MappyApplication) in 0.2889ms
2025-11-16 20:01:11.212 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:11.212 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - 400 null application/problem+json; charset=utf-8 14.0478ms
2025-11-16 20:01:11.216 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - null null
2025-11-16 20:01:11.217 +03:00 [INF] CORS policy execution successful.
2025-11-16 20:01:11.230 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 20:01:11.231 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:11.231 +03:00 [INF] Route matched with {action = "GetById", controller = "Cities"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.cities.CitiesDto] GetById(Int32) on controller MappyApplication.Controllers.CitiesController (MappyApplication).
2025-11-16 20:01:11.231 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-11-16 20:01:11.231 +03:00 [INF] Executed action MappyApplication.Controllers.CitiesController.GetById (MappyApplication) in 0.3187ms
2025-11-16 20:01:11.231 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:11.231 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - 400 null application/problem+json; charset=utf-8 14.5114ms
2025-11-16 20:01:11.235 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - null null
2025-11-16 20:01:11.235 +03:00 [INF] CORS policy execution successful.
2025-11-16 20:01:11.249 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 20:01:11.249 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:11.249 +03:00 [INF] Route matched with {action = "GetById", controller = "Cities"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.cities.CitiesDto] GetById(Int32) on controller MappyApplication.Controllers.CitiesController (MappyApplication).
2025-11-16 20:01:11.249 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-11-16 20:01:11.250 +03:00 [INF] Executed action MappyApplication.Controllers.CitiesController.GetById (MappyApplication) in 0.2796ms
2025-11-16 20:01:11.250 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:11.250 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - 400 null application/problem+json; charset=utf-8 14.3581ms
2025-11-16 20:01:11.253 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - null null
2025-11-16 20:01:11.253 +03:00 [INF] CORS policy execution successful.
2025-11-16 20:01:11.265 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 20:01:11.265 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:11.265 +03:00 [INF] Route matched with {action = "GetById", controller = "Cities"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.cities.CitiesDto] GetById(Int32) on controller MappyApplication.Controllers.CitiesController (MappyApplication).
2025-11-16 20:01:11.266 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-11-16 20:01:11.266 +03:00 [INF] Executed action MappyApplication.Controllers.CitiesController.GetById (MappyApplication) in 0.2304ms
2025-11-16 20:01:11.266 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:11.266 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - 400 null application/problem+json; charset=utf-8 12.9452ms
2025-11-16 20:01:11.272 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - null null
2025-11-16 20:01:11.272 +03:00 [INF] CORS policy execution successful.
2025-11-16 20:01:11.285 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 20:01:11.285 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:11.285 +03:00 [INF] Route matched with {action = "GetById", controller = "Cities"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.cities.CitiesDto] GetById(Int32) on controller MappyApplication.Controllers.CitiesController (MappyApplication).
2025-11-16 20:01:11.286 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-11-16 20:01:11.286 +03:00 [INF] Executed action MappyApplication.Controllers.CitiesController.GetById (MappyApplication) in 0.2315ms
2025-11-16 20:01:11.286 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:11.286 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - 400 null application/problem+json; charset=utf-8 14.148ms
2025-11-16 20:01:11.290 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - null null
2025-11-16 20:01:11.290 +03:00 [INF] CORS policy execution successful.
2025-11-16 20:01:11.303 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 20:01:11.303 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:11.303 +03:00 [INF] Route matched with {action = "GetById", controller = "Cities"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.cities.CitiesDto] GetById(Int32) on controller MappyApplication.Controllers.CitiesController (MappyApplication).
2025-11-16 20:01:11.303 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-11-16 20:01:11.304 +03:00 [INF] Executed action MappyApplication.Controllers.CitiesController.GetById (MappyApplication) in 0.2385ms
2025-11-16 20:01:11.304 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:11.304 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - 400 null application/problem+json; charset=utf-8 13.505ms
2025-11-16 20:01:11.307 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - null null
2025-11-16 20:01:11.307 +03:00 [INF] CORS policy execution successful.
2025-11-16 20:01:11.319 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 20:01:11.319 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:11.319 +03:00 [INF] Route matched with {action = "GetById", controller = "Cities"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.cities.CitiesDto] GetById(Int32) on controller MappyApplication.Controllers.CitiesController (MappyApplication).
2025-11-16 20:01:11.319 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-11-16 20:01:11.319 +03:00 [INF] Executed action MappyApplication.Controllers.CitiesController.GetById (MappyApplication) in 0.3498ms
2025-11-16 20:01:11.319 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:11.319 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - 400 null application/problem+json; charset=utf-8 12.6638ms
2025-11-16 20:01:11.322 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - null null
2025-11-16 20:01:11.322 +03:00 [INF] CORS policy execution successful.
2025-11-16 20:01:11.335 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 20:01:11.336 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:11.336 +03:00 [INF] Route matched with {action = "GetById", controller = "Cities"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.cities.CitiesDto] GetById(Int32) on controller MappyApplication.Controllers.CitiesController (MappyApplication).
2025-11-16 20:01:11.336 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-11-16 20:01:11.336 +03:00 [INF] Executed action MappyApplication.Controllers.CitiesController.GetById (MappyApplication) in 0.2703ms
2025-11-16 20:01:11.336 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:11.336 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - 400 null application/problem+json; charset=utf-8 13.7503ms
2025-11-16 20:01:11.340 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - null null
2025-11-16 20:01:11.340 +03:00 [INF] CORS policy execution successful.
2025-11-16 20:01:11.352 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 20:01:11.352 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:11.352 +03:00 [INF] Route matched with {action = "GetById", controller = "Cities"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.cities.CitiesDto] GetById(Int32) on controller MappyApplication.Controllers.CitiesController (MappyApplication).
2025-11-16 20:01:11.353 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-11-16 20:01:11.353 +03:00 [INF] Executed action MappyApplication.Controllers.CitiesController.GetById (MappyApplication) in 0.2835ms
2025-11-16 20:01:11.353 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:11.353 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - 400 null application/problem+json; charset=utf-8 12.8877ms
2025-11-16 20:01:11.356 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - null null
2025-11-16 20:01:11.356 +03:00 [INF] CORS policy execution successful.
2025-11-16 20:01:11.366 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 20:01:11.366 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:11.366 +03:00 [INF] Route matched with {action = "GetById", controller = "Cities"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.cities.CitiesDto] GetById(Int32) on controller MappyApplication.Controllers.CitiesController (MappyApplication).
2025-11-16 20:01:11.367 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-11-16 20:01:11.367 +03:00 [INF] Executed action MappyApplication.Controllers.CitiesController.GetById (MappyApplication) in 0.2453ms
2025-11-16 20:01:11.367 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:11.367 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - 400 null application/problem+json; charset=utf-8 11.0463ms
2025-11-16 20:01:11.370 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - null null
2025-11-16 20:01:11.370 +03:00 [INF] CORS policy execution successful.
2025-11-16 20:01:11.381 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 20:01:11.381 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:11.382 +03:00 [INF] Route matched with {action = "GetById", controller = "Cities"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.cities.CitiesDto] GetById(Int32) on controller MappyApplication.Controllers.CitiesController (MappyApplication).
2025-11-16 20:01:11.382 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-11-16 20:01:11.382 +03:00 [INF] Executed action MappyApplication.Controllers.CitiesController.GetById (MappyApplication) in 0.254ms
2025-11-16 20:01:11.382 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:11.382 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - 400 null application/problem+json; charset=utf-8 11.9939ms
2025-11-16 20:01:11.385 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - null null
2025-11-16 20:01:11.385 +03:00 [INF] CORS policy execution successful.
2025-11-16 20:01:11.398 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 20:01:11.398 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:11.398 +03:00 [INF] Route matched with {action = "GetById", controller = "Cities"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.cities.CitiesDto] GetById(Int32) on controller MappyApplication.Controllers.CitiesController (MappyApplication).
2025-11-16 20:01:11.398 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-11-16 20:01:11.398 +03:00 [INF] Executed action MappyApplication.Controllers.CitiesController.GetById (MappyApplication) in 0.269ms
2025-11-16 20:01:11.398 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:11.398 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - 400 null application/problem+json; charset=utf-8 13.0497ms
2025-11-16 20:01:11.402 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - null null
2025-11-16 20:01:11.402 +03:00 [INF] CORS policy execution successful.
2025-11-16 20:01:11.413 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 20:01:11.413 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:11.413 +03:00 [INF] Route matched with {action = "GetById", controller = "Cities"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.cities.CitiesDto] GetById(Int32) on controller MappyApplication.Controllers.CitiesController (MappyApplication).
2025-11-16 20:01:11.413 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-11-16 20:01:11.413 +03:00 [INF] Executed action MappyApplication.Controllers.CitiesController.GetById (MappyApplication) in 0.2542ms
2025-11-16 20:01:11.413 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:11.413 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - 400 null application/problem+json; charset=utf-8 11.6383ms
2025-11-16 20:01:11.417 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - null null
2025-11-16 20:01:11.417 +03:00 [INF] CORS policy execution successful.
2025-11-16 20:01:11.428 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 20:01:11.428 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:11.428 +03:00 [INF] Route matched with {action = "GetById", controller = "Cities"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.cities.CitiesDto] GetById(Int32) on controller MappyApplication.Controllers.CitiesController (MappyApplication).
2025-11-16 20:01:11.429 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-11-16 20:01:11.429 +03:00 [INF] Executed action MappyApplication.Controllers.CitiesController.GetById (MappyApplication) in 0.2392ms
2025-11-16 20:01:11.429 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:11.429 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - 400 null application/problem+json; charset=utf-8 12.0971ms
2025-11-16 20:01:11.432 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - null null
2025-11-16 20:01:11.432 +03:00 [INF] CORS policy execution successful.
2025-11-16 20:01:11.443 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 20:01:11.443 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:11.443 +03:00 [INF] Route matched with {action = "GetById", controller = "Cities"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.cities.CitiesDto] GetById(Int32) on controller MappyApplication.Controllers.CitiesController (MappyApplication).
2025-11-16 20:01:11.443 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-11-16 20:01:11.443 +03:00 [INF] Executed action MappyApplication.Controllers.CitiesController.GetById (MappyApplication) in 0.2623ms
2025-11-16 20:01:11.443 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:11.443 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - 400 null application/problem+json; charset=utf-8 11.5239ms
2025-11-16 20:01:11.447 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - null null
2025-11-16 20:01:11.447 +03:00 [INF] CORS policy execution successful.
2025-11-16 20:01:11.458 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 20:01:11.458 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:11.458 +03:00 [INF] Route matched with {action = "GetById", controller = "Cities"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.cities.CitiesDto] GetById(Int32) on controller MappyApplication.Controllers.CitiesController (MappyApplication).
2025-11-16 20:01:11.459 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-11-16 20:01:11.459 +03:00 [INF] Executed action MappyApplication.Controllers.CitiesController.GetById (MappyApplication) in 0.2554ms
2025-11-16 20:01:11.459 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:11.459 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - 400 null application/problem+json; charset=utf-8 11.706ms
2025-11-16 20:01:11.462 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - null null
2025-11-16 20:01:11.462 +03:00 [INF] CORS policy execution successful.
2025-11-16 20:01:11.475 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 20:01:11.475 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:11.475 +03:00 [INF] Route matched with {action = "GetById", controller = "Cities"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.cities.CitiesDto] GetById(Int32) on controller MappyApplication.Controllers.CitiesController (MappyApplication).
2025-11-16 20:01:11.475 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-11-16 20:01:11.475 +03:00 [INF] Executed action MappyApplication.Controllers.CitiesController.GetById (MappyApplication) in 0.2551ms
2025-11-16 20:01:11.475 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:11.475 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - 400 null application/problem+json; charset=utf-8 13.1658ms
2025-11-16 20:01:11.479 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - null null
2025-11-16 20:01:11.479 +03:00 [INF] CORS policy execution successful.
2025-11-16 20:01:11.492 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 20:01:11.493 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:11.493 +03:00 [INF] Route matched with {action = "GetById", controller = "Cities"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.cities.CitiesDto] GetById(Int32) on controller MappyApplication.Controllers.CitiesController (MappyApplication).
2025-11-16 20:01:11.493 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-11-16 20:01:11.493 +03:00 [INF] Executed action MappyApplication.Controllers.CitiesController.GetById (MappyApplication) in 0.2302ms
2025-11-16 20:01:11.493 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:11.493 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - 400 null application/problem+json; charset=utf-8 14.253ms
2025-11-16 20:01:11.497 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - null null
2025-11-16 20:01:11.497 +03:00 [INF] CORS policy execution successful.
2025-11-16 20:01:11.510 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 20:01:11.510 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:11.510 +03:00 [INF] Route matched with {action = "GetById", controller = "Cities"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.cities.CitiesDto] GetById(Int32) on controller MappyApplication.Controllers.CitiesController (MappyApplication).
2025-11-16 20:01:11.510 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-11-16 20:01:11.510 +03:00 [INF] Executed action MappyApplication.Controllers.CitiesController.GetById (MappyApplication) in 0.2345ms
2025-11-16 20:01:11.510 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:11.510 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - 400 null application/problem+json; charset=utf-8 12.9148ms
2025-11-16 20:01:11.516 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - null null
2025-11-16 20:01:11.516 +03:00 [INF] CORS policy execution successful.
2025-11-16 20:01:11.529 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 20:01:11.529 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:11.529 +03:00 [INF] Route matched with {action = "GetById", controller = "Cities"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.cities.CitiesDto] GetById(Int32) on controller MappyApplication.Controllers.CitiesController (MappyApplication).
2025-11-16 20:01:11.529 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-11-16 20:01:11.529 +03:00 [INF] Executed action MappyApplication.Controllers.CitiesController.GetById (MappyApplication) in 0.2747ms
2025-11-16 20:01:11.529 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:11.529 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - 400 null application/problem+json; charset=utf-8 13.6341ms
2025-11-16 20:01:11.533 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - null null
2025-11-16 20:01:11.533 +03:00 [INF] CORS policy execution successful.
2025-11-16 20:01:11.547 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 20:01:11.547 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:11.547 +03:00 [INF] Route matched with {action = "GetById", controller = "Cities"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.cities.CitiesDto] GetById(Int32) on controller MappyApplication.Controllers.CitiesController (MappyApplication).
2025-11-16 20:01:11.548 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-11-16 20:01:11.548 +03:00 [INF] Executed action MappyApplication.Controllers.CitiesController.GetById (MappyApplication) in 0.3237ms
2025-11-16 20:01:11.548 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:11.548 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - 400 null application/problem+json; charset=utf-8 14.7217ms
2025-11-16 20:01:11.554 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - null null
2025-11-16 20:01:11.554 +03:00 [INF] CORS policy execution successful.
2025-11-16 20:01:11.570 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 20:01:11.570 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:11.570 +03:00 [INF] Route matched with {action = "GetById", controller = "Cities"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.cities.CitiesDto] GetById(Int32) on controller MappyApplication.Controllers.CitiesController (MappyApplication).
2025-11-16 20:01:11.570 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-11-16 20:01:11.570 +03:00 [INF] Executed action MappyApplication.Controllers.CitiesController.GetById (MappyApplication) in 0.4059ms
2025-11-16 20:01:11.570 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:11.571 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - 400 null application/problem+json; charset=utf-8 16.4415ms
2025-11-16 20:01:11.574 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - null null
2025-11-16 20:01:11.574 +03:00 [INF] CORS policy execution successful.
2025-11-16 20:01:11.591 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 20:01:11.591 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:11.591 +03:00 [INF] Route matched with {action = "GetById", controller = "Cities"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.cities.CitiesDto] GetById(Int32) on controller MappyApplication.Controllers.CitiesController (MappyApplication).
2025-11-16 20:01:11.591 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-11-16 20:01:11.591 +03:00 [INF] Executed action MappyApplication.Controllers.CitiesController.GetById (MappyApplication) in 0.3627ms
2025-11-16 20:01:11.591 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:11.591 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - 400 null application/problem+json; charset=utf-8 17.0107ms
2025-11-16 20:01:11.596 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - null null
2025-11-16 20:01:11.596 +03:00 [INF] CORS policy execution successful.
2025-11-16 20:01:11.611 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 20:01:11.611 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:11.611 +03:00 [INF] Route matched with {action = "GetById", controller = "Cities"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.cities.CitiesDto] GetById(Int32) on controller MappyApplication.Controllers.CitiesController (MappyApplication).
2025-11-16 20:01:11.612 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-11-16 20:01:11.612 +03:00 [INF] Executed action MappyApplication.Controllers.CitiesController.GetById (MappyApplication) in 0.372ms
2025-11-16 20:01:11.612 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:11.612 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - 400 null application/problem+json; charset=utf-8 15.7873ms
2025-11-16 20:01:11.616 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - null null
2025-11-16 20:01:11.616 +03:00 [INF] CORS policy execution successful.
2025-11-16 20:01:11.631 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 20:01:11.631 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:11.631 +03:00 [INF] Route matched with {action = "GetById", controller = "Cities"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.cities.CitiesDto] GetById(Int32) on controller MappyApplication.Controllers.CitiesController (MappyApplication).
2025-11-16 20:01:11.631 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-11-16 20:01:11.632 +03:00 [INF] Executed action MappyApplication.Controllers.CitiesController.GetById (MappyApplication) in 0.368ms
2025-11-16 20:01:11.632 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:11.632 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - 400 null application/problem+json; charset=utf-8 15.4562ms
2025-11-16 20:01:11.638 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - null null
2025-11-16 20:01:11.638 +03:00 [INF] CORS policy execution successful.
2025-11-16 20:01:11.654 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 20:01:11.655 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:11.655 +03:00 [INF] Route matched with {action = "GetById", controller = "Cities"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.cities.CitiesDto] GetById(Int32) on controller MappyApplication.Controllers.CitiesController (MappyApplication).
2025-11-16 20:01:11.655 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-11-16 20:01:11.655 +03:00 [INF] Executed action MappyApplication.Controllers.CitiesController.GetById (MappyApplication) in 0.3538ms
2025-11-16 20:01:11.655 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:11.655 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - 400 null application/problem+json; charset=utf-8 16.7176ms
2025-11-16 20:01:11.660 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - null null
2025-11-16 20:01:11.661 +03:00 [INF] CORS policy execution successful.
2025-11-16 20:01:11.677 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 20:01:11.677 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:11.677 +03:00 [INF] Route matched with {action = "GetById", controller = "Cities"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.cities.CitiesDto] GetById(Int32) on controller MappyApplication.Controllers.CitiesController (MappyApplication).
2025-11-16 20:01:11.677 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-11-16 20:01:11.678 +03:00 [INF] Executed action MappyApplication.Controllers.CitiesController.GetById (MappyApplication) in 0.3668ms
2025-11-16 20:01:11.678 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:11.678 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - 400 null application/problem+json; charset=utf-8 17.1054ms
2025-11-16 20:01:11.682 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - null null
2025-11-16 20:01:11.682 +03:00 [INF] CORS policy execution successful.
2025-11-16 20:01:11.696 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 20:01:11.696 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:11.696 +03:00 [INF] Route matched with {action = "GetById", controller = "Cities"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.cities.CitiesDto] GetById(Int32) on controller MappyApplication.Controllers.CitiesController (MappyApplication).
2025-11-16 20:01:11.696 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-11-16 20:01:11.696 +03:00 [INF] Executed action MappyApplication.Controllers.CitiesController.GetById (MappyApplication) in 0.3736ms
2025-11-16 20:01:11.696 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:11.696 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - 400 null application/problem+json; charset=utf-8 14.6704ms
2025-11-16 20:01:11.701 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - null null
2025-11-16 20:01:11.701 +03:00 [INF] CORS policy execution successful.
2025-11-16 20:01:11.714 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 20:01:11.715 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:11.715 +03:00 [INF] Route matched with {action = "GetById", controller = "Cities"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.cities.CitiesDto] GetById(Int32) on controller MappyApplication.Controllers.CitiesController (MappyApplication).
2025-11-16 20:01:11.715 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-11-16 20:01:11.715 +03:00 [INF] Executed action MappyApplication.Controllers.CitiesController.GetById (MappyApplication) in 0.423ms
2025-11-16 20:01:11.715 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:11.715 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - 400 null application/problem+json; charset=utf-8 14.4707ms
2025-11-16 20:01:11.720 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - null null
2025-11-16 20:01:11.720 +03:00 [INF] CORS policy execution successful.
2025-11-16 20:01:11.737 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 20:01:11.737 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:11.737 +03:00 [INF] Route matched with {action = "GetById", controller = "Cities"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.cities.CitiesDto] GetById(Int32) on controller MappyApplication.Controllers.CitiesController (MappyApplication).
2025-11-16 20:01:11.738 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-11-16 20:01:11.738 +03:00 [INF] Executed action MappyApplication.Controllers.CitiesController.GetById (MappyApplication) in 0.4323ms
2025-11-16 20:01:11.738 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:11.738 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - 400 null application/problem+json; charset=utf-8 17.7468ms
2025-11-16 20:01:11.743 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - null null
2025-11-16 20:01:11.743 +03:00 [INF] CORS policy execution successful.
2025-11-16 20:01:11.760 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 20:01:11.760 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:11.760 +03:00 [INF] Route matched with {action = "GetById", controller = "Cities"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.cities.CitiesDto] GetById(Int32) on controller MappyApplication.Controllers.CitiesController (MappyApplication).
2025-11-16 20:01:11.761 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-11-16 20:01:11.761 +03:00 [INF] Executed action MappyApplication.Controllers.CitiesController.GetById (MappyApplication) in 0.4054ms
2025-11-16 20:01:11.761 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:11.761 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - 400 null application/problem+json; charset=utf-8 18.3048ms
2025-11-16 20:01:11.766 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - null null
2025-11-16 20:01:11.766 +03:00 [INF] CORS policy execution successful.
2025-11-16 20:01:11.782 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 20:01:11.782 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:11.782 +03:00 [INF] Route matched with {action = "GetById", controller = "Cities"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.cities.CitiesDto] GetById(Int32) on controller MappyApplication.Controllers.CitiesController (MappyApplication).
2025-11-16 20:01:11.783 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-11-16 20:01:11.783 +03:00 [INF] Executed action MappyApplication.Controllers.CitiesController.GetById (MappyApplication) in 0.3406ms
2025-11-16 20:01:11.783 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:11.783 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - 400 null application/problem+json; charset=utf-8 17.074ms
2025-11-16 20:01:11.788 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - null null
2025-11-16 20:01:11.788 +03:00 [INF] CORS policy execution successful.
2025-11-16 20:01:11.804 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 20:01:11.804 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:11.805 +03:00 [INF] Route matched with {action = "GetById", controller = "Cities"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.cities.CitiesDto] GetById(Int32) on controller MappyApplication.Controllers.CitiesController (MappyApplication).
2025-11-16 20:01:11.805 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-11-16 20:01:11.805 +03:00 [INF] Executed action MappyApplication.Controllers.CitiesController.GetById (MappyApplication) in 0.4495ms
2025-11-16 20:01:11.805 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:11.805 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - 400 null application/problem+json; charset=utf-8 17.4585ms
2025-11-16 20:01:11.809 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - null null
2025-11-16 20:01:11.810 +03:00 [INF] CORS policy execution successful.
2025-11-16 20:01:11.830 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 20:01:11.830 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:11.830 +03:00 [INF] Route matched with {action = "GetById", controller = "Cities"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.cities.CitiesDto] GetById(Int32) on controller MappyApplication.Controllers.CitiesController (MappyApplication).
2025-11-16 20:01:11.831 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-11-16 20:01:11.831 +03:00 [INF] Executed action MappyApplication.Controllers.CitiesController.GetById (MappyApplication) in 0.4827ms
2025-11-16 20:01:11.831 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:11.831 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - 400 null application/problem+json; charset=utf-8 21.3141ms
2025-11-16 20:01:11.835 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - null null
2025-11-16 20:01:11.835 +03:00 [INF] CORS policy execution successful.
2025-11-16 20:01:11.850 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 20:01:11.850 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:11.850 +03:00 [INF] Route matched with {action = "GetById", controller = "Cities"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.cities.CitiesDto] GetById(Int32) on controller MappyApplication.Controllers.CitiesController (MappyApplication).
2025-11-16 20:01:11.851 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-11-16 20:01:11.851 +03:00 [INF] Executed action MappyApplication.Controllers.CitiesController.GetById (MappyApplication) in 0.437ms
2025-11-16 20:01:11.851 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:11.851 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - 400 null application/problem+json; charset=utf-8 15.9647ms
2025-11-16 20:01:11.857 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - null null
2025-11-16 20:01:11.857 +03:00 [INF] CORS policy execution successful.
2025-11-16 20:01:11.870 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 20:01:11.870 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:11.870 +03:00 [INF] Route matched with {action = "GetById", controller = "Cities"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.cities.CitiesDto] GetById(Int32) on controller MappyApplication.Controllers.CitiesController (MappyApplication).
2025-11-16 20:01:11.870 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-11-16 20:01:11.870 +03:00 [INF] Executed action MappyApplication.Controllers.CitiesController.GetById (MappyApplication) in 0.3202ms
2025-11-16 20:01:11.870 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:11.870 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - 400 null application/problem+json; charset=utf-8 13.5394ms
2025-11-16 20:01:11.874 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - null null
2025-11-16 20:01:11.874 +03:00 [INF] CORS policy execution successful.
2025-11-16 20:01:11.886 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 20:01:11.886 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:11.886 +03:00 [INF] Route matched with {action = "GetById", controller = "Cities"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.cities.CitiesDto] GetById(Int32) on controller MappyApplication.Controllers.CitiesController (MappyApplication).
2025-11-16 20:01:11.886 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-11-16 20:01:11.886 +03:00 [INF] Executed action MappyApplication.Controllers.CitiesController.GetById (MappyApplication) in 0.3095ms
2025-11-16 20:01:11.886 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:11.886 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - 400 null application/problem+json; charset=utf-8 12.7803ms
2025-11-16 20:01:11.890 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - null null
2025-11-16 20:01:11.890 +03:00 [INF] CORS policy execution successful.
2025-11-16 20:01:11.902 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 20:01:11.902 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:11.902 +03:00 [INF] Route matched with {action = "GetById", controller = "Cities"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.cities.CitiesDto] GetById(Int32) on controller MappyApplication.Controllers.CitiesController (MappyApplication).
2025-11-16 20:01:11.903 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-11-16 20:01:11.903 +03:00 [INF] Executed action MappyApplication.Controllers.CitiesController.GetById (MappyApplication) in 0.2591ms
2025-11-16 20:01:11.903 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:11.903 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - 400 null application/problem+json; charset=utf-8 13.1806ms
2025-11-16 20:01:11.906 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - null null
2025-11-16 20:01:11.906 +03:00 [INF] CORS policy execution successful.
2025-11-16 20:01:11.919 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 20:01:11.919 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:11.919 +03:00 [INF] Route matched with {action = "GetById", controller = "Cities"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.cities.CitiesDto] GetById(Int32) on controller MappyApplication.Controllers.CitiesController (MappyApplication).
2025-11-16 20:01:11.919 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-11-16 20:01:11.919 +03:00 [INF] Executed action MappyApplication.Controllers.CitiesController.GetById (MappyApplication) in 0.2476ms
2025-11-16 20:01:11.919 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:11.919 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - 400 null application/problem+json; charset=utf-8 13.285ms
2025-11-16 20:01:11.922 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - null null
2025-11-16 20:01:11.922 +03:00 [INF] CORS policy execution successful.
2025-11-16 20:01:11.935 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 20:01:11.935 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:11.935 +03:00 [INF] Route matched with {action = "GetById", controller = "Cities"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.cities.CitiesDto] GetById(Int32) on controller MappyApplication.Controllers.CitiesController (MappyApplication).
2025-11-16 20:01:11.936 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-11-16 20:01:11.936 +03:00 [INF] Executed action MappyApplication.Controllers.CitiesController.GetById (MappyApplication) in 0.2861ms
2025-11-16 20:01:11.936 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:11.936 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - 400 null application/problem+json; charset=utf-8 13.5543ms
2025-11-16 20:01:11.939 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - null null
2025-11-16 20:01:11.939 +03:00 [INF] CORS policy execution successful.
2025-11-16 20:01:11.951 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 20:01:11.951 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:11.951 +03:00 [INF] Route matched with {action = "GetById", controller = "Cities"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.cities.CitiesDto] GetById(Int32) on controller MappyApplication.Controllers.CitiesController (MappyApplication).
2025-11-16 20:01:11.951 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-11-16 20:01:11.951 +03:00 [INF] Executed action MappyApplication.Controllers.CitiesController.GetById (MappyApplication) in 0.2934ms
2025-11-16 20:01:11.951 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:11.951 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - 400 null application/problem+json; charset=utf-8 12.1088ms
2025-11-16 20:01:11.954 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - null null
2025-11-16 20:01:11.954 +03:00 [INF] CORS policy execution successful.
2025-11-16 20:01:11.969 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 20:01:11.969 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:11.969 +03:00 [INF] Route matched with {action = "GetById", controller = "Cities"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.cities.CitiesDto] GetById(Int32) on controller MappyApplication.Controllers.CitiesController (MappyApplication).
2025-11-16 20:01:11.970 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-11-16 20:01:11.970 +03:00 [INF] Executed action MappyApplication.Controllers.CitiesController.GetById (MappyApplication) in 0.4038ms
2025-11-16 20:01:11.970 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:11.970 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - 400 null application/problem+json; charset=utf-8 15.6039ms
2025-11-16 20:01:11.974 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - null null
2025-11-16 20:01:11.974 +03:00 [INF] CORS policy execution successful.
2025-11-16 20:01:11.990 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 20:01:11.990 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:11.990 +03:00 [INF] Route matched with {action = "GetById", controller = "Cities"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.cities.CitiesDto] GetById(Int32) on controller MappyApplication.Controllers.CitiesController (MappyApplication).
2025-11-16 20:01:11.990 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-11-16 20:01:11.991 +03:00 [INF] Executed action MappyApplication.Controllers.CitiesController.GetById (MappyApplication) in 0.3523ms
2025-11-16 20:01:11.991 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:11.991 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - 400 null application/problem+json; charset=utf-8 16.4387ms
2025-11-16 20:01:11.995 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - null null
2025-11-16 20:01:11.995 +03:00 [INF] CORS policy execution successful.
2025-11-16 20:01:12.008 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 20:01:12.009 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:12.009 +03:00 [INF] Route matched with {action = "GetById", controller = "Cities"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.cities.CitiesDto] GetById(Int32) on controller MappyApplication.Controllers.CitiesController (MappyApplication).
2025-11-16 20:01:12.009 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-11-16 20:01:12.009 +03:00 [INF] Executed action MappyApplication.Controllers.CitiesController.GetById (MappyApplication) in 0.3735ms
2025-11-16 20:01:12.009 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:12.009 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - 400 null application/problem+json; charset=utf-8 13.7675ms
2025-11-16 20:01:12.014 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - null null
2025-11-16 20:01:12.014 +03:00 [INF] CORS policy execution successful.
2025-11-16 20:01:12.027 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 20:01:12.027 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:12.027 +03:00 [INF] Route matched with {action = "GetById", controller = "Cities"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.cities.CitiesDto] GetById(Int32) on controller MappyApplication.Controllers.CitiesController (MappyApplication).
2025-11-16 20:01:12.028 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-11-16 20:01:12.028 +03:00 [INF] Executed action MappyApplication.Controllers.CitiesController.GetById (MappyApplication) in 0.3375ms
2025-11-16 20:01:12.028 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:12.028 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - 400 null application/problem+json; charset=utf-8 14.2233ms
2025-11-16 20:01:12.033 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - null null
2025-11-16 20:01:12.033 +03:00 [INF] CORS policy execution successful.
2025-11-16 20:01:12.047 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 20:01:12.047 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:12.047 +03:00 [INF] Route matched with {action = "GetById", controller = "Cities"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.cities.CitiesDto] GetById(Int32) on controller MappyApplication.Controllers.CitiesController (MappyApplication).
2025-11-16 20:01:12.048 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-11-16 20:01:12.048 +03:00 [INF] Executed action MappyApplication.Controllers.CitiesController.GetById (MappyApplication) in 0.362ms
2025-11-16 20:01:12.048 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:12.048 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - 400 null application/problem+json; charset=utf-8 15.1402ms
2025-11-16 20:01:12.052 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - null null
2025-11-16 20:01:12.053 +03:00 [INF] CORS policy execution successful.
2025-11-16 20:01:12.068 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 20:01:12.068 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:12.068 +03:00 [INF] Route matched with {action = "GetById", controller = "Cities"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.cities.CitiesDto] GetById(Int32) on controller MappyApplication.Controllers.CitiesController (MappyApplication).
2025-11-16 20:01:12.068 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-11-16 20:01:12.068 +03:00 [INF] Executed action MappyApplication.Controllers.CitiesController.GetById (MappyApplication) in 0.2916ms
2025-11-16 20:01:12.068 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:12.068 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - 400 null application/problem+json; charset=utf-8 16.1272ms
2025-11-16 20:01:12.072 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - null null
2025-11-16 20:01:12.072 +03:00 [INF] CORS policy execution successful.
2025-11-16 20:01:12.085 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 20:01:12.085 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:12.085 +03:00 [INF] Route matched with {action = "GetById", controller = "Cities"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.cities.CitiesDto] GetById(Int32) on controller MappyApplication.Controllers.CitiesController (MappyApplication).
2025-11-16 20:01:12.085 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-11-16 20:01:12.085 +03:00 [INF] Executed action MappyApplication.Controllers.CitiesController.GetById (MappyApplication) in 0.2389ms
2025-11-16 20:01:12.085 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:12.085 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - 400 null application/problem+json; charset=utf-8 13.5826ms
2025-11-16 20:01:12.088 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - null null
2025-11-16 20:01:12.088 +03:00 [INF] CORS policy execution successful.
2025-11-16 20:01:12.103 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 20:01:12.103 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:12.103 +03:00 [INF] Route matched with {action = "GetById", controller = "Cities"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.cities.CitiesDto] GetById(Int32) on controller MappyApplication.Controllers.CitiesController (MappyApplication).
2025-11-16 20:01:12.103 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-11-16 20:01:12.103 +03:00 [INF] Executed action MappyApplication.Controllers.CitiesController.GetById (MappyApplication) in 0.313ms
2025-11-16 20:01:12.103 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:12.103 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - 400 null application/problem+json; charset=utf-8 15.2017ms
2025-11-16 20:01:12.106 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - null null
2025-11-16 20:01:12.106 +03:00 [INF] CORS policy execution successful.
2025-11-16 20:01:12.118 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 20:01:12.118 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:12.119 +03:00 [INF] Route matched with {action = "GetById", controller = "Cities"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.cities.CitiesDto] GetById(Int32) on controller MappyApplication.Controllers.CitiesController (MappyApplication).
2025-11-16 20:01:12.119 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-11-16 20:01:12.119 +03:00 [INF] Executed action MappyApplication.Controllers.CitiesController.GetById (MappyApplication) in 0.258ms
2025-11-16 20:01:12.119 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:12.119 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - 400 null application/problem+json; charset=utf-8 12.5111ms
2025-11-16 20:01:12.122 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - null null
2025-11-16 20:01:12.122 +03:00 [INF] CORS policy execution successful.
2025-11-16 20:01:12.136 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 20:01:12.136 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:12.136 +03:00 [INF] Route matched with {action = "GetById", controller = "Cities"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.cities.CitiesDto] GetById(Int32) on controller MappyApplication.Controllers.CitiesController (MappyApplication).
2025-11-16 20:01:12.136 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-11-16 20:01:12.136 +03:00 [INF] Executed action MappyApplication.Controllers.CitiesController.GetById (MappyApplication) in 0.329ms
2025-11-16 20:01:12.136 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:12.136 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - 400 null application/problem+json; charset=utf-8 14.1596ms
2025-11-16 20:01:12.140 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - null null
2025-11-16 20:01:12.140 +03:00 [INF] CORS policy execution successful.
2025-11-16 20:01:12.152 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 20:01:12.152 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:12.152 +03:00 [INF] Route matched with {action = "GetById", controller = "Cities"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.cities.CitiesDto] GetById(Int32) on controller MappyApplication.Controllers.CitiesController (MappyApplication).
2025-11-16 20:01:12.152 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-11-16 20:01:12.152 +03:00 [INF] Executed action MappyApplication.Controllers.CitiesController.GetById (MappyApplication) in 0.2765ms
2025-11-16 20:01:12.152 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:12.152 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - 400 null application/problem+json; charset=utf-8 12.44ms
2025-11-16 20:01:12.155 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - null null
2025-11-16 20:01:12.155 +03:00 [INF] CORS policy execution successful.
2025-11-16 20:01:12.169 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 20:01:12.169 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:12.169 +03:00 [INF] Route matched with {action = "GetById", controller = "Cities"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.cities.CitiesDto] GetById(Int32) on controller MappyApplication.Controllers.CitiesController (MappyApplication).
2025-11-16 20:01:12.170 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-11-16 20:01:12.170 +03:00 [INF] Executed action MappyApplication.Controllers.CitiesController.GetById (MappyApplication) in 0.5155ms
2025-11-16 20:01:12.170 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:12.170 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - 400 null application/problem+json; charset=utf-8 14.7679ms
2025-11-16 20:01:12.174 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - null null
2025-11-16 20:01:12.174 +03:00 [INF] CORS policy execution successful.
2025-11-16 20:01:12.187 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 20:01:12.187 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:12.187 +03:00 [INF] Route matched with {action = "GetById", controller = "Cities"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.cities.CitiesDto] GetById(Int32) on controller MappyApplication.Controllers.CitiesController (MappyApplication).
2025-11-16 20:01:12.188 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-11-16 20:01:12.188 +03:00 [INF] Executed action MappyApplication.Controllers.CitiesController.GetById (MappyApplication) in 0.2768ms
2025-11-16 20:01:12.188 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:12.188 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - 400 null application/problem+json; charset=utf-8 13.747ms
2025-11-16 20:01:12.191 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - null null
2025-11-16 20:01:12.191 +03:00 [INF] CORS policy execution successful.
2025-11-16 20:01:12.203 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 20:01:12.203 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:12.203 +03:00 [INF] Route matched with {action = "GetById", controller = "Cities"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.cities.CitiesDto] GetById(Int32) on controller MappyApplication.Controllers.CitiesController (MappyApplication).
2025-11-16 20:01:12.204 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-11-16 20:01:12.204 +03:00 [INF] Executed action MappyApplication.Controllers.CitiesController.GetById (MappyApplication) in 0.2421ms
2025-11-16 20:01:12.204 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:12.204 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - 400 null application/problem+json; charset=utf-8 12.8439ms
2025-11-16 20:01:12.207 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - null null
2025-11-16 20:01:12.207 +03:00 [INF] CORS policy execution successful.
2025-11-16 20:01:12.221 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 20:01:12.221 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:12.221 +03:00 [INF] Route matched with {action = "GetById", controller = "Cities"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.cities.CitiesDto] GetById(Int32) on controller MappyApplication.Controllers.CitiesController (MappyApplication).
2025-11-16 20:01:12.221 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-11-16 20:01:12.221 +03:00 [INF] Executed action MappyApplication.Controllers.CitiesController.GetById (MappyApplication) in 0.2657ms
2025-11-16 20:01:12.221 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:12.221 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - 400 null application/problem+json; charset=utf-8 14.4905ms
2025-11-16 20:01:12.225 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - null null
2025-11-16 20:01:12.225 +03:00 [INF] CORS policy execution successful.
2025-11-16 20:01:12.238 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 20:01:12.239 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:12.239 +03:00 [INF] Route matched with {action = "GetById", controller = "Cities"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.cities.CitiesDto] GetById(Int32) on controller MappyApplication.Controllers.CitiesController (MappyApplication).
2025-11-16 20:01:12.239 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-11-16 20:01:12.239 +03:00 [INF] Executed action MappyApplication.Controllers.CitiesController.GetById (MappyApplication) in 0.254ms
2025-11-16 20:01:12.239 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:12.239 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - 400 null application/problem+json; charset=utf-8 13.6617ms
2025-11-16 20:01:12.242 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - null null
2025-11-16 20:01:12.243 +03:00 [INF] CORS policy execution successful.
2025-11-16 20:01:12.254 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 20:01:12.254 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:12.254 +03:00 [INF] Route matched with {action = "GetById", controller = "Cities"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.cities.CitiesDto] GetById(Int32) on controller MappyApplication.Controllers.CitiesController (MappyApplication).
2025-11-16 20:01:12.255 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-11-16 20:01:12.255 +03:00 [INF] Executed action MappyApplication.Controllers.CitiesController.GetById (MappyApplication) in 0.2675ms
2025-11-16 20:01:12.255 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:12.255 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - 400 null application/problem+json; charset=utf-8 12.1494ms
2025-11-16 20:01:12.258 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - null null
2025-11-16 20:01:12.258 +03:00 [INF] CORS policy execution successful.
2025-11-16 20:01:12.269 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 20:01:12.269 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:12.269 +03:00 [INF] Route matched with {action = "GetById", controller = "Cities"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.cities.CitiesDto] GetById(Int32) on controller MappyApplication.Controllers.CitiesController (MappyApplication).
2025-11-16 20:01:12.270 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-11-16 20:01:12.270 +03:00 [INF] Executed action MappyApplication.Controllers.CitiesController.GetById (MappyApplication) in 0.3051ms
2025-11-16 20:01:12.270 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:12.270 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - 400 null application/problem+json; charset=utf-8 12.1753ms
2025-11-16 20:01:12.273 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - null null
2025-11-16 20:01:12.273 +03:00 [INF] CORS policy execution successful.
2025-11-16 20:01:12.288 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 20:01:12.288 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:12.288 +03:00 [INF] Route matched with {action = "GetById", controller = "Cities"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.cities.CitiesDto] GetById(Int32) on controller MappyApplication.Controllers.CitiesController (MappyApplication).
2025-11-16 20:01:12.288 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-11-16 20:01:12.288 +03:00 [INF] Executed action MappyApplication.Controllers.CitiesController.GetById (MappyApplication) in 0.3701ms
2025-11-16 20:01:12.288 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:12.288 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - 400 null application/problem+json; charset=utf-8 15.1603ms
2025-11-16 20:01:12.292 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - null null
2025-11-16 20:01:12.292 +03:00 [INF] CORS policy execution successful.
2025-11-16 20:01:12.308 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 20:01:12.308 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:12.309 +03:00 [INF] Route matched with {action = "GetById", controller = "Cities"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.cities.CitiesDto] GetById(Int32) on controller MappyApplication.Controllers.CitiesController (MappyApplication).
2025-11-16 20:01:12.309 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-11-16 20:01:12.309 +03:00 [INF] Executed action MappyApplication.Controllers.CitiesController.GetById (MappyApplication) in 0.3291ms
2025-11-16 20:01:12.309 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:12.309 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - 400 null application/problem+json; charset=utf-8 16.8242ms
2025-11-16 20:01:12.313 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - null null
2025-11-16 20:01:12.313 +03:00 [INF] CORS policy execution successful.
2025-11-16 20:01:12.328 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 20:01:12.328 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:12.328 +03:00 [INF] Route matched with {action = "GetById", controller = "Cities"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.cities.CitiesDto] GetById(Int32) on controller MappyApplication.Controllers.CitiesController (MappyApplication).
2025-11-16 20:01:12.328 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-11-16 20:01:12.328 +03:00 [INF] Executed action MappyApplication.Controllers.CitiesController.GetById (MappyApplication) in 0.3333ms
2025-11-16 20:01:12.328 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:12.328 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - 400 null application/problem+json; charset=utf-8 15.4632ms
2025-11-16 20:01:12.333 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - null null
2025-11-16 20:01:12.333 +03:00 [INF] CORS policy execution successful.
2025-11-16 20:01:12.347 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 20:01:12.347 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:12.347 +03:00 [INF] Route matched with {action = "GetById", controller = "Cities"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.cities.CitiesDto] GetById(Int32) on controller MappyApplication.Controllers.CitiesController (MappyApplication).
2025-11-16 20:01:12.347 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-11-16 20:01:12.347 +03:00 [INF] Executed action MappyApplication.Controllers.CitiesController.GetById (MappyApplication) in 0.3222ms
2025-11-16 20:01:12.347 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:12.347 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - 400 null application/problem+json; charset=utf-8 14.5442ms
2025-11-16 20:01:12.351 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - null null
2025-11-16 20:01:12.351 +03:00 [INF] CORS policy execution successful.
2025-11-16 20:01:12.367 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 20:01:12.367 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:12.367 +03:00 [INF] Route matched with {action = "GetById", controller = "Cities"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.cities.CitiesDto] GetById(Int32) on controller MappyApplication.Controllers.CitiesController (MappyApplication).
2025-11-16 20:01:12.367 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-11-16 20:01:12.367 +03:00 [INF] Executed action MappyApplication.Controllers.CitiesController.GetById (MappyApplication) in 0.3248ms
2025-11-16 20:01:12.367 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:12.368 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - 400 null application/problem+json; charset=utf-8 16.3407ms
2025-11-16 20:01:12.456 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - null null
2025-11-16 20:01:12.457 +03:00 [INF] CORS policy execution successful.
2025-11-16 20:01:12.478 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 20:01:12.479 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:12.479 +03:00 [INF] Route matched with {action = "GetById", controller = "Cities"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.cities.CitiesDto] GetById(Int32) on controller MappyApplication.Controllers.CitiesController (MappyApplication).
2025-11-16 20:01:12.479 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-11-16 20:01:12.479 +03:00 [INF] Executed action MappyApplication.Controllers.CitiesController.GetById (MappyApplication) in 0.4583ms
2025-11-16 20:01:12.479 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:12.479 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - 400 null application/problem+json; charset=utf-8 22.9594ms
2025-11-16 20:01:12.483 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - null null
2025-11-16 20:01:12.484 +03:00 [INF] CORS policy execution successful.
2025-11-16 20:01:12.505 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 20:01:12.505 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:12.505 +03:00 [INF] Route matched with {action = "GetById", controller = "Cities"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.cities.CitiesDto] GetById(Int32) on controller MappyApplication.Controllers.CitiesController (MappyApplication).
2025-11-16 20:01:12.505 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-11-16 20:01:12.505 +03:00 [INF] Executed action MappyApplication.Controllers.CitiesController.GetById (MappyApplication) in 0.2834ms
2025-11-16 20:01:12.505 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:12.505 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - 400 null application/problem+json; charset=utf-8 21.899ms
2025-11-16 20:01:12.508 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - null null
2025-11-16 20:01:12.508 +03:00 [INF] CORS policy execution successful.
2025-11-16 20:01:12.522 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 20:01:12.522 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:12.522 +03:00 [INF] Route matched with {action = "GetById", controller = "Cities"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.cities.CitiesDto] GetById(Int32) on controller MappyApplication.Controllers.CitiesController (MappyApplication).
2025-11-16 20:01:12.522 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-11-16 20:01:12.522 +03:00 [INF] Executed action MappyApplication.Controllers.CitiesController.GetById (MappyApplication) in 0.3542ms
2025-11-16 20:01:12.522 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:12.522 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - 400 null application/problem+json; charset=utf-8 14.4727ms
2025-11-16 20:01:12.525 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - null null
2025-11-16 20:01:12.525 +03:00 [INF] CORS policy execution successful.
2025-11-16 20:01:12.537 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 20:01:12.537 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:12.537 +03:00 [INF] Route matched with {action = "GetById", controller = "Cities"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.cities.CitiesDto] GetById(Int32) on controller MappyApplication.Controllers.CitiesController (MappyApplication).
2025-11-16 20:01:12.537 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-11-16 20:01:12.537 +03:00 [INF] Executed action MappyApplication.Controllers.CitiesController.GetById (MappyApplication) in 0.2291ms
2025-11-16 20:01:12.537 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:12.537 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - 400 null application/problem+json; charset=utf-8 12.4336ms
2025-11-16 20:01:12.540 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - null null
2025-11-16 20:01:12.540 +03:00 [INF] CORS policy execution successful.
2025-11-16 20:01:12.553 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 20:01:12.554 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:12.554 +03:00 [INF] Route matched with {action = "GetById", controller = "Cities"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.cities.CitiesDto] GetById(Int32) on controller MappyApplication.Controllers.CitiesController (MappyApplication).
2025-11-16 20:01:12.554 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-11-16 20:01:12.554 +03:00 [INF] Executed action MappyApplication.Controllers.CitiesController.GetById (MappyApplication) in 0.225ms
2025-11-16 20:01:12.554 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:12.554 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - 400 null application/problem+json; charset=utf-8 13.9752ms
2025-11-16 20:01:12.556 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - null null
2025-11-16 20:01:12.557 +03:00 [INF] CORS policy execution successful.
2025-11-16 20:01:12.568 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 20:01:12.568 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:12.568 +03:00 [INF] Route matched with {action = "GetById", controller = "Cities"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.cities.CitiesDto] GetById(Int32) on controller MappyApplication.Controllers.CitiesController (MappyApplication).
2025-11-16 20:01:12.568 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-11-16 20:01:12.569 +03:00 [INF] Executed action MappyApplication.Controllers.CitiesController.GetById (MappyApplication) in 0.2495ms
2025-11-16 20:01:12.569 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:12.569 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - 400 null application/problem+json; charset=utf-8 12.0884ms
2025-11-16 20:01:12.572 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - null null
2025-11-16 20:01:12.572 +03:00 [INF] CORS policy execution successful.
2025-11-16 20:01:12.586 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 20:01:12.586 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:12.586 +03:00 [INF] Route matched with {action = "GetById", controller = "Cities"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.cities.CitiesDto] GetById(Int32) on controller MappyApplication.Controllers.CitiesController (MappyApplication).
2025-11-16 20:01:12.586 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-11-16 20:01:12.586 +03:00 [INF] Executed action MappyApplication.Controllers.CitiesController.GetById (MappyApplication) in 0.2945ms
2025-11-16 20:01:12.586 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:12.586 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - 400 null application/problem+json; charset=utf-8 14.2377ms
2025-11-16 20:01:12.589 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - null null
2025-11-16 20:01:12.589 +03:00 [INF] CORS policy execution successful.
2025-11-16 20:01:12.604 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 20:01:12.604 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:12.604 +03:00 [INF] Route matched with {action = "GetById", controller = "Cities"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.cities.CitiesDto] GetById(Int32) on controller MappyApplication.Controllers.CitiesController (MappyApplication).
2025-11-16 20:01:12.604 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-11-16 20:01:12.604 +03:00 [INF] Executed action MappyApplication.Controllers.CitiesController.GetById (MappyApplication) in 0.2511ms
2025-11-16 20:01:12.605 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:12.605 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - 400 null application/problem+json; charset=utf-8 15.2334ms
2025-11-16 20:01:12.607 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - null null
2025-11-16 20:01:12.608 +03:00 [INF] CORS policy execution successful.
2025-11-16 20:01:12.619 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 20:01:12.619 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:12.619 +03:00 [INF] Route matched with {action = "GetById", controller = "Cities"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.cities.CitiesDto] GetById(Int32) on controller MappyApplication.Controllers.CitiesController (MappyApplication).
2025-11-16 20:01:12.619 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-11-16 20:01:12.619 +03:00 [INF] Executed action MappyApplication.Controllers.CitiesController.GetById (MappyApplication) in 0.3077ms
2025-11-16 20:01:12.619 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:12.619 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - 400 null application/problem+json; charset=utf-8 11.7015ms
2025-11-16 20:01:12.622 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - null null
2025-11-16 20:01:12.622 +03:00 [INF] CORS policy execution successful.
2025-11-16 20:01:12.634 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 20:01:12.635 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:12.635 +03:00 [INF] Route matched with {action = "GetById", controller = "Cities"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.cities.CitiesDto] GetById(Int32) on controller MappyApplication.Controllers.CitiesController (MappyApplication).
2025-11-16 20:01:12.635 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-11-16 20:01:12.635 +03:00 [INF] Executed action MappyApplication.Controllers.CitiesController.GetById (MappyApplication) in 0.2712ms
2025-11-16 20:01:12.635 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:12.635 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - 400 null application/problem+json; charset=utf-8 12.8342ms
2025-11-16 20:01:12.638 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - null null
2025-11-16 20:01:12.638 +03:00 [INF] CORS policy execution successful.
2025-11-16 20:01:12.653 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 20:01:12.653 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:12.653 +03:00 [INF] Route matched with {action = "GetById", controller = "Cities"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.cities.CitiesDto] GetById(Int32) on controller MappyApplication.Controllers.CitiesController (MappyApplication).
2025-11-16 20:01:12.653 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-11-16 20:01:12.653 +03:00 [INF] Executed action MappyApplication.Controllers.CitiesController.GetById (MappyApplication) in 0.3021ms
2025-11-16 20:01:12.653 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:12.653 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - 400 null application/problem+json; charset=utf-8 15.2895ms
2025-11-16 20:01:12.657 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - null null
2025-11-16 20:01:12.657 +03:00 [INF] CORS policy execution successful.
2025-11-16 20:01:12.668 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 20:01:12.668 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:12.668 +03:00 [INF] Route matched with {action = "GetById", controller = "Cities"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.cities.CitiesDto] GetById(Int32) on controller MappyApplication.Controllers.CitiesController (MappyApplication).
2025-11-16 20:01:12.669 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-11-16 20:01:12.669 +03:00 [INF] Executed action MappyApplication.Controllers.CitiesController.GetById (MappyApplication) in 0.2682ms
2025-11-16 20:01:12.669 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:12.669 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - 400 null application/problem+json; charset=utf-8 12.1209ms
2025-11-16 20:01:12.672 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - null null
2025-11-16 20:01:12.672 +03:00 [INF] CORS policy execution successful.
2025-11-16 20:01:12.684 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 20:01:12.684 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:12.684 +03:00 [INF] Route matched with {action = "GetById", controller = "Cities"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.cities.CitiesDto] GetById(Int32) on controller MappyApplication.Controllers.CitiesController (MappyApplication).
2025-11-16 20:01:12.684 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-11-16 20:01:12.684 +03:00 [INF] Executed action MappyApplication.Controllers.CitiesController.GetById (MappyApplication) in 0.2784ms
2025-11-16 20:01:12.684 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:12.684 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - 400 null application/problem+json; charset=utf-8 12.3319ms
2025-11-16 20:01:12.688 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - null null
2025-11-16 20:01:12.688 +03:00 [INF] CORS policy execution successful.
2025-11-16 20:01:12.702 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 20:01:12.702 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:12.702 +03:00 [INF] Route matched with {action = "GetById", controller = "Cities"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.cities.CitiesDto] GetById(Int32) on controller MappyApplication.Controllers.CitiesController (MappyApplication).
2025-11-16 20:01:12.702 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-11-16 20:01:12.702 +03:00 [INF] Executed action MappyApplication.Controllers.CitiesController.GetById (MappyApplication) in 0.323ms
2025-11-16 20:01:12.702 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:12.702 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - 400 null application/problem+json; charset=utf-8 14.4444ms
2025-11-16 20:01:12.706 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - null null
2025-11-16 20:01:12.706 +03:00 [INF] CORS policy execution successful.
2025-11-16 20:01:12.720 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 20:01:12.720 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:12.721 +03:00 [INF] Route matched with {action = "GetById", controller = "Cities"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.cities.CitiesDto] GetById(Int32) on controller MappyApplication.Controllers.CitiesController (MappyApplication).
2025-11-16 20:01:12.721 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-11-16 20:01:12.721 +03:00 [INF] Executed action MappyApplication.Controllers.CitiesController.GetById (MappyApplication) in 0.3924ms
2025-11-16 20:01:12.721 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:12.721 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - 400 null application/problem+json; charset=utf-8 15.0258ms
2025-11-16 20:01:12.725 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - null null
2025-11-16 20:01:12.726 +03:00 [INF] CORS policy execution successful.
2025-11-16 20:01:12.745 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 20:01:12.745 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:12.745 +03:00 [INF] Route matched with {action = "GetById", controller = "Cities"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.cities.CitiesDto] GetById(Int32) on controller MappyApplication.Controllers.CitiesController (MappyApplication).
2025-11-16 20:01:12.745 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-11-16 20:01:12.745 +03:00 [INF] Executed action MappyApplication.Controllers.CitiesController.GetById (MappyApplication) in 0.4251ms
2025-11-16 20:01:12.745 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:12.745 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - 400 null application/problem+json; charset=utf-8 19.9335ms
2025-11-16 20:01:12.750 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - null null
2025-11-16 20:01:12.750 +03:00 [INF] CORS policy execution successful.
2025-11-16 20:01:12.776 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 20:01:12.777 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:12.777 +03:00 [INF] Route matched with {action = "GetById", controller = "Cities"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.cities.CitiesDto] GetById(Int32) on controller MappyApplication.Controllers.CitiesController (MappyApplication).
2025-11-16 20:01:12.777 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-11-16 20:01:12.777 +03:00 [INF] Executed action MappyApplication.Controllers.CitiesController.GetById (MappyApplication) in 0.2976ms
2025-11-16 20:01:12.777 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:12.777 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - 400 null application/problem+json; charset=utf-8 26.7608ms
2025-11-16 20:01:12.782 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - null null
2025-11-16 20:01:12.782 +03:00 [INF] CORS policy execution successful.
2025-11-16 20:01:12.798 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 20:01:12.799 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:12.799 +03:00 [INF] Route matched with {action = "GetById", controller = "Cities"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.cities.CitiesDto] GetById(Int32) on controller MappyApplication.Controllers.CitiesController (MappyApplication).
2025-11-16 20:01:12.799 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-11-16 20:01:12.799 +03:00 [INF] Executed action MappyApplication.Controllers.CitiesController.GetById (MappyApplication) in 0.3041ms
2025-11-16 20:01:12.799 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:12.799 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - 400 null application/problem+json; charset=utf-8 16.6895ms
2025-11-16 20:01:12.803 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - null null
2025-11-16 20:01:12.804 +03:00 [INF] CORS policy execution successful.
2025-11-16 20:01:12.818 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 20:01:12.818 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:12.818 +03:00 [INF] Route matched with {action = "GetById", controller = "Cities"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.cities.CitiesDto] GetById(Int32) on controller MappyApplication.Controllers.CitiesController (MappyApplication).
2025-11-16 20:01:12.818 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-11-16 20:01:12.818 +03:00 [INF] Executed action MappyApplication.Controllers.CitiesController.GetById (MappyApplication) in 0.2835ms
2025-11-16 20:01:12.818 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:12.818 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - 400 null application/problem+json; charset=utf-8 14.7415ms
2025-11-16 20:01:12.822 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - null null
2025-11-16 20:01:12.822 +03:00 [INF] CORS policy execution successful.
2025-11-16 20:01:12.837 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 20:01:12.837 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:12.837 +03:00 [INF] Route matched with {action = "GetById", controller = "Cities"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.cities.CitiesDto] GetById(Int32) on controller MappyApplication.Controllers.CitiesController (MappyApplication).
2025-11-16 20:01:12.837 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-11-16 20:01:12.837 +03:00 [INF] Executed action MappyApplication.Controllers.CitiesController.GetById (MappyApplication) in 0.3419ms
2025-11-16 20:01:12.837 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:12.837 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - 400 null application/problem+json; charset=utf-8 15.2766ms
2025-11-16 20:01:12.840 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - null null
2025-11-16 20:01:12.840 +03:00 [INF] CORS policy execution successful.
2025-11-16 20:01:12.851 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 20:01:12.851 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:12.851 +03:00 [INF] Route matched with {action = "GetById", controller = "Cities"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.cities.CitiesDto] GetById(Int32) on controller MappyApplication.Controllers.CitiesController (MappyApplication).
2025-11-16 20:01:12.851 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-11-16 20:01:12.852 +03:00 [INF] Executed action MappyApplication.Controllers.CitiesController.GetById (MappyApplication) in 0.4821ms
2025-11-16 20:01:12.852 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:12.852 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - 400 null application/problem+json; charset=utf-8 11.3058ms
2025-11-16 20:01:12.860 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - null null
2025-11-16 20:01:12.860 +03:00 [INF] CORS policy execution successful.
2025-11-16 20:01:12.875 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 20:01:12.876 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:12.876 +03:00 [INF] Route matched with {action = "GetById", controller = "Cities"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.cities.CitiesDto] GetById(Int32) on controller MappyApplication.Controllers.CitiesController (MappyApplication).
2025-11-16 20:01:12.876 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-11-16 20:01:12.876 +03:00 [INF] Executed action MappyApplication.Controllers.CitiesController.GetById (MappyApplication) in 0.3088ms
2025-11-16 20:01:12.876 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:12.876 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - 400 null application/problem+json; charset=utf-8 16.336ms
2025-11-16 20:01:12.880 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - null null
2025-11-16 20:01:12.880 +03:00 [INF] CORS policy execution successful.
2025-11-16 20:01:12.895 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 20:01:12.895 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:12.895 +03:00 [INF] Route matched with {action = "GetById", controller = "Cities"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.cities.CitiesDto] GetById(Int32) on controller MappyApplication.Controllers.CitiesController (MappyApplication).
2025-11-16 20:01:12.895 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-11-16 20:01:12.895 +03:00 [INF] Executed action MappyApplication.Controllers.CitiesController.GetById (MappyApplication) in 0.3353ms
2025-11-16 20:01:12.895 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:12.895 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - 400 null application/problem+json; charset=utf-8 15.5161ms
2025-11-16 20:01:12.900 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - null null
2025-11-16 20:01:12.900 +03:00 [INF] CORS policy execution successful.
2025-11-16 20:01:12.916 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 20:01:12.916 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:12.916 +03:00 [INF] Route matched with {action = "GetById", controller = "Cities"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.cities.CitiesDto] GetById(Int32) on controller MappyApplication.Controllers.CitiesController (MappyApplication).
2025-11-16 20:01:12.917 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-11-16 20:01:12.917 +03:00 [INF] Executed action MappyApplication.Controllers.CitiesController.GetById (MappyApplication) in 0.2903ms
2025-11-16 20:01:12.917 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:12.917 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - 400 null application/problem+json; charset=utf-8 16.9922ms
2025-11-16 20:01:12.921 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - null null
2025-11-16 20:01:12.921 +03:00 [INF] CORS policy execution successful.
2025-11-16 20:01:12.935 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 20:01:12.935 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:12.935 +03:00 [INF] Route matched with {action = "GetById", controller = "Cities"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.cities.CitiesDto] GetById(Int32) on controller MappyApplication.Controllers.CitiesController (MappyApplication).
2025-11-16 20:01:12.936 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-11-16 20:01:12.936 +03:00 [INF] Executed action MappyApplication.Controllers.CitiesController.GetById (MappyApplication) in 0.4233ms
2025-11-16 20:01:12.936 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:12.936 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - 400 null application/problem+json; charset=utf-8 15.3516ms
2025-11-16 20:01:12.939 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - null null
2025-11-16 20:01:12.940 +03:00 [INF] CORS policy execution successful.
2025-11-16 20:01:12.954 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 20:01:12.954 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:12.954 +03:00 [INF] Route matched with {action = "GetById", controller = "Cities"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.cities.CitiesDto] GetById(Int32) on controller MappyApplication.Controllers.CitiesController (MappyApplication).
2025-11-16 20:01:12.955 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-11-16 20:01:12.955 +03:00 [INF] Executed action MappyApplication.Controllers.CitiesController.GetById (MappyApplication) in 0.361ms
2025-11-16 20:01:12.955 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:12.955 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - 400 null application/problem+json; charset=utf-8 15.1732ms
2025-11-16 20:01:12.959 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - null null
2025-11-16 20:01:12.959 +03:00 [INF] CORS policy execution successful.
2025-11-16 20:01:12.977 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 20:01:12.977 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:12.977 +03:00 [INF] Route matched with {action = "GetById", controller = "Cities"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.cities.CitiesDto] GetById(Int32) on controller MappyApplication.Controllers.CitiesController (MappyApplication).
2025-11-16 20:01:12.977 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-11-16 20:01:12.978 +03:00 [INF] Executed action MappyApplication.Controllers.CitiesController.GetById (MappyApplication) in 0.4083ms
2025-11-16 20:01:12.978 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:12.978 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - 400 null application/problem+json; charset=utf-8 18.58ms
2025-11-16 20:01:12.982 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - null null
2025-11-16 20:01:12.982 +03:00 [INF] CORS policy execution successful.
2025-11-16 20:01:13.000 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 20:01:13.000 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:13.000 +03:00 [INF] Route matched with {action = "GetById", controller = "Cities"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.cities.CitiesDto] GetById(Int32) on controller MappyApplication.Controllers.CitiesController (MappyApplication).
2025-11-16 20:01:13.000 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-11-16 20:01:13.000 +03:00 [INF] Executed action MappyApplication.Controllers.CitiesController.GetById (MappyApplication) in 0.4002ms
2025-11-16 20:01:13.000 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:13.000 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - 400 null application/problem+json; charset=utf-8 18.2181ms
2025-11-16 20:01:13.004 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - null null
2025-11-16 20:01:13.004 +03:00 [INF] CORS policy execution successful.
2025-11-16 20:01:13.020 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 20:01:13.020 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:13.020 +03:00 [INF] Route matched with {action = "GetById", controller = "Cities"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.cities.CitiesDto] GetById(Int32) on controller MappyApplication.Controllers.CitiesController (MappyApplication).
2025-11-16 20:01:13.021 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-11-16 20:01:13.021 +03:00 [INF] Executed action MappyApplication.Controllers.CitiesController.GetById (MappyApplication) in 0.4726ms
2025-11-16 20:01:13.021 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:13.021 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - 400 null application/problem+json; charset=utf-8 16.7554ms
2025-11-16 20:01:13.025 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - null null
2025-11-16 20:01:13.025 +03:00 [INF] CORS policy execution successful.
2025-11-16 20:01:13.039 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 20:01:13.039 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:13.039 +03:00 [INF] Route matched with {action = "GetById", controller = "Cities"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.cities.CitiesDto] GetById(Int32) on controller MappyApplication.Controllers.CitiesController (MappyApplication).
2025-11-16 20:01:13.039 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-11-16 20:01:13.039 +03:00 [INF] Executed action MappyApplication.Controllers.CitiesController.GetById (MappyApplication) in 0.3745ms
2025-11-16 20:01:13.040 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:13.040 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - 400 null application/problem+json; charset=utf-8 14.4286ms
2025-11-16 20:01:13.044 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - null null
2025-11-16 20:01:13.044 +03:00 [INF] CORS policy execution successful.
2025-11-16 20:01:13.061 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 20:01:13.061 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:13.061 +03:00 [INF] Route matched with {action = "GetById", controller = "Cities"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.cities.CitiesDto] GetById(Int32) on controller MappyApplication.Controllers.CitiesController (MappyApplication).
2025-11-16 20:01:13.062 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-11-16 20:01:13.062 +03:00 [INF] Executed action MappyApplication.Controllers.CitiesController.GetById (MappyApplication) in 0.5273ms
2025-11-16 20:01:13.062 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:13.062 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - 400 null application/problem+json; charset=utf-8 18.1918ms
2025-11-16 20:01:13.069 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - null null
2025-11-16 20:01:13.070 +03:00 [INF] CORS policy execution successful.
2025-11-16 20:01:13.087 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 20:01:13.087 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:13.087 +03:00 [INF] Route matched with {action = "GetById", controller = "Cities"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.cities.CitiesDto] GetById(Int32) on controller MappyApplication.Controllers.CitiesController (MappyApplication).
2025-11-16 20:01:13.088 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-11-16 20:01:13.088 +03:00 [INF] Executed action MappyApplication.Controllers.CitiesController.GetById (MappyApplication) in 0.3944ms
2025-11-16 20:01:13.088 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:13.088 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - 400 null application/problem+json; charset=utf-8 18.58ms
2025-11-16 20:01:13.092 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - null null
2025-11-16 20:01:13.092 +03:00 [INF] CORS policy execution successful.
2025-11-16 20:01:13.109 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 20:01:13.109 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:13.109 +03:00 [INF] Route matched with {action = "GetById", controller = "Cities"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.cities.CitiesDto] GetById(Int32) on controller MappyApplication.Controllers.CitiesController (MappyApplication).
2025-11-16 20:01:13.109 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-11-16 20:01:13.109 +03:00 [INF] Executed action MappyApplication.Controllers.CitiesController.GetById (MappyApplication) in 0.4249ms
2025-11-16 20:01:13.109 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:13.109 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - 400 null application/problem+json; charset=utf-8 17.4128ms
2025-11-16 20:01:13.114 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - null null
2025-11-16 20:01:13.114 +03:00 [INF] CORS policy execution successful.
2025-11-16 20:01:13.134 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 20:01:13.134 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:13.134 +03:00 [INF] Route matched with {action = "GetById", controller = "Cities"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.cities.CitiesDto] GetById(Int32) on controller MappyApplication.Controllers.CitiesController (MappyApplication).
2025-11-16 20:01:13.135 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-11-16 20:01:13.135 +03:00 [INF] Executed action MappyApplication.Controllers.CitiesController.GetById (MappyApplication) in 0.393ms
2025-11-16 20:01:13.135 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:13.135 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - 400 null application/problem+json; charset=utf-8 20.6461ms
2025-11-16 20:01:13.139 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - null null
2025-11-16 20:01:13.139 +03:00 [INF] CORS policy execution successful.
2025-11-16 20:01:13.156 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 20:01:13.157 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:13.157 +03:00 [INF] Route matched with {action = "GetById", controller = "Cities"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.cities.CitiesDto] GetById(Int32) on controller MappyApplication.Controllers.CitiesController (MappyApplication).
2025-11-16 20:01:13.157 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-11-16 20:01:13.157 +03:00 [INF] Executed action MappyApplication.Controllers.CitiesController.GetById (MappyApplication) in 0.4107ms
2025-11-16 20:01:13.157 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:13.157 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - 400 null application/problem+json; charset=utf-8 18.018ms
2025-11-16 20:01:13.163 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - null null
2025-11-16 20:01:13.163 +03:00 [INF] CORS policy execution successful.
2025-11-16 20:01:13.180 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 20:01:13.180 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:13.180 +03:00 [INF] Route matched with {action = "GetById", controller = "Cities"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.cities.CitiesDto] GetById(Int32) on controller MappyApplication.Controllers.CitiesController (MappyApplication).
2025-11-16 20:01:13.180 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-11-16 20:01:13.180 +03:00 [INF] Executed action MappyApplication.Controllers.CitiesController.GetById (MappyApplication) in 0.4429ms
2025-11-16 20:01:13.180 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:13.181 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - 400 null application/problem+json; charset=utf-8 17.7118ms
2025-11-16 20:01:13.184 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - null null
2025-11-16 20:01:13.184 +03:00 [INF] CORS policy execution successful.
2025-11-16 20:01:13.201 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 20:01:13.202 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:13.202 +03:00 [INF] Route matched with {action = "GetById", controller = "Cities"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.cities.CitiesDto] GetById(Int32) on controller MappyApplication.Controllers.CitiesController (MappyApplication).
2025-11-16 20:01:13.202 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-11-16 20:01:13.202 +03:00 [INF] Executed action MappyApplication.Controllers.CitiesController.GetById (MappyApplication) in 0.4548ms
2025-11-16 20:01:13.202 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:13.202 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - 400 null application/problem+json; charset=utf-8 17.9836ms
2025-11-16 20:01:13.207 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - null null
2025-11-16 20:01:13.207 +03:00 [INF] CORS policy execution successful.
2025-11-16 20:01:13.224 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 20:01:13.224 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:13.224 +03:00 [INF] Route matched with {action = "GetById", controller = "Cities"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.cities.CitiesDto] GetById(Int32) on controller MappyApplication.Controllers.CitiesController (MappyApplication).
2025-11-16 20:01:13.224 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-11-16 20:01:13.224 +03:00 [INF] Executed action MappyApplication.Controllers.CitiesController.GetById (MappyApplication) in 0.3596ms
2025-11-16 20:01:13.224 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:13.224 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - 400 null application/problem+json; charset=utf-8 17.7803ms
2025-11-16 20:01:13.228 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - null null
2025-11-16 20:01:13.229 +03:00 [INF] CORS policy execution successful.
2025-11-16 20:01:13.246 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 20:01:13.246 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:13.246 +03:00 [INF] Route matched with {action = "GetById", controller = "Cities"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.cities.CitiesDto] GetById(Int32) on controller MappyApplication.Controllers.CitiesController (MappyApplication).
2025-11-16 20:01:13.246 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-11-16 20:01:13.246 +03:00 [INF] Executed action MappyApplication.Controllers.CitiesController.GetById (MappyApplication) in 0.3522ms
2025-11-16 20:01:13.246 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:13.246 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - 400 null application/problem+json; charset=utf-8 17.7567ms
2025-11-16 20:01:13.249 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - null null
2025-11-16 20:01:13.250 +03:00 [INF] CORS policy execution successful.
2025-11-16 20:01:13.266 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 20:01:13.266 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:13.266 +03:00 [INF] Route matched with {action = "GetById", controller = "Cities"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.cities.CitiesDto] GetById(Int32) on controller MappyApplication.Controllers.CitiesController (MappyApplication).
2025-11-16 20:01:13.266 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-11-16 20:01:13.266 +03:00 [INF] Executed action MappyApplication.Controllers.CitiesController.GetById (MappyApplication) in 0.375ms
2025-11-16 20:01:13.266 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:13.266 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - 400 null application/problem+json; charset=utf-8 16.8227ms
2025-11-16 20:01:13.269 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - null null
2025-11-16 20:01:13.269 +03:00 [INF] CORS policy execution successful.
2025-11-16 20:01:13.283 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 20:01:13.283 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:13.283 +03:00 [INF] Route matched with {action = "GetById", controller = "Cities"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.cities.CitiesDto] GetById(Int32) on controller MappyApplication.Controllers.CitiesController (MappyApplication).
2025-11-16 20:01:13.283 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-11-16 20:01:13.284 +03:00 [INF] Executed action MappyApplication.Controllers.CitiesController.GetById (MappyApplication) in 0.3135ms
2025-11-16 20:01:13.284 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:13.284 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - 400 null application/problem+json; charset=utf-8 14.3035ms
2025-11-16 20:01:13.287 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - null null
2025-11-16 20:01:13.287 +03:00 [INF] CORS policy execution successful.
2025-11-16 20:01:13.299 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 20:01:13.299 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:13.299 +03:00 [INF] Route matched with {action = "GetById", controller = "Cities"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.cities.CitiesDto] GetById(Int32) on controller MappyApplication.Controllers.CitiesController (MappyApplication).
2025-11-16 20:01:13.299 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-11-16 20:01:13.299 +03:00 [INF] Executed action MappyApplication.Controllers.CitiesController.GetById (MappyApplication) in 0.2729ms
2025-11-16 20:01:13.299 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:13.299 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - 400 null application/problem+json; charset=utf-8 12.4362ms
2025-11-16 20:01:13.302 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - null null
2025-11-16 20:01:13.303 +03:00 [INF] CORS policy execution successful.
2025-11-16 20:01:13.316 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 20:01:13.316 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:13.316 +03:00 [INF] Route matched with {action = "GetById", controller = "Cities"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.cities.CitiesDto] GetById(Int32) on controller MappyApplication.Controllers.CitiesController (MappyApplication).
2025-11-16 20:01:13.316 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-11-16 20:01:13.316 +03:00 [INF] Executed action MappyApplication.Controllers.CitiesController.GetById (MappyApplication) in 0.276ms
2025-11-16 20:01:13.316 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:13.316 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - 400 null application/problem+json; charset=utf-8 13.7909ms
2025-11-16 20:01:13.319 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - null null
2025-11-16 20:01:13.320 +03:00 [INF] CORS policy execution successful.
2025-11-16 20:01:13.332 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 20:01:13.332 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:13.332 +03:00 [INF] Route matched with {action = "GetById", controller = "Cities"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.cities.CitiesDto] GetById(Int32) on controller MappyApplication.Controllers.CitiesController (MappyApplication).
2025-11-16 20:01:13.332 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-11-16 20:01:13.332 +03:00 [INF] Executed action MappyApplication.Controllers.CitiesController.GetById (MappyApplication) in 0.3123ms
2025-11-16 20:01:13.332 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:13.332 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - 400 null application/problem+json; charset=utf-8 13.0172ms
2025-11-16 20:01:13.335 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - null null
2025-11-16 20:01:13.336 +03:00 [INF] CORS policy execution successful.
2025-11-16 20:01:13.347 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 20:01:13.347 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:13.348 +03:00 [INF] Route matched with {action = "GetById", controller = "Cities"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.cities.CitiesDto] GetById(Int32) on controller MappyApplication.Controllers.CitiesController (MappyApplication).
2025-11-16 20:01:13.348 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-11-16 20:01:13.348 +03:00 [INF] Executed action MappyApplication.Controllers.CitiesController.GetById (MappyApplication) in 0.2867ms
2025-11-16 20:01:13.348 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:13.348 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - 400 null application/problem+json; charset=utf-8 12.4397ms
2025-11-16 20:01:13.351 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - null null
2025-11-16 20:01:13.351 +03:00 [INF] CORS policy execution successful.
2025-11-16 20:01:13.363 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 20:01:13.363 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:13.363 +03:00 [INF] Route matched with {action = "GetById", controller = "Cities"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.cities.CitiesDto] GetById(Int32) on controller MappyApplication.Controllers.CitiesController (MappyApplication).
2025-11-16 20:01:13.364 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-11-16 20:01:13.364 +03:00 [INF] Executed action MappyApplication.Controllers.CitiesController.GetById (MappyApplication) in 0.3167ms
2025-11-16 20:01:13.364 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:13.364 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - 400 null application/problem+json; charset=utf-8 12.538ms
2025-11-16 20:01:13.368 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - null null
2025-11-16 20:01:13.368 +03:00 [INF] CORS policy execution successful.
2025-11-16 20:01:13.383 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 20:01:13.383 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:13.383 +03:00 [INF] Route matched with {action = "GetById", controller = "Cities"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.cities.CitiesDto] GetById(Int32) on controller MappyApplication.Controllers.CitiesController (MappyApplication).
2025-11-16 20:01:13.384 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-11-16 20:01:13.384 +03:00 [INF] Executed action MappyApplication.Controllers.CitiesController.GetById (MappyApplication) in 0.3154ms
2025-11-16 20:01:13.384 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:13.384 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - 400 null application/problem+json; charset=utf-8 15.7835ms
2025-11-16 20:01:13.387 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - null null
2025-11-16 20:01:13.387 +03:00 [INF] CORS policy execution successful.
2025-11-16 20:01:13.400 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 20:01:13.400 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:13.400 +03:00 [INF] Route matched with {action = "GetById", controller = "Cities"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.cities.CitiesDto] GetById(Int32) on controller MappyApplication.Controllers.CitiesController (MappyApplication).
2025-11-16 20:01:13.400 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-11-16 20:01:13.400 +03:00 [INF] Executed action MappyApplication.Controllers.CitiesController.GetById (MappyApplication) in 0.2936ms
2025-11-16 20:01:13.400 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:13.400 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - 400 null application/problem+json; charset=utf-8 13.3064ms
2025-11-16 20:01:13.404 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - null null
2025-11-16 20:01:13.404 +03:00 [INF] CORS policy execution successful.
2025-11-16 20:01:13.418 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 20:01:13.418 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:13.418 +03:00 [INF] Route matched with {action = "GetById", controller = "Cities"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.cities.CitiesDto] GetById(Int32) on controller MappyApplication.Controllers.CitiesController (MappyApplication).
2025-11-16 20:01:13.419 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-11-16 20:01:13.419 +03:00 [INF] Executed action MappyApplication.Controllers.CitiesController.GetById (MappyApplication) in 0.3071ms
2025-11-16 20:01:13.419 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:13.419 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - 400 null application/problem+json; charset=utf-8 14.9044ms
2025-11-16 20:01:13.422 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - null null
2025-11-16 20:01:13.422 +03:00 [INF] CORS policy execution successful.
2025-11-16 20:01:13.435 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 20:01:13.435 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:13.435 +03:00 [INF] Route matched with {action = "GetById", controller = "Cities"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.cities.CitiesDto] GetById(Int32) on controller MappyApplication.Controllers.CitiesController (MappyApplication).
2025-11-16 20:01:13.435 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-11-16 20:01:13.436 +03:00 [INF] Executed action MappyApplication.Controllers.CitiesController.GetById (MappyApplication) in 0.3171ms
2025-11-16 20:01:13.436 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:13.436 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - 400 null application/problem+json; charset=utf-8 13.3313ms
2025-11-16 20:01:13.439 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - null null
2025-11-16 20:01:13.439 +03:00 [INF] CORS policy execution successful.
2025-11-16 20:01:13.452 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 20:01:13.453 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:13.453 +03:00 [INF] Route matched with {action = "GetById", controller = "Cities"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.cities.CitiesDto] GetById(Int32) on controller MappyApplication.Controllers.CitiesController (MappyApplication).
2025-11-16 20:01:13.453 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-11-16 20:01:13.453 +03:00 [INF] Executed action MappyApplication.Controllers.CitiesController.GetById (MappyApplication) in 0.3407ms
2025-11-16 20:01:13.453 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:13.453 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - 400 null application/problem+json; charset=utf-8 13.8572ms
2025-11-16 20:01:13.457 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - null null
2025-11-16 20:01:13.457 +03:00 [INF] CORS policy execution successful.
2025-11-16 20:01:13.469 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 20:01:13.469 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:13.469 +03:00 [INF] Route matched with {action = "GetById", controller = "Cities"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.cities.CitiesDto] GetById(Int32) on controller MappyApplication.Controllers.CitiesController (MappyApplication).
2025-11-16 20:01:13.470 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-11-16 20:01:13.470 +03:00 [INF] Executed action MappyApplication.Controllers.CitiesController.GetById (MappyApplication) in 0.3425ms
2025-11-16 20:01:13.470 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:13.470 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - 400 null application/problem+json; charset=utf-8 13.132ms
2025-11-16 20:01:13.473 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - null null
2025-11-16 20:01:13.473 +03:00 [INF] CORS policy execution successful.
2025-11-16 20:01:13.487 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 20:01:13.487 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:13.487 +03:00 [INF] Route matched with {action = "GetById", controller = "Cities"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.cities.CitiesDto] GetById(Int32) on controller MappyApplication.Controllers.CitiesController (MappyApplication).
2025-11-16 20:01:13.487 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-11-16 20:01:13.487 +03:00 [INF] Executed action MappyApplication.Controllers.CitiesController.GetById (MappyApplication) in 0.3005ms
2025-11-16 20:01:13.487 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:13.487 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - 400 null application/problem+json; charset=utf-8 13.9136ms
2025-11-16 20:01:13.492 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - null null
2025-11-16 20:01:13.492 +03:00 [INF] CORS policy execution successful.
2025-11-16 20:01:13.507 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 20:01:13.507 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:13.508 +03:00 [INF] Route matched with {action = "GetById", controller = "Cities"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.cities.CitiesDto] GetById(Int32) on controller MappyApplication.Controllers.CitiesController (MappyApplication).
2025-11-16 20:01:13.508 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-11-16 20:01:13.508 +03:00 [INF] Executed action MappyApplication.Controllers.CitiesController.GetById (MappyApplication) in 0.3888ms
2025-11-16 20:01:13.508 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:13.508 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - 400 null application/problem+json; charset=utf-8 16.0788ms
2025-11-16 20:01:13.512 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - null null
2025-11-16 20:01:13.512 +03:00 [INF] CORS policy execution successful.
2025-11-16 20:01:13.530 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 20:01:13.530 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:13.530 +03:00 [INF] Route matched with {action = "GetById", controller = "Cities"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.cities.CitiesDto] GetById(Int32) on controller MappyApplication.Controllers.CitiesController (MappyApplication).
2025-11-16 20:01:13.530 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-11-16 20:01:13.530 +03:00 [INF] Executed action MappyApplication.Controllers.CitiesController.GetById (MappyApplication) in 0.4356ms
2025-11-16 20:01:13.530 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:13.531 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - 400 null application/problem+json; charset=utf-8 18.3067ms
2025-11-16 20:01:13.535 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - null null
2025-11-16 20:01:13.535 +03:00 [INF] CORS policy execution successful.
2025-11-16 20:01:13.550 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 20:01:13.550 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:13.550 +03:00 [INF] Route matched with {action = "GetById", controller = "Cities"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.cities.CitiesDto] GetById(Int32) on controller MappyApplication.Controllers.CitiesController (MappyApplication).
2025-11-16 20:01:13.551 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-11-16 20:01:13.551 +03:00 [INF] Executed action MappyApplication.Controllers.CitiesController.GetById (MappyApplication) in 0.3581ms
2025-11-16 20:01:13.551 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:13.551 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - 400 null application/problem+json; charset=utf-8 16.1082ms
2025-11-16 20:01:13.555 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - null null
2025-11-16 20:01:13.555 +03:00 [INF] CORS policy execution successful.
2025-11-16 20:01:13.571 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 20:01:13.572 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:13.572 +03:00 [INF] Route matched with {action = "GetById", controller = "Cities"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.cities.CitiesDto] GetById(Int32) on controller MappyApplication.Controllers.CitiesController (MappyApplication).
2025-11-16 20:01:13.572 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-11-16 20:01:13.572 +03:00 [INF] Executed action MappyApplication.Controllers.CitiesController.GetById (MappyApplication) in 0.4115ms
2025-11-16 20:01:13.572 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:13.572 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - 400 null application/problem+json; charset=utf-8 17.1231ms
2025-11-16 20:01:13.576 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - null null
2025-11-16 20:01:13.577 +03:00 [INF] CORS policy execution successful.
2025-11-16 20:01:13.594 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 20:01:13.595 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:13.595 +03:00 [INF] Route matched with {action = "GetById", controller = "Cities"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.cities.CitiesDto] GetById(Int32) on controller MappyApplication.Controllers.CitiesController (MappyApplication).
2025-11-16 20:01:13.595 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-11-16 20:01:13.595 +03:00 [INF] Executed action MappyApplication.Controllers.CitiesController.GetById (MappyApplication) in 0.4399ms
2025-11-16 20:01:13.595 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:13.595 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - 400 null application/problem+json; charset=utf-8 18.8585ms
2025-11-16 20:01:13.600 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - null null
2025-11-16 20:01:13.600 +03:00 [INF] CORS policy execution successful.
2025-11-16 20:01:13.617 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 20:01:13.618 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:13.618 +03:00 [INF] Route matched with {action = "GetById", controller = "Cities"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.cities.CitiesDto] GetById(Int32) on controller MappyApplication.Controllers.CitiesController (MappyApplication).
2025-11-16 20:01:13.618 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-11-16 20:01:13.618 +03:00 [INF] Executed action MappyApplication.Controllers.CitiesController.GetById (MappyApplication) in 0.4537ms
2025-11-16 20:01:13.618 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:13.618 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - 400 null application/problem+json; charset=utf-8 18.471ms
2025-11-16 20:01:13.623 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - null null
2025-11-16 20:01:13.623 +03:00 [INF] CORS policy execution successful.
2025-11-16 20:01:13.641 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 20:01:13.641 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:13.641 +03:00 [INF] Route matched with {action = "GetById", controller = "Cities"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.cities.CitiesDto] GetById(Int32) on controller MappyApplication.Controllers.CitiesController (MappyApplication).
2025-11-16 20:01:13.642 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-11-16 20:01:13.642 +03:00 [INF] Executed action MappyApplication.Controllers.CitiesController.GetById (MappyApplication) in 0.4034ms
2025-11-16 20:01:13.642 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:13.642 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - 400 null application/problem+json; charset=utf-8 18.5304ms
2025-11-16 20:01:13.648 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - null null
2025-11-16 20:01:13.648 +03:00 [INF] CORS policy execution successful.
2025-11-16 20:01:13.678 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 20:01:13.678 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:13.678 +03:00 [INF] Route matched with {action = "GetById", controller = "Cities"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.cities.CitiesDto] GetById(Int32) on controller MappyApplication.Controllers.CitiesController (MappyApplication).
2025-11-16 20:01:13.678 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-11-16 20:01:13.679 +03:00 [INF] Executed action MappyApplication.Controllers.CitiesController.GetById (MappyApplication) in 0.484ms
2025-11-16 20:01:13.679 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:13.679 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - 400 null application/problem+json; charset=utf-8 30.6812ms
2025-11-16 20:01:13.686 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - null null
2025-11-16 20:01:13.686 +03:00 [INF] CORS policy execution successful.
2025-11-16 20:01:13.705 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 20:01:13.705 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:13.705 +03:00 [INF] Route matched with {action = "GetById", controller = "Cities"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.cities.CitiesDto] GetById(Int32) on controller MappyApplication.Controllers.CitiesController (MappyApplication).
2025-11-16 20:01:13.705 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-11-16 20:01:13.705 +03:00 [INF] Executed action MappyApplication.Controllers.CitiesController.GetById (MappyApplication) in 0.4582ms
2025-11-16 20:01:13.705 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:13.705 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - 400 null application/problem+json; charset=utf-8 19.595ms
2025-11-16 20:01:13.710 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - null null
2025-11-16 20:01:13.710 +03:00 [INF] CORS policy execution successful.
2025-11-16 20:01:13.730 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 20:01:13.730 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:13.730 +03:00 [INF] Route matched with {action = "GetById", controller = "Cities"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.cities.CitiesDto] GetById(Int32) on controller MappyApplication.Controllers.CitiesController (MappyApplication).
2025-11-16 20:01:13.730 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-11-16 20:01:13.730 +03:00 [INF] Executed action MappyApplication.Controllers.CitiesController.GetById (MappyApplication) in 0.4905ms
2025-11-16 20:01:13.730 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:13.731 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - 400 null application/problem+json; charset=utf-8 20.8791ms
2025-11-16 20:01:13.736 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - null null
2025-11-16 20:01:13.736 +03:00 [INF] CORS policy execution successful.
2025-11-16 20:01:13.752 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 20:01:13.752 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:13.752 +03:00 [INF] Route matched with {action = "GetById", controller = "Cities"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.cities.CitiesDto] GetById(Int32) on controller MappyApplication.Controllers.CitiesController (MappyApplication).
2025-11-16 20:01:13.752 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-11-16 20:01:13.753 +03:00 [INF] Executed action MappyApplication.Controllers.CitiesController.GetById (MappyApplication) in 0.4609ms
2025-11-16 20:01:13.753 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:13.753 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - 400 null application/problem+json; charset=utf-8 16.58ms
2025-11-16 20:01:13.757 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - null null
2025-11-16 20:01:13.757 +03:00 [INF] CORS policy execution successful.
2025-11-16 20:01:13.771 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 20:01:13.771 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:13.771 +03:00 [INF] Route matched with {action = "GetById", controller = "Cities"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.cities.CitiesDto] GetById(Int32) on controller MappyApplication.Controllers.CitiesController (MappyApplication).
2025-11-16 20:01:13.771 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-11-16 20:01:13.772 +03:00 [INF] Executed action MappyApplication.Controllers.CitiesController.GetById (MappyApplication) in 0.3756ms
2025-11-16 20:01:13.772 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:13.772 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - 400 null application/problem+json; charset=utf-8 14.8002ms
2025-11-16 20:01:13.775 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - null null
2025-11-16 20:01:13.776 +03:00 [INF] CORS policy execution successful.
2025-11-16 20:01:13.789 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 20:01:13.789 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:13.789 +03:00 [INF] Route matched with {action = "GetById", controller = "Cities"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.cities.CitiesDto] GetById(Int32) on controller MappyApplication.Controllers.CitiesController (MappyApplication).
2025-11-16 20:01:13.790 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-11-16 20:01:13.790 +03:00 [INF] Executed action MappyApplication.Controllers.CitiesController.GetById (MappyApplication) in 0.3827ms
2025-11-16 20:01:13.790 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:13.790 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - 400 null application/problem+json; charset=utf-8 14.26ms
2025-11-16 20:01:13.794 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - null null
2025-11-16 20:01:13.794 +03:00 [INF] CORS policy execution successful.
2025-11-16 20:01:13.811 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 20:01:13.811 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:13.811 +03:00 [INF] Route matched with {action = "GetById", controller = "Cities"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.cities.CitiesDto] GetById(Int32) on controller MappyApplication.Controllers.CitiesController (MappyApplication).
2025-11-16 20:01:13.812 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-11-16 20:01:13.812 +03:00 [INF] Executed action MappyApplication.Controllers.CitiesController.GetById (MappyApplication) in 0.408ms
2025-11-16 20:01:13.812 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:13.812 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - 400 null application/problem+json; charset=utf-8 17.6965ms
2025-11-16 20:01:13.816 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - null null
2025-11-16 20:01:13.817 +03:00 [INF] CORS policy execution successful.
2025-11-16 20:01:13.832 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 20:01:13.832 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:13.832 +03:00 [INF] Route matched with {action = "GetById", controller = "Cities"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.cities.CitiesDto] GetById(Int32) on controller MappyApplication.Controllers.CitiesController (MappyApplication).
2025-11-16 20:01:13.833 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-11-16 20:01:13.833 +03:00 [INF] Executed action MappyApplication.Controllers.CitiesController.GetById (MappyApplication) in 0.426ms
2025-11-16 20:01:13.833 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:13.833 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - 400 null application/problem+json; charset=utf-8 16.4334ms
2025-11-16 20:01:13.837 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - null null
2025-11-16 20:01:13.837 +03:00 [INF] CORS policy execution successful.
2025-11-16 20:01:13.853 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 20:01:13.853 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:13.853 +03:00 [INF] Route matched with {action = "GetById", controller = "Cities"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.cities.CitiesDto] GetById(Int32) on controller MappyApplication.Controllers.CitiesController (MappyApplication).
2025-11-16 20:01:13.854 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-11-16 20:01:13.854 +03:00 [INF] Executed action MappyApplication.Controllers.CitiesController.GetById (MappyApplication) in 0.425ms
2025-11-16 20:01:13.854 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:13.854 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - 400 null application/problem+json; charset=utf-8 16.8232ms
2025-11-16 20:01:13.858 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - null null
2025-11-16 20:01:13.858 +03:00 [INF] CORS policy execution successful.
2025-11-16 20:01:13.874 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 20:01:13.874 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:13.874 +03:00 [INF] Route matched with {action = "GetById", controller = "Cities"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.cities.CitiesDto] GetById(Int32) on controller MappyApplication.Controllers.CitiesController (MappyApplication).
2025-11-16 20:01:13.874 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-11-16 20:01:13.874 +03:00 [INF] Executed action MappyApplication.Controllers.CitiesController.GetById (MappyApplication) in 0.3682ms
2025-11-16 20:01:13.874 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:13.874 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - 400 null application/problem+json; charset=utf-8 16.3192ms
2025-11-16 20:01:13.878 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - null null
2025-11-16 20:01:13.879 +03:00 [INF] CORS policy execution successful.
2025-11-16 20:01:13.894 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 20:01:13.894 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:13.894 +03:00 [INF] Route matched with {action = "GetById", controller = "Cities"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.cities.CitiesDto] GetById(Int32) on controller MappyApplication.Controllers.CitiesController (MappyApplication).
2025-11-16 20:01:13.895 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-11-16 20:01:13.895 +03:00 [INF] Executed action MappyApplication.Controllers.CitiesController.GetById (MappyApplication) in 0.3812ms
2025-11-16 20:01:13.895 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:13.895 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - 400 null application/problem+json; charset=utf-8 16.3395ms
2025-11-16 20:01:13.899 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - null null
2025-11-16 20:01:13.899 +03:00 [INF] CORS policy execution successful.
2025-11-16 20:01:13.914 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 20:01:13.914 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:13.914 +03:00 [INF] Route matched with {action = "GetById", controller = "Cities"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.cities.CitiesDto] GetById(Int32) on controller MappyApplication.Controllers.CitiesController (MappyApplication).
2025-11-16 20:01:13.914 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-11-16 20:01:13.914 +03:00 [INF] Executed action MappyApplication.Controllers.CitiesController.GetById (MappyApplication) in 0.2988ms
2025-11-16 20:01:13.914 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:13.914 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - 400 null application/problem+json; charset=utf-8 15.0847ms
2025-11-16 20:01:13.947 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - null null
2025-11-16 20:01:13.947 +03:00 [INF] CORS policy execution successful.
2025-11-16 20:01:13.968 +03:00 [INF] Executed DbCommand (4ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 20:01:13.968 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:13.969 +03:00 [INF] Route matched with {action = "GetById", controller = "Cities"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.cities.CitiesDto] GetById(Int32) on controller MappyApplication.Controllers.CitiesController (MappyApplication).
2025-11-16 20:01:13.970 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-11-16 20:01:13.970 +03:00 [INF] Executed action MappyApplication.Controllers.CitiesController.GetById (MappyApplication) in 1.037ms
2025-11-16 20:01:13.970 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:13.970 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - 400 null application/problem+json; charset=utf-8 23.181ms
2025-11-16 20:01:13.973 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - null null
2025-11-16 20:01:13.974 +03:00 [INF] CORS policy execution successful.
2025-11-16 20:01:13.986 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 20:01:13.986 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:13.986 +03:00 [INF] Route matched with {action = "GetById", controller = "Cities"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.cities.CitiesDto] GetById(Int32) on controller MappyApplication.Controllers.CitiesController (MappyApplication).
2025-11-16 20:01:13.986 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-11-16 20:01:13.986 +03:00 [INF] Executed action MappyApplication.Controllers.CitiesController.GetById (MappyApplication) in 0.3173ms
2025-11-16 20:01:13.986 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:13.986 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - 400 null application/problem+json; charset=utf-8 12.8963ms
2025-11-16 20:01:13.989 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - null null
2025-11-16 20:01:13.989 +03:00 [INF] CORS policy execution successful.
2025-11-16 20:01:14.000 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 20:01:14.001 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:14.001 +03:00 [INF] Route matched with {action = "GetById", controller = "Cities"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.cities.CitiesDto] GetById(Int32) on controller MappyApplication.Controllers.CitiesController (MappyApplication).
2025-11-16 20:01:14.001 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-11-16 20:01:14.001 +03:00 [INF] Executed action MappyApplication.Controllers.CitiesController.GetById (MappyApplication) in 0.2625ms
2025-11-16 20:01:14.001 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:14.001 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - 400 null application/problem+json; charset=utf-8 11.6949ms
2025-11-16 20:01:14.015 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - null null
2025-11-16 20:01:14.016 +03:00 [INF] CORS policy execution successful.
2025-11-16 20:01:14.031 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 20:01:14.031 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:14.031 +03:00 [INF] Route matched with {action = "GetById", controller = "Cities"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.cities.CitiesDto] GetById(Int32) on controller MappyApplication.Controllers.CitiesController (MappyApplication).
2025-11-16 20:01:14.032 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-11-16 20:01:14.032 +03:00 [INF] Executed action MappyApplication.Controllers.CitiesController.GetById (MappyApplication) in 0.2548ms
2025-11-16 20:01:14.032 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:14.032 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - 400 null application/problem+json; charset=utf-8 16.1723ms
2025-11-16 20:01:14.034 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - null null
2025-11-16 20:01:14.034 +03:00 [INF] CORS policy execution successful.
2025-11-16 20:01:14.044 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 20:01:14.044 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:14.045 +03:00 [INF] Route matched with {action = "GetById", controller = "Cities"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.cities.CitiesDto] GetById(Int32) on controller MappyApplication.Controllers.CitiesController (MappyApplication).
2025-11-16 20:01:14.045 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-11-16 20:01:14.045 +03:00 [INF] Executed action MappyApplication.Controllers.CitiesController.GetById (MappyApplication) in 0.2546ms
2025-11-16 20:01:14.045 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:14.045 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - 400 null application/problem+json; charset=utf-8 10.5862ms
2025-11-16 20:01:14.048 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - null null
2025-11-16 20:01:14.048 +03:00 [INF] CORS policy execution successful.
2025-11-16 20:01:14.058 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 20:01:14.058 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:14.058 +03:00 [INF] Route matched with {action = "GetById", controller = "Cities"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.cities.CitiesDto] GetById(Int32) on controller MappyApplication.Controllers.CitiesController (MappyApplication).
2025-11-16 20:01:14.059 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-11-16 20:01:14.059 +03:00 [INF] Executed action MappyApplication.Controllers.CitiesController.GetById (MappyApplication) in 0.2385ms
2025-11-16 20:01:14.059 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:14.059 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - 400 null application/problem+json; charset=utf-8 10.4358ms
2025-11-16 20:01:14.061 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - null null
2025-11-16 20:01:14.061 +03:00 [INF] CORS policy execution successful.
2025-11-16 20:01:14.074 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 20:01:14.074 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:14.074 +03:00 [INF] Route matched with {action = "GetById", controller = "Cities"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.cities.CitiesDto] GetById(Int32) on controller MappyApplication.Controllers.CitiesController (MappyApplication).
2025-11-16 20:01:14.075 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-11-16 20:01:14.075 +03:00 [INF] Executed action MappyApplication.Controllers.CitiesController.GetById (MappyApplication) in 0.2797ms
2025-11-16 20:01:14.075 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:14.075 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - 400 null application/problem+json; charset=utf-8 13.5275ms
2025-11-16 20:01:14.079 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - null null
2025-11-16 20:01:14.079 +03:00 [INF] CORS policy execution successful.
2025-11-16 20:01:14.090 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 20:01:14.091 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:14.091 +03:00 [INF] Route matched with {action = "GetById", controller = "Cities"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.cities.CitiesDto] GetById(Int32) on controller MappyApplication.Controllers.CitiesController (MappyApplication).
2025-11-16 20:01:14.091 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-11-16 20:01:14.091 +03:00 [INF] Executed action MappyApplication.Controllers.CitiesController.GetById (MappyApplication) in 0.2765ms
2025-11-16 20:01:14.091 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:14.091 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - 400 null application/problem+json; charset=utf-8 11.9602ms
2025-11-16 20:01:14.101 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - null null
2025-11-16 20:01:14.101 +03:00 [INF] CORS policy execution successful.
2025-11-16 20:01:14.115 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 20:01:14.116 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:14.116 +03:00 [INF] Route matched with {action = "GetById", controller = "Cities"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.cities.CitiesDto] GetById(Int32) on controller MappyApplication.Controllers.CitiesController (MappyApplication).
2025-11-16 20:01:14.116 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-11-16 20:01:14.116 +03:00 [INF] Executed action MappyApplication.Controllers.CitiesController.GetById (MappyApplication) in 0.243ms
2025-11-16 20:01:14.116 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:14.116 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - 400 null application/problem+json; charset=utf-8 14.643ms
2025-11-16 20:01:14.118 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - null null
2025-11-16 20:01:14.118 +03:00 [INF] CORS policy execution successful.
2025-11-16 20:01:14.138 +03:00 [INF] Executed DbCommand (6ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 20:01:14.139 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:14.139 +03:00 [INF] Route matched with {action = "GetById", controller = "Cities"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.cities.CitiesDto] GetById(Int32) on controller MappyApplication.Controllers.CitiesController (MappyApplication).
2025-11-16 20:01:14.139 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-11-16 20:01:14.139 +03:00 [INF] Executed action MappyApplication.Controllers.CitiesController.GetById (MappyApplication) in 0.2509ms
2025-11-16 20:01:14.139 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:14.139 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - 400 null application/problem+json; charset=utf-8 20.6273ms
2025-11-16 20:01:14.142 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - null null
2025-11-16 20:01:14.142 +03:00 [INF] CORS policy execution successful.
2025-11-16 20:01:14.152 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 20:01:14.152 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:14.152 +03:00 [INF] Route matched with {action = "GetById", controller = "Cities"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.cities.CitiesDto] GetById(Int32) on controller MappyApplication.Controllers.CitiesController (MappyApplication).
2025-11-16 20:01:14.153 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-11-16 20:01:14.153 +03:00 [INF] Executed action MappyApplication.Controllers.CitiesController.GetById (MappyApplication) in 0.2725ms
2025-11-16 20:01:14.153 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:14.153 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - 400 null application/problem+json; charset=utf-8 10.9261ms
2025-11-16 20:01:14.155 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - null null
2025-11-16 20:01:14.155 +03:00 [INF] CORS policy execution successful.
2025-11-16 20:01:14.166 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 20:01:14.166 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:14.166 +03:00 [INF] Route matched with {action = "GetById", controller = "Cities"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.cities.CitiesDto] GetById(Int32) on controller MappyApplication.Controllers.CitiesController (MappyApplication).
2025-11-16 20:01:14.166 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-11-16 20:01:14.166 +03:00 [INF] Executed action MappyApplication.Controllers.CitiesController.GetById (MappyApplication) in 0.2308ms
2025-11-16 20:01:14.166 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:14.166 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - 400 null application/problem+json; charset=utf-8 11.6016ms
2025-11-16 20:01:14.169 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - null null
2025-11-16 20:01:14.169 +03:00 [INF] CORS policy execution successful.
2025-11-16 20:01:14.182 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 20:01:14.182 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:14.182 +03:00 [INF] Route matched with {action = "GetById", controller = "Cities"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.cities.CitiesDto] GetById(Int32) on controller MappyApplication.Controllers.CitiesController (MappyApplication).
2025-11-16 20:01:14.183 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-11-16 20:01:14.183 +03:00 [INF] Executed action MappyApplication.Controllers.CitiesController.GetById (MappyApplication) in 0.2376ms
2025-11-16 20:01:14.183 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:14.183 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - 400 null application/problem+json; charset=utf-8 13.7798ms
2025-11-16 20:01:14.185 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - null null
2025-11-16 20:01:14.185 +03:00 [INF] CORS policy execution successful.
2025-11-16 20:01:14.198 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 20:01:14.198 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:14.198 +03:00 [INF] Route matched with {action = "GetById", controller = "Cities"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.cities.CitiesDto] GetById(Int32) on controller MappyApplication.Controllers.CitiesController (MappyApplication).
2025-11-16 20:01:14.198 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-11-16 20:01:14.198 +03:00 [INF] Executed action MappyApplication.Controllers.CitiesController.GetById (MappyApplication) in 0.2465ms
2025-11-16 20:01:14.198 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:14.198 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - 400 null application/problem+json; charset=utf-8 13.0715ms
2025-11-16 20:01:14.201 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - null null
2025-11-16 20:01:14.201 +03:00 [INF] CORS policy execution successful.
2025-11-16 20:01:14.214 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 20:01:14.214 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:14.214 +03:00 [INF] Route matched with {action = "GetById", controller = "Cities"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.cities.CitiesDto] GetById(Int32) on controller MappyApplication.Controllers.CitiesController (MappyApplication).
2025-11-16 20:01:14.214 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-11-16 20:01:14.214 +03:00 [INF] Executed action MappyApplication.Controllers.CitiesController.GetById (MappyApplication) in 0.1961ms
2025-11-16 20:01:14.214 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:14.214 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - 400 null application/problem+json; charset=utf-8 13.2472ms
2025-11-16 20:01:14.217 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - null null
2025-11-16 20:01:14.217 +03:00 [INF] CORS policy execution successful.
2025-11-16 20:01:14.227 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 20:01:14.227 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:14.227 +03:00 [INF] Route matched with {action = "GetById", controller = "Cities"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.cities.CitiesDto] GetById(Int32) on controller MappyApplication.Controllers.CitiesController (MappyApplication).
2025-11-16 20:01:14.227 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-11-16 20:01:14.227 +03:00 [INF] Executed action MappyApplication.Controllers.CitiesController.GetById (MappyApplication) in 0.1955ms
2025-11-16 20:01:14.227 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:14.227 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - 400 null application/problem+json; charset=utf-8 10.8107ms
2025-11-16 20:01:14.231 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - null null
2025-11-16 20:01:14.231 +03:00 [INF] CORS policy execution successful.
2025-11-16 20:01:14.242 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 20:01:14.242 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:14.242 +03:00 [INF] Route matched with {action = "GetById", controller = "Cities"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.cities.CitiesDto] GetById(Int32) on controller MappyApplication.Controllers.CitiesController (MappyApplication).
2025-11-16 20:01:14.242 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-11-16 20:01:14.242 +03:00 [INF] Executed action MappyApplication.Controllers.CitiesController.GetById (MappyApplication) in 0.1776ms
2025-11-16 20:01:14.242 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:14.242 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - 400 null application/problem+json; charset=utf-8 11.0857ms
2025-11-16 20:01:14.248 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - null null
2025-11-16 20:01:14.248 +03:00 [INF] CORS policy execution successful.
2025-11-16 20:01:14.259 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 20:01:14.260 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:14.260 +03:00 [INF] Route matched with {action = "GetById", controller = "Cities"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.cities.CitiesDto] GetById(Int32) on controller MappyApplication.Controllers.CitiesController (MappyApplication).
2025-11-16 20:01:14.261 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-11-16 20:01:14.261 +03:00 [INF] Executed action MappyApplication.Controllers.CitiesController.GetById (MappyApplication) in 0.4829ms
2025-11-16 20:01:14.261 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:14.261 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - 400 null application/problem+json; charset=utf-8 13.1166ms
2025-11-16 20:01:14.468 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - null null
2025-11-16 20:01:14.468 +03:00 [INF] CORS policy execution successful.
2025-11-16 20:01:14.487 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 20:01:14.487 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:14.487 +03:00 [INF] Route matched with {action = "GetById", controller = "Cities"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.cities.CitiesDto] GetById(Int32) on controller MappyApplication.Controllers.CitiesController (MappyApplication).
2025-11-16 20:01:14.487 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-11-16 20:01:14.487 +03:00 [INF] Executed action MappyApplication.Controllers.CitiesController.GetById (MappyApplication) in 0.2343ms
2025-11-16 20:01:14.487 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:14.487 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - 400 null application/problem+json; charset=utf-8 19.0787ms
2025-11-16 20:01:14.494 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - null null
2025-11-16 20:01:14.494 +03:00 [INF] CORS policy execution successful.
2025-11-16 20:01:14.517 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 20:01:14.517 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:14.517 +03:00 [INF] Route matched with {action = "GetById", controller = "Cities"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.cities.CitiesDto] GetById(Int32) on controller MappyApplication.Controllers.CitiesController (MappyApplication).
2025-11-16 20:01:14.518 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-11-16 20:01:14.518 +03:00 [INF] Executed action MappyApplication.Controllers.CitiesController.GetById (MappyApplication) in 0.4184ms
2025-11-16 20:01:14.518 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:14.518 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - 400 null application/problem+json; charset=utf-8 24.3949ms
2025-11-16 20:01:14.559 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - null null
2025-11-16 20:01:14.559 +03:00 [INF] CORS policy execution successful.
2025-11-16 20:01:14.575 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 20:01:14.575 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:14.575 +03:00 [INF] Route matched with {action = "GetById", controller = "Cities"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.cities.CitiesDto] GetById(Int32) on controller MappyApplication.Controllers.CitiesController (MappyApplication).
2025-11-16 20:01:14.576 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-11-16 20:01:14.576 +03:00 [INF] Executed action MappyApplication.Controllers.CitiesController.GetById (MappyApplication) in 0.632ms
2025-11-16 20:01:14.576 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:14.576 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - 400 null application/problem+json; charset=utf-8 17.4066ms
2025-11-16 20:01:14.581 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - null null
2025-11-16 20:01:14.581 +03:00 [INF] CORS policy execution successful.
2025-11-16 20:01:14.593 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 20:01:14.593 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:14.593 +03:00 [INF] Route matched with {action = "GetById", controller = "Cities"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.cities.CitiesDto] GetById(Int32) on controller MappyApplication.Controllers.CitiesController (MappyApplication).
2025-11-16 20:01:14.594 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-11-16 20:01:14.594 +03:00 [INF] Executed action MappyApplication.Controllers.CitiesController.GetById (MappyApplication) in 0.9582ms
2025-11-16 20:01:14.594 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:14.594 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - 400 null application/problem+json; charset=utf-8 13.6123ms
2025-11-16 20:01:14.600 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - null null
2025-11-16 20:01:14.600 +03:00 [INF] CORS policy execution successful.
2025-11-16 20:01:14.622 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 20:01:14.626 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:14.626 +03:00 [INF] Route matched with {action = "GetById", controller = "Cities"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.cities.CitiesDto] GetById(Int32) on controller MappyApplication.Controllers.CitiesController (MappyApplication).
2025-11-16 20:01:14.627 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-11-16 20:01:14.627 +03:00 [INF] Executed action MappyApplication.Controllers.CitiesController.GetById (MappyApplication) in 0.4418ms
2025-11-16 20:01:14.627 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:14.627 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - 400 null application/problem+json; charset=utf-8 26.9316ms
2025-11-16 20:01:14.633 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - null null
2025-11-16 20:01:14.633 +03:00 [INF] CORS policy execution successful.
2025-11-16 20:01:14.647 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 20:01:14.647 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:14.647 +03:00 [INF] Route matched with {action = "GetById", controller = "Cities"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.cities.CitiesDto] GetById(Int32) on controller MappyApplication.Controllers.CitiesController (MappyApplication).
2025-11-16 20:01:14.647 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-11-16 20:01:14.647 +03:00 [INF] Executed action MappyApplication.Controllers.CitiesController.GetById (MappyApplication) in 0.3639ms
2025-11-16 20:01:14.647 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:14.647 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - 400 null application/problem+json; charset=utf-8 14.6591ms
2025-11-16 20:01:14.654 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - null null
2025-11-16 20:01:14.654 +03:00 [INF] CORS policy execution successful.
2025-11-16 20:01:14.675 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 20:01:14.675 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:14.675 +03:00 [INF] Route matched with {action = "GetById", controller = "Cities"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.cities.CitiesDto] GetById(Int32) on controller MappyApplication.Controllers.CitiesController (MappyApplication).
2025-11-16 20:01:14.676 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-11-16 20:01:14.676 +03:00 [INF] Executed action MappyApplication.Controllers.CitiesController.GetById (MappyApplication) in 0.4848ms
2025-11-16 20:01:14.676 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:14.676 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - 400 null application/problem+json; charset=utf-8 22.0139ms
2025-11-16 20:01:14.687 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - null null
2025-11-16 20:01:14.687 +03:00 [INF] CORS policy execution successful.
2025-11-16 20:01:14.701 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 20:01:14.702 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:14.702 +03:00 [INF] Route matched with {action = "GetById", controller = "Cities"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.cities.CitiesDto] GetById(Int32) on controller MappyApplication.Controllers.CitiesController (MappyApplication).
2025-11-16 20:01:14.702 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-11-16 20:01:14.702 +03:00 [INF] Executed action MappyApplication.Controllers.CitiesController.GetById (MappyApplication) in 0.3593ms
2025-11-16 20:01:14.702 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:14.702 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - 400 null application/problem+json; charset=utf-8 15.8702ms
2025-11-16 20:01:14.706 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - null null
2025-11-16 20:01:14.706 +03:00 [INF] CORS policy execution successful.
2025-11-16 20:01:14.720 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 20:01:14.720 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:14.720 +03:00 [INF] Route matched with {action = "GetById", controller = "Cities"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.cities.CitiesDto] GetById(Int32) on controller MappyApplication.Controllers.CitiesController (MappyApplication).
2025-11-16 20:01:14.720 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-11-16 20:01:14.720 +03:00 [INF] Executed action MappyApplication.Controllers.CitiesController.GetById (MappyApplication) in 0.2567ms
2025-11-16 20:01:14.720 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:14.720 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - 400 null application/problem+json; charset=utf-8 14.0392ms
2025-11-16 20:01:14.737 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - null null
2025-11-16 20:01:14.737 +03:00 [INF] CORS policy execution successful.
2025-11-16 20:01:14.748 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 20:01:14.748 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:14.748 +03:00 [INF] Route matched with {action = "GetById", controller = "Cities"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.cities.CitiesDto] GetById(Int32) on controller MappyApplication.Controllers.CitiesController (MappyApplication).
2025-11-16 20:01:14.749 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-11-16 20:01:14.749 +03:00 [INF] Executed action MappyApplication.Controllers.CitiesController.GetById (MappyApplication) in 0.2341ms
2025-11-16 20:01:14.749 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:14.749 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - 400 null application/problem+json; charset=utf-8 11.5846ms
2025-11-16 20:01:14.753 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - null null
2025-11-16 20:01:14.754 +03:00 [INF] CORS policy execution successful.
2025-11-16 20:01:14.765 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 20:01:14.765 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:14.765 +03:00 [INF] Route matched with {action = "GetById", controller = "Cities"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.cities.CitiesDto] GetById(Int32) on controller MappyApplication.Controllers.CitiesController (MappyApplication).
2025-11-16 20:01:14.765 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-11-16 20:01:14.765 +03:00 [INF] Executed action MappyApplication.Controllers.CitiesController.GetById (MappyApplication) in 0.2043ms
2025-11-16 20:01:14.765 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:14.765 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - 400 null application/problem+json; charset=utf-8 11.7867ms
2025-11-16 20:01:14.769 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - null null
2025-11-16 20:01:14.769 +03:00 [INF] CORS policy execution successful.
2025-11-16 20:01:14.782 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 20:01:14.782 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:14.782 +03:00 [INF] Route matched with {action = "GetById", controller = "Cities"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.cities.CitiesDto] GetById(Int32) on controller MappyApplication.Controllers.CitiesController (MappyApplication).
2025-11-16 20:01:14.783 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-11-16 20:01:14.783 +03:00 [INF] Executed action MappyApplication.Controllers.CitiesController.GetById (MappyApplication) in 0.213ms
2025-11-16 20:01:14.783 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:14.783 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - 400 null application/problem+json; charset=utf-8 13.6753ms
2025-11-16 20:01:14.787 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - null null
2025-11-16 20:01:14.788 +03:00 [INF] CORS policy execution successful.
2025-11-16 20:01:14.802 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 20:01:14.802 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:14.802 +03:00 [INF] Route matched with {action = "GetById", controller = "Cities"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.cities.CitiesDto] GetById(Int32) on controller MappyApplication.Controllers.CitiesController (MappyApplication).
2025-11-16 20:01:14.802 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-11-16 20:01:14.802 +03:00 [INF] Executed action MappyApplication.Controllers.CitiesController.GetById (MappyApplication) in 0.2113ms
2025-11-16 20:01:14.802 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:14.802 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - 400 null application/problem+json; charset=utf-8 14.6576ms
2025-11-16 20:01:14.806 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - null null
2025-11-16 20:01:14.806 +03:00 [INF] CORS policy execution successful.
2025-11-16 20:01:14.818 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 20:01:14.819 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:14.819 +03:00 [INF] Route matched with {action = "GetById", controller = "Cities"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.cities.CitiesDto] GetById(Int32) on controller MappyApplication.Controllers.CitiesController (MappyApplication).
2025-11-16 20:01:14.819 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-11-16 20:01:14.819 +03:00 [INF] Executed action MappyApplication.Controllers.CitiesController.GetById (MappyApplication) in 0.3331ms
2025-11-16 20:01:14.819 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:14.819 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - 400 null application/problem+json; charset=utf-8 12.6124ms
2025-11-16 20:01:14.829 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - null null
2025-11-16 20:01:14.829 +03:00 [INF] CORS policy execution successful.
2025-11-16 20:01:14.843 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 20:01:14.843 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:14.843 +03:00 [INF] Route matched with {action = "GetById", controller = "Cities"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.cities.CitiesDto] GetById(Int32) on controller MappyApplication.Controllers.CitiesController (MappyApplication).
2025-11-16 20:01:14.843 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-11-16 20:01:14.843 +03:00 [INF] Executed action MappyApplication.Controllers.CitiesController.GetById (MappyApplication) in 0.2051ms
2025-11-16 20:01:14.843 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:14.843 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - 400 null application/problem+json; charset=utf-8 13.9464ms
2025-11-16 20:01:14.847 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - null null
2025-11-16 20:01:14.847 +03:00 [INF] CORS policy execution successful.
2025-11-16 20:01:14.858 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 20:01:14.858 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:14.858 +03:00 [INF] Route matched with {action = "GetById", controller = "Cities"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.cities.CitiesDto] GetById(Int32) on controller MappyApplication.Controllers.CitiesController (MappyApplication).
2025-11-16 20:01:14.858 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-11-16 20:01:14.858 +03:00 [INF] Executed action MappyApplication.Controllers.CitiesController.GetById (MappyApplication) in 0.1972ms
2025-11-16 20:01:14.858 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:14.858 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - 400 null application/problem+json; charset=utf-8 11.0578ms
2025-11-16 20:01:14.861 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - null null
2025-11-16 20:01:14.862 +03:00 [INF] CORS policy execution successful.
2025-11-16 20:01:14.874 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 20:01:14.874 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:14.874 +03:00 [INF] Route matched with {action = "GetById", controller = "Cities"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.cities.CitiesDto] GetById(Int32) on controller MappyApplication.Controllers.CitiesController (MappyApplication).
2025-11-16 20:01:14.874 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-11-16 20:01:14.874 +03:00 [INF] Executed action MappyApplication.Controllers.CitiesController.GetById (MappyApplication) in 0.2034ms
2025-11-16 20:01:14.874 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:14.874 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - 400 null application/problem+json; charset=utf-8 12.4141ms
2025-11-16 20:01:14.877 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - null null
2025-11-16 20:01:14.877 +03:00 [INF] CORS policy execution successful.
2025-11-16 20:01:15.027 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 20:01:15.029 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:15.029 +03:00 [INF] Route matched with {action = "GetById", controller = "Cities"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.cities.CitiesDto] GetById(Int32) on controller MappyApplication.Controllers.CitiesController (MappyApplication).
2025-11-16 20:01:15.030 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-11-16 20:01:15.030 +03:00 [INF] Executed action MappyApplication.Controllers.CitiesController.GetById (MappyApplication) in 0.2099ms
2025-11-16 20:01:15.030 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:15.030 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - 400 null application/problem+json; charset=utf-8 153.0399ms
2025-11-16 20:01:15.035 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - null null
2025-11-16 20:01:15.035 +03:00 [INF] CORS policy execution successful.
2025-11-16 20:01:15.048 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 20:01:15.049 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:15.049 +03:00 [INF] Route matched with {action = "GetById", controller = "Cities"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.cities.CitiesDto] GetById(Int32) on controller MappyApplication.Controllers.CitiesController (MappyApplication).
2025-11-16 20:01:15.049 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-11-16 20:01:15.049 +03:00 [INF] Executed action MappyApplication.Controllers.CitiesController.GetById (MappyApplication) in 0.2161ms
2025-11-16 20:01:15.049 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:15.049 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - 400 null application/problem+json; charset=utf-8 14.2434ms
2025-11-16 20:01:15.054 +03:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:8080/api/v1/cities/[object Object] - null null
2025-11-16 20:01:15.054 +03:00 [INF] CORS policy execution successful.
2025-11-16 20:01:15.054 +03:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:8080/api/v1/cities/[object Object] - 204 null null 0.1253ms
2025-11-16 20:01:15.054 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - null null
2025-11-16 20:01:15.054 +03:00 [INF] CORS policy execution successful.
2025-11-16 20:01:15.068 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 20:01:15.068 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:15.068 +03:00 [INF] Route matched with {action = "GetById", controller = "Cities"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.cities.CitiesDto] GetById(Int32) on controller MappyApplication.Controllers.CitiesController (MappyApplication).
2025-11-16 20:01:15.069 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-11-16 20:01:15.069 +03:00 [INF] Executed action MappyApplication.Controllers.CitiesController.GetById (MappyApplication) in 0.2083ms
2025-11-16 20:01:15.069 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:15.069 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - 400 null application/problem+json; charset=utf-8 14.3972ms
2025-11-16 20:01:15.074 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - null null
2025-11-16 20:01:15.074 +03:00 [INF] CORS policy execution successful.
2025-11-16 20:01:15.087 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 20:01:15.087 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:15.087 +03:00 [INF] Route matched with {action = "GetById", controller = "Cities"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.cities.CitiesDto] GetById(Int32) on controller MappyApplication.Controllers.CitiesController (MappyApplication).
2025-11-16 20:01:15.087 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-11-16 20:01:15.087 +03:00 [INF] Executed action MappyApplication.Controllers.CitiesController.GetById (MappyApplication) in 0.2441ms
2025-11-16 20:01:15.087 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:15.087 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - 400 null application/problem+json; charset=utf-8 13.3652ms
2025-11-16 20:01:15.092 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - null null
2025-11-16 20:01:15.092 +03:00 [INF] CORS policy execution successful.
2025-11-16 20:01:15.104 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 20:01:15.104 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:15.104 +03:00 [INF] Route matched with {action = "GetById", controller = "Cities"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.cities.CitiesDto] GetById(Int32) on controller MappyApplication.Controllers.CitiesController (MappyApplication).
2025-11-16 20:01:15.104 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-11-16 20:01:15.104 +03:00 [INF] Executed action MappyApplication.Controllers.CitiesController.GetById (MappyApplication) in 0.2562ms
2025-11-16 20:01:15.104 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:15.104 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - 400 null application/problem+json; charset=utf-8 12.5979ms
2025-11-16 20:01:15.108 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - null null
2025-11-16 20:01:15.109 +03:00 [INF] CORS policy execution successful.
2025-11-16 20:01:15.121 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 20:01:15.121 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:15.121 +03:00 [INF] Route matched with {action = "GetById", controller = "Cities"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.cities.CitiesDto] GetById(Int32) on controller MappyApplication.Controllers.CitiesController (MappyApplication).
2025-11-16 20:01:15.121 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-11-16 20:01:15.121 +03:00 [INF] Executed action MappyApplication.Controllers.CitiesController.GetById (MappyApplication) in 0.2506ms
2025-11-16 20:01:15.121 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:15.121 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - 400 null application/problem+json; charset=utf-8 12.7109ms
2025-11-16 20:01:15.125 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - null null
2025-11-16 20:01:15.125 +03:00 [INF] CORS policy execution successful.
2025-11-16 20:01:15.139 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 20:01:15.140 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:15.140 +03:00 [INF] Route matched with {action = "GetById", controller = "Cities"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.cities.CitiesDto] GetById(Int32) on controller MappyApplication.Controllers.CitiesController (MappyApplication).
2025-11-16 20:01:15.140 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-11-16 20:01:15.140 +03:00 [INF] Executed action MappyApplication.Controllers.CitiesController.GetById (MappyApplication) in 0.2213ms
2025-11-16 20:01:15.140 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:15.140 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - 400 null application/problem+json; charset=utf-8 14.5674ms
2025-11-16 20:01:15.144 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - null null
2025-11-16 20:01:15.144 +03:00 [INF] CORS policy execution successful.
2025-11-16 20:01:15.158 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 20:01:15.158 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:15.158 +03:00 [INF] Route matched with {action = "GetById", controller = "Cities"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.cities.CitiesDto] GetById(Int32) on controller MappyApplication.Controllers.CitiesController (MappyApplication).
2025-11-16 20:01:15.158 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-11-16 20:01:15.158 +03:00 [INF] Executed action MappyApplication.Controllers.CitiesController.GetById (MappyApplication) in 0.2888ms
2025-11-16 20:01:15.159 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:15.159 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - 400 null application/problem+json; charset=utf-8 14.609ms
2025-11-16 20:01:15.163 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - null null
2025-11-16 20:01:15.163 +03:00 [INF] CORS policy execution successful.
2025-11-16 20:01:15.174 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 20:01:15.175 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:15.175 +03:00 [INF] Route matched with {action = "GetById", controller = "Cities"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.cities.CitiesDto] GetById(Int32) on controller MappyApplication.Controllers.CitiesController (MappyApplication).
2025-11-16 20:01:15.175 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-11-16 20:01:15.175 +03:00 [INF] Executed action MappyApplication.Controllers.CitiesController.GetById (MappyApplication) in 0.1999ms
2025-11-16 20:01:15.175 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:15.175 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - 400 null application/problem+json; charset=utf-8 11.7703ms
2025-11-16 20:01:15.179 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - null null
2025-11-16 20:01:15.179 +03:00 [INF] CORS policy execution successful.
2025-11-16 20:01:15.193 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 20:01:15.193 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:15.193 +03:00 [INF] Route matched with {action = "GetById", controller = "Cities"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.cities.CitiesDto] GetById(Int32) on controller MappyApplication.Controllers.CitiesController (MappyApplication).
2025-11-16 20:01:15.193 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-11-16 20:01:15.193 +03:00 [INF] Executed action MappyApplication.Controllers.CitiesController.GetById (MappyApplication) in 0.215ms
2025-11-16 20:01:15.193 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:15.193 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - 400 null application/problem+json; charset=utf-8 14.0016ms
2025-11-16 20:01:15.197 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - null null
2025-11-16 20:01:15.197 +03:00 [INF] CORS policy execution successful.
2025-11-16 20:01:15.207 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 20:01:15.208 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:15.208 +03:00 [INF] Route matched with {action = "GetById", controller = "Cities"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.cities.CitiesDto] GetById(Int32) on controller MappyApplication.Controllers.CitiesController (MappyApplication).
2025-11-16 20:01:15.208 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-11-16 20:01:15.208 +03:00 [INF] Executed action MappyApplication.Controllers.CitiesController.GetById (MappyApplication) in 0.2094ms
2025-11-16 20:01:15.208 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:15.208 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - 400 null application/problem+json; charset=utf-8 10.7031ms
2025-11-16 20:01:15.212 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - null null
2025-11-16 20:01:15.212 +03:00 [INF] CORS policy execution successful.
2025-11-16 20:01:15.222 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 20:01:15.222 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:15.222 +03:00 [INF] Route matched with {action = "GetById", controller = "Cities"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.cities.CitiesDto] GetById(Int32) on controller MappyApplication.Controllers.CitiesController (MappyApplication).
2025-11-16 20:01:15.222 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-11-16 20:01:15.222 +03:00 [INF] Executed action MappyApplication.Controllers.CitiesController.GetById (MappyApplication) in 0.1887ms
2025-11-16 20:01:15.223 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:15.223 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - 400 null application/problem+json; charset=utf-8 11.2091ms
2025-11-16 20:01:15.226 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - null null
2025-11-16 20:01:15.226 +03:00 [INF] CORS policy execution successful.
2025-11-16 20:01:15.238 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 20:01:15.238 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:15.238 +03:00 [INF] Route matched with {action = "GetById", controller = "Cities"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.cities.CitiesDto] GetById(Int32) on controller MappyApplication.Controllers.CitiesController (MappyApplication).
2025-11-16 20:01:15.238 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-11-16 20:01:15.238 +03:00 [INF] Executed action MappyApplication.Controllers.CitiesController.GetById (MappyApplication) in 0.2377ms
2025-11-16 20:01:15.238 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:15.238 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - 400 null application/problem+json; charset=utf-8 11.9807ms
2025-11-16 20:01:15.242 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - null null
2025-11-16 20:01:15.242 +03:00 [INF] CORS policy execution successful.
2025-11-16 20:01:15.258 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 20:01:15.258 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:15.258 +03:00 [INF] Route matched with {action = "GetById", controller = "Cities"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.cities.CitiesDto] GetById(Int32) on controller MappyApplication.Controllers.CitiesController (MappyApplication).
2025-11-16 20:01:15.258 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-11-16 20:01:15.258 +03:00 [INF] Executed action MappyApplication.Controllers.CitiesController.GetById (MappyApplication) in 0.2082ms
2025-11-16 20:01:15.258 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:15.258 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - 400 null application/problem+json; charset=utf-8 15.9657ms
2025-11-16 20:01:15.262 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - null null
2025-11-16 20:01:15.262 +03:00 [INF] CORS policy execution successful.
2025-11-16 20:01:15.278 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 20:01:15.278 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:15.278 +03:00 [INF] Route matched with {action = "GetById", controller = "Cities"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.cities.CitiesDto] GetById(Int32) on controller MappyApplication.Controllers.CitiesController (MappyApplication).
2025-11-16 20:01:15.278 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-11-16 20:01:15.278 +03:00 [INF] Executed action MappyApplication.Controllers.CitiesController.GetById (MappyApplication) in 0.2276ms
2025-11-16 20:01:15.278 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:15.278 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - 400 null application/problem+json; charset=utf-8 16.191ms
2025-11-16 20:01:15.282 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - null null
2025-11-16 20:01:15.282 +03:00 [INF] CORS policy execution successful.
2025-11-16 20:01:15.299 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 20:01:15.299 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:15.299 +03:00 [INF] Route matched with {action = "GetById", controller = "Cities"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.cities.CitiesDto] GetById(Int32) on controller MappyApplication.Controllers.CitiesController (MappyApplication).
2025-11-16 20:01:15.299 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-11-16 20:01:15.299 +03:00 [INF] Executed action MappyApplication.Controllers.CitiesController.GetById (MappyApplication) in 0.274ms
2025-11-16 20:01:15.299 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:15.299 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - 400 null application/problem+json; charset=utf-8 17.1502ms
2025-11-16 20:01:15.304 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - null null
2025-11-16 20:01:15.304 +03:00 [INF] CORS policy execution successful.
2025-11-16 20:01:15.316 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 20:01:15.317 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:15.317 +03:00 [INF] Route matched with {action = "GetById", controller = "Cities"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.cities.CitiesDto] GetById(Int32) on controller MappyApplication.Controllers.CitiesController (MappyApplication).
2025-11-16 20:01:15.317 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-11-16 20:01:15.317 +03:00 [INF] Executed action MappyApplication.Controllers.CitiesController.GetById (MappyApplication) in 0.2362ms
2025-11-16 20:01:15.317 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:15.317 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - 400 null application/problem+json; charset=utf-8 13.2676ms
2025-11-16 20:01:15.322 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - null null
2025-11-16 20:01:15.322 +03:00 [INF] CORS policy execution successful.
2025-11-16 20:01:15.335 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 20:01:15.335 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:15.335 +03:00 [INF] Route matched with {action = "GetById", controller = "Cities"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.cities.CitiesDto] GetById(Int32) on controller MappyApplication.Controllers.CitiesController (MappyApplication).
2025-11-16 20:01:15.335 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-11-16 20:01:15.335 +03:00 [INF] Executed action MappyApplication.Controllers.CitiesController.GetById (MappyApplication) in 0.2465ms
2025-11-16 20:01:15.335 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:15.335 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - 400 null application/problem+json; charset=utf-8 13.7956ms
2025-11-16 20:01:15.341 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - null null
2025-11-16 20:01:15.341 +03:00 [INF] CORS policy execution successful.
2025-11-16 20:01:15.354 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 20:01:15.354 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:15.354 +03:00 [INF] Route matched with {action = "GetById", controller = "Cities"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.cities.CitiesDto] GetById(Int32) on controller MappyApplication.Controllers.CitiesController (MappyApplication).
2025-11-16 20:01:15.355 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-11-16 20:01:15.355 +03:00 [INF] Executed action MappyApplication.Controllers.CitiesController.GetById (MappyApplication) in 0.285ms
2025-11-16 20:01:15.355 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:15.355 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - 400 null application/problem+json; charset=utf-8 14.3301ms
2025-11-16 20:01:15.359 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - null null
2025-11-16 20:01:15.360 +03:00 [INF] CORS policy execution successful.
2025-11-16 20:01:15.375 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 20:01:15.375 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:15.375 +03:00 [INF] Route matched with {action = "GetById", controller = "Cities"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.cities.CitiesDto] GetById(Int32) on controller MappyApplication.Controllers.CitiesController (MappyApplication).
2025-11-16 20:01:15.376 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-11-16 20:01:15.376 +03:00 [INF] Executed action MappyApplication.Controllers.CitiesController.GetById (MappyApplication) in 0.2715ms
2025-11-16 20:01:15.376 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:15.376 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - 400 null application/problem+json; charset=utf-8 16.2445ms
2025-11-16 20:01:15.381 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - null null
2025-11-16 20:01:15.381 +03:00 [INF] CORS policy execution successful.
2025-11-16 20:01:15.394 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 20:01:15.394 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:15.394 +03:00 [INF] Route matched with {action = "GetById", controller = "Cities"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.cities.CitiesDto] GetById(Int32) on controller MappyApplication.Controllers.CitiesController (MappyApplication).
2025-11-16 20:01:15.395 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-11-16 20:01:15.395 +03:00 [INF] Executed action MappyApplication.Controllers.CitiesController.GetById (MappyApplication) in 0.2942ms
2025-11-16 20:01:15.395 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:15.395 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - 400 null application/problem+json; charset=utf-8 14.0426ms
2025-11-16 20:01:15.400 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - null null
2025-11-16 20:01:15.400 +03:00 [INF] CORS policy execution successful.
2025-11-16 20:01:15.414 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 20:01:15.414 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:15.414 +03:00 [INF] Route matched with {action = "GetById", controller = "Cities"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.cities.CitiesDto] GetById(Int32) on controller MappyApplication.Controllers.CitiesController (MappyApplication).
2025-11-16 20:01:15.414 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-11-16 20:01:15.414 +03:00 [INF] Executed action MappyApplication.Controllers.CitiesController.GetById (MappyApplication) in 0.2922ms
2025-11-16 20:01:15.414 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:15.414 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - 400 null application/problem+json; charset=utf-8 14.417ms
2025-11-16 20:01:15.419 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - null null
2025-11-16 20:01:15.420 +03:00 [INF] CORS policy execution successful.
2025-11-16 20:01:15.435 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 20:01:15.436 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:15.436 +03:00 [INF] Route matched with {action = "GetById", controller = "Cities"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.cities.CitiesDto] GetById(Int32) on controller MappyApplication.Controllers.CitiesController (MappyApplication).
2025-11-16 20:01:15.436 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-11-16 20:01:15.436 +03:00 [INF] Executed action MappyApplication.Controllers.CitiesController.GetById (MappyApplication) in 0.2745ms
2025-11-16 20:01:15.436 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:15.436 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - 400 null application/problem+json; charset=utf-8 16.9923ms
2025-11-16 20:01:15.441 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - null null
2025-11-16 20:01:15.442 +03:00 [INF] CORS policy execution successful.
2025-11-16 20:01:15.459 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 20:01:15.459 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:15.459 +03:00 [INF] Route matched with {action = "GetById", controller = "Cities"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.cities.CitiesDto] GetById(Int32) on controller MappyApplication.Controllers.CitiesController (MappyApplication).
2025-11-16 20:01:15.460 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-11-16 20:01:15.460 +03:00 [INF] Executed action MappyApplication.Controllers.CitiesController.GetById (MappyApplication) in 0.701ms
2025-11-16 20:01:15.460 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:15.460 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - 400 null application/problem+json; charset=utf-8 18.8494ms
2025-11-16 20:01:15.465 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - null null
2025-11-16 20:01:15.465 +03:00 [INF] CORS policy execution successful.
2025-11-16 20:01:15.481 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 20:01:15.481 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:15.481 +03:00 [INF] Route matched with {action = "GetById", controller = "Cities"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.cities.CitiesDto] GetById(Int32) on controller MappyApplication.Controllers.CitiesController (MappyApplication).
2025-11-16 20:01:15.481 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-11-16 20:01:15.481 +03:00 [INF] Executed action MappyApplication.Controllers.CitiesController.GetById (MappyApplication) in 0.3039ms
2025-11-16 20:01:15.481 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:15.481 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - 400 null application/problem+json; charset=utf-8 15.959ms
2025-11-16 20:01:15.487 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - null null
2025-11-16 20:01:15.487 +03:00 [INF] CORS policy execution successful.
2025-11-16 20:01:15.503 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 20:01:15.503 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:15.503 +03:00 [INF] Route matched with {action = "GetById", controller = "Cities"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.cities.CitiesDto] GetById(Int32) on controller MappyApplication.Controllers.CitiesController (MappyApplication).
2025-11-16 20:01:15.504 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-11-16 20:01:15.504 +03:00 [INF] Executed action MappyApplication.Controllers.CitiesController.GetById (MappyApplication) in 0.2827ms
2025-11-16 20:01:15.504 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:15.504 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - 400 null application/problem+json; charset=utf-8 16.5073ms
2025-11-16 20:01:15.509 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - null null
2025-11-16 20:01:15.509 +03:00 [INF] CORS policy execution successful.
2025-11-16 20:01:15.524 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 20:01:15.524 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:15.524 +03:00 [INF] Route matched with {action = "GetById", controller = "Cities"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.cities.CitiesDto] GetById(Int32) on controller MappyApplication.Controllers.CitiesController (MappyApplication).
2025-11-16 20:01:15.524 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-11-16 20:01:15.524 +03:00 [INF] Executed action MappyApplication.Controllers.CitiesController.GetById (MappyApplication) in 0.6738ms
2025-11-16 20:01:15.525 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:15.525 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - 400 null application/problem+json; charset=utf-8 15.5133ms
2025-11-16 20:01:15.529 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - null null
2025-11-16 20:01:15.529 +03:00 [INF] CORS policy execution successful.
2025-11-16 20:01:15.544 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 20:01:15.544 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:15.544 +03:00 [INF] Route matched with {action = "GetById", controller = "Cities"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.cities.CitiesDto] GetById(Int32) on controller MappyApplication.Controllers.CitiesController (MappyApplication).
2025-11-16 20:01:15.545 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-11-16 20:01:15.545 +03:00 [INF] Executed action MappyApplication.Controllers.CitiesController.GetById (MappyApplication) in 0.2957ms
2025-11-16 20:01:15.545 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:15.545 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - 400 null application/problem+json; charset=utf-8 15.4266ms
2025-11-16 20:01:15.550 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - null null
2025-11-16 20:01:15.550 +03:00 [INF] CORS policy execution successful.
2025-11-16 20:01:15.565 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 20:01:15.565 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:15.565 +03:00 [INF] Route matched with {action = "GetById", controller = "Cities"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.cities.CitiesDto] GetById(Int32) on controller MappyApplication.Controllers.CitiesController (MappyApplication).
2025-11-16 20:01:15.566 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-11-16 20:01:15.566 +03:00 [INF] Executed action MappyApplication.Controllers.CitiesController.GetById (MappyApplication) in 0.2916ms
2025-11-16 20:01:15.566 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:15.566 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - 400 null application/problem+json; charset=utf-8 15.9607ms
2025-11-16 20:01:15.571 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - null null
2025-11-16 20:01:15.571 +03:00 [INF] CORS policy execution successful.
2025-11-16 20:01:15.587 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 20:01:15.587 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:15.587 +03:00 [INF] Route matched with {action = "GetById", controller = "Cities"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.cities.CitiesDto] GetById(Int32) on controller MappyApplication.Controllers.CitiesController (MappyApplication).
2025-11-16 20:01:15.587 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-11-16 20:01:15.587 +03:00 [INF] Executed action MappyApplication.Controllers.CitiesController.GetById (MappyApplication) in 0.2765ms
2025-11-16 20:01:15.588 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:15.588 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - 400 null application/problem+json; charset=utf-8 16.3405ms
2025-11-16 20:01:15.593 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - null null
2025-11-16 20:01:15.593 +03:00 [INF] CORS policy execution successful.
2025-11-16 20:01:15.608 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 20:01:15.608 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:15.608 +03:00 [INF] Route matched with {action = "GetById", controller = "Cities"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.cities.CitiesDto] GetById(Int32) on controller MappyApplication.Controllers.CitiesController (MappyApplication).
2025-11-16 20:01:15.608 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-11-16 20:01:15.608 +03:00 [INF] Executed action MappyApplication.Controllers.CitiesController.GetById (MappyApplication) in 0.2815ms
2025-11-16 20:01:15.608 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:15.608 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - 400 null application/problem+json; charset=utf-8 15.2508ms
2025-11-16 20:01:15.614 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - null null
2025-11-16 20:01:15.614 +03:00 [INF] CORS policy execution successful.
2025-11-16 20:01:15.627 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 20:01:15.627 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:15.627 +03:00 [INF] Route matched with {action = "GetById", controller = "Cities"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.cities.CitiesDto] GetById(Int32) on controller MappyApplication.Controllers.CitiesController (MappyApplication).
2025-11-16 20:01:15.627 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-11-16 20:01:15.628 +03:00 [INF] Executed action MappyApplication.Controllers.CitiesController.GetById (MappyApplication) in 0.3214ms
2025-11-16 20:01:15.628 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:15.628 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - 400 null application/problem+json; charset=utf-8 14.0789ms
2025-11-16 20:01:15.633 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - null null
2025-11-16 20:01:15.633 +03:00 [INF] CORS policy execution successful.
2025-11-16 20:01:15.651 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 20:01:15.651 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:15.651 +03:00 [INF] Route matched with {action = "GetById", controller = "Cities"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.cities.CitiesDto] GetById(Int32) on controller MappyApplication.Controllers.CitiesController (MappyApplication).
2025-11-16 20:01:15.652 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-11-16 20:01:15.652 +03:00 [INF] Executed action MappyApplication.Controllers.CitiesController.GetById (MappyApplication) in 0.344ms
2025-11-16 20:01:15.652 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:15.652 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - 400 null application/problem+json; charset=utf-8 19.0197ms
2025-11-16 20:01:15.657 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - null null
2025-11-16 20:01:15.657 +03:00 [INF] CORS policy execution successful.
2025-11-16 20:01:15.670 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 20:01:15.670 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:15.670 +03:00 [INF] Route matched with {action = "GetById", controller = "Cities"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.cities.CitiesDto] GetById(Int32) on controller MappyApplication.Controllers.CitiesController (MappyApplication).
2025-11-16 20:01:15.670 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-11-16 20:01:15.670 +03:00 [INF] Executed action MappyApplication.Controllers.CitiesController.GetById (MappyApplication) in 0.2854ms
2025-11-16 20:01:15.670 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:15.671 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - 400 null application/problem+json; charset=utf-8 13.4701ms
2025-11-16 20:01:15.675 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - null null
2025-11-16 20:01:15.675 +03:00 [INF] CORS policy execution successful.
2025-11-16 20:01:15.690 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 20:01:15.690 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:15.691 +03:00 [INF] Route matched with {action = "GetById", controller = "Cities"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.cities.CitiesDto] GetById(Int32) on controller MappyApplication.Controllers.CitiesController (MappyApplication).
2025-11-16 20:01:15.691 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-11-16 20:01:15.691 +03:00 [INF] Executed action MappyApplication.Controllers.CitiesController.GetById (MappyApplication) in 0.343ms
2025-11-16 20:01:15.691 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:15.691 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - 400 null application/problem+json; charset=utf-8 15.6481ms
2025-11-16 20:01:15.697 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - null null
2025-11-16 20:01:15.697 +03:00 [INF] CORS policy execution successful.
2025-11-16 20:01:15.711 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 20:01:15.712 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:15.712 +03:00 [INF] Route matched with {action = "GetById", controller = "Cities"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.cities.CitiesDto] GetById(Int32) on controller MappyApplication.Controllers.CitiesController (MappyApplication).
2025-11-16 20:01:15.712 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-11-16 20:01:15.712 +03:00 [INF] Executed action MappyApplication.Controllers.CitiesController.GetById (MappyApplication) in 0.3416ms
2025-11-16 20:01:15.712 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:15.712 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - 400 null application/problem+json; charset=utf-8 14.7532ms
2025-11-16 20:01:15.718 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - null null
2025-11-16 20:01:15.718 +03:00 [INF] CORS policy execution successful.
2025-11-16 20:01:15.731 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 20:01:15.731 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:15.731 +03:00 [INF] Route matched with {action = "GetById", controller = "Cities"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.cities.CitiesDto] GetById(Int32) on controller MappyApplication.Controllers.CitiesController (MappyApplication).
2025-11-16 20:01:15.732 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-11-16 20:01:15.732 +03:00 [INF] Executed action MappyApplication.Controllers.CitiesController.GetById (MappyApplication) in 0.3105ms
2025-11-16 20:01:15.732 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:15.732 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - 400 null application/problem+json; charset=utf-8 14.0941ms
2025-11-16 20:01:15.737 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - null null
2025-11-16 20:01:15.738 +03:00 [INF] CORS policy execution successful.
2025-11-16 20:01:15.753 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 20:01:15.753 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:15.753 +03:00 [INF] Route matched with {action = "GetById", controller = "Cities"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.cities.CitiesDto] GetById(Int32) on controller MappyApplication.Controllers.CitiesController (MappyApplication).
2025-11-16 20:01:15.753 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-11-16 20:01:15.754 +03:00 [INF] Executed action MappyApplication.Controllers.CitiesController.GetById (MappyApplication) in 0.439ms
2025-11-16 20:01:15.754 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:15.754 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - 400 null application/problem+json; charset=utf-8 16.402ms
2025-11-16 20:01:15.759 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - null null
2025-11-16 20:01:15.759 +03:00 [INF] CORS policy execution successful.
2025-11-16 20:01:15.773 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 20:01:15.773 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:15.773 +03:00 [INF] Route matched with {action = "GetById", controller = "Cities"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.cities.CitiesDto] GetById(Int32) on controller MappyApplication.Controllers.CitiesController (MappyApplication).
2025-11-16 20:01:15.773 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-11-16 20:01:15.773 +03:00 [INF] Executed action MappyApplication.Controllers.CitiesController.GetById (MappyApplication) in 0.2788ms
2025-11-16 20:01:15.773 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:15.773 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - 400 null application/problem+json; charset=utf-8 14.3601ms
2025-11-16 20:01:15.779 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - null null
2025-11-16 20:01:15.779 +03:00 [INF] CORS policy execution successful.
2025-11-16 20:01:15.795 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 20:01:15.795 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:15.795 +03:00 [INF] Route matched with {action = "GetById", controller = "Cities"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.cities.CitiesDto] GetById(Int32) on controller MappyApplication.Controllers.CitiesController (MappyApplication).
2025-11-16 20:01:15.796 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-11-16 20:01:15.796 +03:00 [INF] Executed action MappyApplication.Controllers.CitiesController.GetById (MappyApplication) in 0.3329ms
2025-11-16 20:01:15.796 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:15.796 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - 400 null application/problem+json; charset=utf-8 17.1747ms
2025-11-16 20:01:15.801 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - null null
2025-11-16 20:01:15.801 +03:00 [INF] CORS policy execution successful.
2025-11-16 20:01:15.816 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 20:01:15.816 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:15.816 +03:00 [INF] Route matched with {action = "GetById", controller = "Cities"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.cities.CitiesDto] GetById(Int32) on controller MappyApplication.Controllers.CitiesController (MappyApplication).
2025-11-16 20:01:15.817 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-11-16 20:01:15.817 +03:00 [INF] Executed action MappyApplication.Controllers.CitiesController.GetById (MappyApplication) in 0.3227ms
2025-11-16 20:01:15.817 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:15.817 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - 400 null application/problem+json; charset=utf-8 16.3642ms
2025-11-16 20:01:15.822 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - null null
2025-11-16 20:01:15.822 +03:00 [INF] CORS policy execution successful.
2025-11-16 20:01:15.836 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 20:01:15.836 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:15.836 +03:00 [INF] Route matched with {action = "GetById", controller = "Cities"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.cities.CitiesDto] GetById(Int32) on controller MappyApplication.Controllers.CitiesController (MappyApplication).
2025-11-16 20:01:15.837 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-11-16 20:01:15.837 +03:00 [INF] Executed action MappyApplication.Controllers.CitiesController.GetById (MappyApplication) in 0.2723ms
2025-11-16 20:01:15.837 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:15.837 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - 400 null application/problem+json; charset=utf-8 15.1192ms
2025-11-16 20:01:15.842 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - null null
2025-11-16 20:01:15.842 +03:00 [INF] CORS policy execution successful.
2025-11-16 20:01:15.857 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 20:01:15.858 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:15.858 +03:00 [INF] Route matched with {action = "GetById", controller = "Cities"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.cities.CitiesDto] GetById(Int32) on controller MappyApplication.Controllers.CitiesController (MappyApplication).
2025-11-16 20:01:15.858 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-11-16 20:01:15.858 +03:00 [INF] Executed action MappyApplication.Controllers.CitiesController.GetById (MappyApplication) in 0.3615ms
2025-11-16 20:01:15.858 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:15.858 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - 400 null application/problem+json; charset=utf-8 16.3357ms
2025-11-16 20:01:15.863 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - null null
2025-11-16 20:01:15.863 +03:00 [INF] CORS policy execution successful.
2025-11-16 20:01:15.878 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 20:01:15.878 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:15.878 +03:00 [INF] Route matched with {action = "GetById", controller = "Cities"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.cities.CitiesDto] GetById(Int32) on controller MappyApplication.Controllers.CitiesController (MappyApplication).
2025-11-16 20:01:15.878 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-11-16 20:01:15.878 +03:00 [INF] Executed action MappyApplication.Controllers.CitiesController.GetById (MappyApplication) in 0.3163ms
2025-11-16 20:01:15.878 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:15.878 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - 400 null application/problem+json; charset=utf-8 15.491ms
2025-11-16 20:01:15.883 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - null null
2025-11-16 20:01:15.883 +03:00 [INF] CORS policy execution successful.
2025-11-16 20:01:15.898 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 20:01:15.898 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:15.898 +03:00 [INF] Route matched with {action = "GetById", controller = "Cities"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.cities.CitiesDto] GetById(Int32) on controller MappyApplication.Controllers.CitiesController (MappyApplication).
2025-11-16 20:01:15.898 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-11-16 20:01:15.898 +03:00 [INF] Executed action MappyApplication.Controllers.CitiesController.GetById (MappyApplication) in 0.271ms
2025-11-16 20:01:15.898 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:15.898 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - 400 null application/problem+json; charset=utf-8 15.6905ms
2025-11-16 20:01:15.903 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - null null
2025-11-16 20:01:15.903 +03:00 [INF] CORS policy execution successful.
2025-11-16 20:01:15.916 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 20:01:15.917 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:15.917 +03:00 [INF] Route matched with {action = "GetById", controller = "Cities"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.cities.CitiesDto] GetById(Int32) on controller MappyApplication.Controllers.CitiesController (MappyApplication).
2025-11-16 20:01:15.917 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-11-16 20:01:15.917 +03:00 [INF] Executed action MappyApplication.Controllers.CitiesController.GetById (MappyApplication) in 0.3001ms
2025-11-16 20:01:15.917 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:15.917 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - 400 null application/problem+json; charset=utf-8 13.7877ms
2025-11-16 20:01:15.922 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - null null
2025-11-16 20:01:15.922 +03:00 [INF] CORS policy execution successful.
2025-11-16 20:01:15.940 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 20:01:15.940 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:15.940 +03:00 [INF] Route matched with {action = "GetById", controller = "Cities"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.cities.CitiesDto] GetById(Int32) on controller MappyApplication.Controllers.CitiesController (MappyApplication).
2025-11-16 20:01:15.941 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-11-16 20:01:15.941 +03:00 [INF] Executed action MappyApplication.Controllers.CitiesController.GetById (MappyApplication) in 0.3366ms
2025-11-16 20:01:15.941 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:15.941 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - 400 null application/problem+json; charset=utf-8 19.1514ms
2025-11-16 20:01:15.945 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - null null
2025-11-16 20:01:15.945 +03:00 [INF] CORS policy execution successful.
2025-11-16 20:01:15.957 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 20:01:15.958 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:15.958 +03:00 [INF] Route matched with {action = "GetById", controller = "Cities"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.cities.CitiesDto] GetById(Int32) on controller MappyApplication.Controllers.CitiesController (MappyApplication).
2025-11-16 20:01:15.958 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-11-16 20:01:15.958 +03:00 [INF] Executed action MappyApplication.Controllers.CitiesController.GetById (MappyApplication) in 0.3362ms
2025-11-16 20:01:15.958 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:15.958 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - 400 null application/problem+json; charset=utf-8 12.9257ms
2025-11-16 20:01:15.962 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - null null
2025-11-16 20:01:15.963 +03:00 [INF] CORS policy execution successful.
2025-11-16 20:01:15.976 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 20:01:15.976 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:15.976 +03:00 [INF] Route matched with {action = "GetById", controller = "Cities"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.cities.CitiesDto] GetById(Int32) on controller MappyApplication.Controllers.CitiesController (MappyApplication).
2025-11-16 20:01:15.976 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-11-16 20:01:15.977 +03:00 [INF] Executed action MappyApplication.Controllers.CitiesController.GetById (MappyApplication) in 0.3443ms
2025-11-16 20:01:15.977 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:15.977 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - 400 null application/problem+json; charset=utf-8 14.1857ms
2025-11-16 20:01:15.981 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - null null
2025-11-16 20:01:15.981 +03:00 [INF] CORS policy execution successful.
2025-11-16 20:01:15.995 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 20:01:15.995 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:15.995 +03:00 [INF] Route matched with {action = "GetById", controller = "Cities"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.cities.CitiesDto] GetById(Int32) on controller MappyApplication.Controllers.CitiesController (MappyApplication).
2025-11-16 20:01:15.995 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-11-16 20:01:15.995 +03:00 [INF] Executed action MappyApplication.Controllers.CitiesController.GetById (MappyApplication) in 0.3607ms
2025-11-16 20:01:15.995 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:15.995 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - 400 null application/problem+json; charset=utf-8 14.76ms
2025-11-16 20:01:16.000 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - null null
2025-11-16 20:01:16.000 +03:00 [INF] CORS policy execution successful.
2025-11-16 20:01:16.015 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 20:01:16.015 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:16.015 +03:00 [INF] Route matched with {action = "GetById", controller = "Cities"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.cities.CitiesDto] GetById(Int32) on controller MappyApplication.Controllers.CitiesController (MappyApplication).
2025-11-16 20:01:16.015 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-11-16 20:01:16.015 +03:00 [INF] Executed action MappyApplication.Controllers.CitiesController.GetById (MappyApplication) in 0.3568ms
2025-11-16 20:01:16.015 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:16.015 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - 400 null application/problem+json; charset=utf-8 15.4777ms
2025-11-16 20:01:16.020 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - null null
2025-11-16 20:01:16.020 +03:00 [INF] CORS policy execution successful.
2025-11-16 20:01:16.035 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 20:01:16.035 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:16.035 +03:00 [INF] Route matched with {action = "GetById", controller = "Cities"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.cities.CitiesDto] GetById(Int32) on controller MappyApplication.Controllers.CitiesController (MappyApplication).
2025-11-16 20:01:16.035 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-11-16 20:01:16.036 +03:00 [INF] Executed action MappyApplication.Controllers.CitiesController.GetById (MappyApplication) in 0.234ms
2025-11-16 20:01:16.036 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:16.036 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - 400 null application/problem+json; charset=utf-8 15.6021ms
2025-11-16 20:01:16.042 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - null null
2025-11-16 20:01:16.042 +03:00 [INF] CORS policy execution successful.
2025-11-16 20:01:16.059 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 20:01:16.059 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:16.059 +03:00 [INF] Route matched with {action = "GetById", controller = "Cities"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.cities.CitiesDto] GetById(Int32) on controller MappyApplication.Controllers.CitiesController (MappyApplication).
2025-11-16 20:01:16.059 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-11-16 20:01:16.059 +03:00 [INF] Executed action MappyApplication.Controllers.CitiesController.GetById (MappyApplication) in 0.2994ms
2025-11-16 20:01:16.059 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:16.059 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - 400 null application/problem+json; charset=utf-8 17.879ms
2025-11-16 20:01:16.064 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - null null
2025-11-16 20:01:16.064 +03:00 [INF] CORS policy execution successful.
2025-11-16 20:01:16.078 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 20:01:16.078 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:16.078 +03:00 [INF] Route matched with {action = "GetById", controller = "Cities"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.cities.CitiesDto] GetById(Int32) on controller MappyApplication.Controllers.CitiesController (MappyApplication).
2025-11-16 20:01:16.078 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-11-16 20:01:16.078 +03:00 [INF] Executed action MappyApplication.Controllers.CitiesController.GetById (MappyApplication) in 0.5933ms
2025-11-16 20:01:16.078 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:16.079 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - 400 null application/problem+json; charset=utf-8 14.2645ms
2025-11-16 20:01:16.083 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - null null
2025-11-16 20:01:16.083 +03:00 [INF] CORS policy execution successful.
2025-11-16 20:01:16.097 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 20:01:16.098 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:16.098 +03:00 [INF] Route matched with {action = "GetById", controller = "Cities"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.cities.CitiesDto] GetById(Int32) on controller MappyApplication.Controllers.CitiesController (MappyApplication).
2025-11-16 20:01:16.098 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-11-16 20:01:16.098 +03:00 [INF] Executed action MappyApplication.Controllers.CitiesController.GetById (MappyApplication) in 0.2461ms
2025-11-16 20:01:16.098 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:16.098 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - 400 null application/problem+json; charset=utf-8 15.2773ms
2025-11-16 20:01:16.102 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - null null
2025-11-16 20:01:16.102 +03:00 [INF] CORS policy execution successful.
2025-11-16 20:01:16.116 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 20:01:16.116 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:16.116 +03:00 [INF] Route matched with {action = "GetById", controller = "Cities"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.cities.CitiesDto] GetById(Int32) on controller MappyApplication.Controllers.CitiesController (MappyApplication).
2025-11-16 20:01:16.116 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-11-16 20:01:16.117 +03:00 [INF] Executed action MappyApplication.Controllers.CitiesController.GetById (MappyApplication) in 0.2862ms
2025-11-16 20:01:16.117 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:16.117 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - 400 null application/problem+json; charset=utf-8 14.3013ms
2025-11-16 20:01:16.125 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - null null
2025-11-16 20:01:16.125 +03:00 [INF] CORS policy execution successful.
2025-11-16 20:01:16.140 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 20:01:16.140 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:16.140 +03:00 [INF] Route matched with {action = "GetById", controller = "Cities"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.cities.CitiesDto] GetById(Int32) on controller MappyApplication.Controllers.CitiesController (MappyApplication).
2025-11-16 20:01:16.141 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-11-16 20:01:16.141 +03:00 [INF] Executed action MappyApplication.Controllers.CitiesController.GetById (MappyApplication) in 0.7302ms
2025-11-16 20:01:16.141 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:16.141 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - 400 null application/problem+json; charset=utf-8 16.2298ms
2025-11-16 20:01:16.146 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - null null
2025-11-16 20:01:16.146 +03:00 [INF] CORS policy execution successful.
2025-11-16 20:01:16.159 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 20:01:16.159 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:16.159 +03:00 [INF] Route matched with {action = "GetById", controller = "Cities"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.cities.CitiesDto] GetById(Int32) on controller MappyApplication.Controllers.CitiesController (MappyApplication).
2025-11-16 20:01:16.159 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-11-16 20:01:16.159 +03:00 [INF] Executed action MappyApplication.Controllers.CitiesController.GetById (MappyApplication) in 0.2149ms
2025-11-16 20:01:16.159 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:16.159 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - 400 null application/problem+json; charset=utf-8 13.5475ms
2025-11-16 20:01:16.164 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - null null
2025-11-16 20:01:16.164 +03:00 [INF] CORS policy execution successful.
2025-11-16 20:01:16.176 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 20:01:16.177 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:16.177 +03:00 [INF] Route matched with {action = "GetById", controller = "Cities"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.cities.CitiesDto] GetById(Int32) on controller MappyApplication.Controllers.CitiesController (MappyApplication).
2025-11-16 20:01:16.177 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-11-16 20:01:16.177 +03:00 [INF] Executed action MappyApplication.Controllers.CitiesController.GetById (MappyApplication) in 0.2539ms
2025-11-16 20:01:16.177 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:16.177 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - 400 null application/problem+json; charset=utf-8 13.4586ms
2025-11-16 20:01:16.182 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - null null
2025-11-16 20:01:16.182 +03:00 [INF] CORS policy execution successful.
2025-11-16 20:01:16.196 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 20:01:16.196 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:16.196 +03:00 [INF] Route matched with {action = "GetById", controller = "Cities"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.cities.CitiesDto] GetById(Int32) on controller MappyApplication.Controllers.CitiesController (MappyApplication).
2025-11-16 20:01:16.196 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-11-16 20:01:16.196 +03:00 [INF] Executed action MappyApplication.Controllers.CitiesController.GetById (MappyApplication) in 0.2172ms
2025-11-16 20:01:16.196 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:16.196 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - 400 null application/problem+json; charset=utf-8 14.5577ms
2025-11-16 20:01:16.200 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - null null
2025-11-16 20:01:16.200 +03:00 [INF] CORS policy execution successful.
2025-11-16 20:01:16.214 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 20:01:16.214 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:16.214 +03:00 [INF] Route matched with {action = "GetById", controller = "Cities"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.cities.CitiesDto] GetById(Int32) on controller MappyApplication.Controllers.CitiesController (MappyApplication).
2025-11-16 20:01:16.214 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-11-16 20:01:16.215 +03:00 [INF] Executed action MappyApplication.Controllers.CitiesController.GetById (MappyApplication) in 0.2167ms
2025-11-16 20:01:16.215 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:16.215 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - 400 null application/problem+json; charset=utf-8 14.2943ms
2025-11-16 20:01:16.219 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - null null
2025-11-16 20:01:16.219 +03:00 [INF] CORS policy execution successful.
2025-11-16 20:01:16.233 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 20:01:16.233 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:16.233 +03:00 [INF] Route matched with {action = "GetById", controller = "Cities"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.cities.CitiesDto] GetById(Int32) on controller MappyApplication.Controllers.CitiesController (MappyApplication).
2025-11-16 20:01:16.233 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-11-16 20:01:16.233 +03:00 [INF] Executed action MappyApplication.Controllers.CitiesController.GetById (MappyApplication) in 0.278ms
2025-11-16 20:01:16.233 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:16.233 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - 400 null application/problem+json; charset=utf-8 14.076ms
2025-11-16 20:01:16.238 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - null null
2025-11-16 20:01:16.238 +03:00 [INF] CORS policy execution successful.
2025-11-16 20:01:16.251 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 20:01:16.251 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:16.251 +03:00 [INF] Route matched with {action = "GetById", controller = "Cities"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.cities.CitiesDto] GetById(Int32) on controller MappyApplication.Controllers.CitiesController (MappyApplication).
2025-11-16 20:01:16.251 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-11-16 20:01:16.251 +03:00 [INF] Executed action MappyApplication.Controllers.CitiesController.GetById (MappyApplication) in 0.3118ms
2025-11-16 20:01:16.251 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:16.251 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - 400 null application/problem+json; charset=utf-8 13.3987ms
2025-11-16 20:01:16.256 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - null null
2025-11-16 20:01:16.256 +03:00 [INF] CORS policy execution successful.
2025-11-16 20:01:16.273 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 20:01:16.273 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:16.273 +03:00 [INF] Route matched with {action = "GetById", controller = "Cities"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.cities.CitiesDto] GetById(Int32) on controller MappyApplication.Controllers.CitiesController (MappyApplication).
2025-11-16 20:01:16.273 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-11-16 20:01:16.273 +03:00 [INF] Executed action MappyApplication.Controllers.CitiesController.GetById (MappyApplication) in 0.3185ms
2025-11-16 20:01:16.273 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:16.273 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - 400 null application/problem+json; charset=utf-8 17.5716ms
2025-11-16 20:01:16.278 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - null null
2025-11-16 20:01:16.278 +03:00 [INF] CORS policy execution successful.
2025-11-16 20:01:16.296 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 20:01:16.296 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:16.296 +03:00 [INF] Route matched with {action = "GetById", controller = "Cities"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.cities.CitiesDto] GetById(Int32) on controller MappyApplication.Controllers.CitiesController (MappyApplication).
2025-11-16 20:01:16.297 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-11-16 20:01:16.297 +03:00 [INF] Executed action MappyApplication.Controllers.CitiesController.GetById (MappyApplication) in 0.2919ms
2025-11-16 20:01:16.297 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:16.297 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - 400 null application/problem+json; charset=utf-8 18.7483ms
2025-11-16 20:01:16.301 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - null null
2025-11-16 20:01:16.301 +03:00 [INF] CORS policy execution successful.
2025-11-16 20:01:16.314 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 20:01:16.314 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:16.314 +03:00 [INF] Route matched with {action = "GetById", controller = "Cities"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.cities.CitiesDto] GetById(Int32) on controller MappyApplication.Controllers.CitiesController (MappyApplication).
2025-11-16 20:01:16.315 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-11-16 20:01:16.315 +03:00 [INF] Executed action MappyApplication.Controllers.CitiesController.GetById (MappyApplication) in 0.3073ms
2025-11-16 20:01:16.315 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:16.315 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - 400 null application/problem+json; charset=utf-8 13.9178ms
2025-11-16 20:01:16.319 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - null null
2025-11-16 20:01:16.319 +03:00 [INF] CORS policy execution successful.
2025-11-16 20:01:16.332 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 20:01:16.332 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:16.332 +03:00 [INF] Route matched with {action = "GetById", controller = "Cities"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.cities.CitiesDto] GetById(Int32) on controller MappyApplication.Controllers.CitiesController (MappyApplication).
2025-11-16 20:01:16.332 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-11-16 20:01:16.332 +03:00 [INF] Executed action MappyApplication.Controllers.CitiesController.GetById (MappyApplication) in 0.292ms
2025-11-16 20:01:16.332 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:16.333 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - 400 null application/problem+json; charset=utf-8 13.8834ms
2025-11-16 20:01:16.337 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - null null
2025-11-16 20:01:16.337 +03:00 [INF] CORS policy execution successful.
2025-11-16 20:01:16.349 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 20:01:16.349 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:16.349 +03:00 [INF] Route matched with {action = "GetById", controller = "Cities"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.cities.CitiesDto] GetById(Int32) on controller MappyApplication.Controllers.CitiesController (MappyApplication).
2025-11-16 20:01:16.350 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-11-16 20:01:16.350 +03:00 [INF] Executed action MappyApplication.Controllers.CitiesController.GetById (MappyApplication) in 0.34ms
2025-11-16 20:01:16.350 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:16.350 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - 400 null application/problem+json; charset=utf-8 13.1529ms
2025-11-16 20:01:16.354 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - null null
2025-11-16 20:01:16.355 +03:00 [INF] CORS policy execution successful.
2025-11-16 20:01:16.366 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 20:01:16.367 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:16.367 +03:00 [INF] Route matched with {action = "GetById", controller = "Cities"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.cities.CitiesDto] GetById(Int32) on controller MappyApplication.Controllers.CitiesController (MappyApplication).
2025-11-16 20:01:16.367 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-11-16 20:01:16.367 +03:00 [INF] Executed action MappyApplication.Controllers.CitiesController.GetById (MappyApplication) in 0.2917ms
2025-11-16 20:01:16.367 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:16.367 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - 400 null application/problem+json; charset=utf-8 12.4609ms
2025-11-16 20:01:16.371 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - null null
2025-11-16 20:01:16.371 +03:00 [INF] CORS policy execution successful.
2025-11-16 20:01:16.384 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 20:01:16.384 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:16.384 +03:00 [INF] Route matched with {action = "GetById", controller = "Cities"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.cities.CitiesDto] GetById(Int32) on controller MappyApplication.Controllers.CitiesController (MappyApplication).
2025-11-16 20:01:16.384 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-11-16 20:01:16.384 +03:00 [INF] Executed action MappyApplication.Controllers.CitiesController.GetById (MappyApplication) in 0.2904ms
2025-11-16 20:01:16.384 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:16.384 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - 400 null application/problem+json; charset=utf-8 13.1495ms
2025-11-16 20:01:16.389 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - null null
2025-11-16 20:01:16.389 +03:00 [INF] CORS policy execution successful.
2025-11-16 20:01:16.403 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 20:01:16.403 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:16.403 +03:00 [INF] Route matched with {action = "GetById", controller = "Cities"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.cities.CitiesDto] GetById(Int32) on controller MappyApplication.Controllers.CitiesController (MappyApplication).
2025-11-16 20:01:16.403 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-11-16 20:01:16.403 +03:00 [INF] Executed action MappyApplication.Controllers.CitiesController.GetById (MappyApplication) in 0.2467ms
2025-11-16 20:01:16.403 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:16.404 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - 400 null application/problem+json; charset=utf-8 14.6671ms
2025-11-16 20:01:16.410 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - null null
2025-11-16 20:01:16.410 +03:00 [INF] CORS policy execution successful.
2025-11-16 20:01:16.427 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 20:01:16.427 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:16.427 +03:00 [INF] Route matched with {action = "GetById", controller = "Cities"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.cities.CitiesDto] GetById(Int32) on controller MappyApplication.Controllers.CitiesController (MappyApplication).
2025-11-16 20:01:16.428 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-11-16 20:01:16.428 +03:00 [INF] Executed action MappyApplication.Controllers.CitiesController.GetById (MappyApplication) in 0.5142ms
2025-11-16 20:01:16.428 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:16.428 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - 400 null application/problem+json; charset=utf-8 17.9389ms
2025-11-16 20:01:16.434 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - null null
2025-11-16 20:01:16.434 +03:00 [INF] CORS policy execution successful.
2025-11-16 20:01:16.448 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 20:01:16.448 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:16.448 +03:00 [INF] Route matched with {action = "GetById", controller = "Cities"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.cities.CitiesDto] GetById(Int32) on controller MappyApplication.Controllers.CitiesController (MappyApplication).
2025-11-16 20:01:16.448 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-11-16 20:01:16.448 +03:00 [INF] Executed action MappyApplication.Controllers.CitiesController.GetById (MappyApplication) in 0.2482ms
2025-11-16 20:01:16.448 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:16.448 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - 400 null application/problem+json; charset=utf-8 14.1507ms
2025-11-16 20:01:16.453 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - null null
2025-11-16 20:01:16.453 +03:00 [INF] CORS policy execution successful.
2025-11-16 20:01:16.466 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 20:01:16.466 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:16.466 +03:00 [INF] Route matched with {action = "GetById", controller = "Cities"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.cities.CitiesDto] GetById(Int32) on controller MappyApplication.Controllers.CitiesController (MappyApplication).
2025-11-16 20:01:16.466 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-11-16 20:01:16.466 +03:00 [INF] Executed action MappyApplication.Controllers.CitiesController.GetById (MappyApplication) in 0.2564ms
2025-11-16 20:01:16.466 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:16.466 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - 400 null application/problem+json; charset=utf-8 13.8706ms
2025-11-16 20:01:16.471 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - null null
2025-11-16 20:01:16.471 +03:00 [INF] CORS policy execution successful.
2025-11-16 20:01:16.483 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 20:01:16.483 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:16.483 +03:00 [INF] Route matched with {action = "GetById", controller = "Cities"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.cities.CitiesDto] GetById(Int32) on controller MappyApplication.Controllers.CitiesController (MappyApplication).
2025-11-16 20:01:16.484 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-11-16 20:01:16.484 +03:00 [INF] Executed action MappyApplication.Controllers.CitiesController.GetById (MappyApplication) in 0.2943ms
2025-11-16 20:01:16.484 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:16.484 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - 400 null application/problem+json; charset=utf-8 13.0552ms
2025-11-16 20:01:16.488 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - null null
2025-11-16 20:01:16.488 +03:00 [INF] CORS policy execution successful.
2025-11-16 20:01:16.502 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 20:01:16.502 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:16.502 +03:00 [INF] Route matched with {action = "GetById", controller = "Cities"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.cities.CitiesDto] GetById(Int32) on controller MappyApplication.Controllers.CitiesController (MappyApplication).
2025-11-16 20:01:16.503 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-11-16 20:01:16.503 +03:00 [INF] Executed action MappyApplication.Controllers.CitiesController.GetById (MappyApplication) in 0.4489ms
2025-11-16 20:01:16.503 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:16.503 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - 400 null application/problem+json; charset=utf-8 14.7695ms
2025-11-16 20:01:16.508 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - null null
2025-11-16 20:01:16.508 +03:00 [INF] CORS policy execution successful.
2025-11-16 20:01:16.522 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 20:01:16.522 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:16.522 +03:00 [INF] Route matched with {action = "GetById", controller = "Cities"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.cities.CitiesDto] GetById(Int32) on controller MappyApplication.Controllers.CitiesController (MappyApplication).
2025-11-16 20:01:16.522 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-11-16 20:01:16.522 +03:00 [INF] Executed action MappyApplication.Controllers.CitiesController.GetById (MappyApplication) in 0.2502ms
2025-11-16 20:01:16.523 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:16.523 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - 400 null application/problem+json; charset=utf-8 14.9926ms
2025-11-16 20:01:16.528 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - null null
2025-11-16 20:01:16.528 +03:00 [INF] CORS policy execution successful.
2025-11-16 20:01:16.542 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 20:01:16.542 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:16.542 +03:00 [INF] Route matched with {action = "GetById", controller = "Cities"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.cities.CitiesDto] GetById(Int32) on controller MappyApplication.Controllers.CitiesController (MappyApplication).
2025-11-16 20:01:16.543 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-11-16 20:01:16.543 +03:00 [INF] Executed action MappyApplication.Controllers.CitiesController.GetById (MappyApplication) in 0.2819ms
2025-11-16 20:01:16.543 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:16.543 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - 400 null application/problem+json; charset=utf-8 15.1114ms
2025-11-16 20:01:16.547 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - null null
2025-11-16 20:01:16.547 +03:00 [INF] CORS policy execution successful.
2025-11-16 20:01:16.559 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 20:01:16.559 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:16.559 +03:00 [INF] Route matched with {action = "GetById", controller = "Cities"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.cities.CitiesDto] GetById(Int32) on controller MappyApplication.Controllers.CitiesController (MappyApplication).
2025-11-16 20:01:16.560 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-11-16 20:01:16.560 +03:00 [INF] Executed action MappyApplication.Controllers.CitiesController.GetById (MappyApplication) in 0.2514ms
2025-11-16 20:01:16.560 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:16.560 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - 400 null application/problem+json; charset=utf-8 12.9095ms
2025-11-16 20:01:16.564 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - null null
2025-11-16 20:01:16.564 +03:00 [INF] CORS policy execution successful.
2025-11-16 20:01:16.580 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 20:01:16.580 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:16.580 +03:00 [INF] Route matched with {action = "GetById", controller = "Cities"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.cities.CitiesDto] GetById(Int32) on controller MappyApplication.Controllers.CitiesController (MappyApplication).
2025-11-16 20:01:16.581 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-11-16 20:01:16.581 +03:00 [INF] Executed action MappyApplication.Controllers.CitiesController.GetById (MappyApplication) in 0.2869ms
2025-11-16 20:01:16.581 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:16.581 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - 400 null application/problem+json; charset=utf-8 16.6547ms
2025-11-16 20:01:16.585 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - null null
2025-11-16 20:01:16.585 +03:00 [INF] CORS policy execution successful.
2025-11-16 20:01:16.598 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 20:01:16.598 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:16.598 +03:00 [INF] Route matched with {action = "GetById", controller = "Cities"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.cities.CitiesDto] GetById(Int32) on controller MappyApplication.Controllers.CitiesController (MappyApplication).
2025-11-16 20:01:16.598 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-11-16 20:01:16.598 +03:00 [INF] Executed action MappyApplication.Controllers.CitiesController.GetById (MappyApplication) in 0.2887ms
2025-11-16 20:01:16.598 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:16.598 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - 400 null application/problem+json; charset=utf-8 13.0729ms
2025-11-16 20:01:16.602 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - null null
2025-11-16 20:01:16.602 +03:00 [INF] CORS policy execution successful.
2025-11-16 20:01:16.615 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 20:01:16.615 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:16.615 +03:00 [INF] Route matched with {action = "GetById", controller = "Cities"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.cities.CitiesDto] GetById(Int32) on controller MappyApplication.Controllers.CitiesController (MappyApplication).
2025-11-16 20:01:16.615 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-11-16 20:01:16.615 +03:00 [INF] Executed action MappyApplication.Controllers.CitiesController.GetById (MappyApplication) in 0.3036ms
2025-11-16 20:01:16.615 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:16.615 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - 400 null application/problem+json; charset=utf-8 13.0334ms
2025-11-16 20:01:16.620 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - null null
2025-11-16 20:01:16.620 +03:00 [INF] CORS policy execution successful.
2025-11-16 20:01:16.636 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 20:01:16.636 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:16.636 +03:00 [INF] Route matched with {action = "GetById", controller = "Cities"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.cities.CitiesDto] GetById(Int32) on controller MappyApplication.Controllers.CitiesController (MappyApplication).
2025-11-16 20:01:16.636 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-11-16 20:01:16.636 +03:00 [INF] Executed action MappyApplication.Controllers.CitiesController.GetById (MappyApplication) in 0.3129ms
2025-11-16 20:01:16.636 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:16.636 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - 400 null application/problem+json; charset=utf-8 16.4864ms
2025-11-16 20:01:16.641 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - null null
2025-11-16 20:01:16.641 +03:00 [INF] CORS policy execution successful.
2025-11-16 20:01:16.657 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 20:01:16.657 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:16.657 +03:00 [INF] Route matched with {action = "GetById", controller = "Cities"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.cities.CitiesDto] GetById(Int32) on controller MappyApplication.Controllers.CitiesController (MappyApplication).
2025-11-16 20:01:16.657 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-11-16 20:01:16.657 +03:00 [INF] Executed action MappyApplication.Controllers.CitiesController.GetById (MappyApplication) in 0.2687ms
2025-11-16 20:01:16.657 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:16.657 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - 400 null application/problem+json; charset=utf-8 16.2759ms
2025-11-16 20:01:16.662 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - null null
2025-11-16 20:01:16.662 +03:00 [INF] CORS policy execution successful.
2025-11-16 20:01:16.674 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 20:01:16.674 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:16.674 +03:00 [INF] Route matched with {action = "GetById", controller = "Cities"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.cities.CitiesDto] GetById(Int32) on controller MappyApplication.Controllers.CitiesController (MappyApplication).
2025-11-16 20:01:16.674 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-11-16 20:01:16.674 +03:00 [INF] Executed action MappyApplication.Controllers.CitiesController.GetById (MappyApplication) in 0.2344ms
2025-11-16 20:01:16.674 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:16.674 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - 400 null application/problem+json; charset=utf-8 12.439ms
2025-11-16 20:01:16.679 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - null null
2025-11-16 20:01:16.679 +03:00 [INF] CORS policy execution successful.
2025-11-16 20:01:16.692 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 20:01:16.692 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:16.692 +03:00 [INF] Route matched with {action = "GetById", controller = "Cities"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.cities.CitiesDto] GetById(Int32) on controller MappyApplication.Controllers.CitiesController (MappyApplication).
2025-11-16 20:01:16.693 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-11-16 20:01:16.693 +03:00 [INF] Executed action MappyApplication.Controllers.CitiesController.GetById (MappyApplication) in 0.2562ms
2025-11-16 20:01:16.693 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:16.693 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - 400 null application/problem+json; charset=utf-8 13.6641ms
2025-11-16 20:01:16.697 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - null null
2025-11-16 20:01:16.697 +03:00 [INF] CORS policy execution successful.
2025-11-16 20:01:16.710 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 20:01:16.710 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:16.710 +03:00 [INF] Route matched with {action = "GetById", controller = "Cities"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.cities.CitiesDto] GetById(Int32) on controller MappyApplication.Controllers.CitiesController (MappyApplication).
2025-11-16 20:01:16.710 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-11-16 20:01:16.710 +03:00 [INF] Executed action MappyApplication.Controllers.CitiesController.GetById (MappyApplication) in 0.2129ms
2025-11-16 20:01:16.710 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:16.710 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - 400 null application/problem+json; charset=utf-8 13.503ms
2025-11-16 20:01:16.714 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - null null
2025-11-16 20:01:16.715 +03:00 [INF] CORS policy execution successful.
2025-11-16 20:01:16.729 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 20:01:16.729 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:16.729 +03:00 [INF] Route matched with {action = "GetById", controller = "Cities"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.cities.CitiesDto] GetById(Int32) on controller MappyApplication.Controllers.CitiesController (MappyApplication).
2025-11-16 20:01:16.729 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-11-16 20:01:16.729 +03:00 [INF] Executed action MappyApplication.Controllers.CitiesController.GetById (MappyApplication) in 0.3262ms
2025-11-16 20:01:16.729 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:16.729 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - 400 null application/problem+json; charset=utf-8 14.8692ms
2025-11-16 20:01:16.733 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - null null
2025-11-16 20:01:16.734 +03:00 [INF] CORS policy execution successful.
2025-11-16 20:01:16.749 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 20:01:16.749 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:16.749 +03:00 [INF] Route matched with {action = "GetById", controller = "Cities"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.cities.CitiesDto] GetById(Int32) on controller MappyApplication.Controllers.CitiesController (MappyApplication).
2025-11-16 20:01:16.749 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-11-16 20:01:16.749 +03:00 [INF] Executed action MappyApplication.Controllers.CitiesController.GetById (MappyApplication) in 0.2084ms
2025-11-16 20:01:16.749 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:16.749 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - 400 null application/problem+json; charset=utf-8 15.8798ms
2025-11-16 20:01:16.754 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - null null
2025-11-16 20:01:16.754 +03:00 [INF] CORS policy execution successful.
2025-11-16 20:01:16.768 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 20:01:16.768 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:16.768 +03:00 [INF] Route matched with {action = "GetById", controller = "Cities"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.cities.CitiesDto] GetById(Int32) on controller MappyApplication.Controllers.CitiesController (MappyApplication).
2025-11-16 20:01:16.769 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-11-16 20:01:16.769 +03:00 [INF] Executed action MappyApplication.Controllers.CitiesController.GetById (MappyApplication) in 0.2507ms
2025-11-16 20:01:16.769 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:16.769 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - 400 null application/problem+json; charset=utf-8 15.058ms
2025-11-16 20:01:16.773 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - null null
2025-11-16 20:01:16.774 +03:00 [INF] CORS policy execution successful.
2025-11-16 20:01:16.787 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 20:01:16.787 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:16.787 +03:00 [INF] Route matched with {action = "GetById", controller = "Cities"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.cities.CitiesDto] GetById(Int32) on controller MappyApplication.Controllers.CitiesController (MappyApplication).
2025-11-16 20:01:16.788 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-11-16 20:01:16.788 +03:00 [INF] Executed action MappyApplication.Controllers.CitiesController.GetById (MappyApplication) in 0.221ms
2025-11-16 20:01:16.788 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:16.788 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - 400 null application/problem+json; charset=utf-8 14.5344ms
2025-11-16 20:01:16.792 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - null null
2025-11-16 20:01:16.792 +03:00 [INF] CORS policy execution successful.
2025-11-16 20:01:16.806 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 20:01:16.806 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:16.806 +03:00 [INF] Route matched with {action = "GetById", controller = "Cities"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.cities.CitiesDto] GetById(Int32) on controller MappyApplication.Controllers.CitiesController (MappyApplication).
2025-11-16 20:01:16.807 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-11-16 20:01:16.807 +03:00 [INF] Executed action MappyApplication.Controllers.CitiesController.GetById (MappyApplication) in 0.328ms
2025-11-16 20:01:16.807 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:16.807 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - 400 null application/problem+json; charset=utf-8 14.6516ms
2025-11-16 20:01:16.811 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - null null
2025-11-16 20:01:16.811 +03:00 [INF] CORS policy execution successful.
2025-11-16 20:01:16.823 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 20:01:16.823 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:16.824 +03:00 [INF] Route matched with {action = "GetById", controller = "Cities"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.cities.CitiesDto] GetById(Int32) on controller MappyApplication.Controllers.CitiesController (MappyApplication).
2025-11-16 20:01:16.824 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-11-16 20:01:16.824 +03:00 [INF] Executed action MappyApplication.Controllers.CitiesController.GetById (MappyApplication) in 0.5768ms
2025-11-16 20:01:16.824 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:16.824 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - 400 null application/problem+json; charset=utf-8 12.765ms
2025-11-16 20:01:16.829 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - null null
2025-11-16 20:01:16.829 +03:00 [INF] CORS policy execution successful.
2025-11-16 20:01:16.840 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 20:01:16.840 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:16.840 +03:00 [INF] Route matched with {action = "GetById", controller = "Cities"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.cities.CitiesDto] GetById(Int32) on controller MappyApplication.Controllers.CitiesController (MappyApplication).
2025-11-16 20:01:16.840 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-11-16 20:01:16.840 +03:00 [INF] Executed action MappyApplication.Controllers.CitiesController.GetById (MappyApplication) in 0.2395ms
2025-11-16 20:01:16.840 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:16.840 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - 400 null application/problem+json; charset=utf-8 11.8764ms
2025-11-16 20:01:16.848 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - null null
2025-11-16 20:01:16.848 +03:00 [INF] CORS policy execution successful.
2025-11-16 20:01:16.858 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 20:01:16.859 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:16.859 +03:00 [INF] Route matched with {action = "GetById", controller = "Cities"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.cities.CitiesDto] GetById(Int32) on controller MappyApplication.Controllers.CitiesController (MappyApplication).
2025-11-16 20:01:16.859 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-11-16 20:01:16.859 +03:00 [INF] Executed action MappyApplication.Controllers.CitiesController.GetById (MappyApplication) in 0.2253ms
2025-11-16 20:01:16.859 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:16.859 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - 400 null application/problem+json; charset=utf-8 11.3347ms
2025-11-16 20:01:16.863 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - null null
2025-11-16 20:01:16.863 +03:00 [INF] CORS policy execution successful.
2025-11-16 20:01:16.876 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 20:01:16.876 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:16.876 +03:00 [INF] Route matched with {action = "GetById", controller = "Cities"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.cities.CitiesDto] GetById(Int32) on controller MappyApplication.Controllers.CitiesController (MappyApplication).
2025-11-16 20:01:16.876 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-11-16 20:01:16.876 +03:00 [INF] Executed action MappyApplication.Controllers.CitiesController.GetById (MappyApplication) in 0.2134ms
2025-11-16 20:01:16.876 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:16.876 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - 400 null application/problem+json; charset=utf-8 13.2336ms
2025-11-16 20:01:16.880 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - null null
2025-11-16 20:01:16.880 +03:00 [INF] CORS policy execution successful.
2025-11-16 20:01:16.892 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 20:01:16.892 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:16.892 +03:00 [INF] Route matched with {action = "GetById", controller = "Cities"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.cities.CitiesDto] GetById(Int32) on controller MappyApplication.Controllers.CitiesController (MappyApplication).
2025-11-16 20:01:16.892 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-11-16 20:01:16.892 +03:00 [INF] Executed action MappyApplication.Controllers.CitiesController.GetById (MappyApplication) in 0.204ms
2025-11-16 20:01:16.892 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:16.892 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - 400 null application/problem+json; charset=utf-8 11.5968ms
2025-11-16 20:01:16.896 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - null null
2025-11-16 20:01:16.896 +03:00 [INF] CORS policy execution successful.
2025-11-16 20:01:16.910 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 20:01:16.910 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:16.910 +03:00 [INF] Route matched with {action = "GetById", controller = "Cities"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.cities.CitiesDto] GetById(Int32) on controller MappyApplication.Controllers.CitiesController (MappyApplication).
2025-11-16 20:01:16.910 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-11-16 20:01:16.910 +03:00 [INF] Executed action MappyApplication.Controllers.CitiesController.GetById (MappyApplication) in 0.5736ms
2025-11-16 20:01:16.910 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:16.911 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - 400 null application/problem+json; charset=utf-8 14.641ms
2025-11-16 20:01:16.914 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - null null
2025-11-16 20:01:16.914 +03:00 [INF] CORS policy execution successful.
2025-11-16 20:01:16.928 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 20:01:16.928 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:16.928 +03:00 [INF] Route matched with {action = "GetById", controller = "Cities"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.cities.CitiesDto] GetById(Int32) on controller MappyApplication.Controllers.CitiesController (MappyApplication).
2025-11-16 20:01:16.928 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-11-16 20:01:16.928 +03:00 [INF] Executed action MappyApplication.Controllers.CitiesController.GetById (MappyApplication) in 0.3137ms
2025-11-16 20:01:16.928 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:16.928 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - 400 null application/problem+json; charset=utf-8 14.0901ms
2025-11-16 20:01:16.932 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - null null
2025-11-16 20:01:16.932 +03:00 [INF] CORS policy execution successful.
2025-11-16 20:01:16.948 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 20:01:16.948 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:16.948 +03:00 [INF] Route matched with {action = "GetById", controller = "Cities"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.cities.CitiesDto] GetById(Int32) on controller MappyApplication.Controllers.CitiesController (MappyApplication).
2025-11-16 20:01:16.948 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-11-16 20:01:16.948 +03:00 [INF] Executed action MappyApplication.Controllers.CitiesController.GetById (MappyApplication) in 0.3222ms
2025-11-16 20:01:16.948 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:16.948 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - 400 null application/problem+json; charset=utf-8 16.1455ms
2025-11-16 20:01:16.952 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - null null
2025-11-16 20:01:16.952 +03:00 [INF] CORS policy execution successful.
2025-11-16 20:01:16.964 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 20:01:16.964 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:16.964 +03:00 [INF] Route matched with {action = "GetById", controller = "Cities"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.cities.CitiesDto] GetById(Int32) on controller MappyApplication.Controllers.CitiesController (MappyApplication).
2025-11-16 20:01:16.964 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-11-16 20:01:16.964 +03:00 [INF] Executed action MappyApplication.Controllers.CitiesController.GetById (MappyApplication) in 0.1785ms
2025-11-16 20:01:16.964 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:16.964 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - 400 null application/problem+json; charset=utf-8 12.4491ms
2025-11-16 20:01:16.968 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - null null
2025-11-16 20:01:16.968 +03:00 [INF] CORS policy execution successful.
2025-11-16 20:01:16.982 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 20:01:16.982 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:16.982 +03:00 [INF] Route matched with {action = "GetById", controller = "Cities"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.cities.CitiesDto] GetById(Int32) on controller MappyApplication.Controllers.CitiesController (MappyApplication).
2025-11-16 20:01:16.982 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-11-16 20:01:16.982 +03:00 [INF] Executed action MappyApplication.Controllers.CitiesController.GetById (MappyApplication) in 0.3244ms
2025-11-16 20:01:16.982 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:16.982 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - 400 null application/problem+json; charset=utf-8 14.1687ms
2025-11-16 20:01:16.986 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - null null
2025-11-16 20:01:16.987 +03:00 [INF] CORS policy execution successful.
2025-11-16 20:01:17.005 +03:00 [INF] Executed DbCommand (8ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 20:01:17.005 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:17.005 +03:00 [INF] Route matched with {action = "GetById", controller = "Cities"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.cities.CitiesDto] GetById(Int32) on controller MappyApplication.Controllers.CitiesController (MappyApplication).
2025-11-16 20:01:17.005 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-11-16 20:01:17.005 +03:00 [INF] Executed action MappyApplication.Controllers.CitiesController.GetById (MappyApplication) in 0.2216ms
2025-11-16 20:01:17.005 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:17.005 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - 400 null application/problem+json; charset=utf-8 18.716ms
2025-11-16 20:01:17.009 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - null null
2025-11-16 20:01:17.009 +03:00 [INF] CORS policy execution successful.
2025-11-16 20:01:17.020 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 20:01:17.020 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:17.020 +03:00 [INF] Route matched with {action = "GetById", controller = "Cities"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.cities.CitiesDto] GetById(Int32) on controller MappyApplication.Controllers.CitiesController (MappyApplication).
2025-11-16 20:01:17.020 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-11-16 20:01:17.021 +03:00 [INF] Executed action MappyApplication.Controllers.CitiesController.GetById (MappyApplication) in 0.212ms
2025-11-16 20:01:17.021 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:17.021 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - 400 null application/problem+json; charset=utf-8 11.6557ms
2025-11-16 20:01:17.025 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - null null
2025-11-16 20:01:17.026 +03:00 [INF] CORS policy execution successful.
2025-11-16 20:01:17.039 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 20:01:17.040 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:17.040 +03:00 [INF] Route matched with {action = "GetById", controller = "Cities"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.cities.CitiesDto] GetById(Int32) on controller MappyApplication.Controllers.CitiesController (MappyApplication).
2025-11-16 20:01:17.040 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-11-16 20:01:17.040 +03:00 [INF] Executed action MappyApplication.Controllers.CitiesController.GetById (MappyApplication) in 0.243ms
2025-11-16 20:01:17.040 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:17.040 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - 400 null application/problem+json; charset=utf-8 14.5802ms
2025-11-16 20:01:17.046 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - null null
2025-11-16 20:01:17.046 +03:00 [INF] CORS policy execution successful.
2025-11-16 20:01:17.058 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 20:01:17.058 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:17.058 +03:00 [INF] Route matched with {action = "GetById", controller = "Cities"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.cities.CitiesDto] GetById(Int32) on controller MappyApplication.Controllers.CitiesController (MappyApplication).
2025-11-16 20:01:17.058 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-11-16 20:01:17.058 +03:00 [INF] Executed action MappyApplication.Controllers.CitiesController.GetById (MappyApplication) in 0.237ms
2025-11-16 20:01:17.058 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:17.058 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - 400 null application/problem+json; charset=utf-8 12.3189ms
2025-11-16 20:01:17.063 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - null null
2025-11-16 20:01:17.063 +03:00 [INF] CORS policy execution successful.
2025-11-16 20:01:17.076 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 20:01:17.076 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:17.076 +03:00 [INF] Route matched with {action = "GetById", controller = "Cities"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.cities.CitiesDto] GetById(Int32) on controller MappyApplication.Controllers.CitiesController (MappyApplication).
2025-11-16 20:01:17.076 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-11-16 20:01:17.076 +03:00 [INF] Executed action MappyApplication.Controllers.CitiesController.GetById (MappyApplication) in 0.2442ms
2025-11-16 20:01:17.076 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:17.076 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - 400 null application/problem+json; charset=utf-8 13.5761ms
2025-11-16 20:01:17.081 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - null null
2025-11-16 20:01:17.081 +03:00 [INF] CORS policy execution successful.
2025-11-16 20:01:17.092 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 20:01:17.092 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:17.092 +03:00 [INF] Route matched with {action = "GetById", controller = "Cities"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.cities.CitiesDto] GetById(Int32) on controller MappyApplication.Controllers.CitiesController (MappyApplication).
2025-11-16 20:01:17.092 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-11-16 20:01:17.092 +03:00 [INF] Executed action MappyApplication.Controllers.CitiesController.GetById (MappyApplication) in 0.2335ms
2025-11-16 20:01:17.092 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:17.092 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - 400 null application/problem+json; charset=utf-8 11.7682ms
2025-11-16 20:01:17.100 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - null null
2025-11-16 20:01:17.101 +03:00 [INF] CORS policy execution successful.
2025-11-16 20:01:17.111 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 20:01:17.111 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:17.111 +03:00 [INF] Route matched with {action = "GetById", controller = "Cities"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.cities.CitiesDto] GetById(Int32) on controller MappyApplication.Controllers.CitiesController (MappyApplication).
2025-11-16 20:01:17.111 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-11-16 20:01:17.111 +03:00 [INF] Executed action MappyApplication.Controllers.CitiesController.GetById (MappyApplication) in 0.2593ms
2025-11-16 20:01:17.111 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:17.111 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - 400 null application/problem+json; charset=utf-8 10.9665ms
2025-11-16 20:01:17.115 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - null null
2025-11-16 20:01:17.115 +03:00 [INF] CORS policy execution successful.
2025-11-16 20:01:17.127 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 20:01:17.127 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:17.127 +03:00 [INF] Route matched with {action = "GetById", controller = "Cities"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.cities.CitiesDto] GetById(Int32) on controller MappyApplication.Controllers.CitiesController (MappyApplication).
2025-11-16 20:01:17.127 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-11-16 20:01:17.127 +03:00 [INF] Executed action MappyApplication.Controllers.CitiesController.GetById (MappyApplication) in 0.2059ms
2025-11-16 20:01:17.127 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:17.128 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - 400 null application/problem+json; charset=utf-8 12.3562ms
2025-11-16 20:01:17.135 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - null null
2025-11-16 20:01:17.135 +03:00 [INF] CORS policy execution successful.
2025-11-16 20:01:17.146 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 20:01:17.146 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:17.146 +03:00 [INF] Route matched with {action = "GetById", controller = "Cities"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.cities.CitiesDto] GetById(Int32) on controller MappyApplication.Controllers.CitiesController (MappyApplication).
2025-11-16 20:01:17.146 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-11-16 20:01:17.147 +03:00 [INF] Executed action MappyApplication.Controllers.CitiesController.GetById (MappyApplication) in 0.3652ms
2025-11-16 20:01:17.147 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:17.147 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - 400 null application/problem+json; charset=utf-8 11.8692ms
2025-11-16 20:01:17.151 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - null null
2025-11-16 20:01:17.151 +03:00 [INF] CORS policy execution successful.
2025-11-16 20:01:17.162 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 20:01:17.162 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:17.162 +03:00 [INF] Route matched with {action = "GetById", controller = "Cities"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.cities.CitiesDto] GetById(Int32) on controller MappyApplication.Controllers.CitiesController (MappyApplication).
2025-11-16 20:01:17.163 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-11-16 20:01:17.163 +03:00 [INF] Executed action MappyApplication.Controllers.CitiesController.GetById (MappyApplication) in 0.3636ms
2025-11-16 20:01:17.163 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:17.163 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - 400 null application/problem+json; charset=utf-8 12.0969ms
2025-11-16 20:01:17.166 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - null null
2025-11-16 20:01:17.166 +03:00 [INF] CORS policy execution successful.
2025-11-16 20:01:17.178 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 20:01:17.178 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:17.178 +03:00 [INF] Route matched with {action = "GetById", controller = "Cities"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.cities.CitiesDto] GetById(Int32) on controller MappyApplication.Controllers.CitiesController (MappyApplication).
2025-11-16 20:01:17.178 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-11-16 20:01:17.178 +03:00 [INF] Executed action MappyApplication.Controllers.CitiesController.GetById (MappyApplication) in 0.3707ms
2025-11-16 20:01:17.178 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:17.179 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - 400 null application/problem+json; charset=utf-8 12.3536ms
2025-11-16 20:01:17.182 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - null null
2025-11-16 20:01:17.182 +03:00 [INF] CORS policy execution successful.
2025-11-16 20:01:17.193 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 20:01:17.193 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:17.193 +03:00 [INF] Route matched with {action = "GetById", controller = "Cities"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.cities.CitiesDto] GetById(Int32) on controller MappyApplication.Controllers.CitiesController (MappyApplication).
2025-11-16 20:01:17.193 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-11-16 20:01:17.193 +03:00 [INF] Executed action MappyApplication.Controllers.CitiesController.GetById (MappyApplication) in 0.3645ms
2025-11-16 20:01:17.193 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:17.193 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - 400 null application/problem+json; charset=utf-8 11.1972ms
2025-11-16 20:01:17.197 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - null null
2025-11-16 20:01:17.197 +03:00 [INF] CORS policy execution successful.
2025-11-16 20:01:17.210 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 20:01:17.210 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:17.210 +03:00 [INF] Route matched with {action = "GetById", controller = "Cities"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.cities.CitiesDto] GetById(Int32) on controller MappyApplication.Controllers.CitiesController (MappyApplication).
2025-11-16 20:01:17.211 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-11-16 20:01:17.211 +03:00 [INF] Executed action MappyApplication.Controllers.CitiesController.GetById (MappyApplication) in 0.226ms
2025-11-16 20:01:17.211 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:17.211 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - 400 null application/problem+json; charset=utf-8 13.41ms
2025-11-16 20:01:17.214 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - null null
2025-11-16 20:01:17.215 +03:00 [INF] CORS policy execution successful.
2025-11-16 20:01:17.225 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 20:01:17.225 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:17.225 +03:00 [INF] Route matched with {action = "GetById", controller = "Cities"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.cities.CitiesDto] GetById(Int32) on controller MappyApplication.Controllers.CitiesController (MappyApplication).
2025-11-16 20:01:17.225 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-11-16 20:01:17.225 +03:00 [INF] Executed action MappyApplication.Controllers.CitiesController.GetById (MappyApplication) in 0.2266ms
2025-11-16 20:01:17.225 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:17.225 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - 400 null application/problem+json; charset=utf-8 10.5391ms
2025-11-16 20:01:17.229 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - null null
2025-11-16 20:01:17.229 +03:00 [INF] CORS policy execution successful.
2025-11-16 20:01:17.241 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 20:01:17.241 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:17.241 +03:00 [INF] Route matched with {action = "GetById", controller = "Cities"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.cities.CitiesDto] GetById(Int32) on controller MappyApplication.Controllers.CitiesController (MappyApplication).
2025-11-16 20:01:17.241 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-11-16 20:01:17.241 +03:00 [INF] Executed action MappyApplication.Controllers.CitiesController.GetById (MappyApplication) in 0.2772ms
2025-11-16 20:01:17.241 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:17.241 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - 400 null application/problem+json; charset=utf-8 12.5711ms
2025-11-16 20:01:17.245 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - null null
2025-11-16 20:01:17.245 +03:00 [INF] CORS policy execution successful.
2025-11-16 20:01:17.259 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 20:01:17.260 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:17.260 +03:00 [INF] Route matched with {action = "GetById", controller = "Cities"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.cities.CitiesDto] GetById(Int32) on controller MappyApplication.Controllers.CitiesController (MappyApplication).
2025-11-16 20:01:17.260 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-11-16 20:01:17.260 +03:00 [INF] Executed action MappyApplication.Controllers.CitiesController.GetById (MappyApplication) in 0.2265ms
2025-11-16 20:01:17.260 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:17.260 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - 400 null application/problem+json; charset=utf-8 15.1504ms
2025-11-16 20:01:17.264 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - null null
2025-11-16 20:01:17.264 +03:00 [INF] CORS policy execution successful.
2025-11-16 20:01:17.281 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 20:01:17.281 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:17.281 +03:00 [INF] Route matched with {action = "GetById", controller = "Cities"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.cities.CitiesDto] GetById(Int32) on controller MappyApplication.Controllers.CitiesController (MappyApplication).
2025-11-16 20:01:17.281 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-11-16 20:01:17.281 +03:00 [INF] Executed action MappyApplication.Controllers.CitiesController.GetById (MappyApplication) in 0.1865ms
2025-11-16 20:01:17.281 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:17.281 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - 400 null application/problem+json; charset=utf-8 17.6298ms
2025-11-16 20:01:17.285 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - null null
2025-11-16 20:01:17.285 +03:00 [INF] CORS policy execution successful.
2025-11-16 20:01:17.298 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 20:01:17.299 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:17.299 +03:00 [INF] Route matched with {action = "GetById", controller = "Cities"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.cities.CitiesDto] GetById(Int32) on controller MappyApplication.Controllers.CitiesController (MappyApplication).
2025-11-16 20:01:17.299 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-11-16 20:01:17.299 +03:00 [INF] Executed action MappyApplication.Controllers.CitiesController.GetById (MappyApplication) in 0.3413ms
2025-11-16 20:01:17.299 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:17.300 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - 400 null application/problem+json; charset=utf-8 14.4756ms
2025-11-16 20:01:17.303 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - null null
2025-11-16 20:01:17.303 +03:00 [INF] CORS policy execution successful.
2025-11-16 20:01:17.316 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 20:01:17.316 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:17.316 +03:00 [INF] Route matched with {action = "GetById", controller = "Cities"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.cities.CitiesDto] GetById(Int32) on controller MappyApplication.Controllers.CitiesController (MappyApplication).
2025-11-16 20:01:17.317 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-11-16 20:01:17.317 +03:00 [INF] Executed action MappyApplication.Controllers.CitiesController.GetById (MappyApplication) in 0.377ms
2025-11-16 20:01:17.317 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:17.317 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - 400 null application/problem+json; charset=utf-8 13.7017ms
2025-11-16 20:01:17.321 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - null null
2025-11-16 20:01:17.321 +03:00 [INF] CORS policy execution successful.
2025-11-16 20:01:17.335 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 20:01:17.335 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:17.335 +03:00 [INF] Route matched with {action = "GetById", controller = "Cities"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.cities.CitiesDto] GetById(Int32) on controller MappyApplication.Controllers.CitiesController (MappyApplication).
2025-11-16 20:01:17.336 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-11-16 20:01:17.336 +03:00 [INF] Executed action MappyApplication.Controllers.CitiesController.GetById (MappyApplication) in 0.32ms
2025-11-16 20:01:17.336 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:17.336 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - 400 null application/problem+json; charset=utf-8 15.1133ms
2025-11-16 20:01:17.340 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - null null
2025-11-16 20:01:17.340 +03:00 [INF] CORS policy execution successful.
2025-11-16 20:01:17.356 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 20:01:17.356 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:17.356 +03:00 [INF] Route matched with {action = "GetById", controller = "Cities"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.cities.CitiesDto] GetById(Int32) on controller MappyApplication.Controllers.CitiesController (MappyApplication).
2025-11-16 20:01:17.356 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-11-16 20:01:17.356 +03:00 [INF] Executed action MappyApplication.Controllers.CitiesController.GetById (MappyApplication) in 0.231ms
2025-11-16 20:01:17.356 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:17.356 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - 400 null application/problem+json; charset=utf-8 16.0327ms
2025-11-16 20:01:17.361 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - null null
2025-11-16 20:01:17.361 +03:00 [INF] CORS policy execution successful.
2025-11-16 20:01:17.373 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 20:01:17.374 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:17.374 +03:00 [INF] Route matched with {action = "GetById", controller = "Cities"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.cities.CitiesDto] GetById(Int32) on controller MappyApplication.Controllers.CitiesController (MappyApplication).
2025-11-16 20:01:17.374 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-11-16 20:01:17.374 +03:00 [INF] Executed action MappyApplication.Controllers.CitiesController.GetById (MappyApplication) in 0.2442ms
2025-11-16 20:01:17.374 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:17.374 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - 400 null application/problem+json; charset=utf-8 13.4625ms
2025-11-16 20:01:17.378 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - null null
2025-11-16 20:01:17.378 +03:00 [INF] CORS policy execution successful.
2025-11-16 20:01:17.390 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 20:01:17.390 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:17.390 +03:00 [INF] Route matched with {action = "GetById", controller = "Cities"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.cities.CitiesDto] GetById(Int32) on controller MappyApplication.Controllers.CitiesController (MappyApplication).
2025-11-16 20:01:17.390 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-11-16 20:01:17.390 +03:00 [INF] Executed action MappyApplication.Controllers.CitiesController.GetById (MappyApplication) in 0.3897ms
2025-11-16 20:01:17.390 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:17.390 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - 400 null application/problem+json; charset=utf-8 12.2487ms
2025-11-16 20:01:17.395 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - null null
2025-11-16 20:01:17.395 +03:00 [INF] CORS policy execution successful.
2025-11-16 20:01:17.406 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 20:01:17.406 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:17.406 +03:00 [INF] Route matched with {action = "GetById", controller = "Cities"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.cities.CitiesDto] GetById(Int32) on controller MappyApplication.Controllers.CitiesController (MappyApplication).
2025-11-16 20:01:17.407 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-11-16 20:01:17.407 +03:00 [INF] Executed action MappyApplication.Controllers.CitiesController.GetById (MappyApplication) in 0.3414ms
2025-11-16 20:01:17.407 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:17.407 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - 400 null application/problem+json; charset=utf-8 11.8792ms
2025-11-16 20:01:17.411 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - null null
2025-11-16 20:01:17.411 +03:00 [INF] CORS policy execution successful.
2025-11-16 20:01:17.427 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 20:01:17.427 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:17.428 +03:00 [INF] Route matched with {action = "GetById", controller = "Cities"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.cities.CitiesDto] GetById(Int32) on controller MappyApplication.Controllers.CitiesController (MappyApplication).
2025-11-16 20:01:17.428 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-11-16 20:01:17.428 +03:00 [INF] Executed action MappyApplication.Controllers.CitiesController.GetById (MappyApplication) in 0.2526ms
2025-11-16 20:01:17.428 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:17.428 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - 400 null application/problem+json; charset=utf-8 16.6287ms
2025-11-16 20:01:17.432 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - null null
2025-11-16 20:01:17.432 +03:00 [INF] CORS policy execution successful.
2025-11-16 20:01:17.445 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 20:01:17.445 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:17.445 +03:00 [INF] Route matched with {action = "GetById", controller = "Cities"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.cities.CitiesDto] GetById(Int32) on controller MappyApplication.Controllers.CitiesController (MappyApplication).
2025-11-16 20:01:17.446 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-11-16 20:01:17.446 +03:00 [INF] Executed action MappyApplication.Controllers.CitiesController.GetById (MappyApplication) in 0.2957ms
2025-11-16 20:01:17.446 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:17.446 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - 400 null application/problem+json; charset=utf-8 13.6417ms
2025-11-16 20:01:17.450 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - null null
2025-11-16 20:01:17.450 +03:00 [INF] CORS policy execution successful.
2025-11-16 20:01:17.464 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 20:01:17.464 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:17.464 +03:00 [INF] Route matched with {action = "GetById", controller = "Cities"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.cities.CitiesDto] GetById(Int32) on controller MappyApplication.Controllers.CitiesController (MappyApplication).
2025-11-16 20:01:17.464 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-11-16 20:01:17.464 +03:00 [INF] Executed action MappyApplication.Controllers.CitiesController.GetById (MappyApplication) in 0.3132ms
2025-11-16 20:01:17.464 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:17.464 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - 400 null application/problem+json; charset=utf-8 14.4614ms
2025-11-16 20:01:17.468 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - null null
2025-11-16 20:01:17.468 +03:00 [INF] CORS policy execution successful.
2025-11-16 20:01:17.499 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 20:01:17.500 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:17.500 +03:00 [INF] Route matched with {action = "GetById", controller = "Cities"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.cities.CitiesDto] GetById(Int32) on controller MappyApplication.Controllers.CitiesController (MappyApplication).
2025-11-16 20:01:17.500 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-11-16 20:01:17.500 +03:00 [INF] Executed action MappyApplication.Controllers.CitiesController.GetById (MappyApplication) in 0.4164ms
2025-11-16 20:01:17.500 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:17.500 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - 400 null application/problem+json; charset=utf-8 31.9902ms
2025-11-16 20:01:17.506 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - null null
2025-11-16 20:01:17.506 +03:00 [INF] CORS policy execution successful.
2025-11-16 20:01:17.518 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 20:01:17.518 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:17.518 +03:00 [INF] Route matched with {action = "GetById", controller = "Cities"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.cities.CitiesDto] GetById(Int32) on controller MappyApplication.Controllers.CitiesController (MappyApplication).
2025-11-16 20:01:17.518 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-11-16 20:01:17.518 +03:00 [INF] Executed action MappyApplication.Controllers.CitiesController.GetById (MappyApplication) in 0.2211ms
2025-11-16 20:01:17.518 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:17.518 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - 400 null application/problem+json; charset=utf-8 12.1383ms
2025-11-16 20:01:17.524 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - null null
2025-11-16 20:01:17.525 +03:00 [INF] CORS policy execution successful.
2025-11-16 20:01:17.537 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 20:01:17.538 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:17.538 +03:00 [INF] Route matched with {action = "GetById", controller = "Cities"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.cities.CitiesDto] GetById(Int32) on controller MappyApplication.Controllers.CitiesController (MappyApplication).
2025-11-16 20:01:17.538 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-11-16 20:01:17.538 +03:00 [INF] Executed action MappyApplication.Controllers.CitiesController.GetById (MappyApplication) in 0.2107ms
2025-11-16 20:01:17.538 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:17.538 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - 400 null application/problem+json; charset=utf-8 13.491ms
2025-11-16 20:01:17.545 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - null null
2025-11-16 20:01:17.545 +03:00 [INF] CORS policy execution successful.
2025-11-16 20:01:17.557 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 20:01:17.557 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:17.557 +03:00 [INF] Route matched with {action = "GetById", controller = "Cities"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.cities.CitiesDto] GetById(Int32) on controller MappyApplication.Controllers.CitiesController (MappyApplication).
2025-11-16 20:01:17.557 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-11-16 20:01:17.557 +03:00 [INF] Executed action MappyApplication.Controllers.CitiesController.GetById (MappyApplication) in 0.2215ms
2025-11-16 20:01:17.557 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:17.557 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - 400 null application/problem+json; charset=utf-8 12.0013ms
2025-11-16 20:01:17.561 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - null null
2025-11-16 20:01:17.561 +03:00 [INF] CORS policy execution successful.
2025-11-16 20:01:17.571 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 20:01:17.571 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:17.571 +03:00 [INF] Route matched with {action = "GetById", controller = "Cities"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.cities.CitiesDto] GetById(Int32) on controller MappyApplication.Controllers.CitiesController (MappyApplication).
2025-11-16 20:01:17.571 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-11-16 20:01:17.571 +03:00 [INF] Executed action MappyApplication.Controllers.CitiesController.GetById (MappyApplication) in 0.1945ms
2025-11-16 20:01:17.571 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:17.571 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - 400 null application/problem+json; charset=utf-8 10.2948ms
2025-11-16 20:01:17.576 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - null null
2025-11-16 20:01:17.576 +03:00 [INF] CORS policy execution successful.
2025-11-16 20:01:17.587 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 20:01:17.587 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:17.587 +03:00 [INF] Route matched with {action = "GetById", controller = "Cities"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.cities.CitiesDto] GetById(Int32) on controller MappyApplication.Controllers.CitiesController (MappyApplication).
2025-11-16 20:01:17.588 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-11-16 20:01:17.588 +03:00 [INF] Executed action MappyApplication.Controllers.CitiesController.GetById (MappyApplication) in 0.1999ms
2025-11-16 20:01:17.588 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:17.588 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - 400 null application/problem+json; charset=utf-8 11.6879ms
2025-11-16 20:01:17.592 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - null null
2025-11-16 20:01:17.592 +03:00 [INF] CORS policy execution successful.
2025-11-16 20:01:17.607 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 20:01:17.607 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:17.607 +03:00 [INF] Route matched with {action = "GetById", controller = "Cities"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.cities.CitiesDto] GetById(Int32) on controller MappyApplication.Controllers.CitiesController (MappyApplication).
2025-11-16 20:01:17.607 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-11-16 20:01:17.607 +03:00 [INF] Executed action MappyApplication.Controllers.CitiesController.GetById (MappyApplication) in 0.2432ms
2025-11-16 20:01:17.607 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:17.607 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - 400 null application/problem+json; charset=utf-8 15.1695ms
2025-11-16 20:01:17.615 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - null null
2025-11-16 20:01:17.615 +03:00 [INF] CORS policy execution successful.
2025-11-16 20:01:17.626 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 20:01:17.627 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:17.627 +03:00 [INF] Route matched with {action = "GetById", controller = "Cities"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.cities.CitiesDto] GetById(Int32) on controller MappyApplication.Controllers.CitiesController (MappyApplication).
2025-11-16 20:01:17.627 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-11-16 20:01:17.627 +03:00 [INF] Executed action MappyApplication.Controllers.CitiesController.GetById (MappyApplication) in 0.2875ms
2025-11-16 20:01:17.627 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:17.627 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - 400 null application/problem+json; charset=utf-8 11.7291ms
2025-11-16 20:01:17.635 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - null null
2025-11-16 20:01:17.635 +03:00 [INF] CORS policy execution successful.
2025-11-16 20:01:17.654 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 20:01:17.654 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:17.654 +03:00 [INF] Route matched with {action = "GetById", controller = "Cities"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.cities.CitiesDto] GetById(Int32) on controller MappyApplication.Controllers.CitiesController (MappyApplication).
2025-11-16 20:01:17.654 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-11-16 20:01:17.654 +03:00 [INF] Executed action MappyApplication.Controllers.CitiesController.GetById (MappyApplication) in 0.2581ms
2025-11-16 20:01:17.654 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:17.654 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - 400 null application/problem+json; charset=utf-8 19.5782ms
2025-11-16 20:01:17.670 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - null null
2025-11-16 20:01:17.671 +03:00 [INF] CORS policy execution successful.
2025-11-16 20:01:17.684 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 20:01:17.685 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:17.685 +03:00 [INF] Route matched with {action = "GetById", controller = "Cities"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.cities.CitiesDto] GetById(Int32) on controller MappyApplication.Controllers.CitiesController (MappyApplication).
2025-11-16 20:01:17.685 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-11-16 20:01:17.685 +03:00 [INF] Executed action MappyApplication.Controllers.CitiesController.GetById (MappyApplication) in 0.3546ms
2025-11-16 20:01:17.685 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:17.685 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - 400 null application/problem+json; charset=utf-8 14.8047ms
2025-11-16 20:01:17.690 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - null null
2025-11-16 20:01:17.690 +03:00 [INF] CORS policy execution successful.
2025-11-16 20:01:17.704 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 20:01:17.704 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:17.704 +03:00 [INF] Route matched with {action = "GetById", controller = "Cities"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.cities.CitiesDto] GetById(Int32) on controller MappyApplication.Controllers.CitiesController (MappyApplication).
2025-11-16 20:01:17.704 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-11-16 20:01:17.704 +03:00 [INF] Executed action MappyApplication.Controllers.CitiesController.GetById (MappyApplication) in 0.2902ms
2025-11-16 20:01:17.704 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:17.704 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - 400 null application/problem+json; charset=utf-8 14.767ms
2025-11-16 20:01:17.709 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - null null
2025-11-16 20:01:17.709 +03:00 [INF] CORS policy execution successful.
2025-11-16 20:01:17.723 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 20:01:17.723 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:17.723 +03:00 [INF] Route matched with {action = "GetById", controller = "Cities"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.cities.CitiesDto] GetById(Int32) on controller MappyApplication.Controllers.CitiesController (MappyApplication).
2025-11-16 20:01:17.724 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-11-16 20:01:17.724 +03:00 [INF] Executed action MappyApplication.Controllers.CitiesController.GetById (MappyApplication) in 0.2125ms
2025-11-16 20:01:17.724 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:17.724 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - 400 null application/problem+json; charset=utf-8 15.0217ms
2025-11-16 20:01:17.728 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - null null
2025-11-16 20:01:17.728 +03:00 [INF] CORS policy execution successful.
2025-11-16 20:01:17.740 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 20:01:17.740 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:17.740 +03:00 [INF] Route matched with {action = "GetById", controller = "Cities"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.cities.CitiesDto] GetById(Int32) on controller MappyApplication.Controllers.CitiesController (MappyApplication).
2025-11-16 20:01:17.741 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-11-16 20:01:17.741 +03:00 [INF] Executed action MappyApplication.Controllers.CitiesController.GetById (MappyApplication) in 0.2072ms
2025-11-16 20:01:17.741 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:17.741 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - 400 null application/problem+json; charset=utf-8 12.8262ms
2025-11-16 20:01:17.745 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - null null
2025-11-16 20:01:17.745 +03:00 [INF] CORS policy execution successful.
2025-11-16 20:01:17.760 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 20:01:17.760 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:17.760 +03:00 [INF] Route matched with {action = "GetById", controller = "Cities"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.cities.CitiesDto] GetById(Int32) on controller MappyApplication.Controllers.CitiesController (MappyApplication).
2025-11-16 20:01:17.761 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-11-16 20:01:17.761 +03:00 [INF] Executed action MappyApplication.Controllers.CitiesController.GetById (MappyApplication) in 0.33ms
2025-11-16 20:01:17.761 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:17.761 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - 400 null application/problem+json; charset=utf-8 15.349ms
2025-11-16 20:01:17.765 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - null null
2025-11-16 20:01:17.765 +03:00 [INF] CORS policy execution successful.
2025-11-16 20:01:17.775 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 20:01:17.776 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:17.776 +03:00 [INF] Route matched with {action = "GetById", controller = "Cities"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.cities.CitiesDto] GetById(Int32) on controller MappyApplication.Controllers.CitiesController (MappyApplication).
2025-11-16 20:01:17.776 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-11-16 20:01:17.776 +03:00 [INF] Executed action MappyApplication.Controllers.CitiesController.GetById (MappyApplication) in 0.261ms
2025-11-16 20:01:17.776 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:17.776 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - 400 null application/problem+json; charset=utf-8 10.9491ms
2025-11-16 20:01:17.780 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - null null
2025-11-16 20:01:17.780 +03:00 [INF] CORS policy execution successful.
2025-11-16 20:01:17.791 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 20:01:17.791 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:17.791 +03:00 [INF] Route matched with {action = "GetById", controller = "Cities"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.cities.CitiesDto] GetById(Int32) on controller MappyApplication.Controllers.CitiesController (MappyApplication).
2025-11-16 20:01:17.791 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-11-16 20:01:17.791 +03:00 [INF] Executed action MappyApplication.Controllers.CitiesController.GetById (MappyApplication) in 0.211ms
2025-11-16 20:01:17.791 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:17.791 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - 400 null application/problem+json; charset=utf-8 11.685ms
2025-11-16 20:01:17.795 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - null null
2025-11-16 20:01:17.795 +03:00 [INF] CORS policy execution successful.
2025-11-16 20:01:17.807 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 20:01:17.807 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:17.807 +03:00 [INF] Route matched with {action = "GetById", controller = "Cities"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.cities.CitiesDto] GetById(Int32) on controller MappyApplication.Controllers.CitiesController (MappyApplication).
2025-11-16 20:01:17.807 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-11-16 20:01:17.808 +03:00 [INF] Executed action MappyApplication.Controllers.CitiesController.GetById (MappyApplication) in 0.2776ms
2025-11-16 20:01:17.808 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:17.808 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - 400 null application/problem+json; charset=utf-8 12.7315ms
2025-11-16 20:01:17.811 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - null null
2025-11-16 20:01:17.811 +03:00 [INF] CORS policy execution successful.
2025-11-16 20:01:17.823 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 20:01:17.823 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:17.823 +03:00 [INF] Route matched with {action = "GetById", controller = "Cities"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.cities.CitiesDto] GetById(Int32) on controller MappyApplication.Controllers.CitiesController (MappyApplication).
2025-11-16 20:01:17.824 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-11-16 20:01:17.824 +03:00 [INF] Executed action MappyApplication.Controllers.CitiesController.GetById (MappyApplication) in 0.2596ms
2025-11-16 20:01:17.824 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:17.824 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - 400 null application/problem+json; charset=utf-8 12.5264ms
2025-11-16 20:01:17.827 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - null null
2025-11-16 20:01:17.828 +03:00 [INF] CORS policy execution successful.
2025-11-16 20:01:17.840 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 20:01:17.840 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:17.840 +03:00 [INF] Route matched with {action = "GetById", controller = "Cities"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.cities.CitiesDto] GetById(Int32) on controller MappyApplication.Controllers.CitiesController (MappyApplication).
2025-11-16 20:01:17.841 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-11-16 20:01:17.841 +03:00 [INF] Executed action MappyApplication.Controllers.CitiesController.GetById (MappyApplication) in 0.2735ms
2025-11-16 20:01:17.841 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:17.841 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - 400 null application/problem+json; charset=utf-8 13.3368ms
2025-11-16 20:01:17.845 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - null null
2025-11-16 20:01:17.845 +03:00 [INF] CORS policy execution successful.
2025-11-16 20:01:17.855 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 20:01:17.855 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:17.855 +03:00 [INF] Route matched with {action = "GetById", controller = "Cities"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.cities.CitiesDto] GetById(Int32) on controller MappyApplication.Controllers.CitiesController (MappyApplication).
2025-11-16 20:01:17.855 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-11-16 20:01:17.856 +03:00 [INF] Executed action MappyApplication.Controllers.CitiesController.GetById (MappyApplication) in 0.2942ms
2025-11-16 20:01:17.856 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:17.856 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - 400 null application/problem+json; charset=utf-8 10.8087ms
2025-11-16 20:01:17.860 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - null null
2025-11-16 20:01:17.860 +03:00 [INF] CORS policy execution successful.
2025-11-16 20:01:17.872 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 20:01:17.873 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:17.873 +03:00 [INF] Route matched with {action = "GetById", controller = "Cities"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.cities.CitiesDto] GetById(Int32) on controller MappyApplication.Controllers.CitiesController (MappyApplication).
2025-11-16 20:01:17.873 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-11-16 20:01:17.873 +03:00 [INF] Executed action MappyApplication.Controllers.CitiesController.GetById (MappyApplication) in 0.2388ms
2025-11-16 20:01:17.873 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:17.873 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - 400 null application/problem+json; charset=utf-8 13.313ms
2025-11-16 20:01:17.877 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - null null
2025-11-16 20:01:17.878 +03:00 [INF] CORS policy execution successful.
2025-11-16 20:01:17.896 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 20:01:17.896 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:17.896 +03:00 [INF] Route matched with {action = "GetById", controller = "Cities"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.cities.CitiesDto] GetById(Int32) on controller MappyApplication.Controllers.CitiesController (MappyApplication).
2025-11-16 20:01:17.897 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-11-16 20:01:17.897 +03:00 [INF] Executed action MappyApplication.Controllers.CitiesController.GetById (MappyApplication) in 0.2982ms
2025-11-16 20:01:17.897 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:17.897 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - 400 null application/problem+json; charset=utf-8 19.6246ms
2025-11-16 20:01:17.901 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - null null
2025-11-16 20:01:17.901 +03:00 [INF] CORS policy execution successful.
2025-11-16 20:01:17.912 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 20:01:17.912 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:17.912 +03:00 [INF] Route matched with {action = "GetById", controller = "Cities"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.cities.CitiesDto] GetById(Int32) on controller MappyApplication.Controllers.CitiesController (MappyApplication).
2025-11-16 20:01:17.912 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-11-16 20:01:17.912 +03:00 [INF] Executed action MappyApplication.Controllers.CitiesController.GetById (MappyApplication) in 0.287ms
2025-11-16 20:01:17.912 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:17.912 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - 400 null application/problem+json; charset=utf-8 11.572ms
2025-11-16 20:01:17.916 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - null null
2025-11-16 20:01:17.916 +03:00 [INF] CORS policy execution successful.
2025-11-16 20:01:17.944 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 20:01:17.945 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:17.945 +03:00 [INF] Route matched with {action = "GetById", controller = "Cities"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.cities.CitiesDto] GetById(Int32) on controller MappyApplication.Controllers.CitiesController (MappyApplication).
2025-11-16 20:01:17.945 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-11-16 20:01:17.945 +03:00 [INF] Executed action MappyApplication.Controllers.CitiesController.GetById (MappyApplication) in 0.647ms
2025-11-16 20:01:17.945 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:17.945 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - 400 null application/problem+json; charset=utf-8 29.6105ms
2025-11-16 20:01:17.953 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - null null
2025-11-16 20:01:17.954 +03:00 [INF] CORS policy execution successful.
2025-11-16 20:01:18.009 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 20:01:18.009 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:18.009 +03:00 [INF] Route matched with {action = "GetById", controller = "Cities"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.cities.CitiesDto] GetById(Int32) on controller MappyApplication.Controllers.CitiesController (MappyApplication).
2025-11-16 20:01:18.009 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-11-16 20:01:18.009 +03:00 [INF] Executed action MappyApplication.Controllers.CitiesController.GetById (MappyApplication) in 0.2917ms
2025-11-16 20:01:18.009 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:18.009 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - 400 null application/problem+json; charset=utf-8 56.287ms
2025-11-16 20:01:18.015 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - null null
2025-11-16 20:01:18.016 +03:00 [INF] CORS policy execution successful.
2025-11-16 20:01:18.029 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 20:01:18.029 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:18.029 +03:00 [INF] Route matched with {action = "GetById", controller = "Cities"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.cities.CitiesDto] GetById(Int32) on controller MappyApplication.Controllers.CitiesController (MappyApplication).
2025-11-16 20:01:18.029 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-11-16 20:01:18.029 +03:00 [INF] Executed action MappyApplication.Controllers.CitiesController.GetById (MappyApplication) in 0.1898ms
2025-11-16 20:01:18.029 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:18.029 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - 400 null application/problem+json; charset=utf-8 13.5297ms
2025-11-16 20:01:18.033 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - null null
2025-11-16 20:01:18.033 +03:00 [INF] CORS policy execution successful.
2025-11-16 20:01:18.048 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 20:01:18.048 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:18.048 +03:00 [INF] Route matched with {action = "GetById", controller = "Cities"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.cities.CitiesDto] GetById(Int32) on controller MappyApplication.Controllers.CitiesController (MappyApplication).
2025-11-16 20:01:18.048 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-11-16 20:01:18.048 +03:00 [INF] Executed action MappyApplication.Controllers.CitiesController.GetById (MappyApplication) in 0.4398ms
2025-11-16 20:01:18.048 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:18.048 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - 400 null application/problem+json; charset=utf-8 15.1899ms
2025-11-16 20:01:18.052 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - null null
2025-11-16 20:01:18.053 +03:00 [INF] CORS policy execution successful.
2025-11-16 20:01:18.063 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 20:01:18.063 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:18.063 +03:00 [INF] Route matched with {action = "GetById", controller = "Cities"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.cities.CitiesDto] GetById(Int32) on controller MappyApplication.Controllers.CitiesController (MappyApplication).
2025-11-16 20:01:18.063 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-11-16 20:01:18.063 +03:00 [INF] Executed action MappyApplication.Controllers.CitiesController.GetById (MappyApplication) in 0.2165ms
2025-11-16 20:01:18.063 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:18.064 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - 400 null application/problem+json; charset=utf-8 11.0465ms
2025-11-16 20:01:18.067 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - null null
2025-11-16 20:01:18.068 +03:00 [INF] CORS policy execution successful.
2025-11-16 20:01:18.078 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 20:01:18.079 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:18.079 +03:00 [INF] Route matched with {action = "GetById", controller = "Cities"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.cities.CitiesDto] GetById(Int32) on controller MappyApplication.Controllers.CitiesController (MappyApplication).
2025-11-16 20:01:18.079 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-11-16 20:01:18.079 +03:00 [INF] Executed action MappyApplication.Controllers.CitiesController.GetById (MappyApplication) in 0.3916ms
2025-11-16 20:01:18.079 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:18.079 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - 400 null application/problem+json; charset=utf-8 11.5689ms
2025-11-16 20:01:18.085 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - null null
2025-11-16 20:01:18.085 +03:00 [INF] CORS policy execution successful.
2025-11-16 20:01:18.098 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 20:01:18.098 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:18.098 +03:00 [INF] Route matched with {action = "GetById", controller = "Cities"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.cities.CitiesDto] GetById(Int32) on controller MappyApplication.Controllers.CitiesController (MappyApplication).
2025-11-16 20:01:18.098 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-11-16 20:01:18.098 +03:00 [INF] Executed action MappyApplication.Controllers.CitiesController.GetById (MappyApplication) in 0.204ms
2025-11-16 20:01:18.098 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:18.098 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - 400 null application/problem+json; charset=utf-8 13.8393ms
2025-11-16 20:01:18.102 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - null null
2025-11-16 20:01:18.102 +03:00 [INF] CORS policy execution successful.
2025-11-16 20:01:18.115 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 20:01:18.115 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:18.115 +03:00 [INF] Route matched with {action = "GetById", controller = "Cities"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.cities.CitiesDto] GetById(Int32) on controller MappyApplication.Controllers.CitiesController (MappyApplication).
2025-11-16 20:01:18.115 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-11-16 20:01:18.115 +03:00 [INF] Executed action MappyApplication.Controllers.CitiesController.GetById (MappyApplication) in 0.1927ms
2025-11-16 20:01:18.115 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:18.115 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - 400 null application/problem+json; charset=utf-8 13.0419ms
2025-11-16 20:01:18.119 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - null null
2025-11-16 20:01:18.119 +03:00 [INF] CORS policy execution successful.
2025-11-16 20:01:18.128 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 20:01:18.128 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:18.128 +03:00 [INF] Route matched with {action = "GetById", controller = "Cities"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.cities.CitiesDto] GetById(Int32) on controller MappyApplication.Controllers.CitiesController (MappyApplication).
2025-11-16 20:01:18.129 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-11-16 20:01:18.129 +03:00 [INF] Executed action MappyApplication.Controllers.CitiesController.GetById (MappyApplication) in 0.1891ms
2025-11-16 20:01:18.129 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:18.129 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - 400 null application/problem+json; charset=utf-8 9.821ms
2025-11-16 20:01:18.132 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - null null
2025-11-16 20:01:18.133 +03:00 [INF] CORS policy execution successful.
2025-11-16 20:01:18.151 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 20:01:18.151 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:18.151 +03:00 [INF] Route matched with {action = "GetById", controller = "Cities"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.cities.CitiesDto] GetById(Int32) on controller MappyApplication.Controllers.CitiesController (MappyApplication).
2025-11-16 20:01:18.151 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-11-16 20:01:18.151 +03:00 [INF] Executed action MappyApplication.Controllers.CitiesController.GetById (MappyApplication) in 0.196ms
2025-11-16 20:01:18.151 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:18.152 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - 400 null application/problem+json; charset=utf-8 19.1762ms
2025-11-16 20:01:18.156 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - null null
2025-11-16 20:01:18.156 +03:00 [INF] CORS policy execution successful.
2025-11-16 20:01:18.167 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 20:01:18.167 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:18.168 +03:00 [INF] Route matched with {action = "GetById", controller = "Cities"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.cities.CitiesDto] GetById(Int32) on controller MappyApplication.Controllers.CitiesController (MappyApplication).
2025-11-16 20:01:18.168 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-11-16 20:01:18.168 +03:00 [INF] Executed action MappyApplication.Controllers.CitiesController.GetById (MappyApplication) in 0.1844ms
2025-11-16 20:01:18.168 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:18.168 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - 400 null application/problem+json; charset=utf-8 12.1951ms
2025-11-16 20:01:18.172 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - null null
2025-11-16 20:01:18.172 +03:00 [INF] CORS policy execution successful.
2025-11-16 20:01:18.181 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 20:01:18.181 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:18.181 +03:00 [INF] Route matched with {action = "GetById", controller = "Cities"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.cities.CitiesDto] GetById(Int32) on controller MappyApplication.Controllers.CitiesController (MappyApplication).
2025-11-16 20:01:18.181 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-11-16 20:01:18.181 +03:00 [INF] Executed action MappyApplication.Controllers.CitiesController.GetById (MappyApplication) in 0.1975ms
2025-11-16 20:01:18.181 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:18.181 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - 400 null application/problem+json; charset=utf-8 9.5619ms
2025-11-16 20:01:18.186 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - null null
2025-11-16 20:01:18.186 +03:00 [INF] CORS policy execution successful.
2025-11-16 20:01:18.197 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 20:01:18.198 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:18.198 +03:00 [INF] Route matched with {action = "GetById", controller = "Cities"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.cities.CitiesDto] GetById(Int32) on controller MappyApplication.Controllers.CitiesController (MappyApplication).
2025-11-16 20:01:18.198 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-11-16 20:01:18.198 +03:00 [INF] Executed action MappyApplication.Controllers.CitiesController.GetById (MappyApplication) in 0.1975ms
2025-11-16 20:01:18.198 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:18.198 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - 400 null application/problem+json; charset=utf-8 11.6774ms
2025-11-16 20:01:18.201 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - null null
2025-11-16 20:01:18.201 +03:00 [INF] CORS policy execution successful.
2025-11-16 20:01:18.211 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 20:01:18.211 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:18.211 +03:00 [INF] Route matched with {action = "GetById", controller = "Cities"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.cities.CitiesDto] GetById(Int32) on controller MappyApplication.Controllers.CitiesController (MappyApplication).
2025-11-16 20:01:18.212 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-11-16 20:01:18.212 +03:00 [INF] Executed action MappyApplication.Controllers.CitiesController.GetById (MappyApplication) in 0.2006ms
2025-11-16 20:01:18.212 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:18.212 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - 400 null application/problem+json; charset=utf-8 10.2063ms
2025-11-16 20:01:18.216 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - null null
2025-11-16 20:01:18.216 +03:00 [INF] CORS policy execution successful.
2025-11-16 20:01:18.227 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 20:01:18.227 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:18.227 +03:00 [INF] Route matched with {action = "GetById", controller = "Cities"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.cities.CitiesDto] GetById(Int32) on controller MappyApplication.Controllers.CitiesController (MappyApplication).
2025-11-16 20:01:18.227 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-11-16 20:01:18.227 +03:00 [INF] Executed action MappyApplication.Controllers.CitiesController.GetById (MappyApplication) in 0.1953ms
2025-11-16 20:01:18.227 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:18.228 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - 400 null application/problem+json; charset=utf-8 11.7898ms
2025-11-16 20:01:18.231 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - null null
2025-11-16 20:01:18.231 +03:00 [INF] CORS policy execution successful.
2025-11-16 20:01:18.241 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 20:01:18.241 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:18.241 +03:00 [INF] Route matched with {action = "GetById", controller = "Cities"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.cities.CitiesDto] GetById(Int32) on controller MappyApplication.Controllers.CitiesController (MappyApplication).
2025-11-16 20:01:18.241 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-11-16 20:01:18.241 +03:00 [INF] Executed action MappyApplication.Controllers.CitiesController.GetById (MappyApplication) in 0.263ms
2025-11-16 20:01:18.241 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:18.241 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - 400 null application/problem+json; charset=utf-8 10.0104ms
2025-11-16 20:01:18.245 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - null null
2025-11-16 20:01:18.246 +03:00 [INF] CORS policy execution successful.
2025-11-16 20:01:18.256 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 20:01:18.256 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:18.256 +03:00 [INF] Route matched with {action = "GetById", controller = "Cities"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.cities.CitiesDto] GetById(Int32) on controller MappyApplication.Controllers.CitiesController (MappyApplication).
2025-11-16 20:01:18.256 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-11-16 20:01:18.257 +03:00 [INF] Executed action MappyApplication.Controllers.CitiesController.GetById (MappyApplication) in 0.2294ms
2025-11-16 20:01:18.257 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:18.257 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - 400 null application/problem+json; charset=utf-8 11.5591ms
2025-11-16 20:01:18.261 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - null null
2025-11-16 20:01:18.261 +03:00 [INF] CORS policy execution successful.
2025-11-16 20:01:18.270 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 20:01:18.270 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:18.270 +03:00 [INF] Route matched with {action = "GetById", controller = "Cities"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.cities.CitiesDto] GetById(Int32) on controller MappyApplication.Controllers.CitiesController (MappyApplication).
2025-11-16 20:01:18.270 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-11-16 20:01:18.270 +03:00 [INF] Executed action MappyApplication.Controllers.CitiesController.GetById (MappyApplication) in 0.2112ms
2025-11-16 20:01:18.270 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:18.270 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - 400 null application/problem+json; charset=utf-8 9.5678ms
2025-11-16 20:01:18.276 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - null null
2025-11-16 20:01:18.276 +03:00 [INF] CORS policy execution successful.
2025-11-16 20:01:18.295 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 20:01:18.295 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:18.295 +03:00 [INF] Route matched with {action = "GetById", controller = "Cities"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.cities.CitiesDto] GetById(Int32) on controller MappyApplication.Controllers.CitiesController (MappyApplication).
2025-11-16 20:01:18.295 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-11-16 20:01:18.295 +03:00 [INF] Executed action MappyApplication.Controllers.CitiesController.GetById (MappyApplication) in 0.2172ms
2025-11-16 20:01:18.295 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:18.295 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - 400 null application/problem+json; charset=utf-8 19.0109ms
2025-11-16 20:01:18.300 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - null null
2025-11-16 20:01:18.300 +03:00 [INF] CORS policy execution successful.
2025-11-16 20:01:18.311 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 20:01:18.311 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:18.311 +03:00 [INF] Route matched with {action = "GetById", controller = "Cities"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.cities.CitiesDto] GetById(Int32) on controller MappyApplication.Controllers.CitiesController (MappyApplication).
2025-11-16 20:01:18.311 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-11-16 20:01:18.311 +03:00 [INF] Executed action MappyApplication.Controllers.CitiesController.GetById (MappyApplication) in 0.1783ms
2025-11-16 20:01:18.311 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:18.311 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - 400 null application/problem+json; charset=utf-8 11.0657ms
2025-11-16 20:01:18.315 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - null null
2025-11-16 20:01:18.315 +03:00 [INF] CORS policy execution successful.
2025-11-16 20:01:18.326 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 20:01:18.327 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:18.327 +03:00 [INF] Route matched with {action = "GetById", controller = "Cities"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.cities.CitiesDto] GetById(Int32) on controller MappyApplication.Controllers.CitiesController (MappyApplication).
2025-11-16 20:01:18.327 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-11-16 20:01:18.327 +03:00 [INF] Executed action MappyApplication.Controllers.CitiesController.GetById (MappyApplication) in 0.1921ms
2025-11-16 20:01:18.327 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:18.327 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - 400 null application/problem+json; charset=utf-8 12.3211ms
2025-11-16 20:01:18.331 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - null null
2025-11-16 20:01:18.331 +03:00 [INF] CORS policy execution successful.
2025-11-16 20:01:18.343 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 20:01:18.343 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:18.343 +03:00 [INF] Route matched with {action = "GetById", controller = "Cities"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.cities.CitiesDto] GetById(Int32) on controller MappyApplication.Controllers.CitiesController (MappyApplication).
2025-11-16 20:01:18.344 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-11-16 20:01:18.344 +03:00 [INF] Executed action MappyApplication.Controllers.CitiesController.GetById (MappyApplication) in 0.1996ms
2025-11-16 20:01:18.344 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:18.344 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - 400 null application/problem+json; charset=utf-8 12.6947ms
2025-11-16 20:01:18.348 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - null null
2025-11-16 20:01:18.348 +03:00 [INF] CORS policy execution successful.
2025-11-16 20:01:18.359 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 20:01:18.359 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:18.359 +03:00 [INF] Route matched with {action = "GetById", controller = "Cities"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.cities.CitiesDto] GetById(Int32) on controller MappyApplication.Controllers.CitiesController (MappyApplication).
2025-11-16 20:01:18.359 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-11-16 20:01:18.359 +03:00 [INF] Executed action MappyApplication.Controllers.CitiesController.GetById (MappyApplication) in 0.249ms
2025-11-16 20:01:18.359 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:18.359 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - 400 null application/problem+json; charset=utf-8 11.624ms
2025-11-16 20:01:18.363 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - null null
2025-11-16 20:01:18.363 +03:00 [INF] CORS policy execution successful.
2025-11-16 20:01:18.376 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 20:01:18.376 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:18.376 +03:00 [INF] Route matched with {action = "GetById", controller = "Cities"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.cities.CitiesDto] GetById(Int32) on controller MappyApplication.Controllers.CitiesController (MappyApplication).
2025-11-16 20:01:18.376 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-11-16 20:01:18.376 +03:00 [INF] Executed action MappyApplication.Controllers.CitiesController.GetById (MappyApplication) in 0.2163ms
2025-11-16 20:01:18.376 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:18.376 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - 400 null application/problem+json; charset=utf-8 13.1898ms
2025-11-16 20:01:18.380 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - null null
2025-11-16 20:01:18.380 +03:00 [INF] CORS policy execution successful.
2025-11-16 20:01:18.392 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 20:01:18.392 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:18.392 +03:00 [INF] Route matched with {action = "GetById", controller = "Cities"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.cities.CitiesDto] GetById(Int32) on controller MappyApplication.Controllers.CitiesController (MappyApplication).
2025-11-16 20:01:18.392 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-11-16 20:01:18.392 +03:00 [INF] Executed action MappyApplication.Controllers.CitiesController.GetById (MappyApplication) in 0.2147ms
2025-11-16 20:01:18.392 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:18.392 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - 400 null application/problem+json; charset=utf-8 12.3282ms
2025-11-16 20:01:18.396 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - null null
2025-11-16 20:01:18.396 +03:00 [INF] CORS policy execution successful.
2025-11-16 20:01:18.406 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 20:01:18.407 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:18.407 +03:00 [INF] Route matched with {action = "GetById", controller = "Cities"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.cities.CitiesDto] GetById(Int32) on controller MappyApplication.Controllers.CitiesController (MappyApplication).
2025-11-16 20:01:18.407 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-11-16 20:01:18.407 +03:00 [INF] Executed action MappyApplication.Controllers.CitiesController.GetById (MappyApplication) in 0.2272ms
2025-11-16 20:01:18.407 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:18.407 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - 400 null application/problem+json; charset=utf-8 11.0224ms
2025-11-16 20:01:18.411 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - null null
2025-11-16 20:01:18.411 +03:00 [INF] CORS policy execution successful.
2025-11-16 20:01:18.428 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 20:01:18.428 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:18.428 +03:00 [INF] Route matched with {action = "GetById", controller = "Cities"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.cities.CitiesDto] GetById(Int32) on controller MappyApplication.Controllers.CitiesController (MappyApplication).
2025-11-16 20:01:18.428 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-11-16 20:01:18.428 +03:00 [INF] Executed action MappyApplication.Controllers.CitiesController.GetById (MappyApplication) in 0.1935ms
2025-11-16 20:01:18.428 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:18.428 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - 400 null application/problem+json; charset=utf-8 17.3995ms
2025-11-16 20:01:18.432 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - null null
2025-11-16 20:01:18.432 +03:00 [INF] CORS policy execution successful.
2025-11-16 20:01:18.443 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 20:01:18.443 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:18.443 +03:00 [INF] Route matched with {action = "GetById", controller = "Cities"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.cities.CitiesDto] GetById(Int32) on controller MappyApplication.Controllers.CitiesController (MappyApplication).
2025-11-16 20:01:18.443 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-11-16 20:01:18.443 +03:00 [INF] Executed action MappyApplication.Controllers.CitiesController.GetById (MappyApplication) in 0.2085ms
2025-11-16 20:01:18.443 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:18.443 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - 400 null application/problem+json; charset=utf-8 11.1466ms
2025-11-16 20:01:18.447 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - null null
2025-11-16 20:01:18.447 +03:00 [INF] CORS policy execution successful.
2025-11-16 20:01:18.457 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 20:01:18.457 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:18.457 +03:00 [INF] Route matched with {action = "GetById", controller = "Cities"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.cities.CitiesDto] GetById(Int32) on controller MappyApplication.Controllers.CitiesController (MappyApplication).
2025-11-16 20:01:18.457 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-11-16 20:01:18.457 +03:00 [INF] Executed action MappyApplication.Controllers.CitiesController.GetById (MappyApplication) in 0.2228ms
2025-11-16 20:01:18.457 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:18.457 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - 400 null application/problem+json; charset=utf-8 10.0047ms
2025-11-16 20:01:18.461 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - null null
2025-11-16 20:01:18.461 +03:00 [INF] CORS policy execution successful.
2025-11-16 20:01:18.469 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 20:01:18.469 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:18.469 +03:00 [INF] Route matched with {action = "GetById", controller = "Cities"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.cities.CitiesDto] GetById(Int32) on controller MappyApplication.Controllers.CitiesController (MappyApplication).
2025-11-16 20:01:18.470 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-11-16 20:01:18.470 +03:00 [INF] Executed action MappyApplication.Controllers.CitiesController.GetById (MappyApplication) in 0.2594ms
2025-11-16 20:01:18.470 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:18.470 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - 400 null application/problem+json; charset=utf-8 8.7442ms
2025-11-16 20:01:18.474 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - null null
2025-11-16 20:01:18.474 +03:00 [INF] CORS policy execution successful.
2025-11-16 20:01:18.484 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 20:01:18.484 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:18.484 +03:00 [INF] Route matched with {action = "GetById", controller = "Cities"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.cities.CitiesDto] GetById(Int32) on controller MappyApplication.Controllers.CitiesController (MappyApplication).
2025-11-16 20:01:18.484 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-11-16 20:01:18.484 +03:00 [INF] Executed action MappyApplication.Controllers.CitiesController.GetById (MappyApplication) in 0.1694ms
2025-11-16 20:01:18.484 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:18.484 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - 400 null application/problem+json; charset=utf-8 10.1285ms
2025-11-16 20:01:18.488 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - null null
2025-11-16 20:01:18.488 +03:00 [INF] CORS policy execution successful.
2025-11-16 20:01:18.505 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 20:01:18.505 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:18.505 +03:00 [INF] Route matched with {action = "GetById", controller = "Cities"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.cities.CitiesDto] GetById(Int32) on controller MappyApplication.Controllers.CitiesController (MappyApplication).
2025-11-16 20:01:18.505 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-11-16 20:01:18.505 +03:00 [INF] Executed action MappyApplication.Controllers.CitiesController.GetById (MappyApplication) in 0.3434ms
2025-11-16 20:01:18.505 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:18.506 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - 400 null application/problem+json; charset=utf-8 17.4192ms
2025-11-16 20:01:18.510 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - null null
2025-11-16 20:01:18.510 +03:00 [INF] CORS policy execution successful.
2025-11-16 20:01:18.522 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 20:01:18.522 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:18.522 +03:00 [INF] Route matched with {action = "GetById", controller = "Cities"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.cities.CitiesDto] GetById(Int32) on controller MappyApplication.Controllers.CitiesController (MappyApplication).
2025-11-16 20:01:18.523 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-11-16 20:01:18.523 +03:00 [INF] Executed action MappyApplication.Controllers.CitiesController.GetById (MappyApplication) in 0.2473ms
2025-11-16 20:01:18.523 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:18.523 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - 400 null application/problem+json; charset=utf-8 13.0877ms
2025-11-16 20:01:18.527 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - null null
2025-11-16 20:01:18.527 +03:00 [INF] CORS policy execution successful.
2025-11-16 20:01:18.536 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 20:01:18.536 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:18.536 +03:00 [INF] Route matched with {action = "GetById", controller = "Cities"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.cities.CitiesDto] GetById(Int32) on controller MappyApplication.Controllers.CitiesController (MappyApplication).
2025-11-16 20:01:18.536 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-11-16 20:01:18.536 +03:00 [INF] Executed action MappyApplication.Controllers.CitiesController.GetById (MappyApplication) in 0.2016ms
2025-11-16 20:01:18.536 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:18.536 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - 400 null application/problem+json; charset=utf-8 9.8446ms
2025-11-16 20:01:18.541 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - null null
2025-11-16 20:01:18.541 +03:00 [INF] CORS policy execution successful.
2025-11-16 20:01:18.554 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 20:01:18.555 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:18.555 +03:00 [INF] Route matched with {action = "GetById", controller = "Cities"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.cities.CitiesDto] GetById(Int32) on controller MappyApplication.Controllers.CitiesController (MappyApplication).
2025-11-16 20:01:18.555 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-11-16 20:01:18.555 +03:00 [INF] Executed action MappyApplication.Controllers.CitiesController.GetById (MappyApplication) in 0.2701ms
2025-11-16 20:01:18.555 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:18.555 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - 400 null application/problem+json; charset=utf-8 14.3038ms
2025-11-16 20:01:18.560 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - null null
2025-11-16 20:01:18.560 +03:00 [INF] CORS policy execution successful.
2025-11-16 20:01:18.570 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 20:01:18.570 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:18.571 +03:00 [INF] Route matched with {action = "GetById", controller = "Cities"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.cities.CitiesDto] GetById(Int32) on controller MappyApplication.Controllers.CitiesController (MappyApplication).
2025-11-16 20:01:18.571 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-11-16 20:01:18.571 +03:00 [INF] Executed action MappyApplication.Controllers.CitiesController.GetById (MappyApplication) in 0.2205ms
2025-11-16 20:01:18.571 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:18.571 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - 400 null application/problem+json; charset=utf-8 11.4639ms
2025-11-16 20:01:18.576 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - null null
2025-11-16 20:01:18.576 +03:00 [INF] CORS policy execution successful.
2025-11-16 20:01:18.586 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 20:01:18.586 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:18.586 +03:00 [INF] Route matched with {action = "GetById", controller = "Cities"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.cities.CitiesDto] GetById(Int32) on controller MappyApplication.Controllers.CitiesController (MappyApplication).
2025-11-16 20:01:18.586 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-11-16 20:01:18.586 +03:00 [INF] Executed action MappyApplication.Controllers.CitiesController.GetById (MappyApplication) in 0.284ms
2025-11-16 20:01:18.586 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:18.586 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - 400 null application/problem+json; charset=utf-8 10.5292ms
2025-11-16 20:01:18.591 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - null null
2025-11-16 20:01:18.591 +03:00 [INF] CORS policy execution successful.
2025-11-16 20:01:18.603 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 20:01:18.603 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:18.603 +03:00 [INF] Route matched with {action = "GetById", controller = "Cities"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.cities.CitiesDto] GetById(Int32) on controller MappyApplication.Controllers.CitiesController (MappyApplication).
2025-11-16 20:01:18.603 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-11-16 20:01:18.603 +03:00 [INF] Executed action MappyApplication.Controllers.CitiesController.GetById (MappyApplication) in 0.2538ms
2025-11-16 20:01:18.603 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:18.603 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - 400 null application/problem+json; charset=utf-8 12.4192ms
2025-11-16 20:01:18.608 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - null null
2025-11-16 20:01:18.609 +03:00 [INF] CORS policy execution successful.
2025-11-16 20:01:18.621 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 20:01:18.621 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:18.621 +03:00 [INF] Route matched with {action = "GetById", controller = "Cities"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.cities.CitiesDto] GetById(Int32) on controller MappyApplication.Controllers.CitiesController (MappyApplication).
2025-11-16 20:01:18.621 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-11-16 20:01:18.621 +03:00 [INF] Executed action MappyApplication.Controllers.CitiesController.GetById (MappyApplication) in 0.2376ms
2025-11-16 20:01:18.621 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:18.621 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - 400 null application/problem+json; charset=utf-8 12.7849ms
2025-11-16 20:01:18.626 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - null null
2025-11-16 20:01:18.626 +03:00 [INF] CORS policy execution successful.
2025-11-16 20:01:18.638 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 20:01:18.638 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:18.639 +03:00 [INF] Route matched with {action = "GetById", controller = "Cities"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.cities.CitiesDto] GetById(Int32) on controller MappyApplication.Controllers.CitiesController (MappyApplication).
2025-11-16 20:01:18.639 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-11-16 20:01:18.639 +03:00 [INF] Executed action MappyApplication.Controllers.CitiesController.GetById (MappyApplication) in 0.2387ms
2025-11-16 20:01:18.639 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:18.639 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - 400 null application/problem+json; charset=utf-8 12.7835ms
2025-11-16 20:01:18.644 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - null null
2025-11-16 20:01:18.644 +03:00 [INF] CORS policy execution successful.
2025-11-16 20:01:18.655 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 20:01:18.655 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:18.655 +03:00 [INF] Route matched with {action = "GetById", controller = "Cities"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.cities.CitiesDto] GetById(Int32) on controller MappyApplication.Controllers.CitiesController (MappyApplication).
2025-11-16 20:01:18.655 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-11-16 20:01:18.655 +03:00 [INF] Executed action MappyApplication.Controllers.CitiesController.GetById (MappyApplication) in 0.2625ms
2025-11-16 20:01:18.655 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:18.656 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - 400 null application/problem+json; charset=utf-8 11.8252ms
2025-11-16 20:01:18.661 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - null null
2025-11-16 20:01:18.661 +03:00 [INF] CORS policy execution successful.
2025-11-16 20:01:18.674 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 20:01:18.674 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:18.674 +03:00 [INF] Route matched with {action = "GetById", controller = "Cities"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.cities.CitiesDto] GetById(Int32) on controller MappyApplication.Controllers.CitiesController (MappyApplication).
2025-11-16 20:01:18.675 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-11-16 20:01:18.675 +03:00 [INF] Executed action MappyApplication.Controllers.CitiesController.GetById (MappyApplication) in 0.3145ms
2025-11-16 20:01:18.675 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:18.675 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - 400 null application/problem+json; charset=utf-8 14.085ms
2025-11-16 20:01:18.680 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - null null
2025-11-16 20:01:18.680 +03:00 [INF] CORS policy execution successful.
2025-11-16 20:01:18.691 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 20:01:18.691 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:18.691 +03:00 [INF] Route matched with {action = "GetById", controller = "Cities"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.cities.CitiesDto] GetById(Int32) on controller MappyApplication.Controllers.CitiesController (MappyApplication).
2025-11-16 20:01:18.691 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-11-16 20:01:18.691 +03:00 [INF] Executed action MappyApplication.Controllers.CitiesController.GetById (MappyApplication) in 0.3035ms
2025-11-16 20:01:18.691 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:18.691 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - 400 null application/problem+json; charset=utf-8 11.5808ms
2025-11-16 20:01:18.696 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - null null
2025-11-16 20:01:18.696 +03:00 [INF] CORS policy execution successful.
2025-11-16 20:01:18.708 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 20:01:18.708 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:18.708 +03:00 [INF] Route matched with {action = "GetById", controller = "Cities"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.cities.CitiesDto] GetById(Int32) on controller MappyApplication.Controllers.CitiesController (MappyApplication).
2025-11-16 20:01:18.709 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-11-16 20:01:18.709 +03:00 [INF] Executed action MappyApplication.Controllers.CitiesController.GetById (MappyApplication) in 0.2625ms
2025-11-16 20:01:18.709 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:18.709 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - 400 null application/problem+json; charset=utf-8 12.3302ms
2025-11-16 20:01:18.713 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - null null
2025-11-16 20:01:18.713 +03:00 [INF] CORS policy execution successful.
2025-11-16 20:01:18.725 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 20:01:18.725 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:18.725 +03:00 [INF] Route matched with {action = "GetById", controller = "Cities"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.cities.CitiesDto] GetById(Int32) on controller MappyApplication.Controllers.CitiesController (MappyApplication).
2025-11-16 20:01:18.726 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-11-16 20:01:18.726 +03:00 [INF] Executed action MappyApplication.Controllers.CitiesController.GetById (MappyApplication) in 0.3699ms
2025-11-16 20:01:18.726 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:18.726 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - 400 null application/problem+json; charset=utf-8 12.4697ms
2025-11-16 20:01:18.730 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - null null
2025-11-16 20:01:18.730 +03:00 [INF] CORS policy execution successful.
2025-11-16 20:01:18.743 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 20:01:18.743 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:18.743 +03:00 [INF] Route matched with {action = "GetById", controller = "Cities"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.cities.CitiesDto] GetById(Int32) on controller MappyApplication.Controllers.CitiesController (MappyApplication).
2025-11-16 20:01:18.744 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-11-16 20:01:18.744 +03:00 [INF] Executed action MappyApplication.Controllers.CitiesController.GetById (MappyApplication) in 0.2557ms
2025-11-16 20:01:18.744 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:18.744 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - 400 null application/problem+json; charset=utf-8 13.6777ms
2025-11-16 20:01:18.748 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - null null
2025-11-16 20:01:18.749 +03:00 [INF] CORS policy execution successful.
2025-11-16 20:01:18.762 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 20:01:18.762 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:18.762 +03:00 [INF] Route matched with {action = "GetById", controller = "Cities"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.cities.CitiesDto] GetById(Int32) on controller MappyApplication.Controllers.CitiesController (MappyApplication).
2025-11-16 20:01:18.762 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-11-16 20:01:18.762 +03:00 [INF] Executed action MappyApplication.Controllers.CitiesController.GetById (MappyApplication) in 0.2544ms
2025-11-16 20:01:18.762 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:18.762 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - 400 null application/problem+json; charset=utf-8 14.0315ms
2025-11-16 20:01:18.767 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - null null
2025-11-16 20:01:18.767 +03:00 [INF] CORS policy execution successful.
2025-11-16 20:01:18.779 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 20:01:18.780 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:18.780 +03:00 [INF] Route matched with {action = "GetById", controller = "Cities"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.cities.CitiesDto] GetById(Int32) on controller MappyApplication.Controllers.CitiesController (MappyApplication).
2025-11-16 20:01:18.780 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-11-16 20:01:18.780 +03:00 [INF] Executed action MappyApplication.Controllers.CitiesController.GetById (MappyApplication) in 0.2522ms
2025-11-16 20:01:18.780 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:18.780 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - 400 null application/problem+json; charset=utf-8 13.3211ms
2025-11-16 20:01:18.784 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - null null
2025-11-16 20:01:18.784 +03:00 [INF] CORS policy execution successful.
2025-11-16 20:01:18.796 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 20:01:18.796 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:18.796 +03:00 [INF] Route matched with {action = "GetById", controller = "Cities"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.cities.CitiesDto] GetById(Int32) on controller MappyApplication.Controllers.CitiesController (MappyApplication).
2025-11-16 20:01:18.796 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-11-16 20:01:18.796 +03:00 [INF] Executed action MappyApplication.Controllers.CitiesController.GetById (MappyApplication) in 0.2748ms
2025-11-16 20:01:18.796 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:18.797 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - 400 null application/problem+json; charset=utf-8 12.6454ms
2025-11-16 20:01:18.801 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - null null
2025-11-16 20:01:18.801 +03:00 [INF] CORS policy execution successful.
2025-11-16 20:01:18.814 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 20:01:18.814 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:18.814 +03:00 [INF] Route matched with {action = "GetById", controller = "Cities"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.cities.CitiesDto] GetById(Int32) on controller MappyApplication.Controllers.CitiesController (MappyApplication).
2025-11-16 20:01:18.814 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-11-16 20:01:18.814 +03:00 [INF] Executed action MappyApplication.Controllers.CitiesController.GetById (MappyApplication) in 0.2025ms
2025-11-16 20:01:18.814 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:18.814 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - 400 null application/problem+json; charset=utf-8 13.5759ms
2025-11-16 20:01:18.818 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - null null
2025-11-16 20:01:18.818 +03:00 [INF] CORS policy execution successful.
2025-11-16 20:01:18.830 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 20:01:18.830 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:18.830 +03:00 [INF] Route matched with {action = "GetById", controller = "Cities"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.cities.CitiesDto] GetById(Int32) on controller MappyApplication.Controllers.CitiesController (MappyApplication).
2025-11-16 20:01:18.830 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-11-16 20:01:18.830 +03:00 [INF] Executed action MappyApplication.Controllers.CitiesController.GetById (MappyApplication) in 0.2315ms
2025-11-16 20:01:18.830 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:18.830 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - 400 null application/problem+json; charset=utf-8 12.2846ms
2025-11-16 20:01:18.834 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - null null
2025-11-16 20:01:18.834 +03:00 [INF] CORS policy execution successful.
2025-11-16 20:01:18.846 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 20:01:18.847 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:18.847 +03:00 [INF] Route matched with {action = "GetById", controller = "Cities"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.cities.CitiesDto] GetById(Int32) on controller MappyApplication.Controllers.CitiesController (MappyApplication).
2025-11-16 20:01:18.847 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-11-16 20:01:18.847 +03:00 [INF] Executed action MappyApplication.Controllers.CitiesController.GetById (MappyApplication) in 0.3007ms
2025-11-16 20:01:18.847 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:18.847 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - 400 null application/problem+json; charset=utf-8 12.7375ms
2025-11-16 20:01:18.852 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - null null
2025-11-16 20:01:18.852 +03:00 [INF] CORS policy execution successful.
2025-11-16 20:01:18.865 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 20:01:18.865 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:18.865 +03:00 [INF] Route matched with {action = "GetById", controller = "Cities"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.cities.CitiesDto] GetById(Int32) on controller MappyApplication.Controllers.CitiesController (MappyApplication).
2025-11-16 20:01:18.865 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-11-16 20:01:18.865 +03:00 [INF] Executed action MappyApplication.Controllers.CitiesController.GetById (MappyApplication) in 0.2684ms
2025-11-16 20:01:18.865 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:18.865 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - 400 null application/problem+json; charset=utf-8 13.4085ms
2025-11-16 20:01:18.870 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - null null
2025-11-16 20:01:18.870 +03:00 [INF] CORS policy execution successful.
2025-11-16 20:01:18.880 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 20:01:18.880 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:18.880 +03:00 [INF] Route matched with {action = "GetById", controller = "Cities"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.cities.CitiesDto] GetById(Int32) on controller MappyApplication.Controllers.CitiesController (MappyApplication).
2025-11-16 20:01:18.880 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-11-16 20:01:18.881 +03:00 [INF] Executed action MappyApplication.Controllers.CitiesController.GetById (MappyApplication) in 0.239ms
2025-11-16 20:01:18.881 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:18.881 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - 400 null application/problem+json; charset=utf-8 11.0707ms
2025-11-16 20:01:18.885 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - null null
2025-11-16 20:01:18.885 +03:00 [INF] CORS policy execution successful.
2025-11-16 20:01:18.897 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 20:01:18.897 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:18.897 +03:00 [INF] Route matched with {action = "GetById", controller = "Cities"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.cities.CitiesDto] GetById(Int32) on controller MappyApplication.Controllers.CitiesController (MappyApplication).
2025-11-16 20:01:18.897 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-11-16 20:01:18.897 +03:00 [INF] Executed action MappyApplication.Controllers.CitiesController.GetById (MappyApplication) in 0.2158ms
2025-11-16 20:01:18.897 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:18.897 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - 400 null application/problem+json; charset=utf-8 12.1295ms
2025-11-16 20:01:18.902 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - null null
2025-11-16 20:01:18.902 +03:00 [INF] CORS policy execution successful.
2025-11-16 20:01:18.914 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 20:01:18.914 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:18.914 +03:00 [INF] Route matched with {action = "GetById", controller = "Cities"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.cities.CitiesDto] GetById(Int32) on controller MappyApplication.Controllers.CitiesController (MappyApplication).
2025-11-16 20:01:18.914 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-11-16 20:01:18.914 +03:00 [INF] Executed action MappyApplication.Controllers.CitiesController.GetById (MappyApplication) in 0.1959ms
2025-11-16 20:01:18.914 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:18.914 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - 400 null application/problem+json; charset=utf-8 12.531ms
2025-11-16 20:01:18.919 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - null null
2025-11-16 20:01:18.919 +03:00 [INF] CORS policy execution successful.
2025-11-16 20:01:18.930 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 20:01:18.930 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:18.930 +03:00 [INF] Route matched with {action = "GetById", controller = "Cities"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.cities.CitiesDto] GetById(Int32) on controller MappyApplication.Controllers.CitiesController (MappyApplication).
2025-11-16 20:01:18.930 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-11-16 20:01:18.930 +03:00 [INF] Executed action MappyApplication.Controllers.CitiesController.GetById (MappyApplication) in 0.2111ms
2025-11-16 20:01:18.931 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:18.931 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - 400 null application/problem+json; charset=utf-8 11.7485ms
2025-11-16 20:01:18.934 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - null null
2025-11-16 20:01:18.934 +03:00 [INF] CORS policy execution successful.
2025-11-16 20:01:18.945 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 20:01:18.946 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:18.946 +03:00 [INF] Route matched with {action = "GetById", controller = "Cities"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.cities.CitiesDto] GetById(Int32) on controller MappyApplication.Controllers.CitiesController (MappyApplication).
2025-11-16 20:01:18.946 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-11-16 20:01:18.946 +03:00 [INF] Executed action MappyApplication.Controllers.CitiesController.GetById (MappyApplication) in 0.2383ms
2025-11-16 20:01:18.946 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:18.946 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - 400 null application/problem+json; charset=utf-8 11.7819ms
2025-11-16 20:01:18.950 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - null null
2025-11-16 20:01:18.950 +03:00 [INF] CORS policy execution successful.
2025-11-16 20:01:18.960 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 20:01:18.960 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:18.960 +03:00 [INF] Route matched with {action = "GetById", controller = "Cities"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.cities.CitiesDto] GetById(Int32) on controller MappyApplication.Controllers.CitiesController (MappyApplication).
2025-11-16 20:01:18.961 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-11-16 20:01:18.961 +03:00 [INF] Executed action MappyApplication.Controllers.CitiesController.GetById (MappyApplication) in 0.2186ms
2025-11-16 20:01:18.961 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:18.961 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - 400 null application/problem+json; charset=utf-8 10.8975ms
2025-11-16 20:01:18.964 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - null null
2025-11-16 20:01:18.964 +03:00 [INF] CORS policy execution successful.
2025-11-16 20:01:18.976 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 20:01:18.977 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:18.977 +03:00 [INF] Route matched with {action = "GetById", controller = "Cities"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.cities.CitiesDto] GetById(Int32) on controller MappyApplication.Controllers.CitiesController (MappyApplication).
2025-11-16 20:01:18.977 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-11-16 20:01:18.977 +03:00 [INF] Executed action MappyApplication.Controllers.CitiesController.GetById (MappyApplication) in 0.2128ms
2025-11-16 20:01:18.977 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:18.977 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - 400 null application/problem+json; charset=utf-8 12.794ms
2025-11-16 20:01:18.980 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - null null
2025-11-16 20:01:18.980 +03:00 [INF] CORS policy execution successful.
2025-11-16 20:01:18.993 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 20:01:18.993 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:18.993 +03:00 [INF] Route matched with {action = "GetById", controller = "Cities"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.cities.CitiesDto] GetById(Int32) on controller MappyApplication.Controllers.CitiesController (MappyApplication).
2025-11-16 20:01:18.993 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-11-16 20:01:18.993 +03:00 [INF] Executed action MappyApplication.Controllers.CitiesController.GetById (MappyApplication) in 0.2127ms
2025-11-16 20:01:18.993 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:18.993 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - 400 null application/problem+json; charset=utf-8 12.8488ms
2025-11-16 20:01:18.997 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - null null
2025-11-16 20:01:18.997 +03:00 [INF] CORS policy execution successful.
2025-11-16 20:01:19.007 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 20:01:19.008 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:19.008 +03:00 [INF] Route matched with {action = "GetById", controller = "Cities"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.cities.CitiesDto] GetById(Int32) on controller MappyApplication.Controllers.CitiesController (MappyApplication).
2025-11-16 20:01:19.008 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-11-16 20:01:19.008 +03:00 [INF] Executed action MappyApplication.Controllers.CitiesController.GetById (MappyApplication) in 0.2171ms
2025-11-16 20:01:19.008 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:19.008 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - 400 null application/problem+json; charset=utf-8 10.9998ms
2025-11-16 20:01:19.012 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - null null
2025-11-16 20:01:19.012 +03:00 [INF] CORS policy execution successful.
2025-11-16 20:01:19.031 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 20:01:19.031 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:19.031 +03:00 [INF] Route matched with {action = "GetById", controller = "Cities"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.cities.CitiesDto] GetById(Int32) on controller MappyApplication.Controllers.CitiesController (MappyApplication).
2025-11-16 20:01:19.032 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-11-16 20:01:19.032 +03:00 [INF] Executed action MappyApplication.Controllers.CitiesController.GetById (MappyApplication) in 0.2304ms
2025-11-16 20:01:19.032 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:19.032 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - 400 null application/problem+json; charset=utf-8 20.0874ms
2025-11-16 20:01:19.035 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - null null
2025-11-16 20:01:19.035 +03:00 [INF] CORS policy execution successful.
2025-11-16 20:01:19.049 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 20:01:19.049 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:19.049 +03:00 [INF] Route matched with {action = "GetById", controller = "Cities"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.cities.CitiesDto] GetById(Int32) on controller MappyApplication.Controllers.CitiesController (MappyApplication).
2025-11-16 20:01:19.049 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-11-16 20:01:19.049 +03:00 [INF] Executed action MappyApplication.Controllers.CitiesController.GetById (MappyApplication) in 0.2343ms
2025-11-16 20:01:19.049 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:19.049 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - 400 null application/problem+json; charset=utf-8 14.0396ms
2025-11-16 20:01:19.053 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - null null
2025-11-16 20:01:19.053 +03:00 [INF] CORS policy execution successful.
2025-11-16 20:01:19.063 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 20:01:19.064 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:19.064 +03:00 [INF] Route matched with {action = "GetById", controller = "Cities"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.cities.CitiesDto] GetById(Int32) on controller MappyApplication.Controllers.CitiesController (MappyApplication).
2025-11-16 20:01:19.064 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-11-16 20:01:19.064 +03:00 [INF] Executed action MappyApplication.Controllers.CitiesController.GetById (MappyApplication) in 0.2159ms
2025-11-16 20:01:19.064 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:19.064 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - 400 null application/problem+json; charset=utf-8 10.5696ms
2025-11-16 20:01:19.068 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - null null
2025-11-16 20:01:19.068 +03:00 [INF] CORS policy execution successful.
2025-11-16 20:01:19.079 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 20:01:19.079 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:19.079 +03:00 [INF] Route matched with {action = "GetById", controller = "Cities"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.cities.CitiesDto] GetById(Int32) on controller MappyApplication.Controllers.CitiesController (MappyApplication).
2025-11-16 20:01:19.079 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-11-16 20:01:19.079 +03:00 [INF] Executed action MappyApplication.Controllers.CitiesController.GetById (MappyApplication) in 0.1865ms
2025-11-16 20:01:19.079 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:19.079 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - 400 null application/problem+json; charset=utf-8 11.4161ms
2025-11-16 20:01:19.083 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - null null
2025-11-16 20:01:19.083 +03:00 [INF] CORS policy execution successful.
2025-11-16 20:01:19.095 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 20:01:19.096 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:19.096 +03:00 [INF] Route matched with {action = "GetById", controller = "Cities"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.cities.CitiesDto] GetById(Int32) on controller MappyApplication.Controllers.CitiesController (MappyApplication).
2025-11-16 20:01:19.096 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-11-16 20:01:19.096 +03:00 [INF] Executed action MappyApplication.Controllers.CitiesController.GetById (MappyApplication) in 0.1844ms
2025-11-16 20:01:19.096 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:19.096 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - 400 null application/problem+json; charset=utf-8 13.2927ms
2025-11-16 20:01:19.099 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - null null
2025-11-16 20:01:19.099 +03:00 [INF] CORS policy execution successful.
2025-11-16 20:01:19.110 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 20:01:19.110 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:19.110 +03:00 [INF] Route matched with {action = "GetById", controller = "Cities"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.cities.CitiesDto] GetById(Int32) on controller MappyApplication.Controllers.CitiesController (MappyApplication).
2025-11-16 20:01:19.111 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-11-16 20:01:19.111 +03:00 [INF] Executed action MappyApplication.Controllers.CitiesController.GetById (MappyApplication) in 0.28ms
2025-11-16 20:01:19.111 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:19.111 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - 400 null application/problem+json; charset=utf-8 11.3252ms
2025-11-16 20:01:19.115 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - null null
2025-11-16 20:01:19.115 +03:00 [INF] CORS policy execution successful.
2025-11-16 20:01:19.127 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 20:01:19.127 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:19.127 +03:00 [INF] Route matched with {action = "GetById", controller = "Cities"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.cities.CitiesDto] GetById(Int32) on controller MappyApplication.Controllers.CitiesController (MappyApplication).
2025-11-16 20:01:19.127 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-11-16 20:01:19.127 +03:00 [INF] Executed action MappyApplication.Controllers.CitiesController.GetById (MappyApplication) in 0.2563ms
2025-11-16 20:01:19.127 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:19.127 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - 400 null application/problem+json; charset=utf-8 12.6816ms
2025-11-16 20:01:19.131 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - null null
2025-11-16 20:01:19.131 +03:00 [INF] CORS policy execution successful.
2025-11-16 20:01:19.147 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 20:01:19.147 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:19.147 +03:00 [INF] Route matched with {action = "GetById", controller = "Cities"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.cities.CitiesDto] GetById(Int32) on controller MappyApplication.Controllers.CitiesController (MappyApplication).
2025-11-16 20:01:19.147 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-11-16 20:01:19.147 +03:00 [INF] Executed action MappyApplication.Controllers.CitiesController.GetById (MappyApplication) in 0.1826ms
2025-11-16 20:01:19.147 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:19.147 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - 400 null application/problem+json; charset=utf-8 16.4653ms
2025-11-16 20:01:19.152 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - null null
2025-11-16 20:01:19.152 +03:00 [INF] CORS policy execution successful.
2025-11-16 20:01:19.170 +03:00 [INF] Executed DbCommand (7ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 20:01:19.170 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:19.170 +03:00 [INF] Route matched with {action = "GetById", controller = "Cities"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.cities.CitiesDto] GetById(Int32) on controller MappyApplication.Controllers.CitiesController (MappyApplication).
2025-11-16 20:01:19.170 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-11-16 20:01:19.170 +03:00 [INF] Executed action MappyApplication.Controllers.CitiesController.GetById (MappyApplication) in 0.2082ms
2025-11-16 20:01:19.170 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:19.170 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - 400 null application/problem+json; charset=utf-8 18.1602ms
2025-11-16 20:01:19.174 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - null null
2025-11-16 20:01:19.174 +03:00 [INF] CORS policy execution successful.
2025-11-16 20:01:19.186 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 20:01:19.186 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:19.186 +03:00 [INF] Route matched with {action = "GetById", controller = "Cities"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.cities.CitiesDto] GetById(Int32) on controller MappyApplication.Controllers.CitiesController (MappyApplication).
2025-11-16 20:01:19.186 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-11-16 20:01:19.186 +03:00 [INF] Executed action MappyApplication.Controllers.CitiesController.GetById (MappyApplication) in 0.2051ms
2025-11-16 20:01:19.186 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:19.186 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - 400 null application/problem+json; charset=utf-8 12.2274ms
2025-11-16 20:01:19.191 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - null null
2025-11-16 20:01:19.191 +03:00 [INF] CORS policy execution successful.
2025-11-16 20:01:19.204 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 20:01:19.204 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:19.204 +03:00 [INF] Route matched with {action = "GetById", controller = "Cities"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.cities.CitiesDto] GetById(Int32) on controller MappyApplication.Controllers.CitiesController (MappyApplication).
2025-11-16 20:01:19.204 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-11-16 20:01:19.204 +03:00 [INF] Executed action MappyApplication.Controllers.CitiesController.GetById (MappyApplication) in 0.2109ms
2025-11-16 20:01:19.204 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:19.204 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - 400 null application/problem+json; charset=utf-8 13.5199ms
2025-11-16 20:01:19.209 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - null null
2025-11-16 20:01:19.209 +03:00 [INF] CORS policy execution successful.
2025-11-16 20:01:19.223 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 20:01:19.223 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:19.223 +03:00 [INF] Route matched with {action = "GetById", controller = "Cities"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.cities.CitiesDto] GetById(Int32) on controller MappyApplication.Controllers.CitiesController (MappyApplication).
2025-11-16 20:01:19.224 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-11-16 20:01:19.224 +03:00 [INF] Executed action MappyApplication.Controllers.CitiesController.GetById (MappyApplication) in 0.2816ms
2025-11-16 20:01:19.224 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:19.224 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - 400 null application/problem+json; charset=utf-8 15.1629ms
2025-11-16 20:01:19.228 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - null null
2025-11-16 20:01:19.228 +03:00 [INF] CORS policy execution successful.
2025-11-16 20:01:19.241 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 20:01:19.241 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:19.241 +03:00 [INF] Route matched with {action = "GetById", controller = "Cities"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.cities.CitiesDto] GetById(Int32) on controller MappyApplication.Controllers.CitiesController (MappyApplication).
2025-11-16 20:01:19.241 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-11-16 20:01:19.241 +03:00 [INF] Executed action MappyApplication.Controllers.CitiesController.GetById (MappyApplication) in 0.2351ms
2025-11-16 20:01:19.241 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:19.241 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - 400 null application/problem+json; charset=utf-8 12.8032ms
2025-11-16 20:01:19.245 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - null null
2025-11-16 20:01:19.245 +03:00 [INF] CORS policy execution successful.
2025-11-16 20:01:19.267 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 20:01:19.267 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:19.267 +03:00 [INF] Route matched with {action = "GetById", controller = "Cities"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.cities.CitiesDto] GetById(Int32) on controller MappyApplication.Controllers.CitiesController (MappyApplication).
2025-11-16 20:01:19.267 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-11-16 20:01:19.267 +03:00 [INF] Executed action MappyApplication.Controllers.CitiesController.GetById (MappyApplication) in 0.3025ms
2025-11-16 20:01:19.267 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:19.267 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - 400 null application/problem+json; charset=utf-8 21.9754ms
2025-11-16 20:01:19.274 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - null null
2025-11-16 20:01:19.274 +03:00 [INF] CORS policy execution successful.
2025-11-16 20:01:19.293 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 20:01:19.294 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:19.294 +03:00 [INF] Route matched with {action = "GetById", controller = "Cities"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.cities.CitiesDto] GetById(Int32) on controller MappyApplication.Controllers.CitiesController (MappyApplication).
2025-11-16 20:01:19.294 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-11-16 20:01:19.294 +03:00 [INF] Executed action MappyApplication.Controllers.CitiesController.GetById (MappyApplication) in 0.2805ms
2025-11-16 20:01:19.294 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:19.294 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - 400 null application/problem+json; charset=utf-8 20.2744ms
2025-11-16 20:01:19.299 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - null null
2025-11-16 20:01:19.299 +03:00 [INF] CORS policy execution successful.
2025-11-16 20:01:19.314 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 20:01:19.314 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:19.314 +03:00 [INF] Route matched with {action = "GetById", controller = "Cities"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.cities.CitiesDto] GetById(Int32) on controller MappyApplication.Controllers.CitiesController (MappyApplication).
2025-11-16 20:01:19.314 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-11-16 20:01:19.314 +03:00 [INF] Executed action MappyApplication.Controllers.CitiesController.GetById (MappyApplication) in 0.2565ms
2025-11-16 20:01:19.314 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:19.314 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - 400 null application/problem+json; charset=utf-8 15.5475ms
2025-11-16 20:01:19.319 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - null null
2025-11-16 20:01:19.319 +03:00 [INF] CORS policy execution successful.
2025-11-16 20:01:19.331 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 20:01:19.331 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:19.332 +03:00 [INF] Route matched with {action = "GetById", controller = "Cities"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.cities.CitiesDto] GetById(Int32) on controller MappyApplication.Controllers.CitiesController (MappyApplication).
2025-11-16 20:01:19.332 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-11-16 20:01:19.332 +03:00 [INF] Executed action MappyApplication.Controllers.CitiesController.GetById (MappyApplication) in 0.276ms
2025-11-16 20:01:19.332 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:19.332 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - 400 null application/problem+json; charset=utf-8 13.0487ms
2025-11-16 20:01:19.337 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - null null
2025-11-16 20:01:19.337 +03:00 [INF] CORS policy execution successful.
2025-11-16 20:01:19.348 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 20:01:19.348 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:19.348 +03:00 [INF] Route matched with {action = "GetById", controller = "Cities"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.cities.CitiesDto] GetById(Int32) on controller MappyApplication.Controllers.CitiesController (MappyApplication).
2025-11-16 20:01:19.349 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-11-16 20:01:19.349 +03:00 [INF] Executed action MappyApplication.Controllers.CitiesController.GetById (MappyApplication) in 0.2295ms
2025-11-16 20:01:19.349 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:19.349 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - 400 null application/problem+json; charset=utf-8 11.5737ms
2025-11-16 20:01:19.354 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - null null
2025-11-16 20:01:19.354 +03:00 [INF] CORS policy execution successful.
2025-11-16 20:01:19.365 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 20:01:19.365 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:19.365 +03:00 [INF] Route matched with {action = "GetById", controller = "Cities"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.cities.CitiesDto] GetById(Int32) on controller MappyApplication.Controllers.CitiesController (MappyApplication).
2025-11-16 20:01:19.365 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-11-16 20:01:19.365 +03:00 [INF] Executed action MappyApplication.Controllers.CitiesController.GetById (MappyApplication) in 0.2519ms
2025-11-16 20:01:19.365 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:19.365 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - 400 null application/problem+json; charset=utf-8 11.2049ms
2025-11-16 20:01:19.373 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - null null
2025-11-16 20:01:19.374 +03:00 [INF] CORS policy execution successful.
2025-11-16 20:01:19.386 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 20:01:19.387 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:19.387 +03:00 [INF] Route matched with {action = "GetById", controller = "Cities"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.cities.CitiesDto] GetById(Int32) on controller MappyApplication.Controllers.CitiesController (MappyApplication).
2025-11-16 20:01:19.387 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-11-16 20:01:19.387 +03:00 [INF] Executed action MappyApplication.Controllers.CitiesController.GetById (MappyApplication) in 0.506ms
2025-11-16 20:01:19.387 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:19.387 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - 400 null application/problem+json; charset=utf-8 14.0182ms
2025-11-16 20:01:19.394 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - null null
2025-11-16 20:01:19.394 +03:00 [INF] CORS policy execution successful.
2025-11-16 20:01:19.406 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 20:01:19.406 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:19.406 +03:00 [INF] Route matched with {action = "GetById", controller = "Cities"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.cities.CitiesDto] GetById(Int32) on controller MappyApplication.Controllers.CitiesController (MappyApplication).
2025-11-16 20:01:19.406 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-11-16 20:01:19.406 +03:00 [INF] Executed action MappyApplication.Controllers.CitiesController.GetById (MappyApplication) in 0.2208ms
2025-11-16 20:01:19.406 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:19.406 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - 400 null application/problem+json; charset=utf-8 11.8328ms
2025-11-16 20:01:19.411 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - null null
2025-11-16 20:01:19.411 +03:00 [INF] CORS policy execution successful.
2025-11-16 20:01:19.421 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 20:01:19.421 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:19.421 +03:00 [INF] Route matched with {action = "GetById", controller = "Cities"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.cities.CitiesDto] GetById(Int32) on controller MappyApplication.Controllers.CitiesController (MappyApplication).
2025-11-16 20:01:19.421 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-11-16 20:01:19.421 +03:00 [INF] Executed action MappyApplication.Controllers.CitiesController.GetById (MappyApplication) in 0.1985ms
2025-11-16 20:01:19.421 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:19.421 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - 400 null application/problem+json; charset=utf-8 10.6357ms
2025-11-16 20:01:19.425 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - null null
2025-11-16 20:01:19.425 +03:00 [INF] CORS policy execution successful.
2025-11-16 20:01:19.437 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 20:01:19.437 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:19.437 +03:00 [INF] Route matched with {action = "GetById", controller = "Cities"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.cities.CitiesDto] GetById(Int32) on controller MappyApplication.Controllers.CitiesController (MappyApplication).
2025-11-16 20:01:19.438 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-11-16 20:01:19.438 +03:00 [INF] Executed action MappyApplication.Controllers.CitiesController.GetById (MappyApplication) in 0.1879ms
2025-11-16 20:01:19.438 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:19.438 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - 400 null application/problem+json; charset=utf-8 12.2999ms
2025-11-16 20:01:19.442 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - null null
2025-11-16 20:01:19.442 +03:00 [INF] CORS policy execution successful.
2025-11-16 20:01:19.454 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 20:01:19.454 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:19.454 +03:00 [INF] Route matched with {action = "GetById", controller = "Cities"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.cities.CitiesDto] GetById(Int32) on controller MappyApplication.Controllers.CitiesController (MappyApplication).
2025-11-16 20:01:19.454 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-11-16 20:01:19.455 +03:00 [INF] Executed action MappyApplication.Controllers.CitiesController.GetById (MappyApplication) in 0.2093ms
2025-11-16 20:01:19.455 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:19.455 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - 400 null application/problem+json; charset=utf-8 12.5696ms
2025-11-16 20:01:19.460 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - null null
2025-11-16 20:01:19.460 +03:00 [INF] CORS policy execution successful.
2025-11-16 20:01:19.470 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 20:01:19.470 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:19.470 +03:00 [INF] Route matched with {action = "GetById", controller = "Cities"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.cities.CitiesDto] GetById(Int32) on controller MappyApplication.Controllers.CitiesController (MappyApplication).
2025-11-16 20:01:19.470 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-11-16 20:01:19.470 +03:00 [INF] Executed action MappyApplication.Controllers.CitiesController.GetById (MappyApplication) in 0.269ms
2025-11-16 20:01:19.470 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:19.470 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - 400 null application/problem+json; charset=utf-8 10.4021ms
2025-11-16 20:01:19.475 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - null null
2025-11-16 20:01:19.475 +03:00 [INF] CORS policy execution successful.
2025-11-16 20:01:19.490 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 20:01:19.490 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:19.490 +03:00 [INF] Route matched with {action = "GetById", controller = "Cities"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.cities.CitiesDto] GetById(Int32) on controller MappyApplication.Controllers.CitiesController (MappyApplication).
2025-11-16 20:01:19.490 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-11-16 20:01:19.490 +03:00 [INF] Executed action MappyApplication.Controllers.CitiesController.GetById (MappyApplication) in 0.2175ms
2025-11-16 20:01:19.490 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:19.490 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - 400 null application/problem+json; charset=utf-8 15.513ms
2025-11-16 20:01:19.494 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - null null
2025-11-16 20:01:19.494 +03:00 [INF] CORS policy execution successful.
2025-11-16 20:01:19.503 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 20:01:19.503 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:19.503 +03:00 [INF] Route matched with {action = "GetById", controller = "Cities"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.cities.CitiesDto] GetById(Int32) on controller MappyApplication.Controllers.CitiesController (MappyApplication).
2025-11-16 20:01:19.503 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-11-16 20:01:19.503 +03:00 [INF] Executed action MappyApplication.Controllers.CitiesController.GetById (MappyApplication) in 0.2351ms
2025-11-16 20:01:19.503 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:19.503 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - 400 null application/problem+json; charset=utf-8 9.0618ms
2025-11-16 20:01:19.508 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - null null
2025-11-16 20:01:19.508 +03:00 [INF] CORS policy execution successful.
2025-11-16 20:01:19.520 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 20:01:19.520 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:19.520 +03:00 [INF] Route matched with {action = "GetById", controller = "Cities"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.cities.CitiesDto] GetById(Int32) on controller MappyApplication.Controllers.CitiesController (MappyApplication).
2025-11-16 20:01:19.520 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-11-16 20:01:19.521 +03:00 [INF] Executed action MappyApplication.Controllers.CitiesController.GetById (MappyApplication) in 0.1991ms
2025-11-16 20:01:19.521 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:19.521 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - 400 null application/problem+json; charset=utf-8 12.872ms
2025-11-16 20:01:19.525 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - null null
2025-11-16 20:01:19.525 +03:00 [INF] CORS policy execution successful.
2025-11-16 20:01:19.537 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 20:01:19.537 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:19.537 +03:00 [INF] Route matched with {action = "GetById", controller = "Cities"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.cities.CitiesDto] GetById(Int32) on controller MappyApplication.Controllers.CitiesController (MappyApplication).
2025-11-16 20:01:19.538 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-11-16 20:01:19.538 +03:00 [INF] Executed action MappyApplication.Controllers.CitiesController.GetById (MappyApplication) in 0.2409ms
2025-11-16 20:01:19.538 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:19.538 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - 400 null application/problem+json; charset=utf-8 12.9356ms
2025-11-16 20:01:19.542 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - null null
2025-11-16 20:01:19.543 +03:00 [INF] CORS policy execution successful.
2025-11-16 20:01:19.554 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 20:01:19.554 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:19.554 +03:00 [INF] Route matched with {action = "GetById", controller = "Cities"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.cities.CitiesDto] GetById(Int32) on controller MappyApplication.Controllers.CitiesController (MappyApplication).
2025-11-16 20:01:19.554 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-11-16 20:01:19.554 +03:00 [INF] Executed action MappyApplication.Controllers.CitiesController.GetById (MappyApplication) in 0.2063ms
2025-11-16 20:01:19.554 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:19.554 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - 400 null application/problem+json; charset=utf-8 11.7583ms
2025-11-16 20:01:19.559 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - null null
2025-11-16 20:01:19.559 +03:00 [INF] CORS policy execution successful.
2025-11-16 20:01:19.578 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 20:01:19.579 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:19.579 +03:00 [INF] Route matched with {action = "GetById", controller = "Cities"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.cities.CitiesDto] GetById(Int32) on controller MappyApplication.Controllers.CitiesController (MappyApplication).
2025-11-16 20:01:19.579 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-11-16 20:01:19.579 +03:00 [INF] Executed action MappyApplication.Controllers.CitiesController.GetById (MappyApplication) in 0.3249ms
2025-11-16 20:01:19.579 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:19.579 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - 400 null application/problem+json; charset=utf-8 20.3833ms
2025-11-16 20:01:19.584 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - null null
2025-11-16 20:01:19.586 +03:00 [INF] CORS policy execution successful.
2025-11-16 20:01:19.600 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 20:01:19.600 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:19.600 +03:00 [INF] Route matched with {action = "GetById", controller = "Cities"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.cities.CitiesDto] GetById(Int32) on controller MappyApplication.Controllers.CitiesController (MappyApplication).
2025-11-16 20:01:19.601 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-11-16 20:01:19.601 +03:00 [INF] Executed action MappyApplication.Controllers.CitiesController.GetById (MappyApplication) in 0.3397ms
2025-11-16 20:01:19.601 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:19.601 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - 400 null application/problem+json; charset=utf-8 17.2262ms
2025-11-16 20:01:19.607 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - null null
2025-11-16 20:01:19.608 +03:00 [INF] CORS policy execution successful.
2025-11-16 20:01:19.625 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 20:01:19.626 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:19.626 +03:00 [INF] Route matched with {action = "GetById", controller = "Cities"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.cities.CitiesDto] GetById(Int32) on controller MappyApplication.Controllers.CitiesController (MappyApplication).
2025-11-16 20:01:19.627 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-11-16 20:01:19.627 +03:00 [INF] Executed action MappyApplication.Controllers.CitiesController.GetById (MappyApplication) in 0.6901ms
2025-11-16 20:01:19.627 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:19.627 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - 400 null application/problem+json; charset=utf-8 19.4882ms
2025-11-16 20:01:19.632 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - null null
2025-11-16 20:01:19.632 +03:00 [INF] CORS policy execution successful.
2025-11-16 20:01:19.665 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 20:01:19.665 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:19.665 +03:00 [INF] Route matched with {action = "GetById", controller = "Cities"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.cities.CitiesDto] GetById(Int32) on controller MappyApplication.Controllers.CitiesController (MappyApplication).
2025-11-16 20:01:19.665 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-11-16 20:01:19.665 +03:00 [INF] Executed action MappyApplication.Controllers.CitiesController.GetById (MappyApplication) in 0.3495ms
2025-11-16 20:01:19.665 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:19.666 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - 400 null application/problem+json; charset=utf-8 33.1549ms
2025-11-16 20:01:19.676 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - null null
2025-11-16 20:01:19.676 +03:00 [INF] CORS policy execution successful.
2025-11-16 20:01:19.707 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 20:01:19.707 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:19.707 +03:00 [INF] Route matched with {action = "GetById", controller = "Cities"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.cities.CitiesDto] GetById(Int32) on controller MappyApplication.Controllers.CitiesController (MappyApplication).
2025-11-16 20:01:19.707 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-11-16 20:01:19.707 +03:00 [INF] Executed action MappyApplication.Controllers.CitiesController.GetById (MappyApplication) in 0.1989ms
2025-11-16 20:01:19.707 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:19.707 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - 400 null application/problem+json; charset=utf-8 31.5011ms
2025-11-16 20:01:19.712 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - null null
2025-11-16 20:01:19.712 +03:00 [INF] CORS policy execution successful.
2025-11-16 20:01:19.722 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 20:01:19.723 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:19.723 +03:00 [INF] Route matched with {action = "GetById", controller = "Cities"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.cities.CitiesDto] GetById(Int32) on controller MappyApplication.Controllers.CitiesController (MappyApplication).
2025-11-16 20:01:19.723 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-11-16 20:01:19.723 +03:00 [INF] Executed action MappyApplication.Controllers.CitiesController.GetById (MappyApplication) in 0.4212ms
2025-11-16 20:01:19.723 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:01:19.723 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - 400 null application/problem+json; charset=utf-8 11.5109ms
2025-11-16 20:01:23.123 +03:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:8080/api/v1/auth/refresh-token - null null
2025-11-16 20:01:23.124 +03:00 [INF] CORS policy execution successful.
2025-11-16 20:01:23.124 +03:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:8080/api/v1/auth/refresh-token - 204 null null 2.0982ms
2025-11-16 20:01:23.125 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:8080/api/v1/auth/refresh-token - null 0
2025-11-16 20:01:23.126 +03:00 [INF] CORS policy execution successful.
2025-11-16 20:01:23.168 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 20:01:23.169 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication)'
2025-11-16 20:01:23.170 +03:00 [INF] Route matched with {action = "RefreshToken", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.user.AuthResponse] RefreshToken() on controller MappyApplication.Controllers.AuthController (MappyApplication).
2025-11-16 20:01:23.176 +03:00 [INF] Executed DbCommand (5ms) [Parameters=[@__refreshToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`RefreshToken` = @__refreshToken_0
LIMIT 2
2025-11-16 20:01:23.185 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`FirstName`, `a`.`LastName`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`
FROM `AspNetUsers` AS `a`
WHERE `a`.`Id` = @__p_0
LIMIT 1
2025-11-16 20:01:23.205 +03:00 [INF] Executed DbCommand (4ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']

        UPDATE TOKENS
        SET Revoked = true, Expired = true
        WHERE UserId = @p0
          AND DeviceId = @p1
          AND Revoked = false
          AND Expired = false
2025-11-16 20:01:23.210 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a0`.`Name`
FROM `AspNetUserRoles` AS `a`
INNER JOIN `AspNetRoles` AS `a0` ON `a`.`RoleId` = `a0`.`Id`
WHERE `a`.`UserId` = @__userId_0
2025-11-16 20:01:23.216 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ClaimType`, `a`.`ClaimValue`, `a`.`UserId`
FROM `AspNetUserClaims` AS `a`
WHERE `a`.`UserId` = @__user_Id_0
2025-11-16 20:01:23.222 +03:00 [INF] Executed DbCommand (5ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a0`.`Name`
FROM `AspNetUserRoles` AS `a`
INNER JOIN `AspNetRoles` AS `a0` ON `a`.`RoleId` = `a0`.`Id`
WHERE `a`.`UserId` = @__userId_0
2025-11-16 20:01:23.224 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ClaimType`, `a`.`ClaimValue`, `a`.`UserId`
FROM `AspNetUserClaims` AS `a`
WHERE `a`.`UserId` = @__user_Id_0
2025-11-16 20:01:23.236 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (DbType = DateTime), @p2='?' (Size = 4000), @p3='?' (DbType = Boolean), @p4='?' (Size = 4000), @p5='?' (DbType = Boolean), @p6='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO `Tokens` (`AccessToken`, `CreatedAt`, `DeviceId`, `Expired`, `RefreshToken`, `Revoked`, `UserId`)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6);
SELECT `Id`
FROM `Tokens`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();
2025-11-16 20:01:23.238 +03:00 [INF] Added Token MappyApplication.Data.Token
2025-11-16 20:01:23.243 +03:00 [INF] Executed DbCommand (4ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessFailedCount`, `t`.`ConcurrencyStamp`, `t`.`Email`, `t`.`EmailConfirmed`, `t`.`FirstName`, `t`.`LastName`, `t`.`LockoutEnabled`, `t`.`LockoutEnd`, `t`.`NormalizedEmail`, `t`.`NormalizedUserName`, `t`.`PasswordHash`, `t`.`PhoneNumber`, `t`.`PhoneNumberConfirmed`, `t`.`SecurityStamp`, `t`.`TwoFactorEnabled`, `t`.`UserName`, `w`.`Id`, `w`.`Cadence`, `w`.`CityName`, `w`.`Coords`, `w`.`Date`, `w`.`Distance`, `w`.`Duration`, `w`.`Emoji`, `w`.`Pace`, `w`.`Type`, `w`.`UserId`, `c`.`Id`, `c`.`CityName`, `c`.`Country`, `c`.`Date`, `c`.`Emoji`, `c`.`Lat`, `c`.`Lng`, `c`.`Notes`, `c`.`UserId`
FROM (
    SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`FirstName`, `a`.`LastName`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`
    FROM `AspNetUsers` AS `a`
    WHERE `a`.`Id` = @__user_Id_0
    LIMIT 2
) AS `t`
LEFT JOIN `Workouts` AS `w` ON `t`.`Id` = `w`.`UserId`
LEFT JOIN `Cities` AS `c` ON `t`.`Id` = `c`.`UserId`
ORDER BY `t`.`Id`, `w`.`Id`
2025-11-16 20:01:23.244 +03:00 [INF] Executing ObjectResult, writing value of type 'MappyApplication.Models.user.AuthResponse'.
2025-11-16 20:01:23.244 +03:00 [INF] Executed action MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication) in 74.0736ms
2025-11-16 20:01:23.244 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication)'
2025-11-16 20:01:23.245 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:8080/api/v1/auth/refresh-token - 200 null application/json; charset=utf-8 119.2353ms
2025-11-16 20:03:29.522 +03:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:8080/api/v1/cities/[object Object] - null null
2025-11-16 20:03:29.522 +03:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:8080/api/v1/cities/[object Object] - null null
2025-11-16 20:03:29.528 +03:00 [INF] CORS policy execution successful.
2025-11-16 20:03:29.529 +03:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:8080/api/v1/cities/[object Object] - 204 null null 6.6127ms
2025-11-16 20:03:29.529 +03:00 [INF] CORS policy execution successful.
2025-11-16 20:03:29.529 +03:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:8080/api/v1/cities/[object Object] - 204 null null 6.9175ms
2025-11-16 20:03:29.531 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - null null
2025-11-16 20:03:29.531 +03:00 [INF] CORS policy execution successful.
2025-11-16 20:03:29.587 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 20:03:29.588 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:03:29.588 +03:00 [INF] Route matched with {action = "GetById", controller = "Cities"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.cities.CitiesDto] GetById(Int32) on controller MappyApplication.Controllers.CitiesController (MappyApplication).
2025-11-16 20:03:29.588 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-11-16 20:03:29.589 +03:00 [INF] Executed action MappyApplication.Controllers.CitiesController.GetById (MappyApplication) in 0.8138ms
2025-11-16 20:03:29.589 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:03:29.589 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - 400 null application/problem+json; charset=utf-8 57.9653ms
2025-11-16 20:03:29.590 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - null null
2025-11-16 20:03:29.590 +03:00 [INF] CORS policy execution successful.
2025-11-16 20:03:29.603 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 20:03:29.603 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:03:29.603 +03:00 [INF] Route matched with {action = "GetById", controller = "Cities"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.cities.CitiesDto] GetById(Int32) on controller MappyApplication.Controllers.CitiesController (MappyApplication).
2025-11-16 20:03:29.603 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-11-16 20:03:29.603 +03:00 [INF] Executed action MappyApplication.Controllers.CitiesController.GetById (MappyApplication) in 0.2204ms
2025-11-16 20:03:29.603 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:03:29.603 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - 400 null application/problem+json; charset=utf-8 13.418ms
2025-11-16 20:03:36.060 +03:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:8080/api/v1/auth/refresh-token - null null
2025-11-16 20:03:36.060 +03:00 [INF] CORS policy execution successful.
2025-11-16 20:03:36.061 +03:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:8080/api/v1/auth/refresh-token - 204 null null 5.2067ms
2025-11-16 20:03:36.063 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:8080/api/v1/auth/refresh-token - null 0
2025-11-16 20:03:36.063 +03:00 [INF] CORS policy execution successful.
2025-11-16 20:03:36.080 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 20:03:36.080 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication)'
2025-11-16 20:03:36.080 +03:00 [INF] Route matched with {action = "RefreshToken", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.user.AuthResponse] RefreshToken() on controller MappyApplication.Controllers.AuthController (MappyApplication).
2025-11-16 20:03:36.083 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__refreshToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`RefreshToken` = @__refreshToken_0
LIMIT 2
2025-11-16 20:03:36.089 +03:00 [INF] Executed DbCommand (4ms) [Parameters=[@__p_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`FirstName`, `a`.`LastName`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`
FROM `AspNetUsers` AS `a`
WHERE `a`.`Id` = @__p_0
LIMIT 1
2025-11-16 20:03:36.097 +03:00 [INF] Executed DbCommand (4ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']

        UPDATE TOKENS
        SET Revoked = true, Expired = true
        WHERE UserId = @p0
          AND DeviceId = @p1
          AND Revoked = false
          AND Expired = false
2025-11-16 20:03:36.101 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a0`.`Name`
FROM `AspNetUserRoles` AS `a`
INNER JOIN `AspNetRoles` AS `a0` ON `a`.`RoleId` = `a0`.`Id`
WHERE `a`.`UserId` = @__userId_0
2025-11-16 20:03:36.102 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ClaimType`, `a`.`ClaimValue`, `a`.`UserId`
FROM `AspNetUserClaims` AS `a`
WHERE `a`.`UserId` = @__user_Id_0
2025-11-16 20:03:36.104 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a0`.`Name`
FROM `AspNetUserRoles` AS `a`
INNER JOIN `AspNetRoles` AS `a0` ON `a`.`RoleId` = `a0`.`Id`
WHERE `a`.`UserId` = @__userId_0
2025-11-16 20:03:36.105 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ClaimType`, `a`.`ClaimValue`, `a`.`UserId`
FROM `AspNetUserClaims` AS `a`
WHERE `a`.`UserId` = @__user_Id_0
2025-11-16 20:03:36.109 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (DbType = DateTime), @p2='?' (Size = 4000), @p3='?' (DbType = Boolean), @p4='?' (Size = 4000), @p5='?' (DbType = Boolean), @p6='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO `Tokens` (`AccessToken`, `CreatedAt`, `DeviceId`, `Expired`, `RefreshToken`, `Revoked`, `UserId`)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6);
SELECT `Id`
FROM `Tokens`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();
2025-11-16 20:03:36.109 +03:00 [INF] Added Token MappyApplication.Data.Token
2025-11-16 20:03:36.114 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessFailedCount`, `t`.`ConcurrencyStamp`, `t`.`Email`, `t`.`EmailConfirmed`, `t`.`FirstName`, `t`.`LastName`, `t`.`LockoutEnabled`, `t`.`LockoutEnd`, `t`.`NormalizedEmail`, `t`.`NormalizedUserName`, `t`.`PasswordHash`, `t`.`PhoneNumber`, `t`.`PhoneNumberConfirmed`, `t`.`SecurityStamp`, `t`.`TwoFactorEnabled`, `t`.`UserName`, `w`.`Id`, `w`.`Cadence`, `w`.`CityName`, `w`.`Coords`, `w`.`Date`, `w`.`Distance`, `w`.`Duration`, `w`.`Emoji`, `w`.`Pace`, `w`.`Type`, `w`.`UserId`, `c`.`Id`, `c`.`CityName`, `c`.`Country`, `c`.`Date`, `c`.`Emoji`, `c`.`Lat`, `c`.`Lng`, `c`.`Notes`, `c`.`UserId`
FROM (
    SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`FirstName`, `a`.`LastName`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`
    FROM `AspNetUsers` AS `a`
    WHERE `a`.`Id` = @__user_Id_0
    LIMIT 2
) AS `t`
LEFT JOIN `Workouts` AS `w` ON `t`.`Id` = `w`.`UserId`
LEFT JOIN `Cities` AS `c` ON `t`.`Id` = `c`.`UserId`
ORDER BY `t`.`Id`, `w`.`Id`
2025-11-16 20:03:36.118 +03:00 [INF] Executing ObjectResult, writing value of type 'MappyApplication.Models.user.AuthResponse'.
2025-11-16 20:03:36.118 +03:00 [INF] Executed action MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication) in 37.9761ms
2025-11-16 20:03:36.118 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication)'
2025-11-16 20:03:36.119 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:8080/api/v1/auth/refresh-token - 200 null application/json; charset=utf-8 55.9553ms
2025-11-16 20:03:36.153 +03:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:8080/api/v1/cities/[object Object] - null null
2025-11-16 20:03:36.162 +03:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:8080/api/v1/cities/[object Object] - null null
2025-11-16 20:03:36.162 +03:00 [INF] CORS policy execution successful.
2025-11-16 20:03:36.162 +03:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:8080/api/v1/cities/[object Object] - 204 null null 0.1829ms
2025-11-16 20:03:36.162 +03:00 [INF] CORS policy execution successful.
2025-11-16 20:03:36.162 +03:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:8080/api/v1/cities/[object Object] - 204 null null 8.947ms
2025-11-16 20:03:36.165 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - null null
2025-11-16 20:03:36.165 +03:00 [INF] CORS policy execution successful.
2025-11-16 20:03:36.178 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 20:03:36.178 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:03:36.178 +03:00 [INF] Route matched with {action = "GetById", controller = "Cities"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.cities.CitiesDto] GetById(Int32) on controller MappyApplication.Controllers.CitiesController (MappyApplication).
2025-11-16 20:03:36.178 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-11-16 20:03:36.178 +03:00 [INF] Executed action MappyApplication.Controllers.CitiesController.GetById (MappyApplication) in 0.2787ms
2025-11-16 20:03:36.178 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:03:36.178 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - 400 null application/problem+json; charset=utf-8 13.6186ms
2025-11-16 20:03:36.179 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - null null
2025-11-16 20:03:36.179 +03:00 [INF] CORS policy execution successful.
2025-11-16 20:03:36.189 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 20:03:36.190 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:03:36.190 +03:00 [INF] Route matched with {action = "GetById", controller = "Cities"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.cities.CitiesDto] GetById(Int32) on controller MappyApplication.Controllers.CitiesController (MappyApplication).
2025-11-16 20:03:36.190 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-11-16 20:03:36.190 +03:00 [INF] Executed action MappyApplication.Controllers.CitiesController.GetById (MappyApplication) in 0.2708ms
2025-11-16 20:03:36.190 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:03:36.190 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - 400 null application/problem+json; charset=utf-8 11.0207ms
2025-11-16 20:04:13.833 +03:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:8080/api/v1/auth/refresh-token - null null
2025-11-16 20:04:13.855 +03:00 [INF] CORS policy execution successful.
2025-11-16 20:04:13.856 +03:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:8080/api/v1/auth/refresh-token - 204 null null 23.0212ms
2025-11-16 20:04:13.873 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:8080/api/v1/auth/refresh-token - null 0
2025-11-16 20:04:13.873 +03:00 [INF] CORS policy execution successful.
2025-11-16 20:04:13.949 +03:00 [INF] Executed DbCommand (5ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 20:04:13.954 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication)'
2025-11-16 20:04:13.955 +03:00 [INF] Route matched with {action = "RefreshToken", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.user.AuthResponse] RefreshToken() on controller MappyApplication.Controllers.AuthController (MappyApplication).
2025-11-16 20:04:13.987 +03:00 [INF] Executed DbCommand (8ms) [Parameters=[@__refreshToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`RefreshToken` = @__refreshToken_0
LIMIT 2
2025-11-16 20:04:14.012 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[@__p_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`FirstName`, `a`.`LastName`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`
FROM `AspNetUsers` AS `a`
WHERE `a`.`Id` = @__p_0
LIMIT 1
2025-11-16 20:04:14.024 +03:00 [INF] Executed DbCommand (7ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']

        UPDATE TOKENS
        SET Revoked = true, Expired = true
        WHERE UserId = @p0
          AND DeviceId = @p1
          AND Revoked = false
          AND Expired = false
2025-11-16 20:04:14.028 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a0`.`Name`
FROM `AspNetUserRoles` AS `a`
INNER JOIN `AspNetRoles` AS `a0` ON `a`.`RoleId` = `a0`.`Id`
WHERE `a`.`UserId` = @__userId_0
2025-11-16 20:04:14.043 +03:00 [INF] Executed DbCommand (8ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ClaimType`, `a`.`ClaimValue`, `a`.`UserId`
FROM `AspNetUserClaims` AS `a`
WHERE `a`.`UserId` = @__user_Id_0
2025-11-16 20:04:14.049 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a0`.`Name`
FROM `AspNetUserRoles` AS `a`
INNER JOIN `AspNetRoles` AS `a0` ON `a`.`RoleId` = `a0`.`Id`
WHERE `a`.`UserId` = @__userId_0
2025-11-16 20:04:14.051 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ClaimType`, `a`.`ClaimValue`, `a`.`UserId`
FROM `AspNetUserClaims` AS `a`
WHERE `a`.`UserId` = @__user_Id_0
2025-11-16 20:04:14.058 +03:00 [INF] Executed DbCommand (5ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (DbType = DateTime), @p2='?' (Size = 4000), @p3='?' (DbType = Boolean), @p4='?' (Size = 4000), @p5='?' (DbType = Boolean), @p6='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO `Tokens` (`AccessToken`, `CreatedAt`, `DeviceId`, `Expired`, `RefreshToken`, `Revoked`, `UserId`)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6);
SELECT `Id`
FROM `Tokens`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();
2025-11-16 20:04:14.059 +03:00 [INF] Added Token MappyApplication.Data.Token
2025-11-16 20:04:14.061 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessFailedCount`, `t`.`ConcurrencyStamp`, `t`.`Email`, `t`.`EmailConfirmed`, `t`.`FirstName`, `t`.`LastName`, `t`.`LockoutEnabled`, `t`.`LockoutEnd`, `t`.`NormalizedEmail`, `t`.`NormalizedUserName`, `t`.`PasswordHash`, `t`.`PhoneNumber`, `t`.`PhoneNumberConfirmed`, `t`.`SecurityStamp`, `t`.`TwoFactorEnabled`, `t`.`UserName`, `w`.`Id`, `w`.`Cadence`, `w`.`CityName`, `w`.`Coords`, `w`.`Date`, `w`.`Distance`, `w`.`Duration`, `w`.`Emoji`, `w`.`Pace`, `w`.`Type`, `w`.`UserId`, `c`.`Id`, `c`.`CityName`, `c`.`Country`, `c`.`Date`, `c`.`Emoji`, `c`.`Lat`, `c`.`Lng`, `c`.`Notes`, `c`.`UserId`
FROM (
    SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`FirstName`, `a`.`LastName`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`
    FROM `AspNetUsers` AS `a`
    WHERE `a`.`Id` = @__user_Id_0
    LIMIT 2
) AS `t`
LEFT JOIN `Workouts` AS `w` ON `t`.`Id` = `w`.`UserId`
LEFT JOIN `Cities` AS `c` ON `t`.`Id` = `c`.`UserId`
ORDER BY `t`.`Id`, `w`.`Id`
2025-11-16 20:04:14.063 +03:00 [INF] Executing ObjectResult, writing value of type 'MappyApplication.Models.user.AuthResponse'.
2025-11-16 20:04:14.064 +03:00 [INF] Executed action MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication) in 108.7441ms
2025-11-16 20:04:14.064 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication)'
2025-11-16 20:04:14.064 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:8080/api/v1/auth/refresh-token - 200 null application/json; charset=utf-8 191.2908ms
2025-11-16 20:04:14.093 +03:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:8080/api/v1/cities/[object Object] - null null
2025-11-16 20:04:14.094 +03:00 [INF] CORS policy execution successful.
2025-11-16 20:04:14.094 +03:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:8080/api/v1/cities/[object Object] - 204 null null 0.3597ms
2025-11-16 20:04:14.094 +03:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:8080/api/v1/cities/[object Object] - null null
2025-11-16 20:04:14.094 +03:00 [INF] CORS policy execution successful.
2025-11-16 20:04:14.094 +03:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:8080/api/v1/cities/[object Object] - 204 null null 0.54ms
2025-11-16 20:04:14.099 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - null null
2025-11-16 20:04:14.100 +03:00 [INF] CORS policy execution successful.
2025-11-16 20:04:14.117 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 20:04:14.117 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:04:14.117 +03:00 [INF] Route matched with {action = "GetById", controller = "Cities"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.cities.CitiesDto] GetById(Int32) on controller MappyApplication.Controllers.CitiesController (MappyApplication).
2025-11-16 20:04:14.118 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-11-16 20:04:14.118 +03:00 [INF] Executed action MappyApplication.Controllers.CitiesController.GetById (MappyApplication) in 0.8324ms
2025-11-16 20:04:14.118 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:04:14.118 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - 400 null application/problem+json; charset=utf-8 18.8785ms
2025-11-16 20:04:14.120 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - null null
2025-11-16 20:04:14.120 +03:00 [INF] CORS policy execution successful.
2025-11-16 20:04:14.136 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 20:04:14.136 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:04:14.136 +03:00 [INF] Route matched with {action = "GetById", controller = "Cities"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.cities.CitiesDto] GetById(Int32) on controller MappyApplication.Controllers.CitiesController (MappyApplication).
2025-11-16 20:04:14.137 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-11-16 20:04:14.137 +03:00 [INF] Executed action MappyApplication.Controllers.CitiesController.GetById (MappyApplication) in 0.396ms
2025-11-16 20:04:14.137 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:04:14.137 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - 400 null application/problem+json; charset=utf-8 17.3291ms
2025-11-16 20:04:41.426 +03:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:8080/api/v1/cities/[object Object] - null null
2025-11-16 20:04:41.426 +03:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:8080/api/v1/cities/[object Object] - null null
2025-11-16 20:04:41.434 +03:00 [INF] CORS policy execution successful.
2025-11-16 20:04:41.434 +03:00 [INF] CORS policy execution successful.
2025-11-16 20:04:41.434 +03:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:8080/api/v1/cities/[object Object] - 204 null null 7.7872ms
2025-11-16 20:04:41.434 +03:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:8080/api/v1/cities/[object Object] - 204 null null 7.7452ms
2025-11-16 20:04:41.443 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - null null
2025-11-16 20:04:41.444 +03:00 [INF] CORS policy execution successful.
2025-11-16 20:04:41.469 +03:00 [INF] Executed DbCommand (4ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 20:04:41.471 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:04:41.471 +03:00 [INF] Route matched with {action = "GetById", controller = "Cities"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.cities.CitiesDto] GetById(Int32) on controller MappyApplication.Controllers.CitiesController (MappyApplication).
2025-11-16 20:04:41.473 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-11-16 20:04:41.474 +03:00 [INF] Executed action MappyApplication.Controllers.CitiesController.GetById (MappyApplication) in 2.5737ms
2025-11-16 20:04:41.474 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:04:41.474 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - 400 null application/problem+json; charset=utf-8 30.8267ms
2025-11-16 20:04:41.476 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - null null
2025-11-16 20:04:41.476 +03:00 [INF] CORS policy execution successful.
2025-11-16 20:04:41.494 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 20:04:41.494 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:04:41.494 +03:00 [INF] Route matched with {action = "GetById", controller = "Cities"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.cities.CitiesDto] GetById(Int32) on controller MappyApplication.Controllers.CitiesController (MappyApplication).
2025-11-16 20:04:41.495 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-11-16 20:04:41.495 +03:00 [INF] Executed action MappyApplication.Controllers.CitiesController.GetById (MappyApplication) in 0.2205ms
2025-11-16 20:04:41.495 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:04:41.495 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:8080/api/v1/cities/[object Object] - 400 null application/problem+json; charset=utf-8 18.8231ms
2025-11-16 20:04:52.422 +03:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:8080/api/v1/auth/refresh-token - null null
2025-11-16 20:04:52.423 +03:00 [INF] CORS policy execution successful.
2025-11-16 20:04:52.424 +03:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:8080/api/v1/auth/refresh-token - 204 null null 1.6311ms
2025-11-16 20:04:52.427 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:8080/api/v1/auth/refresh-token - null 0
2025-11-16 20:04:52.427 +03:00 [INF] CORS policy execution successful.
2025-11-16 20:04:52.477 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 20:04:52.477 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication)'
2025-11-16 20:04:52.477 +03:00 [INF] Route matched with {action = "RefreshToken", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.user.AuthResponse] RefreshToken() on controller MappyApplication.Controllers.AuthController (MappyApplication).
2025-11-16 20:04:52.481 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[@__refreshToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`RefreshToken` = @__refreshToken_0
LIMIT 2
2025-11-16 20:04:52.490 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__p_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`FirstName`, `a`.`LastName`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`
FROM `AspNetUsers` AS `a`
WHERE `a`.`Id` = @__p_0
LIMIT 1
2025-11-16 20:04:52.496 +03:00 [INF] Executed DbCommand (4ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']

        UPDATE TOKENS
        SET Revoked = true, Expired = true
        WHERE UserId = @p0
          AND DeviceId = @p1
          AND Revoked = false
          AND Expired = false
2025-11-16 20:04:52.498 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a0`.`Name`
FROM `AspNetUserRoles` AS `a`
INNER JOIN `AspNetRoles` AS `a0` ON `a`.`RoleId` = `a0`.`Id`
WHERE `a`.`UserId` = @__userId_0
2025-11-16 20:04:52.500 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ClaimType`, `a`.`ClaimValue`, `a`.`UserId`
FROM `AspNetUserClaims` AS `a`
WHERE `a`.`UserId` = @__user_Id_0
2025-11-16 20:04:52.501 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a0`.`Name`
FROM `AspNetUserRoles` AS `a`
INNER JOIN `AspNetRoles` AS `a0` ON `a`.`RoleId` = `a0`.`Id`
WHERE `a`.`UserId` = @__userId_0
2025-11-16 20:04:52.502 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ClaimType`, `a`.`ClaimValue`, `a`.`UserId`
FROM `AspNetUserClaims` AS `a`
WHERE `a`.`UserId` = @__user_Id_0
2025-11-16 20:04:52.504 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (DbType = DateTime), @p2='?' (Size = 4000), @p3='?' (DbType = Boolean), @p4='?' (Size = 4000), @p5='?' (DbType = Boolean), @p6='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO `Tokens` (`AccessToken`, `CreatedAt`, `DeviceId`, `Expired`, `RefreshToken`, `Revoked`, `UserId`)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6);
SELECT `Id`
FROM `Tokens`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();
2025-11-16 20:04:52.505 +03:00 [INF] Added Token MappyApplication.Data.Token
2025-11-16 20:04:52.507 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessFailedCount`, `t`.`ConcurrencyStamp`, `t`.`Email`, `t`.`EmailConfirmed`, `t`.`FirstName`, `t`.`LastName`, `t`.`LockoutEnabled`, `t`.`LockoutEnd`, `t`.`NormalizedEmail`, `t`.`NormalizedUserName`, `t`.`PasswordHash`, `t`.`PhoneNumber`, `t`.`PhoneNumberConfirmed`, `t`.`SecurityStamp`, `t`.`TwoFactorEnabled`, `t`.`UserName`, `w`.`Id`, `w`.`Cadence`, `w`.`CityName`, `w`.`Coords`, `w`.`Date`, `w`.`Distance`, `w`.`Duration`, `w`.`Emoji`, `w`.`Pace`, `w`.`Type`, `w`.`UserId`, `c`.`Id`, `c`.`CityName`, `c`.`Country`, `c`.`Date`, `c`.`Emoji`, `c`.`Lat`, `c`.`Lng`, `c`.`Notes`, `c`.`UserId`
FROM (
    SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`FirstName`, `a`.`LastName`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`
    FROM `AspNetUsers` AS `a`
    WHERE `a`.`Id` = @__user_Id_0
    LIMIT 2
) AS `t`
LEFT JOIN `Workouts` AS `w` ON `t`.`Id` = `w`.`UserId`
LEFT JOIN `Cities` AS `c` ON `t`.`Id` = `c`.`UserId`
ORDER BY `t`.`Id`, `w`.`Id`
2025-11-16 20:04:52.508 +03:00 [INF] Executing ObjectResult, writing value of type 'MappyApplication.Models.user.AuthResponse'.
2025-11-16 20:04:52.508 +03:00 [INF] Executed action MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication) in 30.6975ms
2025-11-16 20:04:52.508 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication)'
2025-11-16 20:04:52.508 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:8080/api/v1/auth/refresh-token - 200 null application/json; charset=utf-8 81.0559ms
2025-11-16 20:04:52.538 +03:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:8080/api/v1/cities/6 - null null
2025-11-16 20:04:52.538 +03:00 [INF] CORS policy execution successful.
2025-11-16 20:04:52.538 +03:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:8080/api/v1/cities/6 - 204 null null 0.1502ms
2025-11-16 20:04:52.538 +03:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:8080/api/v1/cities/6 - null null
2025-11-16 20:04:52.538 +03:00 [INF] CORS policy execution successful.
2025-11-16 20:04:52.538 +03:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:8080/api/v1/cities/6 - 204 null null 0.0298ms
2025-11-16 20:04:52.544 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:8080/api/v1/cities/6 - null null
2025-11-16 20:04:52.544 +03:00 [INF] CORS policy execution successful.
2025-11-16 20:04:52.557 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 20:04:52.557 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:04:52.557 +03:00 [INF] Route matched with {action = "GetById", controller = "Cities"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.cities.CitiesDto] GetById(Int32) on controller MappyApplication.Controllers.CitiesController (MappyApplication).
2025-11-16 20:04:52.562 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT `c`.`Id`, `c`.`CityName`, `c`.`Country`, `c`.`Date`, `c`.`Emoji`, `c`.`Lat`, `c`.`Lng`, `c`.`Notes`, `c`.`UserId`
FROM `Cities` AS `c`
WHERE `c`.`Id` = @__p_0
LIMIT 1
2025-11-16 20:04:52.572 +03:00 [INF] Executing ObjectResult, writing value of type 'MappyApplication.Models.cities.CitiesDto'.
2025-11-16 20:04:52.573 +03:00 [INF] Executed action MappyApplication.Controllers.CitiesController.GetById (MappyApplication) in 15.639ms
2025-11-16 20:04:52.573 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:04:52.573 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:8080/api/v1/cities/6 - 200 null application/json; charset=utf-8 28.9713ms
2025-11-16 20:04:52.574 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:8080/api/v1/cities/6 - null null
2025-11-16 20:04:52.574 +03:00 [INF] CORS policy execution successful.
2025-11-16 20:04:52.583 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 20:04:52.583 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:04:52.583 +03:00 [INF] Route matched with {action = "GetById", controller = "Cities"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.cities.CitiesDto] GetById(Int32) on controller MappyApplication.Controllers.CitiesController (MappyApplication).
2025-11-16 20:04:52.584 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT `c`.`Id`, `c`.`CityName`, `c`.`Country`, `c`.`Date`, `c`.`Emoji`, `c`.`Lat`, `c`.`Lng`, `c`.`Notes`, `c`.`UserId`
FROM `Cities` AS `c`
WHERE `c`.`Id` = @__p_0
LIMIT 1
2025-11-16 20:04:52.585 +03:00 [INF] Executing ObjectResult, writing value of type 'MappyApplication.Models.cities.CitiesDto'.
2025-11-16 20:04:52.585 +03:00 [INF] Executed action MappyApplication.Controllers.CitiesController.GetById (MappyApplication) in 1.2287ms
2025-11-16 20:04:52.585 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:04:52.585 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:8080/api/v1/cities/6 - 200 null application/json; charset=utf-8 11.0797ms
2025-11-16 20:05:10.991 +03:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:8080/api/v1/cities/6 - null null
2025-11-16 20:05:10.995 +03:00 [INF] CORS policy execution successful.
2025-11-16 20:05:10.996 +03:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:8080/api/v1/cities/6 - 204 null null 8.1944ms
2025-11-16 20:05:10.997 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:8080/api/v1/cities/6 - null null
2025-11-16 20:05:10.998 +03:00 [INF] CORS policy execution successful.
2025-11-16 20:05:11.029 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 20:05:11.030 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:05:11.030 +03:00 [INF] Route matched with {action = "GetById", controller = "Cities"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.cities.CitiesDto] GetById(Int32) on controller MappyApplication.Controllers.CitiesController (MappyApplication).
2025-11-16 20:05:11.032 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT `c`.`Id`, `c`.`CityName`, `c`.`Country`, `c`.`Date`, `c`.`Emoji`, `c`.`Lat`, `c`.`Lng`, `c`.`Notes`, `c`.`UserId`
FROM `Cities` AS `c`
WHERE `c`.`Id` = @__p_0
LIMIT 1
2025-11-16 20:05:11.033 +03:00 [INF] Executing ObjectResult, writing value of type 'MappyApplication.Models.cities.CitiesDto'.
2025-11-16 20:05:11.033 +03:00 [INF] Executed action MappyApplication.Controllers.CitiesController.GetById (MappyApplication) in 3.5159ms
2025-11-16 20:05:11.033 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:05:11.034 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:8080/api/v1/cities/6 - 200 null application/json; charset=utf-8 36.2089ms
2025-11-16 20:05:15.268 +03:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:8080/api/v1/auth/refresh-token - null null
2025-11-16 20:05:15.270 +03:00 [INF] CORS policy execution successful.
2025-11-16 20:05:15.270 +03:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:8080/api/v1/auth/refresh-token - 204 null null 2.6266ms
2025-11-16 20:05:15.273 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:8080/api/v1/auth/refresh-token - null 0
2025-11-16 20:05:15.273 +03:00 [INF] CORS policy execution successful.
2025-11-16 20:05:15.320 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 20:05:15.321 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication)'
2025-11-16 20:05:15.321 +03:00 [INF] Route matched with {action = "RefreshToken", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.user.AuthResponse] RefreshToken() on controller MappyApplication.Controllers.AuthController (MappyApplication).
2025-11-16 20:05:15.323 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__refreshToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`RefreshToken` = @__refreshToken_0
LIMIT 2
2025-11-16 20:05:15.330 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`FirstName`, `a`.`LastName`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`
FROM `AspNetUsers` AS `a`
WHERE `a`.`Id` = @__p_0
LIMIT 1
2025-11-16 20:05:15.336 +03:00 [INF] Executed DbCommand (4ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']

        UPDATE TOKENS
        SET Revoked = true, Expired = true
        WHERE UserId = @p0
          AND DeviceId = @p1
          AND Revoked = false
          AND Expired = false
2025-11-16 20:05:15.340 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a0`.`Name`
FROM `AspNetUserRoles` AS `a`
INNER JOIN `AspNetRoles` AS `a0` ON `a`.`RoleId` = `a0`.`Id`
WHERE `a`.`UserId` = @__userId_0
2025-11-16 20:05:15.348 +03:00 [INF] Executed DbCommand (4ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ClaimType`, `a`.`ClaimValue`, `a`.`UserId`
FROM `AspNetUserClaims` AS `a`
WHERE `a`.`UserId` = @__user_Id_0
2025-11-16 20:05:15.351 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a0`.`Name`
FROM `AspNetUserRoles` AS `a`
INNER JOIN `AspNetRoles` AS `a0` ON `a`.`RoleId` = `a0`.`Id`
WHERE `a`.`UserId` = @__userId_0
2025-11-16 20:05:15.353 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ClaimType`, `a`.`ClaimValue`, `a`.`UserId`
FROM `AspNetUserClaims` AS `a`
WHERE `a`.`UserId` = @__user_Id_0
2025-11-16 20:05:15.371 +03:00 [INF] Executed DbCommand (10ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (DbType = DateTime), @p2='?' (Size = 4000), @p3='?' (DbType = Boolean), @p4='?' (Size = 4000), @p5='?' (DbType = Boolean), @p6='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO `Tokens` (`AccessToken`, `CreatedAt`, `DeviceId`, `Expired`, `RefreshToken`, `Revoked`, `UserId`)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6);
SELECT `Id`
FROM `Tokens`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();
2025-11-16 20:05:15.374 +03:00 [INF] Added Token MappyApplication.Data.Token
2025-11-16 20:05:15.378 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessFailedCount`, `t`.`ConcurrencyStamp`, `t`.`Email`, `t`.`EmailConfirmed`, `t`.`FirstName`, `t`.`LastName`, `t`.`LockoutEnabled`, `t`.`LockoutEnd`, `t`.`NormalizedEmail`, `t`.`NormalizedUserName`, `t`.`PasswordHash`, `t`.`PhoneNumber`, `t`.`PhoneNumberConfirmed`, `t`.`SecurityStamp`, `t`.`TwoFactorEnabled`, `t`.`UserName`, `w`.`Id`, `w`.`Cadence`, `w`.`CityName`, `w`.`Coords`, `w`.`Date`, `w`.`Distance`, `w`.`Duration`, `w`.`Emoji`, `w`.`Pace`, `w`.`Type`, `w`.`UserId`, `c`.`Id`, `c`.`CityName`, `c`.`Country`, `c`.`Date`, `c`.`Emoji`, `c`.`Lat`, `c`.`Lng`, `c`.`Notes`, `c`.`UserId`
FROM (
    SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`FirstName`, `a`.`LastName`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`
    FROM `AspNetUsers` AS `a`
    WHERE `a`.`Id` = @__user_Id_0
    LIMIT 2
) AS `t`
LEFT JOIN `Workouts` AS `w` ON `t`.`Id` = `w`.`UserId`
LEFT JOIN `Cities` AS `c` ON `t`.`Id` = `c`.`UserId`
ORDER BY `t`.`Id`, `w`.`Id`
2025-11-16 20:05:15.378 +03:00 [INF] Executing ObjectResult, writing value of type 'MappyApplication.Models.user.AuthResponse'.
2025-11-16 20:05:15.379 +03:00 [INF] Executed action MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication) in 57.8396ms
2025-11-16 20:05:15.379 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication)'
2025-11-16 20:05:15.379 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:8080/api/v1/auth/refresh-token - 200 null application/json; charset=utf-8 106.333ms
2025-11-16 20:05:15.409 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:8080/api/v1/cities/6 - null null
2025-11-16 20:05:15.409 +03:00 [INF] CORS policy execution successful.
2025-11-16 20:05:15.452 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 20:05:15.453 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:05:15.453 +03:00 [INF] Route matched with {action = "GetById", controller = "Cities"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.cities.CitiesDto] GetById(Int32) on controller MappyApplication.Controllers.CitiesController (MappyApplication).
2025-11-16 20:05:15.454 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT `c`.`Id`, `c`.`CityName`, `c`.`Country`, `c`.`Date`, `c`.`Emoji`, `c`.`Lat`, `c`.`Lng`, `c`.`Notes`, `c`.`UserId`
FROM `Cities` AS `c`
WHERE `c`.`Id` = @__p_0
LIMIT 1
2025-11-16 20:05:15.455 +03:00 [INF] Executing ObjectResult, writing value of type 'MappyApplication.Models.cities.CitiesDto'.
2025-11-16 20:05:15.455 +03:00 [INF] Executed action MappyApplication.Controllers.CitiesController.GetById (MappyApplication) in 1.8941ms
2025-11-16 20:05:15.455 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:05:15.455 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:8080/api/v1/cities/6 - 200 null application/json; charset=utf-8 46.1532ms
2025-11-16 20:05:15.456 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:8080/api/v1/cities/6 - null null
2025-11-16 20:05:15.456 +03:00 [INF] CORS policy execution successful.
2025-11-16 20:05:15.466 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 20:05:15.466 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:05:15.466 +03:00 [INF] Route matched with {action = "GetById", controller = "Cities"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.cities.CitiesDto] GetById(Int32) on controller MappyApplication.Controllers.CitiesController (MappyApplication).
2025-11-16 20:05:15.467 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT `c`.`Id`, `c`.`CityName`, `c`.`Country`, `c`.`Date`, `c`.`Emoji`, `c`.`Lat`, `c`.`Lng`, `c`.`Notes`, `c`.`UserId`
FROM `Cities` AS `c`
WHERE `c`.`Id` = @__p_0
LIMIT 1
2025-11-16 20:05:15.467 +03:00 [INF] Executing ObjectResult, writing value of type 'MappyApplication.Models.cities.CitiesDto'.
2025-11-16 20:05:15.467 +03:00 [INF] Executed action MappyApplication.Controllers.CitiesController.GetById (MappyApplication) in 0.9409ms
2025-11-16 20:05:15.467 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:05:15.467 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:8080/api/v1/cities/6 - 200 null application/json; charset=utf-8 11.6933ms
2025-11-16 20:05:26.578 +03:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:8080/api/v1/auth/refresh-token - null null
2025-11-16 20:05:26.582 +03:00 [INF] CORS policy execution successful.
2025-11-16 20:05:26.582 +03:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:8080/api/v1/auth/refresh-token - 204 null null 4.1629ms
2025-11-16 20:05:26.586 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:8080/api/v1/auth/refresh-token - null 0
2025-11-16 20:05:26.586 +03:00 [INF] CORS policy execution successful.
2025-11-16 20:05:26.638 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 20:05:26.639 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication)'
2025-11-16 20:05:26.639 +03:00 [INF] Route matched with {action = "RefreshToken", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.user.AuthResponse] RefreshToken() on controller MappyApplication.Controllers.AuthController (MappyApplication).
2025-11-16 20:05:26.642 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__refreshToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`RefreshToken` = @__refreshToken_0
LIMIT 2
2025-11-16 20:05:26.646 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__p_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`FirstName`, `a`.`LastName`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`
FROM `AspNetUsers` AS `a`
WHERE `a`.`Id` = @__p_0
LIMIT 1
2025-11-16 20:05:26.652 +03:00 [INF] Executed DbCommand (5ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']

        UPDATE TOKENS
        SET Revoked = true, Expired = true
        WHERE UserId = @p0
          AND DeviceId = @p1
          AND Revoked = false
          AND Expired = false
2025-11-16 20:05:26.654 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a0`.`Name`
FROM `AspNetUserRoles` AS `a`
INNER JOIN `AspNetRoles` AS `a0` ON `a`.`RoleId` = `a0`.`Id`
WHERE `a`.`UserId` = @__userId_0
2025-11-16 20:05:26.656 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ClaimType`, `a`.`ClaimValue`, `a`.`UserId`
FROM `AspNetUserClaims` AS `a`
WHERE `a`.`UserId` = @__user_Id_0
2025-11-16 20:05:26.657 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a0`.`Name`
FROM `AspNetUserRoles` AS `a`
INNER JOIN `AspNetRoles` AS `a0` ON `a`.`RoleId` = `a0`.`Id`
WHERE `a`.`UserId` = @__userId_0
2025-11-16 20:05:26.658 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ClaimType`, `a`.`ClaimValue`, `a`.`UserId`
FROM `AspNetUserClaims` AS `a`
WHERE `a`.`UserId` = @__user_Id_0
2025-11-16 20:05:26.662 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (DbType = DateTime), @p2='?' (Size = 4000), @p3='?' (DbType = Boolean), @p4='?' (Size = 4000), @p5='?' (DbType = Boolean), @p6='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO `Tokens` (`AccessToken`, `CreatedAt`, `DeviceId`, `Expired`, `RefreshToken`, `Revoked`, `UserId`)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6);
SELECT `Id`
FROM `Tokens`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();
2025-11-16 20:05:26.663 +03:00 [INF] Added Token MappyApplication.Data.Token
2025-11-16 20:05:26.664 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessFailedCount`, `t`.`ConcurrencyStamp`, `t`.`Email`, `t`.`EmailConfirmed`, `t`.`FirstName`, `t`.`LastName`, `t`.`LockoutEnabled`, `t`.`LockoutEnd`, `t`.`NormalizedEmail`, `t`.`NormalizedUserName`, `t`.`PasswordHash`, `t`.`PhoneNumber`, `t`.`PhoneNumberConfirmed`, `t`.`SecurityStamp`, `t`.`TwoFactorEnabled`, `t`.`UserName`, `w`.`Id`, `w`.`Cadence`, `w`.`CityName`, `w`.`Coords`, `w`.`Date`, `w`.`Distance`, `w`.`Duration`, `w`.`Emoji`, `w`.`Pace`, `w`.`Type`, `w`.`UserId`, `c`.`Id`, `c`.`CityName`, `c`.`Country`, `c`.`Date`, `c`.`Emoji`, `c`.`Lat`, `c`.`Lng`, `c`.`Notes`, `c`.`UserId`
FROM (
    SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`FirstName`, `a`.`LastName`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`
    FROM `AspNetUsers` AS `a`
    WHERE `a`.`Id` = @__user_Id_0
    LIMIT 2
) AS `t`
LEFT JOIN `Workouts` AS `w` ON `t`.`Id` = `w`.`UserId`
LEFT JOIN `Cities` AS `c` ON `t`.`Id` = `c`.`UserId`
ORDER BY `t`.`Id`, `w`.`Id`
2025-11-16 20:05:26.666 +03:00 [INF] Executing ObjectResult, writing value of type 'MappyApplication.Models.user.AuthResponse'.
2025-11-16 20:05:26.666 +03:00 [INF] Executed action MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication) in 26.4439ms
2025-11-16 20:05:26.666 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication)'
2025-11-16 20:05:26.666 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:8080/api/v1/auth/refresh-token - 200 null application/json; charset=utf-8 80.5573ms
2025-11-16 20:05:26.692 +03:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:8080/api/v1/cities/6 - null null
2025-11-16 20:05:26.692 +03:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:8080/api/v1/cities/6 - null null
2025-11-16 20:05:26.692 +03:00 [INF] CORS policy execution successful.
2025-11-16 20:05:26.692 +03:00 [INF] CORS policy execution successful.
2025-11-16 20:05:26.692 +03:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:8080/api/v1/cities/6 - 204 null null 0.2768ms
2025-11-16 20:05:26.692 +03:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:8080/api/v1/cities/6 - 204 null null 0.101ms
2025-11-16 20:05:26.696 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:8080/api/v1/cities/6 - null null
2025-11-16 20:05:26.696 +03:00 [INF] CORS policy execution successful.
2025-11-16 20:05:26.724 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 20:05:26.724 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:05:26.724 +03:00 [INF] Route matched with {action = "GetById", controller = "Cities"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.cities.CitiesDto] GetById(Int32) on controller MappyApplication.Controllers.CitiesController (MappyApplication).
2025-11-16 20:05:26.726 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT `c`.`Id`, `c`.`CityName`, `c`.`Country`, `c`.`Date`, `c`.`Emoji`, `c`.`Lat`, `c`.`Lng`, `c`.`Notes`, `c`.`UserId`
FROM `Cities` AS `c`
WHERE `c`.`Id` = @__p_0
LIMIT 1
2025-11-16 20:05:26.726 +03:00 [INF] Executing ObjectResult, writing value of type 'MappyApplication.Models.cities.CitiesDto'.
2025-11-16 20:05:26.726 +03:00 [INF] Executed action MappyApplication.Controllers.CitiesController.GetById (MappyApplication) in 1.2791ms
2025-11-16 20:05:26.726 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:05:26.726 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:8080/api/v1/cities/6 - 200 null application/json; charset=utf-8 30.255ms
2025-11-16 20:05:26.726 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:8080/api/v1/cities/6 - null null
2025-11-16 20:05:26.726 +03:00 [INF] CORS policy execution successful.
2025-11-16 20:05:26.736 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 20:05:26.736 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:05:26.737 +03:00 [INF] Route matched with {action = "GetById", controller = "Cities"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.cities.CitiesDto] GetById(Int32) on controller MappyApplication.Controllers.CitiesController (MappyApplication).
2025-11-16 20:05:26.737 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT `c`.`Id`, `c`.`CityName`, `c`.`Country`, `c`.`Date`, `c`.`Emoji`, `c`.`Lat`, `c`.`Lng`, `c`.`Notes`, `c`.`UserId`
FROM `Cities` AS `c`
WHERE `c`.`Id` = @__p_0
LIMIT 1
2025-11-16 20:05:26.738 +03:00 [INF] Executing ObjectResult, writing value of type 'MappyApplication.Models.cities.CitiesDto'.
2025-11-16 20:05:26.738 +03:00 [INF] Executed action MappyApplication.Controllers.CitiesController.GetById (MappyApplication) in 1.0912ms
2025-11-16 20:05:26.738 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:05:26.738 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:8080/api/v1/cities/6 - 200 null application/json; charset=utf-8 11.4762ms
2025-11-16 20:05:33.548 +03:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:8080/api/v1/auth/refresh-token - null null
2025-11-16 20:05:33.551 +03:00 [INF] CORS policy execution successful.
2025-11-16 20:05:33.553 +03:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:8080/api/v1/auth/refresh-token - 204 null null 4.8372ms
2025-11-16 20:05:33.554 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:8080/api/v1/auth/refresh-token - null 0
2025-11-16 20:05:33.554 +03:00 [INF] CORS policy execution successful.
2025-11-16 20:05:33.592 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 20:05:33.592 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication)'
2025-11-16 20:05:33.592 +03:00 [INF] Route matched with {action = "RefreshToken", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.user.AuthResponse] RefreshToken() on controller MappyApplication.Controllers.AuthController (MappyApplication).
2025-11-16 20:05:33.594 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__refreshToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`RefreshToken` = @__refreshToken_0
LIMIT 2
2025-11-16 20:05:33.596 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`FirstName`, `a`.`LastName`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`
FROM `AspNetUsers` AS `a`
WHERE `a`.`Id` = @__p_0
LIMIT 1
2025-11-16 20:05:33.600 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']

        UPDATE TOKENS
        SET Revoked = true, Expired = true
        WHERE UserId = @p0
          AND DeviceId = @p1
          AND Revoked = false
          AND Expired = false
2025-11-16 20:05:33.601 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a0`.`Name`
FROM `AspNetUserRoles` AS `a`
INNER JOIN `AspNetRoles` AS `a0` ON `a`.`RoleId` = `a0`.`Id`
WHERE `a`.`UserId` = @__userId_0
2025-11-16 20:05:33.603 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ClaimType`, `a`.`ClaimValue`, `a`.`UserId`
FROM `AspNetUserClaims` AS `a`
WHERE `a`.`UserId` = @__user_Id_0
2025-11-16 20:05:33.605 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a0`.`Name`
FROM `AspNetUserRoles` AS `a`
INNER JOIN `AspNetRoles` AS `a0` ON `a`.`RoleId` = `a0`.`Id`
WHERE `a`.`UserId` = @__userId_0
2025-11-16 20:05:33.607 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ClaimType`, `a`.`ClaimValue`, `a`.`UserId`
FROM `AspNetUserClaims` AS `a`
WHERE `a`.`UserId` = @__user_Id_0
2025-11-16 20:05:33.611 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (DbType = DateTime), @p2='?' (Size = 4000), @p3='?' (DbType = Boolean), @p4='?' (Size = 4000), @p5='?' (DbType = Boolean), @p6='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO `Tokens` (`AccessToken`, `CreatedAt`, `DeviceId`, `Expired`, `RefreshToken`, `Revoked`, `UserId`)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6);
SELECT `Id`
FROM `Tokens`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();
2025-11-16 20:05:33.612 +03:00 [INF] Added Token MappyApplication.Data.Token
2025-11-16 20:05:33.615 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessFailedCount`, `t`.`ConcurrencyStamp`, `t`.`Email`, `t`.`EmailConfirmed`, `t`.`FirstName`, `t`.`LastName`, `t`.`LockoutEnabled`, `t`.`LockoutEnd`, `t`.`NormalizedEmail`, `t`.`NormalizedUserName`, `t`.`PasswordHash`, `t`.`PhoneNumber`, `t`.`PhoneNumberConfirmed`, `t`.`SecurityStamp`, `t`.`TwoFactorEnabled`, `t`.`UserName`, `w`.`Id`, `w`.`Cadence`, `w`.`CityName`, `w`.`Coords`, `w`.`Date`, `w`.`Distance`, `w`.`Duration`, `w`.`Emoji`, `w`.`Pace`, `w`.`Type`, `w`.`UserId`, `c`.`Id`, `c`.`CityName`, `c`.`Country`, `c`.`Date`, `c`.`Emoji`, `c`.`Lat`, `c`.`Lng`, `c`.`Notes`, `c`.`UserId`
FROM (
    SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`FirstName`, `a`.`LastName`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`
    FROM `AspNetUsers` AS `a`
    WHERE `a`.`Id` = @__user_Id_0
    LIMIT 2
) AS `t`
LEFT JOIN `Workouts` AS `w` ON `t`.`Id` = `w`.`UserId`
LEFT JOIN `Cities` AS `c` ON `t`.`Id` = `c`.`UserId`
ORDER BY `t`.`Id`, `w`.`Id`
2025-11-16 20:05:33.617 +03:00 [INF] Executing ObjectResult, writing value of type 'MappyApplication.Models.user.AuthResponse'.
2025-11-16 20:05:33.617 +03:00 [INF] Executed action MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication) in 24.3935ms
2025-11-16 20:05:33.617 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication)'
2025-11-16 20:05:33.617 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:8080/api/v1/auth/refresh-token - 200 null application/json; charset=utf-8 62.8685ms
2025-11-16 20:05:33.651 +03:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:8080/api/v1/cities/6 - null null
2025-11-16 20:05:33.651 +03:00 [INF] CORS policy execution successful.
2025-11-16 20:05:33.651 +03:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:8080/api/v1/cities/6 - null null
2025-11-16 20:05:33.651 +03:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:8080/api/v1/cities/6 - 204 null null 0.5185ms
2025-11-16 20:05:33.653 +03:00 [INF] CORS policy execution successful.
2025-11-16 20:05:33.653 +03:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:8080/api/v1/cities/6 - 204 null null 1.6445ms
2025-11-16 20:05:33.653 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:8080/api/v1/cities/6 - null null
2025-11-16 20:05:33.653 +03:00 [INF] CORS policy execution successful.
2025-11-16 20:05:33.679 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 20:05:33.679 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:05:33.679 +03:00 [INF] Route matched with {action = "GetById", controller = "Cities"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.cities.CitiesDto] GetById(Int32) on controller MappyApplication.Controllers.CitiesController (MappyApplication).
2025-11-16 20:05:33.683 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT `c`.`Id`, `c`.`CityName`, `c`.`Country`, `c`.`Date`, `c`.`Emoji`, `c`.`Lat`, `c`.`Lng`, `c`.`Notes`, `c`.`UserId`
FROM `Cities` AS `c`
WHERE `c`.`Id` = @__p_0
LIMIT 1
2025-11-16 20:05:33.683 +03:00 [INF] Executing ObjectResult, writing value of type 'MappyApplication.Models.cities.CitiesDto'.
2025-11-16 20:05:33.684 +03:00 [INF] Executed action MappyApplication.Controllers.CitiesController.GetById (MappyApplication) in 4.2857ms
2025-11-16 20:05:33.684 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:05:33.684 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:8080/api/v1/cities/6 - 200 null application/json; charset=utf-8 30.9289ms
2025-11-16 20:05:33.685 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:8080/api/v1/cities/6 - null null
2025-11-16 20:05:33.685 +03:00 [INF] CORS policy execution successful.
2025-11-16 20:05:33.707 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 20:05:33.708 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:05:33.708 +03:00 [INF] Route matched with {action = "GetById", controller = "Cities"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.cities.CitiesDto] GetById(Int32) on controller MappyApplication.Controllers.CitiesController (MappyApplication).
2025-11-16 20:05:33.709 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT `c`.`Id`, `c`.`CityName`, `c`.`Country`, `c`.`Date`, `c`.`Emoji`, `c`.`Lat`, `c`.`Lng`, `c`.`Notes`, `c`.`UserId`
FROM `Cities` AS `c`
WHERE `c`.`Id` = @__p_0
LIMIT 1
2025-11-16 20:05:33.709 +03:00 [INF] Executing ObjectResult, writing value of type 'MappyApplication.Models.cities.CitiesDto'.
2025-11-16 20:05:33.709 +03:00 [INF] Executed action MappyApplication.Controllers.CitiesController.GetById (MappyApplication) in 1.2646ms
2025-11-16 20:05:33.709 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:05:33.709 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:8080/api/v1/cities/6 - 200 null application/json; charset=utf-8 24.035ms
2025-11-16 20:05:38.492 +03:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:8080/api/v1/cities/5 - null null
2025-11-16 20:05:38.493 +03:00 [INF] CORS policy execution successful.
2025-11-16 20:05:38.493 +03:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:8080/api/v1/cities/5 - null null
2025-11-16 20:05:38.493 +03:00 [INF] CORS policy execution successful.
2025-11-16 20:05:38.493 +03:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:8080/api/v1/cities/5 - 204 null null 1.6042ms
2025-11-16 20:05:38.493 +03:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:8080/api/v1/cities/5 - 204 null null 0.0852ms
2025-11-16 20:05:38.495 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:8080/api/v1/cities/5 - null null
2025-11-16 20:05:38.495 +03:00 [INF] CORS policy execution successful.
2025-11-16 20:05:38.511 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 20:05:38.511 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:05:38.511 +03:00 [INF] Route matched with {action = "GetById", controller = "Cities"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.cities.CitiesDto] GetById(Int32) on controller MappyApplication.Controllers.CitiesController (MappyApplication).
2025-11-16 20:05:38.511 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT `c`.`Id`, `c`.`CityName`, `c`.`Country`, `c`.`Date`, `c`.`Emoji`, `c`.`Lat`, `c`.`Lng`, `c`.`Notes`, `c`.`UserId`
FROM `Cities` AS `c`
WHERE `c`.`Id` = @__p_0
LIMIT 1
2025-11-16 20:05:38.511 +03:00 [INF] Executing ObjectResult, writing value of type 'MappyApplication.Models.cities.CitiesDto'.
2025-11-16 20:05:38.512 +03:00 [INF] Executed action MappyApplication.Controllers.CitiesController.GetById (MappyApplication) in 0.689ms
2025-11-16 20:05:38.512 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:05:38.512 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:8080/api/v1/cities/5 - 200 null application/json; charset=utf-8 17.0817ms
2025-11-16 20:05:38.512 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:8080/api/v1/cities/5 - null null
2025-11-16 20:05:38.512 +03:00 [INF] CORS policy execution successful.
2025-11-16 20:05:38.521 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 20:05:38.521 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:05:38.521 +03:00 [INF] Route matched with {action = "GetById", controller = "Cities"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.cities.CitiesDto] GetById(Int32) on controller MappyApplication.Controllers.CitiesController (MappyApplication).
2025-11-16 20:05:38.523 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT `c`.`Id`, `c`.`CityName`, `c`.`Country`, `c`.`Date`, `c`.`Emoji`, `c`.`Lat`, `c`.`Lng`, `c`.`Notes`, `c`.`UserId`
FROM `Cities` AS `c`
WHERE `c`.`Id` = @__p_0
LIMIT 1
2025-11-16 20:05:38.523 +03:00 [INF] Executing ObjectResult, writing value of type 'MappyApplication.Models.cities.CitiesDto'.
2025-11-16 20:05:38.523 +03:00 [INF] Executed action MappyApplication.Controllers.CitiesController.GetById (MappyApplication) in 1.2818ms
2025-11-16 20:05:38.523 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:05:38.523 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:8080/api/v1/cities/5 - 200 null application/json; charset=utf-8 10.7324ms
2025-11-16 20:05:40.826 +03:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:8080/api/v1/cities/6 - null null
2025-11-16 20:05:40.826 +03:00 [INF] CORS policy execution successful.
2025-11-16 20:05:40.826 +03:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:8080/api/v1/cities/6 - 204 null null 0.456ms
2025-11-16 20:05:40.826 +03:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:8080/api/v1/cities/6 - null null
2025-11-16 20:05:40.826 +03:00 [INF] CORS policy execution successful.
2025-11-16 20:05:40.826 +03:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:8080/api/v1/cities/6 - 204 null null 0.2745ms
2025-11-16 20:05:40.828 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:8080/api/v1/cities/6 - null null
2025-11-16 20:05:40.828 +03:00 [INF] CORS policy execution successful.
2025-11-16 20:05:40.842 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 20:05:40.842 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:05:40.842 +03:00 [INF] Route matched with {action = "GetById", controller = "Cities"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.cities.CitiesDto] GetById(Int32) on controller MappyApplication.Controllers.CitiesController (MappyApplication).
2025-11-16 20:05:40.843 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT `c`.`Id`, `c`.`CityName`, `c`.`Country`, `c`.`Date`, `c`.`Emoji`, `c`.`Lat`, `c`.`Lng`, `c`.`Notes`, `c`.`UserId`
FROM `Cities` AS `c`
WHERE `c`.`Id` = @__p_0
LIMIT 1
2025-11-16 20:05:40.843 +03:00 [INF] Executing ObjectResult, writing value of type 'MappyApplication.Models.cities.CitiesDto'.
2025-11-16 20:05:40.843 +03:00 [INF] Executed action MappyApplication.Controllers.CitiesController.GetById (MappyApplication) in 1.0256ms
2025-11-16 20:05:40.843 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:05:40.843 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:8080/api/v1/cities/6 - 200 null application/json; charset=utf-8 15.4481ms
2025-11-16 20:05:40.843 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:8080/api/v1/cities/6 - null null
2025-11-16 20:05:40.843 +03:00 [INF] CORS policy execution successful.
2025-11-16 20:05:40.853 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 20:05:40.854 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:05:40.854 +03:00 [INF] Route matched with {action = "GetById", controller = "Cities"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.cities.CitiesDto] GetById(Int32) on controller MappyApplication.Controllers.CitiesController (MappyApplication).
2025-11-16 20:05:40.854 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT `c`.`Id`, `c`.`CityName`, `c`.`Country`, `c`.`Date`, `c`.`Emoji`, `c`.`Lat`, `c`.`Lng`, `c`.`Notes`, `c`.`UserId`
FROM `Cities` AS `c`
WHERE `c`.`Id` = @__p_0
LIMIT 1
2025-11-16 20:05:40.855 +03:00 [INF] Executing ObjectResult, writing value of type 'MappyApplication.Models.cities.CitiesDto'.
2025-11-16 20:05:40.855 +03:00 [INF] Executed action MappyApplication.Controllers.CitiesController.GetById (MappyApplication) in 1.1051ms
2025-11-16 20:05:40.855 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:05:40.855 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:8080/api/v1/cities/6 - 200 null application/json; charset=utf-8 11.4115ms
2025-11-16 20:05:44.100 +03:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:8080/api/v1/cities/5 - null null
2025-11-16 20:05:44.100 +03:00 [INF] CORS policy execution successful.
2025-11-16 20:05:44.100 +03:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:8080/api/v1/cities/5 - 204 null null 0.231ms
2025-11-16 20:05:44.100 +03:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:8080/api/v1/cities/5 - null null
2025-11-16 20:05:44.100 +03:00 [INF] CORS policy execution successful.
2025-11-16 20:05:44.100 +03:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:8080/api/v1/cities/5 - 204 null null 0.0681ms
2025-11-16 20:05:44.105 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:8080/api/v1/cities/5 - null null
2025-11-16 20:05:44.105 +03:00 [INF] CORS policy execution successful.
2025-11-16 20:05:44.116 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 20:05:44.116 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:05:44.116 +03:00 [INF] Route matched with {action = "GetById", controller = "Cities"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.cities.CitiesDto] GetById(Int32) on controller MappyApplication.Controllers.CitiesController (MappyApplication).
2025-11-16 20:05:44.117 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT `c`.`Id`, `c`.`CityName`, `c`.`Country`, `c`.`Date`, `c`.`Emoji`, `c`.`Lat`, `c`.`Lng`, `c`.`Notes`, `c`.`UserId`
FROM `Cities` AS `c`
WHERE `c`.`Id` = @__p_0
LIMIT 1
2025-11-16 20:05:44.117 +03:00 [INF] Executing ObjectResult, writing value of type 'MappyApplication.Models.cities.CitiesDto'.
2025-11-16 20:05:44.117 +03:00 [INF] Executed action MappyApplication.Controllers.CitiesController.GetById (MappyApplication) in 1.2923ms
2025-11-16 20:05:44.117 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:05:44.117 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:8080/api/v1/cities/5 - 200 null application/json; charset=utf-8 12.617ms
2025-11-16 20:05:44.118 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:8080/api/v1/cities/5 - null null
2025-11-16 20:05:44.118 +03:00 [INF] CORS policy execution successful.
2025-11-16 20:05:44.130 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 20:05:44.130 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:05:44.130 +03:00 [INF] Route matched with {action = "GetById", controller = "Cities"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.cities.CitiesDto] GetById(Int32) on controller MappyApplication.Controllers.CitiesController (MappyApplication).
2025-11-16 20:05:44.131 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT `c`.`Id`, `c`.`CityName`, `c`.`Country`, `c`.`Date`, `c`.`Emoji`, `c`.`Lat`, `c`.`Lng`, `c`.`Notes`, `c`.`UserId`
FROM `Cities` AS `c`
WHERE `c`.`Id` = @__p_0
LIMIT 1
2025-11-16 20:05:44.131 +03:00 [INF] Executing ObjectResult, writing value of type 'MappyApplication.Models.cities.CitiesDto'.
2025-11-16 20:05:44.131 +03:00 [INF] Executed action MappyApplication.Controllers.CitiesController.GetById (MappyApplication) in 0.7804ms
2025-11-16 20:05:44.131 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.CitiesController.GetById (MappyApplication)'
2025-11-16 20:05:44.131 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:8080/api/v1/cities/5 - 200 null application/json; charset=utf-8 12.9675ms
2025-11-16 20:06:06.313 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:8080/api/v1/Cities - null null
2025-11-16 20:06:06.378 +03:00 [INF] Executed DbCommand (5ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 20:06:06.379 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.CitiesController.GetAll (MappyApplication)'
2025-11-16 20:06:06.400 +03:00 [INF] Route matched with {action = "GetAll", controller = "Cities"}. Executing controller action with signature System.Threading.Tasks.Task`1[System.Collections.Generic.IEnumerable`1[MappyApplication.Models.cities.CitiesDto]] GetAll() on controller MappyApplication.Controllers.CitiesController (MappyApplication).
2025-11-16 20:06:06.435 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT `c`.`Id`, `c`.`CityName`, `c`.`Country`, `c`.`Date`, `c`.`Emoji`, `c`.`Lat`, `c`.`Lng`, `c`.`Notes`, `c`.`UserId`
FROM `Cities` AS `c`
2025-11-16 20:06:06.449 +03:00 [INF] Executing ObjectResult, writing value of type 'System.Collections.Generic.List`1[[MappyApplication.Models.cities.CitiesDto, MappyApplication, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-11-16 20:06:06.458 +03:00 [INF] Executed action MappyApplication.Controllers.CitiesController.GetAll (MappyApplication) in 58.3086ms
2025-11-16 20:06:06.458 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.CitiesController.GetAll (MappyApplication)'
2025-11-16 20:06:06.459 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:8080/api/v1/Cities - 200 null application/json; charset=utf-8 145.8126ms
2025-11-16 20:07:01.899 +03:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:8080/api/v1/cities - null null
2025-11-16 20:07:01.900 +03:00 [INF] CORS policy execution successful.
2025-11-16 20:07:01.901 +03:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:8080/api/v1/cities - 204 null null 2.2658ms
2025-11-16 20:07:01.902 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:8080/api/v1/cities - application/json 143
2025-11-16 20:07:01.902 +03:00 [INF] CORS policy execution successful.
2025-11-16 20:07:02.036 +03:00 [INF] Executed DbCommand (23ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 20:07:02.037 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.CitiesController.AddAsynch (MappyApplication)'
2025-11-16 20:07:02.037 +03:00 [INF] Route matched with {action = "AddAsynch", controller = "Cities"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] AddAsynch(MappyApplication.Data.Cities) on controller MappyApplication.Controllers.CitiesController (MappyApplication).
2025-11-16 20:07:02.057 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-11-16 20:07:02.057 +03:00 [INF] Executed action MappyApplication.Controllers.CitiesController.AddAsynch (MappyApplication) in 20.2416ms
2025-11-16 20:07:02.057 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.CitiesController.AddAsynch (MappyApplication)'
2025-11-16 20:07:02.057 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:8080/api/v1/cities - 400 null application/problem+json; charset=utf-8 155.6248ms
2025-11-16 20:07:27.211 +03:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:8080/api/v1/auth/refresh-token - null null
2025-11-16 20:07:27.218 +03:00 [INF] CORS policy execution successful.
2025-11-16 20:07:27.219 +03:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:8080/api/v1/auth/refresh-token - 204 null null 7.863ms
2025-11-16 20:07:27.220 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:8080/api/v1/auth/refresh-token - null 0
2025-11-16 20:07:27.220 +03:00 [INF] CORS policy execution successful.
2025-11-16 20:07:27.265 +03:00 [INF] Executed DbCommand (6ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 20:07:27.265 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication)'
2025-11-16 20:07:27.266 +03:00 [INF] Route matched with {action = "RefreshToken", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.user.AuthResponse] RefreshToken() on controller MappyApplication.Controllers.AuthController (MappyApplication).
2025-11-16 20:07:27.269 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__refreshToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`RefreshToken` = @__refreshToken_0
LIMIT 2
2025-11-16 20:07:27.276 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__p_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`FirstName`, `a`.`LastName`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`
FROM `AspNetUsers` AS `a`
WHERE `a`.`Id` = @__p_0
LIMIT 1
2025-11-16 20:07:27.305 +03:00 [INF] Executed DbCommand (27ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']

        UPDATE TOKENS
        SET Revoked = true, Expired = true
        WHERE UserId = @p0
          AND DeviceId = @p1
          AND Revoked = false
          AND Expired = false
2025-11-16 20:07:27.311 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a0`.`Name`
FROM `AspNetUserRoles` AS `a`
INNER JOIN `AspNetRoles` AS `a0` ON `a`.`RoleId` = `a0`.`Id`
WHERE `a`.`UserId` = @__userId_0
2025-11-16 20:07:27.312 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ClaimType`, `a`.`ClaimValue`, `a`.`UserId`
FROM `AspNetUserClaims` AS `a`
WHERE `a`.`UserId` = @__user_Id_0
2025-11-16 20:07:27.313 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a0`.`Name`
FROM `AspNetUserRoles` AS `a`
INNER JOIN `AspNetRoles` AS `a0` ON `a`.`RoleId` = `a0`.`Id`
WHERE `a`.`UserId` = @__userId_0
2025-11-16 20:07:27.313 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ClaimType`, `a`.`ClaimValue`, `a`.`UserId`
FROM `AspNetUserClaims` AS `a`
WHERE `a`.`UserId` = @__user_Id_0
2025-11-16 20:07:27.320 +03:00 [INF] Executed DbCommand (4ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (DbType = DateTime), @p2='?' (Size = 4000), @p3='?' (DbType = Boolean), @p4='?' (Size = 4000), @p5='?' (DbType = Boolean), @p6='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO `Tokens` (`AccessToken`, `CreatedAt`, `DeviceId`, `Expired`, `RefreshToken`, `Revoked`, `UserId`)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6);
SELECT `Id`
FROM `Tokens`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();
2025-11-16 20:07:27.322 +03:00 [INF] Added Token MappyApplication.Data.Token
2025-11-16 20:07:27.333 +03:00 [INF] Executed DbCommand (10ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessFailedCount`, `t`.`ConcurrencyStamp`, `t`.`Email`, `t`.`EmailConfirmed`, `t`.`FirstName`, `t`.`LastName`, `t`.`LockoutEnabled`, `t`.`LockoutEnd`, `t`.`NormalizedEmail`, `t`.`NormalizedUserName`, `t`.`PasswordHash`, `t`.`PhoneNumber`, `t`.`PhoneNumberConfirmed`, `t`.`SecurityStamp`, `t`.`TwoFactorEnabled`, `t`.`UserName`, `w`.`Id`, `w`.`Cadence`, `w`.`CityName`, `w`.`Coords`, `w`.`Date`, `w`.`Distance`, `w`.`Duration`, `w`.`Emoji`, `w`.`Pace`, `w`.`Type`, `w`.`UserId`, `c`.`Id`, `c`.`CityName`, `c`.`Country`, `c`.`Date`, `c`.`Emoji`, `c`.`Lat`, `c`.`Lng`, `c`.`Notes`, `c`.`UserId`
FROM (
    SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`FirstName`, `a`.`LastName`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`
    FROM `AspNetUsers` AS `a`
    WHERE `a`.`Id` = @__user_Id_0
    LIMIT 2
) AS `t`
LEFT JOIN `Workouts` AS `w` ON `t`.`Id` = `w`.`UserId`
LEFT JOIN `Cities` AS `c` ON `t`.`Id` = `c`.`UserId`
ORDER BY `t`.`Id`, `w`.`Id`
2025-11-16 20:07:27.333 +03:00 [INF] Executing ObjectResult, writing value of type 'MappyApplication.Models.user.AuthResponse'.
2025-11-16 20:07:27.334 +03:00 [INF] Executed action MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication) in 67.2165ms
2025-11-16 20:07:27.334 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication)'
2025-11-16 20:07:27.334 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:8080/api/v1/auth/refresh-token - 200 null application/json; charset=utf-8 113.475ms
2025-11-16 20:07:29.404 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:8080/api/v1/auth/refresh-token - null 0
2025-11-16 20:07:29.412 +03:00 [INF] CORS policy execution successful.
2025-11-16 20:07:29.446 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 20:07:29.446 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication)'
2025-11-16 20:07:29.446 +03:00 [INF] Route matched with {action = "RefreshToken", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.user.AuthResponse] RefreshToken() on controller MappyApplication.Controllers.AuthController (MappyApplication).
2025-11-16 20:07:29.448 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__refreshToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`RefreshToken` = @__refreshToken_0
LIMIT 2
2025-11-16 20:07:29.450 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`FirstName`, `a`.`LastName`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`
FROM `AspNetUsers` AS `a`
WHERE `a`.`Id` = @__p_0
LIMIT 1
2025-11-16 20:07:29.454 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']

        UPDATE TOKENS
        SET Revoked = true, Expired = true
        WHERE UserId = @p0
          AND DeviceId = @p1
          AND Revoked = false
          AND Expired = false
2025-11-16 20:07:29.458 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a0`.`Name`
FROM `AspNetUserRoles` AS `a`
INNER JOIN `AspNetRoles` AS `a0` ON `a`.`RoleId` = `a0`.`Id`
WHERE `a`.`UserId` = @__userId_0
2025-11-16 20:07:29.460 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ClaimType`, `a`.`ClaimValue`, `a`.`UserId`
FROM `AspNetUserClaims` AS `a`
WHERE `a`.`UserId` = @__user_Id_0
2025-11-16 20:07:29.461 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a0`.`Name`
FROM `AspNetUserRoles` AS `a`
INNER JOIN `AspNetRoles` AS `a0` ON `a`.`RoleId` = `a0`.`Id`
WHERE `a`.`UserId` = @__userId_0
2025-11-16 20:07:29.462 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ClaimType`, `a`.`ClaimValue`, `a`.`UserId`
FROM `AspNetUserClaims` AS `a`
WHERE `a`.`UserId` = @__user_Id_0
2025-11-16 20:07:29.465 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (DbType = DateTime), @p2='?' (Size = 4000), @p3='?' (DbType = Boolean), @p4='?' (Size = 4000), @p5='?' (DbType = Boolean), @p6='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO `Tokens` (`AccessToken`, `CreatedAt`, `DeviceId`, `Expired`, `RefreshToken`, `Revoked`, `UserId`)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6);
SELECT `Id`
FROM `Tokens`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();
2025-11-16 20:07:29.466 +03:00 [INF] Added Token MappyApplication.Data.Token
2025-11-16 20:07:29.469 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessFailedCount`, `t`.`ConcurrencyStamp`, `t`.`Email`, `t`.`EmailConfirmed`, `t`.`FirstName`, `t`.`LastName`, `t`.`LockoutEnabled`, `t`.`LockoutEnd`, `t`.`NormalizedEmail`, `t`.`NormalizedUserName`, `t`.`PasswordHash`, `t`.`PhoneNumber`, `t`.`PhoneNumberConfirmed`, `t`.`SecurityStamp`, `t`.`TwoFactorEnabled`, `t`.`UserName`, `w`.`Id`, `w`.`Cadence`, `w`.`CityName`, `w`.`Coords`, `w`.`Date`, `w`.`Distance`, `w`.`Duration`, `w`.`Emoji`, `w`.`Pace`, `w`.`Type`, `w`.`UserId`, `c`.`Id`, `c`.`CityName`, `c`.`Country`, `c`.`Date`, `c`.`Emoji`, `c`.`Lat`, `c`.`Lng`, `c`.`Notes`, `c`.`UserId`
FROM (
    SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`FirstName`, `a`.`LastName`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`
    FROM `AspNetUsers` AS `a`
    WHERE `a`.`Id` = @__user_Id_0
    LIMIT 2
) AS `t`
LEFT JOIN `Workouts` AS `w` ON `t`.`Id` = `w`.`UserId`
LEFT JOIN `Cities` AS `c` ON `t`.`Id` = `c`.`UserId`
ORDER BY `t`.`Id`, `w`.`Id`
2025-11-16 20:07:29.469 +03:00 [INF] Executing ObjectResult, writing value of type 'MappyApplication.Models.user.AuthResponse'.
2025-11-16 20:07:29.470 +03:00 [INF] Executed action MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication) in 23.408ms
2025-11-16 20:07:29.470 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication)'
2025-11-16 20:07:29.470 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:8080/api/v1/auth/refresh-token - 200 null application/json; charset=utf-8 66.0207ms
2025-11-16 20:07:32.669 +03:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:8080/api/v1/cities - null null
2025-11-16 20:07:32.669 +03:00 [INF] CORS policy execution successful.
2025-11-16 20:07:32.670 +03:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:8080/api/v1/cities - 204 null null 0.98ms
2025-11-16 20:07:32.672 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:8080/api/v1/cities - application/json 214
2025-11-16 20:07:32.672 +03:00 [INF] CORS policy execution successful.
2025-11-16 20:07:32.690 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 20:07:32.690 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.CitiesController.AddAsynch (MappyApplication)'
2025-11-16 20:07:32.690 +03:00 [INF] Route matched with {action = "AddAsynch", controller = "Cities"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] AddAsynch(MappyApplication.Data.Cities) on controller MappyApplication.Controllers.CitiesController (MappyApplication).
2025-11-16 20:07:32.692 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-11-16 20:07:32.692 +03:00 [INF] Executed action MappyApplication.Controllers.CitiesController.AddAsynch (MappyApplication) in 1.9263ms
2025-11-16 20:07:32.692 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.CitiesController.AddAsynch (MappyApplication)'
2025-11-16 20:07:32.692 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:8080/api/v1/cities - 400 null application/problem+json; charset=utf-8 20.5282ms
2025-11-16 20:08:06.212 +03:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:8080/api/v1/auth/refresh-token - null null
2025-11-16 20:08:06.215 +03:00 [INF] CORS policy execution successful.
2025-11-16 20:08:06.217 +03:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:8080/api/v1/auth/refresh-token - 204 null null 4.7079ms
2025-11-16 20:08:06.218 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:8080/api/v1/auth/refresh-token - null 0
2025-11-16 20:08:06.218 +03:00 [INF] CORS policy execution successful.
2025-11-16 20:08:06.289 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 20:08:06.291 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication)'
2025-11-16 20:08:06.291 +03:00 [INF] Route matched with {action = "RefreshToken", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.user.AuthResponse] RefreshToken() on controller MappyApplication.Controllers.AuthController (MappyApplication).
2025-11-16 20:08:06.293 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__refreshToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`RefreshToken` = @__refreshToken_0
LIMIT 2
2025-11-16 20:08:06.296 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`FirstName`, `a`.`LastName`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`
FROM `AspNetUsers` AS `a`
WHERE `a`.`Id` = @__p_0
LIMIT 1
2025-11-16 20:08:06.301 +03:00 [INF] Executed DbCommand (4ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']

        UPDATE TOKENS
        SET Revoked = true, Expired = true
        WHERE UserId = @p0
          AND DeviceId = @p1
          AND Revoked = false
          AND Expired = false
2025-11-16 20:08:06.303 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a0`.`Name`
FROM `AspNetUserRoles` AS `a`
INNER JOIN `AspNetRoles` AS `a0` ON `a`.`RoleId` = `a0`.`Id`
WHERE `a`.`UserId` = @__userId_0
2025-11-16 20:08:06.305 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ClaimType`, `a`.`ClaimValue`, `a`.`UserId`
FROM `AspNetUserClaims` AS `a`
WHERE `a`.`UserId` = @__user_Id_0
2025-11-16 20:08:06.306 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a0`.`Name`
FROM `AspNetUserRoles` AS `a`
INNER JOIN `AspNetRoles` AS `a0` ON `a`.`RoleId` = `a0`.`Id`
WHERE `a`.`UserId` = @__userId_0
2025-11-16 20:08:06.307 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ClaimType`, `a`.`ClaimValue`, `a`.`UserId`
FROM `AspNetUserClaims` AS `a`
WHERE `a`.`UserId` = @__user_Id_0
2025-11-16 20:08:06.311 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (DbType = DateTime), @p2='?' (Size = 4000), @p3='?' (DbType = Boolean), @p4='?' (Size = 4000), @p5='?' (DbType = Boolean), @p6='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO `Tokens` (`AccessToken`, `CreatedAt`, `DeviceId`, `Expired`, `RefreshToken`, `Revoked`, `UserId`)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6);
SELECT `Id`
FROM `Tokens`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();
2025-11-16 20:08:06.311 +03:00 [INF] Added Token MappyApplication.Data.Token
2025-11-16 20:08:06.313 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessFailedCount`, `t`.`ConcurrencyStamp`, `t`.`Email`, `t`.`EmailConfirmed`, `t`.`FirstName`, `t`.`LastName`, `t`.`LockoutEnabled`, `t`.`LockoutEnd`, `t`.`NormalizedEmail`, `t`.`NormalizedUserName`, `t`.`PasswordHash`, `t`.`PhoneNumber`, `t`.`PhoneNumberConfirmed`, `t`.`SecurityStamp`, `t`.`TwoFactorEnabled`, `t`.`UserName`, `w`.`Id`, `w`.`Cadence`, `w`.`CityName`, `w`.`Coords`, `w`.`Date`, `w`.`Distance`, `w`.`Duration`, `w`.`Emoji`, `w`.`Pace`, `w`.`Type`, `w`.`UserId`, `c`.`Id`, `c`.`CityName`, `c`.`Country`, `c`.`Date`, `c`.`Emoji`, `c`.`Lat`, `c`.`Lng`, `c`.`Notes`, `c`.`UserId`
FROM (
    SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`FirstName`, `a`.`LastName`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`
    FROM `AspNetUsers` AS `a`
    WHERE `a`.`Id` = @__user_Id_0
    LIMIT 2
) AS `t`
LEFT JOIN `Workouts` AS `w` ON `t`.`Id` = `w`.`UserId`
LEFT JOIN `Cities` AS `c` ON `t`.`Id` = `c`.`UserId`
ORDER BY `t`.`Id`, `w`.`Id`
2025-11-16 20:08:06.313 +03:00 [INF] Executing ObjectResult, writing value of type 'MappyApplication.Models.user.AuthResponse'.
2025-11-16 20:08:06.316 +03:00 [INF] Executed action MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication) in 24.6332ms
2025-11-16 20:08:06.316 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication)'
2025-11-16 20:08:06.316 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:8080/api/v1/auth/refresh-token - 200 null application/json; charset=utf-8 97.9729ms
2025-11-16 20:08:30.962 +03:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:8080/api/v1/auth/refresh-token - null null
2025-11-16 20:08:30.963 +03:00 [INF] CORS policy execution successful.
2025-11-16 20:08:30.963 +03:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:8080/api/v1/auth/refresh-token - 204 null null 1.4071ms
2025-11-16 20:08:30.964 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:8080/api/v1/auth/refresh-token - null 0
2025-11-16 20:08:30.964 +03:00 [INF] CORS policy execution successful.
2025-11-16 20:08:31.021 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 20:08:31.022 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication)'
2025-11-16 20:08:31.022 +03:00 [INF] Route matched with {action = "RefreshToken", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[MappyApplication.Models.user.AuthResponse] RefreshToken() on controller MappyApplication.Controllers.AuthController (MappyApplication).
2025-11-16 20:08:31.024 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__refreshToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`RefreshToken` = @__refreshToken_0
LIMIT 2
2025-11-16 20:08:31.032 +03:00 [INF] Executed DbCommand (7ms) [Parameters=[@__p_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`FirstName`, `a`.`LastName`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`
FROM `AspNetUsers` AS `a`
WHERE `a`.`Id` = @__p_0
LIMIT 1
2025-11-16 20:08:31.045 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']

        UPDATE TOKENS
        SET Revoked = true, Expired = true
        WHERE UserId = @p0
          AND DeviceId = @p1
          AND Revoked = false
          AND Expired = false
2025-11-16 20:08:31.046 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a0`.`Name`
FROM `AspNetUserRoles` AS `a`
INNER JOIN `AspNetRoles` AS `a0` ON `a`.`RoleId` = `a0`.`Id`
WHERE `a`.`UserId` = @__userId_0
2025-11-16 20:08:31.046 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ClaimType`, `a`.`ClaimValue`, `a`.`UserId`
FROM `AspNetUserClaims` AS `a`
WHERE `a`.`UserId` = @__user_Id_0
2025-11-16 20:08:31.047 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a0`.`Name`
FROM `AspNetUserRoles` AS `a`
INNER JOIN `AspNetRoles` AS `a0` ON `a`.`RoleId` = `a0`.`Id`
WHERE `a`.`UserId` = @__userId_0
2025-11-16 20:08:31.047 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `a`.`Id`, `a`.`ClaimType`, `a`.`ClaimValue`, `a`.`UserId`
FROM `AspNetUserClaims` AS `a`
WHERE `a`.`UserId` = @__user_Id_0
2025-11-16 20:08:31.050 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (DbType = DateTime), @p2='?' (Size = 4000), @p3='?' (DbType = Boolean), @p4='?' (Size = 4000), @p5='?' (DbType = Boolean), @p6='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO `Tokens` (`AccessToken`, `CreatedAt`, `DeviceId`, `Expired`, `RefreshToken`, `Revoked`, `UserId`)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6);
SELECT `Id`
FROM `Tokens`
WHERE ROW_COUNT() = 1 AND `Id` = LAST_INSERT_ID();
2025-11-16 20:08:31.051 +03:00 [INF] Added Token MappyApplication.Data.Token
2025-11-16 20:08:31.052 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__user_Id_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessFailedCount`, `t`.`ConcurrencyStamp`, `t`.`Email`, `t`.`EmailConfirmed`, `t`.`FirstName`, `t`.`LastName`, `t`.`LockoutEnabled`, `t`.`LockoutEnd`, `t`.`NormalizedEmail`, `t`.`NormalizedUserName`, `t`.`PasswordHash`, `t`.`PhoneNumber`, `t`.`PhoneNumberConfirmed`, `t`.`SecurityStamp`, `t`.`TwoFactorEnabled`, `t`.`UserName`, `w`.`Id`, `w`.`Cadence`, `w`.`CityName`, `w`.`Coords`, `w`.`Date`, `w`.`Distance`, `w`.`Duration`, `w`.`Emoji`, `w`.`Pace`, `w`.`Type`, `w`.`UserId`, `c`.`Id`, `c`.`CityName`, `c`.`Country`, `c`.`Date`, `c`.`Emoji`, `c`.`Lat`, `c`.`Lng`, `c`.`Notes`, `c`.`UserId`
FROM (
    SELECT `a`.`Id`, `a`.`AccessFailedCount`, `a`.`ConcurrencyStamp`, `a`.`Email`, `a`.`EmailConfirmed`, `a`.`FirstName`, `a`.`LastName`, `a`.`LockoutEnabled`, `a`.`LockoutEnd`, `a`.`NormalizedEmail`, `a`.`NormalizedUserName`, `a`.`PasswordHash`, `a`.`PhoneNumber`, `a`.`PhoneNumberConfirmed`, `a`.`SecurityStamp`, `a`.`TwoFactorEnabled`, `a`.`UserName`
    FROM `AspNetUsers` AS `a`
    WHERE `a`.`Id` = @__user_Id_0
    LIMIT 2
) AS `t`
LEFT JOIN `Workouts` AS `w` ON `t`.`Id` = `w`.`UserId`
LEFT JOIN `Cities` AS `c` ON `t`.`Id` = `c`.`UserId`
ORDER BY `t`.`Id`, `w`.`Id`
2025-11-16 20:08:31.053 +03:00 [INF] Executing ObjectResult, writing value of type 'MappyApplication.Models.user.AuthResponse'.
2025-11-16 20:08:31.053 +03:00 [INF] Executed action MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication) in 31.2277ms
2025-11-16 20:08:31.053 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.AuthController.RefreshToken (MappyApplication)'
2025-11-16 20:08:31.053 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:8080/api/v1/auth/refresh-token - 200 null application/json; charset=utf-8 89.2324ms
2025-11-16 20:08:52.829 +03:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:8080/api/v1/cities - null null
2025-11-16 20:08:52.830 +03:00 [INF] CORS policy execution successful.
2025-11-16 20:08:52.830 +03:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:8080/api/v1/cities - 204 null null 1.6759ms
2025-11-16 20:08:52.836 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:8080/api/v1/cities - application/json 201
2025-11-16 20:08:52.837 +03:00 [INF] CORS policy execution successful.
2025-11-16 20:08:52.869 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__accessToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT `t`.`Id`, `t`.`AccessToken`, `t`.`CreatedAt`, `t`.`DeviceId`, `t`.`Expired`, `t`.`RefreshToken`, `t`.`Revoked`, `t`.`UserId`
FROM `Tokens` AS `t`
WHERE `t`.`AccessToken` = @__accessToken_0
LIMIT 2
2025-11-16 20:08:52.870 +03:00 [INF] Executing endpoint 'MappyApplication.Controllers.CitiesController.AddAsynch (MappyApplication)'
2025-11-16 20:08:52.870 +03:00 [INF] Route matched with {action = "AddAsynch", controller = "Cities"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] AddAsynch(MappyApplication.Data.Cities) on controller MappyApplication.Controllers.CitiesController (MappyApplication).
2025-11-16 20:08:52.872 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-11-16 20:08:52.872 +03:00 [INF] Executed action MappyApplication.Controllers.CitiesController.AddAsynch (MappyApplication) in 2.435ms
2025-11-16 20:08:52.872 +03:00 [INF] Executed endpoint 'MappyApplication.Controllers.CitiesController.AddAsynch (MappyApplication)'
2025-11-16 20:08:52.872 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:8080/api/v1/cities - 400 null application/problem+json; charset=utf-8 35.9622ms
